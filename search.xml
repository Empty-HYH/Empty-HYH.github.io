<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Sqoop é¢è¯•é¢˜è§£æ</title>
      <link href="post/420614eb.html"/>
      <url>post/420614eb.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="Sqoop-å‚æ•°"><a href="#Sqoop-å‚æ•°" class="headerlink" title="Sqoop å‚æ•°"></a>Sqoop å‚æ•°</h3></blockquote><p><strong>Sqoop å¯¼å…¥æ•°æ®åˆ° HDFS ä¸­çš„å‚æ•°</strong></p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&#x2F;opt&#x2F;module&#x2F;sqoop&#x2F;bin&#x2F;sqoop import \--connect jdbcçš„urlå­—ç¬¦ä¸²\--username è´¦å·\--password å¯†ç \# HDFS ç›®æ ‡çš„ç›®å½•--target-dir \# å¯¼å…¥çš„ç›®æ ‡ç›®å½•å¦‚æœå­˜åœ¨åˆ™åˆ é™¤é‚£ä¸ªç›®å½•--delete-target-dir \# ç›¸å½“äº -mï¼Œå¹¶è¡Œå¯¼å…¥æ—¶ MapTask çš„ä¸ªæ•°--num-mappers \--fields-terminated-by \# æŒ‡å®šæ»¡è¶³ sql å’Œæ¡ä»¶çš„æ•°æ®å¯¼å…¥# --queryï¼šå¢åŠ æ£€ç´¢æ¡ä»¶éƒ¨åˆ†æ•°æ®æŠ½å–# $CONDITIONSï¼šæ•°æ®åˆ†å‰²æ¡ä»¶çš„å ä½ç¬¦--query &quot;$2&quot; &#39;and $CONDITIONS;&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>Sqoop å¯¼å…¥æ•°æ®åˆ° Hive ä¸­çš„å‚æ•°</strong></p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># ä¸€æ­¥å°†è¡¨ç»“æ„å’Œæ•°æ®éƒ½å¯¼å…¥åˆ° hive ä¸­bin&#x2F;sqoop import \--connect jdbcçš„urlå­—ç¬¦ä¸²\--table mysqlä¸­çš„è¡¨å\--username è´¦å·\--password å¯†ç \--hive-import \--m MapTaskçš„ä¸ªæ•° \--hive-database hiveä¸­çš„æ•°æ®åº“å \<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>RDBMS ä¸­çš„å¢é‡æ•°æ®å¦‚ä½•å¯¼å…¥</strong></p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># æŒ‡å®šåˆ¤æ–­æ£€æŸ¥çš„ä¾æ®å­—æ®µ--check-column å­—æ®µå \# ç”¨æ¥æŒ‡å®šå¢é‡å½“å¦‚çš„æ¨¡å¼ï¼ˆModeï¼‰ï¼Œappend å’Œ lastmodified--incremental å¯¼å…¥æ¨¡å¼ \--last-value ä¸Šä¸€æ¬¡å¯¼å…¥ç»“æŸçš„æ—¶é—´ \--m MapTaskçš„ä¸ªæ•° \--merge-key ä¸»é”®<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¡¥å……ï¼š</strong>ä½¿ç”¨ <code>--merge-key</code> åˆå¹¶æ¨¡å¼ï¼Œå¦‚æœæ˜¯æ–°å¢çš„æ•°æ®åˆ™å¢åŠ ï¼Œå› ä¸º <code>incremental</code> æ˜¯ <code>lastmodified</code> æ¨¡å¼ï¼Œé‚£ä¹ˆå½“æœ‰æ•°æ®æ›´æ–°äº†ï¼Œè€Œä¸»é”®æ²¡æœ‰å˜ï¼Œåˆ™ä¼šè¿›è¡Œåˆå¹¶ã€‚</p><p><code>--check-column</code> å­—æ®µåï¼šå½“æ•°æ®æ›´æ–°å’Œä¿®æ”¹ï¼Œè¿™ä¸ªå­—æ®µçš„æ—¶é—´ä¹Ÿè¦éšä¹‹å˜åŒ–ï¼ŒMySQL ä¸­å»ºè¡¨æ—¶ï¼Œè¯¥å­—æ®µä¿®é¥°ç¬¦ã€å­—æ®µå <code>timeatamp default current_timestamp on update current_timestamp</code></p><blockquote><h3 id="Sqoop-å¯¼å…¥å¯¼å‡º-NULL-å­˜å‚¨ä¸€è‡´æ€§é—®é¢˜"><a href="#Sqoop-å¯¼å…¥å¯¼å‡º-NULL-å­˜å‚¨ä¸€è‡´æ€§é—®é¢˜" class="headerlink" title="Sqoop å¯¼å…¥å¯¼å‡º NULL å­˜å‚¨ä¸€è‡´æ€§é—®é¢˜"></a>Sqoop å¯¼å…¥å¯¼å‡º NULL å­˜å‚¨ä¸€è‡´æ€§é—®é¢˜</h3></blockquote><p>Hive ä¸­çš„ NULL åœ¨åº•å±‚æ˜¯ä»¥ <code>\N</code> æ¥å­˜å‚¨çš„ï¼Œè€Œ MySQL ä¸­çš„ NULL åœ¨åº•å±‚å°±æ˜¯ NULL</p><p>ä¸ºäº†ä¿è¯æ•°æ®ä¸¤ç«¯çš„ä¸€è‡´æ€§</p><ul><li>åœ¨å¯¼å‡ºæ•°æ®æ—¶é‡‡ç”¨ <code>--input-null-string</code> å’Œ <code>--input-null-non-string</code> ä¸¤ä¸ªå‚æ•°</li><li>åœ¨å¯¼å…¥æ•°æ®æ—¶é‡‡ç”¨ <code>--null-string</code> å’Œ <code>--null-non-string</code></li></ul><blockquote><h3 id="Sqoopæ•°æ®å¯¼å‡ºä¸€è‡´æ€§é—®é¢˜"><a href="#Sqoopæ•°æ®å¯¼å‡ºä¸€è‡´æ€§é—®é¢˜" class="headerlink" title="Sqoopæ•°æ®å¯¼å‡ºä¸€è‡´æ€§é—®é¢˜"></a>Sqoopæ•°æ®å¯¼å‡ºä¸€è‡´æ€§é—®é¢˜</h3></blockquote><p><strong>åœºæ™¯ï¼š</strong></p><p>å¦‚æœ Sqoop åœ¨å¯¼å‡ºæ•°æ®åˆ° MySQL æ—¶ï¼Œä½¿ç”¨ 4 ä¸ª Map ä»»åŠ¡ï¼Œè¿‡ç¨‹ä¸­æœ‰ 2 ä¸ªä»»åŠ¡å¤±è´¥ï¼Œæ­¤æ—¶ MySQL ä¸­å­˜å‚¨äº†å¦å¤–ä¸¤ä¸ª Map ä»»åŠ¡å¯¼å…¥çš„æ•°æ®ï¼Œä½†æ˜¯æ­¤æ—¶è€æ¿æ­£å¥½çœ‹åˆ°äº†è¿™ä¸ªæŠ¥è¡¨æ•°æ®ã€‚è€Œå¼€å‘å·¥ç¨‹å¸ˆå‘ç°ä»»åŠ¡å¤±è´¥åï¼Œä¼šè°ƒè¯•é—®é¢˜å¹¶æœ€ç»ˆå°†å…¨éƒ¨æ•°æ®æ­£ç¡®çš„å¯¼å…¥åˆ° MySQLï¼Œé‚£åœ¨åé¢è€æ¿å†æ¬¡çœ‹æŠ¥è¡¨æ•°æ®æ—¶ï¼Œå‘ç°æœ¬æ¬¡çœ‹åˆ°çš„æ•°æ®ä¸ä¹‹å‰çš„ä¸ä¸€è‡´ï¼Œè¿™åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¼ä¸å…è®¸çš„ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆä¸€ï¼š</strong></p><p>å› ä¸º Sqoop å°†å¯¼å‡ºè¿‡ç¨‹åˆ†è§£ä¸ºå¤šä¸ªäº‹åŠ¡ï¼Œæ‰€ä»¥ä¸€ä¸ªå¤±è´¥çš„å¯¼å‡ºä½œä¸šå¯èƒ½ä¼šå¯¼è‡´éƒ¨åˆ†æ•°æ®è¢«æäº¤åˆ°æ•°æ®åº“ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½è¿›ä¸€æ­¥å¯¼è‡´åç»­ä½œä¸šç”±äºæ’å…¥å†²çªè€Œå¤±è´¥ï¼Œæˆ–è€…åœ¨å…¶ä»–æƒ…å†µä¸‹å¯¼è‡´é‡å¤æ•°æ®ã€‚æ‚¨å¯ä»¥é€šè¿‡ <code>--stage-table</code> é€‰é¡¹æŒ‡å®šä¸€ä¸ªæš‚å­˜è¡¨ï¼ˆstagingï¼‰æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªè¡¨å……å½“ä¸€ä¸ªè¾…åŠ©è¡¨ï¼Œç”¨äºæš‚å­˜å¯¼å‡ºçš„æ•°æ®ã€‚é˜¶æ®µæ•°æ®æœ€ç»ˆåœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ç§»åŠ¨åˆ°ç›®æ ‡è¡¨ã€‚</p><blockquote><p>å®˜ç½‘ï¼š<a href="http://sqoop.apache.org/docs/1.4.6/SqoopUserGuide.html">http://sqoop.apache.org/docs/1.4.6/SqoopUserGuide.html</a><br>Since Sqoop breaks down export process into multiple transactions, it is possible that a failed export job may result in partial data being committed to the database. This can further lead to subsequent jobs failing due to insert collisions in some cases, or lead to duplicated data in others. You can overcome this problem by specifying a staging table via the --staging-table option which acts as an auxiliary table that is used to stage exported data. The staged data is finally moved to the destination table in a single transaction.</p></blockquote><p>ä½¿ç”¨ <code>--stage-table</code> é€‰é¡¹ï¼Œå°† HDFS ä¸­çš„æ•°æ®å…ˆå¯¼å…¥åˆ°è¾…åŠ©è¡¨ä¸­ï¼Œå½“ HDFS ä¸­çš„æ•°æ®å¯¼å‡ºæˆåŠŸåï¼Œè¾…åŠ©è¡¨ä¸­çš„æ•°æ®åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­å¯¼å‡ºåˆ°ç›®æ ‡è¡¨ä¸­ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹è¦ä¹ˆå®Œå…¨æˆåŠŸï¼Œè¦ä¹ˆå®Œå…¨å¤±è´¥ï¼‰</p><p>ä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ staging è¿™ä¸ªé€‰é¡¹ï¼Œstaging è¡¨åœ¨è¿è¡Œä»»åŠ¡å‰å¯èƒ½æ˜¯ç©ºçš„ï¼Œå¦‚æœä¸ä¸ºç©ºå°±ä½¿ç”¨ <code>--clear-staging-table</code> é…ç½®</p><p>å¦‚æœ staging è¡¨ä¸­æœ‰æ•°æ®ï¼Œå¹¶ä¸”ä½¿ç”¨äº† <code>--clear-staging-table</code> é€‰é¡¹ï¼ŒSqoop æ‰§è¡Œå¯¼å‡ºä»»åŠ¡å‰ä¼šåˆ é™¤ staging è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®</p><p><strong>æ³¨æ„ï¼š</strong><code>--direct</code> å¯¼å…¥æ—¶ staging æ–¹å¼æ˜¯ä¸å¯ç”¨çš„ï¼Œä½¿ç”¨äº† <code>--update-key</code> é€‰é¡¹æ—¶ staging æ–¹å¼ä¹Ÿä¸å¯ç”¨</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sqoop export \--connect url \--username root \--password 123456 \--table app_cource_study_report \--columns watch_video_cnt,complete_video_cnt,dt \--fields-terminated-by &quot;\t&quot; \--export-dir &quot;&#x2F;user&#x2F;hive&#x2F;warehouse&#x2F;tmp.db&#x2F;app_cource_study_analysis_$&#123;day&#125;&quot; \--staging-table app_cource_study_report_tmp \--clear-staging-table \--input-null-string &#39;\\N&#39; \--null-non-string &#39;\\N&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è§£å†³æ–¹æ¡ˆäºŒï¼š</strong></p><p>è®¾ç½® map æ•°é‡ä¸º 1 ä¸ªï¼ˆä¸æ¨èï¼Œé¢è¯•å®˜æƒ³è¦çš„ç­”æ¡ˆä¸æ˜¯è¿™ä¸ªï¼‰ã€‚</p><p>å¤šä¸ª Map ä»»åŠ¡æ—¶ï¼Œé‡‡ç”¨ <code>--staging-table</code> æ–¹å¼ï¼Œä»ç„¶å¯ä»¥è§£å†³æ•°æ®ä¸€è‡´æ€§é—®é¢˜ã€‚</p><blockquote><h3 id="Sqoopåº•å±‚è¿è¡Œçš„ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Sqoopåº•å±‚è¿è¡Œçš„ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Sqoopåº•å±‚è¿è¡Œçš„ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Sqoopåº•å±‚è¿è¡Œçš„ä»»åŠ¡æ˜¯ä»€ä¹ˆï¼Ÿ</h3></blockquote><p>åªæœ‰ Map é˜¶æ®µï¼Œæ²¡æœ‰ Reduce é˜¶æ®µçš„ä»»åŠ¡ã€‚é»˜è®¤æ˜¯ 4 ä¸ª MapTaskã€‚</p><blockquote><h3 id="MapTask-å¹¶è¡Œåº¦è®¾ç½®å¤§äº-1-çš„é—®é¢˜ï¼Ÿ"><a href="#MapTask-å¹¶è¡Œåº¦è®¾ç½®å¤§äº-1-çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="MapTask å¹¶è¡Œåº¦è®¾ç½®å¤§äº 1 çš„é—®é¢˜ï¼Ÿ"></a>MapTask å¹¶è¡Œåº¦è®¾ç½®å¤§äº 1 çš„é—®é¢˜ï¼Ÿ</h3></blockquote><p>å¹¶è¡Œåº¦å¯¼å…¥æ•°æ®çš„æ—¶å€™éœ€è¦æŒ‡å®šæ ¹æ®å“ªä¸ªå­—æ®µè¿›è¡Œåˆ‡åˆ†ï¼Œè¯¥å­—æ®µé€šå¸¸æ˜¯ä¸»é”®æˆ–è€…æ˜¯è‡ªå¢é•¿ä¸é‡å¤çš„æ•°å€¼ç±»å‹å­—æ®µï¼Œå¦åˆ™ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯ï¼š</p><p><code>Import failed: No primary key could be found for table. Please specify one with --split-by or perform a sequential import with &#39;-m 1&#39;.</code></p><p>é‚£ä¹ˆå°±æ˜¯è¯´å½“ MapTask å¹¶è¡Œåº¦å¤§äº 1 æ—¶ï¼Œä¸‹é¢ä¸¤ä¸ªå‚æ•°è¦åŒæ—¶ä½¿ç”¨ï¼š</p><ul><li><code>--split-by id</code>ï¼šæŒ‡å®šæ ¹æ® id å­—æ®µè¿›è¡Œåˆ‡åˆ†ï¼›</li><li><code>--m n</code>ï¼šæŒ‡å®š map å¹¶è¡Œåº¦ n ä¸ªã€‚</li></ul><blockquote><h3 id="Sqoop-ä¸€å¤©å¯¼å…¥å¤šå°‘æ•°æ®ï¼Ÿ"><a href="#Sqoop-ä¸€å¤©å¯¼å…¥å¤šå°‘æ•°æ®ï¼Ÿ" class="headerlink" title="Sqoop ä¸€å¤©å¯¼å…¥å¤šå°‘æ•°æ®ï¼Ÿ"></a>Sqoop ä¸€å¤©å¯¼å…¥å¤šå°‘æ•°æ®ï¼Ÿ</h3></blockquote><p>æ¯å¤© 100 ä¸‡æ´»è·ƒ --&gt; 10 ä¸‡è®¢å•ï¼Œ1 äºº 10 æ¡ï¼Œæ¯å¤© 1g å·¦å³ä¸šåŠ¡æ•°æ®</p><p>Sqoop æ¯å¤©å°† 1G çš„æ•°æ®é‡å¯¼å…¥åˆ°æ•°ä»“</p><blockquote><h3 id="Sqoopæ•°æ®å¯¼å‡ºçš„æ—¶å€™ä¸€æ¬¡æ‰§è¡Œå¤šé•¿æ—¶é—´ï¼Ÿ"><a href="#Sqoopæ•°æ®å¯¼å‡ºçš„æ—¶å€™ä¸€æ¬¡æ‰§è¡Œå¤šé•¿æ—¶é—´ï¼Ÿ" class="headerlink" title="Sqoopæ•°æ®å¯¼å‡ºçš„æ—¶å€™ä¸€æ¬¡æ‰§è¡Œå¤šé•¿æ—¶é—´ï¼Ÿ"></a>Sqoopæ•°æ®å¯¼å‡ºçš„æ—¶å€™ä¸€æ¬¡æ‰§è¡Œå¤šé•¿æ—¶é—´ï¼Ÿ</h3></blockquote><p>æ¯å¤©æ™šä¸Š 00ï¼š30 å¼€å§‹æ‰§è¡Œï¼ŒSqoop ä»»åŠ¡ä¸€èˆ¬æƒ…å†µ 40-50 åˆ†é’Ÿçš„éƒ½æœ‰ï¼Œå–å†³äºæ•°æ®é‡ï¼ˆ11.11ï¼Œ6.18 ç­‰æ´»åŠ¨åœ¨ 1 ä¸ªå°æ—¶å·¦å³ï¼‰ã€‚</p><p>Sqoop ä»»åŠ¡ 5 åˆ†é’Ÿ ~ 2 å°æ—¶çš„éƒ½æœ‰ï¼Œå–å†³äºæ•°æ®é‡ã€‚</p><blockquote><h3 id="Sqoop-åœ¨å¯¼å…¥æ•°æ®çš„æ—¶å€™æ•°æ®å€¾æ–œï¼Ÿ"><a href="#Sqoop-åœ¨å¯¼å…¥æ•°æ®çš„æ—¶å€™æ•°æ®å€¾æ–œï¼Ÿ" class="headerlink" title="Sqoop åœ¨å¯¼å…¥æ•°æ®çš„æ—¶å€™æ•°æ®å€¾æ–œï¼Ÿ"></a>Sqoop åœ¨å¯¼å…¥æ•°æ®çš„æ—¶å€™æ•°æ®å€¾æ–œï¼Ÿ</h3></blockquote><p>åœ¨è¯´æ•°æ®å€¾æ–œä¹‹å‰ï¼Œæˆ‘ä»¬è®¾æƒ³æ•°æ®å¹¶è¡ŒæŠ½æ•°æœ€ç†æƒ³çš„æƒ…å†µå°±æ˜¯æ‰€æœ‰çš„å¹¶è¡Œå®ä¾‹åŒæ—¶å®Œæˆï¼Œæœ¨æ¡¶åŸç†ï¼Œæ•°æ®æŠ½æ•°æ—¶é—´çš„é•¿çŸ­å–å†³äºè€—æ—¶æœ€é•¿çš„é‚£ä¸ªå®ä¾‹ã€‚</p><p>ç”±äºå„ä¸ªå®ä¾‹è¢«åˆ†é…çš„æ•°æ®é‡ä¸å‡è€Œå¯¼è‡´åˆ†é…åˆ°æ•°æ®é‡è¾ƒå°‘çš„å®ä¾‹æ—©æ—©å®Œæˆï¼Œè€Œè¢«åˆ†é…å¤§é‡æ•°æ®çš„å®ä¾‹è¿Ÿè¿Ÿæ— æ³•å®Œæˆï¼Œå¯¼è‡´æ•´ä¸ªä½œä¸šè¿è¡Œæ—¶é—´å¾ˆé•¿çš„ç°è±¡å°±æ˜¯æ•°æ®å€¾æ–œé€ æˆçš„ã€‚</p><p>æ•°æ®å€¾æ–œæ¦‚æ‹¬ä¸ºä¸€å¥è¯ï¼š<strong>æ•°æ®åˆ†é…ä¸å‡</strong>ã€‚</p><p>åœ¨æ•°æ®è¡¨æ²¡æœ‰ç¬¦åˆè¦æ±‚çš„å­—æ®µçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±ä¸´æ—¶ç®€å•åˆ›å»ºç†æƒ³çš„å­—æ®µï¼š</p><p>Sqoop æŠ½æ•°çš„å¹¶è¡ŒåŒ–ä¸»è¦è®¾è®¡åˆ°ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li><code>--num-mappers</code>ï¼šå¯åŠ¨ n ä¸ª map æ¥å¹¶è¡Œå¯¼å…¥æ•°æ®ï¼Œé»˜è®¤ 4 ä¸ªï¼›</li><li><code>--split-by</code>ï¼šæŒ‰ç…§æŸä¸€åˆ—æ¥åˆ‡åˆ†è¡¨çš„å·¥ä½œå•å…ƒã€‚</li></ul><p>å…·ä½“åŸç†æ˜¯é€šè¿‡ <code>ROWNUM()</code> ç”Ÿæˆä¸€ä¸ªä¸¥æ ¼å‡åŒ€åˆ†å¸ƒçš„å­—æ®µï¼Œç„¶åæŒ‡å®šä¸ºåˆ†å‰²å­—æ®µã€‚</p><blockquote><h3 id="Sqoop-æ•°æ®å¯¼å‡º-Parquetï¼ˆé¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜ï¼‰"><a href="#Sqoop-æ•°æ®å¯¼å‡º-Parquetï¼ˆé¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜ï¼‰" class="headerlink" title="Sqoop æ•°æ®å¯¼å‡º Parquetï¼ˆé¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜ï¼‰"></a>Sqoop æ•°æ®å¯¼å‡º Parquetï¼ˆé¡¹ç›®ä¸­é‡åˆ°çš„é—®é¢˜ï¼‰</h3></blockquote><p>ADS å±‚æ•°æ®ç”¨ Sqoop å¾€ MySQL ä¸­å¯¼å…¥æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœç”¨äº† ORCï¼ˆParquetï¼‰ä¸èƒ½å¯¼å…¥ï¼Œéœ€è½¬åŒ–æˆ text æ ¼å¼ã€‚</p><ol><li>åˆ›å»ºä¸´æ—¶è¡¨ï¼ŒæŠŠ Parquet ä¸­è¡¨æ•°æ®å¯¼å…¥åˆ°ä¸´æ—¶è¡¨ï¼ŒæŠŠä¸´æ—¶è¡¨å¯¼å‡ºåˆ°ç›®æ ‡è¡¨ç”¨äºå¯è§†åŒ–ï¼›</li><li>Sqoop é‡Œé¢æœ‰å‚æ•°ï¼Œå¯ä»¥ç›´æ¥æŠŠ Parquet è½¬æ¢ä¸º textï¼›</li><li>ADS å±‚å»ºè¡¨çš„æ—¶å€™å°±ä¸è¦å»º Parquet è¡¨ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸš¢Sqoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hive SQL å¤§å…¨</title>
      <link href="post/7891b2e6.html"/>
      <url>post/7891b2e6.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡åŸºæœ¬æ¶µç›–äº† Hive æ—¥å¸¸ä½¿ç”¨çš„æ‰€æœ‰ SQLï¼Œå› ä¸º SQL å¤ªå¤šï¼Œæ‰€ä»¥å°† SQL è¿›è¡Œäº†å¦‚ä¸‹åˆ†ç±»ï¼š</p><ol><li><p><a href="#Hive-çš„-DDL-è¯­æ³•">DDL è¯­å¥</a>ï¼ˆæ•°æ®å®šä¹‰è¯­å¥ï¼‰ï¼š</p><ol><li><a href="#å¯¹æ•°æ®åº“çš„æ“ä½œ">å¯¹æ•°æ®åº“çš„æ“ä½œ</a>ï¼šåŒ…å«åˆ›å»ºã€ä¿®æ”¹æ•°æ®åº“ã€‚</li><li><a href="#å¯¹æ•°æ®è¡¨çš„æ“ä½œ">å¯¹æ•°æ®è¡¨çš„æ“ä½œ</a>ï¼šåˆ†ä¸ºå†…éƒ¨è¡¨åŠå¤–éƒ¨è¡¨ï¼Œåˆ†åŒºè¡¨å’Œåˆ†æ¡¶è¡¨ã€‚</li></ol></li><li><p><a href="#Hive-çš„-DQL-è¯­æ³•">DQL è¯­å¥</a>ï¼ˆæ•°æ®æŸ¥è¯¢è¯­å¥ï¼‰ï¼š</p><ol><li><a href="#å•è¡¨æŸ¥è¯¢ã€å…³è”æŸ¥è¯¢">å•è¡¨æŸ¥è¯¢ã€å…³è”æŸ¥è¯¢</a>ã€‚</li><li><a href="#Hive-å‡½æ•°">Hive å‡½æ•°</a>ï¼šåŒ…å«èšåˆå‡½æ•°ï¼Œæ¡ä»¶å‡½æ•°ï¼Œæ—¥æœŸå‡½æ•°ï¼Œå­—ç¬¦ä¸²å‡½æ•°ç­‰ã€‚</li><li><a href="#è¡Œè½¬åˆ—åŠåˆ—è½¬è¡Œ">è¡Œè½¬åˆ—åŠåˆ—è½¬è¡Œ</a>ï¼šlateral view ä¸ explode ä»¥åŠ reflectã€‚</li><li><a href="#çª—å£å‡½æ•°ä¸åˆ†æå‡½æ•°">çª—å£å‡½æ•°ä¸åˆ†æå‡½æ•°</a>ã€‚</li><li><a href="#å…¶ä»–ä¸€äº›çª—å£å‡½æ•°">å…¶ä»–ä¸€äº›çª—å£å‡½æ•°</a>ã€‚</li></ol></li></ol><h1 id="Hive-çš„-DDL-è¯­æ³•"><a href="#Hive-çš„-DDL-è¯­æ³•" class="headerlink" title="Hive çš„ DDL è¯­æ³•"></a>Hive çš„ DDL è¯­æ³•</h1><h2 id="å¯¹æ•°æ®åº“çš„æ“ä½œ"><a href="#å¯¹æ•°æ®åº“çš„æ“ä½œ" class="headerlink" title="å¯¹æ•°æ®åº“çš„æ“ä½œ"></a>å¯¹æ•°æ®åº“çš„æ“ä½œ</h2><h3 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> myhive<span class="token punctuation">;</span><span class="token comment"># è¯´æ˜ï¼šhive çš„è¡¨å­˜æ”¾ä½ç½®æ¨¡å¼æ˜¯ç”± hive-site.xml å½“ä¸­çš„ä¸€ä¸ªå±æ€§æŒ‡å®šçš„ï¼šhive.metastore.warehouse.dir</span><span class="token comment"># åˆ›å»ºæ•°æ®åº“å¹¶æŒ‡å®š HDFS å­˜å‚¨ä½ç½® :</span><span class="token keyword">create</span> <span class="token keyword">database</span> myhive2 location <span class="token string">'/myhive2'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="ä¿®æ”¹æ•°æ®åº“"><a href="#ä¿®æ”¹æ•°æ®åº“" class="headerlink" title="ä¿®æ”¹æ•°æ®åº“"></a>ä¿®æ”¹æ•°æ®åº“</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">database</span> myhive2 <span class="token keyword">set</span> dbproperties<span class="token punctuation">(</span><span class="token string">'createtime'</span><span class="token operator">=</span><span class="token string">'20210329'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>è¯´æ˜ï¼š</strong>å¯ä»¥ä½¿ç”¨ <code>alter database</code> å‘½ä»¤æ¥ä¿®æ”¹æ•°æ®åº“çš„ä¸€äº›å±æ€§ã€‚ä½†æ˜¯æ•°æ®åº“çš„å…ƒæ•°æ®ä¿¡æ¯æ˜¯ä¸å¯æ›´æ”¹çš„ï¼ŒåŒ…æ‹¬æ•°æ®åº“çš„åç§°ä»¥åŠæ•°æ®åº“æ‰€åœ¨çš„ä½ç½®</p><h3 id="æŸ¥çœ‹æ•°æ®åº“ä¿¡æ¯"><a href="#æŸ¥çœ‹æ•°æ®åº“ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹æ•°æ®åº“ä¿¡æ¯"></a>æŸ¥çœ‹æ•°æ®åº“ä¿¡æ¯</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æŸ¥çœ‹æ•°æ®åº“åŸºæœ¬ä¿¡æ¯</span>hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">desc</span> <span class="token keyword">database</span> myhive2<span class="token punctuation">;</span><span class="token comment"># æŸ¥çœ‹æ•°æ®åº“æ›´å¤šè¯¦ç»†ä¿¡æ¯</span>hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">desc</span> <span class="token keyword">database</span> <span class="token keyword">extended</span> myhive2<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="åˆ é™¤æ•°æ®åº“"><a href="#åˆ é™¤æ•°æ®åº“" class="headerlink" title="åˆ é™¤æ•°æ®åº“"></a>åˆ é™¤æ•°æ®åº“</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># åˆ é™¤ä¸€ä¸ªç©ºæ•°æ®åº“ï¼Œå¦‚æœæ•°æ®åº“ä¸‹é¢æœ‰æ•°æ®è¡¨ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™</span><span class="token keyword">drop</span> <span class="token keyword">database</span> myhive2<span class="token punctuation">;</span><span class="token comment"># å¼ºåˆ¶åˆ é™¤æ•°æ®åº“ï¼ŒåŒ…å«æ•°æ®åº“ä¸‹é¢çš„è¡¨ä¸€èµ·åˆ é™¤</span><span class="token keyword">drop</span> <span class="token keyword">database</span> myhive <span class="token keyword">cascade</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å¯¹æ•°æ®è¡¨çš„æ“ä½œ"><a href="#å¯¹æ•°æ®è¡¨çš„æ“ä½œ" class="headerlink" title="å¯¹æ•°æ®è¡¨çš„æ“ä½œ"></a>å¯¹æ•°æ®è¡¨çš„æ“ä½œ</h2><h3 id="å¯¹ç®¡ç†è¡¨ï¼ˆå†…éƒ¨è¡¨ï¼‰çš„æ“ä½œ"><a href="#å¯¹ç®¡ç†è¡¨ï¼ˆå†…éƒ¨è¡¨ï¼‰çš„æ“ä½œ" class="headerlink" title="å¯¹ç®¡ç†è¡¨ï¼ˆå†…éƒ¨è¡¨ï¼‰çš„æ“ä½œ"></a>å¯¹ç®¡ç†è¡¨ï¼ˆå†…éƒ¨è¡¨ï¼‰çš„æ“ä½œ</h3><h4 id="å»ºå†…éƒ¨è¡¨"><a href="#å»ºå†…éƒ¨è¡¨" class="headerlink" title="å»ºå†…éƒ¨è¡¨"></a>å»ºå†…éƒ¨è¡¨</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">use</span> myhive<span class="token punctuation">;</span> <span class="token comment">-- ä½¿ç”¨myhiveæ•°æ®åº“</span>hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">create</span> <span class="token keyword">table</span> stu<span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span>name string<span class="token punctuation">)</span><span class="token punctuation">;</span>hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">insert</span> <span class="token keyword">into</span> stu <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">insert</span> <span class="token keyword">into</span> stu <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"zhangsan"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"lisi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- ä¸€æ¬¡æ’å…¥å¤šæ¡æ•°æ®</span>hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="Hive-å»ºè¡¨æ—¶å€™çš„å­—æ®µç±»å‹"><a href="#Hive-å»ºè¡¨æ—¶å€™çš„å­—æ®µç±»å‹" class="headerlink" title="Hive å»ºè¡¨æ—¶å€™çš„å­—æ®µç±»å‹:"></a>Hive å»ºè¡¨æ—¶å€™çš„å­—æ®µç±»å‹:</h4><p><strong>åŸå§‹ç±»å‹</strong></p><div class="table-container"><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th><th>å­—é¢é‡ç¤ºä¾‹</th></tr></thead><tbody><tr><td>BOOLEAN</td><td>true/false</td><td>TRUE</td></tr><tr><td>TINYINT</td><td>1 å­—èŠ‚çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œ-128~127</td><td>1Y</td></tr><tr><td>SMALLINT</td><td>2 ä¸ªå­—èŠ‚çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œ-32768~32767</td><td>1S</td></tr><tr><td>INT</td><td>4 ä¸ªå­—èŠ‚çš„å¸¦ç¬¦å·æ•´æ•°</td><td>1</td></tr><tr><td>BIGINT</td><td>8 å­—èŠ‚å¸¦ç¬¦å·æ•´æ•°</td><td>1L</td></tr><tr><td>FLOAT</td><td>4 å­—èŠ‚å•ç²¾åº¦æµ®ç‚¹æ•°</td><td>1.0</td></tr><tr><td>DOUBLE</td><td>8 å­—èŠ‚åŒç²¾åº¦æµ®ç‚¹æ•°</td><td>1.0</td></tr><tr><td>DEICIMAL</td><td>ä»»æ„ç²¾åº¦çš„å¸¦ç¬¦å·å°æ•°</td><td>1.0</td></tr><tr><td>STRING</td><td>å­—ç¬¦ä¸²ï¼Œå˜é•¿</td><td>&quot;a&quot;, &#39;b&#39;</td></tr><tr><td>VARCHAR</td><td>å˜é•¿å­—ç¬¦ä¸²</td><td>&quot;a&quot;, &#39;b&#39;</td></tr><tr><td>CHAR</td><td>å›ºå®šé•¿åº¦å­—ç¬¦ä¸²</td><td>&quot;a&quot;, &#39;b&#39;</td></tr><tr><td>BINARY</td><td>å­—èŠ‚æ•°ç»„</td><td>æ— æ³•è¡¨ç¤º</td></tr><tr><td>TIMESTAMP</td><td>æ—¶é—´æˆ³ï¼Œæ¯«ç§’å€¼ç²¾åº¦</td><td>162327493795</td></tr><tr><td>DATE</td><td>æ—¥æœŸ</td><td>â€˜2021-03-29&#39;</td></tr><tr><td>INTERVAL</td><td>æ—¶é—´é¢‘ç‡é—´éš”</td><td>&nbsp;</td></tr></tbody></table></div><p><strong>å¤æ‚ç±»å‹</strong></p><div class="table-container"><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th><th>å­—é¢é‡ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ARRAY</td><td>æœ‰åºçš„çš„åŒç±»å‹çš„é›†åˆ</td><td>array(1, 2)</td></tr><tr><td>MAP</td><td>key-valueï¼Œkey å¿…é¡»ä¸ºåŸå§‹ç±»å‹ï¼Œvalue å¯ä»¥ä»»æ„ç±»å‹</td><td>map(&#39;a&#39;, 1, &#39;b&#39;, 2)</td></tr><tr><td>STRUCT</td><td>å­—æ®µé›†åˆï¼Œç±»å‹å¯ä»¥ä¸åŒ</td><td>struct(&#39;1&#39;, 1, 1.0), named_struct(&#39;col1&#39;, &#39;1&#39;, &#39;col2&#39;, 1, &#39;clo3&#39;, 1.0)</td></tr><tr><td>UNION</td><td>åœ¨æœ‰é™å–å€¼èŒƒå›´å†…çš„ä¸€ä¸ªå€¼</td><td>create_union(1, &#39;a&#39;, 63)</td></tr></tbody></table></div><p>å¯¹ decimal ç±»å‹ç®€å•è§£é‡Šä¸‹ï¼š</p><p>ç”¨æ³•ï¼š<code>decimal(11, 2)</code> ä»£è¡¨æœ€å¤šæœ‰ 11 ä½æ•°å­—ï¼Œå…¶ä¸­å 2 ä½æ˜¯å°æ•°ï¼Œæ•´æ•°éƒ¨åˆ†æ˜¯ 9 ä½ï¼›å¦‚æœæ•´æ•°éƒ¨åˆ†è¶…è¿‡ 9 ä½ï¼Œåˆ™è¿™ä¸ªå­—æ®µå°±ä¼šå˜æˆ <code>NULL</code>ï¼›å¦‚æœå°æ•°éƒ¨åˆ†ä¸è¶³ 2 ä½ï¼Œåˆ™åé¢ç”¨ 0 è¡¥é½ä¸¤ä½ï¼Œå¦‚æœå°æ•°éƒ¨åˆ†è¶…è¿‡ä¸¤ä½ï¼Œåˆ™è¶…å‡ºéƒ¨åˆ†å››èˆäº”å…¥ã€‚</p><p>ä¹Ÿå¯ç›´æ¥å†™ <code>decimal</code>ï¼Œåé¢ä¸æŒ‡å®šä½æ•°ï¼Œé»˜è®¤æ˜¯ <code>decimal(10, 0)</code>ï¼Œæ•´æ•° 10 ä½ï¼Œæ²¡æœ‰å°æ•°ã€‚</p><h4 id="åˆ›å»ºè¡¨å¹¶æŒ‡å®šå­—æ®µä¹‹é—´çš„åˆ†éš”ç¬¦"><a href="#åˆ›å»ºè¡¨å¹¶æŒ‡å®šå­—æ®µä¹‹é—´çš„åˆ†éš”ç¬¦" class="headerlink" title="åˆ›å»ºè¡¨å¹¶æŒ‡å®šå­—æ®µä¹‹é—´çš„åˆ†éš”ç¬¦"></a>åˆ›å»ºè¡¨å¹¶æŒ‡å®šå­—æ®µä¹‹é—´çš„åˆ†éš”ç¬¦</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> stu2<span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token punctuation">,</span>name string<span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'\t'</span> stored <span class="token keyword">as</span> textfile location <span class="token string">'/user/stu2'</span><span class="token punctuation">;</span><span class="token comment"># row format delimited fields terminated by '\t' æŒ‡å®šå­—æ®µåˆ†éš”ç¬¦ï¼Œé»˜è®¤åˆ†éš”ç¬¦ä¸º '\001'</span><span class="token comment"># stored as æŒ‡å®šå­˜å‚¨æ ¼å¼</span><span class="token comment"># location æŒ‡å®šå­˜å‚¨ä½ç½®</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ ¹æ®æŸ¥è¯¢ç»“æœåˆ›å»ºè¡¨"><a href="#æ ¹æ®æŸ¥è¯¢ç»“æœåˆ›å»ºè¡¨" class="headerlink" title="æ ¹æ®æŸ¥è¯¢ç»“æœåˆ›å»ºè¡¨"></a>æ ¹æ®æŸ¥è¯¢ç»“æœåˆ›å»ºè¡¨</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> stu3 <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu2<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="æ ¹æ®å·²ç»å­˜åœ¨çš„è¡¨ç»“æ„åˆ›å»ºè¡¨"><a href="#æ ¹æ®å·²ç»å­˜åœ¨çš„è¡¨ç»“æ„åˆ›å»ºè¡¨" class="headerlink" title="æ ¹æ®å·²ç»å­˜åœ¨çš„è¡¨ç»“æ„åˆ›å»ºè¡¨"></a>æ ¹æ®å·²ç»å­˜åœ¨çš„è¡¨ç»“æ„åˆ›å»ºè¡¨</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> stu4 <span class="token operator">like</span> stu2<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="æŸ¥è¯¢è¡¨çš„ç»“æ„"><a href="#æŸ¥è¯¢è¡¨çš„ç»“æ„" class="headerlink" title="æŸ¥è¯¢è¡¨çš„ç»“æ„"></a>æŸ¥è¯¢è¡¨çš„ç»“æ„</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># åªæŸ¥è¯¢è¡¨å†…å­—æ®µåŠå±æ€§</span><span class="token keyword">desc</span> stu2<span class="token punctuation">;</span><span class="token comment"># è¯¦ç»†æŸ¥è¯¢</span><span class="token keyword">desc</span> formatted stu2<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æŸ¥è¯¢åˆ›å»ºè¡¨çš„è¯­å¥"><a href="#æŸ¥è¯¢åˆ›å»ºè¡¨çš„è¯­å¥" class="headerlink" title="æŸ¥è¯¢åˆ›å»ºè¡¨çš„è¯­å¥"></a>æŸ¥è¯¢åˆ›å»ºè¡¨çš„è¯­å¥</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> stu2<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h3 id="å¯¹å¤–éƒ¨è¡¨æ“ä½œ"><a href="#å¯¹å¤–éƒ¨è¡¨æ“ä½œ" class="headerlink" title="å¯¹å¤–éƒ¨è¡¨æ“ä½œ"></a>å¯¹å¤–éƒ¨è¡¨æ“ä½œ</h3><p>å¤–éƒ¨è¡¨å› ä¸ºæ˜¯æŒ‡å®šå…¶ä»–çš„ HDFS è·¯å¾„çš„æ•°æ®åŠ è½½åˆ°è¡¨å½“ä¸­æ¥ï¼Œæ‰€ä»¥ Hive è¡¨ä¼šè®¤ä¸ºè‡ªå·±ä¸å®Œå…¨ç‹¬å è¿™ä»½æ•°æ®ï¼Œæ‰€ä»¥åˆ é™¤ Hive è¡¨çš„æ—¶å€™ï¼Œæ•°æ®ä»ç„¶å­˜æ”¾åœ¨ HDFS å½“ä¸­ï¼Œä¸ä¼šåˆ æ‰ï¼Œåªä¼šåˆ é™¤è¡¨çš„å…ƒæ•°æ®ã€‚</p><h4 id="æ„å»ºå¤–éƒ¨è¡¨"><a href="#æ„å»ºå¤–éƒ¨è¡¨" class="headerlink" title="æ„å»ºå¤–éƒ¨è¡¨"></a>æ„å»ºå¤–éƒ¨è¡¨</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> external <span class="token keyword">table</span> student <span class="token punctuation">(</span>s_id string<span class="token punctuation">,</span>s_name string<span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'\t'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå‘è¡¨ä¸­åŠ è½½æ•°æ®"><a href="#ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå‘è¡¨ä¸­åŠ è½½æ•°æ®" class="headerlink" title="ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå‘è¡¨ä¸­åŠ è½½æ•°æ®"></a>ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå‘è¡¨ä¸­åŠ è½½æ•°æ®</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># è¿½åŠ æ“ä½œ</span><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/student.csv'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span><span class="token comment"># è¦†ç›–æ“ä½œ</span><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/student.csv'</span> overwrite <span class="token keyword">into</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="ä»-HDFS-æ–‡ä»¶ç³»ç»Ÿå‘è¡¨ä¸­åŠ è½½æ•°æ®"><a href="#ä»-HDFS-æ–‡ä»¶ç³»ç»Ÿå‘è¡¨ä¸­åŠ è½½æ•°æ®" class="headerlink" title="ä» HDFS æ–‡ä»¶ç³»ç»Ÿå‘è¡¨ä¸­åŠ è½½æ•°æ®"></a>ä» HDFS æ–‡ä»¶ç³»ç»Ÿå‘è¡¨ä¸­åŠ è½½æ•°æ®</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">load</span> <span class="token keyword">data</span> inpath <span class="token string">'/hivedatas/techer.csv'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> techer<span class="token punctuation">;</span><span class="token comment"># åŠ è½½æ•°æ®åˆ°æŒ‡å®šåˆ†åŒº</span><span class="token keyword">load</span> <span class="token keyword">data</span> inpath <span class="token string">'/hivedatas/techer.csv'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> techer <span class="token keyword">partition</span><span class="token punctuation">(</span>cur_date<span class="token operator">=</span><span class="token number">20201210</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong>ã€</p><ol><li>ä½¿ç”¨ <code>load data local</code> è¡¨ç¤ºä»æœ¬åœ°æ–‡ä»¶ç³»ç»ŸåŠ è½½ï¼Œæ–‡ä»¶ä¼šæ‹·è´åˆ° HDFS ä¸Šã€‚</li><li>ä½¿ç”¨ <code>load data</code> è¡¨ç¤ºä» HDFS æ–‡ä»¶ç³»ç»ŸåŠ è½½ï¼Œæ–‡ä»¶ä¼šç›´æ¥ç§»åŠ¨åˆ° Hive ç›¸å…³ç›®å½•ä¸‹ï¼Œæ³¨æ„ä¸æ˜¯æ‹·è´è¿‡å»ï¼Œå› ä¸º Hive è®¤ä¸º HDFS æ–‡ä»¶å·²ç»æœ‰ 3 å‰¯æœ¬äº†ï¼Œæ²¡å¿…è¦å†æ¬¡æ‹·è´äº†ã€‚</li><li>å¦‚æœè¡¨æ˜¯åˆ†åŒºè¡¨ï¼Œ<code>load</code> æ—¶ä¸æŒ‡å®šåˆ†åŒºä¼šæŠ¥é”™ã€‚</li><li>å¦‚æœåŠ è½½ç›¸åŒæ–‡ä»¶åçš„æ–‡ä»¶ï¼Œä¼šè¢«è‡ªåŠ¨é‡å‘½åã€‚</li></ol><h3 id="å¯¹åˆ†åŒºè¡¨çš„æ“ä½œ"><a href="#å¯¹åˆ†åŒºè¡¨çš„æ“ä½œ" class="headerlink" title="å¯¹åˆ†åŒºè¡¨çš„æ“ä½œ"></a>å¯¹åˆ†åŒºè¡¨çš„æ“ä½œ</h3><h4 id="åˆ›å»ºåˆ†åŒºè¡¨çš„è¯­æ³•"><a href="#åˆ›å»ºåˆ†åŒºè¡¨çš„è¯­æ³•" class="headerlink" title="åˆ›å»ºåˆ†åŒºè¡¨çš„è¯­æ³•"></a>åˆ›å»ºåˆ†åŒºè¡¨çš„è¯­æ³•</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> score<span class="token punctuation">(</span>s_id string<span class="token punctuation">,</span> s_score <span class="token keyword">int</span><span class="token punctuation">)</span> partitioned <span class="token keyword">by</span> <span class="token punctuation">(</span><span class="token keyword">month</span> string<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="åˆ›å»ºä¸€ä¸ªè¡¨å¸¦å¤šä¸ªåˆ†åŒº"><a href="#åˆ›å»ºä¸€ä¸ªè¡¨å¸¦å¤šä¸ªåˆ†åŒº" class="headerlink" title="åˆ›å»ºä¸€ä¸ªè¡¨å¸¦å¤šä¸ªåˆ†åŒº"></a>åˆ›å»ºä¸€ä¸ªè¡¨å¸¦å¤šä¸ªåˆ†åŒº</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> score2 <span class="token punctuation">(</span>s_id string<span class="token punctuation">,</span> s_score <span class="token keyword">int</span><span class="token punctuation">)</span> partitioned <span class="token keyword">by</span> <span class="token punctuation">(</span><span class="token keyword">year</span> string<span class="token punctuation">,</span><span class="token keyword">month</span> string<span class="token punctuation">,</span><span class="token keyword">day</span> string<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong>Hive è¡¨åˆ›å»ºçš„æ—¶å€™å¯ä»¥ç”¨ <code>location</code> æŒ‡å®šä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œå½“æŒ‡å®šæ–‡ä»¶å¤¹æ—¶ï¼ŒHive ä¼šåŠ è½½æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå½“è¡¨ä¸­æ— åˆ†åŒºæ—¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ä¸èƒ½å†æœ‰æ–‡ä»¶å¤¹ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p><p>å½“è¡¨æ˜¯åˆ†åŒºè¡¨æ—¶ï¼Œæ¯”å¦‚ <code>partitioned by (day string)</code>ï¼Œåˆ™è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ¯ä¸€ä¸ªæ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªåˆ†åŒºï¼Œä¸”æ–‡ä»¶å¤¹åä¸º <code>day=20201123</code> è¿™ç§æ ¼å¼ï¼Œç„¶åä½¿ç”¨ï¼š<code>msck repair table score;</code> ä¿®å¤è¡¨ç»“æ„ï¼ŒæˆåŠŸä¹‹åå³å¯çœ‹åˆ°æ•°æ®å·²ç»å…¨éƒ¨åŠ è½½åˆ°è¡¨å½“ä¸­å»äº†</p><h4 id="åŠ è½½æ•°æ®åˆ°ä¸€ä¸ªåˆ†åŒºçš„è¡¨ä¸­"><a href="#åŠ è½½æ•°æ®åˆ°ä¸€ä¸ªåˆ†åŒºçš„è¡¨ä¸­" class="headerlink" title="åŠ è½½æ•°æ®åˆ°ä¸€ä¸ªåˆ†åŒºçš„è¡¨ä¸­"></a>åŠ è½½æ•°æ®åˆ°ä¸€ä¸ªåˆ†åŒºçš„è¡¨ä¸­</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/score.csv'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> score <span class="token keyword">partition</span> <span class="token punctuation">(</span><span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'201806'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="åŠ è½½æ•°æ®åˆ°ä¸€ä¸ªå¤šåˆ†åŒºçš„è¡¨ä¸­å»"><a href="#åŠ è½½æ•°æ®åˆ°ä¸€ä¸ªå¤šåˆ†åŒºçš„è¡¨ä¸­å»" class="headerlink" title="åŠ è½½æ•°æ®åˆ°ä¸€ä¸ªå¤šåˆ†åŒºçš„è¡¨ä¸­å»"></a>åŠ è½½æ•°æ®åˆ°ä¸€ä¸ªå¤šåˆ†åŒºçš„è¡¨ä¸­å»</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/score.csv'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> score2 <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">year</span><span class="token operator">=</span><span class="token string">'2018'</span><span class="token punctuation">,</span><span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'06'</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token operator">=</span><span class="token string">'01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="æŸ¥çœ‹åˆ†åŒº"><a href="#æŸ¥çœ‹åˆ†åŒº" class="headerlink" title="æŸ¥çœ‹åˆ†åŒº"></a>æŸ¥çœ‹åˆ†åŒº</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">show</span> partitions score<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="æ·»åŠ ä¸€ä¸ªåˆ†åŒº"><a href="#æ·»åŠ ä¸€ä¸ªåˆ†åŒº" class="headerlink" title="æ·»åŠ ä¸€ä¸ªåˆ†åŒº"></a>æ·»åŠ ä¸€ä¸ªåˆ†åŒº</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> score <span class="token keyword">add</span> <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'201805'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="åŒæ—¶æ·»åŠ å¤šä¸ªåˆ†åŒº"><a href="#åŒæ—¶æ·»åŠ å¤šä¸ªåˆ†åŒº" class="headerlink" title="åŒæ—¶æ·»åŠ å¤šä¸ªåˆ†åŒº"></a>åŒæ—¶æ·»åŠ å¤šä¸ªåˆ†åŒº</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> score <span class="token keyword">add</span> <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'201804'</span><span class="token punctuation">)</span> <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span> <span class="token operator">=</span> <span class="token string">'201803'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong>æ·»åŠ åˆ†åŒºä¹‹åå°±å¯ä»¥åœ¨ HDFS æ–‡ä»¶ç³»ç»Ÿå½“ä¸­çœ‹åˆ°è¡¨ä¸‹é¢å¤šäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚</p><h4 id="åˆ é™¤åˆ†åŒº"><a href="#åˆ é™¤åˆ†åŒº" class="headerlink" title="åˆ é™¤åˆ†åŒº"></a>åˆ é™¤åˆ†åŒº</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> score <span class="token keyword">drop</span> <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span> <span class="token operator">=</span> <span class="token string">'201806'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h3 id="å¯¹åˆ†æ¡¶è¡¨æ“ä½œ"><a href="#å¯¹åˆ†æ¡¶è¡¨æ“ä½œ" class="headerlink" title="å¯¹åˆ†æ¡¶è¡¨æ“ä½œ"></a>å¯¹åˆ†æ¡¶è¡¨æ“ä½œ</h3><p>å°†æ•°æ®æŒ‰ç…§æŒ‡å®šçš„å­—æ®µè¿›è¡Œåˆ†æˆå¤šä¸ªæ¡¶ä¸­å»ï¼Œå°±æ˜¯æŒ‰ç…§åˆ†æ¡¶å­—æ®µè¿›è¡Œå“ˆå¸Œåˆ’åˆ†åˆ°å¤šä¸ªæ–‡ä»¶å½“ä¸­å»åˆ†åŒºå°±æ˜¯åˆ†æ–‡ä»¶å¤¹ï¼Œåˆ†æ¡¶å°±æ˜¯åˆ†æ–‡ä»¶ã€‚</p><p>åˆ†æ¡¶ä¼˜ç‚¹ï¼š</p><ul><li>æé«˜ join æŸ¥è¯¢æ•ˆç‡</li><li>æé«˜æŠ½æ ·æ•ˆç‡</li></ul><h4 id="å¼€å¯-Hive-çš„æ…è¡¨åŠŸèƒ½"><a href="#å¼€å¯-Hive-çš„æ…è¡¨åŠŸèƒ½" class="headerlink" title="å¼€å¯ Hive çš„æ…è¡¨åŠŸèƒ½"></a>å¼€å¯ Hive çš„æ…è¡¨åŠŸèƒ½</h4><p><code>set hive.enforce.bucketing=true;</code></p><h4 id="è®¾ç½®-Reduce-çš„ä¸ªæ•°"><a href="#è®¾ç½®-Reduce-çš„ä¸ªæ•°" class="headerlink" title="è®¾ç½® Reduce çš„ä¸ªæ•°"></a>è®¾ç½® Reduce çš„ä¸ªæ•°</h4><p><code>set mapreduce.job.reduces=3;</code></p><h4 id="åˆ›å»ºæ¡¶è¡¨"><a href="#åˆ›å»ºæ¡¶è¡¨" class="headerlink" title="åˆ›å»ºæ¡¶è¡¨"></a>åˆ›å»ºæ¡¶è¡¨</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> course <span class="token punctuation">(</span>c_id string<span class="token punctuation">,</span>c_name string<span class="token punctuation">)</span> <span class="token keyword">clustered</span> <span class="token keyword">by</span><span class="token punctuation">(</span>c_id<span class="token punctuation">)</span> <span class="token keyword">into</span> <span class="token number">3</span> buckets<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>æ¡¶è¡¨çš„æ•°æ®åŠ è½½ï¼šç”±äºæ¡¶è¡¨çš„æ•°æ®åŠ è½½é€šè¿‡ <code>hdfs dfs -put</code> æ–‡ä»¶æˆ–è€…é€šè¿‡ <code>load data</code> å‡ä¸å¯ä»¥ï¼Œåªèƒ½é€šè¿‡ <code>insert overwrite</code> è¿›è¡ŒåŠ è½½ã€‚</p><p>æ‰€ä»¥æŠŠæ–‡ä»¶åŠ è½½åˆ°æ¡¶è¡¨ä¸­ï¼Œéœ€è¦å…ˆåˆ›å»ºæ™®é€šè¡¨ï¼Œå¹¶é€šè¿‡ <code>insert overwrite</code> çš„æ–¹å¼å°†æ™®é€šè¡¨çš„æ•°æ®é€šè¿‡æŸ¥è¯¢çš„æ–¹å¼åŠ è½½åˆ°æ¡¶è¡¨å½“ä¸­å»ã€‚</p><h4 id="é€šè¿‡-insert-overwrite-ç»™æ¡¶è¡¨ä¸­åŠ è½½æ•°æ®"><a href="#é€šè¿‡-insert-overwrite-ç»™æ¡¶è¡¨ä¸­åŠ è½½æ•°æ®" class="headerlink" title="é€šè¿‡ insert overwrite ç»™æ¡¶è¡¨ä¸­åŠ è½½æ•°æ®"></a>é€šè¿‡ insert overwrite ç»™æ¡¶è¡¨ä¸­åŠ è½½æ•°æ®</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">insert</span> overwrite <span class="token keyword">table</span> course <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> course_common cluster <span class="token keyword">by</span><span class="token punctuation">(</span>c_id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- æœ€åæŒ‡å®šæ¡¶å­—æ®µ</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h3 id="ä¿®æ”¹è¡¨å’Œåˆ é™¤è¡¨"><a href="#ä¿®æ”¹è¡¨å’Œåˆ é™¤è¡¨" class="headerlink" title="ä¿®æ”¹è¡¨å’Œåˆ é™¤è¡¨"></a>ä¿®æ”¹è¡¨å’Œåˆ é™¤è¡¨</h3><h4 id="ä¿®æ”¹è¡¨åç§°"><a href="#ä¿®æ”¹è¡¨åç§°" class="headerlink" title="ä¿®æ”¹è¡¨åç§°"></a>ä¿®æ”¹è¡¨åç§°</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> old_table_name <span class="token keyword">rename</span> <span class="token keyword">to</span> new_table_name<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="å¢åŠ -ä¿®æ”¹åˆ—ä¿¡æ¯"><a href="#å¢åŠ -ä¿®æ”¹åˆ—ä¿¡æ¯" class="headerlink" title="å¢åŠ /ä¿®æ”¹åˆ—ä¿¡æ¯"></a>å¢åŠ /ä¿®æ”¹åˆ—ä¿¡æ¯</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æŸ¥è¯¢è¡¨ç»“æ„</span><span class="token keyword">desc</span> score5<span class="token punctuation">;</span><span class="token comment"># æ·»åŠ åˆ—</span><span class="token keyword">alter</span> <span class="token keyword">table</span> score5 <span class="token keyword">add</span> <span class="token keyword">columns</span> <span class="token punctuation">(</span>mycol string<span class="token punctuation">,</span> mysco string<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># æ›´æ–°åˆ—</span><span class="token keyword">alter</span> <span class="token keyword">table</span> score5 change <span class="token keyword">column</span> mysco mysconew <span class="token keyword">int</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="åˆ é™¤è¡¨æ“ä½œ"><a href="#åˆ é™¤è¡¨æ“ä½œ" class="headerlink" title="åˆ é™¤è¡¨æ“ä½œ"></a>åˆ é™¤è¡¨æ“ä½œ</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">drop</span> <span class="token keyword">table</span> score5<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="æ¸…ç©ºè¡¨æ“ä½œ"><a href="#æ¸…ç©ºè¡¨æ“ä½œ" class="headerlink" title="æ¸…ç©ºè¡¨æ“ä½œ"></a>æ¸…ç©ºè¡¨æ“ä½œ</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">truncate</span> <span class="token keyword">table</span> score6<span class="token punctuation">;</span><span class="token comment"># åªèƒ½æ¸…ç©ºç®¡ç†è¡¨ï¼Œä¹Ÿå°±æ˜¯å†…éƒ¨è¡¨ï¼›æ¸…ç©ºå¤–éƒ¨è¡¨ï¼Œä¼šäº§ç”Ÿé”™è¯¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼štruncate å’Œ dropï¼š</strong></p><p>å¦‚æœ HDFS å¼€å¯äº†å›æ”¶ç«™ï¼Œ<code>drop</code> åˆ é™¤çš„è¡¨æ•°æ®æ˜¯å¯ä»¥ä»å›æ”¶ç«™æ¢å¤çš„ï¼Œè¡¨ç»“æ„æ¢å¤ä¸äº†ï¼Œéœ€è¦è‡ªå·±é‡æ–°åˆ›å»ºï¼›<code>truncate</code> æ¸…ç©ºçš„è¡¨æ˜¯ä¸è¿›å›æ”¶ç«™çš„ï¼Œæ‰€ä»¥æ— æ³•æ¢å¤ <code>truncate</code> æ¸…ç©ºçš„è¡¨æ‰€ä»¥ <code>truncate</code> ä¸€å®šæ…ç”¨ï¼Œä¸€æ—¦æ¸…ç©ºå°†æ— åŠ›å›å¤©ã€‚</p><h3 id="å‘-Hive-è¡¨ä¸­åŠ è½½æ•°æ®"><a href="#å‘-Hive-è¡¨ä¸­åŠ è½½æ•°æ®" class="headerlink" title="å‘ Hive è¡¨ä¸­åŠ è½½æ•°æ®"></a>å‘ Hive è¡¨ä¸­åŠ è½½æ•°æ®</h3><h4 id="ç›´æ¥å‘åˆ†åŒºè¡¨ä¸­æ’å…¥æ•°æ®"><a href="#ç›´æ¥å‘åˆ†åŒºè¡¨ä¸­æ’å…¥æ•°æ®" class="headerlink" title="ç›´æ¥å‘åˆ†åŒºè¡¨ä¸­æ’å…¥æ•°æ®"></a>ç›´æ¥å‘åˆ†åŒºè¡¨ä¸­æ’å…¥æ•°æ®</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">table</span> score <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span> <span class="token operator">=</span><span class="token string">'201807'</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'001'</span><span class="token punctuation">,</span><span class="token string">'002'</span><span class="token punctuation">,</span><span class="token string">'100'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="é€šè¿‡loadæ–¹å¼åŠ è½½æ•°æ®"><a href="#é€šè¿‡loadæ–¹å¼åŠ è½½æ•°æ®" class="headerlink" title="é€šè¿‡loadæ–¹å¼åŠ è½½æ•°æ®"></a>é€šè¿‡loadæ–¹å¼åŠ è½½æ•°æ®</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/score.csv'</span> overwrite <span class="token keyword">into</span> <span class="token keyword">table</span> score <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'201806'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="é€šè¿‡æŸ¥è¯¢æ–¹å¼åŠ è½½æ•°æ®"><a href="#é€šè¿‡æŸ¥è¯¢æ–¹å¼åŠ è½½æ•°æ®" class="headerlink" title="é€šè¿‡æŸ¥è¯¢æ–¹å¼åŠ è½½æ•°æ®"></a>é€šè¿‡æŸ¥è¯¢æ–¹å¼åŠ è½½æ•°æ®</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">insert</span> overwrite <span class="token keyword">table</span> score2 <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span> <span class="token operator">=</span> <span class="token string">'201806'</span><span class="token punctuation">)</span> <span class="token keyword">select</span> s_id<span class="token punctuation">,</span>c_id<span class="token punctuation">,</span>s_score <span class="token keyword">from</span> score1<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="æŸ¥è¯¢è¯­å¥ä¸­åˆ›å»ºè¡¨å¹¶åŠ è½½æ•°æ®"><a href="#æŸ¥è¯¢è¯­å¥ä¸­åˆ›å»ºè¡¨å¹¶åŠ è½½æ•°æ®" class="headerlink" title="æŸ¥è¯¢è¯­å¥ä¸­åˆ›å»ºè¡¨å¹¶åŠ è½½æ•°æ®"></a>æŸ¥è¯¢è¯­å¥ä¸­åˆ›å»ºè¡¨å¹¶åŠ è½½æ•°æ®</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> score2 <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score1<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="åœ¨åˆ›å»ºè¡¨æ˜¯é€šè¿‡-location-æŒ‡å®šåŠ è½½æ•°æ®çš„è·¯å¾„"><a href="#åœ¨åˆ›å»ºè¡¨æ˜¯é€šè¿‡-location-æŒ‡å®šåŠ è½½æ•°æ®çš„è·¯å¾„" class="headerlink" title="åœ¨åˆ›å»ºè¡¨æ˜¯é€šè¿‡ location æŒ‡å®šåŠ è½½æ•°æ®çš„è·¯å¾„"></a>åœ¨åˆ›å»ºè¡¨æ˜¯é€šè¿‡ location æŒ‡å®šåŠ è½½æ•°æ®çš„è·¯å¾„</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> external <span class="token keyword">table</span> score6 <span class="token punctuation">(</span>s_id string<span class="token punctuation">,</span>c_id string<span class="token punctuation">,</span>s_score <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">','</span> location <span class="token string">'/myscore'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="export-å¯¼å‡ºä¸-import-å¯¼å…¥-Hive-è¡¨æ•°æ®ï¼ˆå†…éƒ¨è¡¨æ“ä½œï¼‰"><a href="#export-å¯¼å‡ºä¸-import-å¯¼å…¥-Hive-è¡¨æ•°æ®ï¼ˆå†…éƒ¨è¡¨æ“ä½œï¼‰" class="headerlink" title="export å¯¼å‡ºä¸ import å¯¼å…¥ Hive è¡¨æ•°æ®ï¼ˆå†…éƒ¨è¡¨æ“ä½œï¼‰"></a>export å¯¼å‡ºä¸ import å¯¼å…¥ Hive è¡¨æ•°æ®ï¼ˆå†…éƒ¨è¡¨æ“ä½œï¼‰</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> techer2 <span class="token operator">like</span> techer<span class="token punctuation">;</span> <span class="token comment">--ä¾æ®å·²æœ‰è¡¨ç»“æ„åˆ›å»ºè¡¨</span>export <span class="token keyword">table</span> techer <span class="token keyword">to</span> <span class="token string">'/export/techer'</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">table</span> techer2 <span class="token keyword">from</span> <span class="token string">'/export/techer'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="Hive-è¡¨ä¸­æ•°æ®å¯¼å‡º"><a href="#Hive-è¡¨ä¸­æ•°æ®å¯¼å‡º" class="headerlink" title="Hive è¡¨ä¸­æ•°æ®å¯¼å‡º"></a>Hive è¡¨ä¸­æ•°æ®å¯¼å‡º</h3><h4 id="insert-å¯¼å‡º"><a href="#insert-å¯¼å‡º" class="headerlink" title="insert å¯¼å‡º"></a>insert å¯¼å‡º</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># å°†æŸ¥è¯¢çš„ç»“æœå¯¼å‡ºåˆ°æœ¬åœ°</span><span class="token keyword">insert</span> overwrite <span class="token keyword">local</span> directory <span class="token string">'/export/servers/exporthive'</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score<span class="token punctuation">;</span><span class="token comment"># å°†æŸ¥è¯¢çš„ç»“æœæ ¼å¼åŒ–å¯¼å‡ºåˆ°æœ¬åœ°</span><span class="token keyword">insert</span> overwrite <span class="token keyword">local</span> directory <span class="token string">'/export/servers/exporthive'</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'\t'</span> collection items <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'#'</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span><span class="token comment"># å°†æŸ¥è¯¢çš„ç»“æœå¯¼å‡ºåˆ° HDFS ä¸Šï¼ˆæ²¡æœ‰ localï¼‰</span><span class="token keyword">insert</span> overwrite directory <span class="token string">'/export/servers/exporthive'</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'\t'</span> collection items <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'#'</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="Hadoop-å‘½ä»¤å¯¼å‡ºåˆ°æœ¬åœ°"><a href="#Hadoop-å‘½ä»¤å¯¼å‡ºåˆ°æœ¬åœ°" class="headerlink" title="Hadoop å‘½ä»¤å¯¼å‡ºåˆ°æœ¬åœ°"></a>Hadoop å‘½ä»¤å¯¼å‡ºåˆ°æœ¬åœ°</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">dfs <span class="token operator">-</span>get <span class="token operator">/</span>export<span class="token operator">/</span>servers<span class="token operator">/</span>exporthive<span class="token operator">/</span><span class="token number">000000</span>_0 <span class="token operator">/</span>export<span class="token operator">/</span>servers<span class="token operator">/</span>exporthive<span class="token operator">/</span><span class="token keyword">local</span><span class="token punctuation">.</span>txt<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="hive-shell-å‘½ä»¤å¯¼å‡º"><a href="#hive-shell-å‘½ä»¤å¯¼å‡º" class="headerlink" title="hive shell å‘½ä»¤å¯¼å‡º"></a>hive shell å‘½ä»¤å¯¼å‡º</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># åŸºæœ¬è¯­æ³•ï¼šhive -f/-e æ‰§è¡Œè¯­å¥æˆ–è€…è„šæœ¬ > file</span>hive <span class="token operator">-</span>e <span class="token string">"select * from myhive.score;"</span> <span class="token operator">></span> <span class="token operator">/</span>export<span class="token operator">/</span>servers<span class="token operator">/</span>exporthive<span class="token operator">/</span>score<span class="token punctuation">.</span>txthive <span class="token operator">-</span>f export<span class="token punctuation">.</span>sh <span class="token operator">></span> <span class="token operator">/</span>export<span class="token operator">/</span>servers<span class="token operator">/</span>exporthive<span class="token operator">/</span>score<span class="token punctuation">.</span>txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="export-å¯¼å‡ºåˆ°-HDFS-ä¸Š"><a href="#export-å¯¼å‡ºåˆ°-HDFS-ä¸Š" class="headerlink" title="export å¯¼å‡ºåˆ° HDFS ä¸Š"></a>export å¯¼å‡ºåˆ° HDFS ä¸Š</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">export <span class="token keyword">table</span> score <span class="token keyword">to</span> <span class="token string">'/export/exporthive/score'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h1 id="Hive-çš„-DQL-è¯­æ³•"><a href="#Hive-çš„-DQL-è¯­æ³•" class="headerlink" title="Hive çš„ DQL è¯­æ³•"></a>Hive çš„ DQL è¯­æ³•</h1><h2 id="å•è¡¨æŸ¥è¯¢ã€å…³è”æŸ¥è¯¢"><a href="#å•è¡¨æŸ¥è¯¢ã€å…³è”æŸ¥è¯¢" class="headerlink" title="å•è¡¨æŸ¥è¯¢ã€å…³è”æŸ¥è¯¢"></a>å•è¡¨æŸ¥è¯¢ã€å…³è”æŸ¥è¯¢</h2><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">[</span><span class="token keyword">ALL</span> <span class="token operator">|</span> <span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> select_expr<span class="token punctuation">,</span> select_expr<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table_reference<span class="token punctuation">[</span><span class="token keyword">WHERE</span> where_condition<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> col_list <span class="token punctuation">[</span><span class="token keyword">HAVING</span> condition<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>CLUSTER <span class="token keyword">BY</span> col_list <span class="token operator">|</span> <span class="token punctuation">[</span>DISTRIBUTE <span class="token keyword">BY</span> col_list<span class="token punctuation">]</span> <span class="token punctuation">[</span>SORT <span class="token keyword">BY</span><span class="token operator">|</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> col_list<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">LIMIT</span> number<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong></p><ol><li><code>order by</code> ä¼šå¯¹è¾“å…¥åšå…¨å±€æ’åºï¼Œå› æ­¤åªæœ‰ä¸€ä¸ª reducerï¼Œä¼šå¯¼è‡´å½“è¾“å…¥è§„æ¨¡è¾ƒå¤§æ—¶ï¼Œéœ€è¦è¾ƒé•¿çš„è®¡ç®—æ—¶é—´ã€‚</li><li><code>sort by</code> ä¸æ˜¯å…¨å±€æ’åºï¼Œå…¶åœ¨æ•°æ®è¿›å…¥ reducer å‰å®Œæˆæ’åºã€‚å› æ­¤ï¼Œå¦‚æœç”¨ <code>sort by</code> è¿›è¡Œæ’åºï¼Œå¹¶ä¸”è®¾ç½® <code>mapred.reduce.tasks&gt;1</code>ï¼Œåˆ™ <code>sort by</code> åªä¿è¯æ¯ä¸ª reducer çš„è¾“å‡ºæœ‰åºï¼Œä¸ä¿è¯å…¨å±€æœ‰åºã€‚</li><li><code>distribute by(å­—æ®µ)</code> æ ¹æ®æŒ‡å®šçš„å­—æ®µå°†æ•°æ®åˆ†åˆ°ä¸åŒçš„ reducerï¼Œä¸”åˆ†å‘ç®—æ³•æ˜¯ hash æ•£åˆ—ã€‚</li><li><code>cluster by(å­—æ®µ)</code> é™¤äº†å…·æœ‰ <code>distribute by</code> çš„åŠŸèƒ½å¤–ï¼Œè¿˜ä¼šå¯¹è¯¥å­—æ®µè¿›è¡Œæ’åºã€‚</li></ol><p>å› æ­¤ï¼Œå¦‚æœåˆ†æ¡¶å’Œ <code>sort</code> å­—æ®µæ˜¯åŒä¸€ä¸ªæ—¶ï¼Œæ­¤æ—¶ï¼Œ<code>cluster by = distribute by + sort by</code>ã€‚</p><h3 id="WHERE-è¯­å¥"><a href="#WHERE-è¯­å¥" class="headerlink" title="WHERE è¯­å¥"></a>WHERE è¯­å¥</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score <span class="token keyword">where</span> s_score <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong>å°äºæŸä¸ªå€¼æ˜¯ä¸åŒ…å« NULL çš„ï¼Œå¦‚ä¸ŠæŸ¥è¯¢ç»“æœæ˜¯æŠŠ s_score ä¸º NULL çš„è¡Œå‰”é™¤çš„ã€‚</p><h3 id="GROUP-BY-åˆ†ç»„"><a href="#GROUP-BY-åˆ†ç»„" class="headerlink" title="GROUP BY åˆ†ç»„"></a>GROUP BY åˆ†ç»„</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> s_id <span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span> <span class="token keyword">from</span> score <span class="token keyword">group</span> <span class="token keyword">by</span> s_id<span class="token punctuation">;</span><span class="token comment"># åˆ†ç»„åå¯¹æ•°æ®è¿›è¡Œç­›é€‰ï¼Œä½¿ç”¨having</span><span class="token keyword">select</span> s_id <span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span> avgscore <span class="token keyword">from</span> score <span class="token keyword">group</span> <span class="token keyword">by</span> s_id <span class="token keyword">having</span> avgscore <span class="token operator">></span> <span class="token number">85</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong></p><p>å¦‚æœä½¿ç”¨ <code>group by</code> åˆ†ç»„ï¼Œåˆ™ <code>select</code> åé¢åªèƒ½å†™åˆ†ç»„çš„å­—æ®µæˆ–è€…èšåˆå‡½æ•°ã€‚<code>where</code> å’Œ <code>having</code> åŒºåˆ«ï¼š</p><ul><li><code>having</code> æ˜¯åœ¨ <code>group by</code> åˆ†å®Œç»„ä¹‹åå†å¯¹æ•°æ®è¿›è¡Œç­›é€‰ï¼Œæ‰€ä»¥ <code>having</code> è¦ç­›é€‰çš„å­—æ®µåªèƒ½æ˜¯åˆ†ç»„å­—æ®µæˆ–è€…èšåˆå‡½æ•°</li><li><code>where</code> æ˜¯ä»æ•°æ®è¡¨ä¸­çš„å­—æ®µç›´æ¥è¿›è¡Œçš„ç­›é€‰çš„ï¼Œæ‰€ä»¥ä¸èƒ½è·Ÿåœ¨ <code>group by</code> åé¢ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨èšåˆå‡½æ•°</li></ul><h3 id="JOIN-è¿æ¥"><a href="#JOIN-è¿æ¥" class="headerlink" title="JOIN è¿æ¥"></a>JOIN è¿æ¥</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># INNER JOIN å†…è¿æ¥ï¼šåªæœ‰è¿›è¡Œè¿æ¥çš„ä¸¤ä¸ªè¡¨ä¸­éƒ½å­˜åœ¨ä¸è¿æ¥æ¡ä»¶ç›¸åŒ¹é…çš„æ•°æ®æ‰ä¼šè¢«ä¿ç•™ä¸‹æ¥</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> techer t <span class="token punctuation">[</span><span class="token keyword">inner</span><span class="token punctuation">]</span> <span class="token keyword">join</span> course c <span class="token keyword">on</span> t<span class="token punctuation">.</span>t_id <span class="token operator">=</span> c<span class="token punctuation">.</span>t_id<span class="token punctuation">;</span> <span class="token comment">-- inner å¯çœç•¥</span><span class="token comment"># LEFT OUTER JOIN å·¦å¤–è¿æ¥ï¼šå·¦è¾¹æ‰€æœ‰æ•°æ®ä¼šè¢«è¿”å›ï¼Œå³è¾¹ç¬¦åˆæ¡ä»¶çš„è¢«è¿”å›</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> techer t <span class="token keyword">left</span> <span class="token keyword">join</span> course c <span class="token keyword">on</span> t<span class="token punctuation">.</span>t_id <span class="token operator">=</span> c<span class="token punctuation">.</span>t_id<span class="token punctuation">;</span> <span class="token comment">-- outerå¯çœç•¥</span><span class="token comment"># RIGHT OUTER JOIN å³å¤–è¿æ¥ï¼šå³è¾¹æ‰€æœ‰æ•°æ®ä¼šè¢«è¿”å›ï¼Œå·¦è¾¹ç¬¦åˆæ¡ä»¶çš„è¢«è¿”å›</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> techer t <span class="token keyword">right</span> <span class="token keyword">join</span> course c <span class="token keyword">on</span> t<span class="token punctuation">.</span>t_id <span class="token operator">=</span> c<span class="token punctuation">.</span>t_id<span class="token punctuation">;</span><span class="token comment"># FULL OUTER JOIN æ»¡å¤–(å…¨å¤–)è¿æ¥: å°†ä¼šè¿”å›æ‰€æœ‰è¡¨ä¸­ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰è®°å½•ã€‚å¦‚æœä»»ä¸€è¡¨çš„æŒ‡å®šå­—æ®µæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å€¼çš„è¯ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ NULL å€¼æ›¿ä»£ã€‚</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> techer t <span class="token keyword">FULL</span> <span class="token keyword">JOIN</span> course c <span class="token keyword">ON</span> t<span class="token punctuation">.</span>t_id <span class="token operator">=</span> c<span class="token punctuation">.</span>t_id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong></p><ol><li>Hive2 ç‰ˆæœ¬å·²ç»æ”¯æŒä¸ç­‰å€¼è¿æ¥ï¼Œå°±æ˜¯ <code>join on</code> æ¡ä»¶åé¢å¯ä»¥ä½¿ç”¨å¤§äºå°äºç¬¦å·äº†ï¼›å¹¶ä¸”ä¹Ÿæ”¯æŒ <code>join on</code> æ¡ä»¶åè·Ÿ <code>or</code>ï¼ˆæ—©å‰ç‰ˆæœ¬ <code>on</code> ååªæ”¯æŒ <code>=</code> å’Œ <code>and</code>ï¼Œä¸æ”¯æŒ <code>&gt;</code>ã€<code>&lt;</code> å’Œ <code>or</code>ï¼‰ï¼›</li><li>å¦‚ Hive æ‰§è¡Œå¼•æ“ä½¿ç”¨ MapReduceï¼Œä¸€ä¸ª <code>join</code> å°±ä¼šå¯åŠ¨ä¸€ä¸ª jobï¼Œä¸€æ¡ sql è¯­å¥ä¸­å¦‚æœ‰å¤šä¸ª <code>join</code>ï¼Œåˆ™ä¼šå¯åŠ¨å¤šä¸ª jobã€‚</li></ol><p><strong>æ³¨æ„ï¼š</strong>è¡¨ä¹‹é—´ç”¨ <code>é€—å·(,)</code> è¿æ¥å’Œ <code>inner join</code> æ˜¯ä¸€æ ·çš„ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> table_a<span class="token punctuation">,</span>table_b <span class="token keyword">where</span> table_a<span class="token punctuation">.</span>id <span class="token operator">=</span> table_b<span class="token punctuation">.</span>id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>å®ƒä»¬çš„æ‰§è¡Œæ•ˆç‡æ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯ä¹¦å†™æ–¹å¼ä¸åŒï¼Œç”¨ <code>é€—å·(,)</code> æ˜¯ sql 89 æ ‡å‡†ï¼Œ<code>join</code> æ˜¯ sql 92 æ ‡å‡†ã€‚ç”¨ <code>é€—å·(,)</code> è¿æ¥åé¢è¿‡æ»¤æ¡ä»¶ç”¨ <code>where</code> ï¼Œç”¨ <code>join</code> è¿æ¥åé¢è¿‡æ»¤æ¡ä»¶æ˜¯ <code>on</code>ã€‚</p><h3 id="ORDER-BY-æ’åº"><a href="#ORDER-BY-æ’åº" class="headerlink" title="ORDER BY æ’åº"></a>ORDER BY æ’åº</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># å…¨å±€æ’åºï¼Œåªä¼šæœ‰ä¸€ä¸ªreduce</span><span class="token comment"># ASCï¼ˆascendï¼‰: å‡åºï¼ˆé»˜è®¤ï¼‰ DESCï¼ˆdescendï¼‰: é™åº</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student s <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> score sco <span class="token keyword">ON</span> s<span class="token punctuation">.</span>s_id <span class="token operator">=</span> sco<span class="token punctuation">.</span>s_id <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sco<span class="token punctuation">.</span>s_score <span class="token keyword">DESC</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong><code>order by</code> æ˜¯å…¨å±€æ’åºï¼Œæ‰€ä»¥æœ€ååªæœ‰ä¸€ä¸ª reduceï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸€ä¸ªèŠ‚ç‚¹æ‰§è¡Œï¼Œå¦‚æœæ•°æ®é‡å¤ªå¤§ï¼Œå°±ä¼šè€—è´¹è¾ƒé•¿æ—¶é—´ã€‚</p><h3 id="SORT-BY-å±€éƒ¨æ’åº"><a href="#SORT-BY-å±€éƒ¨æ’åº" class="headerlink" title="SORT BY å±€éƒ¨æ’åº"></a>SORT BY å±€éƒ¨æ’åº</h3><p>æ¯ä¸ª MapReduce å†…éƒ¨è¿›è¡Œæ’åºï¼Œå¯¹å…¨å±€ç»“æœé›†æ¥è¯´ä¸æ˜¯æ’åºã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># è®¾ç½® reduce ä¸ªæ•°</span><span class="token keyword">set</span> mapreduce<span class="token punctuation">.</span>job<span class="token punctuation">.</span>reduces<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token comment"># æŸ¥çœ‹è®¾ç½® reduce ä¸ªæ•°</span><span class="token keyword">set</span> mapreduce<span class="token punctuation">.</span>job<span class="token punctuation">.</span>reduces<span class="token punctuation">;</span><span class="token comment"># æŸ¥è¯¢æˆç»©æŒ‰ç…§æˆç»©é™åºæ’åˆ—</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score sort <span class="token keyword">by</span> s_score<span class="token punctuation">;</span><span class="token comment"># å°†æŸ¥è¯¢ç»“æœå¯¼å…¥åˆ°æ–‡ä»¶ä¸­ï¼ˆæŒ‰ç…§æˆç»©é™åºæ’åˆ—ï¼‰</span><span class="token keyword">insert</span> overwrite <span class="token keyword">local</span> directory <span class="token string">'/export/servers/hivedatas/sort'</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score sort <span class="token keyword">by</span> s_score<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="DISTRIBUTE-BY-åˆ†åŒºæ’åº"><a href="#DISTRIBUTE-BY-åˆ†åŒºæ’åº" class="headerlink" title="DISTRIBUTE BY åˆ†åŒºæ’åº"></a>DISTRIBUTE BY åˆ†åŒºæ’åº</h3><p><code>distribute by</code> ç±»ä¼¼ MR ä¸­ partitionï¼Œè¿›è¡Œåˆ†åŒºï¼Œç»“åˆ <code>sort by</code> ä½¿ç”¨ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># è®¾ç½® reduce çš„ä¸ªæ•°ï¼Œå°†æˆ‘ä»¬å¯¹åº”çš„ s_id åˆ’åˆ†åˆ°å¯¹åº”çš„ reduce å½“ä¸­å»</span><span class="token keyword">set</span> mapreduce<span class="token punctuation">.</span>job<span class="token punctuation">.</span>reduces<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">;</span><span class="token comment"># é€šè¿‡ distribute by è¿›è¡Œæ•°æ®çš„åˆ†åŒº</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score distribute <span class="token keyword">by</span> s_id sort <span class="token keyword">by</span> s_score<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong>Hive è¦æ±‚ <code>distribute by</code> è¯­å¥è¦å†™åœ¨ <code>sort by</code> è¯­å¥ä¹‹å‰ã€‚</p><h3 id="CLUSTER-BY-æ’åº"><a href="#CLUSTER-BY-æ’åº" class="headerlink" title="CLUSTER BY æ’åº"></a>CLUSTER BY æ’åº</h3><p>å½“ <code>distribute by</code> å’Œ <code>sort by</code> å­—æ®µç›¸åŒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>cluster by</code> æ–¹å¼ã€‚<code>cluster by</code> é™¤äº†å…·æœ‰ <code>distribute by</code> çš„åŠŸèƒ½å¤–è¿˜å…¼å…· <code>sort by</code> çš„åŠŸèƒ½ã€‚ä½†æ˜¯æ’åºåªèƒ½æ˜¯æ­£åºæ’åºï¼Œä¸èƒ½æŒ‡å®šæ’åºè§„åˆ™ä¸º <code>ASC</code> æˆ–è€… <code>DESC</code>ã€‚</p><p>ä»¥ä¸‹ä¸¤ç§å†™æ³•ç­‰ä»·ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score cluster <span class="token keyword">by</span> s_id<span class="token punctuation">;</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score distribute <span class="token keyword">by</span> s_id sort <span class="token keyword">by</span> s_id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h2 id="Hive-å‡½æ•°"><a href="#Hive-å‡½æ•°" class="headerlink" title="Hive å‡½æ•°"></a>Hive å‡½æ•°</h2><h3 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h3><p>Hive æ”¯æŒ <code>count()</code>ï¼Œ<code>max()</code>ï¼Œ<code>min()</code>ï¼Œ<code>sum()</code>ï¼Œ<code>avg()</code> ç­‰å¸¸ç”¨çš„èšåˆå‡½æ•°ã€‚</p><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>èšåˆæ“ä½œæ—¶è¦æ³¨æ„ NULL å€¼ï¼›</li><li><code>count(*)</code> åŒ…å« NULL å€¼ï¼Œç»Ÿè®¡æ‰€æœ‰è¡Œæ•°ï¼›</li><li><code>count(id)</code> ä¸åŒ…å« NULLå€¼ï¼›</li><li><code>min</code> æ±‚æœ€å°å€¼æ˜¯ä¸åŒ…å« NULLï¼Œé™¤éæ‰€æœ‰å€¼éƒ½æ˜¯ NULLï¼›</li><li><code>avg</code> æ±‚å¹³å‡å€¼ä¹Ÿæ˜¯ä¸åŒ…å« NULLã€‚</li></ul><h4 id="éç©ºé›†åˆæ€»ä½“å˜é‡å‡½æ•°"><a href="#éç©ºé›†åˆæ€»ä½“å˜é‡å‡½æ•°" class="headerlink" title="éç©ºé›†åˆæ€»ä½“å˜é‡å‡½æ•°"></a>éç©ºé›†åˆæ€»ä½“å˜é‡å‡½æ•°</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼švar_pop<span class="token punctuation">(</span>col<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">double</span>è¯´æ˜ï¼šç»Ÿè®¡ç»“æœé›†ä¸­ col éç©ºé›†åˆçš„æ€»ä½“å˜é‡ï¼ˆå¿½ç•¥ <span class="token boolean">NULL</span>ï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><h4 id="éç©ºé›†åˆæ ·æœ¬å˜é‡å‡½æ•°"><a href="#éç©ºé›†åˆæ ·æœ¬å˜é‡å‡½æ•°" class="headerlink" title="éç©ºé›†åˆæ ·æœ¬å˜é‡å‡½æ•°"></a>éç©ºé›†åˆæ ·æœ¬å˜é‡å‡½æ•°</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼švar_samp<span class="token punctuation">(</span>col<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">double</span>è¯´æ˜ï¼šç»Ÿè®¡ç»“æœé›†ä¸­ col éç©ºé›†åˆçš„æ ·æœ¬å˜é‡ï¼ˆå¿½ç•¥ <span class="token boolean">NULL</span>ï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><h4 id="æ€»ä½“æ ‡å‡†åç¦»å‡½æ•°"><a href="#æ€»ä½“æ ‡å‡†åç¦»å‡½æ•°" class="headerlink" title="æ€»ä½“æ ‡å‡†åç¦»å‡½æ•°"></a>æ€»ä½“æ ‡å‡†åç¦»å‡½æ•°</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šstddev_pop<span class="token punctuation">(</span>col<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">double</span>è¯´æ˜ï¼šè¯¥å‡½æ•°è®¡ç®—æ€»ä½“æ ‡å‡†åç¦»ï¼Œå¹¶è¿”å›æ€»ä½“å˜é‡çš„å¹³æ–¹æ ¹ï¼Œå…¶è¿”å›å€¼ä¸ VAR_POP å‡½æ•°çš„å¹³æ–¹æ ¹ç›¸åŒ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><h4 id="ä¸­ä½æ•°å‡½æ•°"><a href="#ä¸­ä½æ•°å‡½æ•°" class="headerlink" title="ä¸­ä½æ•°å‡½æ•°"></a>ä¸­ä½æ•°å‡½æ•°</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼špercentile<span class="token punctuation">(</span><span class="token keyword">bigint</span> col<span class="token punctuation">,</span> p<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">double</span>è¯´æ˜ï¼šæ±‚å‡†ç¡®çš„ç¬¬ p ä¸ªç™¾åˆ†ä½æ•°ï¼Œp å¿…é¡»ä»‹äº <span class="token number">0</span> å’Œ <span class="token number">1</span> ä¹‹é—´ï¼Œä½†æ˜¯ col å­—æ®µç›®å‰åªæ”¯æŒæ•´æ•°ï¼Œä¸æ”¯æŒæµ®ç‚¹æ•°ç±»å‹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><h3 id="å…³ç³»è¿ç®—"><a href="#å…³ç³»è¿ç®—" class="headerlink" title="å…³ç³»è¿ç®—"></a>å…³ç³»è¿ç®—</h3><p>æ”¯æŒï¼šç­‰å€¼(=)ã€ä¸ç­‰å€¼(!= æˆ– &lt;&gt;)ã€å°äº(&lt;)ã€å°äºç­‰äº(&lt;=)ã€å¤§äº(&gt;)ã€å¤§äºç­‰äº(&gt;=)ã€ç©ºå€¼åˆ¤æ–­(IS NULL)ã€éç©ºåˆ¤æ–­(IS NOT NULL)ã€‚</p><h4 id="LIKE-æ¯”è¾ƒ"><a href="#LIKE-æ¯”è¾ƒ" class="headerlink" title="LIKE æ¯”è¾ƒ"></a>LIKE æ¯”è¾ƒ</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šA <span class="token operator">LIKE</span> Bæ“ä½œç±»å‹: stringè¯´æ˜ï¼šå¦‚æœå­—ç¬¦ä¸² A æˆ–è€…å­—ç¬¦ä¸² B ä¸º <span class="token boolean">NULL</span>ï¼Œåˆ™è¿”å› <span class="token boolean">NULL</span>ï¼›å¦‚æœå­—ç¬¦ä¸² A ç¬¦åˆè¡¨è¾¾å¼ B çš„æ­£åˆ™è¯­æ³•ï¼Œåˆ™ä¸º <span class="token boolean">TRUE</span>ï¼›å¦åˆ™ä¸º <span class="token boolean">FALSE</span>ã€‚B ä¸­å­—ç¬¦<span class="token punctuation">(</span>_<span class="token punctuation">)</span> è¡¨ç¤ºä»»æ„å•ä¸ªå­—ç¬¦ï¼Œè€Œå­—ç¬¦<span class="token punctuation">(</span><span class="token operator">%</span><span class="token punctuation">)</span> è¡¨ç¤ºä»»æ„æ•°é‡çš„å­—ç¬¦ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><h4 id="RLIKE-æ“ä½œ"><a href="#RLIKE-æ“ä½œ" class="headerlink" title="RLIKE æ“ä½œ"></a>RLIKE æ“ä½œ</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šA <span class="token operator">RLIKE</span> Bæ“ä½œç±»å‹: stringè¯´æ˜ï¼šå¦‚æœå­—ç¬¦ä¸² A æˆ–è€…å­—ç¬¦ä¸² B ä¸º <span class="token boolean">NULL</span>ï¼Œåˆ™è¿”å› <span class="token boolean">NULL</span>ï¼›å¦‚æœå­—ç¬¦ä¸² A ç¬¦åˆ Java æ­£åˆ™è¡¨è¾¾å¼ B çš„æ­£åˆ™è¯­æ³•ï¼Œåˆ™ä¸º <span class="token boolean">TRUE</span>ï¼›å¦åˆ™ä¸º <span class="token boolean">FALSE</span>ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><h4 id="REGEXP-æ“ä½œ"><a href="#REGEXP-æ“ä½œ" class="headerlink" title="REGEXP æ“ä½œ"></a>REGEXP æ“ä½œ</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šA <span class="token operator">REGEXP</span> Bæ“ä½œç±»å‹: stringè¯´æ˜ï¼šåŠŸèƒ½ä¸ <span class="token operator">RLIKE</span> ç›¸åŒç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">from</span> tableName <span class="token keyword">where</span> <span class="token string">'footbar'</span> <span class="token operator">REGEXP</span> <span class="token string">'^f.*r$'</span><span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="æ•°å­¦è¿ç®—"><a href="#æ•°å­¦è¿ç®—" class="headerlink" title="æ•°å­¦è¿ç®—"></a>æ•°å­¦è¿ç®—</h3><p>æ”¯æŒæ‰€æœ‰æ•°å€¼ç±»å‹ï¼šåŠ (+)ã€å‡(-)ã€ä¹˜(*)ã€é™¤(/)ã€å–ä½™(%)ã€ä½ä¸(&amp;)ã€ä½æˆ–(|)ã€ä½å¼‚æˆ–(^)ã€ä½å–å(~)ã€‚</p><h3 id="é€»è¾‘è¿ç®—"><a href="#é€»è¾‘è¿ç®—" class="headerlink" title="é€»è¾‘è¿ç®—"></a>é€»è¾‘è¿ç®—</h3><p>æ”¯æŒï¼šé€»è¾‘ä¸(and)ã€é€»è¾‘æˆ–(or)ã€é€»è¾‘é(not)ã€‚</p><h3 id="æ•°å€¼è¿ç®—"><a href="#æ•°å€¼è¿ç®—" class="headerlink" title="æ•°å€¼è¿ç®—"></a>æ•°å€¼è¿ç®—</h3><h4 id="å–æ•´å‡½æ•°-round"><a href="#å–æ•´å‡½æ•°-round" class="headerlink" title="å–æ•´å‡½æ•° round"></a>å–æ•´å‡½æ•° round</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token function">round</span><span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">bigint</span>è¯´æ˜ï¼šè¿”å› <span class="token keyword">double</span> ç±»å‹çš„æ•´æ•°å€¼éƒ¨åˆ†ï¼ˆéµå¾ªå››èˆäº”å…¥ï¼‰ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.1415926</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æŒ‡å®šç²¾åº¦å–æ•´å‡½æ•°-round"><a href="#æŒ‡å®šç²¾åº¦å–æ•´å‡½æ•°-round" class="headerlink" title="æŒ‡å®šç²¾åº¦å–æ•´å‡½æ•° round"></a>æŒ‡å®šç²¾åº¦å–æ•´å‡½æ•° round</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token function">round</span><span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">double</span>è¯´æ˜ï¼šè¿”å›æŒ‡å®šç²¾åº¦ d çš„ <span class="token keyword">double</span> ç±»å‹ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.1415926</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">3.1416</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å‘ä¸‹å–æ•´å‡½æ•°-floor"><a href="#å‘ä¸‹å–æ•´å‡½æ•°-floor" class="headerlink" title="å‘ä¸‹å–æ•´å‡½æ•° floor"></a>å‘ä¸‹å–æ•´å‡½æ•° floor</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šfloor<span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">bigint</span>è¯´æ˜ï¼šè¿”å›ç­‰äºæˆ–è€…å°äºè¯¥ <span class="token keyword">double</span> å˜é‡çš„æœ€å¤§çš„æ•´æ•°ç¤ºä¾‹ï¼š<span class="token keyword">select</span> floor<span class="token punctuation">(</span><span class="token number">3.641</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å‘ä¸Šå–æ•´å‡½æ•°-ceil"><a href="#å‘ä¸Šå–æ•´å‡½æ•°-ceil" class="headerlink" title="å‘ä¸Šå–æ•´å‡½æ•° ceil"></a>å‘ä¸Šå–æ•´å‡½æ•° ceil</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šceil<span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">bigint</span>è¯´æ˜ï¼šè¿”å›ç­‰äºæˆ–è€…å¤§äºè¯¥ <span class="token keyword">double</span> å˜é‡çš„æœ€å°çš„æ•´æ•°ç¤ºä¾‹ï¼š<span class="token keyword">select</span> ceil<span class="token punctuation">(</span><span class="token number">3.1415926</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å–éšæœºæ•°å‡½æ•°-rand"><a href="#å–éšæœºæ•°å‡½æ•°-rand" class="headerlink" title="å–éšæœºæ•°å‡½æ•° rand"></a>å–éšæœºæ•°å‡½æ•° rand</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šrand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rand<span class="token punctuation">(</span><span class="token keyword">int</span> seed<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">double</span>è¯´æ˜ï¼šè¿”å›ä¸€ä¸ª <span class="token number">0</span> åˆ° <span class="token number">1</span> èŒƒå›´å†…çš„éšæœºæ•°ã€‚å¦‚æœæŒ‡å®šç§å­ seedï¼Œåˆ™ä¼šç­‰åˆ°ä¸€ä¸ªç¨³å®šçš„éšæœºæ•°åºåˆ—ç¤ºä¾‹ï¼š<span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span> <span class="token comment">-- æ¯æ¬¡æ‰§è¡Œæ­¤è¯­å¥å¾—åˆ°çš„ç»“æœéƒ½ä¸åŒ</span>ç»“æœï¼š<span class="token number">0.5577432776034763</span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- åªè¦æŒ‡å®šç§å­ï¼Œæ¯æ¬¡æ‰§è¡Œæ­¤è¯­å¥å¾—åˆ°çš„ç»“æœä¸€æ ·çš„</span>ç»“æœï¼š<span class="token number">0.7220096548596434</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="è‡ªç„¶æŒ‡æ•°å‡½æ•°-exp"><a href="#è‡ªç„¶æŒ‡æ•°å‡½æ•°-exp" class="headerlink" title="è‡ªç„¶æŒ‡æ•°å‡½æ•° exp"></a>è‡ªç„¶æŒ‡æ•°å‡½æ•° exp</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šexp<span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">double</span>è¯´æ˜ï¼šè¿”å›è‡ªç„¶å¯¹æ•° e çš„ a æ¬¡æ–¹ç¤ºä¾‹ï¼š<span class="token keyword">select</span> exp<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">7.38905609893065</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="ä»¥-10-ä¸ºåº•å¯¹æ•°å‡½æ•°-log10"><a href="#ä»¥-10-ä¸ºåº•å¯¹æ•°å‡½æ•°-log10" class="headerlink" title="ä»¥ 10 ä¸ºåº•å¯¹æ•°å‡½æ•° log10"></a>ä»¥ 10 ä¸ºåº•å¯¹æ•°å‡½æ•° log10</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šlog10<span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">double</span>è¯´æ˜ï¼šè¿”å›ä»¥ <span class="token number">10</span> ä¸ºåº•çš„ a çš„å¯¹æ•°ç¤ºä¾‹ï¼š<span class="token keyword">select</span> log10<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">2.0</span>æ­¤å¤–è¿˜æœ‰ï¼šä»¥ <span class="token number">2</span> ä¸ºåº•å¯¹æ•°å‡½æ•°ï¼šlog2<span class="token punctuation">(</span><span class="token punctuation">)</span>ã€å¯¹æ•°å‡½æ•°ï¼šlog<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å¹‚è¿ç®—å‡½æ•°-pow"><a href="#å¹‚è¿ç®—å‡½æ•°-pow" class="headerlink" title="å¹‚è¿ç®—å‡½æ•° pow"></a>å¹‚è¿ç®—å‡½æ•° pow</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼špow<span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">,</span> <span class="token keyword">double</span> p<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">double</span>è¯´æ˜ï¼šè¿”å› a çš„ p æ¬¡å¹‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> pow<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">16.0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å¼€å¹³æ–¹å‡½æ•°-sqrt"><a href="#å¼€å¹³æ–¹å‡½æ•°-sqrt" class="headerlink" title="å¼€å¹³æ–¹å‡½æ•° sqrt"></a>å¼€å¹³æ–¹å‡½æ•° sqrt</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šsqrt<span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">double</span>è¯´æ˜ï¼šè¿”å› a çš„å¹³æ–¹æ ¹ç¤ºä¾‹ï¼š<span class="token keyword">select</span> sqrt<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">4.0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="äºŒè¿›åˆ¶å‡½æ•°-bin"><a href="#äºŒè¿›åˆ¶å‡½æ•°-bin" class="headerlink" title="äºŒè¿›åˆ¶å‡½æ•° bin"></a>äºŒè¿›åˆ¶å‡½æ•° bin</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šbin<span class="token punctuation">(</span><span class="token keyword">bigint</span> a<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›açš„äºŒè¿›åˆ¶ä»£ç è¡¨ç¤ºç¤ºä¾‹ï¼š<span class="token keyword">select</span> bin<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">111</span>åå…­è¿›åˆ¶å‡½æ•°ï¼šhex<span class="token punctuation">(</span><span class="token punctuation">)</span>ã€å°†åå…­è¿›åˆ¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å‡½æ•°ï¼šunhex<span class="token punctuation">(</span><span class="token punctuation">)</span>è¿›åˆ¶è½¬æ¢å‡½æ•°ï¼šconv<span class="token punctuation">(</span><span class="token keyword">bigint</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> from_base<span class="token punctuation">,</span> <span class="token keyword">int</span> to_base<span class="token punctuation">)</span> è¯´æ˜ï¼šå°†æ•°å€¼ num ä» from_base è¿›åˆ¶è½¬åŒ–åˆ° to_base è¿›åˆ¶<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ­¤å¤–è¿˜æœ‰å¾ˆå¤šæ•°å­¦å‡½æ•°ï¼šç»å¯¹å€¼å‡½æ•°ï¼š<code>abs()</code>ã€æ­£å–ä½™å‡½æ•°ï¼š<code>pmod()</code>ã€æ­£å¼¦å‡½æ•°ï¼š<code>sin()</code>ã€åæ­£å¼¦å‡½æ•°ï¼š<code>asin()</code>ã€ä½™å¼¦å‡½æ•°ï¼š<code>cos()</code>ã€åä½™å¼¦å‡½æ•°ï¼š<code>acos()</code>ã€positive å‡½æ•°ï¼š<code>positive()</code>ã€negative å‡½æ•°ï¼š<code>negative()</code>ã€‚</p><h3 id="æ¡ä»¶å‡½æ•°"><a href="#æ¡ä»¶å‡½æ•°" class="headerlink" title="æ¡ä»¶å‡½æ•°"></a>æ¡ä»¶å‡½æ•°</h3><h4 id="IF-å‡½æ•°"><a href="#IF-å‡½æ•°" class="headerlink" title="IF å‡½æ•°"></a>IF å‡½æ•°</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> testCondition<span class="token punctuation">,</span> T valueTrue<span class="token punctuation">,</span> T valueFalseOrNULL<span class="token punctuation">)</span>è¿”å›å€¼ï¼šTè¯´æ˜ï¼šå½“æ¡ä»¶ testCondition ä¸º <span class="token boolean">TRUE</span> æ—¶ï¼Œè¿”å› valueTrueï¼›å¦åˆ™è¿”å› valueFalseOrNULLç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">200</span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">100</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="éç©ºæŸ¥æ‰¾å‡½æ•°-coalesce"><a href="#éç©ºæŸ¥æ‰¾å‡½æ•°-coalesce" class="headerlink" title="éç©ºæŸ¥æ‰¾å‡½æ•° coalesce"></a>éç©ºæŸ¥æ‰¾å‡½æ•° coalesce</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token keyword">coalesce</span><span class="token punctuation">(</span>T v1<span class="token punctuation">,</span> T v2<span class="token punctuation">,</span> â€¦<span class="token punctuation">)</span>è¿”å›å€¼ï¼šTè¯´æ˜ï¼šè¿”å›å‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªéç©ºå€¼ï¼›å¦‚æœæ‰€æœ‰å€¼éƒ½ä¸º <span class="token boolean">NULL</span>ï¼Œé‚£ä¹ˆè¿”å› <span class="token boolean">NULL</span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">coalesce</span><span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'100'</span><span class="token punctuation">,</span> <span class="token string">'50'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">100</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ¡ä»¶åˆ¤æ–­å‡½æ•°-case-when"><a href="#æ¡ä»¶åˆ¤æ–­å‡½æ•°-case-when" class="headerlink" title="æ¡ä»¶åˆ¤æ–­å‡½æ•° case when"></a>æ¡ä»¶åˆ¤æ–­å‡½æ•° case when</h4><p><strong>ç”¨æ³•ä¸€</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token keyword">case</span> <span class="token keyword">when</span> a <span class="token keyword">then</span> b <span class="token punctuation">[</span><span class="token keyword">when</span> c <span class="token keyword">then</span> d<span class="token punctuation">]</span><span class="token operator">*</span> <span class="token punctuation">[</span><span class="token keyword">else</span> e<span class="token punctuation">]</span> <span class="token keyword">end</span>è¿”å›å€¼ï¼šTè¯´æ˜ï¼šå¦‚æœ a ä¸º <span class="token boolean">TRUE</span>ï¼Œåˆ™è¿”å› bï¼›å¦‚æœ c ä¸º <span class="token boolean">TRUE</span>ï¼Œåˆ™è¿”å› dï¼›å¦åˆ™è¿”å› eã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">2</span> <span class="token keyword">then</span> <span class="token string">'tom'</span> <span class="token keyword">when</span> <span class="token number">2</span><span class="token operator">=</span><span class="token number">2</span> <span class="token keyword">then</span> <span class="token string">'mary'</span> <span class="token keyword">else</span> <span class="token string">'tim'</span> <span class="token keyword">end</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šmary<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>ç”¨æ³•äºŒ</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token keyword">case</span> a <span class="token keyword">when</span> b <span class="token keyword">then</span> c <span class="token punctuation">[</span><span class="token keyword">when</span> d <span class="token keyword">then</span> e<span class="token punctuation">]</span><span class="token operator">*</span> <span class="token punctuation">[</span><span class="token keyword">else</span> f<span class="token punctuation">]</span> <span class="token keyword">end</span>è¿”å›å€¼ï¼šTè¯´æ˜ï¼šå¦‚æœ a ç­‰äº bï¼Œé‚£ä¹ˆè¿”å› cï¼›å¦‚æœ a ç­‰äº dï¼Œé‚£ä¹ˆè¿”å› eï¼›å¦åˆ™è¿”å› fã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">case</span> <span class="token number">100</span> <span class="token keyword">when</span> <span class="token number">50</span> <span class="token keyword">then</span> <span class="token string">'tom'</span> <span class="token keyword">when</span> <span class="token number">100</span> <span class="token keyword">then</span> <span class="token string">'mary'</span> <span class="token keyword">else</span> <span class="token string">'tim'</span> <span class="token keyword">end</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šmary<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="æ—¥æœŸå‡½æ•°"><a href="#æ—¥æœŸå‡½æ•°" class="headerlink" title="æ—¥æœŸå‡½æ•°"></a>æ—¥æœŸå‡½æ•°</h3><p><strong>æ³¨æ„ï¼š</strong>ä»¥ä¸‹ SQL è¯­å¥ä¸­çš„ <code>from tableName</code> å¯å»æ‰ï¼Œä¸å½±å“æŸ¥è¯¢ç»“æœ</p><h4 id="è·å–å½“å‰UNIXæ—¶é—´æˆ³å‡½æ•°-unix-timestamp"><a href="#è·å–å½“å‰UNIXæ—¶é—´æˆ³å‡½æ•°-unix-timestamp" class="headerlink" title="è·å–å½“å‰UNIXæ—¶é—´æˆ³å‡½æ•° unix_timestamp"></a>è·å–å½“å‰UNIXæ—¶é—´æˆ³å‡½æ•° unix_timestamp</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šunix_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">bigint</span>è¯´æ˜ï¼šè·å¾—å½“å‰æ—¶åŒºçš„ UNIX æ—¶é—´æˆ³ç¤ºä¾‹ï¼š<span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">1616906976</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="UNIXæ—¶é—´æˆ³è½¬æ—¥æœŸå‡½æ•°-from-unixtime"><a href="#UNIXæ—¶é—´æˆ³è½¬æ—¥æœŸå‡½æ•°-from-unixtime" class="headerlink" title="UNIXæ—¶é—´æˆ³è½¬æ—¥æœŸå‡½æ•° from_unixtime"></a>UNIXæ—¶é—´æˆ³è½¬æ—¥æœŸå‡½æ•° from_unixtime</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šfrom_unixtime<span class="token punctuation">(</span><span class="token keyword">bigint</span> unixtime<span class="token punctuation">[</span><span class="token punctuation">,</span> string format<span class="token punctuation">]</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè½¬åŒ– UNIX æ—¶é—´æˆ³ï¼ˆä» <span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> UTC åˆ°æŒ‡å®šæ—¶é—´çš„ç§’æ•°ï¼‰åˆ°å½“å‰æ—¶åŒºçš„æ—¶é—´æ ¼å¼ç¤ºä¾‹ï¼š<span class="token keyword">select</span> from_unixtime<span class="token punctuation">(</span><span class="token number">1616906976</span><span class="token punctuation">,</span> <span class="token string">'yyyyMMdd'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">20210328</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ—¥æœŸè½¬UNIXæ—¶é—´æˆ³å‡½æ•°-unix-timestamp"><a href="#æ—¥æœŸè½¬UNIXæ—¶é—´æˆ³å‡½æ•°-unix-timestamp" class="headerlink" title="æ—¥æœŸè½¬UNIXæ—¶é—´æˆ³å‡½æ•° unix_timestamp"></a>æ—¥æœŸè½¬UNIXæ—¶é—´æˆ³å‡½æ•° unix_timestamp</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šunix_timestamp<span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">bigint</span>è¯´æ˜ï¼šè½¬æ¢æ ¼å¼ä¸º <span class="token string">"yyyy-MM-dd HH:mm:ss"</span> çš„æ—¥æœŸåˆ° UNIX æ—¶é—´æˆ³ã€‚å¦‚æœè½¬åŒ–å¤±è´¥ï¼Œåˆ™è¿”å› <span class="token boolean">NULL</span>ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token string">'2021-03-08 14:21:15'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">1615184475</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æŒ‡å®šæ ¼å¼æ—¥æœŸè½¬-UNIX-æ—¶é—´æˆ³å‡½æ•°-unix-timestamp"><a href="#æŒ‡å®šæ ¼å¼æ—¥æœŸè½¬-UNIX-æ—¶é—´æˆ³å‡½æ•°-unix-timestamp" class="headerlink" title="æŒ‡å®šæ ¼å¼æ—¥æœŸè½¬ UNIX æ—¶é—´æˆ³å‡½æ•° unix_timestamp"></a>æŒ‡å®šæ ¼å¼æ—¥æœŸè½¬ UNIX æ—¶é—´æˆ³å‡½æ•° unix_timestamp</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šunix_timestamp<span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">,</span> string pattern<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">bigint</span>è¯´æ˜ï¼šè½¬æ¢ pattern æ ¼å¼çš„æ—¥æœŸåˆ° UNIX æ—¶é—´æˆ³ã€‚å¦‚æœè½¬åŒ–å¤±è´¥ï¼Œåˆ™è¿”å› <span class="token boolean">NULL</span>ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token string">'2021-03-08 14:21:15'</span><span class="token punctuation">,</span> <span class="token string">'yyyy-MM-dd HH:mm:ss'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">1615184475</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ—¥æœŸæ—¶é—´è½¬æ—¥æœŸå‡½æ•°-to-date"><a href="#æ—¥æœŸæ—¶é—´è½¬æ—¥æœŸå‡½æ•°-to-date" class="headerlink" title="æ—¥æœŸæ—¶é—´è½¬æ—¥æœŸå‡½æ•° to_date"></a>æ—¥æœŸæ—¶é—´è½¬æ—¥æœŸå‡½æ•° to_date</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼što_date<span class="token punctuation">(</span>string <span class="token keyword">timestamp</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›æ—¥æœŸæ—¶é—´å­—æ®µä¸­çš„æ—¥æœŸéƒ¨åˆ†ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> to_date<span class="token punctuation">(</span><span class="token string">'2021-03-28 14:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">2021</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">28</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ—¥æœŸè½¬å¹´å‡½æ•°-year"><a href="#æ—¥æœŸè½¬å¹´å‡½æ•°-year" class="headerlink" title="æ—¥æœŸè½¬å¹´å‡½æ•° year"></a>æ—¥æœŸè½¬å¹´å‡½æ•° year</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token keyword">year</span><span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å›æ—¥æœŸä¸­çš„å¹´ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token string">'2021-03-28 10:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">2021</span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token string">'2021-03-28'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">2021</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ—¥æœŸè½¬æœˆå‡½æ•°-month"><a href="#æ—¥æœŸè½¬æœˆå‡½æ•°-month" class="headerlink" title="æ—¥æœŸè½¬æœˆå‡½æ•° month"></a>æ—¥æœŸè½¬æœˆå‡½æ•° month</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token keyword">month</span> <span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å›æ—¥æœŸä¸­çš„æœˆä»½ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">month</span><span class="token punctuation">(</span><span class="token string">'2020-12-28 12:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">12</span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">month</span><span class="token punctuation">(</span><span class="token string">'2021-03-08'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ—¥æœŸè½¬å¤©å‡½æ•°-day"><a href="#æ—¥æœŸè½¬å¤©å‡½æ•°-day" class="headerlink" title="æ—¥æœŸè½¬å¤©å‡½æ•° day"></a>æ—¥æœŸè½¬å¤©å‡½æ•° day</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token keyword">day</span> <span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å›æ—¥æœŸä¸­çš„å¤©ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">day</span><span class="token punctuation">(</span><span class="token string">'2020-12-08 10:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">8</span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">day</span><span class="token punctuation">(</span><span class="token string">'2020-12-24'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">24</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ—¥æœŸè½¬å°æ—¶å‡½æ•°-hour"><a href="#æ—¥æœŸè½¬å°æ—¶å‡½æ•°-hour" class="headerlink" title="æ—¥æœŸè½¬å°æ—¶å‡½æ•° hour"></a>æ—¥æœŸè½¬å°æ—¶å‡½æ•° hour</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token keyword">hour</span> <span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å›æ—¥æœŸä¸­çš„å°æ—¶ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">hour</span><span class="token punctuation">(</span><span class="token string">'2020-12-08 10:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ—¥æœŸè½¬åˆ†é’Ÿå‡½æ•°-minute"><a href="#æ—¥æœŸè½¬åˆ†é’Ÿå‡½æ•°-minute" class="headerlink" title="æ—¥æœŸè½¬åˆ†é’Ÿå‡½æ•° minute"></a>æ—¥æœŸè½¬åˆ†é’Ÿå‡½æ•° minute</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token keyword">minute</span> <span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å›æ—¥æœŸä¸­çš„åˆ†é’Ÿã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">minute</span><span class="token punctuation">(</span><span class="token string">'2020-12-08 10:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ—¥æœŸè½¬ç§’å‡½æ•°-second"><a href="#æ—¥æœŸè½¬ç§’å‡½æ•°-second" class="headerlink" title="æ—¥æœŸè½¬ç§’å‡½æ•° second"></a>æ—¥æœŸè½¬ç§’å‡½æ•° second</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token keyword">second</span> <span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å›æ—¥æœŸä¸­çš„ç§’ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">second</span><span class="token punctuation">(</span><span class="token string">'2020-12-08 10:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ—¥æœŸè½¬å‘¨å‡½æ•°-weekofyear"><a href="#æ—¥æœŸè½¬å‘¨å‡½æ•°-weekofyear" class="headerlink" title="æ—¥æœŸè½¬å‘¨å‡½æ•° weekofyear"></a>æ—¥æœŸè½¬å‘¨å‡½æ•° weekofyear</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šweekofyear <span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å›æ—¥æœŸåœ¨å½“å‰çš„å‘¨æ•°ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> weekofyear<span class="token punctuation">(</span><span class="token string">'2020-12-08 10:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">49</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ—¥æœŸæ¯”è¾ƒå‡½æ•°-datediff"><a href="#æ—¥æœŸæ¯”è¾ƒå‡½æ•°-datediff" class="headerlink" title="æ—¥æœŸæ¯”è¾ƒå‡½æ•° datediff"></a>æ—¥æœŸæ¯”è¾ƒå‡½æ•° datediff</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šdatediff<span class="token punctuation">(</span>string enddate<span class="token punctuation">,</span> string startdate<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å›ç»“æŸæ—¥æœŸå‡å»å¼€å§‹æ—¥æœŸçš„å¤©æ•°ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token string">'2020-12-08'</span><span class="token punctuation">,</span> <span class="token string">'2012-05-09'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">213</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ—¥æœŸå¢åŠ å‡½æ•°-date-add"><a href="#æ—¥æœŸå¢åŠ å‡½æ•°-date-add" class="headerlink" title="æ—¥æœŸå¢åŠ å‡½æ•° date_add"></a>æ—¥æœŸå¢åŠ å‡½æ•° date_add</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šdate_add<span class="token punctuation">(</span>string startdate<span class="token punctuation">,</span> <span class="token keyword">int</span> days<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›å¼€å§‹æ—¥æœŸ startdate å¢åŠ  days å¤©åçš„æ—¥æœŸã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token string">'2020-12-08'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">2020</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">18</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ—¥æœŸå‡å°‘å‡½æ•°-date-sub"><a href="#æ—¥æœŸå‡å°‘å‡½æ•°-date-sub" class="headerlink" title="æ—¥æœŸå‡å°‘å‡½æ•° date_sub"></a>æ—¥æœŸå‡å°‘å‡½æ•° date_sub</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šdate_sub <span class="token punctuation">(</span>string startdate<span class="token punctuation">,</span> <span class="token keyword">int</span> days<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›å¼€å§‹æ—¥æœŸ startdate å‡å°‘ days å¤©åçš„æ—¥æœŸã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> date_sub<span class="token punctuation">(</span><span class="token string">'2020-12-08'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">2020</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">28</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="å­—ç¬¦ä¸²å‡½æ•°"><a href="#å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²å‡½æ•°"></a>å­—ç¬¦ä¸²å‡½æ•°</h3><h4 id="å­—ç¬¦ä¸²é•¿åº¦å‡½æ•°-length"><a href="#å­—ç¬¦ä¸²é•¿åº¦å‡½æ•°-length" class="headerlink" title="å­—ç¬¦ä¸²é•¿åº¦å‡½æ•° length"></a>å­—ç¬¦ä¸²é•¿åº¦å‡½æ•° length</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šlength<span class="token punctuation">(</span>string A<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å›å­—ç¬¦ä¸²Açš„é•¿åº¦ç¤ºä¾‹ï¼š<span class="token keyword">select</span> length<span class="token punctuation">(</span><span class="token string">'abcdefg'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">7</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å­—ç¬¦ä¸²åè½¬å‡½æ•°-reverse"><a href="#å­—ç¬¦ä¸²åè½¬å‡½æ•°-reverse" class="headerlink" title="å­—ç¬¦ä¸²åè½¬å‡½æ•° reverse"></a>å­—ç¬¦ä¸²åè½¬å‡½æ•° reverse</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šreverse<span class="token punctuation">(</span>string A<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›å­—ç¬¦ä¸²Açš„åè½¬ç»“æœç¤ºä¾‹ï¼š<span class="token keyword">select</span> reverse<span class="token punctuation">(</span><span class="token string">'abcdefg'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šgfedcba<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å­—ç¬¦ä¸²è¿æ¥å‡½æ•°-concat"><a href="#å­—ç¬¦ä¸²è¿æ¥å‡½æ•°-concat" class="headerlink" title="å­—ç¬¦ä¸²è¿æ¥å‡½æ•° concat"></a>å­—ç¬¦ä¸²è¿æ¥å‡½æ•° concat</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šconcat<span class="token punctuation">(</span>string A<span class="token punctuation">,</span> string Bâ€¦<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›è¾“å…¥å­—ç¬¦ä¸²è¿æ¥åçš„ç»“æœï¼Œæ”¯æŒä»»æ„ä¸ªè¾“å…¥å­—ç¬¦ä¸²ç¤ºä¾‹ï¼š<span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'def'</span><span class="token punctuation">,</span> <span class="token string">'gh'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šabcdefgh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å¸¦åˆ†éš”ç¬¦å­—ç¬¦ä¸²è¿æ¥å‡½æ•°-concat-ws"><a href="#å¸¦åˆ†éš”ç¬¦å­—ç¬¦ä¸²è¿æ¥å‡½æ•°-concat-ws" class="headerlink" title="å¸¦åˆ†éš”ç¬¦å­—ç¬¦ä¸²è¿æ¥å‡½æ•° concat_ws"></a>å¸¦åˆ†éš”ç¬¦å­—ç¬¦ä¸²è¿æ¥å‡½æ•° concat_ws</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šconcat_ws<span class="token punctuation">(</span>string SEP<span class="token punctuation">,</span> string A<span class="token punctuation">,</span> string Bâ€¦<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›è¾“å…¥å­—ç¬¦ä¸²è¿æ¥åçš„ç»“æœï¼ŒSEP è¡¨ç¤ºå„ä¸ªå­—ç¬¦ä¸²é—´çš„åˆ†éš”ç¬¦ç¤ºä¾‹ï¼š<span class="token keyword">select</span> concat_ws<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span> <span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'def'</span><span class="token punctuation">,</span> <span class="token string">'gh'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šabc<span class="token punctuation">,</span>def<span class="token punctuation">,</span>gh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å­—ç¬¦ä¸²æˆªå–å‡½æ•°-substr-substring"><a href="#å­—ç¬¦ä¸²æˆªå–å‡½æ•°-substr-substring" class="headerlink" title="å­—ç¬¦ä¸²æˆªå–å‡½æ•° substr, substring"></a>å­—ç¬¦ä¸²æˆªå–å‡½æ•° substr, substring</h4><p><strong>ç”¨æ³•ä¸€</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šsubstr<span class="token punctuation">(</span>string A<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token keyword">start</span><span class="token punctuation">)</span><span class="token punctuation">,</span> substring<span class="token punctuation">(</span>string A<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token keyword">start</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›å­—ç¬¦ä¸² A ä» <span class="token keyword">start</span> ä½ç½®åˆ°ç»“å°¾çš„å­—ç¬¦ä¸²ç¤ºä¾‹ï¼š<span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šcdeç¤ºä¾‹ï¼š<span class="token keyword">select</span> substring<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šcdeç¤ºä¾‹ï¼š<span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼še<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>ç”¨æ³•äºŒ</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šsubstr<span class="token punctuation">(</span>string A<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token keyword">start</span><span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span><span class="token punctuation">,</span> substring<span class="token punctuation">(</span>string A<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token keyword">start</span><span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›å­—ç¬¦ä¸² A ä» <span class="token keyword">start</span> ä½ç½®å¼€å§‹ï¼Œé•¿åº¦ä¸º len çš„å­—ç¬¦ä¸²ç¤ºä¾‹ï¼š<span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šcdç¤ºä¾‹ï¼š<span class="token keyword">select</span> substring<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šcdç¤ºä¾‹ï¼š<span class="token keyword">select</span> substring<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šde<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å­—ç¬¦ä¸²è½¬å¤§å†™å‡½æ•°-upper-ucase"><a href="#å­—ç¬¦ä¸²è½¬å¤§å†™å‡½æ•°-upper-ucase" class="headerlink" title="å­—ç¬¦ä¸²è½¬å¤§å†™å‡½æ•° upper, ucase"></a>å­—ç¬¦ä¸²è½¬å¤§å†™å‡½æ•° upper, ucase</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šupper<span class="token punctuation">(</span>string A<span class="token punctuation">)</span> <span class="token function">ucase</span><span class="token punctuation">(</span>string A<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›å­—ç¬¦ä¸² A çš„å¤§å†™æ ¼å¼ç¤ºä¾‹ï¼š<span class="token keyword">select</span> upper<span class="token punctuation">(</span><span class="token string">'abSEd'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šABSEDç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token function">ucase</span><span class="token punctuation">(</span><span class="token string">'abSEd'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šABSED<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å­—ç¬¦ä¸²è½¬å°å†™å‡½æ•°-lower-lcase"><a href="#å­—ç¬¦ä¸²è½¬å°å†™å‡½æ•°-lower-lcase" class="headerlink" title="å­—ç¬¦ä¸²è½¬å°å†™å‡½æ•° lower, lcase"></a>å­—ç¬¦ä¸²è½¬å°å†™å‡½æ•° lower, lcase</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šlower<span class="token punctuation">(</span>string A<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">lcase</span><span class="token punctuation">(</span>string A<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›å­—ç¬¦ä¸² A çš„å°å†™æ ¼å¼ç¤ºä¾‹ï¼š<span class="token keyword">select</span> lower<span class="token punctuation">(</span><span class="token string">'abSEd'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šabsedç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token function">lcase</span><span class="token punctuation">(</span><span class="token string">'abSEd'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šabsed<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å»ç©ºæ ¼å‡½æ•°-trim"><a href="#å»ç©ºæ ¼å‡½æ•°-trim" class="headerlink" title="å»ç©ºæ ¼å‡½æ•° trim"></a>å»ç©ºæ ¼å‡½æ•° trim</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼štrim<span class="token punctuation">(</span>string A<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šå»é™¤å­—ç¬¦ä¸²ä¸¤è¾¹çš„ç©ºæ ¼ç¤ºä¾‹ï¼š<span class="token keyword">select</span> trim<span class="token punctuation">(</span><span class="token string">' abc '</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šabc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å·¦è¾¹å»ç©ºæ ¼å‡½æ•°-ltrim"><a href="#å·¦è¾¹å»ç©ºæ ¼å‡½æ•°-ltrim" class="headerlink" title="å·¦è¾¹å»ç©ºæ ¼å‡½æ•° ltrim"></a>å·¦è¾¹å»ç©ºæ ¼å‡½æ•° ltrim</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šltrim<span class="token punctuation">(</span>string A<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šå»é™¤å­—ç¬¦ä¸²å·¦è¾¹çš„ç©ºæ ¼ç¤ºä¾‹ï¼š<span class="token keyword">select</span> ltrim<span class="token punctuation">(</span><span class="token string">' abc '</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šabc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å³è¾¹å»ç©ºæ ¼å‡½æ•°-rtrim"><a href="#å³è¾¹å»ç©ºæ ¼å‡½æ•°-rtrim" class="headerlink" title="å³è¾¹å»ç©ºæ ¼å‡½æ•° rtrim"></a>å³è¾¹å»ç©ºæ ¼å‡½æ•° rtrim</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šrtrim<span class="token punctuation">(</span>string A<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šå»é™¤å­—ç¬¦ä¸²å³è¾¹çš„ç©ºæ ¼ç¤ºä¾‹ï¼š<span class="token keyword">select</span> rtrim<span class="token punctuation">(</span><span class="token string">' abc '</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šabc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢å‡½æ•°-regexp-replace"><a href="#æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢å‡½æ•°-regexp-replace" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢å‡½æ•° regexp_replace"></a>æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢å‡½æ•° regexp_replace</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šregexp_replace<span class="token punctuation">(</span>string A<span class="token punctuation">,</span> string B<span class="token punctuation">,</span> string C<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šå°†å­—ç¬¦ä¸² A ä¸­çš„ç¬¦åˆ Java æ­£åˆ™è¡¨è¾¾å¼ B çš„éƒ¨åˆ†æ›¿æ¢ä¸º Cã€‚æ³¨æ„ï¼Œåœ¨æœ‰äº›æƒ…å†µä¸‹è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ï¼Œç±»ä¼¼ oracle ä¸­çš„ regexp_replace å‡½æ•°ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> regexp_replace<span class="token punctuation">(</span><span class="token string">'foobar'</span><span class="token punctuation">,</span> <span class="token string">'oo|ar'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šfb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="æ­£åˆ™è¡¨è¾¾å¼è§£æå‡½æ•°-regexp-extract"><a href="#æ­£åˆ™è¡¨è¾¾å¼è§£æå‡½æ•°-regexp-extract" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼è§£æå‡½æ•° regexp_extract"></a>æ­£åˆ™è¡¨è¾¾å¼è§£æå‡½æ•° regexp_extract</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šregexp_extract<span class="token punctuation">(</span>string subject<span class="token punctuation">,</span> string pattern<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token keyword">index</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šå°†å­—ç¬¦ä¸² subject æŒ‰ç…§ pattern æ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™æ‹†åˆ†ï¼Œè¿”å› <span class="token keyword">index</span> æŒ‡å®šçš„å­—ç¬¦ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> regexp_extract<span class="token punctuation">(</span><span class="token string">'foothebar'</span><span class="token punctuation">,</span> <span class="token string">'foo(.*?)(bar)'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼štheç¤ºä¾‹ï¼š<span class="token keyword">select</span> regexp_extract<span class="token punctuation">(</span><span class="token string">'foothebar'</span><span class="token punctuation">,</span> <span class="token string">'foo(.*?)(bar)'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šbarç¤ºä¾‹ï¼š<span class="token keyword">select</span> regexp_extract<span class="token punctuation">(</span><span class="token string">'foothebar'</span><span class="token punctuation">,</span> <span class="token string">'foo(.*?)(bar)'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šfoothebar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong>åœ¨æœ‰äº›æƒ…å†µä¸‹è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ï¼Œä¸‹é¢çš„ç­‰å·è¦ç”¨åŒç«–çº¿è½¬ä¹‰ï¼Œè¿™æ˜¯ Java æ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> data_field<span class="token punctuation">,</span>regexp_extract<span class="token punctuation">(</span>data_field<span class="token punctuation">,</span> <span class="token string">'.*?bgStart\\=([^&amp;]+)'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> aaa<span class="token punctuation">,</span>regexp_extract<span class="token punctuation">(</span>data_field<span class="token punctuation">,</span> <span class="token string">'.*?contentLoaded_headStart\\=([^&amp;]+)'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> bbb<span class="token punctuation">,</span>regexp_extract<span class="token punctuation">(</span>data_field<span class="token punctuation">,</span> <span class="token string">'.*?AppLoad2Req\\=([^&amp;]+)'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ccc <span class="token keyword">from</span> pt_nginx_loginlog_st <span class="token keyword">where</span> pt <span class="token operator">=</span> <span class="token string">'2021-03-28'</span> <span class="token keyword">limit</span> <span class="token number">2</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="URLè§£æå‡½æ•°-parse-url"><a href="#URLè§£æå‡½æ•°-parse-url" class="headerlink" title="URLè§£æå‡½æ•° parse_url"></a>URLè§£æå‡½æ•° parse_url</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šparse_url<span class="token punctuation">(</span>string urlString<span class="token punctuation">,</span> string partToExtract <span class="token punctuation">[</span><span class="token punctuation">,</span> string keyToExtract<span class="token punctuation">]</span><span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å› URL ä¸­æŒ‡å®šçš„éƒ¨åˆ†ã€‚partToExtract çš„æœ‰æ•ˆå€¼ä¸ºï¼šHOSTï¼ŒPATHï¼ŒQUERYï¼ŒREFï¼ŒPROTOCOLï¼ŒAUTHORITYï¼Œ<span class="token keyword">FILE</span>ï¼ŒUSERINFOã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> parse_url<span class="token punctuation">(</span><span class="token string">'https://www.tableName.com/path1/p.php?k1=v1&amp;k2=v2#Ref1'</span><span class="token punctuation">,</span> <span class="token string">'HOST'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šwww<span class="token punctuation">.</span>tableName<span class="token punctuation">.</span>com ç¤ºä¾‹ï¼š<span class="token keyword">select</span> parse_url<span class="token punctuation">(</span><span class="token string">'https://www.tableName.com/path1/p.php?k1=v1&amp;k2=v2#Ref1'</span><span class="token punctuation">,</span> <span class="token string">'QUERY'</span><span class="token punctuation">,</span> <span class="token string">'k1'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šv1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="JSON-è§£æå‡½æ•°-get-json-object"><a href="#JSON-è§£æå‡½æ•°-get-json-object" class="headerlink" title="JSON è§£æå‡½æ•° get_json_object"></a>JSON è§£æå‡½æ•° get_json_object</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šget_json_object<span class="token punctuation">(</span>string json_string<span class="token punctuation">,</span> string path<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè§£æ JSON çš„å­—ç¬¦ä¸² json_stringï¼Œè¿”å› path æŒ‡å®šçš„å†…å®¹ã€‚å¦‚æœè¾“å…¥çš„ JSON å­—ç¬¦ä¸²æ— æ•ˆï¼Œé‚£ä¹ˆè¿”å› <span class="token boolean">NULL</span>ã€‚ç¤ºä¾‹ï¼š<span class="token keyword">select</span> get_json_object<span class="token punctuation">(</span><span class="token string">'&#123;"store":&#123;"fruit":\[&#123;"weight":8,"type":"apple"&#125;,&#123;"weight":9,"type":"pear"&#125;], "bicycle":&#123;"price":19.95,"color":"red"&#125; &#125;,"email":"amy@only_for_json_udf_test.net","owner":"amy"&#125;'</span><span class="token punctuation">,</span> <span class="token string">'$.owner'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šamy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="ç©ºæ ¼å­—ç¬¦ä¸²å‡½æ•°-space"><a href="#ç©ºæ ¼å­—ç¬¦ä¸²å‡½æ•°-space" class="headerlink" title="ç©ºæ ¼å­—ç¬¦ä¸²å‡½æ•° space"></a>ç©ºæ ¼å­—ç¬¦ä¸²å‡½æ•° space</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šspace<span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›é•¿åº¦ä¸º n çš„å­—ç¬¦ä¸²ç¤ºä¾‹ï¼š<span class="token keyword">select</span> space<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> length<span class="token punctuation">(</span>space<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="é‡å¤å­—ç¬¦ä¸²å‡½æ•°-repeat"><a href="#é‡å¤å­—ç¬¦ä¸²å‡½æ•°-repeat" class="headerlink" title="é‡å¤å­—ç¬¦ä¸²å‡½æ•° repeat"></a>é‡å¤å­—ç¬¦ä¸²å‡½æ•° repeat</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼š<span class="token keyword">repeat</span><span class="token punctuation">(</span>string str<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šè¿”å›é‡å¤ n æ¬¡åçš„ str å­—ç¬¦ä¸²ç¤ºä¾‹ï¼š<span class="token keyword">select</span> <span class="token keyword">repeat</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šabcabcabcabcabc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="é¦–å­—ç¬¦-ascii-å‡½æ•°"><a href="#é¦–å­—ç¬¦-ascii-å‡½æ•°" class="headerlink" title="é¦–å­—ç¬¦ ascii å‡½æ•°"></a>é¦–å­—ç¬¦ ascii å‡½æ•°</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šascii<span class="token punctuation">(</span>string str<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å›å­—ç¬¦ä¸² str ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ ascii ç ç¤ºä¾‹ï¼š<span class="token keyword">select</span> ascii<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">97</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å·¦è¡¥è¶³å‡½æ•°-lpad"><a href="#å·¦è¡¥è¶³å‡½æ•°-lpad" class="headerlink" title="å·¦è¡¥è¶³å‡½æ•° lpad"></a>å·¦è¡¥è¶³å‡½æ•° lpad</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šlpad<span class="token punctuation">(</span>string str<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">,</span> string pad<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šå°† str è¿›è¡Œç”¨ pad è¿›è¡Œå·¦è¡¥è¶³åˆ° len ä½ç¤ºä¾‹ï¼š<span class="token keyword">select</span> lpad<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'td'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼štdtdtdtabcæ³¨æ„ï¼šä¸ GPï¼ŒORACLE ä¸åŒï¼Œpad ä¸èƒ½é»˜è®¤<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="å³è¡¥è¶³å‡½æ•°-rpad"><a href="#å³è¡¥è¶³å‡½æ•°-rpad" class="headerlink" title="å³è¡¥è¶³å‡½æ•° rpad"></a>å³è¡¥è¶³å‡½æ•° rpad</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šrpad<span class="token punctuation">(</span>string str<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">,</span> string pad<span class="token punctuation">)</span>è¿”å›å€¼ï¼šstringè¯´æ˜ï¼šå°† str è¿›è¡Œç”¨ pad è¿›è¡Œå³è¡¥è¶³åˆ° len ä½ç¤ºä¾‹ï¼š<span class="token keyword">select</span> rpad<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'td'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼šabctdtdtdt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="åˆ†å‰²å­—ç¬¦ä¸²å‡½æ•°-split"><a href="#åˆ†å‰²å­—ç¬¦ä¸²å‡½æ•°-split" class="headerlink" title="åˆ†å‰²å­—ç¬¦ä¸²å‡½æ•° split"></a>åˆ†å‰²å­—ç¬¦ä¸²å‡½æ•° split</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šsplit<span class="token punctuation">(</span>string str<span class="token punctuation">,</span> string pat<span class="token punctuation">)</span>è¿”å›å€¼ï¼šarrayè¯´æ˜ï¼šæŒ‰ç…§ pat å­—ç¬¦ä¸²åˆ†å‰² strï¼Œä¼šè¿”å›åˆ†å‰²åçš„å­—ç¬¦ä¸²æ•°ç»„ç¤ºä¾‹ï¼š<span class="token keyword">select</span> split<span class="token punctuation">(</span><span class="token string">'abtcdtef'</span><span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token punctuation">[</span><span class="token string">"ab"</span><span class="token punctuation">,</span><span class="token string">"cd"</span><span class="token punctuation">,</span><span class="token string">"ef"</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="é›†åˆæŸ¥æ‰¾å‡½æ•°-find-in-set"><a href="#é›†åˆæŸ¥æ‰¾å‡½æ•°-find-in-set" class="headerlink" title="é›†åˆæŸ¥æ‰¾å‡½æ•° find_in_set"></a>é›†åˆæŸ¥æ‰¾å‡½æ•° find_in_set</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šfind_in_set<span class="token punctuation">(</span>string str<span class="token punctuation">,</span> string strList<span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å› str åœ¨ strlist ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œstrlist æ˜¯ç”¨é€—å·åˆ†å‰²çš„å­—ç¬¦ä¸²ã€‚å¦‚æœæ²¡æœ‰æ‰¾è¯¥ str å­—ç¬¦ï¼Œåˆ™è¿”å› <span class="token number">0</span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> find_in_set<span class="token punctuation">(</span><span class="token string">'ab'</span><span class="token punctuation">,</span> <span class="token string">'ef,ab,de'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">2</span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> find_in_set<span class="token punctuation">(</span><span class="token string">'at'</span><span class="token punctuation">,</span> <span class="token string">'ef,ab,de'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="å¤åˆç±»å‹æ„å»ºæ“ä½œ"><a href="#å¤åˆç±»å‹æ„å»ºæ“ä½œ" class="headerlink" title="å¤åˆç±»å‹æ„å»ºæ“ä½œ"></a>å¤åˆç±»å‹æ„å»ºæ“ä½œ</h3><h4 id="Mapç±»å‹æ„å»º"><a href="#Mapç±»å‹æ„å»º" class="headerlink" title="Mapç±»å‹æ„å»º"></a>Mapç±»å‹æ„å»º</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šmap <span class="token punctuation">(</span>key1<span class="token punctuation">,</span> value1<span class="token punctuation">,</span> key2<span class="token punctuation">,</span> value2<span class="token punctuation">,</span> â€¦<span class="token punctuation">)</span>è¯´æ˜ï¼šæ ¹æ®è¾“å…¥çš„ <span class="token keyword">key</span> å’Œ <span class="token keyword">value</span> å¯¹æ„å»º Map ç±»å‹ç¤ºä¾‹ï¼š<span class="token keyword">Create</span> <span class="token keyword">table</span> mapTable <span class="token keyword">as</span> <span class="token keyword">select</span> map<span class="token punctuation">(</span><span class="token string">'100'</span><span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">,</span> <span class="token string">'200'</span><span class="token punctuation">,</span> <span class="token string">'mary'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç¤ºä¾‹ï¼š<span class="token keyword">describe</span> mapTable<span class="token punctuation">;</span>ç»“æœï¼št    map<span class="token operator">&lt;</span>string <span class="token punctuation">,</span>string<span class="token operator">></span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š&#123;<span class="token string">"100"</span>:<span class="token string">"tom"</span><span class="token punctuation">,</span><span class="token string">"200"</span>:<span class="token string">"mary"</span>&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="Structç±»å‹æ„å»º"><a href="#Structç±»å‹æ„å»º" class="headerlink" title="Structç±»å‹æ„å»º"></a>Structç±»å‹æ„å»º</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šstruct<span class="token punctuation">(</span>val1<span class="token punctuation">,</span> val2<span class="token punctuation">,</span> val3<span class="token punctuation">,</span> â€¦<span class="token punctuation">)</span>è¯´æ˜ï¼šæ ¹æ®è¾“å…¥çš„å‚æ•°æ„å»ºç»“æ„ä½“ Struct ç±»å‹ç¤ºä¾‹ï¼š<span class="token keyword">create</span> <span class="token keyword">table</span> struct_table <span class="token keyword">as</span> <span class="token keyword">select</span> struct<span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">,</span> <span class="token string">'mary'</span><span class="token punctuation">,</span> <span class="token string">'tim'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç¤ºä¾‹ï¼š<span class="token keyword">describe</span> struct_table<span class="token punctuation">;</span>ç»“æœï¼št    struct<span class="token operator">&lt;</span>col1:string<span class="token punctuation">,</span>col2:string<span class="token punctuation">,</span>col3:string<span class="token operator">></span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š&#123;<span class="token string">"col1"</span>:<span class="token string">"tom"</span><span class="token punctuation">,</span><span class="token string">"col2"</span>:<span class="token string">"mary"</span><span class="token punctuation">,</span><span class="token string">"col3"</span>:<span class="token string">"tim"</span>&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="Arrayç±»å‹æ„å»º"><a href="#Arrayç±»å‹æ„å»º" class="headerlink" title="Arrayç±»å‹æ„å»º"></a>Arrayç±»å‹æ„å»º</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šarray<span class="token punctuation">(</span>val1<span class="token punctuation">,</span> val2<span class="token punctuation">,</span> â€¦<span class="token punctuation">)</span>è¯´æ˜ï¼šæ ¹æ®è¾“å…¥çš„å‚æ•°æ„å»ºæ•°ç»„ Array ç±»å‹ç¤ºä¾‹ï¼š<span class="token keyword">create</span> <span class="token keyword">table</span> arr_table <span class="token keyword">as</span> <span class="token keyword">select</span> array<span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">,</span> <span class="token string">'mary'</span><span class="token punctuation">,</span> <span class="token string">'tim'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç¤ºä¾‹ï¼š<span class="token keyword">describe</span> tableName<span class="token punctuation">;</span>ç»“æœï¼št    array<span class="token operator">&lt;</span>string<span class="token operator">></span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token punctuation">[</span><span class="token string">"tom"</span><span class="token punctuation">,</span><span class="token string">"mary"</span><span class="token punctuation">,</span><span class="token string">"tim"</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="å¤æ‚ç±»å‹è®¿é—®æ“ä½œ"><a href="#å¤æ‚ç±»å‹è®¿é—®æ“ä½œ" class="headerlink" title="å¤æ‚ç±»å‹è®¿é—®æ“ä½œ"></a>å¤æ‚ç±»å‹è®¿é—®æ“ä½œ</h3><h4 id="Array-ç±»å‹è®¿é—®-A-n"><a href="#Array-ç±»å‹è®¿é—®-A-n" class="headerlink" title="Array ç±»å‹è®¿é—®: A[n]"></a>Array ç±»å‹è®¿é—®: A[n]</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šA<span class="token punctuation">[</span>n<span class="token punctuation">]</span>æ“ä½œç±»å‹: A ä¸º array ç±»å‹ï¼Œn ä¸º <span class="token keyword">int</span> ç±»å‹è¯´æ˜ï¼šè¿”å›æ•°ç»„ A ä¸­çš„ç¬¬ n ä¸ªå˜é‡å€¼ã€‚æ•°ç»„çš„èµ·å§‹ä¸‹æ ‡ä¸º <span class="token number">0</span>ã€‚æ¯”å¦‚ï¼ŒA æ˜¯ä¸ªå€¼ä¸º <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span> çš„æ•°ç»„ç±»å‹ï¼Œé‚£ä¹ˆ A<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> å°†è¿”å› <span class="token string">'foo'</span>ï¼Œè€Œ A<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> å°†è¿”å› <span class="token string">'bar'</span>ç¤ºä¾‹ï¼š<span class="token keyword">create</span> <span class="token keyword">table</span> arr_table2 <span class="token keyword">as</span> <span class="token keyword">select</span> array<span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span><span class="token string">"mary"</span><span class="token punctuation">,</span><span class="token string">"tim"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">from</span> arr_table2<span class="token punctuation">;</span>ç»“æœï¼štom    mary    tim<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="Map-ç±»å‹è®¿é—®-M-key"><a href="#Map-ç±»å‹è®¿é—®-M-key" class="headerlink" title="Map ç±»å‹è®¿é—®: M[key]"></a>Map ç±»å‹è®¿é—®: M[key]</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šM<span class="token punctuation">[</span><span class="token keyword">key</span><span class="token punctuation">]</span>æ“ä½œç±»å‹: M ä¸º map ç±»å‹ï¼Œ<span class="token keyword">key</span> ä¸º map ä¸­çš„ <span class="token keyword">key</span> å€¼è¯´æ˜ï¼šè¿”å› map ç±»å‹ M ä¸­ï¼Œ<span class="token keyword">key</span> å€¼ä¸ºæŒ‡å®šå€¼çš„ <span class="token keyword">value</span> å€¼ã€‚æ¯”å¦‚ï¼ŒM æ˜¯å€¼ä¸º &#123;<span class="token string">'f'</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'b'</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'all'</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token string">'foobar'</span>&#125; çš„ map ç±»å‹ï¼Œé‚£ä¹ˆ M<span class="token punctuation">[</span><span class="token string">'all'</span><span class="token punctuation">]</span> å°†ä¼šè¿”å› <span class="token string">'foobar'</span>ç¤ºä¾‹ï¼š<span class="token keyword">Create</span> <span class="token keyword">table</span> map_table2 <span class="token keyword">as</span> <span class="token keyword">select</span> map<span class="token punctuation">(</span><span class="token string">'100'</span><span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">,</span> <span class="token string">'200'</span><span class="token punctuation">,</span> <span class="token string">'mary'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> t<span class="token punctuation">[</span><span class="token string">'200'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> t<span class="token punctuation">[</span><span class="token string">'100'</span><span class="token punctuation">]</span> <span class="token keyword">from</span> map_table2<span class="token punctuation">;</span>ç»“æœï¼šmary    tom<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="Structç±»å‹è®¿é—®-S-x"><a href="#Structç±»å‹è®¿é—®-S-x" class="headerlink" title="Structç±»å‹è®¿é—® S.x"></a>Structç±»å‹è®¿é—® S.x</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šS<span class="token punctuation">.</span>xæ“ä½œç±»å‹: S ä¸º struct ç±»å‹è¯´æ˜ï¼šè¿”å›ç»“æ„ä½“ S ä¸­çš„ x å­—æ®µã€‚æ¯”å¦‚ï¼Œå¯¹äºç»“æ„ä½“ struct foobar &#123;<span class="token keyword">int</span> foo<span class="token punctuation">,</span> <span class="token keyword">int</span> bar&#125;ï¼Œfoobar<span class="token punctuation">.</span>foo è¿”å›ç»“æ„ä½“ä¸­çš„ foo å­—æ®µç¤ºä¾‹ï¼š<span class="token keyword">create</span> <span class="token keyword">table</span> str_table2 <span class="token keyword">as</span> <span class="token keyword">select</span> struct<span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">,</span> <span class="token string">'mary'</span><span class="token punctuation">,</span> <span class="token string">'tim'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç¤ºä¾‹ï¼š<span class="token keyword">describe</span> tableName<span class="token punctuation">;</span>ç»“æœï¼št    struct<span class="token operator">&lt;</span>col1:string<span class="token punctuation">,</span>col2:string<span class="token punctuation">,</span>col3:string<span class="token operator">></span>ç¤ºä¾‹ï¼š<span class="token keyword">select</span> t<span class="token punctuation">.</span>col1<span class="token punctuation">,</span> t<span class="token punctuation">.</span>col3 <span class="token keyword">from</span> str_table2<span class="token punctuation">;</span>ç»“æœï¼štom    tim<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="å¤æ‚ç±»å‹é•¿åº¦ç»Ÿè®¡å‡½æ•°"><a href="#å¤æ‚ç±»å‹é•¿åº¦ç»Ÿè®¡å‡½æ•°" class="headerlink" title="å¤æ‚ç±»å‹é•¿åº¦ç»Ÿè®¡å‡½æ•°"></a>å¤æ‚ç±»å‹é•¿åº¦ç»Ÿè®¡å‡½æ•°</h3><h4 id="Map-ç±»å‹é•¿åº¦å‡½æ•°-size-Map"><a href="#Map-ç±»å‹é•¿åº¦å‡½æ•°-size-Map" class="headerlink" title="Map ç±»å‹é•¿åº¦å‡½æ•° size(Map)"></a>Map ç±»å‹é•¿åº¦å‡½æ•° size(Map<k .v>)</k></h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šsize<span class="token punctuation">(</span>Map<span class="token operator">&lt;</span>k <span class="token punctuation">.</span>V<span class="token operator">></span><span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å› map ç±»å‹çš„é•¿åº¦ç¤ºä¾‹ï¼š<span class="token keyword">select</span> size<span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">from</span> map_table2<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="Array-ç±»å‹é•¿åº¦å‡½æ•°-size-Array"><a href="#Array-ç±»å‹é•¿åº¦å‡½æ•°-size-Array" class="headerlink" title="Array ç±»å‹é•¿åº¦å‡½æ•° size(Array)"></a>Array ç±»å‹é•¿åº¦å‡½æ•° size(Array)</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šsize<span class="token punctuation">(</span>Array<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">)</span>è¿”å›å€¼ï¼š<span class="token keyword">int</span>è¯´æ˜ï¼šè¿”å› array ç±»å‹çš„é•¿åº¦ç¤ºä¾‹ï¼š<span class="token keyword">select</span> size<span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">from</span> arr_table2<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="ç±»å‹è½¬æ¢å‡½æ•°ï¼šcast"><a href="#ç±»å‹è½¬æ¢å‡½æ•°ï¼šcast" class="headerlink" title="ç±»å‹è½¬æ¢å‡½æ•°ï¼šcast"></a>ç±»å‹è½¬æ¢å‡½æ•°ï¼šcast</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">è¯­æ³•ï¼šcast<span class="token punctuation">(</span>expr <span class="token keyword">as</span> <span class="token operator">&lt;</span><span class="token keyword">type</span><span class="token operator">></span><span class="token punctuation">)</span>è¿”å›å€¼ï¼šExpected <span class="token string">"="</span> <span class="token keyword">to</span> follow <span class="token string">"type"</span>è¯´æ˜ï¼šè¿”å›è½¬æ¢åçš„æ•°æ®ç±»å‹ç¤ºä¾‹ï¼š<span class="token keyword">select</span> cast<span class="token punctuation">(</span><span class="token string">'1'</span> <span class="token keyword">as</span> <span class="token keyword">bigint</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>ç»“æœï¼š<span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è¡Œè½¬åˆ—åŠåˆ—è½¬è¡Œ"><a href="#è¡Œè½¬åˆ—åŠåˆ—è½¬è¡Œ" class="headerlink" title="è¡Œè½¬åˆ—åŠåˆ—è½¬è¡Œ"></a>è¡Œè½¬åˆ—åŠåˆ—è½¬è¡Œ</h2><h3 id="ä½¿ç”¨-explode-å‡½æ•°å°†-Hive-è¡¨ä¸­çš„-Map-å’Œ-Array-å­—æ®µæ•°æ®è¿›è¡Œæ‹†åˆ†"><a href="#ä½¿ç”¨-explode-å‡½æ•°å°†-Hive-è¡¨ä¸­çš„-Map-å’Œ-Array-å­—æ®µæ•°æ®è¿›è¡Œæ‹†åˆ†" class="headerlink" title="ä½¿ç”¨ explode å‡½æ•°å°† Hive è¡¨ä¸­çš„ Map å’Œ Array å­—æ®µæ•°æ®è¿›è¡Œæ‹†åˆ†"></a>ä½¿ç”¨ <code>explode</code> å‡½æ•°å°† Hive è¡¨ä¸­çš„ Map å’Œ Array å­—æ®µæ•°æ®è¿›è¡Œæ‹†åˆ†</h3><p><code>lateral view</code> ç”¨äºå’Œ <code>split</code>ã€<code>explode</code> ç­‰ UDTF ä¸€èµ·ä½¿ç”¨çš„ï¼Œèƒ½å°†ä¸€è¡Œæ•°æ®æ‹†åˆ†æˆå¤šè¡Œæ•°æ®ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå¯ä»¥å¯¹æ‹†åˆ†çš„æ•°æ®è¿›è¡Œèšåˆï¼Œ<code>lateral view</code> é¦–å…ˆä¸ºåŸå§‹è¡¨çš„æ¯è¡Œè°ƒç”¨ UDTFï¼ŒUDTF ä¼šæŠŠä¸€è¡Œæ‹†åˆ†æˆä¸€è¡Œæˆ–è€…å¤šè¡Œï¼Œ<code>lateral view</code> åœ¨æŠŠç»“æœç»„åˆï¼Œäº§ç”Ÿä¸€ä¸ªæ”¯æŒåˆ«åè¡¨çš„è™šæ‹Ÿè¡¨ã€‚</p><p>å…¶ä¸­ <code>explode</code> è¿˜å¯ä»¥ç”¨äºå°† Hive ä¸€åˆ—ä¸­å¤æ‚çš„ array æˆ–è€… map ç»“æ„æ‹†åˆ†æˆå¤šè¡Œã€‚</p><p><strong>éœ€æ±‚ï¼š</strong></p><p>ç°åœ¨æœ‰æ•°æ®æ ¼å¼å¦‚ä¸‹</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">zhangsan    child1<span class="token punctuation">,</span>child2<span class="token punctuation">,</span>child3<span class="token punctuation">,</span>child4    k1:v1<span class="token punctuation">,</span>k2:v2lisi    child5<span class="token punctuation">,</span>child6<span class="token punctuation">,</span>child7<span class="token punctuation">,</span>child8    k3:v3<span class="token punctuation">,</span>k4:v4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>å­—æ®µä¹‹é—´ä½¿ç”¨ <code>\t</code> åˆ†å‰²ï¼Œéœ€æ±‚å°†æ‰€æœ‰çš„ child è¿›è¡Œæ‹†å¼€æˆä¸ºä¸€åˆ—</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token operator">+</span><span class="token comment">----------+--+</span><span class="token operator">|</span> mychild <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----------+--+</span><span class="token operator">|</span> child1  <span class="token operator">|</span><span class="token operator">|</span> child2  <span class="token operator">|</span><span class="token operator">|</span> child3  <span class="token operator">|</span><span class="token operator">|</span> child4  <span class="token operator">|</span><span class="token operator">|</span> child5  <span class="token operator">|</span><span class="token operator">|</span> child6  <span class="token operator">|</span><span class="token operator">|</span> child7  <span class="token operator">|</span><span class="token operator">|</span> child8  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----------+--+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å°† map çš„ key å’Œ value ä¹Ÿè¿›è¡Œæ‹†å¼€ï¼Œæˆä¸ºå¦‚ä¸‹ç»“æœ</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token operator">+</span><span class="token comment">-----------+-------------+--+</span><span class="token operator">|</span> mymapkey <span class="token operator">|</span> mymapvalue <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------+-------------+--+</span><span class="token operator">|</span> k1    <span class="token operator">|</span> v1     <span class="token operator">|</span><span class="token operator">|</span> k2    <span class="token operator">|</span> v2     <span class="token operator">|</span><span class="token operator">|</span> k3    <span class="token operator">|</span> v3     <span class="token operator">|</span><span class="token operator">|</span> k4    <span class="token operator">|</span> v4     <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------+-------------+--+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><ol><li><p>åˆ›å»ºhiveæ•°æ®åº“</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">create</span> <span class="token keyword">database</span> hive_explode<span class="token punctuation">;</span>hive <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">use</span> hive_explode<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li><li><p>åˆ›å»º Hive è¡¨ï¼Œç„¶åä½¿ç”¨ <code>explode</code> æ‹†åˆ† map å’Œ array</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">create</span> <span class="token keyword">table</span> t3<span class="token punctuation">(</span>name string<span class="token punctuation">,</span>children array<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">,</span>address Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span>string<span class="token operator">></span><span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'\t'</span> collection items <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">','</span> map <span class="token keyword">keys</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">':'</span> stored <span class="token keyword">as</span> textFile<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li>åŠ è½½æ•°æ® node03 æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºè¡¨æ•°æ®æ–‡ä»¶<p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mkdir -p &#x2F;export&#x2F;servers&#x2F;hivedatas&#x2F;cd &#x2F;export&#x2F;servers&#x2F;hivedatas&#x2F;vim maparray<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p> å†…å®¹å¦‚ä¸‹:<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">zhangsan child1<span class="token punctuation">,</span>child2<span class="token punctuation">,</span>child3<span class="token punctuation">,</span>child4 k1:v1<span class="token punctuation">,</span>k2:v2lisi child5<span class="token punctuation">,</span>child6<span class="token punctuation">,</span>child7<span class="token punctuation">,</span>child8 k3:v3<span class="token punctuation">,</span>k4:v4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p> Hive è¡¨å½“ä¸­åŠ è½½æ•°æ®<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/maparray'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> t3<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>ä½¿ç”¨ <code>explode</code> å°† Hive å½“ä¸­æ•°æ®æ‹†å¼€</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># å°† array å½“ä¸­çš„æ•°æ®æ‹†åˆ†å¼€</span>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">SELECT</span> explode<span class="token punctuation">(</span>children<span class="token punctuation">)</span> <span class="token keyword">AS</span> myChild <span class="token keyword">FROM</span> t3<span class="token punctuation">;</span><span class="token comment"># å°† map å½“ä¸­çš„æ•°æ®æ‹†åˆ†å¼€</span>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">SELECT</span> explode<span class="token punctuation">(</span>address<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token punctuation">(</span>myMapKey<span class="token punctuation">,</span> myMapValue<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t3<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li></ol><h3 id="ä½¿ç”¨-explode-æ‹†åˆ†-json-å­—ç¬¦ä¸²"><a href="#ä½¿ç”¨-explode-æ‹†åˆ†-json-å­—ç¬¦ä¸²" class="headerlink" title="ä½¿ç”¨ explode æ‹†åˆ† json å­—ç¬¦ä¸²"></a>ä½¿ç”¨ explode æ‹†åˆ† json å­—ç¬¦ä¸²</h3><p><strong>éœ€æ±‚ï¼š</strong></p><p>ç°åœ¨æœ‰ä¸€äº›æ•°æ®æ ¼å¼å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">a:shandong<span class="token punctuation">,</span>b:beijing<span class="token punctuation">,</span>c:hebei<span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token operator">|</span><span class="token punctuation">[</span>&#123;<span class="token string">"source"</span>:<span class="token string">"7fresh"</span><span class="token punctuation">,</span><span class="token string">"monthSales"</span>:<span class="token number">4900</span><span class="token punctuation">,</span><span class="token string">"userCount"</span>:<span class="token number">1900</span><span class="token punctuation">,</span><span class="token string">"score"</span>:<span class="token string">"9.9"</span>&#125;<span class="token punctuation">,</span>&#123;<span class="token string">"source"</span>:<span class="token string">"jd"</span><span class="token punctuation">,</span><span class="token string">"monthSales"</span>:<span class="token number">2090</span><span class="token punctuation">,</span><span class="token string">"userCount"</span>:<span class="token number">78981</span><span class="token punctuation">,</span><span class="token string">"score"</span>:<span class="token string">"9.8"</span>&#125;<span class="token punctuation">,</span>&#123;<span class="token string">"source"</span>:<span class="token string">"jdmart"</span><span class="token punctuation">,</span><span class="token string">"monthSales"</span>:<span class="token number">6987</span><span class="token punctuation">,</span><span class="token string">"userCount"</span>:<span class="token number">1600</span><span class="token punctuation">,</span><span class="token string">"score"</span>:<span class="token string">"9.0"</span>&#125;<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>å…¶ä¸­å­—æ®µä¸å­—æ®µä¹‹é—´çš„åˆ†éš”ç¬¦æ˜¯ <code>|</code>ã€‚</p><p>æˆ‘ä»¬è¦è§£æå¾—åˆ°æ‰€æœ‰çš„ monthSales å¯¹åº”çš„å€¼ä¸ºä»¥ä¸‹è¿™ä¸€åˆ—ï¼ˆè¡Œè½¬åˆ—ï¼‰</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token number">4900</span><span class="token number">2090</span><span class="token number">6987</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><ol><li>åˆ›å»º Hive è¡¨<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> explode_lateral_view<span class="token punctuation">(</span><span class="token punctuation">`</span>area<span class="token punctuation">`</span> string<span class="token punctuation">,</span><span class="token punctuation">`</span>goods_id<span class="token punctuation">`</span> string<span class="token punctuation">,</span><span class="token punctuation">`</span>sale_info<span class="token punctuation">`</span> string<span class="token punctuation">)</span><span class="token keyword">ROW</span> FORMAT DELIMITED<span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">'|'</span>STORED <span class="token keyword">AS</span> textfile<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>å‡†å¤‡æ•°æ®å¹¶åŠ è½½æ•°æ®</p><p> å‡†å¤‡æ•°æ®å¦‚ä¸‹</p><p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd &#x2F;export&#x2F;servers&#x2F;hivedatasvim explode_jsona:shandong,b:beijing,c:hebei|1,2,3,4,5,6,7,8,9|[&#123;&quot;source&quot;:&quot;7fresh&quot;,&quot;monthSales&quot;:4900,&quot;userCount&quot;:1900,&quot;score&quot;:&quot;9.9&quot;&#125;,&#123;&quot;source&quot;:&quot;jd&quot;,&quot;monthSales&quot;:2090,&quot;userCount&quot;:78981,&quot;score&quot;:&quot;9.8&quot;&#125;,&#123;&quot;source&quot;:&quot;jdmart&quot;,&quot;monthSales&quot;:6987,&quot;userCount&quot;:1600,&quot;score&quot;:&quot;9.0&quot;&#125;]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p> åŠ è½½æ•°æ®åˆ° Hive è¡¨å½“ä¸­å»</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/explode_json'</span> overwrite <span class="token keyword">into</span> <span class="token keyword">table</span> explode_lateral_view<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li>ä½¿ç”¨ <code>explode</code> æ‹†åˆ† Array<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">select</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>goods_id<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> goods_id <span class="token keyword">from</span> explode_lateral_view<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li>ä½¿ç”¨ <code>explode</code> æ‹†è§£ Map<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">select</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>area<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> area <span class="token keyword">from</span> explode_lateral_view<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>æ‹†è§£ JSON å­—æ®µ</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">select</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>regexp_replace<span class="token punctuation">(</span>regexp_replace<span class="token punctuation">(</span>sale_info<span class="token punctuation">,</span> <span class="token string">'\\[\\&#123;'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'&#125;]'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'&#125;,\\&#123;'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> sale_info <span class="token keyword">from</span> explode_lateral_view<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> ç„¶åæˆ‘ä»¬æƒ³ç”¨ <code>get_json_object</code> æ¥è·å– key ä¸º monthSales çš„æ•°æ®ï¼š</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">select</span> get_json_object<span class="token punctuation">(</span>explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>regexp_replace<span class="token punctuation">(</span>regexp_replace<span class="token punctuation">(</span>sale_info<span class="token punctuation">,</span> <span class="token string">'\\[\\&#123;'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'&#125;]'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'&#125;,\\&#123;'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'$.monthSales'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> sale_info <span class="token keyword">from</span> explode_lateral_view<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> ç„¶åæŒ‚äº† <code>FAILED: SemanticException [Error 10081]: UDTF&#39;s are not supported outside the SELECT clause, nor nested in expressions</code></p><p> UDTF <code>explode</code> ä¸èƒ½å†™åœ¨åˆ«çš„å‡½æ•°å†…</p><p> å¦‚æœä½ è¿™ä¹ˆå†™ï¼Œæƒ³æŸ¥ä¸¤ä¸ªå­—æ®µï¼Œ<code>select explode(split(area, &#39;,&#39;)) as area, good_id from explode_lateral_view;</code></p><p> ä¼šæŠ¥é”™ <code>FAILED: SemanticException 1:40 Only a single expression in the SELECT clause is supported with UDTF&#39;s. Error encountered near token &#39;good_id&#39;</code></p><p> ä½¿ç”¨ UDTF çš„æ—¶å€™ï¼Œåªæ”¯æŒä¸€ä¸ªå­—æ®µï¼Œè¿™æ—¶å€™å°±éœ€è¦ LATERAL VIEW å‡ºåœºäº†</p></li></ol><h3 id="é…åˆ-LATERAL-VIEW-ä½¿ç”¨"><a href="#é…åˆ-LATERAL-VIEW-ä½¿ç”¨" class="headerlink" title="é…åˆ LATERAL VIEW ä½¿ç”¨"></a>é…åˆ LATERAL VIEW ä½¿ç”¨</h3><p>é…åˆ <code>lateral view</code> æŸ¥è¯¢å¤šä¸ªå­—æ®µ</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">select</span> goods_id2<span class="token punctuation">,</span> sale_info <span class="token keyword">from</span> explode_lateral_view LATERAL <span class="token keyword">VIEW</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>goods_id<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span> goods <span class="token keyword">as</span> goods_id2<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>å…¶ä¸­ <code>LATERAL VIEW explode(split(goods_id,&#39;,&#39;)) goods</code>ç›¸å½“äºä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œä¸åŸè¡¨ <code>explode_lateral_view</code> ç¬›å¡å°”ç§¯å…³è”</p><p>ä¹Ÿå¯ä»¥å¤šé‡ä½¿ç”¨</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">select</span> goods_id2<span class="token punctuation">,</span> sale_info<span class="token punctuation">,</span> area2          <span class="token keyword">from</span> explode_lateral_view           LATERAL <span class="token keyword">VIEW</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>goods_id<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span> goods <span class="token keyword">as</span> goods_id2           LATERAL <span class="token keyword">VIEW</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>area<span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span> area <span class="token keyword">as</span> area2<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä¹Ÿæ˜¯ä¸‰ä¸ªè¡¨ç¬›å¡å°”ç§¯çš„ç»“æœã€‚</p><p>æœ€ç»ˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å¥å­ï¼ŒæŠŠè¿™ä¸ª JSON æ ¼å¼çš„ä¸€è¡Œæ•°æ®ï¼Œå®Œå…¨è½¬æ¢æˆäºŒç»´è¡¨çš„æ–¹å¼å±•ç°</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">select</span> get_json_object<span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">'&#123;'</span><span class="token punctuation">,</span> sale_info_1 <span class="token punctuation">,</span> <span class="token string">'&#125;'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'$.source'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> source<span class="token punctuation">,</span>              get_json_object<span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">'&#123;'</span><span class="token punctuation">,</span> sale_info_1<span class="token punctuation">,</span> <span class="token string">'&#125;'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'$.monthSales'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> monthSales<span class="token punctuation">,</span>              get_json_object<span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">'&#123;'</span><span class="token punctuation">,</span> sale_info_1<span class="token punctuation">,</span> <span class="token string">'&#125;'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'$.userCount'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> monthSales<span class="token punctuation">,</span>              get_json_object<span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">'&#123;'</span><span class="token punctuation">,</span> sale_info_1<span class="token punctuation">,</span> <span class="token string">'&#125;'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'$.score'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> monthSales          <span class="token keyword">from</span> explode_lateral_view          LATERAL <span class="token keyword">VIEW</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>regexp_replace<span class="token punctuation">(</span>regexp_replace<span class="token punctuation">(</span>sale_info<span class="token punctuation">,</span> <span class="token string">'\\[\\&#123;'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'&#125;]'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'&#125;,\\&#123;'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> sale_info <span class="token keyword">as</span> sale_info_1<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ€»ç»“ï¼š</strong></p><p><code>Lateral View</code> é€šå¸¸å’Œ UDTF ä¸€èµ·å‡ºç°ï¼Œä¸ºäº†è§£å†³ UDTF ä¸å…è®¸åœ¨ <code>select</code> å­—æ®µçš„é—®é¢˜ã€‚<code>Multiple Lateral View</code> å¯ä»¥å®ç°ç±»ä¼¼ç¬›å¡å°”ä¹˜ç§¯ã€‚<code>Outer</code> å…³é”®å­—å¯ä»¥æŠŠä¸è¾“å‡ºçš„ UDTF çš„ç©ºç»“æœï¼Œè¾“å‡ºæˆ NULLï¼Œé˜²æ­¢ä¸¢å¤±æ•°æ®ã€‚</p><h3 id="è¡Œè½¬åˆ—"><a href="#è¡Œè½¬åˆ—" class="headerlink" title="è¡Œè½¬åˆ—"></a>è¡Œè½¬åˆ—</h3><p><strong>ç›¸å…³å‚æ•°è¯´æ˜:</strong></p><ul><li><p><code>CONCAT(string A/col, string B/colâ€¦)</code>ï¼šè¿”å›è¾“å…¥å­—ç¬¦ä¸²è¿æ¥åçš„ç»“æœï¼Œæ”¯æŒä»»æ„ä¸ªè¾“å…¥å­—ç¬¦ä¸²;</p></li><li><p><code>CONCAT_WS(separator, str1, str2,...)</code>ï¼šå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šå½¢å¼çš„ <code>CONCAT()</code>ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‰©ä½™å‚æ•°é—´çš„åˆ†éš”ç¬¦ã€‚åˆ†éš”ç¬¦å¯ä»¥æ˜¯ä¸å‰©ä½™å‚æ•°ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚å¦‚æœåˆ†éš”ç¬¦æ˜¯ NULLï¼Œè¿”å›å€¼ä¹Ÿå°†ä¸º NULLã€‚è¿™ä¸ªå‡½æ•°ä¼šè·³è¿‡åˆ†éš”ç¬¦å‚æ•°åçš„ä»»ä½• NULL å’Œç©ºå­—ç¬¦ä¸²ã€‚åˆ†éš”ç¬¦å°†è¢«åŠ åˆ°è¢«è¿æ¥çš„å­—ç¬¦ä¸²ä¹‹é—´;</p></li><li><p><code>COLLECT_SET(col)</code>ï¼šå‡½æ•°åªæ¥å—åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å°†æŸå­—æ®µçš„å€¼è¿›è¡Œå»é‡æ±‡æ€»ï¼Œäº§ç”Ÿ Array ç±»å‹å­—æ®µã€‚</p></li></ul><p><strong>æ•°æ®å‡†å¤‡:</strong></p><div class="table-container"><table><thead><tr><th>name</th><th>constellation</th><th>blood_type</th></tr></thead><tbody><tr><td>å­™æ‚Ÿç©º</td><td>ç™½ç¾Šåº§</td><td>A</td></tr><tr><td>è€ç‹</td><td>å°„æ‰‹åº§</td><td>A</td></tr><tr><td>å®‹å®‹</td><td>ç™½ç¾Šåº§</td><td>B</td></tr><tr><td>çŒªå…«æˆ’</td><td>ç™½ç¾Šåº§</td><td>A</td></tr><tr><td>å‡¤å§</td><td>å°„æ‰‹åº§</td><td>A</td></tr></tbody></table></div><p><strong>éœ€æ±‚: </strong></p><p>æŠŠæ˜Ÿåº§å’Œè¡€å‹ä¸€æ ·çš„äººå½’ç±»åˆ°ä¸€èµ·ã€‚ç»“æœå¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">å°„æ‰‹åº§<span class="token punctuation">,</span>A      è€ç‹<span class="token operator">|</span>å‡¤å§ç™½ç¾Šåº§<span class="token punctuation">,</span>A      å­™æ‚Ÿç©º<span class="token operator">|</span>çŒªå…«æˆ’ç™½ç¾Šåº§<span class="token punctuation">,</span>B      å®‹å®‹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><strong>å®ç°æ­¥éª¤:</strong></p><ol><li>åˆ›å»ºæœ¬åœ° <code>constellation.txt</code>ï¼Œå¯¼å…¥æ•°æ® node03 æœåŠ¡å™¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºæ–‡ä»¶ï¼Œæ³¨æ„æ•°æ®ä½¿ç”¨ <code>\t</code> è¿›è¡Œåˆ†å‰²<p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd &#x2F;export&#x2F;servers&#x2F;hivedatasvim constellation.txtæ•°æ®å¦‚ä¸‹ï¼šå­™æ‚Ÿç©º ç™½ç¾Šåº§ Aè€ç‹ å°„æ‰‹åº§ Aå®‹å®‹ ç™½ç¾Šåº§ BçŒªå…«æˆ’ ç™½ç¾Šåº§ Aå‡¤å§ å°„æ‰‹åº§ A<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>åˆ›å»º Hive è¡¨å¹¶å¯¼å…¥æ•°æ®</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># åˆ›å»º Hive è¡¨å¹¶åŠ è½½æ•°æ®</span>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">create</span> <span class="token keyword">table</span> person_info<span class="token punctuation">(</span>          name string<span class="token punctuation">,</span>           constellation string<span class="token punctuation">,</span>           blood_type string<span class="token punctuation">)</span>           <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">"\t"</span><span class="token punctuation">;</span><span class="token comment"># åŠ è½½æ•°æ®</span>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/constellation.txt'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> person_info<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li>æŒ‰éœ€æ±‚æŸ¥è¯¢æ•°æ®<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">select</span> t1<span class="token punctuation">.</span>base<span class="token punctuation">,</span> concat_ws<span class="token punctuation">(</span><span class="token string">'|'</span><span class="token punctuation">,</span> collect_set<span class="token punctuation">(</span>t1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> name          <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> name<span class="token punctuation">,</span> concat<span class="token punctuation">(</span>constellation<span class="token punctuation">,</span> <span class="token string">","</span> <span class="token punctuation">,</span> blood_type<span class="token punctuation">)</span> base                  <span class="token keyword">from</span> person_info<span class="token punctuation">)</span> t1          <span class="token keyword">group</span> <span class="token keyword">by</span> t1<span class="token punctuation">.</span>base<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p></li></ol><h3 id="åˆ—è½¬è¡Œ"><a href="#åˆ—è½¬è¡Œ" class="headerlink" title="åˆ—è½¬è¡Œ"></a>åˆ—è½¬è¡Œ</h3><p><strong>æ‰€éœ€å‡½æ•°:</strong></p><p><code>EXPLODE(col)</code>ï¼šå°† Hive ä¸€åˆ—ä¸­å¤æ‚çš„ array æˆ–è€… map ç»“æ„æ‹†åˆ†æˆå¤šè¡Œã€‚</p><p><code>LATERAL VIEW</code>ï¼šç”¨äºå’Œ split, explode ç­‰ UDTF ä¸€èµ·ä½¿ç”¨ï¼Œå®ƒèƒ½å¤Ÿå°†ä¸€åˆ—æ•°æ®æ‹†æˆå¤šè¡Œæ•°æ®ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå¯ä»¥å¯¹æ‹†åˆ†åçš„æ•°æ®è¿›è¡Œèšåˆã€‚</p><p><strong>æ•°æ®å‡†å¤‡:</strong></p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd &#x2F;export&#x2F;servers&#x2F;hivedatasvim movie.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>æ–‡ä»¶å†…å®¹å¦‚ä¸‹: æ•°æ®å­—æ®µä¹‹é—´ä½¿ç”¨ <code>\t</code> è¿›è¡Œåˆ†å‰²</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ã€Šç–‘çŠ¯è¿½è¸ªã€‹ æ‚¬ç–‘,åŠ¨ä½œ,ç§‘å¹»,å‰§æƒ…ã€ŠLie to meã€‹ æ‚¬ç–‘,è­¦åŒª,åŠ¨ä½œ,å¿ƒç†,å‰§æƒ…ã€Šæˆ˜ç‹¼2ã€‹ æˆ˜äº‰,åŠ¨ä½œ,ç¾éš¾<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><strong>éœ€æ±‚: </strong></p><p>å°†ç”µå½±åˆ†ç±»ä¸­çš„æ•°ç»„æ•°æ®å±•å¼€ã€‚ç»“æœå¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ã€Šç–‘çŠ¯è¿½è¸ªã€‹ æ‚¬ç–‘ã€Šç–‘çŠ¯è¿½è¸ªã€‹ åŠ¨ä½œã€Šç–‘çŠ¯è¿½è¸ªã€‹ ç§‘å¹»ã€Šç–‘çŠ¯è¿½è¸ªã€‹ å‰§æƒ…ã€ŠLie to meã€‹ æ‚¬ç–‘ã€ŠLie to meã€‹ è­¦åŒªã€ŠLie to meã€‹ åŠ¨ä½œã€ŠLie to meã€‹ å¿ƒç†ã€ŠLie to meã€‹ å‰§æƒ…ã€Šæˆ˜ç‹¼2ã€‹ æˆ˜äº‰ã€Šæˆ˜ç‹¼2ã€‹ åŠ¨ä½œã€Šæˆ˜ç‹¼2ã€‹ ç¾éš¾<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>å®ç°æ­¥éª¤:</strong></p><ol><li>åˆ›å»º Hive è¡¨<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> movie_info<span class="token punctuation">(</span>  movie string<span class="token punctuation">,</span>   category array<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">"\t"</span> collection items <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">","</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li>åŠ è½½æ•°æ®<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">"/export/servers/hivedatas/movie.txt"</span> <span class="token keyword">into</span> <span class="token keyword">table</span> movie_info<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li>æŒ‰éœ€æ±‚æŸ¥è¯¢æ•°æ®<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> movie<span class="token punctuation">,</span> category_name  <span class="token keyword">from</span> movie_info lateral <span class="token keyword">view</span> explode<span class="token punctuation">(</span>category<span class="token punctuation">)</span> table_tmp <span class="token keyword">as</span> category_name<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li></ol><h3 id="REFLECT-å‡½æ•°"><a href="#REFLECT-å‡½æ•°" class="headerlink" title="REFLECT å‡½æ•°"></a>REFLECT å‡½æ•°</h3><p><code>reflect</code> å‡½æ•°å¯ä»¥æ”¯æŒåœ¨ SQL ä¸­è°ƒç”¨ <code>Java</code> ä¸­çš„è‡ªå¸¦å‡½æ•°ï¼Œç§’æ€ä¸€åˆ‡ UDF å‡½æ•°ã€‚</p><p><strong>éœ€æ±‚1: ä½¿ç”¨ java.lang.Math å½“ä¸­çš„ Max æ±‚ä¸¤åˆ—ä¸­æœ€å¤§å€¼</strong></p><p><strong>å®ç°æ­¥éª¤:</strong></p><ol><li>åˆ›å»º Hive è¡¨<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> test_udf<span class="token punctuation">(</span>col1 <span class="token keyword">int</span><span class="token punctuation">,</span> col2 <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">','</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li>å‡†å¤‡æ•°æ®å¹¶åŠ è½½æ•°æ®<p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd &#x2F;export&#x2F;servers&#x2F;hivedatasvim test_udf <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p> æ–‡ä»¶å†…å®¹å¦‚ä¸‹:<p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">1,24,36,47,55,6<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li>åŠ è½½æ•°æ®<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/test_udf'</span> overwrite <span class="token keyword">into</span> <span class="token keyword">table</span> test_udf<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li>ä½¿ç”¨ <code>java.lang.Math</code> å½“ä¸­çš„ <code>Max</code> æ±‚ä¸¤åˆ—å½“ä¸­çš„æœ€å¤§å€¼<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">select</span> reflect<span class="token punctuation">(</span><span class="token string">"java.lang.Math"</span><span class="token punctuation">,</span> <span class="token string">"max"</span><span class="token punctuation">,</span> col1<span class="token punctuation">,</span> col2<span class="token punctuation">)</span> <span class="token keyword">from</span> test_udf<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li></ol><p><strong>éœ€æ±‚2: æ–‡ä»¶ä¸­ä¸åŒçš„è®°å½•æ¥æ‰§è¡Œä¸åŒçš„ Java çš„å†…ç½®å‡½æ•°</strong></p><p><strong>å®ç°æ­¥éª¤:</strong></p><ol><li>åˆ›å»º Hive è¡¨<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">create</span> <span class="token keyword">table</span> test_udf2<span class="token punctuation">(</span>class_name string<span class="token punctuation">,</span> method_name string<span class="token punctuation">,</span> col1 <span class="token keyword">int</span> <span class="token punctuation">,</span> col2 <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">','</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li>å‡†å¤‡æ•°æ®<p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd &#x2F;export&#x2F;servers&#x2F;hivedatasvim test_udf2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p> æ–‡ä»¶å†…å®¹å¦‚ä¸‹:<p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">java.lang.Math,min,1,2java.lang.Math,max,2,3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li><li>åŠ è½½æ•°æ®<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/test_udf2'</span> overwrite <span class="token keyword">into</span> <span class="token keyword">table</span> test_udf2<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li>æ‰§è¡ŒæŸ¥è¯¢<p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">></span> <span class="token keyword">select</span> reflect<span class="token punctuation">(</span>class_name<span class="token punctuation">,</span>method_name<span class="token punctuation">,</span>col1<span class="token punctuation">,</span>col2<span class="token punctuation">)</span> <span class="token keyword">from</span> test_udf2<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li></ol><p><strong>éœ€æ±‚3: åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—</strong></p><p><strong>å®ç°æ–¹å¼:</strong></p><p>ä½¿ç”¨ <code>apache.commons</code> ä¸­çš„å‡½æ•°ï¼Œcommons ä¸‹çš„ jar å·²ç»åŒ…å«åœ¨ hadoop çš„ classpath ä¸­ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> reflect<span class="token punctuation">(</span><span class="token string">"org.apache.commons.lang.math.NumberUtils"</span><span class="token punctuation">,</span> <span class="token string">"isNumber"</span><span class="token punctuation">,</span> <span class="token string">"123"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="çª—å£å‡½æ•°ä¸åˆ†æå‡½æ•°"><a href="#çª—å£å‡½æ•°ä¸åˆ†æå‡½æ•°" class="headerlink" title="çª—å£å‡½æ•°ä¸åˆ†æå‡½æ•°"></a>çª—å£å‡½æ•°ä¸åˆ†æå‡½æ•°</h2><p>åœ¨ SQL ä¸­æœ‰ä¸€ç±»å‡½æ•°å«åšèšåˆå‡½æ•°ï¼Œä¾‹å¦‚ <code>sum()</code>ã€<code>avg()</code>ã€<code>max()</code> ç­‰ç­‰ï¼Œè¿™ç±»å‡½æ•°å¯ä»¥å°†å¤šè¡Œæ•°æ®æŒ‰ç…§è§„åˆ™èšé›†ä¸ºä¸€è¡Œï¼Œä¸€èˆ¬æ¥è®²èšé›†åçš„è¡Œæ•°æ˜¯è¦å°‘äºèšé›†å‰çš„è¡Œæ•°çš„ã€‚ä½†æ˜¯æœ‰æ—¶æˆ‘ä»¬æƒ³è¦æ—¢æ˜¾ç¤ºèšé›†å‰çš„æ•°æ®ï¼Œåˆè¦æ˜¾ç¤ºèšé›†åçš„æ•°æ®ï¼Œè¿™æ—¶æˆ‘ä»¬ä¾¿å¼•å…¥äº†çª—å£å‡½æ•°ã€‚çª—å£å‡½æ•°åˆå« OLAP å‡½æ•°/åˆ†æå‡½æ•°ï¼Œçª—å£å‡½æ•°å…¼å…·åˆ†ç»„å’Œæ’åºåŠŸèƒ½ã€‚</p><p>çª—å£å‡½æ•°æœ€é‡è¦çš„å…³é”®å­—æ˜¯ <code>partition by</code> å’Œ <code>order by</code>ã€‚</p><p>å…·ä½“è¯­æ³•å¦‚ä¸‹ï¼š<code>over (partition by xxx order by xxx)</code></p><h3 id="sumã€avgã€minã€max"><a href="#sumã€avgã€minã€max" class="headerlink" title="sumã€avgã€minã€max"></a>sumã€avgã€minã€max</h3><p><strong>å‡†å¤‡æ•°æ®</strong></p><p>å»ºè¡¨è¯­å¥:<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> test_t1<span class="token punctuation">(</span>cookieid string<span class="token punctuation">,</span>createtime string<span class="token punctuation">,</span>  <span class="token comment">--day </span>pv <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">','</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>åŠ è½½æ•°æ®ï¼š<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/root/hivedata/test_t1.dat'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> test_t1<span class="token punctuation">;</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">5</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">7</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">3</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">2</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">4</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>å¼€å¯æ™ºèƒ½æœ¬åœ°æ¨¡å¼<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SET</span> hive<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">.</span><span class="token keyword">mode</span><span class="token punctuation">.</span><span class="token keyword">local</span><span class="token punctuation">.</span>auto<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="SUM"><a href="#SUM" class="headerlink" title="SUM"></a>SUM</h4><p><code>SUM</code> å‡½æ•°å’Œçª—å£å‡½æ•°çš„é…åˆä½¿ç”¨ï¼šç»“æœå’Œ <code>ORDER BY</code> ç›¸å…³ï¼Œé»˜è®¤ä¸ºå‡åºã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> pv<span class="token punctuation">,</span><span class="token function">SUM</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> pv1<span class="token punctuation">,</span> <span class="token comment">--é»˜è®¤ä¸ºä»èµ·ç‚¹åˆ°å½“å‰è¡Œ</span><span class="token function">SUM</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token keyword">UNBOUNDED</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token keyword">CURRENT</span> <span class="token keyword">ROW</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv2<span class="token punctuation">,</span> <span class="token comment">--ä»èµ·ç‚¹åˆ°å½“å‰è¡Œï¼Œç»“æœåŒpv1</span><span class="token function">SUM</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> pv3<span class="token punctuation">,</span> <span class="token comment">--åˆ†ç»„å†…æ‰€æœ‰è¡Œ</span><span class="token function">SUM</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token number">3</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token keyword">CURRENT</span> <span class="token keyword">ROW</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv4<span class="token punctuation">,</span> <span class="token comment">--å½“å‰è¡Œ+å¾€å‰3è¡Œ</span><span class="token function">SUM</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token number">3</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token number">1</span> <span class="token keyword">FOLLOWING</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv5<span class="token punctuation">,</span> <span class="token comment">--å½“å‰è¡Œ+å¾€å‰3è¡Œ+å¾€å1è¡Œ</span><span class="token function">SUM</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token keyword">CURRENT</span> <span class="token keyword">ROW</span> <span class="token operator">AND</span> <span class="token keyword">UNBOUNDED</span> <span class="token keyword">FOLLOWING</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv6 <span class="token comment">--å½“å‰è¡Œ+å¾€åæ‰€æœ‰è¡Œ</span><span class="token keyword">FROM</span> test_t1<span class="token punctuation">;</span>cookieid createtime     pv      pv1     pv2     pv3     pv4     pv5      pv6 <span class="token comment">-----------------------------------------------------------------------------</span>cookie1  <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">26</span>      <span class="token number">1</span>       <span class="token number">6</span>       <span class="token number">26</span>cookie1  <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span>      <span class="token number">5</span>       <span class="token number">6</span>       <span class="token number">6</span>       <span class="token number">26</span>      <span class="token number">6</span>       <span class="token number">13</span>      <span class="token number">25</span>cookie1  <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">7</span>       <span class="token number">13</span>      <span class="token number">13</span>      <span class="token number">26</span>      <span class="token number">13</span>      <span class="token number">16</span>      <span class="token number">20</span>cookie1  <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">16</span>      <span class="token number">16</span>      <span class="token number">26</span>      <span class="token number">16</span>      <span class="token number">18</span>      <span class="token number">13</span>cookie1  <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span>      <span class="token number">2</span>       <span class="token number">18</span>      <span class="token number">18</span>      <span class="token number">26</span>      <span class="token number">17</span>      <span class="token number">21</span>      <span class="token number">10</span>cookie1  <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">4</span>       <span class="token number">22</span>      <span class="token number">22</span>      <span class="token number">26</span>      <span class="token number">16</span>      <span class="token number">20</span>      <span class="token number">8</span>cookie1  <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">4</span>       <span class="token number">26</span>      <span class="token number">26</span>      <span class="token number">26</span>      <span class="token number">13</span>      <span class="token number">13</span>      <span class="token number">4</span>pv1: åˆ†ç»„å†…ä»èµ·ç‚¹åˆ°å½“å‰è¡Œçš„ pv ç´¯ç§¯ï¼Œå¦‚ï¼Œ<span class="token number">11</span>å·çš„pv1 <span class="token operator">=</span> <span class="token number">10</span>å·çš„pv <span class="token operator">+</span> <span class="token number">11</span>å·çš„pv<span class="token punctuation">,</span> <span class="token number">12</span>å· <span class="token operator">=</span> <span class="token number">10</span>å· <span class="token operator">+</span> <span class="token number">11</span>å· <span class="token operator">+</span> <span class="token number">12</span>å·pv2: åŒ pv1pv3: åˆ†ç»„å†…<span class="token punctuation">(</span>cookie1<span class="token punctuation">)</span>æ‰€æœ‰çš„pvç´¯åŠ pv4: åˆ†ç»„å†…å½“å‰è¡Œ <span class="token operator">+</span> å¾€å‰ <span class="token number">3</span> è¡Œï¼Œå¦‚ï¼Œ<span class="token number">11</span>å· <span class="token operator">=</span> <span class="token number">10</span>å· <span class="token operator">+</span> <span class="token number">11</span>å·ï¼Œ<span class="token number">12</span>å· <span class="token operator">=</span> <span class="token number">10</span>å· <span class="token operator">+</span> <span class="token number">11</span>å· <span class="token operator">+</span> <span class="token number">12</span>å·ï¼Œ<span class="token number">13</span>å· <span class="token operator">=</span> <span class="token number">10</span>å· <span class="token operator">+</span> <span class="token number">11</span>å· <span class="token operator">+</span> <span class="token number">12</span>å· <span class="token operator">+</span> <span class="token number">13</span>å·ï¼Œ<span class="token number">14</span>å· <span class="token operator">=</span> <span class="token number">11</span>å· <span class="token operator">+</span> <span class="token number">12</span>å· <span class="token operator">+</span> <span class="token number">13</span>å· <span class="token operator">+</span> <span class="token number">14</span>å·pv5: åˆ†ç»„å†…å½“å‰è¡Œ <span class="token operator">+</span> å¾€å‰ <span class="token number">3</span> è¡Œ <span class="token operator">+</span> å¾€å <span class="token number">1</span> è¡Œï¼Œå¦‚ï¼Œ<span class="token number">14</span>å· <span class="token operator">=</span> <span class="token number">11</span>å· <span class="token operator">+</span> <span class="token number">12</span>å· <span class="token operator">+</span> <span class="token number">13</span>å· <span class="token operator">+</span> <span class="token number">14</span>å· <span class="token operator">+</span> <span class="token number">15</span>å· <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">7</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">=</span> <span class="token number">21</span>pv6: åˆ†ç»„å†…å½“å‰è¡Œ <span class="token operator">+</span> å¾€åæ‰€æœ‰è¡Œï¼Œå¦‚ï¼Œ<span class="token number">13</span>å· <span class="token operator">=</span> <span class="token number">13</span>å· <span class="token operator">+</span> <span class="token number">14</span>å· <span class="token operator">+</span> <span class="token number">15</span>å· <span class="token operator">+</span> <span class="token number">16</span>å· <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">=</span> <span class="token number">13</span>ï¼Œ <span class="token number">14</span>å· <span class="token operator">=</span> <span class="token number">14</span>å· <span class="token operator">+</span> <span class="token number">15</span>å· <span class="token operator">+</span> <span class="token number">16</span>å· <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">=</span> <span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å¦‚æœä¸æŒ‡å®š <code>rows between</code>ï¼Œé»˜è®¤ä¸ºä»èµ·ç‚¹åˆ°å½“å‰è¡Œ;</p><p>å¦‚æœä¸æŒ‡å®š <code>order by</code>ï¼Œåˆ™å°†åˆ†ç»„å†…æ‰€æœ‰å€¼ç´¯åŠ ;</p><p>å…³é”®æ˜¯ç†è§£ <code>rows between</code> å«ä¹‰ï¼Œä¹Ÿå«åš <code>window</code> å­å¥ï¼š</p><ul><li><code>preceding</code>ï¼šå¾€å‰</li><li><code>following</code>ï¼šå¾€å</li><li><code>current row</code>ï¼šå½“å‰è¡Œ</li><li><code>unbounded</code>ï¼šèµ·ç‚¹</li><li><code>unbounded preceding</code>ï¼š è¡¨ç¤ºä»å‰é¢çš„èµ·ç‚¹</li><li><code>unbounded following</code>ï¼šè¡¨ç¤ºåˆ°åé¢çš„ç»ˆç‚¹</li></ul><p>AVGï¼ŒMINï¼ŒMAX å’Œ SUM ç”¨æ³•ä¸€æ ·ã€‚</p><h4 id="AVG"><a href="#AVG" class="headerlink" title="AVG"></a>AVG</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> pv<span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> pv1<span class="token punctuation">,</span> <span class="token comment">--é»˜è®¤ä¸ºä»èµ·ç‚¹åˆ°å½“å‰è¡Œ</span><span class="token function">AVG</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token keyword">UNBOUNDED</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token keyword">CURRENT</span> <span class="token keyword">ROW</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv2<span class="token punctuation">,</span> <span class="token comment">--ä»èµ·ç‚¹åˆ°å½“å‰è¡Œï¼Œç»“æœåŒpv1</span><span class="token function">AVG</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> pv3<span class="token punctuation">,</span> <span class="token comment">--åˆ†ç»„å†…æ‰€æœ‰è¡Œ</span><span class="token function">AVG</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token number">3</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token keyword">CURRENT</span> <span class="token keyword">ROW</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv4<span class="token punctuation">,</span> <span class="token comment">--å½“å‰è¡Œ+å¾€å‰3è¡Œ</span><span class="token function">AVG</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token number">3</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token number">1</span> <span class="token keyword">FOLLOWING</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv5<span class="token punctuation">,</span> <span class="token comment">--å½“å‰è¡Œ+å¾€å‰3è¡Œ+å¾€å1è¡Œ</span><span class="token function">AVG</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token keyword">CURRENT</span> <span class="token keyword">ROW</span> <span class="token operator">AND</span> <span class="token keyword">UNBOUNDED</span> <span class="token keyword">FOLLOWING</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv6 <span class="token comment">--å½“å‰è¡Œ+å¾€åæ‰€æœ‰è¡Œ</span><span class="token keyword">FROM</span> test_t1<span class="token punctuation">;</span>cookieid createtime     pv      pv1     pv2     pv3     pv4     pv5      pv6 <span class="token comment">-----------------------------------------------------------------------------</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">1</span>       <span class="token number">1.0</span>     <span class="token number">1.0</span>     <span class="token number">3.7142857142857144</span>      <span class="token number">1.0</span>     <span class="token number">3.0</span>     <span class="token number">3.7142857142857144</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span>      <span class="token number">5</span>       <span class="token number">3.0</span>     <span class="token number">3.0</span>     <span class="token number">3.7142857142857144</span>      <span class="token number">3.0</span>     <span class="token number">4.333333333333333</span>       <span class="token number">4.166666666666667</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">7</span>       <span class="token number">4.333333333333333</span>       <span class="token number">4.333333333333333</span>       <span class="token number">3.7142857142857144</span>      <span class="token number">4.333333333333333</span>       <span class="token number">4.0</span>     <span class="token number">4.0</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">4.0</span>     <span class="token number">4.0</span>     <span class="token number">3.7142857142857144</span>      <span class="token number">4.0</span>     <span class="token number">3.6</span>     <span class="token number">3.25</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span>      <span class="token number">2</span>       <span class="token number">3.6</span>     <span class="token number">3.6</span>     <span class="token number">3.7142857142857144</span>      <span class="token number">4.25</span>    <span class="token number">4.2</span>     <span class="token number">3.3333333333333335</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">4</span>       <span class="token number">3.6666666666666665</span>      <span class="token number">3.6666666666666665</span>      <span class="token number">3.7142857142857144</span>      <span class="token number">4.0</span>     <span class="token number">4.0</span>     <span class="token number">4.0</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">4</span>       <span class="token number">3.7142857142857144</span>      <span class="token number">3.7142857142857144</span>      <span class="token number">3.7142857142857144</span>      <span class="token number">3.25</span>    <span class="token number">3.25</span>    <span class="token number">4.0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="MIN"><a href="#MIN" class="headerlink" title="MIN"></a>MIN</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> pv<span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> pv1<span class="token punctuation">,</span> <span class="token comment">--é»˜è®¤ä¸ºä»èµ·ç‚¹åˆ°å½“å‰è¡Œ</span><span class="token function">MIN</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token keyword">UNBOUNDED</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token keyword">CURRENT</span> <span class="token keyword">ROW</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv2<span class="token punctuation">,</span> <span class="token comment">--ä»èµ·ç‚¹åˆ°å½“å‰è¡Œï¼Œç»“æœåŒpv1</span><span class="token function">MIN</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> pv3<span class="token punctuation">,</span> <span class="token comment">--åˆ†ç»„å†…æ‰€æœ‰è¡Œ</span><span class="token function">MIN</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token number">3</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token keyword">CURRENT</span> <span class="token keyword">ROW</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv4<span class="token punctuation">,</span> <span class="token comment">--å½“å‰è¡Œ+å¾€å‰3è¡Œ</span><span class="token function">MIN</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token number">3</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token number">1</span> <span class="token keyword">FOLLOWING</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv5<span class="token punctuation">,</span> <span class="token comment">--å½“å‰è¡Œ+å¾€å‰3è¡Œ+å¾€å1è¡Œ</span><span class="token function">MIN</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token keyword">CURRENT</span> <span class="token keyword">ROW</span> <span class="token operator">AND</span> <span class="token keyword">UNBOUNDED</span> <span class="token keyword">FOLLOWING</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv6 <span class="token comment">--å½“å‰è¡Œ+å¾€åæ‰€æœ‰è¡Œ</span><span class="token keyword">FROM</span> test_t1<span class="token punctuation">;</span>cookieid createtime     pv      pv1     pv2     pv3     pv4     pv5      pv6 <span class="token comment">-----------------------------------------------------------------------------</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span>      <span class="token number">5</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">2</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">7</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">2</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">2</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span>      <span class="token number">2</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">2</span>       <span class="token number">2</span>       <span class="token number">2</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">4</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">2</span>       <span class="token number">2</span>       <span class="token number">4</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">4</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">2</span>       <span class="token number">2</span>       <span class="token number">4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="MAX"><a href="#MAX" class="headerlink" title="MAX"></a>MAX</h4><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> pv<span class="token punctuation">,</span><span class="token function">MAX</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> pv1<span class="token punctuation">,</span> <span class="token comment">--é»˜è®¤ä¸ºä»èµ·ç‚¹åˆ°å½“å‰è¡Œ</span><span class="token function">MAX</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token keyword">UNBOUNDED</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token keyword">CURRENT</span> <span class="token keyword">ROW</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv2<span class="token punctuation">,</span> <span class="token comment">--ä»èµ·ç‚¹åˆ°å½“å‰è¡Œï¼Œç»“æœåŒpv1</span><span class="token function">MAX</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> pv3<span class="token punctuation">,</span> <span class="token comment">--åˆ†ç»„å†…æ‰€æœ‰è¡Œ</span><span class="token function">MAX</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token number">3</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token keyword">CURRENT</span> <span class="token keyword">ROW</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv4<span class="token punctuation">,</span> <span class="token comment">--å½“å‰è¡Œ+å¾€å‰3è¡Œ</span><span class="token function">MAX</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token number">3</span> <span class="token keyword">PRECEDING</span> <span class="token operator">AND</span> <span class="token number">1</span> <span class="token keyword">FOLLOWING</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv5<span class="token punctuation">,</span> <span class="token comment">--å½“å‰è¡Œ+å¾€å‰3è¡Œ+å¾€å1è¡Œ</span><span class="token function">MAX</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">ROWS</span> <span class="token operator">BETWEEN</span> <span class="token keyword">CURRENT</span> <span class="token keyword">ROW</span> <span class="token operator">AND</span> <span class="token keyword">UNBOUNDED</span> <span class="token keyword">FOLLOWING</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> pv6 <span class="token comment">--å½“å‰è¡Œ+å¾€åæ‰€æœ‰è¡Œ</span><span class="token keyword">FROM</span> test_t1<span class="token punctuation">;</span>cookieid createtime     pv      pv1     pv2     pv3     pv4     pv5      pv6 <span class="token comment">-----------------------------------------------------------------------------</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">7</span>       <span class="token number">1</span>       <span class="token number">5</span>       <span class="token number">7</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span>      <span class="token number">5</span>       <span class="token number">5</span>       <span class="token number">5</span>       <span class="token number">7</span>       <span class="token number">5</span>       <span class="token number">7</span>       <span class="token number">7</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">4</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span>      <span class="token number">2</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">4</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">4</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">4</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">4</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">7</span>       <span class="token number">4</span>       <span class="token number">4</span>       <span class="token number">4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="row-numberã€rankã€dense-rankã€ntile"><a href="#row-numberã€rankã€dense-rankã€ntile" class="headerlink" title="row_numberã€rankã€dense_rankã€ntile"></a>row_numberã€rankã€dense_rankã€ntile</h3><p><strong>å‡†å¤‡æ•°æ®ï¼š</strong></p><p>å»ºè¡¨è¯­å¥:</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> test_t2 <span class="token punctuation">(</span>  cookieid string<span class="token punctuation">,</span>  createtime string<span class="token punctuation">,</span>  <span class="token comment">--day </span>  pv <span class="token keyword">INT</span><span class="token punctuation">)</span> <span class="token keyword">ROW</span> FORMAT DELIMITED <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">','</span> stored <span class="token keyword">as</span> textfile<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>åŠ è½½æ•°æ®ï¼š</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/root/hivedata/test_t2.dat'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> test_t2<span class="token punctuation">;</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">5</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">7</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">3</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">2</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">4</span>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">4</span>cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span>cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span>cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">5</span>cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">6</span>cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">3</span>cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">9</span>cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">7</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="ROW-NUMBER-ä½¿ç”¨"><a href="#ROW-NUMBER-ä½¿ç”¨" class="headerlink" title="ROW_NUMBER() ä½¿ç”¨"></a>ROW_NUMBER() ä½¿ç”¨</h4><p><code>ROW_NUMBER()</code> ä» 1 å¼€å§‹ï¼ŒæŒ‰ç…§é¡ºåºï¼Œç”Ÿæˆåˆ†ç»„å†…è®°å½•çš„åºåˆ—ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> pv<span class="token punctuation">,</span>ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> pv <span class="token keyword">desc</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> rn <span class="token keyword">FROM</span> test_t2<span class="token punctuation">;</span>cookieid <span class="token keyword">day</span>           pv       rn<span class="token comment">------------------------------------------- </span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">7</span>       <span class="token number">1</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span>      <span class="token number">5</span>       <span class="token number">2</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">4</span>       <span class="token number">3</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">4</span>       <span class="token number">4</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">5</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span>      <span class="token number">2</span>       <span class="token number">6</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">1</span>       <span class="token number">7</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">9</span>       <span class="token number">1</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">7</span>       <span class="token number">2</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">6</span>       <span class="token number">3</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">5</span>       <span class="token number">4</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span>      <span class="token number">3</span>       <span class="token number">5</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span>      <span class="token number">3</span>       <span class="token number">6</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">2</span>       <span class="token number">7</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="RANK-å’Œ-DENSE-RANK-ä½¿ç”¨"><a href="#RANK-å’Œ-DENSE-RANK-ä½¿ç”¨" class="headerlink" title="RANK å’Œ DENSE_RANK ä½¿ç”¨"></a>RANK å’Œ DENSE_RANK ä½¿ç”¨</h4><ul><li><code>RANK()</code> ç”Ÿæˆæ•°æ®é¡¹åœ¨åˆ†ç»„ä¸­çš„æ’åï¼Œæ’åç›¸ç­‰ä¼šåœ¨åæ¬¡ä¸­ç•™ä¸‹ç©ºä½ã€‚</li><li><code>DENSE_RANK()</code> ç”Ÿæˆæ•°æ®é¡¹åœ¨åˆ†ç»„ä¸­çš„æ’åï¼Œæ’åç›¸ç­‰ä¼šåœ¨åæ¬¡ä¸­ä¸ä¼šç•™ä¸‹ç©ºä½ã€‚</li></ul><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> pv<span class="token punctuation">,</span>RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> pv <span class="token keyword">desc</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> rn1<span class="token punctuation">,</span>DENSE_RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> pv <span class="token keyword">desc</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> rn2<span class="token punctuation">,</span>ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> pv <span class="token keyword">DESC</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> rn3 <span class="token keyword">FROM</span> test_t2 <span class="token keyword">WHERE</span> cookieid <span class="token operator">=</span> <span class="token string">'cookie1'</span><span class="token punctuation">;</span>cookieid <span class="token keyword">day</span>           pv       rn1     rn2     rn3 <span class="token comment">-------------------------------------------------- </span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">7</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span>      <span class="token number">5</span>       <span class="token number">2</span>       <span class="token number">2</span>       <span class="token number">2</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">4</span>       <span class="token number">3</span>       <span class="token number">3</span>       <span class="token number">3</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">4</span>       <span class="token number">3</span>       <span class="token number">3</span>       <span class="token number">4</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">5</span>       <span class="token number">4</span>       <span class="token number">5</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span>      <span class="token number">2</span>       <span class="token number">6</span>       <span class="token number">5</span>       <span class="token number">6</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">1</span>       <span class="token number">7</span>       <span class="token number">6</span>       <span class="token number">7</span>rn1: <span class="token number">15</span>å·å’Œ<span class="token number">16</span>å·å¹¶åˆ—ç¬¬<span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">13</span>å·æ’ç¬¬<span class="token number">5</span>rn2: <span class="token number">15</span>å·å’Œ<span class="token number">16</span>å·å¹¶åˆ—ç¬¬<span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">13</span>å·æ’ç¬¬<span class="token number">4</span>rn3: å¦‚æœç›¸ç­‰ï¼Œåˆ™æŒ‰è®°å½•å€¼æ’åºï¼Œç”Ÿæˆå”¯ä¸€çš„æ¬¡åºï¼Œå¦‚æœæ‰€æœ‰è®°å½•å€¼éƒ½ç›¸ç­‰ï¼Œæˆ–è®¸ä¼šéšæœºæ’å§ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="NTILE"><a href="#NTILE" class="headerlink" title="NTILE"></a>NTILE</h4><p>æœ‰æ—¶ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼šå¦‚æœæ•°æ®æ’åºååˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œä¸šåŠ¡äººå‘˜åªå…³å¿ƒå…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚ä½•å°†è¿™ä¸­é—´çš„ä¸‰åˆ†ä¹‹ä¸€æ•°æ®æ‹¿å‡ºæ¥å‘¢? <code>NTILE</code> å‡½æ•°å³å¯ä»¥æ»¡è¶³ã€‚</p><p><code>NTILE</code> å¯ä»¥çœ‹æˆæ˜¯ï¼šæŠŠæœ‰åºçš„æ•°æ®é›†åˆå¹³å‡åˆ†é…åˆ°æŒ‡å®šçš„æ•°é‡ï¼ˆnumï¼‰ä¸ªæ¡¶ä¸­, å°†æ¡¶å·åˆ†é…ç»™æ¯ä¸€è¡Œã€‚å¦‚æœä¸èƒ½å¹³å‡åˆ†é…ï¼Œåˆ™ä¼˜å…ˆåˆ†é…è¾ƒå°ç¼–å·çš„æ¡¶ï¼Œå¹¶ä¸”å„ä¸ªæ¡¶ä¸­èƒ½æ”¾çš„è¡Œæ•°æœ€å¤šç›¸å·® 1ã€‚</p><p>ç„¶åå¯ä»¥æ ¹æ®æ¡¶å·ï¼Œé€‰å–å‰æˆ–å n åˆ†ä¹‹å‡ çš„æ•°æ®ã€‚æ•°æ®ä¼šå®Œæ•´å±•ç¤ºå‡ºæ¥ï¼Œåªæ˜¯ç»™ç›¸åº”çš„æ•°æ®æ‰“æ ‡ç­¾ï¼›å…·ä½“è¦å–å‡ åˆ†ä¹‹å‡ çš„æ•°æ®ï¼Œéœ€è¦å†åµŒå¥—ä¸€å±‚æ ¹æ®æ ‡ç­¾å–å‡ºã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> pv<span class="token punctuation">,</span>NTILE<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn1<span class="token punctuation">,</span> <span class="token comment">--åˆ†ç»„å†…å°†æ•°æ®åˆ†æˆ2ç‰‡</span>NTILE<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn2<span class="token punctuation">,</span> <span class="token comment">--åˆ†ç»„å†…å°†æ•°æ®åˆ†æˆ3ç‰‡</span>NTILE<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn3 <span class="token comment">--å°†æ‰€æœ‰æ•°æ®åˆ†æˆ4ç‰‡</span><span class="token keyword">FROM</span> test_t2 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">;</span>cookieid <span class="token keyword">day</span>           pv       rn1     rn2     rn3<span class="token comment">-------------------------------------------------</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span>      <span class="token number">5</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">7</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">2</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">1</span>       <span class="token number">2</span>       <span class="token number">2</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span>      <span class="token number">2</span>       <span class="token number">2</span>       <span class="token number">2</span>       <span class="token number">3</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">4</span>       <span class="token number">2</span>       <span class="token number">3</span>       <span class="token number">3</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">4</span>       <span class="token number">2</span>       <span class="token number">3</span>       <span class="token number">4</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">2</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span>      <span class="token number">3</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">1</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">5</span>       <span class="token number">1</span>       <span class="token number">1</span>       <span class="token number">2</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">6</span>       <span class="token number">1</span>       <span class="token number">2</span>       <span class="token number">2</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span>      <span class="token number">3</span>       <span class="token number">2</span>       <span class="token number">2</span>       <span class="token number">3</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">9</span>       <span class="token number">2</span>       <span class="token number">3</span>       <span class="token number">4</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">7</span>       <span class="token number">2</span>       <span class="token number">3</span>       <span class="token number">4</span>æ¯”å¦‚ï¼Œç»Ÿè®¡ä¸€ä¸ª cookieï¼Œpv æ•°æœ€å¤šçš„å‰ <span class="token number">1</span><span class="token operator">/</span><span class="token number">3</span> çš„å¤©rn2 <span class="token operator">=</span> <span class="token number">1</span> çš„è®°å½•ï¼Œå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å…¶ä»–ä¸€äº›çª—å£å‡½æ•°"><a href="#å…¶ä»–ä¸€äº›çª—å£å‡½æ•°" class="headerlink" title="å…¶ä»–ä¸€äº›çª—å£å‡½æ•°"></a>å…¶ä»–ä¸€äº›çª—å£å‡½æ•°</h2><h3 id="lag-lead-first-value-last-value"><a href="#lag-lead-first-value-last-value" class="headerlink" title="lag, lead, first_value, last_value"></a>lag, lead, first_value, last_value</h3><p><strong>å‡†å¤‡æ•°æ®</strong></p><p>å»ºè¡¨è¯­å¥:<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> test_t3<span class="token punctuation">(</span>cookieid string<span class="token punctuation">,</span>createtime string<span class="token punctuation">,</span>url string<span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">','</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>åŠ è½½æ•°æ®ï¼š<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/root/hivedata/test_t3.dat'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> test_t3<span class="token punctuation">;</span>cookie1<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span><span class="token punctuation">,</span>url2cookie1<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span><span class="token punctuation">,</span>url1cookie1<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span><span class="token punctuation">,</span>url3cookie1<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span><span class="token punctuation">,</span>url6cookie1<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span><span class="token punctuation">,</span>url7cookie1<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span><span class="token punctuation">,</span>url4cookie1<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span><span class="token punctuation">,</span>url5cookie2<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span><span class="token punctuation">,</span>url22cookie2<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span><span class="token punctuation">,</span>url11cookie2<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span><span class="token punctuation">,</span>url33cookie2<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span><span class="token punctuation">,</span>url66cookie2<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span><span class="token punctuation">,</span>url77cookie2<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span><span class="token punctuation">,</span>url44cookie2<span class="token punctuation">,</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span><span class="token punctuation">,</span>url55<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="LAG"><a href="#LAG" class="headerlink" title="LAG"></a>LAG</h4><p><code>LAG(col, n, DEFAULT)</code> ç”¨äºç»Ÿè®¡çª—å£å†…å¾€ä¸Šç¬¬ n è¡Œå€¼ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåˆ—åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå¾€ä¸Šç¬¬ n è¡Œï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º 1ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºé»˜è®¤å€¼ï¼ˆå½“å¾€ä¸Šç¬¬ n è¡Œä¸º NULL æ—¶å€™ï¼Œå–é»˜è®¤å€¼ï¼Œå¦‚ä¸æŒ‡å®šï¼Œåˆ™ä¸º NULLï¼‰<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> url<span class="token punctuation">,</span>  ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn<span class="token punctuation">,</span>  LAG<span class="token punctuation">(</span>createtime<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1970-01-01 00:00:00'</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> last_1_time<span class="token punctuation">,</span>  LAG<span class="token punctuation">(</span>createtime<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> last_2_time <span class="token keyword">FROM</span> test_t3<span class="token punctuation">;</span>cookieid createtime             url    rn       last_1_time             last_2_time<span class="token comment">-------------------------------------------------------------------------------------------</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url1    <span class="token number">1</span>       <span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span>     <span class="token boolean">NULL</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url2    <span class="token number">2</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     <span class="token boolean">NULL</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url3    <span class="token number">3</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url4    <span class="token number">4</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url5    <span class="token number">5</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url6    <span class="token number">6</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url7    <span class="token number">7</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url11   <span class="token number">1</span>       <span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span>     <span class="token boolean">NULL</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url22   <span class="token number">2</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     <span class="token boolean">NULL</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url33   <span class="token number">3</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url44   <span class="token number">4</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url55   <span class="token number">5</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url66   <span class="token number">6</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url77   <span class="token number">7</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>last_1_time:  æŒ‡å®šäº†å¾€ä¸Šç¬¬ <span class="token number">1</span> è¡Œçš„å€¼ï¼Œ<span class="token keyword">default</span> ä¸º <span class="token string">'1970-01-01 00:00:00'</span>  cookie1 ç¬¬ä¸€è¡Œï¼Œå¾€ä¸Š <span class="token number">1</span> è¡Œä¸º <span class="token boolean">NULL</span>ï¼Œå› æ­¤å–é»˜è®¤å€¼ <span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span>  cookie1 ç¬¬ä¸‰è¡Œï¼Œå¾€ä¸Š <span class="token number">1</span> è¡Œå€¼ä¸ºç¬¬äºŒè¡Œå€¼ï¼Œ<span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>  cookie1 ç¬¬å…­è¡Œï¼Œå¾€ä¸Š <span class="token number">1</span> è¡Œå€¼ä¸ºç¬¬äº”è¡Œå€¼ï¼Œ<span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>last_2_time:   æŒ‡å®šäº†å¾€ä¸Šç¬¬ <span class="token number">2</span> è¡Œçš„å€¼ï¼Œä¸ºæŒ‡å®šé»˜è®¤å€¼  cookie1 ç¬¬ä¸€è¡Œï¼Œå¾€ä¸Š <span class="token number">2</span> è¡Œä¸º <span class="token boolean">NULL</span>  cookie1 ç¬¬äºŒè¡Œï¼Œå¾€ä¸Š <span class="token number">2</span> è¡Œä¸º <span class="token boolean">NULL</span>  cookie1 ç¬¬å››è¡Œï¼Œå¾€ä¸Š <span class="token number">2</span> è¡Œä¸ºç¬¬äºŒè¡Œå€¼ï¼Œ<span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>  cookie1 ç¬¬ä¸ƒè¡Œï¼Œå¾€ä¸Š <span class="token number">2</span> è¡Œä¸ºç¬¬äº”è¡Œå€¼ï¼Œ<span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="LEAD"><a href="#LEAD" class="headerlink" title="LEAD"></a>LEAD</h4><p>ä¸ LAG ç›¸å <code>LEAD(col, n, DEFAULT)</code> ç”¨äºç»Ÿè®¡çª—å£å†…å¾€ä¸‹ç¬¬ n è¡Œå€¼ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåˆ—åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå¾€ä¸‹ç¬¬ n è¡Œï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º 1ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºé»˜è®¤å€¼ï¼ˆå½“å¾€ä¸‹ç¬¬ n è¡Œä¸º NULL æ—¶å€™ï¼Œå–é»˜è®¤å€¼ï¼Œå¦‚ä¸æŒ‡å®šï¼Œåˆ™ä¸º NULLï¼‰</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> url<span class="token punctuation">,</span>  ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn<span class="token punctuation">,</span>  LEAD<span class="token punctuation">(</span>createtime<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'1970-01-01 00:00:00'</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> next_1_time<span class="token punctuation">,</span>  LEAD<span class="token punctuation">(</span>createtime<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> next_2_time <span class="token keyword">FROM</span> test_t3<span class="token punctuation">;</span>cookieid createtime             url    rn       next_1_time             next_2_time <span class="token comment">-------------------------------------------------------------------------------------------</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url1    <span class="token number">1</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url2    <span class="token number">2</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url3    <span class="token number">3</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url4    <span class="token number">4</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url5    <span class="token number">5</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url6    <span class="token number">6</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     <span class="token boolean">NULL</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url7    <span class="token number">7</span>       <span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span>     <span class="token boolean">NULL</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url11   <span class="token number">1</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url22   <span class="token number">2</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url33   <span class="token number">3</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url44   <span class="token number">4</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url55   <span class="token number">5</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url66   <span class="token number">6</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     <span class="token boolean">NULL</span>cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url77   <span class="token number">7</span>       <span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span>     <span class="token boolean">NULL</span>é€»è¾‘ä¸LAGä¸€æ ·ï¼Œåªä¸è¿‡ LAG æ˜¯å¾€ä¸Šï¼ŒLEAD æ˜¯å¾€ä¸‹ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="FIRST-VALUE"><a href="#FIRST-VALUE" class="headerlink" title="FIRST_VALUE"></a>FIRST_VALUE</h4><p>å–åˆ†ç»„å†…æ’åºåï¼Œæˆªæ­¢åˆ°å½“å‰è¡Œï¼Œç¬¬ä¸€ä¸ªå€¼</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> url<span class="token punctuation">,</span>  ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn<span class="token punctuation">,</span>  FIRST_VALUE<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> first1 <span class="token keyword">FROM</span> test_t3<span class="token punctuation">;</span>cookieid  createtime            url     rn      first1<span class="token comment">---------------------------------------------------------</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url1    <span class="token number">1</span>       url1cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url2    <span class="token number">2</span>       url1cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url3    <span class="token number">3</span>       url1cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url4    <span class="token number">4</span>       url1cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url5    <span class="token number">5</span>       url1cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url6    <span class="token number">6</span>       url1cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url7    <span class="token number">7</span>       url1cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url11   <span class="token number">1</span>       url11cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url22   <span class="token number">2</span>       url11cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url33   <span class="token number">3</span>       url11cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url44   <span class="token number">4</span>       url11cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url55   <span class="token number">5</span>       url11cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url66   <span class="token number">6</span>       url11cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url77   <span class="token number">7</span>       url11<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="LAST-VALUE"><a href="#LAST-VALUE" class="headerlink" title="LAST_VALUE"></a>LAST_VALUE</h4><p>å–åˆ†ç»„å†…æ’åºåï¼Œæˆªæ­¢åˆ°å½“å‰è¡Œï¼Œæœ€åä¸€ä¸ªå€¼</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> url<span class="token punctuation">,</span>  ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn<span class="token punctuation">,</span>  LAST_VALUE<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> last1 <span class="token keyword">FROM</span> test_t3<span class="token punctuation">;</span>cookieid  createtime            url    rn       last1<span class="token comment">-----------------------------------------------------------------</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url1    <span class="token number">1</span>       url1cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url2    <span class="token number">2</span>       url2cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url3    <span class="token number">3</span>       url3cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url4    <span class="token number">4</span>       url4cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url5    <span class="token number">5</span>       url5cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url6    <span class="token number">6</span>       url6cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url7    <span class="token number">7</span>       url7cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url11   <span class="token number">1</span>       url11cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url22   <span class="token number">2</span>       url22cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url33   <span class="token number">3</span>       url33cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url44   <span class="token number">4</span>       url44cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url55   <span class="token number">5</span>       url55cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url66   <span class="token number">6</span>       url66cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url77   <span class="token number">7</span>       url77<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å¦‚æœæƒ³è¦å–åˆ†ç»„å†…æ’åºåæœ€åä¸€ä¸ªå€¼ï¼Œåˆ™éœ€è¦å˜é€šä¸€ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> url<span class="token punctuation">,</span>  ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn<span class="token punctuation">,</span>  LAST_VALUE<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> last1<span class="token punctuation">,</span>  FIRST_VALUE<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">DESC</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> last2 <span class="token keyword">FROM</span> test_t3 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">;</span>cookieid  createtime            url     rn     last1    last2<span class="token comment">-------------------------------------------------------------</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url1    <span class="token number">1</span>       url1    url7cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url2    <span class="token number">2</span>       url2    url7cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url3    <span class="token number">3</span>       url3   url7cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url4    <span class="token number">4</span>       url4    url7cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url5    <span class="token number">5</span>       url5    url7cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url6    <span class="token number">6</span>       url6    url7cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url7    <span class="token number">7</span>       url7    url7cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url11   <span class="token number">1</span>       url11   url77cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url22   <span class="token number">2</span>       url22   url77cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url33   <span class="token number">3</span>       url33   url77cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url44   <span class="token number">4</span>       url44   url77cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url55   <span class="token number">5</span>       url55   url77cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url66   <span class="token number">6</span>       url66   url77cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url77   <span class="token number">7</span>       url77   url77<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong>åœ¨ä½¿ç”¨åˆ†æå‡½æ•°çš„è¿‡ç¨‹ä¸­ç‰¹åˆ«æ³¨æ„ <code>ORDER BY</code>ï¼Œ å¦‚æœä¸æŒ‡å®š <code>ORDER BY</code>ï¼Œåˆ™é»˜è®¤æŒ‰ç…§è®°å½•åœ¨æ–‡ä»¶ä¸­çš„åç§»é‡è¿›è¡Œæ’åºï¼Œä¼šå‡ºç°é”™è¯¯çš„ç»“æœ</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> url<span class="token punctuation">,</span>  FIRST_VALUE<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> first2<span class="token keyword">FROM</span> test_t3<span class="token punctuation">;</span>cookieid  createtime            url     first2<span class="token comment">----------------------------------------------</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url2    url2cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url1    url2cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url3    url2cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url6    url2cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url7    url2cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url4    url2cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url5    url2cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url22   url22cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url11   url22cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url33   url22cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url66   url22cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url77   url22cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url44   url22cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url55   url22<span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span> createtime<span class="token punctuation">,</span> url<span class="token punctuation">,</span>  LAST_VALUE<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> last2<span class="token keyword">FROM</span> test_t3<span class="token punctuation">;</span>cookieid  createtime            url     last2<span class="token comment">----------------------------------------------</span>cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url2    url5cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url1    url5cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url3    url5cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url6    url5cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url7    url5cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url4    url5cookie1 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url5    url5cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>     url22   url55cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">00</span>     url11   url55cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">03</span>:<span class="token number">04</span>     url33   url55cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">05</span>     url66   url55cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">11</span>:<span class="token number">00</span>:<span class="token number">00</span>     url77   url55cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">10</span>:<span class="token number">00</span>     url44   url55cookie2 <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>     url55   url55<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="cume-dist-percent-rank"><a href="#cume-dist-percent-rank" class="headerlink" title="cume_dist, percent_rank"></a>cume_dist, percent_rank</h3><p>è¿™ä¸¤ä¸ªåºåˆ—åˆ†æå‡½æ•°ä¸æ˜¯å¾ˆå¸¸ç”¨ï¼Œ<strong>æ³¨æ„ï¼š</strong>åºåˆ—å‡½æ•°ä¸æ”¯æŒ WINDOW å­å¥</p><p><strong>æ•°æ®å‡†å¤‡</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">d1<span class="token punctuation">,</span>user1<span class="token punctuation">,</span><span class="token number">1000</span>d1<span class="token punctuation">,</span>user2<span class="token punctuation">,</span><span class="token number">2000</span>d1<span class="token punctuation">,</span>user3<span class="token punctuation">,</span><span class="token number">3000</span>d2<span class="token punctuation">,</span>user4<span class="token punctuation">,</span><span class="token number">4000</span>d2<span class="token punctuation">,</span>user5<span class="token punctuation">,</span><span class="token number">5000</span><span class="token keyword">CREATE</span> EXTERNAL <span class="token keyword">TABLE</span> test_t4 <span class="token punctuation">(</span>  dept STRING<span class="token punctuation">,</span>  userid string<span class="token punctuation">,</span>  sal <span class="token keyword">INT</span><span class="token punctuation">)</span> <span class="token keyword">ROW</span> FORMAT DELIMITED <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">','</span> stored <span class="token keyword">as</span> textfile<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>åŠ è½½æ•°æ®ï¼š</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/root/hivedata/test_t4.dat'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> test_t4<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h4 id="CUME-DIST"><a href="#CUME-DIST" class="headerlink" title="CUME_DIST"></a>CUME_DIST</h4><p><code>CUME_DIST</code> å’Œ <code>order by</code> çš„æ’åºé¡ºåºæœ‰å…³ç³»</p><p><code>CUME_DIST</code> å°äºç­‰äºå½“å‰å€¼çš„è¡Œæ•°/åˆ†ç»„å†…æ€»è¡Œæ•° <code>order</code> é»˜è®¤é¡ºåºï¼ˆæ­£åº å‡åºï¼‰æ¯”å¦‚ï¼Œç»Ÿè®¡å°äºç­‰äºå½“å‰è–ªæ°´çš„äººæ•°ï¼Œæ‰€å æ€»äººæ•°çš„æ¯”ä¾‹</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> dept<span class="token punctuation">,</span> userid<span class="token punctuation">,</span> sal<span class="token punctuation">,</span>  CUME_DIST<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn1<span class="token punctuation">,</span>  CUME_DIST<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> dept <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn2<span class="token keyword">FROM</span> test_t4<span class="token punctuation">;</span>dept    userid   sal   rn1       rn2 <span class="token comment">-------------------------------------------</span>d1      user1   <span class="token number">1000</span>    <span class="token number">0.2</span>     <span class="token number">0.3333333333333333</span>d1      user2   <span class="token number">2000</span>    <span class="token number">0.4</span>     <span class="token number">0.6666666666666666</span>d1      user3   <span class="token number">3000</span>    <span class="token number">0.6</span>     <span class="token number">1.0</span>d2      user4   <span class="token number">4000</span>    <span class="token number">0.8</span>     <span class="token number">0.5</span>d2      user5   <span class="token number">5000</span>    <span class="token number">1.0</span>     <span class="token number">1.0</span> rn1: æ²¡æœ‰ <span class="token keyword">partition</span>ï¼Œæ‰€æœ‰æ•°æ®å‡ä¸º <span class="token number">1</span> ç»„ï¼Œæ€»è¡Œæ•°ä¸º <span class="token number">5</span>ï¼Œ     ç¬¬ä¸€è¡Œï¼šå°äºç­‰äº <span class="token number">1000</span> çš„è¡Œæ•°ä¸º <span class="token number">1</span>ï¼Œå› æ­¤ï¼Œ<span class="token number">1</span><span class="token operator">/</span><span class="token number">5</span><span class="token operator">=</span><span class="token number">0.2</span>     ç¬¬ä¸‰è¡Œï¼šå°äºç­‰äº <span class="token number">3000</span> çš„è¡Œæ•°ä¸º <span class="token number">3</span>ï¼Œå› æ­¤ï¼Œ<span class="token number">3</span><span class="token operator">/</span><span class="token number">5</span><span class="token operator">=</span><span class="token number">0.6</span>rn2: æŒ‰ç…§éƒ¨é—¨åˆ†ç»„ï¼Œdpet<span class="token operator">=</span>d1 çš„è¡Œæ•°ä¸º <span class="token number">3</span>ï¼Œ     ç¬¬äºŒè¡Œï¼šå°äºç­‰äº <span class="token number">2000</span> çš„è¡Œæ•°ä¸º <span class="token number">2</span>ï¼Œå› æ­¤ï¼Œ<span class="token number">2</span><span class="token operator">/</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">0.6666666666666666</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="PERCENT-RANK"><a href="#PERCENT-RANK" class="headerlink" title="PERCENT_RANK"></a>PERCENT_RANK</h4><p><code>PERCENT_RANK</code> åˆ†ç»„å†…å½“å‰è¡Œçš„ (RANK å€¼ - 1)/(åˆ†ç»„å†…æ€»è¡Œæ•° - 1)</p><p>ç»è°ƒç ”ï¼Œè¯¥å‡½æ•°æ˜¾ç¤ºç°å®æ„ä¹‰ä¸æ˜æœ—ï¼Œæœ‰å¾…äºç»§ç»­è€ƒè¯</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> dept<span class="token punctuation">,</span> userid<span class="token punctuation">,</span> sal<span class="token punctuation">,</span>  PERCENT_RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn1<span class="token punctuation">,</span>   <span class="token comment">--åˆ†ç»„å†…</span>  RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn11<span class="token punctuation">,</span>          <span class="token comment">--åˆ†ç»„å†…RANKå€¼</span>  <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> rn12<span class="token punctuation">,</span>     <span class="token comment">--åˆ†ç»„å†…æ€»è¡Œæ•°</span>  PERCENT_RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> dept <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn2 <span class="token keyword">FROM</span> test_t4<span class="token punctuation">;</span>dept    userid   sal    rn1    rn11     rn12    rn2<span class="token comment">---------------------------------------------------</span>d1      user1   <span class="token number">1000</span>    <span class="token number">0.0</span>     <span class="token number">1</span>       <span class="token number">5</span>       <span class="token number">0.0</span>d1      user2   <span class="token number">2000</span>    <span class="token number">0.25</span>    <span class="token number">2</span>       <span class="token number">5</span>       <span class="token number">0.5</span>d1      user3   <span class="token number">3000</span>    <span class="token number">0.5</span>     <span class="token number">3</span>       <span class="token number">5</span>       <span class="token number">1.0</span>d2      user4   <span class="token number">4000</span>    <span class="token number">0.75</span>    <span class="token number">4</span>       <span class="token number">5</span>       <span class="token number">0.0</span>d2      user5   <span class="token number">5000</span>    <span class="token number">1.0</span>     <span class="token number">5</span>       <span class="token number">5</span>       <span class="token number">1.0</span>rn1: rn1 <span class="token operator">=</span> <span class="token punctuation">(</span>rn11<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>rn12<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>   ç¬¬ä¸€è¡Œï¼Œ<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token operator">/</span><span class="token number">4</span> <span class="token operator">=</span> <span class="token number">0</span>  ç¬¬äºŒè¡Œï¼Œ<span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">4</span> <span class="token operator">=</span> <span class="token number">0.25</span>  ç¬¬å››è¡Œï¼Œ<span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">/</span><span class="token number">4</span> <span class="token operator">=</span> <span class="token number">0.75</span>rn2: æŒ‰ç…§ dept åˆ†ç»„ï¼Œ  dept<span class="token operator">=</span>d1 çš„æ€»è¡Œæ•°ä¸º <span class="token number">3</span>  ç¬¬ä¸€è¡Œï¼Œ<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>  ç¬¬ä¸‰è¡Œï¼Œ<span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="grouping-sets-cube-rollup"><a href="#grouping-sets-cube-rollup" class="headerlink" title="grouping sets, cube, rollup"></a>grouping sets, cube, rollup</h3><p>è¿™å‡ ä¸ªåˆ†æå‡½æ•°é€šå¸¸ç”¨äº OLAP ä¸­ï¼Œä¸èƒ½ç´¯åŠ ï¼Œè€Œä¸”éœ€è¦æ ¹æ®ä¸åŒç»´åº¦ä¸Šé’»å’Œä¸‹é’»çš„æŒ‡æ ‡ç»Ÿè®¡ï¼Œæ¯”å¦‚ï¼Œåˆ†å°æ—¶ã€å¤©ã€æœˆçš„ UV æ•°ã€‚</p><p><strong>æ•°æ®å‡†å¤‡ï¼š</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> test_t5 <span class="token punctuation">(</span>  <span class="token keyword">month</span> STRING<span class="token punctuation">,</span>  <span class="token keyword">day</span> STRING<span class="token punctuation">,</span>   cookieid STRING <span class="token punctuation">)</span> <span class="token keyword">ROW</span> FORMAT DELIMITED <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">','</span> stored <span class="token keyword">as</span> textfile<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>åŠ è½½æ•°æ®ï¼š</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/root/hivedata/test_t5.dat'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> test_t5<span class="token punctuation">;</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>cookie1<span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>cookie5<span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span>cookie7<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span>cookie3<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span>cookie2<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span>cookie4<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span>cookie4<span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>cookie2<span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>cookie3<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span>cookie5<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span>cookie6<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span>cookie3<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span>cookie2<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span>cookie1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="GROUPING-SETS"><a href="#GROUPING-SETS" class="headerlink" title="GROUPING SETS"></a>GROUPING SETS</h4><p><code>grouping sets</code> æ˜¯ä¸€ç§å°†å¤šä¸ª <code>group by</code> é€»è¾‘å†™åœ¨ä¸€ä¸ª SQL è¯­å¥ä¸­çš„ä¾¿åˆ©å†™æ³•ã€‚</p><p>ç­‰ä»·äºå°†ä¸åŒç»´åº¦çš„ <code>GROUP BY</code> ç»“æœé›†è¿›è¡Œ <code>UNION ALL</code>ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span> GROUPING SETS <span class="token punctuation">(</span><span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">)</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> GROUPING__ID<span class="token punctuation">;</span><span class="token keyword">month</span>      <span class="token keyword">day</span>            uv      GROUPING__ID<span class="token comment">------------------------------------------------</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span>    <span class="token boolean">NULL</span>            <span class="token number">5</span>       <span class="token number">1</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>    <span class="token boolean">NULL</span>            <span class="token number">6</span>       <span class="token number">1</span><span class="token boolean">NULL</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">4</span>       <span class="token number">2</span><span class="token boolean">NULL</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">1</span>       <span class="token number">2</span><span class="token boolean">NULL</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">2</span>       <span class="token number">2</span><span class="token boolean">NULL</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">2</span><span class="token boolean">NULL</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">2</span>       <span class="token number">2</span><span class="token boolean">NULL</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">2</span>       <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><code>grouping_id</code> è¡¨ç¤ºè¿™ä¸€ç»„ç»“æœå±äºå“ªä¸ªåˆ†ç»„é›†åˆï¼Œæ ¹æ® <code>grouping sets</code> ä¸­çš„åˆ†ç»„æ¡ä»¶ monthï¼Œdayï¼Œ1 æ˜¯ä»£è¡¨ monthï¼Œ2 æ˜¯ä»£è¡¨ day</p><p>ç­‰ä»·äº</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span> <span class="token keyword">UNION</span> <span class="token keyword">ALL</span> <span class="token keyword">SELECT</span> <span class="token boolean">NULL</span> <span class="token keyword">as</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">day</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>å†å¦‚ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span> GROUPING SETS <span class="token punctuation">(</span><span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> GROUPING__ID<span class="token punctuation">;</span><span class="token keyword">month</span>         <span class="token keyword">day</span>             uv      GROUPING__ID<span class="token comment">------------------------------------------------</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span>       <span class="token boolean">NULL</span>            <span class="token number">5</span>       <span class="token number">1</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>       <span class="token boolean">NULL</span>            <span class="token number">6</span>       <span class="token number">1</span><span class="token boolean">NULL</span>          <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">4</span>       <span class="token number">2</span><span class="token boolean">NULL</span>          <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">1</span>       <span class="token number">2</span><span class="token boolean">NULL</span>          <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">2</span>       <span class="token number">2</span><span class="token boolean">NULL</span>          <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">2</span><span class="token boolean">NULL</span>          <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">2</span>       <span class="token number">2</span><span class="token boolean">NULL</span>          <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">2</span>       <span class="token number">2</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">4</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">1</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">2</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">2</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>       <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">2</span>       <span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ç­‰ä»·äº</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span> <span class="token keyword">UNION</span> <span class="token keyword">ALL</span> <span class="token keyword">SELECT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">day</span><span class="token keyword">UNION</span> <span class="token keyword">ALL</span> <span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="CUBE"><a href="#CUBE" class="headerlink" title="CUBE"></a>CUBE</h4><p>æ ¹æ® <code>GROUP BY</code> çš„ç»´åº¦çš„æ‰€æœ‰ç»„åˆè¿›è¡Œèšåˆã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span> <span class="token keyword">WITH</span> CUBE <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> GROUPING__ID<span class="token punctuation">;</span><span class="token keyword">month</span>           <span class="token keyword">day</span>             uv     GROUPING__ID<span class="token comment">--------------------------------------------</span><span class="token boolean">NULL</span>            <span class="token boolean">NULL</span>            <span class="token number">7</span>       <span class="token number">0</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span>         <span class="token boolean">NULL</span>            <span class="token number">5</span>       <span class="token number">1</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>         <span class="token boolean">NULL</span>            <span class="token number">6</span>       <span class="token number">1</span><span class="token boolean">NULL</span>            <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">2</span>       <span class="token number">2</span><span class="token boolean">NULL</span>            <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">2</span><span class="token boolean">NULL</span>            <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">2</span>       <span class="token number">2</span><span class="token boolean">NULL</span>            <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">2</span>       <span class="token number">2</span><span class="token boolean">NULL</span>            <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">4</span>       <span class="token number">2</span><span class="token boolean">NULL</span>            <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">1</span>       <span class="token number">2</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span>         <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">4</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span>         <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">1</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>         <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">2</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>         <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">2</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>         <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>         <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">2</span>       <span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ç­‰ä»·äº</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5<span class="token keyword">UNION</span> <span class="token keyword">ALL</span> <span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span> <span class="token keyword">UNION</span> <span class="token keyword">ALL</span> <span class="token keyword">SELECT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">day</span><span class="token keyword">UNION</span> <span class="token keyword">ALL</span> <span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h4 id="ROLLUP"><a href="#ROLLUP" class="headerlink" title="ROLLUP"></a>ROLLUP</h4><p>æ˜¯ <code>CUBE</code> çš„å­é›†ï¼Œä»¥æœ€å·¦ä¾§çš„ç»´åº¦ä¸ºä¸»ï¼Œä»è¯¥ç»´åº¦è¿›è¡Œå±‚çº§èšåˆã€‚</p><p>æ¯”å¦‚ï¼Œä»¥ <code>month</code> ç»´åº¦è¿›è¡Œå±‚çº§èšåˆï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token keyword">day</span><span class="token keyword">WITH ROLLUP</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> GROUPING__ID<span class="token punctuation">;</span><span class="token keyword">month</span>            <span class="token keyword">day</span>             uv     GROUPING__ID<span class="token comment">---------------------------------------------------</span><span class="token boolean">NULL</span>             <span class="token boolean">NULL</span>            <span class="token number">7</span>       <span class="token number">0</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span>          <span class="token boolean">NULL</span>            <span class="token number">5</span>       <span class="token number">1</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>          <span class="token boolean">NULL</span>            <span class="token number">6</span>       <span class="token number">1</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span>          <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">4</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span>          <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">1</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>          <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">2</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>          <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">3</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>          <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">2</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>          <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">2</span>       <span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æŠŠ <code>month</code> å’Œ <code>day</code> è°ƒæ¢é¡ºåºï¼Œåˆ™ä»¥ <code>day</code> ç»´åº¦è¿›è¡Œå±‚çº§èšåˆï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token keyword">month</span><span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">day</span><span class="token punctuation">,</span> <span class="token keyword">month</span> <span class="token keyword">WITH ROLLUP</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> GROUPING__ID<span class="token punctuation">;</span><span class="token keyword">day</span>             <span class="token keyword">month</span>              uv     GROUPING__ID<span class="token comment">-------------------------------------------------------</span><span class="token boolean">NULL</span>            <span class="token boolean">NULL</span>               <span class="token number">7</span>       <span class="token number">0</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token boolean">NULL</span>               <span class="token number">3</span>       <span class="token number">1</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token boolean">NULL</span>               <span class="token number">1</span>       <span class="token number">1</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token boolean">NULL</span>               <span class="token number">2</span>       <span class="token number">1</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token boolean">NULL</span>               <span class="token number">4</span>       <span class="token number">1</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token boolean">NULL</span>               <span class="token number">2</span>       <span class="token number">1</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token boolean">NULL</span>               <span class="token number">2</span>       <span class="token number">1</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>            <span class="token number">2</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span>      <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span>            <span class="token number">4</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span>            <span class="token number">1</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span>      <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>            <span class="token number">3</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span>      <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>            <span class="token number">2</span>       <span class="token number">3</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span>      <span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span>            <span class="token number">2</span>       <span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>è¿™é‡Œï¼Œæ ¹æ®å¤©å’Œæœˆè¿›è¡Œèšåˆï¼Œå’Œæ ¹æ®å¤©èšåˆç»“æœä¸€æ ·ï¼Œå› ä¸ºæœ‰çˆ¶å­å…³ç³»ï¼Œå¦‚æœæ˜¯å…¶ä»–ç»´åº¦ç»„åˆçš„è¯ï¼Œå°±ä¼šä¸ä¸€æ ·ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸHive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HBase é¢è¯•é¢˜è§£æ</title>
      <link href="post/47457d03.html"/>
      <url>post/47457d03.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="HBase-çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#HBase-çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="HBase çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>HBase çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h3></blockquote><ul><li>å¤§ï¼šä¸€ä¸ªè¡¨å¯ä»¥æœ‰æ•°åäº¿è¡Œï¼Œä¸Šç™¾ä¸‡åˆ—ï¼›</li><li>æ— æ¨¡å¼ï¼šæ¯è¡Œéƒ½æœ‰ä¸€ä¸ªå¯æ’åºçš„ä¸»é”®å’Œä»»æ„å¤šçš„åˆ—ï¼Œåˆ—å¯ä»¥æ ¹æ®éœ€è¦åŠ¨æ€çš„å¢åŠ ï¼ŒåŒä¸€å¼ è¡¨ä¸­ä¸åŒçš„è¡Œå¯ä»¥æœ‰æˆªç„¶ä¸åŒçš„åˆ—ï¼›</li><li>é¢å‘åˆ—ï¼šé¢å‘åˆ—ï¼ˆæ—ï¼‰çš„å­˜å‚¨å’Œæƒé™æ§åˆ¶ï¼Œåˆ—ï¼ˆæ—ï¼‰ç‹¬ç«‹æ£€ç´¢ï¼›</li><li>ç¨€ç–ï¼šç©ºï¼ˆnullï¼‰åˆ—å¹¶ä¸å ç”¨å­˜å‚¨ç©ºé—´ï¼Œè¡¨å¯ä»¥è®¾è®¡çš„éå¸¸ç¨€ç–ï¼›</li><li>æ•°æ®å¤šç‰ˆæœ¬ï¼šæ¯ä¸ªå•å…ƒä¸­çš„æ•°æ®å¯ä»¥æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œé»˜è®¤æƒ…å†µä¸‹ç‰ˆæœ¬å·è‡ªåŠ¨åˆ†é…ï¼Œæ˜¯å•å…ƒæ ¼æ’å…¥æ—¶çš„æ—¶é—´æˆ³ï¼›</li><li>æ•°æ®ç±»å‹å•ä¸€ï¼šHBase ä¸­çš„æ•°æ®éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ²¡æœ‰ç±»å‹ã€‚</li></ul><blockquote><h3 id="HBase-å’Œ-Hive-çš„åŒºåˆ«ï¼Ÿ"><a href="#HBase-å’Œ-Hive-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="HBase å’Œ Hive çš„åŒºåˆ«ï¼Ÿ"></a>HBase å’Œ Hive çš„åŒºåˆ«ï¼Ÿ</h3></blockquote><div class="table-container"><table><thead><tr><th></th><th>HBase</th><th>Hive</th></tr></thead><tbody><tr><td>ç±»å‹</td><td>åˆ—å¼æ•°æ®åº“</td><td>æ•°æ®ä»“åº“</td></tr><tr><td>å†…éƒ¨æœºåˆ¶</td><td>æ•°æ®åº“å¼•æ“</td><td>MapReduce</td></tr><tr><td>å¢åˆ æ”¹æŸ¥</td><td>éƒ½æ”¯æŒ</td><td>åªæ”¯æŒå¯¼å…¥å’ŒæŸ¥è¯¢</td></tr><tr><td>Schema</td><td>åªéœ€è¦é¢„å…ˆå®šä¹‰åˆ—æ—ï¼Œä¸éœ€è¦å…·ä½“åˆ°åˆ—ï¼Œåˆ—å¯ä»¥åŠ¨æ€ä¿®æ”¹</td><td>éœ€è¦é¢„å…ˆå®šä¹‰è¡¨æ ¼</td></tr><tr><td>åº”ç”¨åœºæ™¯</td><td>å®æ—¶</td><td>ç¦»çº¿å¤„ç†</td></tr><tr><td>ç‰¹ç‚¹</td><td>ä»¥ K-V å½¢å¼å­˜å‚¨</td><td>ç±» SQL</td></tr></tbody></table></div><p>Hive å’Œ HBase æ˜¯ä¸¤ç§åŸºäº Hadoop çš„ä¸åŒæŠ€æœ¯ï¼ŒHive æ˜¯ä¸€ç§ç±» SQL çš„å¼•æ“ï¼Œå¹¶ä¸”è¿è¡Œ MapReduce ä»»åŠ¡ï¼ŒHBase æ˜¯ä¸€ç§åœ¨ Hadoop ä¹‹ä¸Šçš„ NoSQL çš„ key/value æ•°æ®åº“ã€‚ å½“ç„¶ï¼Œè¿™ä¸¤ç§å·¥å…·æ˜¯å¯ä»¥åŒæ—¶ä½¿ç”¨çš„ã€‚å°±åƒç”¨ Google æ¥æœç´¢ï¼Œç”¨ FaceBook è¿›è¡Œç¤¾äº¤ä¸€æ ·ï¼ŒHive å¯ä»¥ç”¨æ¥è¿›è¡Œç»Ÿè®¡æŸ¥è¯¢ï¼ŒHBase å¯ä»¥ç”¨æ¥è¿›è¡Œå®æ—¶æŸ¥è¯¢ï¼Œæ•°æ®å¯ä»¥ä» Hive å†™åˆ° HBaseï¼Œä¹Ÿå¯ä»¥ä» HBase å†™å› Hiveã€‚</p><blockquote><h3 id="HBase-é€‚ç”¨äºæ€æ ·çš„æƒ…æ™¯ï¼Ÿ"><a href="#HBase-é€‚ç”¨äºæ€æ ·çš„æƒ…æ™¯ï¼Ÿ" class="headerlink" title="HBase é€‚ç”¨äºæ€æ ·çš„æƒ…æ™¯ï¼Ÿ"></a>HBase é€‚ç”¨äºæ€æ ·çš„æƒ…æ™¯ï¼Ÿ</h3></blockquote><ul><li><p>åŠç»“æ„åŒ–æˆ–éç»“æ„åŒ–æ•°æ®ï¼š</p><p>å¯¹äºæ•°æ®ç»“æ„å­—æ®µä¸å¤Ÿç¡®å®šæˆ–æ‚ä¹±æ— ç« å¾ˆéš¾æŒ‰ä¸€ä¸ªæ¦‚å¿µå»è¿›è¡ŒæŠ½å–çš„æ•°æ®é€‚åˆç”¨ HBaseã€‚ä»¥ä¸Šé¢çš„ä¾‹å­ä¸ºä¾‹ï¼Œå½“ä¸šåŠ¡å‘å±•éœ€è¦å­˜å‚¨ author çš„ emailï¼Œphoneï¼Œaddress ä¿¡æ¯æ—¶ RDBMS éœ€è¦åœæœºç»´æŠ¤ï¼Œè€Œ HBase æ”¯æŒåŠ¨æ€å¢åŠ ã€‚</p></li><li><p>è®°å½•éå¸¸ç¨€ç–ï¼š</p><p>RDBMS çš„è¡Œæœ‰å¤šå°‘åˆ—æ˜¯å›ºå®šçš„ï¼Œä¸º null çš„åˆ—æµªè´¹äº†å­˜å‚¨ç©ºé—´ã€‚è€Œå¦‚ä¸Šæ–‡æåˆ°çš„ï¼ŒHBaseä¸ºnullçš„Columnä¸ä¼šè¢«å­˜å‚¨ï¼Œè¿™æ ·æ—¢èŠ‚çœäº†ç©ºé—´åˆæé«˜äº†è¯»æ€§èƒ½ã€‚</p></li><li><p>å¤šç‰ˆæœ¬æ•°æ®</p><p>æ ¹æ® Row key å’Œ Column key å®šä½åˆ°çš„ value å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„ç‰ˆæœ¬å€¼ï¼Œå› æ­¤å¯¹äºéœ€è¦å­˜å‚¨å˜åŠ¨å†å²è®°å½•çš„æ•°æ®ï¼Œç”¨ HBase å°±éå¸¸æ–¹ä¾¿äº†ã€‚æ¯”å¦‚ä¸Šä¾‹ä¸­çš„author çš„ address æ˜¯ä¼šå˜åŠ¨çš„ï¼Œä¸šåŠ¡ä¸Šä¸€èˆ¬åªéœ€è¦æœ€æ–°çš„å€¼ï¼Œä½†æœ‰æ—¶å¯èƒ½éœ€è¦æŸ¥è¯¢åˆ°å†å²å€¼ã€‚</p></li><li><p>è¶…å¤§æ•°æ®é‡</p><p>å½“æ•°æ®é‡è¶Šæ¥è¶Šå¤§ï¼ŒRDBMS æ•°æ®åº“æ’‘ä¸ä½äº†ï¼Œå°±å‡ºç°äº†è¯»å†™åˆ†ç¦»ç­–ç•¥ï¼Œé€šè¿‡ä¸€ä¸ª Master ä¸“é—¨è´Ÿè´£å†™æ“ä½œï¼Œå¤šä¸ª Slave è´Ÿè´£è¯»æ“ä½œï¼ŒæœåŠ¡å™¨æˆæœ¬å€å¢ã€‚éšç€å‹åŠ›å¢åŠ ï¼ŒMaster æ’‘ä¸ä½äº†ï¼Œè¿™æ—¶å°±è¦åˆ†åº“äº†ï¼ŒæŠŠå…³è”ä¸å¤§çš„æ•°æ®åˆ†å¼€éƒ¨ç½²ï¼Œä¸€äº› join æŸ¥è¯¢ä¸èƒ½ç”¨äº†ï¼Œéœ€è¦å€ŸåŠ©ä¸­é—´å±‚ã€‚éšç€æ•°æ®é‡çš„è¿›ä¸€æ­¥å¢åŠ ï¼Œä¸€ä¸ªè¡¨çš„è®°å½•è¶Šæ¥è¶Šå¤§ï¼ŒæŸ¥è¯¢å°±å˜å¾—å¾ˆæ…¢ï¼Œäºæ˜¯åˆå¾—æåˆ†è¡¨ï¼Œæ¯”å¦‚æŒ‰ ID å–æ¨¡åˆ†æˆå¤šä¸ªè¡¨ä»¥å‡å°‘å•ä¸ªè¡¨çš„è®°å½•æ•°ã€‚ç»å†è¿‡è¿™äº›äº‹çš„äººéƒ½çŸ¥é“è¿‡ç¨‹æ˜¯å¤šä¹ˆçš„æŠ˜è…¾ã€‚é‡‡ç”¨ HBase å°±ç®€å•äº†ï¼Œåªéœ€è¦åŠ æœºå™¨å³å¯ï¼ŒHBase ä¼šè‡ªåŠ¨æ°´å¹³åˆ‡åˆ†æ‰©å±•ï¼Œè·Ÿ Hadoop çš„æ— ç¼é›†æˆä¿éšœäº†å…¶æ•°æ®å¯é æ€§ï¼ˆHDFSï¼‰å’Œæµ·é‡æ•°æ®åˆ†æçš„é«˜æ€§èƒ½ï¼ˆMapReduceï¼‰ã€‚</p></li></ul><blockquote><h3 id="HBase-çš„æ¶æ„ä½“ç³»ï¼Ÿ"><a href="#HBase-çš„æ¶æ„ä½“ç³»ï¼Ÿ" class="headerlink" title="HBase çš„æ¶æ„ä½“ç³»ï¼Ÿ"></a>HBase çš„æ¶æ„ä½“ç³»ï¼Ÿ</h3></blockquote><p><strong>æ¶æ„ä½“ç³»</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hbase_architecture.png" alt></p><ul><li>Zookeeperï¼šä½œä¸ºåˆ†å¸ƒå¼çš„åè°ƒã€‚RegionServer ä¹Ÿä¼šæŠŠè‡ªå·±çš„ä¿¡æ¯å†™åˆ° Zookeeper ä¸­ã€‚</li><li>HDFS æ˜¯ HBaseè¿è¡Œçš„åº•å±‚æ–‡ä»¶ç³»ç»Ÿã€‚</li><li>RegionServerï¼šç†è§£ä¸ºæ•°æ®èŠ‚ç‚¹ï¼Œå­˜å‚¨æ•°æ®çš„ã€‚</li><li>Master RegionServerï¼šè¦å®æ—¶çš„å‘ Master æŠ¥å‘Šä¿¡æ¯ã€‚Master çŸ¥é“å…¨å±€çš„ RegionServer è¿è¡Œæƒ…å†µï¼Œå¯ä»¥æ§åˆ¶ RegionServer çš„æ•…éšœè½¬ç§»å’Œ Region çš„åˆ‡åˆ†ã€‚</li></ul><p><strong>æ¶æ„ç»†åŒ–</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hbase_deep_architecture.png" alt></p><ul><li>HMaster æ˜¯ Master Serverçš„å®ç°ï¼Œè´Ÿè´£ç›‘æ§é›†ç¾¤ä¸­çš„ RegionServer å®ä¾‹ï¼ŒåŒæ—¶æ˜¯æ‰€æœ‰ metadata æ”¹å˜çš„æ¥å£ï¼Œåœ¨é›†ç¾¤ä¸­ï¼Œé€šå¸¸è¿è¡Œåœ¨ NameNode ä¸Šé¢ã€‚<ul><li>HMasterInterface æš´éœ²çš„æ¥å£ï¼šTable(createTableï¼ŒmodifyTableï¼ŒremoveTableï¼Œenableï¼Œdisable)ï¼ŒColumnFamily (addColumnï¼ŒmodifyColumnï¼ŒremoveColumn)ï¼ŒRegion (moveï¼Œassignï¼Œunassign)ã€‚</li><li>Master è¿è¡Œçš„åå°çº¿ç¨‹ï¼š<ul><li>LoadBalancer çº¿ç¨‹ï¼Œæ§åˆ¶ region æ¥å¹³è¡¡é›†ç¾¤çš„è´Ÿè½½ã€‚</li><li>CatalogJanitor çº¿ç¨‹ï¼Œå‘¨æœŸæ€§çš„æ£€æŸ¥ hbase:meta è¡¨ã€‚</li></ul></li></ul></li><li>HRegionServer æ˜¯ RegionServer çš„å®ç°ï¼ŒæœåŠ¡å’Œç®¡ç† Regionsï¼Œé›†ç¾¤ä¸­ RegionServer è¿è¡Œåœ¨ DataNodeã€‚<ul><li>HRegionRegionInterface æš´éœ²æ¥å£ï¼šData(getï¼Œputï¼Œdeleteï¼Œnextï¼Œetc.)ï¼ŒRegion(splitRegionï¼ŒcompactRegionï¼Œetc.)ã€‚</li><li>RegionServer åå°çº¿ç¨‹ï¼šCompactSplitThreadï¼ŒMajorCompactionCheckerï¼ŒMemStoreFlusherï¼ŒLogRollerã€‚</li></ul></li><li>Regionsï¼šä»£è¡¨ tableï¼ŒRegion æœ‰å¤šä¸ª Storeï¼ˆåˆ—ç°‡ï¼‰ï¼ŒStore æœ‰ä¸€ä¸ª MemStore å’Œå¤šä¸ª StoreFilesï¼ˆHFileï¼‰ï¼ŒStoreFiles çš„åº•å±‚æ˜¯ Blockã€‚</li></ul><blockquote><h3 id="æè¿°-HBase-çš„-RowKey-çš„è®¾è®¡åŸåˆ™ï¼Ÿ"><a href="#æè¿°-HBase-çš„-RowKey-çš„è®¾è®¡åŸåˆ™ï¼Ÿ" class="headerlink" title="æè¿° HBase çš„ RowKey çš„è®¾è®¡åŸåˆ™ï¼Ÿ"></a>æè¿° HBase çš„ RowKey çš„è®¾è®¡åŸåˆ™ï¼Ÿ</h3></blockquote><ul><li><p>RowKey é•¿åº¦åŸåˆ™â€ƒ RowKey æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶ç æµï¼ŒRowKey çš„é•¿åº¦è¢«å¾ˆå¤šå¼€å‘è€…å»ºè®®è¯´è®¾è®¡åœ¨ 10~100 ä¸ªå­—èŠ‚ï¼Œä¸è¿‡å»ºè®®æ˜¯è¶ŠçŸ­è¶Šå¥½ï¼Œä¸è¦è¶…è¿‡ 16 ä¸ªå­—èŠ‚ã€‚</p><p>åŸå› å¦‚ä¸‹ï¼š</p><ul><li>æ•°æ®çš„æŒä¹…åŒ–æ–‡ä»¶ HFile ä¸­æ˜¯æŒ‰ç…§ KeyValue å­˜å‚¨çš„ï¼Œå¦‚æœ RowKey è¿‡é•¿æ¯”å¦‚ 100 ä¸ªå­—èŠ‚ï¼Œ1000 ä¸‡åˆ—æ•°æ®å…‰ RowKey å°±è¦å ç”¨ 100*1000 ä¸‡ = 10 äº¿ä¸ªå­—èŠ‚ï¼Œ å°†è¿‘ 1GB æ•°æ®ï¼Œè¿™ä¼šæå¤§å½±å“ HFile çš„å­˜å‚¨æ•ˆç‡ï¼›</li><li>MemStore å°†ç¼“å­˜éƒ¨åˆ†æ•°æ®åˆ°å†…å­˜ï¼Œå¦‚æœ RowKey å­—æ®µè¿‡é•¿å†…å­˜çš„æœ‰æ•ˆåˆ©ç”¨ç‡ä¼šé™ä½ï¼Œç³»ç»Ÿå°†æ— æ³•ç¼“å­˜æ›´å¤šçš„æ•°æ®ï¼Œè¿™ä¼šé™ä½æ£€ç´¢æ•ˆç‡ã€‚å› æ­¤ RowKey çš„å­—èŠ‚é•¿åº¦è¶ŠçŸ­è¶Šå¥½ã€‚</li><li>ç›®å‰æ“ä½œç³»ç»Ÿæ˜¯éƒ½æ˜¯ 64 ä½ç³»ç»Ÿï¼Œå†…å­˜ 8 å­—èŠ‚å¯¹é½ã€‚æ§åˆ¶åœ¨ 16 ä¸ªå­—èŠ‚ï¼Œ8 å­—èŠ‚çš„æ•´æ•°å€åˆ©ç”¨æ“ä½œç³»ç»Ÿçš„æœ€ä½³ç‰¹æ€§ã€‚</li></ul></li><li><p>RowKey æ•£åˆ—åŸåˆ™</p><p>å¦‚æœ RowKey æ˜¯æŒ‰æ—¶é—´æˆ³çš„æ–¹å¼é€’å¢ï¼Œä¸è¦å°†æ—¶é—´æ”¾åœ¨äºŒè¿›åˆ¶ç çš„å‰é¢ï¼Œå»ºè®®å°† RowKey çš„é«˜ä½ä½œä¸ºæ•£åˆ—å­—æ®µï¼Œç”±ç¨‹åºå¾ªç¯ç”Ÿæˆï¼Œä½ä½æ”¾æ—¶é—´å­—æ®µï¼Œè¿™æ ·å°†æé«˜æ•°æ®å‡è¡¡åˆ†å¸ƒåœ¨æ¯ä¸ªRegionServer å®ç°è´Ÿè½½å‡è¡¡çš„å‡ ç‡ã€‚å¦‚æœæ²¡æœ‰æ•£åˆ—å­—æ®µï¼Œé¦–å­—æ®µç›´æ¥æ˜¯æ—¶é—´ä¿¡æ¯å°†äº§ç”Ÿæ‰€æœ‰æ–°æ•°æ®éƒ½åœ¨ä¸€ä¸ª RegionServer ä¸Šå †ç§¯çš„çƒ­ç‚¹ç°è±¡ï¼Œè¿™æ ·åœ¨åšæ•°æ®æ£€ç´¢çš„æ—¶å€™è´Ÿè½½å°†ä¼šé›†ä¸­åœ¨ä¸ªåˆ« RegionServerï¼Œé™ä½æŸ¥è¯¢æ•ˆç‡ã€‚</p></li><li><p>RowKeyå”¯ä¸€åŸåˆ™</p><p>å¿…é¡»åœ¨è®¾è®¡ä¸Šä¿è¯å…¶å”¯ä¸€æ€§ã€‚</p></li></ul><blockquote><h3 id="æè¿°-HBase-ä¸­-scan-å’Œ-get-çš„åŠŸèƒ½ä»¥åŠå®ç°çš„å¼‚åŒï¼Ÿ"><a href="#æè¿°-HBase-ä¸­-scan-å’Œ-get-çš„åŠŸèƒ½ä»¥åŠå®ç°çš„å¼‚åŒï¼Ÿ" class="headerlink" title="æè¿° HBase ä¸­ scan å’Œ get çš„åŠŸèƒ½ä»¥åŠå®ç°çš„å¼‚åŒï¼Ÿ"></a>æè¿° HBase ä¸­ <code>scan</code> å’Œ <code>get</code> çš„åŠŸèƒ½ä»¥åŠå®ç°çš„å¼‚åŒï¼Ÿ</h3></blockquote><p>HBase çš„æŸ¥è¯¢å®ç°åªæä¾›ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><p>æŒ‰æŒ‡å®š RowKey è·å–å”¯ä¸€ä¸€æ¡è®°å½•ï¼Œ<code>get</code> æ–¹æ³•ï¼ˆorg.apache.hadoop.HBase.client.Getï¼‰å¤„ç†åˆ†ä¸¤ç§ï¼šè®¾ç½®äº† <code>ClosestRowBefore</code> å’Œ æ²¡æœ‰è®¾ç½® <code>ClosestRowBefore</code> çš„ rowlockã€‚ä¸»è¦æ˜¯ç”¨æ¥ä¿è¯è¡Œçš„äº‹åŠ¡æ€§ï¼Œå³æ¯ä¸ª <code>get</code> æ˜¯ä»¥ä¸€ä¸ª row æ¥æ ‡è®°çš„ã€‚ä¸€ä¸ª row ä¸­å¯ä»¥æœ‰å¾ˆå¤š family å’Œcolumnã€‚</p></li><li><p>æŒ‰æŒ‡å®šçš„æ¡ä»¶è·å–ä¸€æ‰¹è®°å½•ï¼Œ<code>scan</code> æ–¹æ³•ï¼ˆorg.apache.Hadoop.HBase.client.Scanï¼‰å®ç°æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½ä½¿ç”¨çš„å°±æ˜¯ <code>scan</code> æ–¹å¼ã€‚</p><ul><li>scan å¯ä»¥é€šè¿‡ <code>setCaching</code> ä¸ <code>setBatch</code> æ–¹æ³•æé«˜é€Ÿåº¦ï¼ˆä»¥ç©ºé—´æ¢æ—¶é—´ï¼‰ï¼›</li><li>scan å¯ä»¥é€šè¿‡ <code>setStartRow</code> ä¸ <code>setEndRow</code> æ¥é™å®šèŒƒå›´ï¼ˆ<code>[startï¼Œend]</code>ï¼‰start æ˜¯é—­åŒºé—´ï¼Œend æ˜¯å¼€åŒºé—´ï¼‰ã€‚èŒƒå›´è¶Šå°ï¼Œæ€§èƒ½è¶Šé«˜ã€‚</li><li>scan å¯ä»¥é€šè¿‡ <code>setFilter</code> æ–¹æ³•æ·»åŠ è¿‡æ»¤å™¨ï¼Œè¿™ä¹Ÿæ˜¯åˆ†é¡µã€å¤šæ¡ä»¶æŸ¥è¯¢çš„åŸºç¡€ã€‚</li></ul></li></ul><blockquote><h3 id="è¯·æè¿°-HBase-ä¸­-scan-å¯¹è±¡çš„-setCache-å’Œ-setBatch-æ–¹æ³•çš„ä½¿ç”¨ï¼Ÿ"><a href="#è¯·æè¿°-HBase-ä¸­-scan-å¯¹è±¡çš„-setCache-å’Œ-setBatch-æ–¹æ³•çš„ä½¿ç”¨ï¼Ÿ" class="headerlink" title="è¯·æè¿° HBase ä¸­ scan å¯¹è±¡çš„ setCache å’Œ setBatch æ–¹æ³•çš„ä½¿ç”¨ï¼Ÿ"></a>è¯·æè¿° HBase ä¸­ scan å¯¹è±¡çš„ <code>setCache</code> å’Œ <code>setBatch</code> æ–¹æ³•çš„ä½¿ç”¨ï¼Ÿ</h3></blockquote><ul><li><p><code>setCache</code> ç”¨äºè®¾ç½®ç¼“å­˜ï¼Œå³è®¾ç½®ä¸€æ¬¡ RPC è¯·æ±‚å¯ä»¥è·å–å¤šè¡Œæ•°æ®ã€‚å¯¹äºç¼“å­˜æ“ä½œï¼Œå¦‚æœè¡Œçš„æ•°æ®é‡éå¸¸å¤§ï¼Œå¤šè¡Œæ•°æ®æœ‰å¯èƒ½è¶…è¿‡å®¢æˆ·ç«¯è¿›ç¨‹çš„å†…å­˜å®¹é‡ï¼Œç”±æ­¤å¼•å…¥æ‰¹é‡å¤„ç†è¿™ä¸€è§£å†³æ–¹æ¡ˆã€‚</p></li><li><p><code>setBatch</code> ç”¨äºè®¾ç½®æ‰¹é‡å¤„ç†ï¼Œæ‰¹é‡å¯ä»¥è®©ç”¨æˆ·é€‰æ‹©æ¯ä¸€æ¬¡ <code>ResultScanner</code> å®ä¾‹çš„ <code>next</code> æ“ä½œè¦å–å›å¤šå°‘åˆ—ï¼Œä¾‹å¦‚ï¼Œåœ¨æ‰«æä¸­è®¾ç½® <code>setBatch(5)</code>ï¼Œåˆ™ä¸€æ¬¡ <code>next()</code> è¿”å›çš„ Result å®ä¾‹ä¼šåŒ…æ‹¬ 5 åˆ—ã€‚å¦‚æœä¸€è¡ŒåŒ…æ‹¬çš„åˆ—æ•°è¶…è¿‡äº†æ‰¹é‡ä¸­è®¾ç½®çš„å€¼ï¼Œåˆ™å¯ä»¥å°†è¿™ä¸€è¡Œåˆ†ç‰‡ï¼Œæ¯æ¬¡ <code>next</code> æ“ä½œè¿”å›ä¸€ç‰‡ï¼Œå½“ä¸€è¡Œçš„åˆ—æ•°ä¸èƒ½è¢«æ‰¹é‡ä¸­ è®¾ç½®çš„å€¼æ•´é™¤æ—¶ï¼Œæœ€åä¸€æ¬¡è¿”å›çš„ Result å®ä¾‹ä¼šåŒ…å«æ¯”è¾ƒå°‘çš„åˆ—ï¼Œå¦‚ï¼Œä¸€è¡Œ 17 åˆ—ï¼Œbatch è®¾ç½®ä¸º 5ï¼Œåˆ™ä¸€å…±è¿”å› 4 ä¸ª Result å®ä¾‹ï¼Œè¿™ 4 ä¸ªå®ä¾‹ä¸­åŒ…æ‹¬çš„åˆ—æ•°åˆ†åˆ«ä¸º 5ã€5ã€5ã€2ã€‚</p></li></ul><p>ç»„åˆä½¿ç”¨æ‰«æå™¨ç¼“å­˜å’Œæ‰¹é‡å¤§å°ï¼Œå¯ä»¥è®©ç”¨æˆ·æ–¹ä¾¿åœ°æ§åˆ¶æ‰«æä¸€ä¸ªèŒƒå›´å†…çš„è¡Œé”®æ‰€éœ€è¦çš„ RPC è°ƒç”¨æ¬¡æ•°ã€‚Cache è®¾ç½®äº†æœåŠ¡å™¨ä¸€æ¬¡è¿”å›çš„è¡Œæ•°ï¼Œ è€Œ Batch è®¾ç½®äº†æœåŠ¡å™¨ä¸€æ¬¡è¿”å›çš„åˆ—æ•°ã€‚</p><p>å‡å¦‚æˆ‘ä»¬å»ºç«‹äº†ä¸€å¼ æœ‰ä¸¤ä¸ªåˆ—æ—çš„è¡¨ï¼Œæ·»åŠ äº† 10 è¡Œæ•°æ®ï¼Œæ¯ä¸ªè¡Œçš„æ¯ä¸ªåˆ—æ—ä¸‹æœ‰ 10 åˆ—ï¼Œè¿™æ„å‘³ç€æ•´ä¸ªè¡¨ä¸€å…±æœ‰ 200 åˆ—ï¼ˆæˆ–å•å…ƒæ ¼ï¼Œå› ä¸ºæ¯ä¸ªåˆ—åªæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼‰ï¼Œå…¶ä¸­æ¯è¡Œæœ‰ 20 åˆ—ã€‚</p><div class="table-container"><table><thead><tr><th>ç¼“å­˜</th><th>æ‰¹é‡å¤„ç†</th><th>Result ä¸ªæ•°</th><th>RPCæ¬¡æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>200</td><td>201</td><td>æ¯ä¸ªåˆ—éƒ½ä½œä¸ºä¸€ä¸ª Result å®ä¾‹è¿”å›ï¼Œ <br> æœ€åè¿˜å¤šä¸€ä¸ª RPC ç¡®è®¤æ‰«æå®Œæˆ</td></tr><tr><td>200</td><td>1</td><td>200</td><td>2</td><td>æ¯ä¸ª Result å®ä¾‹éƒ½åªåŒ…å«ä¸€åˆ—çš„å€¼ï¼Œ <br> ä¸è¿‡å®ƒä»¬éƒ½è¢«ä¸€æ¬¡ RPC è¯·æ±‚å–å›ï¼ˆåŠ ä¸€æ¬¡å®Œæˆæ£€æŸ¥ï¼‰</td></tr><tr><td>2</td><td>10</td><td>20</td><td>11</td><td>æ‰¹é‡å‚æ•°æ˜¯ä¸€è¡Œæ‰€åŒ…å«çš„åˆ—æ•°çš„ä¸€åŠï¼Œ <br> æ‰€ä»¥ 200 åˆ—é™¤ä»¥ 10ï¼Œéœ€è¦ 20 ä¸ª Result å®ä¾‹ã€‚ <br> åŒæ—¶éœ€è¦ 10 æ¬¡ RPC è¯·æ±‚å–å›ï¼ˆåŠ ä¸€æ¬¡å®Œæˆæ£€æŸ¥ï¼‰</td></tr><tr><td>5</td><td>100</td><td>10</td><td>3</td><td>å¯¹äºä¸€è¡Œæ¥è®²ï¼Œè¿™ä¸ªæ‰¹é‡å‚æ•°å¤ªå¤§äº†ï¼Œ <br> æ‰€ä»¥ä¸€è¡Œçš„ 20 åˆ—éƒ½è¢«æ”¾å…¥äº†ä¸€ä¸ª Result å®ä¾‹ä¸­ã€‚ <br> åŒæ—¶ç¼“å­˜ä¸º 5ï¼Œæ‰€ä»¥ 10 ä¸ª Result å®ä¾‹è¢«ä¸¤æ¬¡ RPC è¯·æ±‚å–å› <br> ï¼ˆåŠ ä¸€æ¬¡å®Œæˆæ£€æŸ¥ï¼‰</td></tr><tr><td>5</td><td>20</td><td>10</td><td>3</td><td>åŒä¸Šï¼Œä¸è¿‡è¿™æ¬¡çš„æ‰¹é‡å€¼ä¸ä¸€è¡Œçš„åˆ—æ•°æ­£å¥½ç›¸åŒï¼Œ <br> æ‰€ä»¥è¾“å‡ºä¸ä¸Šé¢ä¸€ç§æƒ…å†µç›¸åŒ</td></tr><tr><td>10</td><td>10</td><td>20</td><td>3</td><td>è¿™æ¬¡æŠŠè¡¨åˆ†æˆäº†è¾ƒå°çš„ Result å®ä¾‹ï¼Œ <br> ä½†ä½¿ç”¨äº†è¾ƒå¤§çš„ç¼“å­˜å€¼ï¼Œ <br> æ‰€ä»¥ä¹Ÿæ˜¯åªç”¨äº†ä¸¤æ¬¡ RPC è¯·æ±‚å°±å–å›äº†æ•°æ®</td></tr></tbody></table></div><ol><li><p>Batch å‚æ•°å†³å®šäº†ä¸€è¡Œæ•°æ®åˆ†ä¸ºå‡ ä¸ª Resultï¼Œå®ƒåªé’ˆå¯¹ä¸€è¡Œæ•°æ®ï¼ŒBatch å†å¤§ï¼Œä¹Ÿåªèƒ½å°†ä¸€è¡Œçš„æ•°æ®æ”¾å…¥ä¸€ä¸ª Result ä¸­ã€‚æ‰€ä»¥å½“ä¸€è¡Œæ•°æ®æœ‰ 10 åˆ—ï¼Œè€Œ Batch ä¸º 100 æ—¶ï¼Œä¹Ÿåªèƒ½å°†ä¸€è¡Œçš„æ‰€æœ‰åˆ—éƒ½æ”¾å…¥ä¸€ä¸ª Resultï¼Œä¸ä¼šæ··åˆå…¶ä»–è¡Œï¼›</p></li><li><p>ç¼“å­˜å€¼å†³å®šä¸€æ¬¡ RPC è¿”å›å‡ ä¸ª Resultï¼Œæ ¹æ® Batch åˆ’åˆ†çš„ Result ä¸ªæ•°é™¤ä»¥ç¼“å­˜ä¸ªæ•°å¯ä»¥å¾—åˆ° RPC æ¶ˆæ¯ä¸ªæ•°ï¼ˆä¹‹å‰å®šä¹‰ç¼“å­˜å€¼å†³å®šä¸€æ¬¡è¿”å›çš„è¡Œæ•°ï¼Œè¿™æ˜¯ä¸å‡†ç¡®çš„ï¼Œå‡†ç¡®æ¥è¯´æ˜¯å†³å®šä¸€æ¬¡ RPC è¿”å›çš„ Result ä¸ªæ•°ï¼Œç”±äºåœ¨å¼•å…¥ Batch ä¹‹å‰ï¼Œä¸€è¡Œå°è£…ä¸ºä¸€ä¸ª Resultï¼Œå› æ­¤å®šä¹‰ç¼“å­˜å€¼å†³å®šä¸€æ¬¡è¿”å›çš„è¡Œæ•°ï¼Œä½†å¼•å…¥ Batch åï¼Œæ›´å‡†ç¡®çš„è¯´æ³•æ˜¯ç¼“å­˜å€¼å†³å®šäº†ä¸€æ¬¡ RPC è¿”å›çš„ Result ä¸ªæ•°ï¼‰ï¼›</p><p> RPC è¯·æ±‚æ¬¡æ•° = (è¡Œæ•° * æ¯è¡Œåˆ—æ•°) / Min(æ¯è¡Œçš„åˆ—æ•°ï¼Œæ‰¹é‡å¤§å°) / æ‰«æå™¨ç¼“å­˜</p></li></ol><p>ä¸‹å›¾å±•ç¤ºäº†ç¼“å­˜å’Œæ‰¹é‡ä¸¤ä¸ªå‚æ•°å¦‚ä½•è”åŠ¨ï¼Œä¸‹å›¾ä¸­æœ‰ä¸€ä¸ªåŒ…å« 9 è¡Œæ•°æ®çš„è¡¨ï¼Œæ¯è¡Œéƒ½åŒ…å«ä¸€äº›åˆ—ã€‚ä½¿ç”¨äº†ä¸€ä¸ªç¼“å­˜ä¸º 6ï¼Œæ‰¹é‡å¤§å°ä¸º 3 çš„æ‰«æå™¨ï¼Œéœ€è¦ä¸‰æ¬¡ RPC è¯·æ±‚æ¥ä¼ é€æ•°æ®ï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/HBase_rpc.png" alt></p><blockquote><h3 id="è¯·è¯¦ç»†æè¿°-HBase-ä¸­ä¸€ä¸ª-cell-çš„ç»“æ„ï¼Ÿ"><a href="#è¯·è¯¦ç»†æè¿°-HBase-ä¸­ä¸€ä¸ª-cell-çš„ç»“æ„ï¼Ÿ" class="headerlink" title="è¯·è¯¦ç»†æè¿° HBase ä¸­ä¸€ä¸ª cell çš„ç»“æ„ï¼Ÿ"></a>è¯·è¯¦ç»†æè¿° HBase ä¸­ä¸€ä¸ª cell çš„ç»“æ„ï¼Ÿ</h3></blockquote><p>HBase ä¸­é€šè¿‡ row å’Œ columns ç¡®å®šçš„ä¸ºä¸€ä¸ªå­˜è´®å•å…ƒç§°ä¸º cellã€‚</p><p>Cellï¼šç”± <code>&#123;row key, column(= + ), version&#125;</code> å”¯ä¸€ç¡®å®šçš„å•å…ƒã€‚cell ä¸­çš„æ•°æ®æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œå…¨éƒ¨æ˜¯å­—èŠ‚ç å½¢å¼å­˜å‚¨ã€‚</p><blockquote><h3 id="ç®€è¿°-HBase-ä¸­-compact-ç”¨é€”æ˜¯ä»€ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Œåˆ†ä¸ºå“ªä¸¤ç§ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæœ‰å“ªäº›ç›¸å…³é…ç½®å‚æ•°ï¼Ÿ"><a href="#ç®€è¿°-HBase-ä¸­-compact-ç”¨é€”æ˜¯ä»€ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Œåˆ†ä¸ºå“ªä¸¤ç§ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæœ‰å“ªäº›ç›¸å…³é…ç½®å‚æ•°ï¼Ÿ" class="headerlink" title="ç®€è¿° HBase ä¸­ compact ç”¨é€”æ˜¯ä»€ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Œåˆ†ä¸ºå“ªä¸¤ç§ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæœ‰å“ªäº›ç›¸å…³é…ç½®å‚æ•°ï¼Ÿ"></a>ç®€è¿° HBase ä¸­ compact ç”¨é€”æ˜¯ä»€ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Œåˆ†ä¸ºå“ªä¸¤ç§ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæœ‰å“ªäº›ç›¸å…³é…ç½®å‚æ•°ï¼Ÿ</h3></blockquote><p>åœ¨ HBase ä¸­æ¯å½“æœ‰ MemStore æ•°æ® flush åˆ°ç£ç›˜ä¹‹åï¼Œå°±å½¢æˆä¸€ä¸ª StoreFileï¼Œå½“ StoreFile çš„æ•°é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦åï¼Œå°±éœ€è¦å°† StoreFile æ–‡ä»¶æ¥ è¿›è¡Œ compaction æ“ä½œã€‚</p><p>compact çš„ä½œç”¨ï¼š</p><ul><li>åˆå¹¶æ–‡ä»¶</li><li>æ¸…é™¤è¿‡æœŸï¼Œå¤šä½™ç‰ˆæœ¬çš„æ•°æ®</li><li>æé«˜è¯»å†™æ•°æ®çš„æ•ˆç‡</li></ul><p>HBase ä¸­å®ç°äº†ä¸¤ç§ compaction çš„æ–¹å¼ï¼šMinor å’Œ Majorï¼Œè¿™ä¸¤ç§ compaction æ–¹å¼çš„åŒºåˆ«æ˜¯ï¼š</p><ul><li>Minor æ“ä½œåªç”¨æ¥åšéƒ¨åˆ†æ–‡ä»¶çš„åˆå¹¶æ“ä½œä»¥åŠåŒ…æ‹¬ <code>minVersion=0</code> å¹¶ä¸”è®¾ç½® ttl çš„è¿‡æœŸç‰ˆæœ¬æ¸…ç†ï¼Œä¸åšä»»ä½•åˆ é™¤æ•°æ®ã€å¤šç‰ˆæœ¬æ•°æ®çš„æ¸…ç†å·¥ä½œã€‚</li><li>Major æ“ä½œæ˜¯å¯¹ Region ä¸‹çš„ HStore ä¸‹çš„æ‰€æœ‰ StoreFile æ‰§è¡Œåˆå¹¶æ“ä½œï¼Œæœ€ç»ˆçš„ç»“æœæ˜¯æ•´ç†åˆå¹¶å‡ºä¸€ä¸ªæ–‡ä»¶ã€‚</li></ul><blockquote><h3 id="æ¯å¤©ç™¾äº¿æ•°æ®å­˜å…¥-HBaseï¼Œå¦‚ä½•ä¿è¯æ•°æ®çš„å­˜å‚¨æ­£ç¡®å’Œåœ¨è§„å®šçš„æ—¶é—´é‡Œå…¨éƒ¨å½•å…¥å®Œæ¯•ï¼Œä¸æ®‹ç•™æ•°æ®ï¼Ÿ"><a href="#æ¯å¤©ç™¾äº¿æ•°æ®å­˜å…¥-HBaseï¼Œå¦‚ä½•ä¿è¯æ•°æ®çš„å­˜å‚¨æ­£ç¡®å’Œåœ¨è§„å®šçš„æ—¶é—´é‡Œå…¨éƒ¨å½•å…¥å®Œæ¯•ï¼Œä¸æ®‹ç•™æ•°æ®ï¼Ÿ" class="headerlink" title="æ¯å¤©ç™¾äº¿æ•°æ®å­˜å…¥ HBaseï¼Œå¦‚ä½•ä¿è¯æ•°æ®çš„å­˜å‚¨æ­£ç¡®å’Œåœ¨è§„å®šçš„æ—¶é—´é‡Œå…¨éƒ¨å½•å…¥å®Œæ¯•ï¼Œä¸æ®‹ç•™æ•°æ®ï¼Ÿ"></a>æ¯å¤©ç™¾äº¿æ•°æ®å­˜å…¥ HBaseï¼Œå¦‚ä½•ä¿è¯æ•°æ®çš„å­˜å‚¨æ­£ç¡®å’Œåœ¨è§„å®šçš„æ—¶é—´é‡Œå…¨éƒ¨å½•å…¥å®Œæ¯•ï¼Œä¸æ®‹ç•™æ•°æ®ï¼Ÿ</h3></blockquote><p>éœ€æ±‚åˆ†æï¼š</p><ul><li>ç™¾äº¿æ•°æ®ï¼šè¯æ˜æ•°æ®é‡éå¸¸å¤§ï¼›</li><li>å­˜å…¥ HBaseï¼šè¯æ˜æ˜¯è·Ÿ HBase çš„å†™å…¥æ•°æ®æœ‰å…³ï¼›</li><li>ä¿è¯æ•°æ®çš„æ­£ç¡®ï¼šè¦è®¾è®¡æ­£ç¡®çš„æ•°æ®ç»“æ„ä¿è¯æ­£ç¡®æ€§ï¼›</li><li>åœ¨è§„å®šæ—¶é—´å†…å®Œæˆï¼šå¯¹å­˜å…¥é€Ÿåº¦æ˜¯æœ‰è¦æ±‚çš„ã€‚</li></ul><p>è§£å†³æ€è·¯ï¼š</p><ul><li>æ•°æ®é‡ç™¾äº¿æ¡ï¼Œä»€ä¹ˆæ¦‚å¿µå‘¢ï¼Ÿå‡è®¾ä¸€æ•´å¤© 60x60x24 = 86400 ç§’éƒ½åœ¨å†™å…¥æ•°æ®ï¼Œé‚£ä¹ˆæ¯ç§’çš„å†™å…¥æ¡æ•°é«˜è¾¾ 100 ä¸‡æ¡ï¼ŒHBase å½“ç„¶æ˜¯æ”¯æŒä¸äº†æ¯ç§’ç™¾ä¸‡æ¡æ•°æ®çš„ï¼Œæ‰€ä»¥è¿™ç™¾äº¿æ¡æ•°æ®å¯èƒ½ä¸æ˜¯é€šè¿‡å®æ—¶åœ°å†™å…¥ï¼Œè€Œæ˜¯æ‰¹é‡åœ°å¯¼å…¥ã€‚æ‰¹é‡å¯¼å…¥æ¨èä½¿ç”¨ BulkLoad æ–¹å¼ï¼ˆæ¨èé˜…è¯»ï¼šSpark ä¹‹è¯»å†™ HBaseï¼‰ï¼Œæ€§èƒ½æ˜¯æ™®é€šå†™å…¥æ–¹å¼å‡ å€ä»¥ä¸Šï¼›</li><li>å­˜å…¥ HBaseï¼šæ™®é€šå†™å…¥æ˜¯ç”¨ JavaAPI put æ¥å®ç°ï¼Œæ‰¹é‡å¯¼å…¥æ¨èä½¿ç”¨ BulkLoadï¼›</li><li>ä¿è¯æ•°æ®çš„æ­£ç¡®ï¼šè¿™é‡Œéœ€è¦è€ƒè™‘ RowKey çš„è®¾è®¡ã€é¢„å»ºåˆ†åŒºå’Œåˆ—æ—è®¾è®¡ç­‰é—®é¢˜ï¼›</li><li>åœ¨è§„å®šæ—¶é—´å†…å®Œæˆä¹Ÿå°±æ˜¯å­˜å…¥é€Ÿåº¦ä¸èƒ½è¿‡æ…¢ï¼Œå¹¶ä¸”å½“ç„¶æ˜¯è¶Šå¿«è¶Šå¥½ï¼Œä½¿ç”¨ BulkLoadã€‚</li></ul><h3 id="gt-è¯·åˆ—ä¸¾å‡ ä¸ª-HBase-ä¼˜åŒ–æ–¹æ³•ï¼Ÿ"><a href="#gt-è¯·åˆ—ä¸¾å‡ ä¸ª-HBase-ä¼˜åŒ–æ–¹æ³•ï¼Ÿ" class="headerlink" title="&gt; è¯·åˆ—ä¸¾å‡ ä¸ª HBase ä¼˜åŒ–æ–¹æ³•ï¼Ÿ"></a>&gt; è¯·åˆ—ä¸¾å‡ ä¸ª HBase ä¼˜åŒ–æ–¹æ³•ï¼Ÿ</h3><ol><li><p>å‡å°‘è°ƒæ•´</p><p> å‡å°‘è°ƒæ•´è¿™ä¸ª`å¦‚ä½•ç†è§£å‘¢ï¼ŸHBase ä¸­æœ‰å‡ ä¸ªå†…å®¹ä¼šåŠ¨æ€è°ƒæ•´ï¼Œå¦‚ regionï¼ˆåˆ†åŒºï¼‰ã€HFileï¼Œæ‰€ä»¥é€šè¿‡ä¸€äº›æ–¹æ³•æ¥å‡å°‘è¿™äº›ä¼šå¸¦æ¥ I/O å¼€é”€çš„è°ƒæ•´ã€‚</p><ul><li>Regionï¼šå¦‚æœæ²¡æœ‰é¢„å»ºåˆ†åŒºçš„è¯ï¼Œé‚£ä¹ˆéšç€ region ä¸­æ¡æ•°çš„å¢åŠ ï¼Œregion ä¼šè¿›è¡Œåˆ†è£‚ï¼Œè¿™å°†å¢åŠ  I/O å¼€é”€ï¼Œæ‰€ä»¥è§£å†³æ–¹æ³•å°±æ˜¯æ ¹æ®ä½ çš„ RowKey è®¾è®¡æ¥è¿›è¡Œé¢„å»ºåˆ†åŒºï¼Œå‡å°‘regionçš„åŠ¨æ€åˆ†è£‚ã€‚</li><li>HFileï¼šHFile æ˜¯æ•°æ®åº•å±‚å­˜å‚¨æ–‡ä»¶ï¼Œåœ¨æ¯ä¸ª MemStore è¿›è¡Œåˆ·æ–°æ—¶ä¼šç”Ÿæˆä¸€ä¸ª HFileï¼Œå½“ HFile å¢åŠ åˆ°ä¸€å®šç¨‹åº¦æ—¶ï¼Œä¼šå°†å±äºä¸€ä¸ª region çš„ HFile è¿›è¡Œåˆå¹¶ï¼Œè¿™ä¸ªæ­¥éª¤ä¼šå¸¦æ¥å¼€é”€ä½†ä¸å¯é¿å…ï¼Œä½†æ˜¯åˆå¹¶å HFile å¤§å°å¦‚æœå¤§äºè®¾å®šçš„å€¼ï¼Œé‚£ä¹ˆ HFile ä¼šé‡æ–°åˆ†è£‚ã€‚ä¸ºäº†å‡å°‘è¿™æ ·çš„æ— è°“çš„ I/O å¼€é”€ï¼Œå»ºè®®ä¼°è®¡é¡¹ç›®æ•°æ®é‡å¤§å°ï¼Œç»™ HFile è®¾å®šä¸€ä¸ªåˆé€‚çš„å€¼ã€‚</li></ul></li><li><p>å‡å°‘å¯åœ</p><p> æ•°æ®åº“äº‹åŠ¡æœºåˆ¶å°±æ˜¯ä¸ºäº†æ›´å¥½åœ°å®ç°æ‰¹é‡å†™å…¥ï¼Œè¾ƒå°‘æ•°æ®åº“çš„å¼€å¯å…³é—­å¸¦æ¥çš„å¼€é”€ï¼Œé‚£ä¹ˆ HBase ä¸­ä¹Ÿå­˜åœ¨é¢‘ç¹å¼€å¯å…³é—­å¸¦æ¥çš„é—®é¢˜ã€‚</p><ul><li><p>å…³é—­ Compactionï¼Œåœ¨é—²æ—¶è¿›è¡Œæ‰‹åŠ¨ Compactionã€‚</p><p>å› ä¸º HBase ä¸­å­˜åœ¨ Minor Compaction å’Œ Major Compactionï¼Œä¹Ÿå°±æ˜¯å¯¹ HFile è¿›è¡Œåˆå¹¶ï¼Œæ‰€è°“åˆå¹¶å°±æ˜¯ I/O è¯»å†™ï¼Œå¤§é‡çš„ HFile è¿›è¡Œè‚¯å®šä¼šå¸¦æ¥ I/O å¼€é”€ï¼Œç”šè‡³æ˜¯ I/O é£æš´ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…è¿™ç§ä¸å—æ§åˆ¶çš„æ„å¤–å‘ç”Ÿï¼Œå»ºè®®å…³é—­è‡ªåŠ¨ Compactionï¼Œåœ¨é—²æ—¶è¿›è¡Œ Compactionã€‚</p></li><li><p>æ‰¹é‡æ•°æ®å†™å…¥æ—¶é‡‡ç”¨ BulkLoadã€‚</p><p>å¦‚æœé€šè¿‡ HBase-Shell æˆ–è€… JavaAPI çš„ put æ¥å®ç°å¤§é‡æ•°æ®çš„å†™å…¥ï¼Œé‚£ä¹ˆæ€§èƒ½å·®æ˜¯è‚¯å®šå¹¶ä¸”è¿˜å¯èƒ½å¸¦æ¥ä¸€äº›æ„æƒ³ä¸åˆ°çš„é—®é¢˜ï¼Œæ‰€ä»¥å½“éœ€è¦å†™å…¥å¤§é‡ç¦»çº¿æ•°æ®æ—¶å»ºè®®ä½¿ç”¨ BulkLoadã€‚</p></li></ul></li><li><p>å‡å°‘æ•°æ®é‡</p><p> è™½ç„¶æˆ‘ä»¬æ˜¯åœ¨è¿›è¡Œå¤§æ•°æ®å¼€å‘ï¼Œä½†æ˜¯å¦‚æœå¯ä»¥é€šè¿‡æŸäº›æ–¹å¼åœ¨ä¿è¯æ•°æ®å‡†ç¡®æ€§åŒæ—¶å‡å°‘æ•°æ®é‡ï¼Œä½•ä¹è€Œä¸ä¸ºå‘¢ï¼Ÿ</p><ul><li><p>å¼€å¯è¿‡æ»¤ï¼Œæé«˜æŸ¥è¯¢é€Ÿåº¦ï¼šå¼€å¯ BloomFilterï¼ŒBloomFilter æ˜¯åˆ—æ—çº§åˆ«çš„è¿‡æ»¤ï¼Œåœ¨ç”Ÿæˆä¸€ä¸ª StoreFile åŒæ—¶ä¼šç”Ÿæˆä¸€ä¸ª MetaBlockï¼Œç”¨äºæŸ¥è¯¢æ—¶è¿‡æ»¤æ•°æ®ã€‚</p></li><li><p>ä½¿ç”¨å‹ç¼©ï¼šä¸€èˆ¬æ¨èä½¿ç”¨ Snappy å’Œ LZO å‹ç¼©ã€‚</p></li></ul></li><li><p>åˆç†è®¾è®¡</p></li></ol><p>åœ¨ä¸€å¼  HBase è¡¨æ ¼ä¸­ RowKey å’Œ ColumnFamily çš„è®¾è®¡æ˜¯éå¸¸é‡è¦ï¼Œå¥½çš„è®¾è®¡èƒ½å¤Ÿæé«˜æ€§èƒ½å’Œä¿è¯æ•°æ®çš„å‡†ç¡®æ€§ã€‚</p><ul><li><p>RowKey è®¾è®¡ï¼šåº”è¯¥å…·å¤‡ä»¥ä¸‹å‡ ä¸ªå±æ€§</p><ul><li>æ•£åˆ—æ€§ï¼šæ•£åˆ—æ€§èƒ½å¤Ÿä¿è¯ç›¸åŒç›¸ä¼¼çš„ RowKey èšåˆï¼Œç›¸å¼‚çš„ RowKey åˆ†æ•£ï¼Œæœ‰åˆ©äºæŸ¥è¯¢ã€‚</li><li>ç®€çŸ­æ€§ï¼šRowKey ä½œä¸º key çš„ä¸€éƒ¨åˆ†å­˜å‚¨åœ¨ HFile ä¸­ï¼Œå¦‚æœä¸ºäº†å¯è¯»æ€§å°† RowKey è®¾è®¡å¾—è¿‡é•¿ï¼Œé‚£ä¹ˆå°†ä¼šå¢åŠ å­˜å‚¨å‹åŠ›ã€‚</li><li>å”¯ä¸€æ€§ï¼šRowKey å¿…é¡»å…·å¤‡æ˜æ˜¾çš„åŒºåˆ«æ€§ã€‚</li><li><p>ä¸šåŠ¡æ€§ï¼šä¸¾ä¾‹æ¥è¯´ï¼š  å‡å¦‚æˆ‘çš„æŸ¥è¯¢æ¡ä»¶æ¯”è¾ƒå¤šï¼Œè€Œä¸”ä¸æ˜¯é’ˆå¯¹åˆ—çš„æ¡ä»¶ï¼Œé‚£ä¹ˆ RowKey çš„è®¾è®¡å°±åº”è¯¥æ”¯æŒå¤šæ¡ä»¶æŸ¥è¯¢ã€‚</p><p>  å¦‚æœæˆ‘çš„æŸ¥è¯¢è¦æ±‚æ˜¯æœ€è¿‘æ’å…¥çš„æ•°æ®ä¼˜å…ˆï¼Œé‚£ä¹ˆ RowKey åˆ™å¯ä»¥é‡‡ç”¨åŠ ä¸Š <code>Long.Max-æ—¶é—´æˆ³</code> çš„æ–¹å¼ï¼Œè¿™æ · RowKey å°±æ˜¯é€’å‡æ’åˆ—ã€‚</p></li></ul></li><li><p>åˆ—æ—çš„è®¾è®¡ï¼šåˆ—æ—çš„è®¾è®¡éœ€è¦çœ‹åº”ç”¨åœºæ™¯</p><ul><li>ä¼˜åŠ¿ï¼šHBase ä¸­æ•°æ®æ—¶æŒ‰åˆ—è¿›è¡Œå­˜å‚¨çš„ï¼Œé‚£ä¹ˆæŸ¥è¯¢æŸä¸€åˆ—æ—çš„æŸä¸€åˆ—æ—¶å°±ä¸éœ€è¦å…¨ç›˜æ‰«æï¼Œåªéœ€è¦æ‰«ææŸä¸€åˆ—æ—ï¼Œå‡å°‘äº†è¯» I/Oï¼›å…¶å®å¤šåˆ—æ—è®¾è®¡å¯¹å‡å°‘çš„ä½œç”¨ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼Œé€‚ç”¨äºè¯»å¤šå†™å°‘çš„åœºæ™¯</li><li>åŠ£åŠ¿ï¼šé™ä½äº†å†™çš„ I/O æ€§èƒ½ã€‚åŸå› å¦‚ä¸‹ï¼šæ•°æ®å†™åˆ° store ä»¥åæ˜¯å…ˆç¼“å­˜åœ¨ MemStore ä¸­ï¼ŒåŒä¸€ä¸ª region ä¸­å­˜åœ¨å¤šä¸ªåˆ—æ—åˆ™å­˜åœ¨å¤šä¸ª storeï¼Œæ¯ä¸ª store éƒ½ä¸€ä¸ª MemStoreï¼Œå½“å…¶å® MemStore è¿›è¡Œ flush æ—¶ï¼Œå±äºåŒä¸€ä¸ª region çš„ store ä¸­çš„ MemStore éƒ½ä¼šè¿›è¡Œ flushï¼Œå¢åŠ  I/O å¼€é”€ã€‚</li></ul></li></ul><blockquote><h3 id="Region-å¦‚ä½•é¢„å»ºåˆ†åŒºï¼Ÿ"><a href="#Region-å¦‚ä½•é¢„å»ºåˆ†åŒºï¼Ÿ" class="headerlink" title="Region å¦‚ä½•é¢„å»ºåˆ†åŒºï¼Ÿ"></a>Region å¦‚ä½•é¢„å»ºåˆ†åŒºï¼Ÿ</h3></blockquote><p>é¢„åˆ†åŒºçš„ç›®çš„ä¸»è¦æ˜¯åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™æŒ‡å®šåˆ†åŒºæ•°ï¼Œæå‰è§„åˆ’è¡¨æœ‰å¤šä¸ªåˆ†åŒºï¼Œä»¥åŠæ¯ä¸ªåˆ†åŒºçš„åŒºé—´èŒƒå›´ï¼Œè¿™æ ·åœ¨å­˜å‚¨çš„æ—¶å€™ RowKey æŒ‰ç…§åˆ†åŒºçš„åŒºé—´å­˜å‚¨ï¼Œå¯ä»¥é¿å… region çƒ­ç‚¹é—®é¢˜ã€‚</p><p>é€šå¸¸æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š</p><ul><li><p>shell æ–¹æ³•</p><p><code>create &#39;tb_splits&#39;, &#123;NAME =&gt; &#39;cf&#39;,VERSIONS=&gt; 3&#125;,&#123;SPLITS =&gt; [&#39;10&#39;,&#39;20&#39;,&#39;30&#39;]&#125;</code></p></li><li><p>JAVA ç¨‹åºæ§åˆ¶</p><ol><li>å–æ ·ï¼Œå…ˆéšæœºç”Ÿæˆä¸€å®šæ•°é‡çš„ RowKeyï¼Œå°†å–æ ·æ•°æ®æŒ‰å‡åºæ’åºæ”¾åˆ°ä¸€ä¸ªé›†åˆé‡Œï¼›</li><li>æ ¹æ®é¢„åˆ†åŒºçš„ region ä¸ªæ•°ï¼Œå¯¹æ•´ä¸ªé›†åˆå¹³å‡åˆ†å‰²ï¼Œå³æ˜¯ç›¸å…³çš„ splitKeysï¼›</li><li><code>HBaseAdmin.createTable(HTableDescriptor tableDescriptor, byte[] splitKeys)</code> å¯ä»¥æŒ‡å®šé¢„åˆ†åŒºçš„ splitKeysï¼Œ å³æ˜¯æŒ‡å®š region é—´çš„ RowKey ä¸´ç•Œå€¼ã€‚</li></ol></li></ul><blockquote><h3 id="HRegionServer-å®•æœºå¦‚ä½•å¤„ç†ï¼Ÿ"><a href="#HRegionServer-å®•æœºå¦‚ä½•å¤„ç†ï¼Ÿ" class="headerlink" title="HRegionServer å®•æœºå¦‚ä½•å¤„ç†ï¼Ÿ"></a>HRegionServer å®•æœºå¦‚ä½•å¤„ç†ï¼Ÿ</h3></blockquote><ol><li>Zookeeper ä¼šç›‘æ§ HRegionServer çš„ä¸Šä¸‹çº¿æƒ…å†µï¼Œå½“ ZK å‘ç°æŸä¸ª HRegionServer å®•æœºä¹‹åä¼šé€šçŸ¥ HMaster è¿›è¡Œå¤±æ•ˆå¤‡æ´ï¼›</li><li>è¯¥ HRegionServer ä¼šåœæ­¢å¯¹å¤–æä¾›æœåŠ¡ï¼Œå°±æ˜¯å®ƒæ‰€è´Ÿè´£çš„ region æš‚æ—¶åœæ­¢å¯¹å¤–æä¾›æœåŠ¡ï¼›</li><li>HMaster ä¼šå°†è¯¥ HRegionServer æ‰€è´Ÿè´£çš„ region è½¬ç§»åˆ°å…¶ä»– HRegionServer ä¸Šï¼Œå¹¶ä¸”ä¼šå¯¹ HRegionServer ä¸Šå­˜åœ¨ MemStore ä¸­è¿˜æœªæŒä¹…åŒ–åˆ°ç£ç›˜ä¸­çš„æ•°æ®è¿›è¡Œæ¢å¤ï¼›</li><li>è¿™ä¸ªæ¢å¤çš„å·¥ä½œæ˜¯ç”± WAL é‡æ’­æ¥å®Œæˆï¼Œè¿™ä¸ªè¿‡ç¨‹å¦‚ä¸‹ï¼š<ol><li>wal å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå­˜åœ¨ <code>/HBase/WAL/</code> å¯¹åº” RegionServer è·¯å¾„ä¸‹ã€‚</li><li>å®•æœºå‘ç”Ÿæ—¶ï¼Œè¯»å–è¯¥ RegionServer æ‰€å¯¹åº”çš„è·¯å¾„ä¸‹çš„ wal æ–‡ä»¶ï¼Œç„¶åæ ¹æ®ä¸åŒçš„ region åˆ‡åˆ†æˆä¸åŒçš„ä¸´æ—¶æ–‡ä»¶ recover.editsã€‚</li><li>å½“ region è¢«åˆ†é…åˆ°æ–°çš„ RegionServer ä¸­ï¼ŒRegionServer è¯»å– region æ—¶ä¼šè¿›è¡Œæ˜¯å¦å­˜åœ¨ recover.editsï¼Œå¦‚æœæœ‰åˆ™è¿›è¡Œæ¢å¤ã€‚</li></ol></li></ol><blockquote><h3 id="HBaseè¯»å†™æµç¨‹ï¼Ÿ"><a href="#HBaseè¯»å†™æµç¨‹ï¼Ÿ" class="headerlink" title="HBaseè¯»å†™æµç¨‹ï¼Ÿ"></a>HBaseè¯»å†™æµç¨‹ï¼Ÿ</h3></blockquote><p><strong>è¯»ï¼š</strong></p><ol><li>HRegionServer ä¿å­˜ç€ Meta è¡¨ä»¥åŠè¡¨æ•°æ®ï¼Œè¦è®¿é—®è¡¨æ•°æ®ï¼Œé¦–å…ˆ Client å…ˆå»è®¿é—® Zookeeperï¼Œä» Zookeeper é‡Œé¢è·å– Meta è¡¨æ‰€åœ¨çš„ä½ç½®ä¿¡æ¯ï¼Œå³æ‰¾åˆ°è¿™ä¸ª Meta è¡¨åœ¨å“ªä¸ª HRegionServer ä¸Šä¿å­˜ç€ã€‚</li><li>æ¥ç€ Client é€šè¿‡åˆšæ‰è·å–åˆ°çš„ HRegionServer çš„ IP æ¥è®¿é—® Meta è¡¨æ‰€åœ¨çš„ HRegionServerï¼Œä»è€Œè¯»å–åˆ° Metaï¼Œè¿›è€Œè·å–åˆ° Meta è¡¨ä¸­å­˜æ”¾çš„å…ƒæ•°æ®ã€‚</li><li>Client é€šè¿‡å…ƒæ•°æ®ä¸­å­˜å‚¨çš„ä¿¡æ¯ï¼Œè®¿é—®å¯¹åº”çš„ HRegionServerï¼Œç„¶åæ‰«ææ‰€åœ¨ HRegionServer çš„ MemStore å’Œ StoreFile æ¥æŸ¥è¯¢æ•°æ®ã€‚</li><li>æœ€å HRegionServer æŠŠæŸ¥è¯¢åˆ°çš„æ•°æ®å“åº”ç»™ Clientã€‚</li></ol><p><strong>å†™ï¼š</strong></p><ol><li>Client å…ˆè®¿é—® Zookeeperï¼Œæ‰¾åˆ° Meta è¡¨ï¼Œå¹¶è·å– Meta è¡¨å…ƒæ•°æ®ã€‚</li><li>ç¡®å®šå½“å‰å°†è¦å†™å…¥çš„æ•°æ®æ‰€å¯¹åº”çš„ HRegion å’Œ HRegionServer æœåŠ¡å™¨ã€‚</li><li>Client å‘è¯¥ HRegionServer æœåŠ¡å™¨å‘èµ·å†™å…¥æ•°æ®è¯·æ±‚ï¼Œç„¶å HRegionServer æ”¶åˆ°è¯·æ±‚å¹¶å“åº”ã€‚</li><li>Client å…ˆæŠŠæ•°æ®å†™å…¥åˆ° HLogï¼Œä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚</li><li>ç„¶åå°†æ•°æ®å†™å…¥åˆ° MemStoreã€‚</li><li>å¦‚æœ HLog å’Œ MemStore å‡å†™å…¥æˆåŠŸï¼Œåˆ™è¿™æ¡æ•°æ®å†™å…¥æˆåŠŸã€‚</li><li>å¦‚æœ MemStore è¾¾åˆ°é˜ˆå€¼ï¼Œä¼šæŠŠ MemStore ä¸­çš„æ•°æ® flush åˆ° StoreFile ä¸­ã€‚</li><li>å½“ StoreFile è¶Šæ¥è¶Šå¤šï¼Œä¼šè§¦å‘ Compact åˆå¹¶æ“ä½œï¼ŒæŠŠè¿‡å¤šçš„ StoreFile åˆå¹¶æˆä¸€ä¸ªå¤§çš„ StoreFileã€‚</li><li>å½“ StoreFile è¶Šæ¥è¶Šå¤§ï¼ŒRegion ä¹Ÿä¼šè¶Šæ¥è¶Šå¤§ï¼Œè¾¾åˆ°é˜ˆå€¼åï¼Œä¼šè§¦å‘ Split æ“ä½œï¼Œå°† Region ä¸€åˆ†ä¸ºäºŒã€‚</li></ol><blockquote><h3 id="HBase-å†…éƒ¨æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#HBase-å†…éƒ¨æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="HBase å†…éƒ¨æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>HBase å†…éƒ¨æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</h3></blockquote><p>HBase æ˜¯ä¸€ä¸ªèƒ½é€‚åº”è”æœºä¸šåŠ¡çš„æ•°æ®åº“ç³»ç»Ÿã€‚</p><ul><li>ç‰©ç†å­˜å‚¨ï¼šHBase çš„æŒä¹…åŒ–æ•°æ®æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨ HDFS ä¸Šã€‚</li><li>å­˜å‚¨ç®¡ç†ï¼šä¸€ä¸ªè¡¨æ˜¯åˆ’åˆ†ä¸ºå¾ˆå¤š region çš„ï¼Œè¿™äº› region åˆ†å¸ƒå¼åœ°å­˜æ”¾åœ¨å¾ˆå¤š RegionServer ä¸Š Region å†…éƒ¨è¿˜å¯ä»¥åˆ’åˆ†ä¸º storeï¼Œstore å†…éƒ¨æœ‰ MemStore å’Œ StoreFileã€‚</li><li>ç‰ˆæœ¬ç®¡ç†ï¼šHBase ä¸­çš„æ•°æ®æ›´æ–°æœ¬è´¨ä¸Šæ˜¯ä¸æ–­è¿½åŠ æ–°çš„ç‰ˆæœ¬ï¼Œé€šè¿‡ compact æ“ä½œæ¥åšç‰ˆæœ¬é—´çš„æ–‡ä»¶åˆå¹¶ Region çš„ splitã€‚</li><li>é›†ç¾¤ç®¡ç†ï¼šZookeeper + HMaster + HRegionServerã€‚</li></ul><blockquote><h3 id="HBase-ä¸­çš„-MemStore-æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿ"><a href="#HBase-ä¸­çš„-MemStore-æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="HBase ä¸­çš„ MemStore æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿ"></a>HBase ä¸­çš„ MemStore æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„ï¼Ÿ</h3></blockquote><p>HBase ä¸ºäº†ä¿è¯éšæœºè¯»å–çš„æ€§èƒ½ï¼Œæ‰€ä»¥ HFile é‡Œé¢çš„ RowKey æ˜¯æœ‰åºçš„ã€‚å½“å®¢æˆ·ç«¯çš„è¯·æ±‚åœ¨åˆ°è¾¾ RegionServer ä¹‹åï¼Œä¸ºäº†ä¿è¯å†™å…¥ RowKey çš„æœ‰åºæ€§ï¼Œæ‰€ä»¥ä¸èƒ½å°†æ•°æ®ç«‹åˆ»å†™å…¥åˆ° HFile ä¸­ï¼Œè€Œæ˜¯å°†æ¯ä¸ªå˜æ›´æ“ä½œä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¹Ÿå°±æ˜¯ MemStore ä¸­ã€‚MemStore èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„æ”¯æŒæ“ä½œçš„éšæœºæ’å…¥ï¼Œå¹¶ä¿è¯æ‰€æœ‰çš„æ“ä½œåœ¨å†…å­˜ä¸­æ˜¯æœ‰åºçš„ã€‚å½“ MemStore è¾¾åˆ°ä¸€å®šçš„é‡ä¹‹åï¼Œä¼šå°† MemStore é‡Œé¢çš„æ•°æ® flush åˆ° HFile ä¸­ï¼Œè¿™æ ·èƒ½å……åˆ†åˆ©ç”¨ hadoop å†™å…¥å¤§æ–‡ä»¶çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œæé«˜å†™å…¥æ€§èƒ½ã€‚</p><p>ç”±äº MemStore æ˜¯å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœ RegionServer å› ä¸ºæŸç§åŸå› æ­»äº†ï¼Œä¼šå¯¼è‡´å†…å­˜ä¸­æ•°æ®ä¸¢å¤±ã€‚æ‰€æœ‰ä¸ºäº†ä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼ŒHBase å°†æ›´æ–°æ“ä½œåœ¨å†™å…¥ MemStore ä¹‹å‰ä¼šå†™å…¥åˆ°ä¸€ä¸ª write ahead log(WAL) ä¸­ã€‚WAL æ–‡ä»¶æ˜¯è¿½åŠ ã€é¡ºåºå†™å…¥çš„ï¼ŒWAL æ¯ä¸ª RegionServer åªæœ‰ä¸€ä¸ªï¼ŒåŒä¸€ä¸ª RegionServer ä¸Šæ‰€æœ‰ region å†™å…¥åŒä¸€ä¸ªçš„ WAL æ–‡ä»¶ã€‚è¿™æ ·å½“æŸä¸ª RegionServer å¤±è´¥æ—¶ï¼Œå¯ä»¥é€šè¿‡ WAL æ–‡ä»¶ï¼Œå°†æ‰€æœ‰çš„æ“ä½œé¡ºåºé‡æ–°åŠ è½½åˆ° MemStore ä¸­ã€‚</p><blockquote><h3 id="HBase-åœ¨è¿›è¡Œæ¨¡å‹è®¾è®¡æ—¶é‡ç‚¹åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Ÿä¸€å¼ è¡¨ä¸­å®šä¹‰å¤šå°‘ä¸ª-Column-Family-æœ€åˆé€‚ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"><a href="#HBase-åœ¨è¿›è¡Œæ¨¡å‹è®¾è®¡æ—¶é‡ç‚¹åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Ÿä¸€å¼ è¡¨ä¸­å®šä¹‰å¤šå°‘ä¸ª-Column-Family-æœ€åˆé€‚ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="HBase åœ¨è¿›è¡Œæ¨¡å‹è®¾è®¡æ—¶é‡ç‚¹åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Ÿä¸€å¼ è¡¨ä¸­å®šä¹‰å¤šå°‘ä¸ª Column Family æœ€åˆé€‚ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"></a>HBase åœ¨è¿›è¡Œæ¨¡å‹è®¾è®¡æ—¶é‡ç‚¹åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Ÿä¸€å¼ è¡¨ä¸­å®šä¹‰å¤šå°‘ä¸ª Column Family æœ€åˆé€‚ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h3></blockquote><p>Column Family çš„ä¸ªæ•°å…·ä½“çœ‹è¡¨çš„æ•°æ®ï¼Œä¸€èˆ¬æ¥è¯´åˆ’åˆ†æ ‡å‡†æ˜¯æ ¹æ®æ•°æ®è®¿é—®é¢‘åº¦ï¼Œå¦‚ä¸€å¼ è¡¨é‡Œæœ‰äº›åˆ—è®¿é—®ç›¸å¯¹é¢‘ç¹ï¼Œè€Œå¦ä¸€äº›åˆ—è®¿é—®å¾ˆå°‘ï¼Œè¿™æ—¶å¯ä»¥æŠŠè¿™å¼ è¡¨åˆ’åˆ†æˆä¸¤ä¸ªåˆ—æ—ï¼Œåˆ†å¼€å­˜å‚¨ï¼Œæé«˜è®¿é—®æ•ˆç‡ã€‚</p><blockquote><h3 id="å¦‚ä½•æé«˜-HBase-å®¢æˆ·ç«¯çš„è¯»å†™æ€§èƒ½ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚"><a href="#å¦‚ä½•æé«˜-HBase-å®¢æˆ·ç«¯çš„è¯»å†™æ€§èƒ½ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚" class="headerlink" title="å¦‚ä½•æé«˜ HBase å®¢æˆ·ç«¯çš„è¯»å†™æ€§èƒ½ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚"></a>å¦‚ä½•æé«˜ HBase å®¢æˆ·ç«¯çš„è¯»å†™æ€§èƒ½ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚</h3></blockquote><ol><li>å¼€å¯ bloomfilter è¿‡æ»¤å™¨ï¼Œå¼€å¯ bloomfilter æ¯”æ²¡å¼€å¯è¦å¿« 3ã€4 å€ï¼›</li><li>HBase å¯¹äºå†…å­˜æœ‰ç‰¹åˆ«çš„éœ€æ±‚ï¼Œåœ¨ç¡¬ä»¶å…è®¸çš„æƒ…å†µä¸‹é…è¶³å¤Ÿå¤šçš„å†…å­˜ç»™å®ƒï¼›</li><li>é€šè¿‡ä¿®æ”¹ <code>hbase-env.sh</code> ä¸­çš„ <code>export HBASE_HEAPSIZE=3000</code>ï¼Œè¿™é‡Œé»˜è®¤ä¸º 1000mï¼›</li><li>å¢å¤§ RPC æ•°é‡ï¼Œé€šè¿‡ä¿®æ”¹ <code>hbase-site.xml</code> ä¸­çš„ <code>hbase.regionserver.handler.count</code>å±æ€§ï¼Œå¯ä»¥é€‚å½“çš„æ”¾å¤§ RPC æ•°é‡ï¼Œé»˜è®¤å€¼ä¸º 10 æœ‰ç‚¹å°ã€‚</li></ol><blockquote><h3 id="HBase-é›†ç¾¤å®‰è£…æ³¨æ„äº‹é¡¹ï¼Ÿ"><a href="#HBase-é›†ç¾¤å®‰è£…æ³¨æ„äº‹é¡¹ï¼Ÿ" class="headerlink" title="HBase é›†ç¾¤å®‰è£…æ³¨æ„äº‹é¡¹ï¼Ÿ"></a>HBase é›†ç¾¤å®‰è£…æ³¨æ„äº‹é¡¹ï¼Ÿ</h3></blockquote><ol><li>HBase éœ€è¦ HDFS çš„æ”¯æŒï¼Œå› æ­¤å®‰è£… HBase å‰ç¡®ä¿ Hadoop é›†ç¾¤å®‰è£…å®Œæˆï¼›</li><li>HBase éœ€è¦ Zookeeper é›†ç¾¤çš„æ”¯æŒï¼Œå› æ­¤å®‰è£… HBase å‰ç¡®ä¿ Zookeeper é›†ç¾¤å®‰è£…å®Œæˆï¼›</li><li>æ³¨æ„ HBase ä¸ Hadoop çš„ç‰ˆæœ¬å…¼å®¹æ€§ï¼›</li><li>æ³¨æ„ <code>hbase-env.sh</code> é…ç½®æ–‡ä»¶å’Œ <code>hbase-site.xml</code> é…ç½®æ–‡ä»¶çš„æ­£ç¡®é…ç½®ï¼›</li><li>æ³¨æ„ RegionServers é…ç½®æ–‡ä»¶çš„ä¿®æ”¹ï¼›</li><li>æ³¨æ„é›†ç¾¤ä¸­çš„å„ä¸ªèŠ‚ç‚¹çš„æ—¶é—´å¿…é¡»åŒæ­¥ï¼Œå¦åˆ™å¯åŠ¨ HBase é›†ç¾¤å°†ä¼šæŠ¥é”™ã€‚</li></ol><blockquote><h3 id="ç›´æ¥å°†æ—¶é—´æˆ³ä½œä¸ºè¡Œå¥ï¼Œåœ¨å†™å…¥å•ä¸ª-region-æ—¶å€™ä¼šå‘ç”Ÿçƒ­ç‚¹é—®é¢˜ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ"><a href="#ç›´æ¥å°†æ—¶é—´æˆ³ä½œä¸ºè¡Œå¥ï¼Œåœ¨å†™å…¥å•ä¸ª-region-æ—¶å€™ä¼šå‘ç”Ÿçƒ­ç‚¹é—®é¢˜ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ" class="headerlink" title="ç›´æ¥å°†æ—¶é—´æˆ³ä½œä¸ºè¡Œå¥ï¼Œåœ¨å†™å…¥å•ä¸ª region æ—¶å€™ä¼šå‘ç”Ÿçƒ­ç‚¹é—®é¢˜ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ"></a>ç›´æ¥å°†æ—¶é—´æˆ³ä½œä¸ºè¡Œå¥ï¼Œåœ¨å†™å…¥å•ä¸ª region æ—¶å€™ä¼šå‘ç”Ÿçƒ­ç‚¹é—®é¢˜ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</h3></blockquote><p>region ä¸­çš„ RowKey æ˜¯æœ‰åºå­˜å‚¨ï¼Œè‹¥æ—¶é—´æ¯”è¾ƒé›†ä¸­ã€‚å°±ä¼šå­˜å‚¨åˆ°ä¸€ä¸ª region ä¸­ï¼Œè¿™æ ·ä¸€ä¸ª region çš„æ•°æ®å˜å¤šï¼Œå…¶å®ƒçš„ region æ•°æ®å¾ˆå°‘ï¼ŒåŠ è½½æ•°æ®å°±ä¼šå¾ˆæ…¢ï¼Œç›´åˆ° region åˆ†è£‚ï¼Œæ­¤é—®é¢˜æ‰ä¼šå¾—åˆ°ç¼“è§£ã€‚</p><blockquote><h3 id="è¯·æè¿°å¦‚ä½•è§£å†³-HBase-ä¸­-region-å¤ªå°å’Œ-region-å¤ªå¤§å¸¦æ¥çš„å†²çªï¼Ÿ"><a href="#è¯·æè¿°å¦‚ä½•è§£å†³-HBase-ä¸­-region-å¤ªå°å’Œ-region-å¤ªå¤§å¸¦æ¥çš„å†²çªï¼Ÿ" class="headerlink" title="è¯·æè¿°å¦‚ä½•è§£å†³ HBase ä¸­ region å¤ªå°å’Œ region å¤ªå¤§å¸¦æ¥çš„å†²çªï¼Ÿ"></a>è¯·æè¿°å¦‚ä½•è§£å†³ HBase ä¸­ region å¤ªå°å’Œ region å¤ªå¤§å¸¦æ¥çš„å†²çªï¼Ÿ</h3></blockquote><p>Region è¿‡å¤§ä¼šå‘ç”Ÿå¤šæ¬¡ compactionï¼Œå°†æ•°æ®è¯»ä¸€éå¹¶é‡å†™ä¸€éåˆ° HDFS ä¸Šï¼Œå ç”¨ I/Oï¼Œregion è¿‡å°ä¼šé€ æˆå¤šæ¬¡ splitï¼Œregion ä¼šä¸‹çº¿ï¼Œå½±å“è®¿é—®æœåŠ¡ï¼Œæœ€ä½³çš„è§£å†³æ–¹æ³•æ˜¯è°ƒæ•´ <code>hbase.hregion.max.filesize</code> ä¸º 256mã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ—„ï¸HBase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo åšå®¢è®¿é—®ç»Ÿè®¡å›¾</title>
      <link href="post/ef1da941.html"/>
      <url>post/ef1da941.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ•™ç¨‹ä¸»è¦é’ˆå¯¹ Hexo åšå®¢ï¼Œå¯¹åšå®¢ç«™ç‚¹çš„çš„è®¿é—®åœ°å›¾ã€æ¯æœˆè®¿é—®é‡ã€è®¿é—®æ¥æºçš„ç»´åº¦ç»˜åˆ¶ç»Ÿè®¡å›¾ï¼Œä½¿ç”¨çš„æ˜¯ <a href="https://echarts.apache.org/examples/zh/index.html">ECharts</a> å¼€æºå¯è§†åŒ–åº“ã€‚å…·ä½“æ•ˆæœå¯ä»¥ç‚¹å‡»æœ¬ç«™çš„ <a href="/census/">å®éªŒå®¤--åšå®¢ç»Ÿè®¡</a> é¡µé¢æŸ¥çœ‹ã€‚</p><p><div class="note info simple"><p>æœ¬æ–‡æ•°æ®æ¥æºå‡ä¸ºç™¾åº¦ç»Ÿè®¡ï¼Œè¯·ç¡®ä¿åšå®¢ç«™ç‚¹å·²åŠ å…¥ç™¾åº¦ç»Ÿè®¡ï¼Œä»¥ butterfly ä¸»é¢˜ä¸ºä¾‹ï¼Œå¯å‚ç…§ <a href="https://butterfly.js.org/posts/ceeb73f/#%E5%88%86%E6%9E%90%E7%B5%B1%E8%A8%88">Butterfly å®‰è£…æ–‡æ¡£(å››) ä¸»é¢˜é…ç½®-2</a> çš„åˆ†æç»Ÿè®¡æ®µè½å®ç°ã€‚</p></div></p><p>å¦‚æœæƒ³ç»˜åˆ¶åšå®¢æ–‡ç« å‘å¸ƒç»Ÿè®¡å›¾çš„å¯ä»¥å‚è€ƒæ–‡ç« <a href="/posts/1213ef82.html">Hexo åšå®¢æ–‡ç« ç»Ÿè®¡å›¾</a></p><h1 id="æ–°å»º-census-é¡µé¢"><a href="#æ–°å»º-census-é¡µé¢" class="headerlink" title="æ–°å»º census é¡µé¢"></a>æ–°å»º census é¡µé¢</h1><p><div class="tabs" id="tab"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#tab-1">ä½¿ç”¨å‘½ä»¤åˆ›å»º</button></li><li class="tab"><button type="button" data-href="#tab-2">æ‰‹åŠ¨åˆ›å»º</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="tab-1"><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hexo new page census<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tab-2"><p>åœ¨ <code>[Blogroot]\source\</code> ç›®å½•ä¸‹æ–°å»º <code>census</code> æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨æ–°å»ºçš„ <code>census</code> æ–‡ä»¶å¤¹ä¸‹æ–°å»º <code>index.md</code> æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token hr punctuation">---</span>title: åšå®¢ç»Ÿè®¡<span class="token title important">date: 2020-03-01 08:00:00<span class="token punctuation">---</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></p><h1 id="å¼•å…¥-ECharts-js"><a href="#å¼•å…¥-ECharts-js" class="headerlink" title="å¼•å…¥ ECharts.js"></a>å¼•å…¥ ECharts.js</h1><p><div class="note info simple"><p>echarts.js å¿…é¡»åœ¨æ¸²æŸ“ echarts å®ä¾‹çš„ JavaScript å‰å¼•å…¥ã€‚</p></div></p><p><div class="tabs" id="tab"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#tab-1">å…¨å±€å¼•å…¥</button></li><li class="tab"><button type="button" data-href="#tab-2">é¡µé¢å¼•å…¥</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="tab-1"><p>ä»¥ butterfly ä¸»é¢˜ä¸ºä¾‹ï¼Œå¯ä»¥åœ¨ <code>[Blogroot]\_config.butterfly.yml</code> çš„ <code>inject</code> é…ç½®é¡¹ä¸­å¼•å…¥ <code>echart.js</code> æ–‡ä»¶ã€‚</p><p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">inject:  head:    - &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;echarts@4.7.0&#x2F;dist&#x2F;echarts.min.js&quot;&gt;&lt;&#x2F;script&gt;    - &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;echarts@4.7.0&#x2F;map&#x2F;js&#x2F;china.js&quot;&gt;&lt;&#x2F;script&gt; # ç»˜åˆ¶åœ°å›¾éœ€è¦å¦å¤–æ·»åŠ  china.js<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tab-2"><p>å¯ä»¥åœ¨ <code>index.md</code> æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/echarts@4.7.0/dist/echarts.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/echarts@4.7.0/map/js/china.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- ç»˜åˆ¶åœ°å›¾éœ€è¦å¦å¤–æ·»åŠ  china.js --></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></p><h1 id="åšå®¢è®¿é—®ç»Ÿè®¡"><a href="#åšå®¢è®¿é—®ç»Ÿè®¡" class="headerlink" title="åšå®¢è®¿é—®ç»Ÿè®¡"></a>åšå®¢è®¿é—®ç»Ÿè®¡</h1><h2 id="è·å–ç½‘ç«™ç»Ÿè®¡æ•°æ®"><a href="#è·å–ç½‘ç«™ç»Ÿè®¡æ•°æ®" class="headerlink" title="è·å–ç½‘ç«™ç»Ÿè®¡æ•°æ®"></a>è·å–ç½‘ç«™ç»Ÿè®¡æ•°æ®</h2><ol><li><p>å·²ç»æ·»åŠ ç™¾åº¦ç»Ÿè®¡åˆ†æçš„å°ä¼™ä¼´å¯ä»¥ç™»å½•<a href="https://tongji.baidu.com/web/welcome/login">ç™¾åº¦ç»Ÿè®¡</a>çš„å®˜ç½‘ç½‘ç«™ï¼Œæ­¤å¤„åšä¸»ä½¿ç”¨çš„æ˜¯ç™¾åº¦è´¦å·ç™»å½•ã€‚</p><p> <img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/hexo_census/login.png" alt></p></li><li><p>ç™»å½•è¿›å…¥é¦–é¡µåå¯ä»¥ç‚¹å‡»<strong>åŸºç¡€æŠ¥å‘Š</strong>æŸ¥çœ‹ç½‘ç«™è®¿é—®ç»Ÿè®¡æ•°æ®ï¼ˆè‹¥æ— ç»‘å®šç½‘ç«™ï¼Œéœ€è¦å…ˆåœ¨ <strong>ç®¡ç†</strong>é¡µé¢--<strong>è´¦æˆ·ç®¡ç†</strong>--<strong>ç½‘ç«™åˆ—è¡¨</strong> æ·»åŠ åšå®¢ç½‘å€ï¼‰ã€‚</p><p> <img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/hexo_census/index.png" alt></p></li><li><p>æ­¤æ—¶æˆ‘ä»¬æƒ³è¦è·å–è¿™äº›æ•°æ®å¯ä»¥è°ƒç”¨<strong>ç™¾åº¦ç»Ÿè®¡ API</strong>ï¼Œç‚¹å‡»<strong>ç®¡ç†</strong>ï¼Œè¿›å…¥ç®¡ç†é¡µé¢ååœ¨å·¦è¾¹ä¾§è¾¹æ æ‰¾åˆ°<strong>æ•°æ®å¯¼å‡ºæœåŠ¡</strong>ã€‚</p><p> <img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/hexo_census/data_export.png" alt></p></li><li><p>ç™»å½•<a href="http://developer.baidu.com/console#app/project">ç™¾åº¦å¼€å‘è€…ä¸­å¿ƒæ§åˆ¶å°</a>ï¼Œåˆ›å»ºå·¥ç¨‹ï¼Œåº”ç”¨åç§°ä»»æ„ã€‚</p><p> <img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/hexo_census/project.png" alt></p></li><li><p>ç‚¹å‡»åˆšåˆšåˆ›å»ºçš„å·¥ç¨‹ï¼Œè®°å½•ä¸‹ API Keyï¼ŒSecret Keyã€‚</p><p> <img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/hexo_census/project_info.png" alt></p></li><li><p>å¡«å†™ä¸‹é¢é“¾æ¥å‚æ•°åæ‰“å¼€é“¾æ¥è·å–æˆæƒç ï¼Œå…·ä½“æ­¥éª¤å¯ä»¥å‚è€ƒ <a href="https://tongji.baidu.com/api/manual/">Tongji APIç”¨æˆ·æ‰‹å†Œ</a>ã€‚</p><p> <code>http://openapi.baidu.com/oauth/2.0/authorize?response_type=code&amp;client_id=&#123;CLIENT_ID&#125;&amp;redirect_uri=&#123;REDIRECT_URI&#125;&amp;scope=basic&amp;display=popup</code></p><ul><li>API Keyï¼š{CLIENT_ID}</li><li><p>å›è°ƒ URIï¼š{REDIRECT_URI}ï¼Œå¯ä»¥å¡«å†™ <code>oob</code>ã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/hexo_census/auth_code.png" alt></p></li></ul></li><li><p>å¤åˆ¶ç¬¬ 6 æ­¥è·å–çš„æˆæƒç ï¼Œå¡«å†™ä¸‹é¢é“¾æ¥å‚æ•°åæ‰“å¼€é“¾æ¥è·å– <code>ACCESS_TOKEN</code> ï¼šã€‚</p><p> <code>http://openapi.baidu.com/oauth/2.0/token?grant_type=authorization_code&amp;code=&#123;CODE&#125;&amp;client_id=&#123;CLIENT_ID&#125;&amp;client_secret=&#123;CLIENT_SECRET&#125;&amp;redirect_uri=&#123;REDIRECT_URI&#125;</code></p><ul><li>Auth Codeï¼š{CODE}ï¼Œç¬¬ 6 æ­¥è·å–çš„æˆæƒç ã€‚</li><li>API Keyï¼š{CLIENT_ID}</li><li>Secret Keyï¼š{CLIENT_SECRET}</li><li><p>å›è°ƒ URIï¼š{REDIRECT_URI}ï¼Œå¯ä»¥å¡«å†™ <code>oob</code>ã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/hexo_census/access_token.png" alt></p></li></ul><p><strong>æ³¨æ„ï¼š</strong>ä»ä¸Šè¿°æ­¥éª¤å¾—åˆ°çš„æ•°æ®ä¸­åŒ…å« <code>ACCESS_TOKEN</code> å’Œ <code>REFRESH_TOKEN</code> ä¸¤ä¸ªå€¼ï¼Œå…¶ä¸­ <code>ACCESS_TOKEN</code> çš„æœ‰æ•ˆæœŸä¸ºä¸€ä¸ªæœˆï¼Œ<code>REFRESH_TOKEN</code> çš„æœ‰æ•ˆæœŸä¸ºåå¹´ã€‚<code>REFRESH_TOKEN</code> çš„ä½œç”¨å°±æ˜¯åˆ·æ–°è·å–æ–°çš„ <code>ACCESS_TOKEN</code> å’Œ <code>REFRESH_TOKEN</code> ï¼Œ å¦‚æ­¤åå¤æ“ä½œæ¥å®ç° <code>ACCESS_TOKEN</code> æœ‰æ•ˆæœŸæ°¸ä¹…çš„æœºåˆ¶ã€‚</p><p>ä¸€æ—¦ <code>ACCESS_TOKEN</code> è¿‡æœŸï¼Œå¯æ ¹æ®ä»¥ä¸‹è¯·æ±‚æ›´æ¢æ–°çš„ <code>ACCESS_TOKEN</code> å’Œ <code>REFRESH_TOKEN</code>ï¼š</p><p><code>http://openapi.baidu.com/oauth/2.0/token?grant_type=refresh_token&amp;refresh_token=&#123;REFRESH_TOKEN&#125;&amp;client_id=&#123;CLIENT_ID&#125;&amp;client_secret=&#123;CLIENT_SECRET&#125;</code></p><ul><li>API Keyï¼š{CLIENT_ID}</li><li>Secret Keyï¼š{CLIENT_SECRET}</li><li>Refresh Tokenï¼š{REFRESH_TOKEN}</li></ul></li><li><p>è°ƒç”¨ç™¾åº¦ç»Ÿè®¡API</p><p> ç¬¬ 7 æ­¥è·å–çš„ <code>ACCESS_TOKEN</code> æ˜¯æ‰€è°ƒç”¨ API çš„ç”¨æˆ·çº§å‚æ•°ï¼Œç»“åˆå„ API çš„åº”ç”¨çº§å‚æ•°å³å¯æ­£å¸¸è°ƒç”¨ API è·å–æ•°æ®ï¼Œå¡«å†™ä¸‹é¢é“¾æ¥å‚æ•°åæ‰“å¼€é“¾æ¥è·å–ç½‘ç«™ IDï¼š</p><p> <code>https://openapi.baidu.com/rest/2.0/tongji/config/getSiteList?access_token=&#123;ACCESS_TOKEN&#125;</code></p><ul><li><p>Access Tokenï¼š{ACCESS_TOKEN}</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/hexo_census/site_id.png" alt></p></li></ul><p>ä¹Ÿå¯ä»¥åœ¨ <a href="https://tongji.baidu.com/api/debug/#">Tongji APIè°ƒè¯•å·¥å…·</a> è¾“å…¥ <code>ACCESS_TOKEN</code> è·å–ç½‘å€ IDï¼š</p><p> <img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/hexo_census/site_id_debug.png" alt></p></li><li><p>åœ¨ <a href="https://tongji.baidu.com/api/debug/#">Tongji APIè°ƒè¯•å·¥å…·</a> é€‰æ‹©éœ€è¦è·å–çš„æŠ¥å‘Šæ•°æ®ï¼Œå¡«å†™ <code>ACCESS_TOKEN</code> ã€å¿…å¡«å‚æ•°ã€é€‰å¡«å‚æ•°è·å–ç™¾åº¦ç»Ÿè®¡æ•°æ®ã€‚</p></li></ol><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/hexo_census/site_data.png" alt></p><h2 id="ç½‘ç«™ç»Ÿè®¡ä»£ç "><a href="#ç½‘ç«™ç»Ÿè®¡ä»£ç " class="headerlink" title="ç½‘ç«™ç»Ÿè®¡ä»£ç "></a>ç½‘ç«™ç»Ÿè®¡ä»£ç </h2><p>ä»¥ butterfly ä¸»é¢˜ä¸ºä¾‹ï¼Œå¯ä»¥åœ¨ <code>[Blogroot]\themes\butterfly\scripts\helpers\</code> ç›®å½•ä¸‹æ–°å»º <code>census.js</code> æ–‡ä»¶ï¼Œç„¶åæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> cheerio <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cheerio'</span><span class="token punctuation">)</span><span class="token keyword">const</span> moment <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'moment'</span><span class="token punctuation">)</span><span class="token keyword">const</span> fetch <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node-fetch'</span><span class="token punctuation">)</span>hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'after_render:html'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">locals</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> $ <span class="token operator">=</span> cheerio<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>locals<span class="token punctuation">)</span>  <span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#sources-chart'</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> trend <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#trends-chart'</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#map-chart'</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> htmlEncode <span class="token operator">=</span> <span class="token boolean">false</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">||</span> trend<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">||</span> map<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#sourcesChart'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      source<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">sourcesChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>trend<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#trendsChart'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      trend<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">trendsChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#mapChart'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      map<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">mapChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>htmlEncode<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> $<span class="token punctuation">.</span><span class="token function">root</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;amp;#</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;#'</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> $<span class="token punctuation">.</span><span class="token function">root</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> locals  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token keyword">const</span> startDate <span class="token operator">=</span> <span class="token string">'20210101'</span> <span class="token comment">// å¼€å§‹æ—¥æœŸ</span><span class="token keyword">const</span> endDate <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYYMMDD'</span><span class="token punctuation">)</span> <span class="token comment">// ç»“æŸæ—¥æœŸ</span><span class="token keyword">const</span> accessToken <span class="token operator">=</span> <span class="token string">'121.c644d8c4*****'</span> <span class="token comment">// accessToken</span><span class="token keyword">const</span> siteId <span class="token operator">=</span> <span class="token string">'16****'</span> <span class="token comment">// ç½‘å€id</span><span class="token keyword">const</span> dataUrl <span class="token operator">=</span> <span class="token string">'https://openapi.baidu.com/rest/2.0/tongji/report/getData?access_token='</span> <span class="token operator">+</span> accessToken <span class="token operator">+</span> <span class="token string">'&amp;site_id='</span> <span class="token operator">+</span> siteId<span class="token punctuation">;</span><span class="token comment">// è®¿é—®æ¬¡æ•°ï¼ˆPVï¼‰æœˆä»½è¶‹åŠ¿</span><span class="token keyword">function</span> <span class="token function">trendsChart</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> paramUrl <span class="token operator">=</span> <span class="token string">'&amp;start_date='</span> <span class="token operator">+</span> startDate <span class="token operator">+</span> <span class="token string">'&amp;end_date='</span> <span class="token operator">+</span> endDate <span class="token operator">+</span> <span class="token string">'&amp;metrics=pv_count&amp;method=trend/time/a&amp;gran=month'</span>    <span class="token function">fetch</span><span class="token punctuation">(</span>dataUrl <span class="token operator">+</span> paramUrl<span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> data<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        <span class="token keyword">const</span> monthArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">const</span> monthValueArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">const</span> monthName <span class="token operator">=</span> data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        <span class="token keyword">const</span> monthValue <span class="token operator">=</span> data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>monthName<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          monthArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>monthName<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>monthValue<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'--'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            monthValueArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>monthValue<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>          <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            monthValueArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>          <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">const</span> monthArrJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>monthArr<span class="token punctuation">)</span>        <span class="token keyword">const</span> monthValueArrJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>monthValueArr<span class="token punctuation">)</span>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">          &lt;script id="trendsChart">            var trendsChart = echarts.init(document.getElementById('trends-chart'), 'light');            var trendsOption = &#123;              textStyle: &#123;                color: '#FFF'              &#125;,              title: &#123;                text: 'åšå®¢è®¿é—®é‡ç»Ÿè®¡å›¾',                x: 'center',                textStyle: &#123;                  color: '#FFF'                &#125;              &#125;,              tooltip: &#123;                trigger: 'axis'              &#125;,              xAxis: &#123;                name: 'æ—¥æœŸ',                type: 'category',                axisTick: &#123;                  show: false                &#125;,                axisLine: &#123;                  show: true,                  lineStyle: &#123;                    color: '#FFF'                  &#125;                &#125;,                data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>monthArrJson<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">              &#125;,              yAxis: &#123;                name: 'è®¿é—®æ¬¡æ•°',                type: 'value',                splitLine: &#123;                  show: false                &#125;,                axisTick: &#123;                  show: false                &#125;,                axisLine: &#123;                  show: true,                  lineStyle: &#123;                    color: '#FFF'                  &#125;                &#125;              &#125;,              series: [&#123;                name: 'è®¿é—®æ¬¡æ•°',                type: 'line',                smooth: true,                lineStyle: &#123;                    width: 0                &#125;,                showSymbol: false,                itemStyle: &#123;                  opacity: 1,                  color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;                    offset: 0,                    color: 'rgba(128, 255, 165)'                  &#125;,                  &#123;                    offset: 1,                    color: 'rgba(1, 191, 236)'                  &#125;])                &#125;,                areaStyle: &#123;                  opacity: 1,                  color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;                    offset: 0,                    color: 'rgba(128, 255, 165)'                  &#125;, &#123;                    offset: 1,                    color: 'rgba(1, 191, 236)'                  &#125;])                &#125;,                data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>monthValueArrJson<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,                markLine: &#123;                  data: [&#123;                    name: 'å¹³å‡å€¼',                    type: 'average'                  &#125;]                &#125;              &#125;]            &#125;;            trendsChart.setOption(trendsOption);            window.addEventListener("resize", () => &#123;               trendsChart.resize();            &#125;);          &lt;/script></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// è®¿é—®æ¬¡æ•°ï¼ˆPVï¼‰æ¥æº</span><span class="token keyword">function</span> <span class="token function">sourcesChart</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> paramUrl <span class="token operator">=</span> <span class="token string">'&amp;start_date='</span> <span class="token operator">+</span> startDate <span class="token operator">+</span> <span class="token string">'&amp;end_date='</span> <span class="token operator">+</span> endDate <span class="token operator">+</span> <span class="token string">'&amp;metrics=pv_count&amp;method=source/all/a'</span><span class="token punctuation">;</span>    <span class="token function">fetch</span><span class="token punctuation">(</span>dataUrl <span class="token operator">+</span> paramUrl<span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> data<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        monthArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> sourcesName <span class="token operator">=</span> data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        <span class="token keyword">let</span> sourcesValue <span class="token operator">=</span> data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">let</span> sourcesArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sourcesName<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          sourcesArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> sourcesName<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> value<span class="token operator">:</span> sourcesValue<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">const</span> sourcesArrJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>sourcesArr<span class="token punctuation">)</span>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">          &lt;script id="sourcesChart">            var sourcesChart = echarts.init(document.getElementById('sources-chart'), 'light');            var sourcesOption = &#123;              textStyle: &#123;                color: '#FFF'              &#125;,              title: &#123;                text: 'åšå®¢è®¿é—®æ¥æºç»Ÿè®¡å›¾',                x: 'center',                textStyle: &#123;                  color: '#FFF'                &#125;              &#125;,              legend: &#123;                top: 'bottom',                textStyle: &#123;                  color: '#FFF'                &#125;              &#125;,              tooltip: &#123;                trigger: 'item',                formatter: "&#123;a&#125; &lt;br/>&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)"              &#125;,              series: [&#123;                name: 'è®¿é—®æ¬¡æ•°',                type: 'pie',                radius: [30, 80],                center: ['50%', '50%'],                roseType: 'area',                label: &#123;                  formatter: "&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)"                &#125;,                data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>sourcesArrJson<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,                itemStyle: &#123;                  emphasis: &#123;                    shadowBlur: 10,                    shadowOffsetX: 0,                    shadowColor: 'rgba(255, 255, 255, 0.5)'                  &#125;                &#125;              &#125;]            &#125;;          sourcesChart.setOption(sourcesOption);          window.addEventListener("resize", () => &#123;             sourcesChart.resize();          &#125;);          &lt;/script></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">// è®¿é—®æ¬¡æ•°ï¼ˆPVï¼‰æ¥æº</span><span class="token keyword">function</span> <span class="token function">mapChart</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> paramUrl <span class="token operator">=</span> <span class="token string">'&amp;start_date='</span> <span class="token operator">+</span> startDate <span class="token operator">+</span> <span class="token string">'&amp;end_date='</span> <span class="token operator">+</span> endDate <span class="token operator">+</span> <span class="token string">'&amp;metrics=pv_count&amp;method=visit/district/a'</span><span class="token punctuation">;</span>    <span class="token function">fetch</span><span class="token punctuation">(</span>dataUrl <span class="token operator">+</span> paramUrl<span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> data<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>        monthArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> mapName <span class="token operator">=</span> data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        <span class="token keyword">let</span> mapValue <span class="token operator">=</span> data<span class="token punctuation">.</span>result<span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">let</span> mapArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">let</span> max <span class="token operator">=</span> mapValue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> mapName<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          mapArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> mapName<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> value<span class="token operator">:</span> mapValue<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">const</span> mapArrJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>mapArr<span class="token punctuation">)</span>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">          &lt;script id="mapChart">            var mapChart = echarts.init(document.getElementById('map-chart'), 'light');            var mapOption = &#123;              textStyle: &#123;                color: '#FFF'              &#125;,              title: &#123;                text: 'åšå®¢è®¿é—®æ¥æºåœ°å›¾',                x: 'center',                textStyle: &#123;                  color: '#FFF'                &#125;              &#125;,              tooltip: &#123;                trigger: 'item'              &#125;,              visualMap: &#123;                min: 0,                max: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>max<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,                left: 'left',                top: 'bottom',                text: ['é«˜','ä½'],                color: ['#1E90FF', '#AAFAFA'],                textStyle: &#123;                  color: '#FFF'                &#125;,                calculable: true              &#125;,              series: [&#123;                name: 'è®¿é—®æ¬¡æ•°',                type: 'map',                mapType: 'china',                showLegendSymbol: false,                label: &#123;                  emphasis: &#123;                    show: false                  &#125;                &#125;,                itemStyle: &#123;                  normal: &#123;                    areaColor: '#111',                    borderColor: '#20232a'                  &#125;,                  emphasis: &#123;                    areaColor: 'gold'                  &#125;                &#125;,                data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>mapArrJson<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">                &#125;]            &#125;;          mapChart.setOption(mapOption);          window.addEventListener("resize", () => &#123;             mapChart.resize();          &#125;);          &lt;/script></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä¸Šé¢æ˜¯åšä¸»è‡ªå·±ä¸‰ä¸ªç»Ÿè®¡å›¾çš„ä»£ç ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥ç”¨ä»¥å‚è€ƒï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚ç»˜åˆ¶ç™¾åº¦åˆ†æç»Ÿè®¡å›¾ã€‚</p><p>æ›´å¤šç»Ÿè®¡å›¾çš„è‡ªå®šä¹‰å±æ€§å¯ä»¥æŸ¥çœ‹ <a href="https://echarts.apache.org/zh/option.html#title">ECharts é…ç½®é¡¹æ–‡æ¡£</a>ï¼Œæ ¹æ®è‡ªè¡Œå–œå¥½å¯¹ ECharts ç»Ÿè®¡å›¾è¿›è¡Œä¿®æ”¹ã€‚</p><h1 id="ä½¿ç”¨ç»Ÿè®¡å›¾"><a href="#ä½¿ç”¨ç»Ÿè®¡å›¾" class="headerlink" title="ä½¿ç”¨ç»Ÿè®¡å›¾"></a>ä½¿ç”¨ç»Ÿè®¡å›¾</h1><p>åœ¨ä¸Šæ–‡æ–°å»ºçš„ <code>[Blogroot]\source\census\index.md</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token comment">&lt;!-- å„çœä»½è®¿é—®æ¥æºåœ°å›¾ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>map-chart<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> #20232a<span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- æ¯æœˆè®¿é—®é‡ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>trends-chart<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> #20232a<span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- è®¿é—®æ¥æº --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sources-chart<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> #20232a<span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“ç„¶ä¹Ÿå¯ä»¥åœ¨å…¶ä»–é¡µé¢å¼•å…¥åšå®¢è®¿é—®ç»Ÿè®¡å›¾ã€‚</p><h1 id="Hexo-ä¸‰è¿"><a href="#Hexo-ä¸‰è¿" class="headerlink" title="Hexo ä¸‰è¿"></a>Hexo ä¸‰è¿</h1><p>æ‰§è¡Œ Hexo ä¸‰è¿</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h1 id="å¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#å¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>å¯èƒ½é‡åˆ°çš„é—®é¢˜</h1><ul><li><p>æ§åˆ¶å°æŠ¥é”™ <code>Uncaught ReferenceError: require is not defined</code></p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>ä¸èƒ½ç›´æ¥åœ¨é¡µé¢å¼•ç”¨ <code>charts.js</code>ï¼Œæ˜¯æ”¾åœ¨ä¸»é¢˜æ–‡ä»¶å¤¹ <code>[Blogroot]\themes\butterfly\scripts\helpers\</code> é‡Œé¢ï¼Œ<code>hexo g</code> çš„æ—¶å€™ä¼šåœ¨ <code>div</code> åé¢è¿½åŠ  echarts å›¾çš„ jsã€‚é¡µé¢ä¸éœ€è¦å¼•å…¥ <code>charts.js</code>ã€‚</p></li><li><p>æ§åˆ¶å°æŠ¥é”™ <code>Uncaught ReferenceError: echarts is not defined</code>ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>éœ€è¦åœ¨ç»Ÿè®¡å›¾çš„å‰å¼•å…¥ <code>echarts.js</code> æ–‡ä»¶ï¼Œæœ€å¥½æ˜¯åœ¨é¡µé¢çš„å¤´éƒ¨å¼•å…¥ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ’¿Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo åšå®¢æ–‡ç« ç»Ÿè®¡å›¾</title>
      <link href="post/1213ef82.html"/>
      <url>post/1213ef82.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ•™ç¨‹ä¸»è¦é’ˆå¯¹ Hexo åšå®¢ï¼Œå¯¹åšå®¢çš„æ–‡ç« å‘å¸ƒæ—¶é—´ã€æ–‡ç« åˆ†ç±»ã€æ–‡ç« æ ‡ç­¾çš„ç»´åº¦ç»˜åˆ¶ç»Ÿè®¡å›¾ï¼Œä½¿ç”¨çš„æ˜¯ <a href="https://echarts.apache.org/examples/zh/index.html">ECharts</a> å¼€æºå¯è§†åŒ–åº“ã€‚å…·ä½“æ•ˆæœå¯ä»¥ç‚¹å‡»æœ¬ç«™çš„ <a href="/charts/">å®éªŒå®¤--æ–‡ç« ç»Ÿè®¡</a> é¡µé¢æŸ¥çœ‹ã€‚</p><p>å¦‚æœæƒ³ç»˜åˆ¶åšå®¢ç«™ç‚¹è®¿é—®ç»Ÿè®¡å›¾çš„å¯ä»¥å‚è€ƒæ–‡ç« <a href="/posts/1213ef82.html">Hexo åšå®¢è®¿é—®ç»Ÿè®¡å›¾</a></p><h1 id="æ–°å»º-charts-é¡µé¢"><a href="#æ–°å»º-charts-é¡µé¢" class="headerlink" title="æ–°å»º charts é¡µé¢"></a>æ–°å»º charts é¡µé¢</h1><p><div class="tabs" id="tab"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#tab-1">ä½¿ç”¨å‘½ä»¤åˆ›å»º</button></li><li class="tab"><button type="button" data-href="#tab-2">æ‰‹åŠ¨åˆ›å»º</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="tab-1"><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hexo new page charts<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tab-2"><p>åœ¨ <code>[Blogroot]\source\</code> ç›®å½•ä¸‹æ–°å»º <code>charts</code> æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨æ–°å»ºçš„ <code>charts</code> æ–‡ä»¶å¤¹ä¸‹æ–°å»º <code>index.md</code> æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token hr punctuation">---</span>title: æ–‡ç« ç»Ÿè®¡<span class="token title important">date: 2020-03-01 08:00:00<span class="token punctuation">---</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></p><h1 id="å¼•å…¥-ECharts-js"><a href="#å¼•å…¥-ECharts-js" class="headerlink" title="å¼•å…¥ ECharts.js"></a>å¼•å…¥ ECharts.js</h1><p><div class="note info simple"><p>echarts.js å¿…é¡»åœ¨æ¸²æŸ“ echarts å®ä¾‹çš„ JavaScript å‰å¼•å…¥ã€‚</p></div></p><p><div class="tabs" id="tab"><ul class="nav-tabs"><li class="tab"><button type="button" data-href="#tab-1">å…¨å±€å¼•å…¥</button></li><li class="tab"><button type="button" data-href="#tab-2">é¡µé¢å¼•å…¥</button></li></ul><div class="tab-contents"><div class="tab-item-content" id="tab-1"><p>ä»¥ butterfly ä¸»é¢˜ä¸ºä¾‹ï¼Œå¯ä»¥åœ¨ <code>[Blogroot]\_config.butterfly.yml</code> çš„ <code>inject</code> é…ç½®é¡¹ä¸­å¼•å…¥ <code>echart.js</code> æ–‡ä»¶ã€‚</p><p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">inject:  head:    - &lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;echarts@4.7.0&#x2F;dist&#x2F;echarts.min.js&quot;&gt;&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="tab-2"><p>å¯ä»¥åœ¨ <code>index.md</code> æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.jsdelivr.net/npm/echarts@4.7.0/dist/echarts.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></p><h1 id="æ–‡ç« ç»Ÿè®¡ä»£ç "><a href="#æ–‡ç« ç»Ÿè®¡ä»£ç " class="headerlink" title="æ–‡ç« ç»Ÿè®¡ä»£ç "></a>æ–‡ç« ç»Ÿè®¡ä»£ç </h1><p>ä»¥ butterfly ä¸»é¢˜ä¸ºä¾‹ï¼Œå¯ä»¥åœ¨ <code>[Blogroot]\themes\butterfly\scripts\helpers\</code> ç›®å½•ä¸‹æ–°å»º <code>charts.js</code> æ–‡ä»¶ï¼Œç„¶åæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> cheerio <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cheerio'</span><span class="token punctuation">)</span><span class="token keyword">const</span> moment <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'moment'</span><span class="token punctuation">)</span>hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'after_render:html'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">locals</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> $ <span class="token operator">=</span> cheerio<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>locals<span class="token punctuation">)</span>  <span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#posts-chart'</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> tag <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#tags-chart'</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> category <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#categories-chart'</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> htmlEncode <span class="token operator">=</span> <span class="token boolean">false</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">||</span> tag<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">||</span> category<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#postsChart'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'data-encode'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">)</span> htmlEncode <span class="token operator">=</span> <span class="token boolean">true</span>      post<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token function">postsChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>tag<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#tagsChart'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>tag<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'data-encode'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">)</span> htmlEncode <span class="token operator">=</span> <span class="token boolean">true</span>      tag<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token function">tagsChart</span><span class="token punctuation">(</span>tag<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'data-length'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>category<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#categoriesChart'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>category<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'data-encode'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'true'</span><span class="token punctuation">)</span> htmlEncode <span class="token operator">=</span> <span class="token boolean">true</span>      category<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token function">categoriesChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>htmlEncode<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> $<span class="token punctuation">.</span><span class="token function">root</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;amp;#</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;#'</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> $<span class="token punctuation">.</span><span class="token function">root</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> locals  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token keyword">function</span> <span class="token function">postsChart</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> startDate <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token string">'2021-01'</span><span class="token punctuation">)</span> <span class="token comment">// åšå®¢å»ºç«™æœˆä»½æˆ–è‡ªå®šä¹‰æ—¶é—´</span>  <span class="token comment">// const startDate = moment().subtract(1,'year').format('YYYY-MM'); // ä¸€å¹´å‰çš„ä»Šæ—¥ï¼Œç»Ÿè®¡è¿‘ä¸€å¹´çš„æ–‡ç« å‘å¸ƒ</span>  <span class="token keyword">const</span> endDate <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> monthMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> dayTime <span class="token operator">=</span> <span class="token number">3600</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">1000</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> time <span class="token operator">=</span> startDate<span class="token punctuation">;</span> time <span class="token operator">&lt;=</span> endDate<span class="token punctuation">;</span> time <span class="token operator">+=</span> dayTime<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> month <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM'</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>monthMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      monthMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>month<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span>  hexo<span class="token punctuation">.</span>locals<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'posts'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">const</span> month <span class="token operator">=</span> post<span class="token punctuation">.</span>date<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM'</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>monthMap<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      monthMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>month<span class="token punctuation">,</span> monthMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> monthArr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>monthMap<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> monthValueArr <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>monthMap<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">  &lt;script id="postsChart">    var postsChart = echarts.init(document.getElementById('posts-chart'), 'light');    var postsOption = &#123;      textStyle: &#123;        color: '#FFF'      &#125;,      title: &#123;        text: 'æ–‡ç« å‘å¸ƒç»Ÿè®¡å›¾',        x: 'center',        textStyle: &#123;          color: '#FFF'        &#125;      &#125;,      tooltip: &#123;        trigger: 'axis'      &#125;,      xAxis: &#123;        name: 'æ—¥æœŸ',        type: 'category',        axisTick: &#123;          show: false        &#125;,        axisLine: &#123;          show: true,          lineStyle: &#123;            color: '#FFF'          &#125;        &#125;,        data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>monthArr<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">      &#125;,      yAxis: &#123;        name: 'æ–‡ç« ç¯‡æ•°',        type: 'value',        splitLine: &#123;          show: false        &#125;,        axisTick: &#123;          show: false        &#125;,        axisLine: &#123;          show: true,          lineStyle: &#123;            color: '#FFF'          &#125;        &#125;      &#125;,      series: [&#123;        name: 'æ–‡ç« ç¯‡æ•°',        type: 'line',        smooth: true,        lineStyle: &#123;            width: 0        &#125;,        showSymbol: false,        itemStyle: &#123;          opacity: 1,          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;            offset: 0,            color: 'rgba(128, 255, 165)'          &#125;,          &#123;            offset: 1,            color: 'rgba(1, 191, 236)'          &#125;])        &#125;,        areaStyle: &#123;          opacity: 1,          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;            offset: 0,            color: 'rgba(128, 255, 165)'          &#125;, &#123;            offset: 1,            color: 'rgba(1, 191, 236)'          &#125;])        &#125;,        data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>monthValueArr<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,        markLine: &#123;          data: [&#123;            name: 'å¹³å‡å€¼',            type: 'average'          &#125;]        &#125;      &#125;]    &#125;;    postsChart.setOption(postsOption);    window.addEventListener("resize", () => &#123;       postsChart.resize();    &#125;);    &lt;/script></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">tagsChart</span> <span class="token punctuation">(</span><span class="token parameter">len</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> tagArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  hexo<span class="token punctuation">.</span>locals<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'tags'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    tagArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> tag<span class="token punctuation">.</span>name<span class="token punctuation">,</span> value<span class="token operator">:</span> tag<span class="token punctuation">.</span>length <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  tagArr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> b<span class="token punctuation">.</span>value <span class="token operator">-</span> a<span class="token punctuation">.</span>value <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> dataLength <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>tagArr<span class="token punctuation">.</span>length<span class="token punctuation">,</span> len<span class="token punctuation">)</span> <span class="token operator">||</span> tagArr<span class="token punctuation">.</span>length  <span class="token keyword">const</span> tagNameArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">const</span> tagCountArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> dataLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    tagNameArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tagArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>    tagCountArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tagArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span>  <span class="token keyword">const</span> tagNameArrJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>tagNameArr<span class="token punctuation">)</span>  <span class="token keyword">const</span> tagCountArrJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>tagCountArr<span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">  &lt;script id="tagsChart">    var tagsChart = echarts.init(document.getElementById('tags-chart'), 'light');    var tagsOption = &#123;      textStyle: &#123;        color: '#FFF'      &#125;,      title: &#123;        text: 'Top </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>dataLength<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string"> æ ‡ç­¾ç»Ÿè®¡å›¾',        x: 'center',        textStyle: &#123;          color: '#FFF'        &#125;      &#125;,      tooltip: &#123;&#125;,      xAxis: [&#123;        name: 'æ ‡ç­¾',        type: 'category',        axisTick: &#123;          show: false        &#125;,        axisLine: &#123;          show: true,          lineStyle: &#123;            color: '#FFF'          &#125;        &#125;,        data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>tagNameArrJson<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">      &#125;],      yAxis: [&#123;        name: 'æ–‡ç« ç¯‡æ•°',        type: 'value',        splitLine: &#123;          show: false        &#125;,        axisTick: &#123;          show: false        &#125;,        axisLine: &#123;          show: true,          lineStyle: &#123;            color: '#FFF'          &#125;        &#125;      &#125;],      series: [&#123;        name: 'æ–‡ç« ç¯‡æ•°',        type: 'bar',        data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>tagCountArrJson<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,        itemStyle: &#123;          opacity: 1,          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;            offset: 0,            color: 'rgba(128, 255, 165)'          &#125;,          &#123;            offset: 1,            color: 'rgba(1, 191, 236)'          &#125;])        &#125;,        emphasis: &#123;          itemStyle: &#123;            opacity: 1,            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;              offset: 0,              color: 'rgba(128, 255, 195)'            &#125;,            &#123;              offset: 1,              color: 'rgba(1, 211, 255)'            &#125;])          &#125;        &#125;,        markLine: &#123;          data: [&#123;            name: 'å¹³å‡å€¼',            type: 'average'          &#125;]        &#125;      &#125;]    &#125;;    tagsChart.setOption(tagsOption);    window.addEventListener("resize", () => &#123;       tagsChart.resize();    &#125;);    &lt;/script></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">&#125;</span><span class="token keyword">function</span> <span class="token function">categoriesChart</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token keyword">const</span> categoryArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  hexo<span class="token punctuation">.</span>locals<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'categories'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">category</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    categoryArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> name<span class="token operator">:</span> category<span class="token punctuation">.</span>name<span class="token punctuation">,</span> value<span class="token operator">:</span> category<span class="token punctuation">.</span>length <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>  categoryArr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> b<span class="token punctuation">.</span>value <span class="token operator">-</span> a<span class="token punctuation">.</span>value <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> categoryArrJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>categoryArr<span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">  &lt;script id="categoriesChart">    var categoriesChart = echarts.init(document.getElementById('categories-chart'), 'light');    var categoriesOption = &#123;      textStyle: &#123;        color: '#FFF'      &#125;,      title: &#123;        text: 'æ–‡ç« åˆ†ç±»ç»Ÿè®¡å›¾',        x: 'center',        textStyle: &#123;          color: '#FFF'        &#125;      &#125;,      legend: &#123;        top: 'bottom',        textStyle: &#123;          color: '#FFF'        &#125;      &#125;,      tooltip: &#123;        trigger: 'item',        formatter: "&#123;a&#125; &lt;br/>&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)"      &#125;,      series: [&#123;        name: 'æ–‡ç« ç¯‡æ•°',        type: 'pie',        radius: [30, 80],        center: ['50%', '50%'],        roseType: 'area',        label: &#123;          formatter: "&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)"        &#125;,        data: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>categoryArrJson<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,        itemStyle: &#123;          emphasis: &#123;            shadowBlur: 10,            shadowOffsetX: 0,            shadowColor: 'rgba(255, 255, 255, 0.5)'          &#125;        &#125;      &#125;]    &#125;;    categoriesChart.setOption(categoriesOption);    window.addEventListener("resize", () => &#123;       categoriesChart.resize();    &#125;);    &lt;/script></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ›´å¤šç»Ÿè®¡å›¾çš„è‡ªå®šä¹‰å±æ€§å¯ä»¥æŸ¥çœ‹ <a href="https://echarts.apache.org/zh/option.html#title">ECharts é…ç½®é¡¹æ–‡æ¡£</a>ï¼Œæ ¹æ®è‡ªè¡Œå–œå¥½å¯¹ ECharts ç»Ÿè®¡å›¾è¿›è¡Œä¿®æ”¹ã€‚</p><h1 id="ä½¿ç”¨ç»Ÿè®¡å›¾"><a href="#ä½¿ç”¨ç»Ÿè®¡å›¾" class="headerlink" title="ä½¿ç”¨ç»Ÿè®¡å›¾"></a>ä½¿ç”¨ç»Ÿè®¡å›¾</h1><p>åœ¨ä¸Šæ–‡æ–°å»ºçš„ <code>[Blogroot]\source\charts\index.md</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token comment">&lt;!-- æ–‡ç« å‘å¸ƒæ—¶é—´ç»Ÿè®¡å›¾ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>posts-chart<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> #20232a<span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- æ–‡ç« æ ‡ç­¾ç»Ÿè®¡å›¾ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tags-chart<span class="token punctuation">"</span></span> <span class="token attr-name">data-length</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> #20232a<span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- æ–‡ç« åˆ†ç±»ç»Ÿè®¡å›¾ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>categories-chart<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background-color</span><span class="token punctuation">:</span> #20232a<span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span> <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“ç„¶ä¹Ÿå¯ä»¥åœ¨å…¶ä»–é¡µé¢å¼•å…¥æ–‡ç« ç»Ÿè®¡å›¾ã€‚</p><p>å…¶ä¸­ <code>tags-chart</code> ä¸­ <code>data-length=&quot;10&quot;</code> å±æ€§è¡¨ç¤ºæ˜¾ç¤ºæ’åå‰ 10 çš„æ ‡ç­¾ã€‚</p><h1 id="Hexo-ä¸‰è¿"><a href="#Hexo-ä¸‰è¿" class="headerlink" title="Hexo ä¸‰è¿"></a>Hexo ä¸‰è¿</h1><p>æ‰§è¡Œ Hexo ä¸‰è¿</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h1 id="å¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#å¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>å¯èƒ½é‡åˆ°çš„é—®é¢˜</h1><ul><li><p>æ§åˆ¶å°æŠ¥é”™ <code>Uncaught ReferenceError: require is not defined</code></p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>ä¸èƒ½ç›´æ¥åœ¨é¡µé¢å¼•ç”¨ <code>charts.js</code>ï¼Œæ˜¯æ”¾åœ¨ä¸»é¢˜æ–‡ä»¶å¤¹ <code>[Blogroot]\themes\butterfly\scripts\helpers\</code> é‡Œé¢ï¼Œ<code>hexo g</code> çš„æ—¶å€™ä¼šåœ¨ <code>div</code> åé¢è¿½åŠ  echarts å›¾çš„ jsã€‚é¡µé¢ä¸éœ€è¦å¼•å…¥ <code>charts.js</code>ã€‚</p></li></ul><ul><li><p>æ§åˆ¶å°æŠ¥é”™ <code>Uncaught ReferenceError: echarts is not defined</code>ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><p>éœ€è¦åœ¨ç»Ÿè®¡å›¾çš„å‰å¼•å…¥ <code>echarts.js</code> æ–‡ä»¶ï¼Œæœ€å¥½æ˜¯åœ¨é¡µé¢çš„å¤´éƒ¨å¼•å…¥ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ’¿Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hive é¢è¯•é¢˜è§£æ</title>
      <link href="post/62c9bbde.html"/>
      <url>post/62c9bbde.html</url>
      
        <content type="html"><![CDATA[<h2 id="Hive-åŸºç¡€"><a href="#Hive-åŸºç¡€" class="headerlink" title="Hive åŸºç¡€"></a>Hive åŸºç¡€</h2><blockquote><h3 id="è¯·è°ˆä¸€ä¸‹-Hive-çš„ç‰¹ç‚¹ï¼ŒHive-å’Œ-RDBMS-æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ"><a href="#è¯·è°ˆä¸€ä¸‹-Hive-çš„ç‰¹ç‚¹ï¼ŒHive-å’Œ-RDBMS-æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ" class="headerlink" title="è¯·è°ˆä¸€ä¸‹ Hive çš„ç‰¹ç‚¹ï¼ŒHive å’Œ RDBMS æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ"></a>è¯·è°ˆä¸€ä¸‹ Hive çš„ç‰¹ç‚¹ï¼ŒHive å’Œ RDBMS æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ</h3></blockquote><p>Hive æ˜¯åŸºäº Hadoop çš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·ï¼Œå¯ä»¥å°†ç»“æ„åŒ–çš„æ•°æ®æ–‡ä»¶æ˜ å°„ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼Œå¹¶æä¾›å®Œæ•´çš„ SQL æŸ¥è¯¢åŠŸèƒ½ï¼Œå¯ä»¥å°† SQL è¯­å¥è½¬æ¢ä¸º MapReduce ä»»åŠ¡è¿›è¡Œè¿è¡Œã€‚å…¶ä¼˜ç‚¹æ˜¯å­¦ä¹ æˆæœ¬ä½ï¼Œå¯ä»¥é€šè¿‡ç±» SQL è¯­å¥å¿«é€Ÿå®ç°ç®€å•çš„ MapReduce ç»Ÿè®¡ï¼Œä¸å¿…å¼€å‘ä¸“é—¨çš„ MapReduce åº”ç”¨ï¼Œååˆ†é€‚åˆæ•°æ®ä»“åº“çš„ç»Ÿè®¡åˆ†æï¼Œä½†æ˜¯ Hive ä¸æ”¯æŒå®æ—¶æŸ¥è¯¢ã€‚</p><p>Hive ä¸å…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«ï¼š</p><div class="table-container"><table><thead><tr><th>æ¯”è¾ƒé¡¹</th><th>SQL</th><th>HiveQL</th></tr></thead><tbody><tr><td>ANSI SQL</td><td>æ”¯æŒ</td><td>ä¸å®Œå…¨æ”¯æŒ</td></tr><tr><td>æ›´æ–°</td><td>UPDATE\INSERT\DELETE</td><td>INSERT OVERWRITE\INTO TABLE</td></tr><tr><td>äº‹åŠ¡</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>æ¨¡å¼</td><td>å†™æ¨¡å¼</td><td>è¯»æ¨¡å¼</td></tr><tr><td>æ•°æ®ä¿å­˜</td><td>å—è®¾å¤‡ã€æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ</td><td>HDFS</td></tr><tr><td>å»¶æ—¶</td><td>ä½</td><td>é«˜</td></tr><tr><td>å¤šè¡¨æ’å…¥</td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td>å­æŸ¥è¯¢</td><td>å®Œå…¨æ”¯æŒ</td><td>åªèƒ½ç”¨åœ¨ From å­å¥ä¸­</td></tr><tr><td>è§†å›¾</td><td>Updatable</td><td>Read-only</td></tr><tr><td>å¯æ‰©å±•æ€§</td><td>ä½</td><td>é«˜</td></tr><tr><td>æ•°æ®è§„æ¨¡</td><td>å°</td><td>å¤§</td></tr><tr><td>...</td><td>......</td><td>......</td></tr></tbody></table></div><blockquote><h3 id="Hive-çš„æ¶æ„åŸç†ï¼Ÿ"><a href="#Hive-çš„æ¶æ„åŸç†ï¼Ÿ" class="headerlink" title="Hive çš„æ¶æ„åŸç†ï¼Ÿ"></a>Hive çš„æ¶æ„åŸç†ï¼Ÿ</h3></blockquote><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hive_architecture.png" alt></p><ol><li><p>ä¸¤ç§å®¢æˆ·ç«¯</p><ul><li>CLIï¼ˆcommand-line interfaceï¼‰ï¼šå‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼ˆå¯ä»¥åœ¨ shell ä¸­æ“ä½œï¼‰ï¼›</li><li>JDBC å®¢æˆ·ç«¯</li></ul></li><li><p>å››ç§é©±åŠ¨ Driver</p><ul><li>SQL Parser è§£æå™¨ï¼šæ£€æŸ¥ SQL è¯­æ³•æ˜¯å¦æœ‰é”™è¯¯ï¼›</li><li>Physical Plan ç¼–è¯‘å™¨ï¼šæŠŠ SQL è¯­å¥è½¬åŒ–æˆ MR ç¨‹åºï¼›</li><li>Query Optimizer ä¼˜åŒ–å™¨ï¼šä¼˜åŒ– SQL è¯­å¥ï¼›</li><li>Execution æ‰§è¡Œå™¨ï¼šæ‰§è¡Œ MR ç¨‹åºã€‚</li></ul></li><li><p>å…ƒæ•°æ®åº“ Meta store</p><ul><li>Meta store æ˜¯ Hive æ•°æ®åº“ä¸­çš„ä¸€ä¸ªåº“ï¼Œç”¨äºå­˜å‚¨å¤„ç†æ•°æ®çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬ï¼šè¡¨åã€è¡¨æ‰€å±çš„æ•°æ®åº“ï¼ˆé»˜è®¤æ˜¯ defaultï¼‰ã€è¡¨çš„æ‹¥æœ‰è€…ã€åˆ—/åˆ†åŒºå­—æ®µã€è¡¨çš„ç±»å‹ï¼ˆæ˜¯å¦æ˜¯å¤–éƒ¨è¡¨ï¼‰ã€è¡¨çš„æ•°æ®æ‰€åœ¨ç›®å½•ç­‰ã€‚</li><li>Meta store é»˜è®¤å­˜å‚¨åœ¨ Hive è‡ªå¸¦çš„ Derby æ•°æ®åº“ä¸­ï¼Œä½†å› ä¸º Hive çš„å…ƒæ•°æ®å¯èƒ½è¦é¢ä¸´ä¸æ–­åœ°æ›´æ–°ã€ä¿®æ”¹å’Œè¯»å–æ“ä½œï¼ŒDerby æ— æ³•å®ç°å¹¶å‘ï¼Œå®é™…å·¥ä½œä¸­ä¸€èˆ¬å°† Derby æ›¿æ¢ä¸º MySQLã€‚</li><li>Hive ä¸­å¤„ç†çš„æ•°æ®åˆ†ä¸¤éƒ¨åˆ†å­˜æ”¾ï¼š<ul><li>å¤„ç†çš„ç»“æ„åŒ–æ•°æ®ï¼Œå­˜å‚¨åœ¨ HDFS ä¸­ï¼›</li><li>è¡¨çš„å…ƒæ•°æ®å­˜å‚¨åœ¨å…ƒæ•°æ®åº“ MySQL ä¸­ã€‚</li></ul></li></ul></li></ol><p>è¿™æ ·ï¼Œæœ‰äº†è¡¨çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œå°±èƒ½æ‰¾åˆ°å¯¹åº”çš„å­—æ®µï¼›ç„¶åæŠŠå­—æ®µæ˜ å°„åˆ°ç»“æ„åŒ–æ•°æ®ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡æ˜ å°„å½¢æˆä¸€å¼ è™šè¡¨ï¼›</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¡¨çš„å…ƒæ•°æ®å’Œ MySQL ä¸­çš„ç»“æ„åŒ–æ•°æ®ï¼Œé€šè¿‡æ˜ å°„ï¼Œæ„æˆä¸€å¼ è™šè¡¨ï¼Œç”¨äº Hive æŸ¥è¯¢æ•°æ®åˆ†æã€‚</p><blockquote><h3 id="Hive-çš„å­˜å‚¨è¿‡ç¨‹ï¼š"><a href="#Hive-çš„å­˜å‚¨è¿‡ç¨‹ï¼š" class="headerlink" title="Hive çš„å­˜å‚¨è¿‡ç¨‹ï¼š"></a>Hive çš„å­˜å‚¨è¿‡ç¨‹ï¼š</h3></blockquote><p>å¯åŠ¨ Hive æ—¶ï¼Œä¼šåˆå§‹åŒ– Hiveï¼Œè¿™æ—¶ä¼šåœ¨ MySQL ä¸­ç”Ÿæˆå¤§çº¦ 36 å¼ è¡¨ï¼ˆåç»­éšç€ä¸šåŠ¡çš„å¤æ‚ä¼šå¢åŠ ï¼‰ï¼Œç„¶ååˆ›å»ºè¡¨ï¼Œä¼šåœ¨ MySQL ä¸­å­˜æ”¾è¿™ä¸ªè¡¨çš„ä¿¡æ¯ï¼ˆä¸æ˜¯ä»¥è¡¨çš„å½¢å¼å­˜åœ¨çš„ï¼Œè€Œæ˜¯æŠŠè¡¨çš„å±æ€§ä»¥æ•°æ®çš„å½¢å¼æ”¾åœ¨ MySQL ä¸­ï¼Œè¿™æ ·åœ¨ Hive ä¸­ä½¿ç”¨ SQL å‘½ä»¤ä¸€æ ·æ˜¯èƒ½å¤ŸæŸ¥åˆ°è¿™å¼ è¡¨çš„ï¼‰ã€‚ç„¶åæŠŠæœ¬åœ°çš„æ–‡æœ¬æ–‡ä»¶ä½¿ç”¨ Hive å‘½ä»¤æ ¼å¼åŒ–å¯¼å…¥åˆ°è¡¨ä¸­ï¼Œè¿™æ ·è¿™äº›æ•°æ®å°±å­˜æ”¾åˆ° HDFS ä¸­ï¼Œè€Œä¸æ˜¯åœ¨ MySQL æˆ– Hive ä¸­ã€‚</p><blockquote><h3 id="Hive-æœ‰å“ªäº›æ–¹å¼ä¿å­˜å…ƒæ•°æ®ï¼Œå„æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ"><a href="#Hive-æœ‰å“ªäº›æ–¹å¼ä¿å­˜å…ƒæ•°æ®ï¼Œå„æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="Hive æœ‰å“ªäº›æ–¹å¼ä¿å­˜å…ƒæ•°æ®ï¼Œå„æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ"></a>Hive æœ‰å“ªäº›æ–¹å¼ä¿å­˜å…ƒæ•°æ®ï¼Œå„æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ</h3></blockquote><p>Hive æ”¯æŒä¸‰ç§ä¸åŒçš„å…ƒå­˜å‚¨æœåŠ¡å™¨ï¼Œåˆ†åˆ«ä¸ºï¼šå†…åµŒå¼å…ƒå­˜å‚¨æœåŠ¡å™¨ã€æœ¬åœ°å…ƒå­˜å‚¨æœåŠ¡å™¨ã€è¿œç¨‹å…ƒå­˜å‚¨æœåŠ¡å™¨ï¼Œæ¯ç§å­˜å‚¨æ–¹å¼ä½¿ç”¨ä¸åŒçš„é…ç½®å‚æ•°ã€‚</p><ul><li>å†…åµŒå¼å…ƒå­˜å‚¨ä¸»è¦ç”¨äºå•å…ƒæµ‹è¯•ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹æ¯æ¬¡åªæœ‰ä¸€ä¸ªè¿›ç¨‹å¯ä»¥è¿æ¥åˆ°å…ƒå­˜å‚¨ï¼ŒDerby æ˜¯å†…åµŒå¼å…ƒå­˜å‚¨çš„é»˜è®¤æ•°æ®åº“ã€‚</li><li>åœ¨æœ¬åœ°æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ª Hive å®¢æˆ·ç«¯éƒ½ä¼šæ‰“å¼€åˆ°æ•°æ®å­˜å‚¨çš„è¿æ¥å¹¶åœ¨è¯¥è¿æ¥ä¸Šè¯·æ±‚ SQL æŸ¥è¯¢ã€‚</li><li>åœ¨è¿œç¨‹æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„ Hive å®¢æˆ·ç«¯éƒ½å°†æ‰“å¼€ä¸€ä¸ªåˆ°å…ƒæ•°æ®æœåŠ¡å™¨çš„è¿æ¥ï¼Œè¯¥æœåŠ¡å™¨ä¾æ¬¡æŸ¥è¯¢å…ƒæ•°æ®ï¼Œå…ƒæ•°æ®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ä½¿ç”¨ Thrift åè®®é€šä¿¡ã€‚</li></ul><blockquote><h3 id="Hive-å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„åŒºåˆ«ï¼Ÿ"><a href="#Hive-å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="Hive å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„åŒºåˆ«ï¼Ÿ"></a>Hive å†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨çš„åŒºåˆ«ï¼Ÿ</h3></blockquote><ul><li>åˆ›å»ºè¡¨æ—¶ï¼šåˆ›å»ºå†…éƒ¨è¡¨æ—¶ï¼Œä¼šå°†æ•°æ®ç§»åŠ¨åˆ°æ•°æ®ä»“åº“æŒ‡å‘çš„è·¯å¾„ï¼›è‹¥åˆ›å»ºå¤–éƒ¨è¡¨ï¼Œä»…è®°å½•æ•°æ®æ‰€åœ¨çš„è·¯å¾„ï¼Œä¸å¯¹æ•°æ®çš„ä½ç½®åšä»»ä½•æ”¹å˜ã€‚</li><li>åˆ é™¤è¡¨æ—¶ï¼šåœ¨åˆ é™¤è¡¨çš„æ—¶å€™ï¼Œå†…éƒ¨è¡¨çš„å…ƒæ•°æ®å’Œæ•°æ®ä¼šè¢«ä¸€èµ·åˆ é™¤ï¼Œè€Œå¤–éƒ¨è¡¨åªåˆ é™¤å…ƒæ•°æ®ï¼Œä¸åˆ é™¤æ•°æ®ã€‚è¿™æ ·å¤–éƒ¨è¡¨ç›¸å¯¹æ¥è¯´æ›´åŠ å®‰å…¨äº›ï¼Œæ•°æ®ç»„ç»‡ä¹Ÿæ›´åŠ çµæ´»ï¼Œæ–¹ä¾¿å…±äº«æºæ•°æ®ã€‚</li></ul><blockquote><h3 id="Hive-ä¸­çš„å‹ç¼©æ ¼å¼-TextFileã€SequenceFileã€RCFile-ã€ORCFile-å„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Hive-ä¸­çš„å‹ç¼©æ ¼å¼-TextFileã€SequenceFileã€RCFile-ã€ORCFile-å„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Hive ä¸­çš„å‹ç¼©æ ¼å¼ TextFileã€SequenceFileã€RCFile ã€ORCFile å„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Hive ä¸­çš„å‹ç¼©æ ¼å¼ TextFileã€SequenceFileã€RCFile ã€ORCFile å„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3></blockquote><ul><li><p>TextFile</p><p>é»˜è®¤æ ¼å¼ï¼Œå­˜å‚¨æ–¹å¼ä¸ºè¡Œå­˜å‚¨ï¼Œæ•°æ®ä¸åšå‹ç¼©ï¼Œç£ç›˜å¼€é”€å¤§ï¼Œæ•°æ®è§£æå¼€é”€å¤§ã€‚å¯ç»“åˆ Gzipã€Bzip2 ä½¿ç”¨ï¼ˆç³»ç»Ÿè‡ªåŠ¨æ£€æŸ¥ï¼Œæ‰§è¡ŒæŸ¥è¯¢æ—¶è‡ªåŠ¨è§£å‹ï¼‰ï¼Œä½†ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå‹ç¼©åçš„æ–‡ä»¶ä¸æ”¯æŒ splitï¼ŒHive ä¸ä¼šå¯¹æ•°æ®è¿›è¡Œåˆ‡åˆ†ï¼Œä»è€Œæ— æ³•å¯¹æ•°æ®è¿›è¡Œå¹¶è¡Œæ“ä½œã€‚å¹¶ä¸”åœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œå¿…é¡»é€ä¸ªå­—ç¬¦åˆ¤æ–­æ˜¯ä¸æ˜¯åˆ†éš”ç¬¦å’Œè¡Œç»“æŸç¬¦ï¼Œå› æ­¤ååºåˆ—åŒ–å¼€é”€ä¼šæ¯” SequenceFile é«˜å‡ åå€ã€‚</p></li><li><p>SequenceFile</p><p>SequenceFile æ˜¯ Hadoop API æä¾›çš„ä¸€ç§äºŒè¿›åˆ¶æ–‡ä»¶æ”¯æŒï¼Œå­˜å‚¨æ–¹å¼ä¸ºè¡Œå­˜å‚¨ï¼Œå…¶å…·æœ‰ä½¿ç”¨æ–¹ä¾¿ã€å¯åˆ†å‰²ã€å¯å‹ç¼©çš„ç‰¹ç‚¹ã€‚</p><p>SequenceFile æ”¯æŒä¸‰ç§å‹ç¼©é€‰æ‹©ï¼šNONEï¼ŒRECORDï¼ŒBLOCKã€‚Record å‹ç¼©ç‡ä½ï¼Œä¸€èˆ¬å»ºè®®ä½¿ç”¨ BLOCK å‹ç¼©ã€‚</p><p>ä¼˜åŠ¿æ˜¯æ–‡ä»¶å’Œ Hadoop API ä¸­çš„ MapFile æ˜¯ç›¸äº’å…¼å®¹çš„ã€‚</p></li><li><p>RCFile</p><p>å­˜å‚¨æ–¹å¼ï¼šæ•°æ®æŒ‰è¡Œåˆ†å—ï¼Œæ¯å—æŒ‰åˆ—å­˜å‚¨ã€‚ç»“åˆäº†è¡Œå­˜å‚¨å’Œåˆ—å­˜å‚¨çš„ä¼˜ç‚¹ï¼š</p><p>é¦–å…ˆï¼ŒRCFile ä¿è¯åŒä¸€è¡Œçš„æ•°æ®ä½äºåŒä¸€èŠ‚ç‚¹ï¼Œå› æ­¤å…ƒç»„é‡æ„çš„å¼€é”€å¾ˆä½ï¼›</p><p>å…¶æ¬¡ï¼Œåƒåˆ—å­˜å‚¨ä¸€æ ·ï¼ŒRCFile èƒ½å¤Ÿåˆ©ç”¨åˆ—ç»´åº¦çš„æ•°æ®å‹ç¼©ï¼Œå¹¶ä¸”èƒ½è·³è¿‡ä¸å¿…è¦çš„åˆ—è¯»å–ï¼›</p></li><li><p>ORCFile</p><p>å­˜å‚¨æ–¹å¼ï¼šæ•°æ®æŒ‰è¡Œåˆ†å— æ¯å—æŒ‰ç…§åˆ—å­˜å‚¨ã€‚</p><p>å‹ç¼©å¿«ã€å¿«é€Ÿåˆ—å­˜å–ã€‚</p><p>æ•ˆç‡æ¯” RCFile é«˜ï¼Œæ˜¯ RCFile çš„æ”¹è‰¯ç‰ˆæœ¬ã€‚</p></li></ul><p><strong>æ€»ç»“ï¼š</strong>ç›¸æ¯” TextFile å’Œ SequenceFileï¼ŒRCFile ç”±äºåˆ—å¼å­˜å‚¨æ–¹å¼ï¼Œæ•°æ®åŠ è½½æ—¶æ€§èƒ½æ¶ˆè€—è¾ƒå¤§ï¼Œä½†æ˜¯å…·æœ‰è¾ƒå¥½çš„å‹ç¼©æ¯”å’ŒæŸ¥è¯¢å“åº”ã€‚æ•°æ®ä»“åº“çš„ç‰¹ç‚¹æ˜¯ä¸€æ¬¡å†™å…¥ã€å¤šæ¬¡è¯»å–ï¼Œå› æ­¤ï¼Œæ•´ä½“æ¥çœ‹ï¼ŒRCFile ç›¸æ¯”å…¶ä½™ä¸¤ç§æ ¼å¼å…·æœ‰è¾ƒæ˜æ˜¾çš„ä¼˜åŠ¿ã€‚</p><blockquote><h3 id="è¯´è¯´å¯¹-Hive-æ¡¶è¡¨çš„ç†è§£ï¼Ÿ"><a href="#è¯´è¯´å¯¹-Hive-æ¡¶è¡¨çš„ç†è§£ï¼Ÿ" class="headerlink" title="è¯´è¯´å¯¹ Hive æ¡¶è¡¨çš„ç†è§£ï¼Ÿ"></a>è¯´è¯´å¯¹ Hive æ¡¶è¡¨çš„ç†è§£ï¼Ÿ</h3></blockquote><p>æ¡¶è¡¨æ˜¯å¯¹æ•°æ®è¿›è¡Œå“ˆå¸Œå–å€¼ï¼Œç„¶åæ”¾åˆ°ä¸åŒæ–‡ä»¶ä¸­å­˜å‚¨ã€‚</p><p>æ•°æ®åŠ è½½åˆ°æ¡¶è¡¨æ—¶ï¼Œä¼šå¯¹å­—æ®µå– hash å€¼ï¼Œç„¶åä¸æ¡¶çš„æ•°é‡å–æ¨¡ã€‚æŠŠæ•°æ®æ”¾åˆ°å¯¹åº”çš„æ–‡ä»¶ä¸­ã€‚ç‰©ç†ä¸Šï¼Œæ¯ä¸ªæ¡¶å°±æ˜¯è¡¨ï¼ˆæˆ–åˆ†åŒºï¼‰ç›®å½•é‡Œçš„ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªä½œä¸šäº§ç”Ÿçš„æ¡¶ï¼ˆè¾“å‡ºæ–‡ä»¶ï¼‰å’Œ reduce ä»»åŠ¡ä¸ªæ•°ç›¸åŒã€‚</p><p>æ¡¶è¡¨ä¸“é—¨ç”¨äºæŠ½æ ·æŸ¥è¯¢ï¼Œæ˜¯å¾ˆä¸“ä¸šæ€§çš„ï¼Œä¸æ˜¯æ—¥å¸¸ç”¨æ¥å­˜å‚¨æ•°æ®çš„è¡¨ï¼Œéœ€è¦æŠ½æ ·æŸ¥è¯¢æ—¶ï¼Œæ‰åˆ›å»ºå’Œä½¿ç”¨æ¡¶è¡¨ã€‚</p><blockquote><h3 id="Hive-çš„-HiveSQL-è½¬æ¢ä¸º-MapReduce-çš„è¿‡ç¨‹ï¼Ÿ"><a href="#Hive-çš„-HiveSQL-è½¬æ¢ä¸º-MapReduce-çš„è¿‡ç¨‹ï¼Ÿ" class="headerlink" title="Hive çš„ HiveSQL è½¬æ¢ä¸º MapReduce çš„è¿‡ç¨‹ï¼Ÿ"></a>Hive çš„ HiveSQL è½¬æ¢ä¸º MapReduce çš„è¿‡ç¨‹ï¼Ÿ</h3></blockquote><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hive_sqlparsemr.png" alt></p><ol><li>SQL Parserï¼šAntlr å®šä¹‰ SQL çš„è¯­æ³•è§„åˆ™ï¼Œå®Œæˆ SQL è¯æ³•ï¼Œè¯­æ³•è§£æï¼Œå°† SQL è½¬åŒ–ä¸ºæŠ½è±¡è¯­æ³•æ ‘ AST Treeï¼›</li><li>Semantic Analyzerï¼šéå† AST Treeï¼ŒæŠ½è±¡å‡ºæŸ¥è¯¢çš„åŸºæœ¬ç»„æˆå•å…ƒ QueryBlockï¼›</li><li>Logical planï¼šéå† QueryBlockï¼Œç¿»è¯‘ä¸ºæ‰§è¡Œæ“ä½œæ ‘ OperatorTreeï¼›</li><li>Logical plan optimizer: é€»è¾‘å±‚ä¼˜åŒ–å™¨è¿›è¡Œ OperatorTree å˜æ¢ï¼Œåˆå¹¶ä¸å¿…è¦çš„ ReduceSinkOperatorï¼Œå‡å°‘ shuffle æ•°æ®é‡ï¼›</li><li>Physical planï¼šéå† OperatorTreeï¼Œç¿»è¯‘ä¸º MapReduce ä»»åŠ¡ï¼›</li><li>Logical plan optimizerï¼šç‰©ç†å±‚ä¼˜åŒ–å™¨è¿›è¡Œ MapReduce ä»»åŠ¡çš„å˜æ¢ï¼Œç”Ÿæˆæœ€ç»ˆçš„æ‰§è¡Œè®¡åˆ’ã€‚</li></ol><blockquote><h3 id="æ‰€æœ‰çš„-Hive-ä»»åŠ¡éƒ½ä¼šæœ‰-MapReduce-çš„æ‰§è¡Œå—ï¼Ÿ"><a href="#æ‰€æœ‰çš„-Hive-ä»»åŠ¡éƒ½ä¼šæœ‰-MapReduce-çš„æ‰§è¡Œå—ï¼Ÿ" class="headerlink" title="æ‰€æœ‰çš„ Hive ä»»åŠ¡éƒ½ä¼šæœ‰ MapReduce çš„æ‰§è¡Œå—ï¼Ÿ"></a>æ‰€æœ‰çš„ Hive ä»»åŠ¡éƒ½ä¼šæœ‰ MapReduce çš„æ‰§è¡Œå—ï¼Ÿ</h3></blockquote><p>ä¸æ˜¯ï¼Œä» Hive0.10.0 ç‰ˆæœ¬å¼€å§‹ï¼Œå¯¹äºç®€å•çš„ä¸éœ€è¦èšåˆçš„ç±»ä¼¼ <code>SELECT * FROM LIMIT n</code> è¯­å¥ï¼Œä¸éœ€è¦èµ· MapReduce jobï¼Œç›´æ¥é€šè¿‡ Fetch task è·å–æ•°æ®ã€‚</p><blockquote><h3 id="ä»€ä¹ˆæ˜¯-Fetch-æŠ“å–"><a href="#ä»€ä¹ˆæ˜¯-Fetch-æŠ“å–" class="headerlink" title="ä»€ä¹ˆæ˜¯ Fetch æŠ“å–"></a>ä»€ä¹ˆæ˜¯ Fetch æŠ“å–</h3></blockquote><p>Fetch æŠ“å–æ˜¯æŒ‡ï¼ŒHive ä¸­å¯¹æŸäº›æƒ…å†µçš„æŸ¥è¯¢å¯ä»¥ä¸å¿…ä½¿ç”¨ MapReduce è®¡ç®—ã€‚ä¾‹å¦‚ï¼š<code>SELECT * FROM employees</code>ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒHive å¯ä»¥ç®€å•åœ°è¯»å– employee å¯¹åº”çš„å­˜å‚¨ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œç„¶åè¾“å‡ºæŸ¥è¯¢ç»“æœåˆ°æ§åˆ¶å°ã€‚</p><p>åœ¨ <code>hive-default.xml.template</code> æ–‡ä»¶ä¸­ <code>hive.fetch.task.conversion</code> é»˜è®¤æ˜¯ <code>more</code>ï¼Œè€ç‰ˆæœ¬ Hive é»˜è®¤æ˜¯ <code>minimal</code>ï¼Œè¯¥å±æ€§ä¿®æ”¹ä¸º <code>more</code> ä»¥åï¼Œåœ¨å…¨å±€æŸ¥æ‰¾ã€å­—æ®µæŸ¥æ‰¾ã€limit æŸ¥æ‰¾ç­‰éƒ½ä¸èµ° MapReduceã€‚</p><blockquote><h3 id="ä»€ä¹ˆæ˜¯æœ¬åœ°æ¨¡å¼"><a href="#ä»€ä¹ˆæ˜¯æœ¬åœ°æ¨¡å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯æœ¬åœ°æ¨¡å¼"></a>ä»€ä¹ˆæ˜¯æœ¬åœ°æ¨¡å¼</h3></blockquote><p>å¤§å¤šæ•°çš„ Hadoop Job æ˜¯éœ€è¦ Hadoop æä¾›çš„å®Œæ•´çš„å¯æ‰©å±•æ€§æ¥å¤„ç†å¤§æ•°æ®é›†çš„ã€‚ä¸è¿‡ï¼Œæœ‰æ—¶ Hive çš„è¾“å…¥æ•°æ®é‡æ˜¯éå¸¸å°çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºæŸ¥è¯¢è§¦å‘æ‰§è¡Œä»»åŠ¡æ—¶æ¶ˆè€—å¯èƒ½ä¼šæ¯”å®é™… job çš„æ‰§è¡Œæ—¶é—´è¦å¤šçš„å¤šã€‚å¯¹äºå¤§å¤šæ•°è¿™ç§æƒ…å†µï¼ŒHive å¯ä»¥é€šè¿‡æœ¬åœ°æ¨¡å¼åœ¨å•å°æœºå™¨ä¸Šå¤„ç†æ‰€æœ‰çš„ä»»åŠ¡ã€‚å¯¹äºå°æ•°æ®é›†ï¼Œæ‰§è¡Œæ—¶é—´å¯ä»¥æ˜æ˜¾è¢«ç¼©çŸ­ã€‚</p><p>ç”¨æˆ·å¯ä»¥é€šè¿‡è®¾ç½® <code>hive.exec.mode.local.auto</code> çš„å€¼ä¸º <code>true</code>ï¼Œæ¥è®© Hive åœ¨é€‚å½“çš„æ—¶å€™è‡ªåŠ¨å¯åŠ¨è¿™ä¸ªä¼˜åŒ–ã€‚</p><blockquote><h3 id="Hive-çš„å‡½æ•°ï¼šUDFã€UDAFã€UDTF-çš„åŒºåˆ«ï¼Ÿ"><a href="#Hive-çš„å‡½æ•°ï¼šUDFã€UDAFã€UDTF-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="Hive çš„å‡½æ•°ï¼šUDFã€UDAFã€UDTF çš„åŒºåˆ«ï¼Ÿ"></a>Hive çš„å‡½æ•°ï¼šUDFã€UDAFã€UDTF çš„åŒºåˆ«ï¼Ÿ</h3></blockquote><ul><li>UDFï¼šUser-Defined Functionï¼Œç”¨æˆ·å®šä¹‰ï¼ˆæ™®é€šï¼‰å‡½æ•°ï¼Œåªå¯¹å•è¡Œæ•°å€¼äº§ç”Ÿä½œç”¨ï¼›å•è¡Œè¿›å…¥ï¼Œå•è¡Œè¾“å‡ºã€‚</li><li>UDAFï¼šUser-Defined Aggregation Functionï¼Œç”¨æˆ·å®šä¹‰èšåˆå‡½æ•°ï¼Œå¯å¯¹å¤šè¡Œæ•°æ®äº§ç”Ÿä½œç”¨ï¼›ç­‰åŒä¸ SQL ä¸­å¸¸ç”¨çš„ <code>SUM()</code>ï¼Œ<code>AVG()</code>ï¼Œä¹Ÿæ˜¯èšåˆå‡½æ•°ï¼›å¤šè¡Œè¿›å…¥ï¼Œå•è¡Œè¾“å‡ºã€‚</li><li>UDTFï¼šUser-Defined Table-Generating Functionsï¼Œç”¨æˆ·å®šä¹‰è¡¨ç”Ÿæˆå‡½æ•°ï¼Œç”¨æ¥è§£å†³è¾“å…¥ä¸€è¡Œè¾“å‡ºå¤šè¡Œï¼Œå¦‚ <code>lateral view explore()</code>ï¼›å•è¡Œè¾“å…¥ï¼Œå¤šè¡Œè¾“å‡ºã€‚</li></ul><blockquote><h3 id="è¯·è¯´æ˜-Hive-ä¸­-Order-Byï¼ŒSort-Byï¼ŒDistribute-Byï¼ŒCluster-By-å„ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Ÿ"><a href="#è¯·è¯´æ˜-Hive-ä¸­-Order-Byï¼ŒSort-Byï¼ŒDistribute-Byï¼ŒCluster-By-å„ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Ÿ" class="headerlink" title="è¯·è¯´æ˜ Hive ä¸­ Order Byï¼ŒSort Byï¼ŒDistribute Byï¼ŒCluster By å„ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Ÿ"></a>è¯·è¯´æ˜ Hive ä¸­ Order Byï¼ŒSort Byï¼ŒDistribute Byï¼ŒCluster By å„ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Ÿ</h3></blockquote><ul><li>order byï¼šä¼šå¯¹è¾“å…¥åšå…¨å±€æ’åºï¼Œå› æ­¤åªæœ‰ä¸€ä¸ª reducerï¼ˆå¤šä¸ª reducer æ— æ³•ä¿è¯å…¨å±€æœ‰åºï¼‰ã€‚åªæœ‰ä¸€ä¸ª reducerï¼Œä¼šå¯¼è‡´å½“è¾“å…¥è§„æ¨¡è¾ƒå¤§æ—¶ï¼Œéœ€è¦è¾ƒé•¿çš„è®¡ç®—æ—¶é—´ã€‚</li><li>sort byï¼šä¸æ˜¯å…¨å±€æ’åºï¼Œå…¶åœ¨æ•°æ®è¿›å…¥ reducer å‰å®Œæˆæ’åºã€‚</li><li>distribute byï¼šæŒ‰ç…§æŒ‡å®šçš„å­—æ®µå¯¹æ•°æ®è¿›è¡Œåˆ’åˆ†è¾“å‡ºåˆ°ä¸åŒçš„ reduce ä¸­ã€‚</li><li>cluster byï¼šé™¤äº†å…·æœ‰ distribute by çš„åŠŸèƒ½å¤–è¿˜å…¼å…· sort by çš„åŠŸèƒ½ã€‚</li></ul><blockquote><h3 id="å†™å‡º-Hive-ä¸­-splitã€coalesce-åŠ-collect-list-å‡½æ•°çš„ç”¨æ³•ï¼ˆå¯ä¸¾ä¾‹ï¼‰ï¼Ÿ"><a href="#å†™å‡º-Hive-ä¸­-splitã€coalesce-åŠ-collect-list-å‡½æ•°çš„ç”¨æ³•ï¼ˆå¯ä¸¾ä¾‹ï¼‰ï¼Ÿ" class="headerlink" title="å†™å‡º Hive ä¸­ splitã€coalesce åŠ collect_list å‡½æ•°çš„ç”¨æ³•ï¼ˆå¯ä¸¾ä¾‹ï¼‰ï¼Ÿ"></a>å†™å‡º Hive ä¸­ splitã€coalesce åŠ collect_list å‡½æ•°çš„ç”¨æ³•ï¼ˆå¯ä¸¾ä¾‹ï¼‰ï¼Ÿ</h3></blockquote><ul><li><code>split</code> å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ•°ç»„ï¼Œå³ï¼š<code>split(&#39;a,b,c,d&#39;, &#39;,&#39;) ==&gt; [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;]</code>ã€‚</li><li><code>coalesce(T v1, T v2, â€¦)</code> è¿”å›å‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªéç©ºå€¼ï¼›å¦‚æœæ‰€æœ‰å€¼éƒ½ä¸º <code>NULL</code>ï¼Œé‚£ä¹ˆè¿”å› <code>NULL</code>ã€‚</li><li><code>collect_list</code> åˆ—å‡ºè¯¥å­—æ®µæ‰€æœ‰çš„å€¼ï¼Œä¸å»é‡ =&gt; <code>select collect_list(id) from table</code>ã€‚</li></ul><blockquote><h3 id="Hive-çš„ä¸¤å¼ è¡¨å…³è”ï¼Œä½¿ç”¨-MapReduce-æ€ä¹ˆå®ç°ï¼Ÿ"><a href="#Hive-çš„ä¸¤å¼ è¡¨å…³è”ï¼Œä½¿ç”¨-MapReduce-æ€ä¹ˆå®ç°ï¼Ÿ" class="headerlink" title="Hive çš„ä¸¤å¼ è¡¨å…³è”ï¼Œä½¿ç”¨ MapReduce æ€ä¹ˆå®ç°ï¼Ÿ"></a>Hive çš„ä¸¤å¼ è¡¨å…³è”ï¼Œä½¿ç”¨ MapReduce æ€ä¹ˆå®ç°ï¼Ÿ</h3></blockquote><ul><li><p>å¦‚æœå…¶ä¸­æœ‰ä¸€å¼ è¡¨ä¸ºå°è¡¨ï¼Œç›´æ¥ä½¿ç”¨ map ç«¯ join çš„æ–¹å¼ï¼ˆmap ç«¯åŠ è½½å°è¡¨ï¼‰è¿›è¡Œèšåˆã€‚</p></li><li><p>å¦‚æœä¸¤å¼ éƒ½æ˜¯å¤§è¡¨ï¼Œé‚£ä¹ˆé‡‡ç”¨è”åˆ keyï¼Œè”åˆ key çš„ç¬¬ä¸€ä¸ªç»„æˆéƒ¨åˆ†æ˜¯ join on ä¸­çš„å…¬å…±å­—æ®µï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯ä¸€ä¸ª flagï¼Œ0 ä»£è¡¨è¡¨ Aï¼Œ1 ä»£è¡¨è¡¨ Bï¼Œç”±æ­¤è®© Reduce åŒºåˆ†å®¢æˆ·ä¿¡æ¯å’Œè®¢å•ä¿¡æ¯ï¼›åœ¨ Mapper ä¸­åŒæ—¶å¤„ç†ä¸¤å¼ è¡¨çš„ä¿¡æ¯ï¼Œå°† join on å…¬å…±å­—æ®µç›¸åŒçš„æ•°æ®åˆ’åˆ†åˆ°åŒä¸€ä¸ªåˆ†åŒºä¸­ï¼Œè¿›è€Œä¼ é€’åˆ°ä¸€ä¸ª Reduce ä¸­ï¼Œç„¶ååœ¨ Reduce ä¸­å®ç°èšåˆã€‚</p></li></ul><h2 id="Hive-ä¼˜åŒ–"><a href="#Hive-ä¼˜åŒ–" class="headerlink" title="Hive ä¼˜åŒ–"></a>Hive ä¼˜åŒ–</h2><blockquote><h3 id="å°è¡¨ã€å¤§è¡¨-JOIN-ä¼˜åŒ–"><a href="#å°è¡¨ã€å¤§è¡¨-JOIN-ä¼˜åŒ–" class="headerlink" title="å°è¡¨ã€å¤§è¡¨ JOIN ä¼˜åŒ–"></a>å°è¡¨ã€å¤§è¡¨ JOIN ä¼˜åŒ–</h3></blockquote><p>å°† key ç›¸å¯¹åˆ†æ•£ï¼Œå¹¶ä¸”æ•°æ®é‡å°çš„è¡¨æ”¾åœ¨ JOIN çš„å·¦è¾¹ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆå‡å°‘å†…å­˜æº¢å‡ºé”™è¯¯å‘ç”Ÿçš„å‡ ç‡ï¼›å†è¿›ä¸€æ­¥ï¼Œå¯ä»¥ä½¿ç”¨ Group è®©å°çš„ç»´åº¦è¡¨ï¼ˆ1000 æ¡ä»¥ä¸‹çš„è®°å½•æ¡æ•°ï¼‰å…ˆè¿›å†…å­˜ã€‚åœ¨ map ç«¯å®Œæˆ reduceã€‚</p><p>å®é™…æµ‹è¯•å‘ç°ï¼šæ–°ç‰ˆçš„ Hive å·²ç»å¯¹å°è¡¨ JOIN å¤§è¡¨å’Œå¤§è¡¨ JOIN å°è¡¨è¿›è¡Œäº†ä¼˜åŒ–ã€‚å°è¡¨æ”¾åœ¨å·¦è¾¹å’Œå³è¾¹å·²ç»æ²¡æœ‰æ˜æ˜¾åŒºåˆ«ã€‚</p><blockquote><h3 id="å¤§è¡¨-JOIN-å¤§è¡¨ä¼˜åŒ–"><a href="#å¤§è¡¨-JOIN-å¤§è¡¨ä¼˜åŒ–" class="headerlink" title="å¤§è¡¨ JOIN å¤§è¡¨ä¼˜åŒ–"></a>å¤§è¡¨ JOIN å¤§è¡¨ä¼˜åŒ–</h3></blockquote><ul><li><p>ç©º KEY è¿‡æ»¤</p><p>æœ‰æ—¶ JOIN è¶…æ—¶æ˜¯å› ä¸ºæŸäº› key å¯¹åº”çš„æ•°æ®å¤ªå¤šï¼Œè€Œç›¸åŒ key å¯¹åº”çš„æ•°æ®éƒ½ä¼šå‘é€åˆ°ç›¸åŒçš„ reducer ä¸Šï¼Œä»è€Œå¯¼è‡´å†…å­˜ä¸å¤Ÿã€‚æ­¤æ—¶æˆ‘ä»¬åº”è¯¥ä»”ç»†åˆ†æè¿™äº›å¼‚å¸¸çš„ keyï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œè¿™äº› key å¯¹åº”çš„æ•°æ®æ˜¯å¼‚å¸¸æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ SQL è¯­å¥ä¸­è¿›è¡Œè¿‡æ»¤ã€‚ä¾‹å¦‚ key å¯¹åº”çš„å­—æ®µä¸ºç©ºã€‚</p></li><li><p>ç©º key è½¬æ¢</p><p>æœ‰æ—¶è™½ç„¶æŸä¸ª key ä¸ºç©ºå¯¹åº”çš„æ•°æ®å¾ˆå¤šï¼Œä½†æ˜¯ç›¸åº”çš„æ•°æ®ä¸æ˜¯å¼‚å¸¸æ•°æ®ï¼Œå¿…é¡»è¦åŒ…å«åœ¨ JOIN çš„ç»“æœä¸­ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥è¡¨ A ä¸­ key ä¸ºç©ºçš„å­—æ®µèµ‹ä¸€ä¸ªéšæœºçš„å€¼ï¼Œä½¿å¾—æ•°æ®éšæœºå‡åŒ€åœ°åˆ†ä¸åˆ°ä¸åŒçš„ reducer ä¸Šã€‚</p></li></ul><blockquote><h3 id="Group-By-ä¼˜åŒ–"><a href="#Group-By-ä¼˜åŒ–" class="headerlink" title="Group By ä¼˜åŒ–"></a>Group By ä¼˜åŒ–</h3></blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒMap é˜¶æ®µåŒä¸€ Key æ•°æ®åˆ†å‘ç»™ä¸€ä¸ª reduceï¼Œå½“ä¸€ä¸ª key æ•°æ®è¿‡å¤§æ—¶å°±å€¾æ–œäº†ã€‚</p><p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„èšåˆæ“ä½œéƒ½éœ€è¦åœ¨ Reduce ç«¯å®Œæˆï¼Œå¾ˆå¤šèšåˆæ“ä½œéƒ½å¯ä»¥å…ˆåœ¨ Map ç«¯è¿›è¡Œéƒ¨åˆ†èšåˆï¼Œæœ€ååœ¨ Reduce ç«¯å¾—å‡ºæœ€ç»ˆç»“æœã€‚</p><p>å¼€å¯ Map ç«¯èšåˆå‚æ•°è®¾ç½®</p><ul><li>æ˜¯å¦åœ¨ Map ç«¯è¿›è¡Œèšåˆï¼Œé»˜è®¤ä¸º trueï¼š<code>hive.map.aggr = true</code></li><li>åœ¨ Map ç«¯è¿›è¡Œèšåˆæ“ä½œçš„æ¡ç›®æ•°ç›®ï¼š<code>hive.groupby.mapaggr.checkinterval = 100000</code></li><li>æœ‰æ•°æ®å€¾æ–œçš„æ—¶å€™è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼ˆé»˜è®¤æ˜¯ falseï¼‰ï¼š<code>hive.groupby.skewindata = true</code></li></ul><p>å½“é€‰é¡¹è®¾å®šä¸º trueï¼Œç”Ÿæˆçš„æŸ¥è¯¢è®¡åˆ’ä¼šæœ‰ä¸¤ä¸ª MR Jobã€‚ç¬¬ä¸€ä¸ª MR Job ä¸­ï¼ŒMap çš„è¾“å‡ºç»“æœä¼šéšæœºåˆ†å¸ƒåˆ° Reduce ä¸­ï¼Œæ¯ä¸ª Reduce åšéƒ¨åˆ†èšåˆæ“ä½œï¼Œå¹¶è¾“å‡ºç»“æœï¼Œè¿™æ ·å¤„ç†çš„ç»“æœæ˜¯ç›¸åŒçš„ Group By Key æœ‰å¯èƒ½è¢«åˆ†å‘åˆ°ä¸åŒçš„ Reduce ä¸­ï¼Œä»è€Œè¾¾åˆ°è´Ÿè½½å‡è¡¡çš„ç›®çš„ï¼›ç¬¬äºŒä¸ª MR Job å†æ ¹æ®é¢„å¤„ç†çš„æ•°æ®ç»“æœæŒ‰ç…§ Group By Key åˆ†å¸ƒåˆ° Reduce ä¸­ï¼ˆè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ä¿è¯ç›¸åŒçš„ Group By Key è¢«åˆ†å¸ƒåˆ°åŒä¸€ä¸ª Reduce ä¸­ï¼‰ï¼Œæœ€åå®Œæˆæœ€ç»ˆçš„èšåˆæ“ä½œã€‚</p><blockquote><h3 id="æ›¿æ¢-COUNT-Distinct-å»é‡ç»Ÿè®¡"><a href="#æ›¿æ¢-COUNT-Distinct-å»é‡ç»Ÿè®¡" class="headerlink" title="æ›¿æ¢ COUNT(Distinct) å»é‡ç»Ÿè®¡"></a>æ›¿æ¢ COUNT(Distinct) å»é‡ç»Ÿè®¡</h3></blockquote><p>æ•°æ®é‡å°çš„æ—¶å€™æ— æ‰€è°“ï¼Œæ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œç”±äº COUNT DISTINCT æ“ä½œéœ€è¦ç”¨ä¸€ä¸ª Reduce Task æ¥å®Œæˆï¼Œè¿™ä¸€ä¸ª Reduce éœ€è¦å¤„ç†çš„æ•°æ®é‡å¤ªå¤§ï¼Œå°±ä¼šå¯¼è‡´æ•´ä¸ª Job å¾ˆéš¾å®Œæˆï¼Œä¸€èˆ¬ COUNT DISTINCT ä½¿ç”¨å…ˆ GROUP BY å† COUNT çš„æ–¹å¼æ›¿æ¢ã€‚</p><blockquote><h3 id="é¿å…ç¬›å¡å°”ç§¯"><a href="#é¿å…ç¬›å¡å°”ç§¯" class="headerlink" title="é¿å…ç¬›å¡å°”ç§¯"></a>é¿å…ç¬›å¡å°”ç§¯</h3></blockquote><p>å°½é‡é¿å…ç¬›å¡å°”ç§¯ï¼Œjoin çš„æ—¶å€™ä¸åŠ  on æ¡ä»¶ï¼Œæˆ–è€…æ— æ•ˆçš„ on æ¡ä»¶ï¼ŒHive åªèƒ½ä½¿ç”¨ 1 ä¸ª reducer æ¥å®Œæˆç¬›å¡å°”ç§¯ã€‚</p><blockquote><h3 id="è¡Œåˆ—è¿‡æ»¤"><a href="#è¡Œåˆ—è¿‡æ»¤" class="headerlink" title="è¡Œåˆ—è¿‡æ»¤"></a>è¡Œåˆ—è¿‡æ»¤</h3></blockquote><ul><li>åˆ—å¤„ç†ï¼šåœ¨ SELECT ä¸­ï¼Œåªæ‹¿éœ€è¦çš„åˆ—ï¼Œå¦‚æœæœ‰ï¼Œå°½é‡ä½¿ç”¨åˆ†åŒºè¿‡æ»¤ï¼Œå°‘ç”¨ <code>SELECT *</code>ã€‚</li><li>è¡Œå¤„ç†ï¼šåœ¨åˆ†åŒºå‰ªè£ä¸­ï¼Œå½“ä½¿ç”¨å¤–å…³è”æ—¶ï¼Œå¦‚æœå°†å‰¯è¡¨çš„è¿‡æ»¤æ¡ä»¶å†™åœ¨ where åé¢ï¼Œé‚£ä¹ˆå°±ä¼šå…ˆå…¨è¡¨å…³è”ï¼Œä¹‹åå†è¿‡æ»¤ã€‚</li></ul><blockquote><h3 id="Hive-è¡¨å…³è”æŸ¥è¯¢ï¼Œå¦‚ä½•è§£å†³æ•°æ®å€¾æ–œçš„é—®é¢˜ï¼Ÿ"><a href="#Hive-è¡¨å…³è”æŸ¥è¯¢ï¼Œå¦‚ä½•è§£å†³æ•°æ®å€¾æ–œçš„é—®é¢˜ï¼Ÿ" class="headerlink" title="Hive è¡¨å…³è”æŸ¥è¯¢ï¼Œå¦‚ä½•è§£å†³æ•°æ®å€¾æ–œçš„é—®é¢˜ï¼Ÿ"></a>Hive è¡¨å…³è”æŸ¥è¯¢ï¼Œå¦‚ä½•è§£å†³æ•°æ®å€¾æ–œçš„é—®é¢˜ï¼Ÿ</h3></blockquote><ol><li>å€¾æ–œåŸå› ï¼šmap è¾“å‡ºæ•°æ®æŒ‰ key Hash çš„åˆ†é…åˆ° reduce ä¸­ï¼Œç”±äº key åˆ†å¸ƒä¸å‡åŒ€ã€ä¸šåŠ¡æ•°æ®æœ¬èº«çš„ç‰¹ç‚¹ã€å»ºè¡¨æ—¶è€ƒè™‘ä¸å‘¨ç­‰åŸå› é€ æˆçš„ reduce ä¸Šçš„æ•°æ®é‡å·®å¼‚è¿‡å¤§ã€‚<ul><li>key åˆ†å¸ƒä¸å‡åŒ€;</li><li>ä¸šåŠ¡æ•°æ®æœ¬èº«çš„ç‰¹æ€§;</li><li>å»ºè¡¨æ—¶è€ƒè™‘ä¸å‘¨;</li><li>æŸäº› SQL è¯­å¥æœ¬èº«å°±æœ‰æ•°æ®å€¾æ–œ;</li></ul></li></ol><p>å¦‚ä½•é¿å…ï¼šå¯¹äº key ä¸ºç©ºäº§ç”Ÿçš„æ•°æ®å€¾æ–œï¼Œå¯ä»¥å¯¹å…¶èµ‹äºˆä¸€ä¸ªéšæœºå€¼ã€‚</p><ol><li><p>è§£å†³æ–¹æ¡ˆ</p><ul><li><p>å‚æ•°è°ƒèŠ‚ï¼š</p><p><code>hive.map.aggr=true</code></p><p><code>hive.groupby.skewindata=true</code></p><p>æœ‰æ•°æ®å€¾æ–œçš„æ—¶å€™è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œå½“é€‰é¡¹è®¾å®šä½ trueï¼Œç”Ÿæˆçš„æŸ¥è¯¢è®¡åˆ’ä¼šæœ‰ä¸¤ä¸ª MR Jobã€‚</p><p>ç¬¬ä¸€ä¸ª MR Job ä¸­ï¼ŒMap çš„è¾“å‡ºç»“æœé›†åˆä¼šéšæœºåˆ†å¸ƒåˆ° Reduce ä¸­ï¼Œæ¯ä¸ª Reduce åšéƒ¨åˆ†èšåˆæ“ä½œï¼Œå¹¶è¾“å‡ºç»“æœï¼Œè¿™æ ·å¤„ç†çš„ç»“æœæ˜¯ç›¸åŒçš„ Group By Key æœ‰å¯èƒ½è¢«åˆ†å‘åˆ°ä¸åŒçš„ Reduce ä¸­ï¼Œä»è€Œè¾¾åˆ°è´Ÿè½½å‡è¡¡çš„ç›®çš„ï¼›</p><p>ç¬¬äºŒä¸ª MR Job å†æ ¹æ®é¢„å¤„ç†çš„æ•°æ®ç»“æœæŒ‰ç…§ Group By Key åˆ†å¸ƒåˆ° Reduce ä¸­ï¼ˆè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ä¿è¯ç›¸åŒçš„ Group By Key è¢«åˆ†å¸ƒåˆ°åŒä¸€ä¸ª Reduce ä¸­ï¼‰ï¼Œæœ€åå®Œæˆæœ€ç»ˆçš„èšåˆæ“ä½œã€‚</p></li><li><p>SQL è¯­å¥è°ƒèŠ‚ï¼š</p><ul><li>é€‰ç”¨ join key åˆ†å¸ƒæœ€å‡åŒ€çš„è¡¨ä½œä¸ºé©±åŠ¨è¡¨ã€‚åšå¥½åˆ—è£å‰ªå’Œ filter æ“ä½œï¼Œä»¥è¾¾åˆ°ä¸¤è¡¨åš join çš„æ—¶å€™ï¼Œæ•°æ®é‡ç›¸å¯¹å˜å°çš„æ•ˆæœã€‚</li><li>å¤§å°è¡¨ joinï¼šä½¿ç”¨ map join è®©å°çš„ç»´åº¦è¡¨ï¼ˆ1000 æ¡ä»¥ä¸‹çš„è®°å½•æ¡æ•°ï¼‰å…ˆè¿›å†…å­˜ã€‚åœ¨ map ç«¯å®Œæˆ reduceã€‚</li><li>å¤§è¡¨ join å¤§è¡¨ï¼šæŠŠç©ºå€¼çš„ key å˜æˆä¸€ä¸ªå­—ç¬¦ä¸²åŠ ä¸Šéšæœºæ•°ï¼ŒæŠŠå€¾æ–œçš„æ•°æ®åˆ†åˆ°ä¸åŒçš„ reduce ä¸Šï¼Œç”±äº null å€¼å…³è”ä¸ä¸Šï¼Œå¤„ç†åå¹¶ä¸å½±å“æœ€ç»ˆç»“æœã€‚</li><li>count distinct å¤§é‡ç›¸åŒç‰¹æ®Šå€¼ï¼šcount distinct æ—¶ï¼Œå°†å€¼ä¸ºç©ºçš„æƒ…å†µå•ç‹¬å¤„ç†ï¼Œå¦‚æœæ˜¯è®¡ç®— count distinctï¼Œå¯ä»¥ä¸ç”¨å¤„ç†ï¼Œç›´æ¥è¿‡æ»¤ï¼Œåœ¨æœ€åç»“æœä¸­åŠ  1ã€‚å¦‚æœè¿˜æœ‰å…¶ä»–è®¡ç®—ï¼Œéœ€è¦è¿›è¡Œ group byï¼Œå¯ä»¥å…ˆå°†å€¼ä¸ºç©ºçš„è®°å½•å•ç‹¬å¤„ç†ï¼Œå†å’Œå…¶ä»–è®¡ç®—ç»“æœè¿›è¡Œ unionã€‚</li></ul></li></ul></li></ol><blockquote><h3 id="ä¼˜åŒ–-Map-æ•°"><a href="#ä¼˜åŒ–-Map-æ•°" class="headerlink" title="ä¼˜åŒ– Map æ•°"></a>ä¼˜åŒ– Map æ•°</h3></blockquote><ol><li><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä½œä¸šä¼šé€šè¿‡ input çš„ç›®å½•äº§ç”Ÿä¸€ä¸ªæˆ–è€…å¤šä¸ª map ä»»åŠ¡ã€‚</p><p>ä¸»è¦çš„å†³å®šå› ç´ æœ‰ï¼šinput çš„æ–‡ä»¶æ€»ä¸ªæ•°ï¼Œinput çš„æ–‡ä»¶å¤§å°ï¼Œé›†ç¾¤è®¾ç½®çš„æ–‡ä»¶å—å¤§å°ã€‚</p></li><li><p>æ˜¯ä¸æ˜¯ map æ•°è¶Šå¤šè¶Šå¥½ï¼Ÿ</p><p>ä¸ä¸€å®šã€‚å¦‚æœä¸€ä¸ªä»»åŠ¡æœ‰å¾ˆå¤šå°æ–‡ä»¶ï¼ˆè¿œè¿œå°äºå—å¤§å° 128MBï¼‰ï¼Œåˆ™æ¯ä¸ªå°æ–‡ä»¶ä¹Ÿä¼šè¢«å½“åšä¸€ä¸ªå—ï¼Œç”¨ä¸€ä¸ª map ä»»åŠ¡æ¥å®Œæˆï¼Œè€Œä¸€ä¸ª map ä»»åŠ¡å¯åŠ¨å’Œåˆå§‹åŒ–çš„æ—¶é—´è¿œè¿œå¤§äºé€»è¾‘å¤„ç†çš„æ—¶é—´ï¼Œå°±ä¼šé€ æˆå¾ˆå¤§çš„èµ„æºæµªè´¹ã€‚è€Œä¸”ï¼ŒåŒæ—¶å¯æ‰§è¡Œçš„ map æ•°æ˜¯å—é™çš„ã€‚</p></li><li><p>æ˜¯ä¸æ˜¯ä¿è¯æ¯ä¸ª map å¤„ç†æ¥è¿‘ 128MB çš„æ–‡ä»¶å—ï¼Œå°±é«˜æ•æ— å¿§äº†ï¼Ÿ</p><p>ç­”æ¡ˆä¹Ÿæ˜¯ä¸ä¸€å®šã€‚æ¯”å¦‚æœ‰ä¸€ä¸ª 127MB çš„æ–‡ä»¶ï¼Œæ­£å¸¸ä¼šç”¨ä¸€ä¸ª map å»å®Œæˆï¼Œä½†è¿™ä¸ªæ–‡ä»¶åªæœ‰ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªå°å­—æ®µï¼Œå´æœ‰å‡ åƒä¸‡çš„è®°å½•ï¼Œå¦‚æœ map å¤„ç†çš„é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œç”¨ä¸€ä¸ª map ä»»åŠ¡å»åšï¼Œè‚¯å®šä¹Ÿæ¯”è¾ƒè€—æ—¶ã€‚</p></li></ol><p><strong>æ³¨æ„ï¼š</strong>é’ˆå¯¹ä¸Šé¢çš„é—®é¢˜ 2 å’Œ 3ï¼Œæˆ‘ä»¬éœ€è¦é‡‡å–ä¸¤ç§æ–¹å¼æ¥è§£å†³ï¼šå³å‡å°‘ map æ•°å’Œå¢åŠ  map æ•°ã€‚</p><blockquote><h3 id="å°æ–‡ä»¶è¿›è¡Œåˆå¹¶"><a href="#å°æ–‡ä»¶è¿›è¡Œåˆå¹¶" class="headerlink" title="å°æ–‡ä»¶è¿›è¡Œåˆå¹¶"></a>å°æ–‡ä»¶è¿›è¡Œåˆå¹¶</h3></blockquote><p>åœ¨ map æ‰§è¡Œå‰åˆå¹¶å°æ–‡ä»¶ï¼Œå‡å°‘ map æ•°ï¼šCombineHiveInputFormat å…·æœ‰å¯¹å°æ–‡ä»¶è¿›è¡Œåˆå¹¶çš„åŠŸèƒ½ï¼ˆç³»ç»Ÿé»˜è®¤çš„æ ¼å¼ï¼‰ã€‚HiveInputFormat æ²¡æœ‰å¯¹å°æ–‡ä»¶åˆå¹¶åŠŸèƒ½ã€‚</p><p><code>set hive.input.format=org.apache.hadoop.hive.ql.io.CombineHiveInputFormat</code></p><blockquote><h3 id="å¤æ‚æ–‡ä»¶å¢åŠ -Map-æ•°"><a href="#å¤æ‚æ–‡ä»¶å¢åŠ -Map-æ•°" class="headerlink" title="å¤æ‚æ–‡ä»¶å¢åŠ  Map æ•°"></a>å¤æ‚æ–‡ä»¶å¢åŠ  Map æ•°</h3></blockquote><p>å½“ input çš„æ–‡ä»¶éƒ½å¾ˆå¤§ï¼Œä»»åŠ¡é€»è¾‘å¤æ‚ï¼Œmap æ‰§è¡Œéå¸¸æ…¢çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘å¢åŠ  Map æ•°ï¼Œæ¥ä½¿å¾—æ¯ä¸ª map å¤„ç†çš„æ•°æ®é‡å‡å°‘ï¼Œä»è€Œæé«˜ä»»åŠ¡çš„æ‰§è¡Œæ•ˆç‡ã€‚</p><p>å¢åŠ  map çš„æ–¹æ³•ä¸ºï¼šæ ¹æ® <code>computeSliteSize(Math.max(minSize, Math.min(maxSize, blocksize))) = blocksize = 128MB</code> å…¬å¼ï¼Œè°ƒæ•´ maxSize æœ€å¤§å€¼ã€‚è®© maxSize æœ€å¤§å€¼ä½äº blocksize å°±å¯ä»¥å¢åŠ  map çš„ä¸ªæ•°ã€‚</p><blockquote><h3 id="ä¼˜åŒ–-Reduce-æ•°"><a href="#ä¼˜åŒ–-Reduce-æ•°" class="headerlink" title="ä¼˜åŒ– Reduce æ•°"></a>ä¼˜åŒ– Reduce æ•°</h3></blockquote><ol><li><p>è°ƒæ•´ reduce ä¸ªæ•°æ–¹æ³•ä¸€</p><ul><li><p>æ¯ä¸ª Reduce å¤„ç†çš„æ•°æ®é‡é»˜è®¤æ˜¯ 256MB</p><p><code>hive.exec.reducers.bytes.per.reducer=256000000</code></p></li><li><p>æ¯ä¸ªä»»åŠ¡æœ€å¤§çš„ reduce æ•°ï¼Œé»˜è®¤ä¸º 1009</p><p><code>hive.exec.reducers.max=1009</code></p></li><li><p>è®¡ç®— reducer æ•°çš„å…¬å¼</p><p>N = min(å‚æ•°2, æ€»è¾“å…¥æ•°æ®é‡/å‚æ•°1)</p></li></ul></li><li><p>è°ƒæ•´ reduce ä¸ªæ•°æ–¹æ³•äºŒ</p><p> åœ¨ hadoop çš„ <code>mapred-default.xml</code> æ–‡ä»¶ä¸­ä¿®æ”¹è®¾ç½®æ¯ä¸ª job çš„ Reduce ä¸ªæ•°</p><p> <code>set mapreduce.job.reduces = 15</code></p></li><li><p>reduce ä¸ªæ•°å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½</p><ul><li>è¿‡å¤šçš„å¯åŠ¨å’Œåˆå§‹åŒ– reduce ä¹Ÿä¼šæ¶ˆè€—æ—¶é—´å’Œèµ„æºï¼›</li><li><p>å¦å¤–ï¼Œæœ‰å¤šå°‘ä¸ª reduceï¼Œå°±ä¼šæœ‰å¤šå°‘ä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œå¦‚æœç”Ÿæˆäº†å¾ˆå¤šä¸ªå°æ–‡ä»¶ï¼Œé‚£ä¹ˆå¦‚æœè¿™äº›å°æ–‡ä»¶ä½œä¸ºä¸‹ä¸€ä¸ªä»»åŠ¡çš„è¾“å…¥ï¼Œåˆ™ä¹Ÿä¼šå‡ºç°å°æ–‡ä»¶è¿‡å¤šçš„é—®é¢˜ï¼›</p><p>åœ¨è®¾ç½® reduce ä¸ªæ•°çš„æ—¶å€™ä¹Ÿéœ€è¦è€ƒè™‘è¿™ä¸¤ä¸ªåŸåˆ™ï¼šå¤„ç†å¤§æ•°æ®é‡åˆ©ç”¨åˆé€‚çš„ reduce æ•°ï¼›ä½¿å•ä¸ª reduce ä»»åŠ¡å¤„ç†æ•°æ®é‡å¤§å°è¦åˆé€‚ã€‚</p></li></ul></li></ol><blockquote><h3 id="å¹¶è¡Œæ‰§è¡Œ"><a href="#å¹¶è¡Œæ‰§è¡Œ" class="headerlink" title="å¹¶è¡Œæ‰§è¡Œ"></a>å¹¶è¡Œæ‰§è¡Œ</h3></blockquote><p>Hive ä¼šå°†ä¸€ä¸ªæŸ¥è¯¢è½¬åŒ–æˆä¸€ä¸ªæˆ–è€…å¤šä¸ªé˜¶æ®µã€‚è¿™æ ·çš„é˜¶æ®µå¯ä»¥æ˜¯ MapReduce é˜¶æ®µã€æŠ½æ ·é˜¶æ®µã€åˆå¹¶é˜¶æ®µã€limit é˜¶æ®µã€‚æˆ–è€… Hive æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦çš„å…¶ä»–é˜¶æ®µã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒHive ä¸€æ¬¡åªä¼šæ‰§è¡Œä¸€ä¸ªé˜¶æ®µã€‚ä¸è¿‡ï¼ŒæŸä¸ªç‰¹å®šçš„ job å¯èƒ½åŒ…å«ä¼—å¤šçš„é˜¶æ®µï¼Œè€Œè¿™äº›é˜¶æ®µå¯èƒ½å¹¶éå®Œå…¨äº’ç›¸ä¾èµ–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰äº›é˜¶æ®µæ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ï¼Œè¿™æ ·å¯èƒ½ä½¿å¾—æ•´ä¸ª job çš„æ‰§è¡Œæ—¶é—´ç¼©çŸ­ã€‚ä¸è¿‡ï¼Œå¦‚æœæœ‰æ›´å¤šçš„é˜¶æ®µå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œé‚£ä¹ˆjobå¯èƒ½å°±è¶Šå¿«å®Œæˆã€‚</p><p>é€šè¿‡è®¾ç½®å‚æ•° <code>hive.exec.parallel=true</code>ï¼Œå°±å¯ä»¥å¼€å¯å¹¶å‘æ‰§è¡Œã€‚ä¸è¿‡ï¼Œåœ¨å…±äº«é›†ç¾¤ä¸­ï¼Œéœ€è¦æ³¨æ„ä¸‹ï¼Œå¦‚æœ job ä¸­å¹¶è¡Œé˜¶æ®µå¢å¤šï¼Œé‚£ä¹ˆé›†ç¾¤åˆ©ç”¨ç‡å°±ä¼šå¢åŠ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸHive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kafka é¢è¯•é¢˜è§£æ</title>
      <link href="post/89cabcb1.html"/>
      <url>post/89cabcb1.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="è¯·è¯´æ˜ä»€ä¹ˆæ˜¯-Apache-Kafkaï¼Ÿ"><a href="#è¯·è¯´æ˜ä»€ä¹ˆæ˜¯-Apache-Kafkaï¼Ÿ" class="headerlink" title="è¯·è¯´æ˜ä»€ä¹ˆæ˜¯ Apache Kafkaï¼Ÿ"></a>è¯·è¯´æ˜ä»€ä¹ˆæ˜¯ Apache Kafkaï¼Ÿ</h3></blockquote><p>Apache Kafka æ˜¯ç”± Apache å¼€å‘çš„ä¸€ç§å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿï¼Œå®ƒæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ã€åˆ†åŒºçš„å’Œé‡å¤çš„æ—¥å¿—æœåŠ¡ã€‚</p><blockquote><h3 id="è¯·è¯´æ˜ä»€ä¹ˆæ˜¯ä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’æ–¹æ³•ï¼Ÿ"><a href="#è¯·è¯´æ˜ä»€ä¹ˆæ˜¯ä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’æ–¹æ³•ï¼Ÿ" class="headerlink" title="è¯·è¯´æ˜ä»€ä¹ˆæ˜¯ä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’æ–¹æ³•ï¼Ÿ"></a>è¯·è¯´æ˜ä»€ä¹ˆæ˜¯ä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’æ–¹æ³•ï¼Ÿ</h3></blockquote><p>ä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’æ–¹æ³•åŒ…æ‹¬ä¸¤ç§ï¼š</p><ul><li>é˜Ÿåˆ—ï¼šåœ¨é˜Ÿåˆ—ä¸­ï¼Œä¸€ç»„ç”¨æˆ·å¯ä»¥ä»æœåŠ¡å™¨ä¸­è¯»å–æ¶ˆæ¯ï¼Œæ¯æ¡æ¶ˆæ¯éƒ½å‘é€ç»™å…¶ä¸­ä¸€ä¸ªäººã€‚</li><li>å‘å¸ƒ-è®¢é˜…ï¼šåœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼Œæ¶ˆæ¯è¢«å¹¿æ’­ç»™æ‰€æœ‰çš„ç”¨æˆ·ã€‚</li></ul><blockquote><h3 id="Kafka-éƒ½æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ"><a href="#Kafka-éƒ½æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="Kafka éƒ½æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ"></a>Kafka éƒ½æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ</h3></blockquote><ul><li>é«˜ååé‡ã€ä½å»¶è¿Ÿï¼šKafka æ¯ç§’å¯ä»¥å¤„ç†å‡ åä¸‡æ¡æ¶ˆæ¯ï¼Œå®ƒçš„å»¶è¿Ÿæœ€ä½åªæœ‰å‡ æ¯«ç§’ï¼Œæ¯ä¸ª topic å¯ä»¥åˆ†å¤šä¸ª partition, consumer group å¯¹ partition è¿›è¡Œ consume æ“ä½œã€‚</li><li>å¯æ‰©å±•æ€§ï¼šKafka é›†ç¾¤æ”¯æŒçƒ­æ‰©å±•ã€‚</li><li>æŒä¹…æ€§ã€å¯é æ€§ï¼šæ¶ˆæ¯è¢«æŒä¹…åŒ–åˆ°æœ¬åœ°ç£ç›˜ï¼Œå¹¶ä¸”æ”¯æŒæ•°æ®å¤‡ä»½é˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚</li><li>å®¹é”™æ€§ï¼šå…è®¸é›†ç¾¤ä¸­èŠ‚ç‚¹å¤±è´¥ï¼ˆè‹¥å‰¯æœ¬æ•°é‡ä¸º nï¼Œåˆ™å…è®¸ n-1 ä¸ªèŠ‚ç‚¹å¤±è´¥ï¼‰ã€‚</li><li>é«˜å¹¶å‘ï¼šæ”¯æŒæ•°åƒä¸ªå®¢æˆ·ç«¯åŒæ—¶è¯»å†™ã€‚</li></ul><blockquote><h3 id="è¯·è¯´æ˜-Kafka-ç›¸å¯¹äºä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’æ–¹æ³•æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"><a href="#è¯·è¯´æ˜-Kafka-ç›¸å¯¹äºä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’æ–¹æ³•æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ" class="headerlink" title="è¯·è¯´æ˜ Kafka ç›¸å¯¹äºä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’æ–¹æ³•æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"></a>è¯·è¯´æ˜ Kafka ç›¸å¯¹äºä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’æ–¹æ³•æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</h3></blockquote><ul><li>é«˜æ€§èƒ½ï¼šå•ä¸€çš„ Kafka ä»£ç†å¯ä»¥å¤„ç†æˆåƒä¸Šä¸‡çš„å®¢æˆ·ç«¯ï¼Œæ¯ç§’å¤„ç†æ•°å…†å­—èŠ‚çš„è¯»å†™æ“ä½œï¼ŒKafka æ€§èƒ½è¿œè¶…è¿‡ä¼ ç»Ÿçš„ ActiveMQã€RabbitMQ ç­‰ï¼Œè€Œä¸” Kafka æ”¯æŒ Batch æ“ä½œï¼›</li><li>å¯æ‰©å±•ï¼šKafka é›†ç¾¤å¯ä»¥é€æ˜çš„æ‰©å±•ï¼Œå¢åŠ æ–°çš„æœåŠ¡å™¨è¿›é›†ç¾¤ï¼›</li><li>å®¹é”™æ€§ï¼šKafka æ¯ä¸ª Partition æ•°æ®ä¼šå¤åˆ¶åˆ°å‡ å°æœåŠ¡å™¨ï¼Œå½“æŸä¸ª Broker å¤±æ•ˆæ—¶ï¼ŒZookeeper å°†é€šçŸ¥ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä»è€Œä½¿ç”¨å…¶ä»–çš„ Brokerã€‚</li></ul><blockquote><h3 id="è¯·ç®€è¿°ä¸‹ä½ åœ¨å“ªäº›åœºæ™¯ä¸‹ä¼šé€‰æ‹©-Kafkaï¼Ÿ"><a href="#è¯·ç®€è¿°ä¸‹ä½ åœ¨å“ªäº›åœºæ™¯ä¸‹ä¼šé€‰æ‹©-Kafkaï¼Ÿ" class="headerlink" title="è¯·ç®€è¿°ä¸‹ä½ åœ¨å“ªäº›åœºæ™¯ä¸‹ä¼šé€‰æ‹© Kafkaï¼Ÿ"></a>è¯·ç®€è¿°ä¸‹ä½ åœ¨å“ªäº›åœºæ™¯ä¸‹ä¼šé€‰æ‹© Kafkaï¼Ÿ</h3></blockquote><ul><li>æ—¥å¿—æ”¶é›†ï¼šä¸€ä¸ªå…¬å¸å¯ä»¥ç”¨ Kafka æ”¶é›†å„ç§æœåŠ¡çš„ logï¼Œé€šè¿‡ Kafka ä»¥ç»Ÿä¸€æ¥å£æœåŠ¡çš„æ–¹å¼å¼€æ”¾ç»™å„ç§ consumerï¼Œä¾‹å¦‚ Hadoopã€HBaseã€Solr ç­‰ã€‚</li><li>æ¶ˆæ¯ç³»ç»Ÿï¼šè§£è€¦å’Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ã€ç¼“å­˜æ¶ˆæ¯ç­‰ã€‚</li><li>ç”¨æˆ·æ´»åŠ¨è·Ÿè¸ªï¼šKafka ç»å¸¸è¢«ç”¨æ¥è®°å½• web ç”¨æˆ·æˆ–è€… app ç”¨æˆ·çš„å„ç§æ´»åŠ¨ï¼Œå¦‚æµè§ˆç½‘é¡µã€æœç´¢ã€ç‚¹å‡»ç­‰æ´»åŠ¨ï¼Œè¿™äº›æ´»åŠ¨ä¿¡æ¯è¢«å„ä¸ªæœåŠ¡å™¨å‘å¸ƒåˆ° Kafka çš„ topic ä¸­ï¼Œç„¶åè®¢é˜…è€…é€šè¿‡è®¢é˜…è¿™äº› topic æ¥åšå®æ—¶çš„ç›‘æ§åˆ†æï¼Œæˆ–è€…è£…è½½åˆ° Hadoopã€æ•°æ®ä»“åº“ä¸­åšç¦»çº¿åˆ†æå’ŒæŒ–æ˜ã€‚</li><li>è¿è¥æŒ‡æ ‡ï¼šKafka ä¹Ÿç»å¸¸ç”¨æ¥è®°å½•è¿è¥ç›‘æ§æ•°æ®ï¼ŒåŒ…æ‹¬æ”¶é›†å„ç§åˆ†å¸ƒå¼åº”ç”¨çš„æ•°æ®ï¼Œç”Ÿäº§å„ç§æ“ä½œçš„é›†ä¸­åé¦ˆï¼Œæ¯”å¦‚æŠ¥è­¦å’ŒæŠ¥å‘Šã€‚</li><li>æµå¼å¤„ç†ï¼šæ¯”å¦‚ Spark streaming å’Œ Flinkã€‚</li></ul><blockquote><h3 id="Kafka-æœåŠ¡å™¨èƒ½æ¥æ”¶åˆ°çš„æœ€å¤§ä¿¡æ¯æ˜¯å¤šå°‘ï¼Ÿ"><a href="#Kafka-æœåŠ¡å™¨èƒ½æ¥æ”¶åˆ°çš„æœ€å¤§ä¿¡æ¯æ˜¯å¤šå°‘ï¼Ÿ" class="headerlink" title="Kafka æœåŠ¡å™¨èƒ½æ¥æ”¶åˆ°çš„æœ€å¤§ä¿¡æ¯æ˜¯å¤šå°‘ï¼Ÿ"></a>Kafka æœåŠ¡å™¨èƒ½æ¥æ”¶åˆ°çš„æœ€å¤§ä¿¡æ¯æ˜¯å¤šå°‘ï¼Ÿ</h3></blockquote><p>Kafka æœåŠ¡å™¨å¯ä»¥æ¥æ”¶åˆ°çš„æ¶ˆæ¯çš„æœ€å¤§å¤§å°æ˜¯ 1000 000 å­—èŠ‚ã€‚</p><blockquote><h3 id="Kafka-ä¸­çš„-ZooKeeper-æ˜¯ä»€ä¹ˆï¼ŸKafka-æ˜¯å¦å¯ä»¥è„±ç¦»-ZooKeeper-ç‹¬ç«‹è¿è¡Œï¼Ÿ"><a href="#Kafka-ä¸­çš„-ZooKeeper-æ˜¯ä»€ä¹ˆï¼ŸKafka-æ˜¯å¦å¯ä»¥è„±ç¦»-ZooKeeper-ç‹¬ç«‹è¿è¡Œï¼Ÿ" class="headerlink" title="Kafka ä¸­çš„ ZooKeeper æ˜¯ä»€ä¹ˆï¼ŸKafka æ˜¯å¦å¯ä»¥è„±ç¦» ZooKeeper ç‹¬ç«‹è¿è¡Œï¼Ÿ"></a>Kafka ä¸­çš„ ZooKeeper æ˜¯ä»€ä¹ˆï¼ŸKafka æ˜¯å¦å¯ä»¥è„±ç¦» ZooKeeper ç‹¬ç«‹è¿è¡Œï¼Ÿ</h3></blockquote><p>Zookeeper æ˜¯ä¸€ä¸ªå¼€æ”¾æºç çš„ã€é«˜æ€§èƒ½çš„åè°ƒæœåŠ¡ï¼Œå®ƒç”¨äº Kafka çš„åˆ†å¸ƒå¼åº”ç”¨ã€‚</p><p>ä¸å¯ä»¥ï¼Œä¸å¯èƒ½è¶Šè¿‡ Zookeeper ç›´æ¥è”ç³» Kafka brokerï¼Œä¸€æ—¦ Zookeeper åœæ­¢å·¥ä½œï¼Œå®ƒå°±ä¸èƒ½æœåŠ¡å®¢æˆ·ç«¯è¯·æ±‚ã€‚</p><p>Zookeeper ä¸»è¦ç”¨äºåœ¨é›†ç¾¤ä¸­ä¸åŒèŠ‚ç‚¹ä¹‹é—´è¿›è¡Œé€šä¿¡ï¼Œåœ¨ Kafka ä¸­ï¼Œå®ƒè¢«ç”¨äºæäº¤åç§»é‡ï¼Œå› æ­¤å¦‚æœèŠ‚ç‚¹åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½å¤±è´¥äº†ï¼Œå®ƒéƒ½å¯ä»¥ä»ä¹‹å‰æäº¤çš„åç§»é‡ä¸­è·å–ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜æ‰§è¡Œå…¶ä»–æ´»åŠ¨ï¼Œå¦‚: <strong>Leader æ£€æµ‹</strong>ã€<strong>åˆ†å¸ƒå¼åŒæ­¥</strong>ã€<strong>é…ç½®ç®¡ç†</strong>ã€<strong>è¯†åˆ«æ–°èŠ‚ç‚¹ä½•æ—¶ç¦»å¼€æˆ–è¿æ¥</strong>ã€<strong>é›†ç¾¤</strong>ã€<strong>èŠ‚ç‚¹å®æ—¶çŠ¶æ€</strong>ç­‰ç­‰ã€‚</p><blockquote><h3 id="Kafka-çš„è®¾è®¡æ¶æ„ï¼Ÿ"><a href="#Kafka-çš„è®¾è®¡æ¶æ„ï¼Ÿ" class="headerlink" title="Kafka çš„è®¾è®¡æ¶æ„ï¼Ÿ"></a>Kafka çš„è®¾è®¡æ¶æ„ï¼Ÿ</h3></blockquote><ul><li>ç®€å•æ¶æ„</li></ul><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/kafka_simple.png" alt></p><ul><li>è¯¦ç»†æ¶æ„å¦‚ä¸‹ï¼š</li></ul><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/kafka_architecture.png" alt></p><p>Kafka æ¶æ„åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>Producerï¼šæ¶ˆæ¯ç”Ÿäº§è€…ï¼Œå°±æ˜¯å‘ Kafka broker å‘æ¶ˆæ¯çš„å®¢æˆ·ç«¯ã€‚</li><li>Consumerï¼šæ¶ˆæ¯æ¶ˆè´¹è€…ï¼Œå‘ Kafka broker å–æ¶ˆæ¯çš„å®¢æˆ·ç«¯ã€‚</li><li>Topicï¼šå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ª Topic åˆåˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåˆ†åŒºã€‚</li><li>Consumer Groupï¼šè¿™æ˜¯ Kafka ç”¨æ¥å®ç°ä¸€ä¸ª topic æ¶ˆæ¯çš„å¹¿æ’­ï¼ˆå‘ç»™æ‰€æœ‰çš„ consumerï¼‰å’Œå•æ’­ï¼ˆå‘ç»™ä»»æ„ä¸€ä¸ª consumerï¼‰çš„æ‰‹æ®µã€‚ä¸€ä¸ª topic å¯ä»¥æœ‰å¤šä¸ª Consumer Groupã€‚</li><li>Brokerï¼šä¸€å° Kafka æœåŠ¡å™¨å°±æ˜¯ä¸€ä¸ª brokerã€‚ä¸€ä¸ªé›†ç¾¤ç”±å¤šä¸ª broker ç»„æˆã€‚ä¸€ä¸ª broker å¯ä»¥å®¹çº³å¤šä¸ª topicã€‚</li><li>Partitionï¼šä¸ºäº†å®ç°æ‰©å±•æ€§ï¼Œä¸€ä¸ªéå¸¸å¤§çš„ topic å¯ä»¥åˆ†å¸ƒåˆ°å¤šä¸ª brokerä¸Šï¼Œæ¯ä¸ª partition æ˜¯ä¸€ä¸ªæœ‰åºçš„é˜Ÿåˆ—ã€‚partition ä¸­çš„æ¯æ¡æ¶ˆæ¯éƒ½ä¼šè¢«åˆ†é…ä¸€ä¸ªæœ‰åºçš„ idï¼ˆoffsetï¼‰ã€‚å°†æ¶ˆæ¯å‘ç»™ consumerï¼ŒKafka åªä¿è¯æŒ‰ä¸€ä¸ª partition ä¸­çš„æ¶ˆæ¯çš„é¡ºåºï¼Œä¸ä¿è¯ä¸€ä¸ª topic çš„æ•´ä½“ï¼ˆå¤šä¸ª partition é—´ï¼‰çš„é¡ºåºã€‚</li><li>Offsetï¼šKafka çš„å­˜å‚¨æ–‡ä»¶éƒ½æ˜¯æŒ‰ç…§ <code>offset.kafka</code> æ¥å‘½åï¼Œç”¨ offset åšåå­—çš„å¥½å¤„æ˜¯æ–¹ä¾¿æŸ¥æ‰¾ã€‚ä¾‹å¦‚ä½ æƒ³æ‰¾ä½äº 2049 çš„ä½ç½®ï¼Œåªè¦æ‰¾åˆ° <code>2048.kafka</code> çš„æ–‡ä»¶å³å¯ã€‚å½“ç„¶ the first offset å°±æ˜¯ <code>00000000000.kafka</code>ã€‚</li></ul><blockquote><h3 id="è§£é‡Š-Kafka-çš„ç”¨æˆ·å¦‚ä½•æ¶ˆè´¹ä¿¡æ¯ï¼Ÿ"><a href="#è§£é‡Š-Kafka-çš„ç”¨æˆ·å¦‚ä½•æ¶ˆè´¹ä¿¡æ¯ï¼Ÿ" class="headerlink" title="è§£é‡Š Kafka çš„ç”¨æˆ·å¦‚ä½•æ¶ˆè´¹ä¿¡æ¯ï¼Ÿ"></a>è§£é‡Š Kafka çš„ç”¨æˆ·å¦‚ä½•æ¶ˆè´¹ä¿¡æ¯ï¼Ÿ</h3></blockquote><p>åœ¨ Kafka ä¸­ä¼ é€’æ¶ˆæ¯æ˜¯é€šè¿‡ä½¿ç”¨ sendfile API å®Œæˆçš„ã€‚å®ƒæ”¯æŒå°†å­—èŠ‚ Socket è½¬ç§»åˆ°ç£ç›˜ï¼Œé€šè¿‡å†…æ ¸ç©ºé—´ä¿å­˜å‰¯æœ¬ï¼Œå¹¶åœ¨å†…æ ¸ç”¨æˆ·ä¹‹é—´è°ƒç”¨å†…æ ¸ã€‚</p><blockquote><h3 id="è§£é‡Šå¦‚ä½•æé«˜è¿œç¨‹ç”¨æˆ·çš„ååé‡ï¼Ÿ"><a href="#è§£é‡Šå¦‚ä½•æé«˜è¿œç¨‹ç”¨æˆ·çš„ååé‡ï¼Ÿ" class="headerlink" title="è§£é‡Šå¦‚ä½•æé«˜è¿œç¨‹ç”¨æˆ·çš„ååé‡ï¼Ÿ"></a>è§£é‡Šå¦‚ä½•æé«˜è¿œç¨‹ç”¨æˆ·çš„ååé‡ï¼Ÿ</h3></blockquote><p>å¦‚æœç”¨æˆ·ä½äºä¸ broker ä¸åŒçš„æ•°æ®ä¸­å¿ƒï¼Œåˆ™å¯èƒ½éœ€è¦è°ƒä¼˜ Socket ç¼“å†²åŒºå¤§å°ï¼Œä»¥å¯¹é•¿ç½‘ç»œå»¶è¿Ÿè¿›è¡Œæ‘Šé”€ã€‚</p><blockquote><h3 id="è§£é‡Šä¸€ä¸‹ï¼Œåœ¨æ•°æ®åˆ¶ä½œè¿‡ç¨‹ä¸­ï¼Œä½ å¦‚ä½•èƒ½ä»-Kafka-å¾—åˆ°å‡†ç¡®çš„ä¿¡æ¯ï¼Ÿ"><a href="#è§£é‡Šä¸€ä¸‹ï¼Œåœ¨æ•°æ®åˆ¶ä½œè¿‡ç¨‹ä¸­ï¼Œä½ å¦‚ä½•èƒ½ä»-Kafka-å¾—åˆ°å‡†ç¡®çš„ä¿¡æ¯ï¼Ÿ" class="headerlink" title="è§£é‡Šä¸€ä¸‹ï¼Œåœ¨æ•°æ®åˆ¶ä½œè¿‡ç¨‹ä¸­ï¼Œä½ å¦‚ä½•èƒ½ä» Kafka å¾—åˆ°å‡†ç¡®çš„ä¿¡æ¯ï¼Ÿ"></a>è§£é‡Šä¸€ä¸‹ï¼Œåœ¨æ•°æ®åˆ¶ä½œè¿‡ç¨‹ä¸­ï¼Œä½ å¦‚ä½•èƒ½ä» Kafka å¾—åˆ°å‡†ç¡®çš„ä¿¡æ¯ï¼Ÿ</h3></blockquote><p>åœ¨æ•°æ®ä¸­ï¼Œä¸ºäº†ç²¾ç¡®åœ°è·å¾— Kafka çš„æ¶ˆæ¯ï¼Œä½ å¿…é¡»éµå¾ªä¸¤ä»¶äº‹ï¼šåœ¨æ•°æ®æ¶ˆè€—æœŸé—´é¿å…é‡å¤ï¼Œåœ¨æ•°æ®ç”Ÿäº§è¿‡ç¨‹ä¸­é¿å…é‡å¤ã€‚</p><p>è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ•°æ®ç”Ÿæˆæ—¶å‡†ç¡®åœ°è·å¾—ä¸€ä¸ªè¯­ä¹‰:</p><ul><li>æ¯ä¸ªåˆ†åŒºä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„å†™å…¥å™¨ï¼Œæ¯å½“ä½ å‘ç°ä¸€ä¸ªç½‘ç»œé”™è¯¯ï¼Œæ£€æŸ¥è¯¥åˆ†åŒºä¸­çš„æœ€åä¸€æ¡æ¶ˆæ¯ï¼Œä»¥æŸ¥çœ‹æ‚¨çš„æœ€åä¸€æ¬¡å†™å…¥æ˜¯å¦æˆåŠŸã€‚</li><li>åœ¨æ¶ˆæ¯ä¸­åŒ…å«ä¸€ä¸ªä¸»é”®(UUID æˆ–å…¶ä»–)ï¼Œå¹¶åœ¨ç”¨æˆ·ä¸­è¿›è¡Œåå¤åˆ¶ã€‚</li></ul><blockquote><h3 id="Kafka-ä¸ºä»€ä¹ˆéœ€è¦å¤åˆ¶ï¼Ÿ"><a href="#Kafka-ä¸ºä»€ä¹ˆéœ€è¦å¤åˆ¶ï¼Ÿ" class="headerlink" title="Kafka ä¸ºä»€ä¹ˆéœ€è¦å¤åˆ¶ï¼Ÿ"></a>Kafka ä¸ºä»€ä¹ˆéœ€è¦å¤åˆ¶ï¼Ÿ</h3></blockquote><p>Kafka çš„ä¿¡æ¯å¤åˆ¶ç¡®ä¿äº†ä»»ä½•å·²å‘å¸ƒçš„æ¶ˆæ¯ä¸ä¼šä¸¢å¤±ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æœºå™¨é”™è¯¯ã€ç¨‹åºé”™è¯¯æˆ–æ›´å¸¸è§äº›çš„è½¯ä»¶å‡çº§ä¸­ä½¿ç”¨ã€‚</p><blockquote><h3 id="Kafka-åˆ†åŒºçš„ç›®çš„ï¼Ÿ"><a href="#Kafka-åˆ†åŒºçš„ç›®çš„ï¼Ÿ" class="headerlink" title="Kafka åˆ†åŒºçš„ç›®çš„ï¼Ÿ"></a>Kafka åˆ†åŒºçš„ç›®çš„ï¼Ÿ</h3></blockquote><p>åˆ†åŒºå¯¹äº Kafka é›†ç¾¤çš„å¥½å¤„æ˜¯ï¼šå®ç°è´Ÿè½½å‡è¡¡ã€‚åˆ†åŒºå¯¹äºæ¶ˆè´¹è€…æ¥è¯´ï¼Œå¯ä»¥æé«˜å¹¶å‘åº¦ï¼Œæé«˜æ•ˆç‡ã€‚</p><blockquote><h3 id="Kafka-æ˜¯å¦‚ä½•åšåˆ°æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Ÿ"><a href="#Kafka-æ˜¯å¦‚ä½•åšåˆ°æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Ÿ" class="headerlink" title="Kafka æ˜¯å¦‚ä½•åšåˆ°æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Ÿ"></a>Kafka æ˜¯å¦‚ä½•åšåˆ°æ¶ˆæ¯çš„æœ‰åºæ€§ï¼Ÿ</h3></blockquote><p>kafka ä¸­çš„æ¯ä¸ª partition ä¸­çš„æ¶ˆæ¯åœ¨å†™å…¥æ—¶éƒ½æ˜¯æœ‰åºçš„ï¼Œè€Œä¸”å•ç‹¬ä¸€ä¸ª partition åªèƒ½ç”±ä¸€ä¸ªæ¶ˆè´¹è€…å»æ¶ˆè´¹ï¼Œå¯ä»¥åœ¨é‡Œé¢ä¿è¯æ¶ˆæ¯çš„é¡ºåºæ€§ã€‚ä½†æ˜¯åˆ†åŒºä¹‹é—´çš„æ¶ˆæ¯æ˜¯ä¸ä¿è¯æœ‰åºçš„ã€‚</p><blockquote><h3 id="Kafka-çš„é«˜å¯é æ€§æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"><a href="#Kafka-çš„é«˜å¯é æ€§æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ" class="headerlink" title="Kafka çš„é«˜å¯é æ€§æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"></a>Kafka çš„é«˜å¯é æ€§æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</h3></blockquote><p>å¯å›ç­”ï¼šKafka åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºç°æ¶ˆæ¯ä¸¢å¤±ï¼Ÿ</p><blockquote><p>æ•°æ®å¯é æ€§ï¼ˆå¯å›ç­” æ€ä¹ˆå°½å¯èƒ½ä¿è¯ Kafka çš„å¯é æ€§ï¼Ÿï¼‰</p></blockquote><p>Kafka ä½œä¸ºä¸€ä¸ªå•†ä¸šçº§æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œæ¶ˆæ¯å¯é æ€§çš„é‡è¦æ€§å¯æƒ³è€ŒçŸ¥ã€‚æœ¬æ–‡ä» Producer å¾€ Broker å‘é€æ¶ˆæ¯ã€Topic åˆ†åŒºå‰¯æœ¬ä»¥åŠ Leader é€‰ä¸¾å‡ ä¸ªè§’åº¦ä»‹ç»æ•°æ®çš„å¯é æ€§ã€‚</p><ul><li><p>Topicåˆ†åŒºå‰¯æœ¬</p><p>åœ¨ Kafka 0.8.0 ä¹‹å‰ï¼ŒKafka æ˜¯æ²¡æœ‰å‰¯æœ¬çš„æ¦‚å¿µçš„ï¼Œé‚£æ—¶å€™äººä»¬åªä¼šç”¨ Kafka å­˜å‚¨ä¸€äº›ä¸é‡è¦çš„æ•°æ®ï¼Œå› ä¸ºæ²¡æœ‰å‰¯æœ¬ï¼Œæ•°æ®å¾ˆå¯èƒ½ä¼šä¸¢å¤±ã€‚ä½†æ˜¯éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œæ”¯æŒå‰¯æœ¬çš„åŠŸèƒ½è¶Šæ¥è¶Šå¼ºçƒˆï¼Œæ‰€ä»¥ä¸ºäº†ä¿è¯æ•°æ®çš„å¯é æ€§ï¼ŒKafka ä» 0.8.0 ç‰ˆæœ¬å¼€å§‹å¼•å…¥äº†åˆ†åŒºå‰¯æœ¬ï¼ˆè¯¦æƒ…è¯·å‚è§ KAFKA-50ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªåˆ†åŒºå¯ä»¥äººä¸ºçš„é…ç½®å‡ ä¸ªå‰¯æœ¬ï¼ˆæ¯”å¦‚åˆ›å»ºä¸»é¢˜çš„æ—¶å€™æŒ‡å®š <code>replication-factor</code>ï¼Œä¹Ÿå¯ä»¥åœ¨ Broker çº§åˆ«è¿›è¡Œé…ç½® <code>default.replication.factor</code>ï¼‰ï¼Œä¸€èˆ¬ä¼šè®¾ç½®ä¸º 3ã€‚</p><p>Kafka å¯ä»¥ä¿è¯å•ä¸ªåˆ†åŒºé‡Œçš„äº‹ä»¶æ˜¯æœ‰åºçš„ï¼Œåˆ†åŒºå¯ä»¥åœ¨çº¿ï¼ˆå¯ç”¨ï¼‰ï¼Œä¹Ÿå¯ä»¥ç¦»çº¿ï¼ˆä¸å¯ç”¨ï¼‰ã€‚åœ¨ä¼—å¤šçš„åˆ†åŒºå‰¯æœ¬é‡Œé¢æœ‰ä¸€ä¸ªå‰¯æœ¬æ˜¯ Leaderï¼Œå…¶ä½™çš„å‰¯æœ¬æ˜¯ Followerï¼Œæ‰€æœ‰çš„è¯»å†™æ“ä½œéƒ½æ˜¯ç»è¿‡ Leader è¿›è¡Œçš„ï¼ŒåŒæ—¶ Follower ä¼šå®šæœŸåœ°å» Leader ä¸Šçš„å¤åˆ¶æ•°æ®ã€‚å½“ Leader æŒ‚äº†çš„æ—¶å€™ï¼Œå…¶ä¸­ä¸€ä¸ª Follower ä¼šé‡æ–°æˆä¸ºæ–°çš„ Leaderã€‚é€šè¿‡åˆ†åŒºå‰¯æœ¬ï¼Œå¼•å…¥äº†æ•°æ®å†—ä½™ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº† Kafka çš„æ•°æ®å¯é æ€§ã€‚</p><p>Kafka çš„åˆ†åŒºå¤šå‰¯æœ¬æ¶æ„æ˜¯ Kafka å¯é æ€§ä¿è¯çš„æ ¸å¿ƒï¼ŒæŠŠæ¶ˆæ¯å†™å…¥å¤šä¸ªå‰¯æœ¬å¯ä»¥ä½¿ Kafka åœ¨å‘ç”Ÿå´©æºƒæ—¶ä»èƒ½ä¿è¯æ¶ˆæ¯çš„æŒä¹…æ€§ã€‚</p></li><li><p>Producer å¾€ Broker å‘é€æ¶ˆæ¯</p><p>å¦‚æœæˆ‘ä»¬è¦å¾€ Kafka å¯¹åº”çš„ä¸»é¢˜å‘é€æ¶ˆæ¯ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ Producer å®Œæˆã€‚å‰é¢æˆ‘ä»¬è®²è¿‡ Kafka ä¸»é¢˜å¯¹åº”äº†å¤šä¸ªåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºä¸‹é¢åˆå¯¹åº”äº†å¤šä¸ªå‰¯æœ¬ï¼›ä¸ºäº†è®©ç”¨æˆ·è®¾ç½®æ•°æ®å¯é æ€§ï¼ŒKafka åœ¨ Producer é‡Œé¢æä¾›äº†æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®æ¥å†³å®šæ¶ˆæ¯å‘é€åˆ°å¯¹åº”åˆ†åŒºçš„å‡ ä¸ªå‰¯æœ¬æ‰ç®—æ¶ˆæ¯å‘é€æˆåŠŸã€‚å¯ä»¥åœ¨å®šä¹‰ Producer æ—¶é€šè¿‡ <code>acks</code> å‚æ•°æŒ‡å®šï¼ˆåœ¨ 0.8.2.X ç‰ˆæœ¬ä¹‹å‰æ˜¯é€šè¿‡ <code>request.required.acks</code> å‚æ•°è®¾ç½®çš„ï¼‰ã€‚</p><p>è¿™ä¸ªå‚æ•°æ”¯æŒä»¥ä¸‹ä¸‰ç§å€¼ï¼š</p><ul><li><p><code>acks = 0</code>ï¼šæ„å‘³ç€å¦‚æœç”Ÿäº§è€…èƒ½å¤Ÿé€šè¿‡ç½‘ç»œæŠŠæ¶ˆæ¯å‘é€å‡ºå»ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºæ¶ˆæ¯å·²æˆåŠŸå†™å…¥ Kafkaã€‚åœ¨è¿™ç§æƒ…å†µä¸‹è¿˜æ˜¯æœ‰å¯èƒ½å‘ç”Ÿé”™è¯¯ï¼Œæ¯”å¦‚å‘é€çš„å¯¹è±¡æ— èƒ½è¢«åºåˆ—åŒ–æˆ–è€…ç½‘å¡å‘ç”Ÿæ•…éšœï¼Œä½†å¦‚æœæ˜¯åˆ†åŒºç¦»çº¿æˆ–æ•´ä¸ªé›†ç¾¤é•¿æ—¶é—´ä¸å¯ç”¨ï¼Œé‚£å°±ä¸ä¼šæ”¶åˆ°ä»»ä½•é”™è¯¯ã€‚åœ¨ <code>acks = 0</code> æ¨¡å¼ä¸‹çš„è¿è¡Œé€Ÿåº¦æ˜¯éå¸¸å¿«çš„ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šåŸºå‡†æµ‹è¯•éƒ½æ˜¯åŸºäºè¿™ä¸ªæ¨¡å¼ï¼‰ï¼Œä½ å¯ä»¥å¾—åˆ°æƒŠäººçš„ååé‡å’Œå¸¦å®½åˆ©ç”¨ç‡ï¼Œä¸è¿‡å¦‚æœé€‰æ‹©äº†è¿™ç§æ¨¡å¼ï¼Œä¸€å®šä¼šä¸¢å¤±ä¸€äº›æ¶ˆæ¯ã€‚</p></li><li><p><code>acks = 1</code>ï¼šæ„å‘³è‹¥ Leader åœ¨æ”¶åˆ°æ¶ˆæ¯å¹¶æŠŠå®ƒå†™å…¥åˆ°åˆ†åŒºæ•°æ®æ–‡ä»¶ï¼ˆä¸ä¸€å®šåŒæ­¥åˆ°ç£ç›˜ä¸Šï¼‰æ—¶ä¼šè¿”å›ç¡®è®¤æˆ–é”™è¯¯å“åº”ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œå¦‚æœå‘ç”Ÿæ­£å¸¸çš„ Leader é€‰ä¸¾ï¼Œç”Ÿäº§è€…ä¼šåœ¨é€‰ä¸¾æ—¶æ”¶åˆ°ä¸€ä¸ª <code>LeaderNotAvailableException</code> å¼‚å¸¸ï¼Œå¦‚æœç”Ÿäº§è€…èƒ½æ°å½“åœ°å¤„ç†è¿™ä¸ªé”™è¯¯ï¼Œå®ƒä¼šé‡è¯•å‘é€æ‚„æ¯ï¼Œæœ€ç»ˆæ¶ˆæ¯ä¼šå®‰å…¨åˆ°è¾¾æ–°çš„ Leader é‚£é‡Œã€‚ä¸è¿‡åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹ä»ç„¶æœ‰å¯èƒ½ä¸¢å¤±æ•°æ®ï¼Œæ¯”å¦‚æ¶ˆæ¯å·²ç»æˆåŠŸå†™å…¥ Leaderï¼Œä½†åœ¨æ¶ˆæ¯è¢«å¤åˆ¶åˆ° Follower å‰¯æœ¬ä¹‹å‰ Leader å‘ç”Ÿå´©æºƒã€‚</p></li><li><p><code>acks = all</code>ï¼ˆè¿™ä¸ªå’Œ <code>request.required.acks=-1</code> å«ä¹‰ä¸€æ ·ï¼‰ï¼šæ„å‘³ç€ Leader åœ¨è¿”å›ç¡®è®¤æˆ–é”™è¯¯å“åº”ä¹‹å‰ï¼Œä¼šç­‰å¾…æ‰€æœ‰åŒæ­¥å‰¯æœ¬éƒ½æ”¶åˆ°æ‚„æ¯ã€‚å¦‚æœå’Œ <code>min.insync.replicas</code> å‚æ•°ç»“åˆèµ·æ¥ï¼Œå°±å¯ä»¥å†³å®šåœ¨è¿”å›ç¡®è®¤å‰è‡³å°‘æœ‰å¤šå°‘ä¸ªå‰¯æœ¬èƒ½å¤Ÿæ”¶åˆ°æ‚„æ¯ï¼Œç”Ÿäº§è€…ä¼šä¸€ç›´é‡è¯•ç›´åˆ°æ¶ˆæ¯è¢«æˆåŠŸæäº¤ã€‚ä¸è¿‡è¿™ä¹Ÿæ˜¯æœ€æ…¢çš„åšæ³•ï¼Œå› ä¸ºç”Ÿäº§è€…åœ¨ç»§ç»­å‘é€å…¶ä»–æ¶ˆæ¯ä¹‹å‰éœ€è¦ç­‰å¾…æ‰€æœ‰å‰¯æœ¬éƒ½æ”¶åˆ°å½“å‰çš„æ¶ˆæ¯ã€‚</p></li></ul><p>æ ¹æ®å®é™…çš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬è®¾ç½®ä¸åŒçš„ <code>acks</code>ï¼Œä»¥æ­¤ä¿è¯æ•°æ®çš„å¯é æ€§ã€‚</p><p>å¦å¤–ï¼ŒProducer å‘é€æ¶ˆæ¯è¿˜å¯ä»¥é€‰æ‹©åŒæ­¥ï¼ˆé»˜è®¤ï¼Œé€šè¿‡ <code>producer.type=sync</code> é…ç½®ï¼‰ æˆ–è€…å¼‚æ­¥ï¼ˆ<code>producer.type=async</code>ï¼‰æ¨¡å¼ã€‚å¦‚æœè®¾ç½®æˆå¼‚æ­¥ï¼Œè™½ç„¶ä¼šæå¤§çš„æé«˜æ¶ˆæ¯å‘é€çš„æ€§èƒ½ï¼Œä½†æ˜¯è¿™æ ·ä¼šå¢åŠ ä¸¢å¤±æ•°æ®çš„é£é™©ã€‚å¦‚æœéœ€è¦ç¡®ä¿æ¶ˆæ¯çš„å¯é æ€§ï¼Œå¿…é¡»å°† <code>producer.type</code> è®¾ç½®ä¸º <code>sync</code>ã€‚</p></li><li><p>Leader é€‰ä¸¾</p><p>åœ¨ä»‹ç» Leader é€‰ä¸¾ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ ISRï¼ˆin-sync replicasï¼‰åˆ—è¡¨ã€‚æ¯ä¸ªåˆ†åŒºçš„ Leader ä¼šç»´æŠ¤ä¸€ä¸ª ISR åˆ—è¡¨ï¼ŒISR åˆ—è¡¨é‡Œé¢å°±æ˜¯ Follower å‰¯æœ¬çš„ Broker ç¼–å·ï¼Œåªæœ‰è·Ÿå¾—ä¸Š Leader çš„ Follower å‰¯æœ¬æ‰èƒ½åŠ å…¥åˆ° ISR é‡Œé¢ï¼Œè¿™ä¸ªæ˜¯é€šè¿‡ <code>replica.lag.time.max.ms</code> å‚æ•°é…ç½®çš„ã€‚åªæœ‰ ISR é‡Œçš„æˆå‘˜æ‰æœ‰è¢«é€‰ä¸º Leader çš„å¯èƒ½ã€‚</p></li></ul><blockquote><p>æ•°æ®ä¸€è‡´æ€§ï¼ˆå¯å›ç­” Kafka æ•°æ®ä¸€è‡´æ€§åŸç†ï¼Ÿï¼‰</p></blockquote><p>è¿™é‡Œä»‹ç»çš„æ•°æ®ä¸€è‡´æ€§ä¸»è¦æ˜¯è¯´ä¸è®ºæ˜¯è€çš„ Leader è¿˜æ˜¯æ–°é€‰ä¸¾çš„ Leaderï¼ŒConsumer éƒ½èƒ½è¯»åˆ°ä¸€æ ·çš„æ•°æ®ã€‚é‚£ä¹ˆ Kafka æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/kafka_highwatermark.png" alt></p><p>å‡è®¾åˆ†åŒºçš„å‰¯æœ¬ä¸º 3ï¼Œå…¶ä¸­å‰¯æœ¬ 0 æ˜¯ Leaderï¼Œå‰¯æœ¬ 1 å’Œå‰¯æœ¬ 2 æ˜¯ Followerï¼Œå¹¶ä¸”åœ¨ ISR åˆ—è¡¨é‡Œé¢ã€‚è™½ç„¶å‰¯æœ¬ 0 å·²ç»å†™å…¥äº† Message4ï¼Œä½†æ˜¯ Consumer åªèƒ½è¯»å–åˆ° Message2ã€‚å› ä¸ºæ‰€æœ‰çš„ ISR éƒ½åŒæ­¥äº† Message2ï¼Œåªæœ‰ High Water Mark ä»¥ä¸Šçš„æ¶ˆæ¯æ‰æ”¯æŒ Consumer è¯»å–ï¼Œè€Œ High Water Mark å–å†³äº ISR åˆ—è¡¨é‡Œé¢åç§»é‡æœ€å°çš„åˆ†åŒºï¼Œå¯¹åº”äºä¸Šå›¾çš„å‰¯æœ¬ 2ï¼Œè¿™ä¸ªå¾ˆç±»ä¼¼äºæœ¨æ¡¶åŸç†ã€‚</p><p>è¿™æ ·åšçš„åŸå› æ˜¯è¿˜æ²¡æœ‰è¢«è¶³å¤Ÿå¤šå‰¯æœ¬å¤åˆ¶çš„æ¶ˆæ¯è¢«è®¤ä¸ºæ˜¯â€œä¸å®‰å…¨â€çš„ï¼Œå¦‚æœ Leader å‘ç”Ÿå´©æºƒï¼Œå¦ä¸€ä¸ªå‰¯æœ¬æˆä¸ºæ–° Leaderï¼Œé‚£ä¹ˆè¿™äº›æ¶ˆæ¯å¾ˆå¯èƒ½ä¸¢å¤±äº†ã€‚å¦‚æœæˆ‘ä»¬å…è®¸æ¶ˆè´¹è€…è¯»å–è¿™äº›æ¶ˆæ¯ï¼Œå¯èƒ½å°±ä¼šç ´åä¸€è‡´æ€§ã€‚è¯•æƒ³ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…ä»å½“å‰ Leaderï¼ˆå‰¯æœ¬0ï¼‰è¯»å–å¹¶å¤„ç†äº† Message4ï¼Œè¿™ä¸ªæ—¶å€™ Leader æŒ‚æ‰äº†ï¼Œé€‰ä¸¾äº†å‰¯æœ¬ 1 ä¸ºæ–°çš„ Leaderï¼Œè¿™æ—¶å€™å¦ä¸€ä¸ªæ¶ˆè´¹è€…å†å»ä»æ–°çš„ Leader è¯»å–æ¶ˆæ¯ï¼Œå‘ç°è¿™ä¸ªæ¶ˆæ¯å…¶å®å¹¶ä¸å­˜åœ¨ï¼Œè¿™å°±å¯¼è‡´äº†æ•°æ®ä¸ä¸€è‡´æ€§é—®é¢˜ã€‚</p><p>å½“ç„¶ï¼Œå¼•å…¥äº† High Water Mark æœºåˆ¶ï¼Œä¼šå¯¼è‡´ Broker é—´çš„æ¶ˆæ¯å¤åˆ¶å› ä¸ºæŸäº›åŸå› å˜æ…¢ï¼Œé‚£ä¹ˆæ¶ˆæ¯åˆ°è¾¾æ¶ˆè´¹è€…çš„æ—¶é—´ä¹Ÿä¼šéšä¹‹å˜é•¿ï¼ˆå› ä¸ºæˆ‘ä»¬ä¼šå…ˆç­‰å¾…æ¶ˆæ¯å¤åˆ¶å®Œæ¯•ï¼‰ã€‚å»¶è¿Ÿæ—¶é—´å¯ä»¥é€šè¿‡å‚æ•° <code>replica.lag.time.max.ms</code> å‚æ•°é…ç½®ï¼Œå®ƒæŒ‡å®šäº†å‰¯æœ¬åœ¨å¤åˆ¶æ¶ˆæ¯æ—¶å¯è¢«å…è®¸çš„æœ€å¤§å»¶è¿Ÿæ—¶é—´ã€‚</p><blockquote><h3 id="ISRã€OSRã€AR-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ISRã€OSRã€AR-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ISRã€OSRã€AR æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ISRã€OSRã€AR æ˜¯ä»€ä¹ˆï¼Ÿ</h3></blockquote><ul><li>ISRï¼šIn-Sync Replicas å‰¯æœ¬åŒæ­¥é˜Ÿåˆ—</li><li>OSRï¼šOut-of-Sync Replicas</li><li>ARï¼šAssigned Replicas æ‰€æœ‰å‰¯æœ¬</li></ul><p><code>AR = ISR + OSR</code></p><p>ISR æ˜¯ç”± Leader ç»´æŠ¤ï¼ŒFollower ä» Leader åŒæ­¥æ•°æ®æœ‰ä¸€äº›å»¶è¿Ÿï¼ˆå…·ä½“å¯ä»¥å‚è§ Kafka çš„å‰¯æœ¬å¤åˆ¶æœºåˆ¶ï¼‰ï¼Œè¶…è¿‡ç›¸åº”çš„é˜ˆå€¼ä¼šæŠŠ Follower å‰”é™¤å‡º ISRï¼Œå­˜å…¥ OSRï¼ˆOut-of-Sync Replicasï¼‰åˆ—è¡¨ï¼Œæ–°åŠ å…¥çš„ Follower ä¹Ÿä¼šå…ˆå­˜æ”¾åœ¨ OSR ä¸­ã€‚</p><blockquote><h3 id="è§£é‡Šå¦‚ä½•å‡å°‘-ISR-ä¸­çš„æ‰°åŠ¨ï¼Ÿbroker-ä»€ä¹ˆæ—¶å€™ç¦»å¼€-ISRï¼Ÿ"><a href="#è§£é‡Šå¦‚ä½•å‡å°‘-ISR-ä¸­çš„æ‰°åŠ¨ï¼Ÿbroker-ä»€ä¹ˆæ—¶å€™ç¦»å¼€-ISRï¼Ÿ" class="headerlink" title="è§£é‡Šå¦‚ä½•å‡å°‘ ISR ä¸­çš„æ‰°åŠ¨ï¼Ÿbroker ä»€ä¹ˆæ—¶å€™ç¦»å¼€ ISRï¼Ÿ"></a>è§£é‡Šå¦‚ä½•å‡å°‘ ISR ä¸­çš„æ‰°åŠ¨ï¼Ÿbroker ä»€ä¹ˆæ—¶å€™ç¦»å¼€ ISRï¼Ÿ</h3></blockquote><p>ISR æ˜¯ä¸€ç»„ä¸ Leader å®Œå…¨åŒæ­¥çš„æ¶ˆæ¯å‰¯æœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´ ISR ä¸­åŒ…å«äº†æ‰€æœ‰æäº¤çš„æ¶ˆæ¯ã€‚ISR åº”è¯¥æ€»æ˜¯åŒ…å«æ‰€æœ‰çš„å‰¯æœ¬ï¼Œç›´åˆ°å‡ºç°çœŸæ­£çš„æ•…éšœã€‚å¦‚æœä¸€ä¸ªå‰¯æœ¬ä» Leader ä¸­è„±ç¦»å‡ºæ¥ï¼Œå°†ä¼šä» ISR ä¸­åˆ é™¤ã€‚</p><blockquote><h3 id="å¦‚æœå‰¯æœ¬åœ¨-ISR-ä¸­åœç•™äº†å¾ˆé•¿æ—¶é—´è¡¨æ˜ä»€ä¹ˆï¼Ÿ"><a href="#å¦‚æœå‰¯æœ¬åœ¨-ISR-ä¸­åœç•™äº†å¾ˆé•¿æ—¶é—´è¡¨æ˜ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å¦‚æœå‰¯æœ¬åœ¨ ISR ä¸­åœç•™äº†å¾ˆé•¿æ—¶é—´è¡¨æ˜ä»€ä¹ˆï¼Ÿ"></a>å¦‚æœå‰¯æœ¬åœ¨ ISR ä¸­åœç•™äº†å¾ˆé•¿æ—¶é—´è¡¨æ˜ä»€ä¹ˆï¼Ÿ</h3></blockquote><p>å¦‚æœä¸€ä¸ªå‰¯æœ¬åœ¨ ISR ä¸­ä¿ç•™äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œé‚£ä¹ˆå®ƒå°±è¡¨æ˜ï¼Œè·Ÿè¸ªå™¨æ— æ³•åƒåœ¨ Leader æ”¶é›†æ•°æ®é‚£æ ·å¿«é€Ÿåœ°è·å–æ•°æ®ã€‚</p><blockquote><h3 id="è¯·è¯´æ˜å¦‚æœé¦–é€‰çš„å‰¯æœ¬ä¸åœ¨-ISR-ä¸­ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"><a href="#è¯·è¯´æ˜å¦‚æœé¦–é€‰çš„å‰¯æœ¬ä¸åœ¨-ISR-ä¸­ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ" class="headerlink" title="è¯·è¯´æ˜å¦‚æœé¦–é€‰çš„å‰¯æœ¬ä¸åœ¨ ISR ä¸­ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ"></a>è¯·è¯´æ˜å¦‚æœé¦–é€‰çš„å‰¯æœ¬ä¸åœ¨ ISR ä¸­ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h3></blockquote><p>å¦‚æœé¦–é€‰çš„å‰¯æœ¬ä¸åœ¨ ISR ä¸­ï¼Œæ§åˆ¶å™¨å°†æ— æ³•å°† leadership è½¬ç§»åˆ°é¦–é€‰çš„å‰¯æœ¬ã€‚</p><blockquote><h3 id="LEOã€HWã€LSOã€LW-ç­‰åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿ"><a href="#LEOã€HWã€LSOã€LW-ç­‰åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿ" class="headerlink" title="LEOã€HWã€LSOã€LW ç­‰åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿ"></a>LEOã€HWã€LSOã€LW ç­‰åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿ</h3></blockquote><ul><li>LEOï¼šæ˜¯ LogEndOffset çš„ç®€ç§°ï¼Œä»£è¡¨å½“å‰æ—¥å¿—æ–‡ä»¶ä¸­ä¸‹ä¸€æ¡ã€‚</li><li>HWï¼šæ°´ä½æˆ–æ°´å°ï¼ˆwatermarkï¼‰ä¸€è¯ï¼Œä¹Ÿå¯ç§°ä¸ºé«˜æ°´ä½(high watermark)ï¼Œé€šå¸¸è¢«ç”¨åœ¨æµå¼å¤„ç†é¢†åŸŸï¼ˆæ¯”å¦‚ Apache Flinkã€Apache Spark ç­‰ï¼‰ï¼Œä»¥è¡¨å¾å…ƒç´ æˆ–äº‹ä»¶åœ¨åŸºäºæ—¶é—´å±‚é¢ä¸Šçš„è¿›åº¦ã€‚åœ¨ Kafka ä¸­ï¼Œæ°´ä½çš„æ¦‚å¿µåè€Œä¸æ—¶é—´æ— å…³ï¼Œè€Œæ˜¯ä¸ä½ç½®ä¿¡æ¯ç›¸å…³ã€‚ä¸¥æ ¼æ¥è¯´ï¼Œå®ƒè¡¨ç¤ºçš„å°±æ˜¯ä½ç½®ä¿¡æ¯ï¼Œå³ä½ç§»ï¼ˆoffsetï¼‰ã€‚å– partition å¯¹åº”çš„ ISR ä¸­æœ€å°çš„ LEO ä½œä¸º HWï¼Œconsumer æœ€å¤šåªèƒ½æ¶ˆè´¹åˆ° HW æ‰€åœ¨çš„ä½ç½®ä¸Šä¸€æ¡ä¿¡æ¯ã€‚</li><li>LSOï¼šæ˜¯ LastStableOffset çš„ç®€ç§°ï¼Œå¯¹æœªå®Œæˆçš„äº‹åŠ¡è€Œè¨€ï¼ŒLSO çš„å€¼ç­‰äºäº‹åŠ¡ä¸­ç¬¬ä¸€æ¡æ¶ˆæ¯çš„ä½ç½®ï¼ˆfirstUnstableOffsetï¼‰ï¼Œå¯¹å·²å®Œæˆçš„äº‹åŠ¡è€Œè¨€ï¼Œå®ƒçš„å€¼åŒ HW ç›¸åŒã€‚</li><li>LWï¼šLow Watermark ä½æ°´ä½ï¼Œä»£è¡¨ AR é›†åˆä¸­æœ€å°çš„ logStartOffset å€¼ã€‚</li></ul><blockquote><h3 id="æ•°æ®ä¼ è¾“çš„äº‹åŠ¡æœ‰å‡ ç§ï¼Ÿ-è¯·è¯´æ˜-Kafka-çš„æ¶ˆæ¯æŠ•é€’ä¿è¯ï¼ˆdelivery-guaranteeï¼‰æœºåˆ¶ä»¥åŠå¦‚ä½•å®ç°ï¼Ÿ"><a href="#æ•°æ®ä¼ è¾“çš„äº‹åŠ¡æœ‰å‡ ç§ï¼Ÿ-è¯·è¯´æ˜-Kafka-çš„æ¶ˆæ¯æŠ•é€’ä¿è¯ï¼ˆdelivery-guaranteeï¼‰æœºåˆ¶ä»¥åŠå¦‚ä½•å®ç°ï¼Ÿ" class="headerlink" title="æ•°æ®ä¼ è¾“çš„äº‹åŠ¡æœ‰å‡ ç§ï¼Ÿ / è¯·è¯´æ˜ Kafka çš„æ¶ˆæ¯æŠ•é€’ä¿è¯ï¼ˆdelivery guaranteeï¼‰æœºåˆ¶ä»¥åŠå¦‚ä½•å®ç°ï¼Ÿ"></a>æ•°æ®ä¼ è¾“çš„äº‹åŠ¡æœ‰å‡ ç§ï¼Ÿ / è¯·è¯´æ˜ Kafka çš„æ¶ˆæ¯æŠ•é€’ä¿è¯ï¼ˆdelivery guaranteeï¼‰æœºåˆ¶ä»¥åŠå¦‚ä½•å®ç°ï¼Ÿ</h3></blockquote><p>æ•°æ®ä¼ è¾“çš„äº‹åŠ¡å®šä¹‰é€šå¸¸æœ‰ä»¥ä¸‹ä¸‰ç§çº§åˆ«ï¼š/ Kafka æ”¯æŒä¸‰ç§æ¶ˆæ¯æŠ•é€’è¯­ä¹‰ï¼š</p><ul><li>æœ€å¤šä¸€æ¬¡ï¼ˆAt most onceï¼‰ï¼šæ¶ˆæ¯ä¸ä¼šè¢«é‡å¤å‘é€ï¼Œæœ€å¤šè¢«ä¼ è¾“ä¸€æ¬¡ï¼Œä½†ä¹Ÿæœ‰å¯èƒ½ä¸€æ¬¡ä¸ä¼ è¾“ï¼›</li><li>æœ€å°‘ä¸€æ¬¡ï¼ˆAt least oneï¼‰ï¼šæ¶ˆæ¯ä¸ä¼šè¢«æ¼å‘é€ï¼Œæœ€å°‘è¢«ä¼ è¾“ä¸€æ¬¡ï¼Œä½†ä¹Ÿæœ‰å¯èƒ½è¢«é‡å¤ä¼ è¾“ï¼›</li><li>ç²¾ç¡®çš„ä¸€æ¬¡ï¼ˆExactly onceï¼‰ï¼šä¸ä¼šæ¼ä¼ è¾“ä¹Ÿä¸ä¼šé‡å¤ä¼ è¾“ï¼Œæ¯ä¸ªæ¶ˆæ¯éƒ½ä¼ è¾“è¢«æ¥æ”¶ã€‚</li></ul><p>consumer åœ¨ä» broker è¯»å–æ¶ˆæ¯åï¼Œå¯ä»¥é€‰æ‹© commitï¼Œè¯¥æ“ä½œä¼šåœ¨ Zookeeper ä¸­å­˜ä¸‹è¯¥ consumer åœ¨è¯¥ partition ä¸‹è¯»å–çš„æ¶ˆæ¯çš„ offsetï¼Œè¯¥ consumer ä¸‹ä¸€æ¬¡å†è¯»è¯¥ partition æ—¶ä¼šä»ä¸‹ä¸€æ¡å¼€å§‹è¯»å–ã€‚å¦‚æœª commitï¼Œä¸‹ä¸€æ¬¡è¯»å–çš„å¼€å§‹ä½ç½®ä¼šè·Ÿä¸Šä¸€æ¬¡ commit ä¹‹åçš„å¼€å§‹ä½ç½®ç›¸åŒã€‚</p><p>å¯ä»¥å°† consumer è®¾ç½®ä¸º autocommitï¼Œå³ consumer ä¸€æ—¦è¯»åˆ°æ•°æ®ç«‹å³è‡ªåŠ¨ commitã€‚å¦‚æœåªè®¨è®ºè¿™ä¸€è¯»å–æ¶ˆæ¯çš„è¿‡ç¨‹ï¼Œé‚£ Kafka æ˜¯ç¡®ä¿äº† Exactly onceã€‚ä½†å®é™…ä¸Šå®é™…ä½¿ç”¨ä¸­ consumer å¹¶éè¯»å–å®Œæ•°æ®å°±ç»“æŸäº†ï¼Œè€Œæ˜¯è¦è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ï¼Œè€Œæ•°æ®å¤„ç†ä¸ commit çš„é¡ºåºåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå†³å®šäº†æ¶ˆæ¯ä» broker å’Œ consumer çš„ delivery guarantee semanticã€‚</p><p>è¯»å®Œæ¶ˆæ¯å…ˆ commit å†å¤„ç†æ¶ˆæ¯ã€‚è¿™ç§æ¨¡å¼ä¸‹ï¼Œå¦‚æœ consumer åœ¨ commit åè¿˜æ²¡æ¥å¾—åŠå¤„ç†æ¶ˆæ¯å°± crash äº†ï¼Œä¸‹æ¬¡é‡æ–°å¼€å§‹å·¥ä½œåå°±æ— æ³•è¯»åˆ°åˆšåˆšå·²æäº¤è€Œæœªå¤„ç†çš„æ¶ˆæ¯ï¼Œè¿™å°±å¯¹åº”äºAt most onceã€‚</p><p>è¯»å®Œæ¶ˆæ¯å…ˆå¤„ç†å† commit æ¶ˆè´¹çŠ¶æ€ï¼ˆä¿å­˜ offsetï¼‰ã€‚è¿™ç§æ¨¡å¼ä¸‹ï¼Œå¦‚æœåœ¨å¤„ç†å®Œæ¶ˆæ¯ä¹‹å commit ä¹‹å‰ Consumer crash äº†ï¼Œä¸‹æ¬¡é‡æ–°å¼€å§‹å·¥ä½œæ—¶è¿˜ä¼šå¤„ç†åˆšåˆšæœª commit çš„æ¶ˆæ¯ï¼Œå®é™…ä¸Šè¯¥æ¶ˆæ¯å·²ç»è¢«å¤„ç†è¿‡äº†ï¼Œè¿™å°±å¯¹åº”äº At least onceã€‚</p><p>å¦‚æœä¸€å®šè¦åšåˆ° Exactly onceï¼Œå°±éœ€è¦åè°ƒ offset å’Œå®é™…æ“ä½œçš„è¾“å‡ºã€‚ç»å…¸çš„åšæ³•æ˜¯å¼•å…¥ä¸¤é˜¶æ®µæäº¤ï¼Œä½†ç”±äºè®¸å¤šè¾“å‡ºç³»ç»Ÿä¸æ”¯æŒä¸¤é˜¶æ®µæäº¤ï¼Œæ›´ä¸ºé€šç”¨çš„æ–¹å¼æ˜¯å°† offset å’Œæ“ä½œè¾“å…¥å­˜åœ¨åŒä¸€ä¸ªåœ°æ–¹ã€‚æ¯”å¦‚ï¼Œconsumer æ‹¿åˆ°æ•°æ®åå¯èƒ½æŠŠæ•°æ®æ”¾åˆ° HDFSï¼Œå¦‚æœæŠŠæœ€æ–°çš„ offset å’Œæ•°æ®æœ¬èº«ä¸€èµ·å†™åˆ° HDFSï¼Œé‚£å°±å¯ä»¥ä¿è¯æ•°æ®çš„è¾“å‡ºå’Œ offset çš„æ›´æ–°è¦ä¹ˆéƒ½å®Œæˆï¼Œè¦ä¹ˆéƒ½ä¸å®Œæˆï¼Œé—´æ¥å®ç° Exactly onceã€‚ï¼ˆç›®å‰å°± high level API è€Œè¨€ï¼Œoffset æ˜¯å­˜äº Zookeeper ä¸­çš„ï¼Œæ— æ³•å­˜äº HDFSï¼Œè€Œ low level API çš„ offset æ˜¯ç”±è‡ªå·±å»ç»´æŠ¤çš„ï¼Œå¯ä»¥å°†ä¹‹å­˜äº HDFS ä¸­ï¼‰ã€‚</p><p>æ€»ä¹‹ï¼ŒKafka é»˜è®¤ä¿è¯ At least onceï¼Œå¹¶ä¸”å…è®¸é€šè¿‡è®¾ç½® producer å¼‚æ­¥æäº¤æ¥å®ç° At most onceï¼Œè€Œ Exactly once è¦æ±‚ä¸ç›®æ ‡å­˜å‚¨ç³»ç»Ÿåä½œï¼ŒKafka æä¾›çš„ offset å¯ä»¥è¾ƒä¸ºå®¹æ˜“åœ°å®ç°è¿™ç§æ–¹å¼ã€‚</p><blockquote><h3 id="Kafka-æœ‰å¯èƒ½åœ¨ç”Ÿäº§åå‘ç”Ÿæ¶ˆæ¯åç§»å—ï¼Ÿ"><a href="#Kafka-æœ‰å¯èƒ½åœ¨ç”Ÿäº§åå‘ç”Ÿæ¶ˆæ¯åç§»å—ï¼Ÿ" class="headerlink" title="Kafka æœ‰å¯èƒ½åœ¨ç”Ÿäº§åå‘ç”Ÿæ¶ˆæ¯åç§»å—ï¼Ÿ"></a>Kafka æœ‰å¯èƒ½åœ¨ç”Ÿäº§åå‘ç”Ÿæ¶ˆæ¯åç§»å—ï¼Ÿ</h3></blockquote><p>åœ¨å¤§å¤šæ•°é˜Ÿåˆ—ç³»ç»Ÿä¸­ï¼Œä½œä¸ºç”Ÿäº§è€…çš„ç±»æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ï¼Œå®ƒçš„ä½œç”¨æ˜¯è§¦å‘å¹¶å¿˜è®°æ¶ˆæ¯ã€‚broker å°†å®Œæˆå‰©ä¸‹çš„å·¥ä½œï¼Œæ¯”å¦‚ä½¿ç”¨ id è¿›è¡Œé€‚å½“çš„å…ƒæ•°æ®å¤„ç†ã€åç§»é‡ç­‰ã€‚</p><p>ä½œä¸ºæ¶ˆæ¯çš„ç”¨æˆ·ï¼Œä½ å¯ä»¥ä» Kafka broker ä¸­è·å¾—è¡¥å¿ã€‚å¦‚æœä½ æ³¨è§† <code>SimpleConsumer</code> ç±»ï¼Œä½ ä¼šæ³¨æ„åˆ°å®ƒä¼šè·å–åŒ…æ‹¬åç§»é‡ä½œä¸ºåˆ—è¡¨çš„ <code>MultiFetchResponse</code> å¯¹è±¡ã€‚æ­¤å¤–ï¼Œå½“ä½ å¯¹ Kafka æ¶ˆæ¯è¿›è¡Œè¿­ä»£æ—¶ï¼Œä½ ä¼šæ‹¥æœ‰åŒ…æ‹¬åç§»é‡å’Œæ¶ˆæ¯å‘é€çš„ <code>MessageAndOffset</code> å¯¹è±¡ã€‚</p><blockquote><h3 id="Kafka-æ¶ˆè´¹è€…æ˜¯å¦å¯ä»¥æ¶ˆè´¹æŒ‡å®šåˆ†åŒºæ¶ˆæ¯ï¼Ÿ"><a href="#Kafka-æ¶ˆè´¹è€…æ˜¯å¦å¯ä»¥æ¶ˆè´¹æŒ‡å®šåˆ†åŒºæ¶ˆæ¯ï¼Ÿ" class="headerlink" title="Kafka æ¶ˆè´¹è€…æ˜¯å¦å¯ä»¥æ¶ˆè´¹æŒ‡å®šåˆ†åŒºæ¶ˆæ¯ï¼Ÿ"></a>Kafka æ¶ˆè´¹è€…æ˜¯å¦å¯ä»¥æ¶ˆè´¹æŒ‡å®šåˆ†åŒºæ¶ˆæ¯ï¼Ÿ</h3></blockquote><p>Kafka consumer æ¶ˆè´¹æ¶ˆæ¯æ—¶ï¼Œå‘ broker å‘å‡º fetch è¯·æ±‚å»æ¶ˆè´¹ç‰¹å®šåˆ†åŒºçš„æ¶ˆæ¯ï¼Œconsumer æŒ‡å®šæ¶ˆæ¯åœ¨æ—¥å¿—ä¸­çš„åç§»é‡ï¼ˆoffsetï¼‰ï¼Œå°±å¯ä»¥æ¶ˆè´¹ä»è¿™ä¸ªä½ç½®å¼€å§‹çš„æ¶ˆæ¯ï¼Œcustomer æ‹¥æœ‰äº† offset çš„æ§åˆ¶æƒï¼Œå¯ä»¥å‘åå›æ»šå»é‡æ–°æ¶ˆè´¹ä¹‹å‰çš„æ¶ˆæ¯ï¼Œè¿™æ˜¯å¾ˆæœ‰æ„ä¹‰çš„ã€‚</p><blockquote><h3 id="Kafka-æ¶ˆæ¯æ˜¯é‡‡ç”¨-Pull-æ¨¡å¼ï¼Œè¿˜æ˜¯-Push-æ¨¡å¼ï¼Ÿ"><a href="#Kafka-æ¶ˆæ¯æ˜¯é‡‡ç”¨-Pull-æ¨¡å¼ï¼Œè¿˜æ˜¯-Push-æ¨¡å¼ï¼Ÿ" class="headerlink" title="Kafka æ¶ˆæ¯æ˜¯é‡‡ç”¨ Pull æ¨¡å¼ï¼Œè¿˜æ˜¯ Push æ¨¡å¼ï¼Ÿ"></a>Kafka æ¶ˆæ¯æ˜¯é‡‡ç”¨ Pull æ¨¡å¼ï¼Œè¿˜æ˜¯ Push æ¨¡å¼ï¼Ÿ</h3></blockquote><p>Kafka æœ€åˆè€ƒè™‘çš„é—®é¢˜æ˜¯ï¼Œcustomer åº”è¯¥ä»brokers æ‹‰å–æ¶ˆæ¯è¿˜æ˜¯ brokers å°†æ¶ˆæ¯æ¨é€åˆ° consumerï¼Œä¹Ÿå°±æ˜¯ pull è¿˜æ˜¯ pushã€‚åœ¨è¿™æ–¹é¢ï¼ŒKafka éµå¾ªäº†ä¸€ç§å¤§éƒ¨åˆ†æ¶ˆæ¯ç³»ç»Ÿå…±åŒçš„ä¼ ç»Ÿçš„è®¾è®¡ï¼šproducer å°†æ¶ˆæ¯æ¨é€åˆ° brokerï¼Œconsumer ä» broker æ‹‰å–æ¶ˆæ¯ã€‚</p><p>ä¸€äº›æ¶ˆæ¯ç³»ç»Ÿæ¯”å¦‚ Scribe å’Œ Apache Flume é‡‡ç”¨äº† push æ¨¡å¼ï¼Œå°†æ¶ˆæ¯æ¨é€åˆ°ä¸‹æ¸¸çš„ consumerã€‚è¿™æ ·åšæœ‰å¥½å¤„ä¹Ÿæœ‰åå¤„ï¼šç”± broker å†³å®šæ¶ˆæ¯æ¨é€çš„é€Ÿç‡ï¼Œå¯¹äºä¸åŒæ¶ˆè´¹é€Ÿç‡çš„ consumer å°±ä¸å¤ªå¥½å¤„ç†äº†ã€‚æ¶ˆæ¯ç³»ç»Ÿéƒ½è‡´åŠ›äºè®© consumer ä»¥æœ€å¤§çš„é€Ÿç‡æœ€å¿«é€Ÿçš„æ¶ˆè´¹æ¶ˆæ¯ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œpush æ¨¡å¼ä¸‹ï¼Œå½“ broker æ¨é€çš„é€Ÿç‡è¿œå¤§äº consumer æ¶ˆè´¹çš„é€Ÿç‡æ—¶ï¼Œconsumer ææ€•å°±è¦å´©æºƒäº†ã€‚æœ€ç»ˆ Kafka è¿˜æ˜¯é€‰å–äº†ä¼ ç»Ÿçš„ pull æ¨¡å¼ã€‚</p><p>Pull æ¨¡å¼çš„å¦å¤–ä¸€ä¸ªå¥½å¤„æ˜¯ consumer å¯ä»¥è‡ªä¸»å†³å®šæ˜¯å¦æ‰¹é‡çš„ä» broker æ‹‰å–æ•°æ®ã€‚Push æ¨¡å¼å¿…é¡»åœ¨ä¸çŸ¥é“ä¸‹æ¸¸ consumer æ¶ˆè´¹èƒ½åŠ›å’Œæ¶ˆè´¹ç­–ç•¥çš„æƒ…å†µä¸‹å†³å®šæ˜¯ç«‹å³æ¨é€æ¯æ¡æ¶ˆæ¯è¿˜æ˜¯ç¼“å­˜ä¹‹åæ‰¹é‡æ¨é€ã€‚å¦‚æœä¸ºäº†é¿å… consumer å´©æºƒè€Œé‡‡ç”¨è¾ƒä½çš„æ¨é€é€Ÿç‡ï¼Œå°†å¯èƒ½å¯¼è‡´ä¸€æ¬¡åªæ¨é€è¾ƒå°‘çš„æ¶ˆæ¯è€Œé€ æˆæµªè´¹ã€‚Pull æ¨¡å¼ä¸‹ï¼Œconsumer å°±å¯ä»¥æ ¹æ®è‡ªå·±çš„æ¶ˆè´¹èƒ½åŠ›å»å†³å®šè¿™äº›ç­–ç•¥ã€‚ Pull æœ‰ä¸ªç¼ºç‚¹æ˜¯ï¼Œå¦‚æœ broker æ²¡æœ‰å¯ä¾›æ¶ˆè´¹çš„æ¶ˆæ¯ï¼Œå°†å¯¼è‡´ consumer ä¸æ–­åœ¨å¾ªç¯ä¸­è½®è¯¢ï¼Œç›´åˆ°æ–°æ¶ˆæ¯åˆ°è¾¾ã€‚ä¸ºäº†é¿å…è¿™ç‚¹ï¼ŒKafka æœ‰ä¸ªå‚æ•°å¯ä»¥è®© consumer é˜»å¡çŸ¥é“æ–°æ¶ˆæ¯åˆ°è¾¾ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥é˜»å¡çŸ¥é“æ¶ˆæ¯çš„æ•°é‡è¾¾åˆ°æŸä¸ªç‰¹å®šçš„é‡è¿™æ ·å°±å¯ä»¥æ‰¹é‡å‘é€ï¼‰ã€‚</p><blockquote><h3 id="Kafka-é«˜æ•ˆæ–‡ä»¶å­˜å‚¨è®¾è®¡ç‰¹ç‚¹ï¼Ÿ"><a href="#Kafka-é«˜æ•ˆæ–‡ä»¶å­˜å‚¨è®¾è®¡ç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="Kafka é«˜æ•ˆæ–‡ä»¶å­˜å‚¨è®¾è®¡ç‰¹ç‚¹ï¼Ÿ"></a>Kafka é«˜æ•ˆæ–‡ä»¶å­˜å‚¨è®¾è®¡ç‰¹ç‚¹ï¼Ÿ</h3></blockquote><ul><li>Kafka æŠŠ topic ä¸­ä¸€ä¸ª partition å¤§æ–‡ä»¶åˆ†æˆå¤šä¸ªå°æ–‡ä»¶æ®µï¼Œé€šè¿‡å¤šä¸ªå°æ–‡ä»¶æ®µï¼Œå°±å®¹æ˜“å®šæœŸæ¸…é™¤æˆ–åˆ é™¤å·²ç»æ¶ˆè´¹å®Œæ–‡ä»¶ï¼Œå‡å°‘ç£ç›˜å ç”¨ã€‚</li><li>é€šè¿‡ç´¢å¼•ä¿¡æ¯å¯ä»¥å¿«é€Ÿå®šä½ message å’Œç¡®å®š response çš„æœ€å¤§å¤§å°ã€‚</li><li>é€šè¿‡ index å…ƒæ•°æ®å…¨éƒ¨æ˜ å°„åˆ° memoryï¼Œå¯ä»¥é¿å… segment file çš„ IO ç£ç›˜æ“ä½œã€‚</li><li>é€šè¿‡ç´¢å¼•æ–‡ä»¶ç¨€ç–å­˜å‚¨ï¼Œå¯ä»¥å¤§å¹…é™ä½ index æ–‡ä»¶å…ƒæ•°æ®å ç”¨ç©ºé—´å¤§å°ã€‚</li></ul><blockquote><h3 id="Kafka-åˆ›å»º-Topic-æ—¶å¦‚ä½•å°†åˆ†åŒºæ”¾ç½®åˆ°ä¸åŒçš„-Broker-ä¸­ï¼Ÿ"><a href="#Kafka-åˆ›å»º-Topic-æ—¶å¦‚ä½•å°†åˆ†åŒºæ”¾ç½®åˆ°ä¸åŒçš„-Broker-ä¸­ï¼Ÿ" class="headerlink" title="Kafka åˆ›å»º Topic æ—¶å¦‚ä½•å°†åˆ†åŒºæ”¾ç½®åˆ°ä¸åŒçš„ Broker ä¸­ï¼Ÿ"></a>Kafka åˆ›å»º Topic æ—¶å¦‚ä½•å°†åˆ†åŒºæ”¾ç½®åˆ°ä¸åŒçš„ Broker ä¸­ï¼Ÿ</h3></blockquote><ul><li>å‰¯æœ¬å› å­ä¸èƒ½å¤§äº Broker çš„ä¸ªæ•°ã€‚</li><li>ç¬¬ä¸€ä¸ªåˆ†åŒºï¼ˆç¼–å·ä¸º 0ï¼‰çš„ç¬¬ä¸€ä¸ªå‰¯æœ¬æ”¾ç½®ä½ç½®æ˜¯éšæœºä» brokerList é€‰æ‹©çš„ã€‚</li><li>å…¶ä»–åˆ†åŒºçš„ç¬¬ä¸€ä¸ªå‰¯æœ¬æ”¾ç½®ä½ç½®ç›¸å¯¹äºç¬¬ 0 ä¸ªåˆ†åŒºä¾æ¬¡å¾€åç§»ã€‚ä¹Ÿå°±æ˜¯å¦‚æœæˆ‘ä»¬æœ‰ 5 ä¸ª Brokerï¼Œ5 ä¸ªåˆ†åŒºï¼Œå‡è®¾ç¬¬ä¸€ä¸ªåˆ†åŒºæ”¾åœ¨ç¬¬å››ä¸ª Broker ä¸Šï¼Œé‚£ä¹ˆç¬¬äºŒä¸ªåˆ†åŒºå°†ä¼šæ”¾åœ¨ç¬¬äº”ä¸ª Broker ä¸Šï¼›ç¬¬ä¸‰ä¸ªåˆ†åŒºå°†ä¼šæ”¾åœ¨ç¬¬ä¸€ä¸ª Broker ä¸Šï¼›ç¬¬å››ä¸ªåˆ†åŒºå°†ä¼šæ”¾åœ¨ç¬¬äºŒä¸ª Broker ä¸Šï¼Œä¾æ¬¡ç±»æ¨ã€‚</li><li>å‰©ä½™çš„å‰¯æœ¬ç›¸å¯¹äºç¬¬ä¸€ä¸ªå‰¯æœ¬æ”¾ç½®ä½ç½®å…¶å®æ˜¯ç”± nextReplicaShift å†³å®šçš„ï¼Œè€Œè¿™ä¸ªæ•°ä¹Ÿæ˜¯éšæœºäº§ç”Ÿçš„ã€‚</li></ul><blockquote><h3 id="Kafka-æ–°å»ºçš„åˆ†åŒºä¼šåœ¨å“ªä¸ªç›®å½•ä¸‹åˆ›å»ºï¼Ÿ"><a href="#Kafka-æ–°å»ºçš„åˆ†åŒºä¼šåœ¨å“ªä¸ªç›®å½•ä¸‹åˆ›å»ºï¼Ÿ" class="headerlink" title="Kafka æ–°å»ºçš„åˆ†åŒºä¼šåœ¨å“ªä¸ªç›®å½•ä¸‹åˆ›å»ºï¼Ÿ"></a>Kafka æ–°å»ºçš„åˆ†åŒºä¼šåœ¨å“ªä¸ªç›®å½•ä¸‹åˆ›å»ºï¼Ÿ</h3></blockquote><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨å¯åŠ¨ Kafka é›†ç¾¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®å¥½ <code>log.dirs</code> å‚æ•°ï¼Œå…¶å€¼æ˜¯ Kafka æ•°æ®çš„å­˜æ”¾ç›®å½•ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥é…ç½®å¤šä¸ªç›®å½•ï¼Œç›®å½•ä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš”ï¼Œé€šå¸¸è¿™äº›ç›®å½•æ˜¯åˆ†å¸ƒåœ¨ä¸åŒçš„ç£ç›˜ä¸Šç”¨äºæé«˜è¯»å†™æ€§èƒ½ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é…ç½® <code>log.dir</code> å‚æ•°ï¼Œå«ä¹‰ä¸€æ ·ã€‚åªéœ€è¦è®¾ç½®å…¶ä¸­ä¸€ä¸ªå³å¯ã€‚</p><p>å¦‚æœ <code>log.dirs</code> å‚æ•°åªé…ç½®äº†ä¸€ä¸ªç›®å½•ï¼Œé‚£ä¹ˆåˆ†é…åˆ°å„ä¸ª Broker ä¸Šçš„åˆ†åŒºè‚¯å®šåªèƒ½åœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾æ•°æ®ã€‚</p><p>ä½†æ˜¯å¦‚æœ <code>log.dirs</code> å‚æ•°é…ç½®äº†å¤šä¸ªç›®å½•ï¼Œé‚£ä¹ˆ Kafka ä¼šåœ¨å“ªä¸ªæ–‡ä»¶å¤¹ä¸­åˆ›å»ºåˆ†åŒºç›®å½•å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯ï¼šKafka ä¼šåœ¨å«æœ‰åˆ†åŒºç›®å½•æœ€å°‘çš„æ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ–°çš„åˆ†åŒºç›®å½•ï¼Œåˆ†åŒºç›®å½•åä¸º â€œTopic å + åˆ†åŒº IDâ€ã€‚æ³¨æ„ï¼Œæ˜¯åˆ†åŒºæ–‡ä»¶å¤¹æ€»æ•°æœ€å°‘çš„ç›®å½•ï¼Œè€Œä¸æ˜¯ç£ç›˜ä½¿ç”¨é‡æœ€å°‘çš„ç›®å½•ï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ ç»™ <code>log.dirs</code> å‚æ•°æ–°å¢äº†ä¸€ä¸ªæ–°çš„ç£ç›˜ï¼Œæ–°çš„åˆ†åŒºç›®å½•è‚¯å®šæ˜¯å…ˆåœ¨è¿™ä¸ªæ–°çš„ç£ç›˜ä¸Šåˆ›å»ºç›´åˆ°è¿™ä¸ªæ–°çš„ç£ç›˜ç›®å½•æ‹¥æœ‰çš„åˆ†åŒºç›®å½•ä¸æ˜¯æœ€å°‘ä¸ºæ­¢ã€‚</p><blockquote><h3 id="è°ˆä¸€è°ˆ-Kafka-çš„å†å‡è¡¡ï¼Ÿ"><a href="#è°ˆä¸€è°ˆ-Kafka-çš„å†å‡è¡¡ï¼Ÿ" class="headerlink" title="è°ˆä¸€è°ˆ Kafka çš„å†å‡è¡¡ï¼Ÿ"></a>è°ˆä¸€è°ˆ Kafka çš„å†å‡è¡¡ï¼Ÿ</h3></blockquote><p>åœ¨ Kafka ä¸­ï¼Œå½“æœ‰æ–°æ¶ˆè´¹è€…åŠ å…¥æˆ–è€…è®¢é˜…çš„ topic æ•°å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘ Rebalanceï¼ˆå†å‡è¡¡ï¼šåœ¨åŒä¸€ä¸ªæ¶ˆè´¹è€…ç»„å½“ä¸­ï¼Œåˆ†åŒºçš„æ‰€æœ‰æƒä»ä¸€ä¸ªæ¶ˆè´¹è€…è½¬ç§»åˆ°å¦å¤–ä¸€ä¸ªæ¶ˆè´¹è€…ï¼‰æœºåˆ¶ï¼ŒRebalance é¡¾åæ€ä¹‰å°±æ˜¯é‡æ–°å‡è¡¡æ¶ˆè´¹è€…æ¶ˆè´¹ã€‚Rebalance çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>ç¬¬ä¸€æ­¥ï¼šæ‰€æœ‰æˆå‘˜éƒ½å‘ Coordinator å‘é€è¯·æ±‚ï¼Œè¯·æ±‚å…¥ç»„ã€‚ä¸€æ—¦æ‰€æœ‰æˆå‘˜éƒ½å‘é€äº†è¯·æ±‚ï¼ŒCoordinator ä¼šä»ä¸­é€‰æ‹©ä¸€ä¸ª consumer æ‹…ä»» Leader çš„è§’è‰²ï¼Œå¹¶æŠŠç»„æˆå‘˜ä¿¡æ¯ä»¥åŠè®¢é˜…ä¿¡æ¯å‘ç»™ Leaderã€‚</li><li>ç¬¬äºŒæ­¥ï¼šLeader å¼€å§‹åˆ†é…æ¶ˆè´¹æ–¹æ¡ˆï¼ŒæŒ‡æ˜å…·ä½“å“ªä¸ª consumer è´Ÿè´£æ¶ˆè´¹å“ªäº› topic çš„å“ªäº› partitionã€‚ä¸€æ—¦å®Œæˆåˆ†é…ï¼ŒLeader ä¼šå°†è¿™ä¸ªæ–¹æ¡ˆå‘ç»™ Coordinatorã€‚Coordinator æ¥æ”¶åˆ°åˆ†é…æ–¹æ¡ˆä¹‹åä¼šæŠŠæ–¹æ¡ˆå‘ç»™å„ä¸ª consumerï¼Œè¿™æ ·ç»„å†…çš„æ‰€æœ‰æˆå‘˜å°±éƒ½çŸ¥é“è‡ªå·±åº”è¯¥æ¶ˆè´¹å“ªäº›åˆ†åŒºäº†ã€‚</li></ol><p>æ‰€ä»¥å¯¹äº Rebalance æ¥è¯´ï¼ŒCoordinator èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚</p><blockquote><h3 id="Kafkaåˆ†åŒºåˆ†é…ç­–ç•¥"><a href="#Kafkaåˆ†åŒºåˆ†é…ç­–ç•¥" class="headerlink" title="Kafkaåˆ†åŒºåˆ†é…ç­–ç•¥"></a>Kafkaåˆ†åŒºåˆ†é…ç­–ç•¥</h3></blockquote><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/kafka_partition.png" alt></p><p>åœ¨ Kafka å†…éƒ¨å­˜åœ¨ä¸¤ç§é»˜è®¤çš„åˆ†åŒºåˆ†é…ç­–ç•¥ï¼šRange å’Œ RoundRobinã€‚å½“ä»¥ä¸‹äº‹ä»¶å‘ç”Ÿæ—¶ï¼ŒKafka å°†ä¼šè¿›è¡Œä¸€æ¬¡åˆ†åŒºåˆ†é…ï¼š</p><ul><li>åŒä¸€ä¸ª Consumer Group å†…æ–°å¢æ¶ˆè´¹è€…ã€‚</li><li>æ¶ˆè´¹è€…ç¦»å¼€å½“å‰æ‰€å±çš„ Consumer Groupï¼ŒåŒ…æ‹¬ shuts down æˆ– crashesã€‚</li><li>è®¢é˜…çš„ä¸»é¢˜æ–°å¢åˆ†åŒºã€‚</li></ul><p>å°†åˆ†åŒºçš„æ‰€æœ‰æƒä»ä¸€ä¸ªæ¶ˆè´¹è€…ç§»åˆ°å¦ä¸€ä¸ªæ¶ˆè´¹è€…ç§°ä¸ºé‡æ–°å¹³è¡¡ï¼ˆRebalanceï¼‰ï¼Œå¦‚ä½• Rebalance å°±æ¶‰åŠåˆ°ä¸‹é¢æåˆ°çš„åˆ†åŒºåˆ†é…ç­–ç•¥ã€‚ä¸‹é¢æˆ‘ä»¬å°†è¯¦ç»†ä»‹ç» Kafka å†…ç½®çš„ä¸¤ç§åˆ†åŒºåˆ†é…ç­–ç•¥ã€‚æœ¬æ–‡å‡è®¾æˆ‘ä»¬æœ‰ä¸ªåä¸º T1 çš„ä¸»é¢˜ï¼Œå…¶åŒ…å«äº† 10 ä¸ªåˆ†åŒºï¼Œç„¶åæˆ‘ä»¬æœ‰ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼ˆC1ï¼ŒC2ï¼‰æ¥æ¶ˆè´¹è¿™ 10 ä¸ªåˆ†åŒºé‡Œé¢çš„æ•°æ®ï¼Œè€Œä¸” C1 çš„ <code>num.streams = 1</code>ï¼ŒC2 çš„ <code>num.streams = 2</code>ã€‚</p><p><strong>Range strategy</strong></p><p>Range ç­–ç•¥æ˜¯å¯¹æ¯ä¸ªä¸»é¢˜è€Œè¨€çš„ï¼Œé¦–å…ˆå¯¹åŒä¸€ä¸ªä¸»é¢˜é‡Œé¢çš„åˆ†åŒºæŒ‰ç…§åºå·è¿›è¡Œæ’åºï¼Œå¹¶å¯¹æ¶ˆè´¹è€…æŒ‰ç…§å­—æ¯é¡ºåºè¿›è¡Œæ’åºã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œé¢ï¼Œæ’å®Œåºçš„åˆ†åŒºå°†ä¼šæ˜¯ <code>0, 1, 2, 3, 4, 5, 6, 7, 8, 9</code>ï¼›æ¶ˆè´¹è€…çº¿ç¨‹æ’å®Œåºå°†ä¼šæ˜¯ <code>C1-0, C2-0, C2-1</code>ã€‚ç„¶åå°† partitions çš„ä¸ªæ•°é™¤äºæ¶ˆè´¹è€…çº¿ç¨‹çš„æ€»æ•°æ¥å†³å®šæ¯ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹æ¶ˆè´¹å‡ ä¸ªåˆ†åŒºã€‚å¦‚æœé™¤ä¸å°½ï¼Œé‚£ä¹ˆå‰é¢å‡ ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹å°†ä¼šå¤šæ¶ˆè´¹ä¸€ä¸ªåˆ†åŒºã€‚</p><p>åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œé¢ï¼Œæˆ‘ä»¬æœ‰ 10 ä¸ªåˆ†åŒºï¼Œ3 ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ï¼Œ10 / 3 = 3ï¼Œè€Œä¸”é™¤ä¸å°½ï¼Œé‚£ä¹ˆæ¶ˆè´¹è€…çº¿ç¨‹ C1-0 å°†ä¼šå¤šæ¶ˆè´¹ä¸€ä¸ªåˆ†åŒºï¼Œæ‰€ä»¥æœ€ååˆ†åŒºåˆ†é…çš„ç»“æœçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>C1-0 å°†æ¶ˆè´¹ 0, 1, 2, 3 åˆ†åŒº</li><li>C2-0 å°†æ¶ˆè´¹ 4, 5, 6 åˆ†åŒº</li><li>C2-1 å°†æ¶ˆè´¹ 7, 8, 9 åˆ†åŒº</li></ul><p>å‡å¦‚æˆ‘ä»¬æœ‰ 11 ä¸ªåˆ†åŒºï¼Œé‚£ä¹ˆæœ€ååˆ†åŒºåˆ†é…çš„ç»“æœçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>C1-0 å°†æ¶ˆè´¹ 0, 1, 2, 3 åˆ†åŒº</li><li>C2-0 å°†æ¶ˆè´¹ 4, 5, 6, 7 åˆ†åŒº</li><li>C2-1 å°†æ¶ˆè´¹ 8, 9, 10 åˆ†åŒº</li></ul><p>å‡å¦‚æˆ‘ä»¬æœ‰ 2 ä¸ªä¸»é¢˜(T1 å’Œ T2)ï¼Œåˆ†åˆ«æœ‰10ä¸ªåˆ†åŒºï¼Œé‚£ä¹ˆæœ€ååˆ†åŒºåˆ†é…çš„ç»“æœçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>C1-0 å°†æ¶ˆè´¹ T1ä¸»é¢˜çš„ 0, 1, 2, 3 åˆ†åŒºä»¥åŠ T2 ä¸»é¢˜çš„ 0, 1, 2, 3 åˆ†åŒº</li><li>C2-0 å°†æ¶ˆè´¹ T1ä¸»é¢˜çš„ 4, 5, 6 åˆ†åŒºä»¥åŠ T2 ä¸»é¢˜çš„ 4, 5, 6 åˆ†åŒº</li><li>C2-1 å°†æ¶ˆè´¹ T1ä¸»é¢˜çš„ 7, 8, 9 åˆ†åŒºä»¥åŠ T2 ä¸»é¢˜çš„ 7, 8, 9 åˆ†åŒº</li></ul><p>å¯ä»¥çœ‹å‡ºï¼ŒC1-0 æ¶ˆè´¹è€…çº¿ç¨‹æ¯”å…¶ä»–æ¶ˆè´¹è€…çº¿ç¨‹å¤šæ¶ˆè´¹äº† 2 ä¸ªåˆ†åŒºï¼Œè¿™å°±æ˜¯ Range strategy çš„ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„å¼Šç«¯ã€‚</p><p><strong>RoundRobin strategy</strong></p><p>ä½¿ç”¨RoundRobinç­–ç•¥æœ‰ä¸¤ä¸ªå‰ææ¡ä»¶å¿…é¡»æ»¡è¶³ï¼š</p><ul><li>åŒä¸€ä¸ª Consumer Group é‡Œé¢çš„æ‰€æœ‰æ¶ˆè´¹è€…çš„ <code>num.streams</code>å¿…é¡»ç›¸ç­‰ï¼›</li><li>æ¯ä¸ªæ¶ˆè´¹è€…è®¢é˜…çš„ä¸»é¢˜å¿…é¡»ç›¸åŒã€‚</li></ul><p>æ‰€ä»¥è¿™é‡Œå‡è®¾å‰é¢æåˆ°çš„ 2 ä¸ªæ¶ˆè´¹è€…çš„ <code>num.streams = 2</code>ã€‚</p><p>RoundRobin ç­–ç•¥çš„å·¥ä½œåŸç†ï¼šå°†æ‰€æœ‰ä¸»é¢˜çš„åˆ†åŒºç»„æˆ TopicAndPartition åˆ—è¡¨ï¼Œç„¶åå¯¹ TopicAndPartition åˆ—è¡¨æŒ‰ç…§ hashCode è¿›è¡Œæ’åºï¼Œè¿™é‡Œæ–‡å­—å¯èƒ½è¯´ä¸æ¸…ï¼Œçœ‹ä¸‹é¢çš„ä»£ç åº”è¯¥ä¼šæ˜ç™½ï¼š</p><p><pre class="line-numbers language-scala" data-language="scala"><code class="language-scala"><span class="token keyword">val</span> allTopicPartitions <span class="token operator">=</span> ctx<span class="token punctuation">.</span>partitionsForTopic<span class="token punctuation">.</span>flatMap <span class="token punctuation">&#123;</span>    <span class="token keyword">case</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span> partitions<span class="token punctuation">)</span> <span class="token keyword">=></span> info<span class="token punctuation">(</span><span class="token string">"Consumer %s rebalancing the following partitions for topic %s: %s"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>consumerId<span class="token punctuation">,</span> topic<span class="token punctuation">,</span> partitions<span class="token punctuation">)</span><span class="token punctuation">)</span>    partitions<span class="token punctuation">.</span>map<span class="token punctuation">(</span>partition <span class="token keyword">=></span> <span class="token punctuation">&#123;</span>        TopicAndPartition<span class="token punctuation">(</span>topic<span class="token punctuation">,</span> partition<span class="token punctuation">)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span>toSeq<span class="token punctuation">.</span>sortWith<span class="token punctuation">(</span><span class="token punctuation">(</span>topicPartition1<span class="token punctuation">,</span> topicPartition2<span class="token punctuation">)</span> <span class="token keyword">=></span> <span class="token punctuation">&#123;</span>    <span class="token comment">/*    * Randomize the order by taking the hashcode to reduce the likelihood of all partitions of a given topic ending    * up on one consumer (if it has a high enough stream count).    */</span>    topicPartition1<span class="token punctuation">.</span>toString<span class="token punctuation">.</span>hashCode <span class="token operator">&lt;</span> topicPartition2<span class="token punctuation">.</span>toString<span class="token punctuation">.</span>hashCode<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æœ€åæŒ‰ç…§ round-robin é£æ ¼å°†åˆ†åŒºåˆ†åˆ«åˆ†é…ç»™ä¸åŒçš„æ¶ˆè´¹è€…çº¿ç¨‹ã€‚</p><p>åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œé¢ï¼Œå‡å¦‚æŒ‰ç…§ hashCode æ’åºå®Œçš„ topic-partitions ç»„ä¾æ¬¡ä¸º T1-5, T1-3, T1-0, T1-8, T1-2, T1-1, T1-4, T1-7, T1-6, T1-9ï¼Œæˆ‘ä»¬çš„æ¶ˆè´¹è€…çº¿ç¨‹æ’åºä¸º C1-0, C1-1, C2-0, C2-1ï¼Œæœ€ååˆ†åŒºåˆ†é…çš„ç»“æœä¸ºï¼š</p><ul><li>C1-0 å°†æ¶ˆè´¹ T1-5, T1-2, T1-6 åˆ†åŒºï¼›</li><li>C1-1 å°†æ¶ˆè´¹ T1-3, T1-1, T1-9 åˆ†åŒºï¼›</li><li>C2-0 å°†æ¶ˆè´¹ T1-0, T1-4 åˆ†åŒºï¼›</li><li>C2-1 å°†æ¶ˆè´¹ T1-8, T1-7 åˆ†åŒºã€‚</li></ul><p>å¤šä¸ªä¸»é¢˜çš„åˆ†åŒºåˆ†é…å’Œå•ä¸ªä¸»é¢˜ç±»ä¼¼ã€‚</p><blockquote><h3 id="Kafka-æ˜¯å¦‚ä½•å®ç°é«˜ååç‡çš„ï¼Ÿ"><a href="#Kafka-æ˜¯å¦‚ä½•å®ç°é«˜ååç‡çš„ï¼Ÿ" class="headerlink" title="Kafka æ˜¯å¦‚ä½•å®ç°é«˜ååç‡çš„ï¼Ÿ"></a>Kafka æ˜¯å¦‚ä½•å®ç°é«˜ååç‡çš„ï¼Ÿ</h3></blockquote><p>Kafka æ˜¯åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿï¼Œéœ€è¦å¤„ç†æµ·é‡çš„æ¶ˆæ¯ï¼ŒKafka çš„è®¾è®¡æ˜¯æŠŠæ‰€æœ‰çš„æ¶ˆæ¯éƒ½å†™å…¥é€Ÿåº¦ä½å®¹é‡å¤§çš„ç¡¬ç›˜ï¼Œä»¥æ­¤æ¥æ¢å–æ›´å¼ºçš„å­˜å‚¨èƒ½åŠ›ï¼Œä½†å®é™…ä¸Šï¼Œä½¿ç”¨ç¡¬ç›˜å¹¶æ²¡æœ‰å¸¦æ¥è¿‡å¤šçš„æ€§èƒ½æŸå¤±ã€‚kafka ä¸»è¦ä½¿ç”¨äº†ä»¥ä¸‹å‡ ä¸ªæ–¹å¼å®ç°äº†è¶…é«˜çš„ååç‡ï¼š</p><ul><li>é¡ºåºè¯»å†™</li><li>é›¶æ‹·è´</li><li>æ–‡ä»¶åˆ†æ®µ</li><li>æ‰¹é‡å‘é€</li><li>æ•°æ®å‹ç¼©</li></ul><blockquote><h3 id="Kafka-ç¼ºç‚¹ï¼Ÿ"><a href="#Kafka-ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="Kafka ç¼ºç‚¹ï¼Ÿ"></a>Kafka ç¼ºç‚¹ï¼Ÿ</h3></blockquote><ul><li>ç”±äºæ˜¯æ‰¹é‡å‘é€ï¼Œæ•°æ®å¹¶éçœŸæ­£çš„å®æ—¶ï¼›</li><li>å¯¹äº mqtt åè®®ä¸æ”¯æŒï¼›</li><li>ä¸æ”¯æŒç‰©è”ç½‘ä¼ æ„Ÿæ•°æ®ç›´æ¥æ¥å…¥ï¼›</li><li>ä»…æ”¯æŒç»Ÿä¸€åˆ†åŒºå†…æ¶ˆæ¯æœ‰åºï¼Œæ— æ³•å®ç°å…¨å±€æ¶ˆæ¯æœ‰åºï¼›</li><li>ç›‘æ§ä¸å®Œå–„ï¼Œéœ€è¦å®‰è£…æ’ä»¶ï¼›</li><li>ä¾èµ– Zookeeper è¿›è¡Œå…ƒæ•°æ®ç®¡ç†ã€‚</li></ul><blockquote><h3 id="Kafka-æ–°æ—§æ¶ˆè´¹è€…çš„åŒºåˆ«ï¼Ÿ"><a href="#Kafka-æ–°æ—§æ¶ˆè´¹è€…çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="Kafka æ–°æ—§æ¶ˆè´¹è€…çš„åŒºåˆ«ï¼Ÿ"></a>Kafka æ–°æ—§æ¶ˆè´¹è€…çš„åŒºåˆ«ï¼Ÿ</h3></blockquote><p>æ—§çš„ Kafka æ¶ˆè´¹è€… API ä¸»è¦åŒ…æ‹¬ï¼šSimpleConsumerï¼ˆç®€å•æ¶ˆè´¹è€…ï¼‰ å’Œ ZookeeperConsumerConnectorï¼ˆé«˜çº§æ¶ˆè´¹è€…ï¼‰ã€‚SimpleConsumer åå­—çœ‹èµ·æ¥æ˜¯ç®€å•æ¶ˆè´¹è€…ï¼Œä½†æ˜¯å…¶å®ç”¨èµ·æ¥å¾ˆä¸ç®€å•ï¼Œå¯ä»¥ä½¿ç”¨å®ƒä»ç‰¹å®šçš„åˆ†åŒºå’Œåç§»é‡å¼€å§‹è¯»å–æ¶ˆæ¯ã€‚é«˜çº§æ¶ˆè´¹è€…å’Œç°åœ¨æ–°çš„æ¶ˆè´¹è€…æœ‰ç‚¹åƒï¼Œæœ‰æ¶ˆè´¹è€…ç¾¤ç»„ï¼Œæœ‰åˆ†åŒºå†å‡è¡¡ï¼Œä¸è¿‡å®ƒä½¿ç”¨ ZK æ¥ç®¡ç†æ¶ˆè´¹è€…ç¾¤ç»„ï¼Œå¹¶ä¸å…·å¤‡åç§»é‡å’Œå†å‡è¡¡çš„å¯æ“æ§æ€§ã€‚</p><p>ç°åœ¨çš„æ¶ˆè´¹è€…åŒæ—¶æ”¯æŒä»¥ä¸Šä¸¤ç§è¡Œä¸ºï¼Œæ‰€ä»¥ä¸ºå•¥è¿˜ç”¨æ—§æ¶ˆè´¹è€… API å‘¢ï¼Ÿ</p><blockquote><h3 id="Kafka-åˆ†åŒºæ•°å¯ä»¥å¢åŠ æˆ–å‡å°‘å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"><a href="#Kafka-åˆ†åŒºæ•°å¯ä»¥å¢åŠ æˆ–å‡å°‘å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="Kafka åˆ†åŒºæ•°å¯ä»¥å¢åŠ æˆ–å‡å°‘å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"></a>Kafka åˆ†åŒºæ•°å¯ä»¥å¢åŠ æˆ–å‡å°‘å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h3></blockquote><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>bin/kafka-topics.sh</code> å‘½ä»¤å¯¹ Kafka å¢åŠ  Kafka çš„åˆ†åŒºæ•°æ®ï¼Œä½†æ˜¯ Kafka ä¸æ”¯æŒå‡å°‘åˆ†åŒºæ•°ã€‚Kafka åˆ†åŒºæ•°æ®ä¸æ”¯æŒå‡å°‘æ˜¯ç”±å¾ˆå¤šåŸå› çš„ï¼Œæ¯”å¦‚å‡å°‘çš„åˆ†åŒºå…¶æ•°æ®æ”¾åˆ°å“ªé‡Œå»ï¼Ÿæ˜¯åˆ é™¤ï¼Œè¿˜æ˜¯ä¿ç•™ï¼Ÿåˆ é™¤çš„è¯ï¼Œé‚£ä¹ˆè¿™äº›æ²¡æ¶ˆè´¹çš„æ¶ˆæ¯ä¸å°±ä¸¢äº†ã€‚å¦‚æœä¿ç•™è¿™äº›æ¶ˆæ¯å¦‚ä½•æ”¾åˆ°å…¶ä»–åˆ†åŒºé‡Œé¢ï¼Ÿè¿½åŠ åˆ°å…¶ä»–åˆ†åŒºåé¢çš„è¯é‚£ä¹ˆå°±ç ´åäº† Kafka å•ä¸ªåˆ†åŒºçš„æœ‰åºæ€§ã€‚å¦‚æœè¦ä¿è¯åˆ é™¤åˆ†åŒºæ•°æ®æ’å…¥åˆ°å…¶ä»–åˆ†åŒºä¿è¯æœ‰åºæ€§ï¼Œé‚£ä¹ˆå®ç°èµ·æ¥é€»è¾‘å°±ä¼šéå¸¸å¤æ‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ“«Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flume é¢è¯•é¢˜è§£æ</title>
      <link href="post/5a2a12a6.html"/>
      <url>post/5a2a12a6.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="Flume-ä½¿ç”¨åœºæ™¯ï¼Ÿ"><a href="#Flume-ä½¿ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="Flume ä½¿ç”¨åœºæ™¯ï¼Ÿ"></a>Flume ä½¿ç”¨åœºæ™¯ï¼Ÿ</h3></blockquote><p>çº¿ä¸Šæ•°æ®ä¸€èˆ¬ä¸»è¦æ˜¯è½åœ°ï¼ˆå­˜å‚¨åˆ°ç£ç›˜ï¼‰æˆ–è€…é€šè¿‡ socket ä¼ è¾“ç»™å¦å¤–ä¸€ä¸ªç³»ç»Ÿï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¾ˆéš¾æ¨åŠ¨çº¿ä¸Šåº”ç”¨æˆ–æœåŠ¡å»ä¿®æ”¹æ¥å£ï¼Œå®ç°ç›´æ¥å‘ Kafka é‡Œå†™æ•°æ®ï¼Œè¿™æ—¶å€™ä½ å¯èƒ½å°±éœ€è¦ Flume è¿™æ ·çš„ç³»ç»Ÿå¸®ä½ å»åšä¼ è¾“ã€‚</p><blockquote><h3 id="Flume-ä¸¢åŒ…é—®é¢˜ï¼Ÿ"><a href="#Flume-ä¸¢åŒ…é—®é¢˜ï¼Ÿ" class="headerlink" title="Flume ä¸¢åŒ…é—®é¢˜ï¼Ÿ"></a>Flume ä¸¢åŒ…é—®é¢˜ï¼Ÿ</h3></blockquote><p>å•æœº upd çš„ Flume source çš„é…ç½®ï¼Œ100+M/s æ•°æ®é‡ï¼Œ10w qps Flume å°±å¼€å§‹å¤§é‡ä¸¢åŒ…ï¼Œå› æ­¤å¾ˆå¤šå…¬å¸åœ¨æ­å»ºç³»ç»Ÿæ—¶ï¼ŒæŠ›å¼ƒäº† Flumeï¼Œè‡ªå·±ç ”å‘ä¼ è¾“ç³»ç»Ÿï¼Œä½†æ˜¯å¾€å¾€ä¼šå‚è€ƒ Flume çš„ Source-Channel-Sink æ¨¡å¼ã€‚</p><p>ä¸€äº›å…¬å¸åœ¨ Flume å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹ä¸šåŠ¡æ—¥å¿—è¿›è¡Œç›‘æ§ï¼Œä¾‹å¦‚ Flume agent ä¸­æœ‰å¤šå°‘æ¡æ—¥å¿—ï¼ŒFlume åˆ° Kafka åæœ‰å¤šå°‘æ¡æ—¥å¿—ç­‰ç­‰ï¼Œå¦‚æœæ•°æ®ä¸¢å¤±ä¿æŒåœ¨ 1% å·¦å³æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå½“æ•°æ®ä¸¢å¤±è¾¾åˆ° 5% å·¦å³æ—¶å°±å¿…é¡»é‡‡å–ç›¸åº”æªæ–½ã€‚</p><blockquote><h3 id="Flume-ä¸-Kafka-çš„é€‰å–ï¼Ÿ"><a href="#Flume-ä¸-Kafka-çš„é€‰å–ï¼Ÿ" class="headerlink" title="Flume ä¸ Kafka çš„é€‰å–ï¼Ÿ"></a>Flume ä¸ Kafka çš„é€‰å–ï¼Ÿ</h3></blockquote><p>é‡‡é›†å±‚ä¸»è¦å¯ä»¥ä½¿ç”¨ Flumeã€Kafka ä¸¤ç§æŠ€æœ¯ã€‚</p><ul><li>Flumeï¼šFlume æ˜¯ç®¡é“æµæ–¹å¼ï¼Œæä¾›äº†å¾ˆå¤šçš„é»˜è®¤å®ç°ï¼Œè®©ç”¨æˆ·é€šè¿‡å‚æ•°éƒ¨ç½²ï¼ŒåŠæ‰©å±• APIã€‚</li><li>Kafkaï¼šKafka æ˜¯ä¸€ä¸ªå¯æŒä¹…åŒ–çš„åˆ†å¸ƒå¼çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚</li></ul><p>Kafka æ˜¯ä¸€ä¸ªéå¸¸é€šç”¨çš„ç³»ç»Ÿã€‚ä½ å¯ä»¥æœ‰è®¸å¤šç”Ÿäº§è€…å’Œå¾ˆå¤šçš„æ¶ˆè´¹è€…å…±äº«å¤šä¸ªä¸»é¢˜ Topicsã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒFlume æ˜¯ä¸€ä¸ªä¸“ç”¨å·¥å…·è¢«è®¾è®¡ä¸ºæ—¨åœ¨å¾€ HDFSï¼ŒHBase å‘é€æ•°æ®ã€‚å®ƒå¯¹ HDFS æœ‰ç‰¹æ®Šçš„ä¼˜åŒ–ï¼Œå¹¶ä¸”é›†æˆäº† Hadoop çš„å®‰å…¨ç‰¹æ€§ã€‚æ‰€ä»¥ï¼ŒCloudera å»ºè®®å¦‚æœæ•°æ®è¢«å¤šä¸ªç³»ç»Ÿæ¶ˆè´¹çš„è¯ï¼Œä½¿ç”¨ Kafkaï¼›å¦‚æœæ•°æ®è¢«è®¾è®¡ç»™ Hadoop ä½¿ç”¨ï¼Œä½¿ç”¨ Flumeã€‚</p><p>æ­£å¦‚ä½ ä»¬æ‰€çŸ¥ Flume å†…ç½®å¾ˆå¤šçš„ source å’Œ sink ç»„ä»¶ã€‚ç„¶è€Œï¼ŒKafka æ˜æ˜¾æœ‰ä¸€ä¸ªæ›´å°çš„ç”Ÿäº§æ¶ˆè´¹è€…ç”Ÿæ€ç³»ç»Ÿï¼Œå¹¶ä¸” Kafka çš„ç¤¾åŒºæ”¯æŒä¸å¥½ã€‚å¸Œæœ›å°†æ¥è¿™ç§æƒ…å†µä¼šå¾—åˆ°æ”¹å–„ï¼Œä½†æ˜¯ç›®å‰ï¼šä½¿ç”¨ Kafka æ„å‘³ç€ä½ å‡†å¤‡å¥½äº†ç¼–å†™ä½ è‡ªå·±çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä»£ç ã€‚å¦‚æœå·²ç»å­˜åœ¨çš„ Flume Sources å’Œ Sinks æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œå¹¶ä¸”ä½ æ›´å–œæ¬¢ä¸éœ€è¦ä»»ä½•å¼€å‘çš„ç³»ç»Ÿï¼Œè¯·ä½¿ç”¨ Flumeã€‚</p><p>Flume å¯ä»¥ä½¿ç”¨æ‹¦æˆªå™¨å®æ—¶å¤„ç†æ•°æ®ã€‚è¿™äº›å¯¹æ•°æ®å±è”½æˆ–è€…è¿‡é‡æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚Kafka éœ€è¦å¤–éƒ¨çš„æµå¤„ç†ç³»ç»Ÿæ‰èƒ½åšåˆ°ã€‚</p><p>Kafka å’Œ Flume éƒ½æ˜¯å¯é çš„ç³»ç»Ÿï¼Œé€šè¿‡é€‚å½“çš„é…ç½®èƒ½ä¿è¯é›¶æ•°æ®ä¸¢å¤±ã€‚ç„¶è€Œï¼ŒFlume ä¸æ”¯æŒå‰¯æœ¬äº‹ä»¶ã€‚äºæ˜¯ï¼Œå¦‚æœ Flume ä»£ç†çš„ä¸€ä¸ªèŠ‚ç‚¹å¥”æºƒäº†ï¼Œå³ä½¿ä½¿ç”¨äº†å¯é çš„æ–‡ä»¶ç®¡é“æ–¹å¼ï¼Œä½ ä¹Ÿå°†ä¸¢å¤±è¿™äº›äº‹ä»¶ç›´åˆ°ä½ æ¢å¤è¿™äº›ç£ç›˜ã€‚å¦‚æœä½ éœ€è¦ä¸€ä¸ªé«˜å¯é æ€§çš„ç®¡é“ï¼Œé‚£ä¹ˆä½¿ç”¨Kafkaæ˜¯ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚</p><p>Flume å’Œ Kafka å¯ä»¥å¾ˆå¥½åœ°ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚å¦‚æœä½ çš„è®¾è®¡éœ€è¦ä» Kafka åˆ° Hadoop çš„æµæ•°æ®ï¼Œä½¿ç”¨ Flume ä»£ç†å¹¶é…ç½® Kafka çš„ Source è¯»å–æ•°æ®ä¹Ÿæ˜¯å¯è¡Œçš„ï¼šä½ æ²¡æœ‰å¿…è¦å®ç°è‡ªå·±çš„æ¶ˆè´¹è€…ã€‚ä½ å¯ä»¥ç›´æ¥åˆ©ç”¨ Flume ä¸ HDFS åŠ HBase çš„ç»“åˆçš„æ‰€æœ‰å¥½å¤„ã€‚ä½ å¯ä»¥ä½¿ç”¨ Cloudera Manager å¯¹æ¶ˆè´¹è€…çš„ç›‘æ§ï¼Œå¹¶ä¸”ä½ ç”šè‡³å¯ä»¥æ·»åŠ æ‹¦æˆªå™¨è¿›è¡Œä¸€äº›æµå¤„ç†ã€‚</p><blockquote><h3 id="æ•°æ®æ€ä¹ˆé‡‡é›†åˆ°-Kafkaï¼Œå®ç°æ–¹å¼ï¼Ÿ"><a href="#æ•°æ®æ€ä¹ˆé‡‡é›†åˆ°-Kafkaï¼Œå®ç°æ–¹å¼ï¼Ÿ" class="headerlink" title="æ•°æ®æ€ä¹ˆé‡‡é›†åˆ° Kafkaï¼Œå®ç°æ–¹å¼ï¼Ÿ"></a>æ•°æ®æ€ä¹ˆé‡‡é›†åˆ° Kafkaï¼Œå®ç°æ–¹å¼ï¼Ÿ</h3></blockquote><p>ä½¿ç”¨å®˜æ–¹æä¾›çš„ FlumeKafka æ’ä»¶ï¼Œæ’ä»¶çš„å®ç°æ–¹å¼æ˜¯è‡ªå®šä¹‰äº† Flume çš„ sinkï¼Œå°†æ•°æ®ä» channel ä¸­å–å‡ºï¼Œé€šè¿‡ Kafka çš„ producer å†™å…¥åˆ° Kafka ä¸­ï¼Œå¯ä»¥è‡ªå®šä¹‰åˆ†åŒºç­‰ã€‚</p><blockquote><h3 id="Flume-ç®¡é“å†…å­˜ï¼ŒFlume-å®•æœºäº†æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#Flume-ç®¡é“å†…å­˜ï¼ŒFlume-å®•æœºäº†æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="Flume ç®¡é“å†…å­˜ï¼ŒFlume å®•æœºäº†æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³ï¼Ÿ"></a>Flume ç®¡é“å†…å­˜ï¼ŒFlume å®•æœºäº†æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³ï¼Ÿ</h3></blockquote><ul><li>Flume çš„ channel åˆ†ä¸ºå¾ˆå¤šç§ï¼Œå¯ä»¥å°†æ•°æ®å†™å…¥åˆ°æ–‡ä»¶ã€‚</li><li>é˜²æ­¢éé¦–ä¸ª agent å®•æœºçš„æ–¹æ³•å¯ä»¥åšé›†ç¾¤æˆ–è€…ä¸»å¤‡ã€‚</li></ul><blockquote><h3 id="Flume-é…ç½®æ–¹å¼ï¼ŒFlume-é›†ç¾¤ï¼Ÿ"><a href="#Flume-é…ç½®æ–¹å¼ï¼ŒFlume-é›†ç¾¤ï¼Ÿ" class="headerlink" title="Flume é…ç½®æ–¹å¼ï¼ŒFlume é›†ç¾¤ï¼Ÿ"></a>Flume é…ç½®æ–¹å¼ï¼ŒFlume é›†ç¾¤ï¼Ÿ</h3></blockquote><p>Flume çš„é…ç½®å›´ç»•ç€ sourceã€channelã€sink å™è¿°ï¼ŒFlume çš„é›†ç¾¤æ˜¯åšåœ¨ agent ä¸Šçš„ï¼Œè€Œéæœºå™¨ä¸Šã€‚</p><blockquote><h3 id="Flume-ä¸é‡‡é›†-Nginx-æ—¥å¿—ï¼Œé€šè¿‡-Logger4j-é‡‡é›†æ—¥å¿—ï¼Œä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Flume-ä¸é‡‡é›†-Nginx-æ—¥å¿—ï¼Œé€šè¿‡-Logger4j-é‡‡é›†æ—¥å¿—ï¼Œä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Flume ä¸é‡‡é›† Nginx æ—¥å¿—ï¼Œé€šè¿‡ Logger4j é‡‡é›†æ—¥å¿—ï¼Œä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Flume ä¸é‡‡é›† Nginx æ—¥å¿—ï¼Œé€šè¿‡ Logger4j é‡‡é›†æ—¥å¿—ï¼Œä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</h3></blockquote><ul><li>ä¼˜ç‚¹ï¼šNginx çš„æ—¥å¿—æ ¼å¼æ˜¯å›ºå®šçš„ï¼Œä½†æ˜¯ç¼ºå°‘ sessionIdï¼Œé€šè¿‡ logger4j é‡‡é›†çš„æ—¥å¿—æ˜¯å¸¦æœ‰ sessionId çš„ï¼Œè€Œ session å¯ä»¥é€šè¿‡ redis å…±äº«ï¼Œä¿è¯äº†é›†ç¾¤æ—¥å¿—ä¸­çš„åŒä¸€ session è½åˆ°ä¸åŒçš„ tomcat æ—¶ï¼ŒsessionId è¿˜æ˜¯ä¸€æ ·çš„ï¼Œè€Œä¸” logger4j çš„æ–¹å¼æ¯”è¾ƒç¨³å®šï¼Œä¸ä¼šå®•æœºã€‚</li><li>ç¼ºç‚¹ï¼šä¸å¤Ÿçµæ´»ï¼Œlogger4j çš„æ–¹å¼å’Œé¡¹ç›®ç»“åˆè¿‡äºç´§å¯†ï¼Œè€Œ Flume çš„æ–¹å¼æ¯”è¾ƒçµæ´»ï¼Œæ‹”æ’å¼æ¯”è¾ƒå¥½ï¼Œä¸ä¼šå½±å“é¡¹ç›®æ€§èƒ½ã€‚</li></ul><blockquote><h3 id="Flume-å’Œ-Kafka-é‡‡é›†æ—¥å¿—åŒºåˆ«ï¼Œé‡‡é›†æ—¥å¿—æ—¶ä¸­é—´åœäº†ï¼Œæ€ä¹ˆè®°å½•ä¹‹å‰çš„æ—¥å¿—ï¼Ÿ"><a href="#Flume-å’Œ-Kafka-é‡‡é›†æ—¥å¿—åŒºåˆ«ï¼Œé‡‡é›†æ—¥å¿—æ—¶ä¸­é—´åœäº†ï¼Œæ€ä¹ˆè®°å½•ä¹‹å‰çš„æ—¥å¿—ï¼Ÿ" class="headerlink" title="Flume å’Œ Kafka é‡‡é›†æ—¥å¿—åŒºåˆ«ï¼Œé‡‡é›†æ—¥å¿—æ—¶ä¸­é—´åœäº†ï¼Œæ€ä¹ˆè®°å½•ä¹‹å‰çš„æ—¥å¿—ï¼Ÿ"></a>Flume å’Œ Kafka é‡‡é›†æ—¥å¿—åŒºåˆ«ï¼Œé‡‡é›†æ—¥å¿—æ—¶ä¸­é—´åœäº†ï¼Œæ€ä¹ˆè®°å½•ä¹‹å‰çš„æ—¥å¿—ï¼Ÿ</h3></blockquote><ul><li>Flume é‡‡é›†æ—¥å¿—æ˜¯é€šè¿‡æµçš„æ–¹å¼ç›´æ¥å°†æ—¥å¿—æ”¶é›†åˆ°å­˜å‚¨å±‚ï¼Œè€Œ Kafka æ˜¯å°†ç¼“å­˜åœ¨ Kafka é›†ç¾¤ï¼Œå¾…åæœŸå¯ä»¥é‡‡é›†åˆ°å­˜å‚¨å±‚ã€‚</li><li>Flume é‡‡é›†ä¸­é—´åœäº†ï¼Œå¯ä»¥é‡‡ç”¨æ–‡ä»¶çš„æ–¹å¼è®°å½•ä¹‹å‰çš„æ—¥å¿—ï¼Œè€Œ Kafka æ˜¯é‡‡ç”¨ offset çš„æ–¹å¼è®°å½•ä¹‹å‰çš„æ—¥å¿—ã€‚</li></ul><blockquote><h3 id="Flume-æœ‰å“ªäº›ç»„ä»¶ï¼ŒFlume-çš„-sourceã€channelã€sink-å…·ä½“æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"><a href="#Flume-æœ‰å“ªäº›ç»„ä»¶ï¼ŒFlume-çš„-sourceã€channelã€sink-å…·ä½“æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="Flume æœ‰å“ªäº›ç»„ä»¶ï¼ŒFlume çš„ sourceã€channelã€sink å…·ä½“æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"></a>Flume æœ‰å“ªäº›ç»„ä»¶ï¼ŒFlume çš„ sourceã€channelã€sink å…·ä½“æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</h3></blockquote><ul><li>sourceï¼šç”¨äºé‡‡é›†æ•°æ®ï¼ŒSource æ˜¯äº§ç”Ÿæ•°æ®æµçš„åœ°æ–¹ï¼ŒåŒæ—¶ Source ä¼šå°†äº§ç”Ÿçš„æ•°æ®æµä¼ è¾“åˆ° Channelï¼Œè¿™ä¸ªæœ‰ç‚¹ç±»ä¼¼äº Java IO éƒ¨åˆ†çš„ Channelã€‚</li><li>channelï¼šç”¨äºæ¡¥æ¥ Sources å’Œ Sinksï¼Œç±»ä¼¼äºä¸€ä¸ªé˜Ÿåˆ—ã€‚</li><li>sinkï¼šä» Channel æ”¶é›†æ•°æ®ï¼Œå°†æ•°æ®å†™åˆ°ç›®æ ‡æºï¼ˆå¯ä»¥æ˜¯ä¸‹ä¸€ä¸ª Sourceï¼Œä¹Ÿå¯ä»¥æ˜¯ HDFS æˆ–è€… HBaseï¼‰ã€‚</li></ul><p><strong>æ³¨æ„ï¼š</strong>è¦ç†Ÿæ‚‰sourceã€channelã€sinkçš„ç±»å‹</p><p>å•ä¸€ç»“æ„ï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/flume_module.png" alt></p><p>å¤æ‚æ¶æ„ï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/flume_multi_module.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸŒŠFlume </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zookeeper é¢è¯•é¢˜è§£æ</title>
      <link href="post/2f1ea7f2.html"/>
      <url>post/2f1ea7f2.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="è¯·ç®€è¿°-Zookeeper-çš„é€‰ä¸¾æœºåˆ¶ï¼Ÿ"><a href="#è¯·ç®€è¿°-Zookeeper-çš„é€‰ä¸¾æœºåˆ¶ï¼Ÿ" class="headerlink" title="è¯·ç®€è¿° Zookeeper çš„é€‰ä¸¾æœºåˆ¶ï¼Ÿ"></a>è¯·ç®€è¿° Zookeeper çš„é€‰ä¸¾æœºåˆ¶ï¼Ÿ</h3></blockquote><p>å‡è®¾æœ‰äº”å°æœåŠ¡å™¨ç»„æˆçš„ Zookeeper é›†ç¾¤ï¼Œå®ƒä»¬çš„ id ä» 1-5ï¼ŒåŒæ—¶å®ƒä»¬éƒ½æ˜¯æœ€æ–°å¯åŠ¨çš„ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å†å²æ•°æ®ï¼Œåœ¨å­˜æ”¾æ•°æ®é‡è¿™ä¸€ç‚¹ä¸Šï¼Œéƒ½æ˜¯ä¸€æ ·çš„ã€‚å‡è®¾è¿™äº›æœåŠ¡å™¨ä¾åºå¯åŠ¨ï¼Œæ¥çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/zookeeper_leader.png" alt></p><ol><li>æœåŠ¡å™¨ 1 å¯åŠ¨ï¼Œæ­¤æ—¶åªæœ‰å®ƒä¸€å°æœåŠ¡å™¨å¯åŠ¨äº†ï¼Œå®ƒå‘å‡ºå»çš„æŠ¥æ²¡æœ‰ä»»ä½•å“åº”ï¼Œæ‰€ä»¥å®ƒçš„é€‰ä¸¾çŠ¶æ€ä¸€ç›´æ˜¯ <code>LOOKING</code> çŠ¶æ€ï¼›</li><li>æœåŠ¡å™¨ 2 å¯åŠ¨ï¼Œå®ƒä¸æœ€å¼€å§‹å¯åŠ¨çš„æœåŠ¡å™¨ 1 è¿›è¡Œé€šä¿¡ï¼Œäº’ç›¸äº¤æ¢è‡ªå·±çš„é€‰ä¸¾ç»“æœï¼Œç”±äºä¸¤è€…éƒ½æ²¡æœ‰å†å²æ•°æ®ï¼Œæ‰€ä»¥ id å€¼è¾ƒå¤§çš„æœåŠ¡å™¨ 2 èƒœå‡ºï¼Œä½†æ˜¯ç”±äºæ²¡æœ‰è¾¾åˆ°è¶…è¿‡åŠæ•°ä»¥ä¸Šçš„æœåŠ¡å™¨éƒ½åŒæ„é€‰ä¸¾å®ƒ(è¿™ä¸ªä¾‹å­ä¸­çš„åŠæ•°ä»¥ä¸Šæ˜¯ 3)ï¼Œæ‰€ä»¥æœåŠ¡å™¨ 1ã€2 è¿˜æ˜¯ç»§ç»­ä¿æŒ <code>LOOKING</code> çŠ¶æ€ï¼›</li><li>æœåŠ¡å™¨ 3 å¯åŠ¨ï¼Œæ ¹æ®å‰é¢çš„ç†è®ºåˆ†æï¼ŒæœåŠ¡å™¨ 3 æˆä¸ºæœåŠ¡å™¨ 1ã€2ã€3 ä¸­çš„ <code>Leader</code>ï¼Œè€Œä¸ä¸Šé¢ä¸åŒçš„æ˜¯ï¼Œæ­¤æ—¶æœ‰ä¸‰å°æœåŠ¡å™¨é€‰ä¸¾äº†å®ƒï¼Œæ‰€ä»¥å®ƒæˆä¸ºäº†è¿™æ¬¡é€‰ä¸¾çš„ <code>Leader</code>ï¼›</li><li>æœåŠ¡å™¨ 4 å¯åŠ¨ï¼Œæ ¹æ®å‰é¢çš„åˆ†æï¼Œç†è®ºä¸ŠæœåŠ¡å™¨ 4 åº”è¯¥æ˜¯æœåŠ¡å™¨ 1ã€2ã€3ã€4 ä¸­æœ€å¤§çš„ï¼Œä½†æ˜¯ç”±äºå‰é¢å·²ç»æœ‰åŠæ•°ä»¥ä¸Šçš„æœåŠ¡å™¨é€‰ä¸¾äº†æœåŠ¡å™¨ 3ï¼Œæ‰€ä»¥å®ƒæˆä¸º <code>Follower</code>ï¼›</li><li>æœåŠ¡å™¨ 5 å¯åŠ¨ï¼ŒåŒ 4 ä¸€æ ·æˆä¸º <code>Follower</code>ã€‚</li></ol><p><strong>æ³¨æ„ï¼š</strong>å¦‚æœæŒ‰ç…§ 5ï¼Œ4ï¼Œ3ï¼Œ2ï¼Œ1 çš„é¡ºåºå¯åŠ¨ï¼Œé‚£ä¹ˆ 5 å°†æˆä¸º <code>Leader</code>ï¼Œå› ä¸ºåœ¨æ»¡è¶³åŠæ•°æ¡ä»¶åï¼ŒZooKeeper é›†ç¾¤å¯åŠ¨ï¼Œ5 çš„ Id æœ€å¤§ï¼Œè¢«é€‰ä¸¾ä¸º <code>Leader</code>ã€‚</p><blockquote><h3 id="å®¢æˆ·ç«¯å¦‚ä½•æ­£ç¡®å¤„ç†-CONNECTIONLOSS-è¿æ¥æ–­å¼€-å’Œ-SESSIONEXPIRED-Session-è¿‡æœŸ-ä¸¤ç±»è¿æ¥å¼‚å¸¸ï¼Ÿ"><a href="#å®¢æˆ·ç«¯å¦‚ä½•æ­£ç¡®å¤„ç†-CONNECTIONLOSS-è¿æ¥æ–­å¼€-å’Œ-SESSIONEXPIRED-Session-è¿‡æœŸ-ä¸¤ç±»è¿æ¥å¼‚å¸¸ï¼Ÿ" class="headerlink" title="å®¢æˆ·ç«¯å¦‚ä½•æ­£ç¡®å¤„ç† CONNECTIONLOSS(è¿æ¥æ–­å¼€) å’Œ SESSIONEXPIRED(Session è¿‡æœŸ) ä¸¤ç±»è¿æ¥å¼‚å¸¸ï¼Ÿ"></a>å®¢æˆ·ç«¯å¦‚ä½•æ­£ç¡®å¤„ç† CONNECTIONLOSS(è¿æ¥æ–­å¼€) å’Œ SESSIONEXPIRED(Session è¿‡æœŸ) ä¸¤ç±»è¿æ¥å¼‚å¸¸ï¼Ÿ</h3></blockquote><p>åœ¨ ZooKeeper ä¸­ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ç»´æŒçš„æ˜¯ä¸€ä¸ªé•¿è¿æ¥ï¼Œåœ¨ SESSION_TIMEOUT æ—¶é—´å†…ï¼ŒæœåŠ¡å™¨ä¼šç¡®å®šå®¢æˆ·ç«¯æ˜¯å¦æ­£å¸¸è¿æ¥ï¼ˆå®¢æˆ·ç«¯ä¼šå®šæ—¶å‘æœåŠ¡å™¨å‘é€ heart_beatï¼‰ï¼ŒæœåŠ¡å™¨é‡ç½®ä¸‹æ¬¡ SESSION_TIMEOUT æ—¶é—´ã€‚å› æ­¤ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼ŒSession ä¸€ç›´æœ‰æ•ˆï¼Œå¹¶ä¸” ZK é›†ç¾¤æ‰€æœ‰æœºå™¨ä¸Šéƒ½ä¿å­˜è¿™ä¸ª Session ä¿¡æ¯ã€‚åœ¨å‡ºç°é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´è¿æ¥æ–­äº†ï¼ˆå®¢æˆ·ç«¯æ‰€è¿æ¥çš„é‚£å° ZK æœºå™¨æŒ‚äº†ï¼Œæˆ–æ˜¯å…¶å®ƒåŸå› çš„ç½‘ç»œé—ªæ–­ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯ä¼šä¸»åŠ¨åœ¨åœ°å€åˆ—è¡¨ï¼ˆåˆå§‹åŒ–çš„æ—¶å€™ä¼ å…¥æ„é€ æ–¹æ³•çš„é‚£ä¸ªå‚æ•° connectStringï¼‰ä¸­é€‰æ‹©æ–°çš„åœ°å€è¿›è¡Œè¿æ¥ã€‚</p><p>ä»¥ä¸Šå³ä¸ºæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´ç»´æŒé•¿è¿æ¥çš„è¿‡ç¨‹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·å¯èƒ½ä¼šçœ‹åˆ°ä¸¤ç±»å¼‚å¸¸ CONNECTIONLOSSï¼ˆè¿æ¥æ–­å¼€ï¼‰ å’Œ SESSIONEXPIREDï¼ˆSession è¿‡æœŸï¼‰ã€‚</p><p>å‘ç”Ÿ CONNECTIONLOSS åï¼Œæ­¤æ—¶ç”¨æˆ·ä¸éœ€è¦å…³å¿ƒæˆ‘çš„ä¼šè¯æ˜¯å¦å¯ç”¨ï¼Œåº”ç”¨æ‰€è¦åšçš„å°±æ˜¯ç­‰å¾…å®¢æˆ·ç«¯å¸®æˆ‘ä»¬è‡ªåŠ¨è¿æ¥ä¸Šæ–°çš„ ZK æœºå™¨ï¼Œä¸€æ—¦æˆåŠŸè¿æ¥ä¸Šæ–°çš„ ZK æœºå™¨åï¼Œç¡®è®¤ä¹‹å‰çš„æ“ä½œæ˜¯å¦æ‰§è¡ŒæˆåŠŸäº†ã€‚</p><blockquote><h3 id="ä¸€ä¸ªå®¢æˆ·ç«¯ä¿®æ”¹äº†æŸä¸ªèŠ‚ç‚¹çš„æ•°æ®ï¼Œå…¶ä»–å®¢æˆ·ç«¯èƒ½å¤Ÿé©¬ä¸Šè·å–åˆ°è¿™ä¸ªæœ€æ–°æ•°æ®å—ï¼Ÿ"><a href="#ä¸€ä¸ªå®¢æˆ·ç«¯ä¿®æ”¹äº†æŸä¸ªèŠ‚ç‚¹çš„æ•°æ®ï¼Œå…¶ä»–å®¢æˆ·ç«¯èƒ½å¤Ÿé©¬ä¸Šè·å–åˆ°è¿™ä¸ªæœ€æ–°æ•°æ®å—ï¼Ÿ" class="headerlink" title="ä¸€ä¸ªå®¢æˆ·ç«¯ä¿®æ”¹äº†æŸä¸ªèŠ‚ç‚¹çš„æ•°æ®ï¼Œå…¶ä»–å®¢æˆ·ç«¯èƒ½å¤Ÿé©¬ä¸Šè·å–åˆ°è¿™ä¸ªæœ€æ–°æ•°æ®å—ï¼Ÿ"></a>ä¸€ä¸ªå®¢æˆ·ç«¯ä¿®æ”¹äº†æŸä¸ªèŠ‚ç‚¹çš„æ•°æ®ï¼Œå…¶ä»–å®¢æˆ·ç«¯èƒ½å¤Ÿé©¬ä¸Šè·å–åˆ°è¿™ä¸ªæœ€æ–°æ•°æ®å—ï¼Ÿ</h3></blockquote><p>ZooKeeper ä¸èƒ½ç¡®ä¿ä»»ä½•å®¢æˆ·ç«¯èƒ½å¤Ÿè·å–ï¼ˆå³ Read Requestï¼‰åˆ°ä¸€æ ·çš„æ•°æ®ï¼Œé™¤éå®¢æˆ·ç«¯è‡ªå·±è¦æ±‚ï¼Œæ–¹æ³•æ˜¯å®¢æˆ·ç«¯åœ¨è·å–æ•°æ®ä¹‹å‰è°ƒç”¨ <code>org.apache.zookeeper.AsyncCallback.VoidCallback, java.lang.Object) sync</code>ã€‚</p><ul><li>é€šå¸¸æƒ…å†µä¸‹ï¼ˆè¿™é‡Œæ‰€è¯´çš„é€šå¸¸æƒ…å†µæ»¡è¶³ï¼š1. å¯¹è·å–çš„æ•°æ®æ˜¯å¦æ˜¯æœ€æ–°ç‰ˆæœ¬ä¸æ•æ„Ÿï¼Œ2. ä¸€ä¸ªå®¢æˆ·ç«¯ä¿®æ”¹äº†æ•°æ®ï¼Œå…¶å®ƒå®¢æˆ·ç«¯æ˜¯å¦éœ€è¦ç«‹å³èƒ½å¤Ÿè·å–æœ€æ–°æ•°æ®ï¼‰ï¼Œå¯ä»¥ä¸å…³å¿ƒè¿™ç‚¹ã€‚</li><li>åœ¨å…¶å®ƒæƒ…å†µä¸‹ï¼Œæœ€æ¸…æ™°çš„åœºæ™¯æ˜¯è¿™æ ·ï¼šZK å®¢æˆ·ç«¯ A å¯¹ <code>/my_test</code> çš„å†…å®¹ä» v1-&gt;v2, ä½†æ˜¯ ZK å®¢æˆ·ç«¯ B å¯¹ <code>/my_test</code> çš„å†…å®¹è·å–ï¼Œä¾ç„¶å¾—åˆ°çš„æ˜¯ v1ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªæ˜¯å®é™…å­˜åœ¨çš„ç°è±¡ï¼Œå½“ç„¶å»¶æ—¶å¾ˆçŸ­ã€‚è§£å†³çš„æ–¹æ³•æ˜¯å®¢æˆ·ç«¯ B å…ˆè°ƒç”¨ <code>sync()</code>, å†è°ƒç”¨ <code>getData()</code>ã€‚</li></ul><blockquote><h3 id="ZooKeeper-å¯¹èŠ‚ç‚¹çš„-watch-ç›‘å¬æ˜¯æ°¸ä¹…çš„å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"><a href="#ZooKeeper-å¯¹èŠ‚ç‚¹çš„-watch-ç›‘å¬æ˜¯æ°¸ä¹…çš„å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="ZooKeeper å¯¹èŠ‚ç‚¹çš„ watch ç›‘å¬æ˜¯æ°¸ä¹…çš„å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"></a>ZooKeeper å¯¹èŠ‚ç‚¹çš„ watch ç›‘å¬æ˜¯æ°¸ä¹…çš„å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h3></blockquote><p>ä¸æ˜¯ã€‚</p><p>å®˜æ–¹å£°æ˜ï¼šä¸€ä¸ª Watch äº‹ä»¶æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§çš„è§¦å‘å™¨ï¼Œå½“è¢«è®¾ç½®äº† Watch çš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜çš„æ—¶å€™ï¼Œåˆ™æœåŠ¡å™¨å°†è¿™ä¸ªæ”¹å˜å‘é€ç»™è®¾ç½®äº† Watch çš„å®¢æˆ·ç«¯ï¼Œä»¥ä¾¿é€šçŸ¥å®ƒä»¬ã€‚</p><p>ä¸ºä»€ä¹ˆä¸æ˜¯æ°¸ä¹…çš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæœåŠ¡ç«¯å˜åŠ¨é¢‘ç¹ï¼Œè€Œç›‘å¬çš„å®¢æˆ·ç«¯å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæ¯æ¬¡å˜åŠ¨éƒ½è¦é€šçŸ¥åˆ°æ‰€æœ‰çš„å®¢æˆ·ç«¯ï¼Œè¿™å¤ªæ¶ˆè€—æ€§èƒ½äº†ã€‚</p><p>ä¸€èˆ¬æ˜¯å®¢æˆ·ç«¯æ‰§è¡Œ <code>getData(&quot;/èŠ‚ç‚¹A&quot;,true)</code>ï¼Œå¦‚æœèŠ‚ç‚¹ A å‘ç”Ÿäº†å˜æ›´æˆ–åˆ é™¤ï¼Œå®¢æˆ·ç«¯ä¼šå¾—åˆ°å®ƒçš„ watch äº‹ä»¶ï¼Œä½†æ˜¯åœ¨ä¹‹åèŠ‚ç‚¹ A åˆå‘ç”Ÿäº†å˜æ›´ï¼Œè€Œå®¢æˆ·ç«¯åˆæ²¡æœ‰è®¾ç½® watch äº‹ä»¶ï¼Œå°±ä¸å†ç»™å®¢æˆ·ç«¯å‘é€ã€‚</p><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“æœåŠ¡ç«¯çš„æ¯ä¸€æ¬¡å˜åŠ¨ï¼Œæˆ‘åªè¦æœ€æ–°çš„æ•°æ®å³å¯ã€‚</p><blockquote><h3 id="ZooKeeper-ä¸­ä½¿ç”¨-watch-çš„æ³¨æ„äº‹é¡¹æœ‰å“ªäº›ï¼Ÿ"><a href="#ZooKeeper-ä¸­ä½¿ç”¨-watch-çš„æ³¨æ„äº‹é¡¹æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="ZooKeeper ä¸­ä½¿ç”¨ watch çš„æ³¨æ„äº‹é¡¹æœ‰å“ªäº›ï¼Ÿ"></a>ZooKeeper ä¸­ä½¿ç”¨ watch çš„æ³¨æ„äº‹é¡¹æœ‰å“ªäº›ï¼Ÿ</h3></blockquote><p>ä½¿ç”¨ watch éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š</p><ul><li>Watches é€šçŸ¥æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œå¿…é¡»é‡å¤æ³¨å†Œã€‚</li><li>å‘ç”Ÿ CONNECTIONLOSS ä¹‹åï¼Œåªè¦åœ¨ session_timeout ä¹‹å†…å†æ¬¡è¿æ¥ä¸Šï¼ˆå³ä¸å‘ç”Ÿ SESSIONEXPIREDï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿æ¥æ³¨å†Œçš„ watches ä¾ç„¶åœ¨ã€‚</li><li>èŠ‚ç‚¹æ•°æ®çš„ç‰ˆæœ¬å˜åŒ–ä¼šè§¦å‘ NodeDataChangedï¼Œæ³¨æ„ï¼Œè¿™é‡Œç‰¹æ„è¯´æ˜äº†æ˜¯ç‰ˆæœ¬å˜åŒ–ã€‚å­˜åœ¨è¿™æ ·çš„æƒ…å†µï¼Œåªè¦æˆåŠŸæ‰§è¡Œäº† <code>setData()</code> æ–¹æ³•ï¼Œæ— è®ºå†…å®¹æ˜¯å¦å’Œä¹‹å‰ä¸€è‡´ï¼Œéƒ½ä¼šè§¦å‘ NodeDataChangedã€‚</li><li>å¯¹æŸä¸ªèŠ‚ç‚¹æ³¨å†Œäº† watchï¼Œä½†æ˜¯èŠ‚ç‚¹è¢«åˆ é™¤äº†ï¼Œé‚£ä¹ˆæ³¨å†Œåœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šçš„ watches éƒ½ä¼šè¢«ç§»é™¤ã€‚</li><li>åŒä¸€ä¸ª ZK å®¢æˆ·ç«¯å¯¹æŸä¸€ä¸ªèŠ‚ç‚¹æ³¨å†Œç›¸åŒçš„ watchï¼Œåªä¼šæ”¶åˆ°ä¸€æ¬¡é€šçŸ¥ã€‚</li><li>Watcher å¯¹è±¡åªä¼šä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œä¸ä¼šä¼ é€’åˆ°æœåŠ¡ç«¯ã€‚</li></ul><blockquote><h3 id="èƒ½å¦æ”¶åˆ°æ¯æ¬¡èŠ‚ç‚¹å˜åŒ–çš„é€šçŸ¥ï¼Ÿ"><a href="#èƒ½å¦æ”¶åˆ°æ¯æ¬¡èŠ‚ç‚¹å˜åŒ–çš„é€šçŸ¥ï¼Ÿ" class="headerlink" title="èƒ½å¦æ”¶åˆ°æ¯æ¬¡èŠ‚ç‚¹å˜åŒ–çš„é€šçŸ¥ï¼Ÿ"></a>èƒ½å¦æ”¶åˆ°æ¯æ¬¡èŠ‚ç‚¹å˜åŒ–çš„é€šçŸ¥ï¼Ÿ</h3></blockquote><p>å¦‚æœèŠ‚ç‚¹æ•°æ®çš„æ›´æ–°é¢‘ç‡å¾ˆé«˜çš„è¯ï¼Œä¸èƒ½ã€‚</p><p>åŸå› åœ¨äºï¼šå½“ä¸€æ¬¡æ•°æ®ä¿®æ”¹ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å†æ¬¡æ³¨å†Œ watchï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½æ•°æ®å·²ç»å‘ç”Ÿäº†è®¸å¤šæ¬¡æ•°æ®ä¿®æ”¹ï¼Œå› æ­¤ï¼Œåƒä¸‡ä¸è¦åšè¿™æ ·çš„æµ‹è¯•ï¼šâ€œæ•°æ®è¢«ä¿®æ”¹äº† n æ¬¡ï¼Œä¸€å®šä¼šæ”¶åˆ° n æ¬¡é€šçŸ¥â€æ¥æµ‹è¯• server æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p><blockquote><h3 id="èƒ½å¦ä¸ºä¸´æ—¶èŠ‚ç‚¹åˆ›å»ºå­èŠ‚ç‚¹ï¼Ÿ"><a href="#èƒ½å¦ä¸ºä¸´æ—¶èŠ‚ç‚¹åˆ›å»ºå­èŠ‚ç‚¹ï¼Ÿ" class="headerlink" title="èƒ½å¦ä¸ºä¸´æ—¶èŠ‚ç‚¹åˆ›å»ºå­èŠ‚ç‚¹ï¼Ÿ"></a>èƒ½å¦ä¸ºä¸´æ—¶èŠ‚ç‚¹åˆ›å»ºå­èŠ‚ç‚¹ï¼Ÿ</h3></blockquote><p>ZooKeeper ä¸­ä¸èƒ½ä¸ºä¸´æ—¶èŠ‚ç‚¹åˆ›å»ºå­èŠ‚ç‚¹ï¼Œå¦‚æœéœ€è¦åˆ›å»ºå­èŠ‚ç‚¹ï¼Œåº”è¯¥å°†è¦åˆ›å»ºå­èŠ‚ç‚¹çš„èŠ‚ç‚¹åˆ›å»ºä¸ºæ°¸ä¹…æ€§èŠ‚ç‚¹ã€‚</p><blockquote><h3 id="æ˜¯å¦å¯ä»¥æ‹’ç»å•ä¸ª-IP-å¯¹-ZooKeeper-çš„è®¿é—®ï¼Ÿ"><a href="#æ˜¯å¦å¯ä»¥æ‹’ç»å•ä¸ª-IP-å¯¹-ZooKeeper-çš„è®¿é—®ï¼Ÿ" class="headerlink" title="æ˜¯å¦å¯ä»¥æ‹’ç»å•ä¸ª IP å¯¹ ZooKeeper çš„è®¿é—®ï¼Ÿ"></a>æ˜¯å¦å¯ä»¥æ‹’ç»å•ä¸ª IP å¯¹ ZooKeeper çš„è®¿é—®ï¼Ÿ</h3></blockquote><p>å¦‚ä½•å®ç°ï¼ŸZK æœ¬èº«ä¸æä¾›è¿™æ ·çš„åŠŸèƒ½ï¼Œå®ƒä»…ä»…æä¾›äº†å¯¹å•ä¸ª IP çš„è¿æ¥æ•°çš„é™åˆ¶ã€‚ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹ iptables æ¥å®ç°å¯¹å•ä¸ª ip çš„é™åˆ¶ã€‚</p><blockquote><h3 id="åˆ›å»ºçš„ä¸´æ—¶èŠ‚ç‚¹ä»€ä¹ˆæ—¶å€™ä¼šè¢«åˆ é™¤ï¼Œæ˜¯è¿æ¥ä¸€æ–­å°±åˆ é™¤å—ï¼Ÿ"><a href="#åˆ›å»ºçš„ä¸´æ—¶èŠ‚ç‚¹ä»€ä¹ˆæ—¶å€™ä¼šè¢«åˆ é™¤ï¼Œæ˜¯è¿æ¥ä¸€æ–­å°±åˆ é™¤å—ï¼Ÿ" class="headerlink" title="åˆ›å»ºçš„ä¸´æ—¶èŠ‚ç‚¹ä»€ä¹ˆæ—¶å€™ä¼šè¢«åˆ é™¤ï¼Œæ˜¯è¿æ¥ä¸€æ–­å°±åˆ é™¤å—ï¼Ÿ"></a>åˆ›å»ºçš„ä¸´æ—¶èŠ‚ç‚¹ä»€ä¹ˆæ—¶å€™ä¼šè¢«åˆ é™¤ï¼Œæ˜¯è¿æ¥ä¸€æ–­å°±åˆ é™¤å—ï¼Ÿ</h3></blockquote><p>å»¶æ—¶æ˜¯å¤šå°‘ï¼Ÿè¿æ¥æ–­äº†ä¹‹åï¼ŒZK ä¸ä¼šé©¬ä¸Šç§»é™¤ä¸´æ—¶æ•°æ®ï¼Œåªæœ‰å½“ SESSIONEXPIRED ä¹‹åï¼Œæ‰ä¼šæŠŠè¿™ä¸ªä¼šè¯å»ºç«‹çš„ä¸´æ—¶æ•°æ®ç§»é™¤ã€‚å› æ­¤ï¼Œç”¨æˆ·éœ€è¦è°¨æ…è®¾ç½® Session_TimeOutã€‚</p><blockquote><h3 id="ZooKeeper-æ˜¯å¦æ”¯æŒåŠ¨æ€è¿›è¡Œæœºå™¨æ‰©å®¹ï¼Ÿå¦‚æœç›®å‰ä¸æ”¯æŒï¼Œé‚£ä¹ˆè¦å¦‚ä½•æ‰©å®¹å‘¢ï¼Ÿ"><a href="#ZooKeeper-æ˜¯å¦æ”¯æŒåŠ¨æ€è¿›è¡Œæœºå™¨æ‰©å®¹ï¼Ÿå¦‚æœç›®å‰ä¸æ”¯æŒï¼Œé‚£ä¹ˆè¦å¦‚ä½•æ‰©å®¹å‘¢ï¼Ÿ" class="headerlink" title="ZooKeeper æ˜¯å¦æ”¯æŒåŠ¨æ€è¿›è¡Œæœºå™¨æ‰©å®¹ï¼Ÿå¦‚æœç›®å‰ä¸æ”¯æŒï¼Œé‚£ä¹ˆè¦å¦‚ä½•æ‰©å®¹å‘¢ï¼Ÿ"></a>ZooKeeper æ˜¯å¦æ”¯æŒåŠ¨æ€è¿›è¡Œæœºå™¨æ‰©å®¹ï¼Ÿå¦‚æœç›®å‰ä¸æ”¯æŒï¼Œé‚£ä¹ˆè¦å¦‚ä½•æ‰©å®¹å‘¢ï¼Ÿ</h3></blockquote><p>ZooKeeper ä¸­çš„åŠ¨æ€æ‰©å®¹å…¶å®å°±æ˜¯æ°´å¹³æ‰©å®¹ï¼ŒZookeeper å¯¹è¿™æ–¹é¢çš„æ”¯æŒä¸å¤ªå¥½ï¼Œç›®å‰æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>å…¨éƒ¨é‡å¯ï¼šå…³é—­æ‰€æœ‰ Zookeeper æœåŠ¡ï¼Œä¿®æ”¹é…ç½®ä¹‹åå¯åŠ¨ï¼Œä¸å½±å“ä¹‹å‰å®¢æˆ·ç«¯çš„ä¼šè¯ã€‚</li><li>é€ä¸ªé‡å¯ï¼šè¿™æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹å¼ã€‚</li></ul><blockquote><h3 id="ZooKeeper-é›†ç¾¤ä¸­æœåŠ¡å™¨ä¹‹é—´æ˜¯æ€æ ·é€šä¿¡çš„ï¼Ÿ"><a href="#ZooKeeper-é›†ç¾¤ä¸­æœåŠ¡å™¨ä¹‹é—´æ˜¯æ€æ ·é€šä¿¡çš„ï¼Ÿ" class="headerlink" title="ZooKeeper é›†ç¾¤ä¸­æœåŠ¡å™¨ä¹‹é—´æ˜¯æ€æ ·é€šä¿¡çš„ï¼Ÿ"></a>ZooKeeper é›†ç¾¤ä¸­æœåŠ¡å™¨ä¹‹é—´æ˜¯æ€æ ·é€šä¿¡çš„ï¼Ÿ</h3></blockquote><p>Leader æœåŠ¡å™¨ä¼šå’Œæ¯ä¸€ä¸ª Follower/Observer æœåŠ¡å™¨éƒ½å»ºç«‹ TCP è¿æ¥ï¼ŒåŒæ—¶ä¸ºæ¯ä¸ª F/O éƒ½åˆ›å»ºä¸€ä¸ªå«åš LearnerHandler çš„å®ä½“ã€‚LearnerHandler ä¸»è¦è´Ÿè´£ Leader å’Œ F/O ä¹‹é—´çš„ç½‘ç»œé€šè®¯ï¼ŒåŒ…æ‹¬æ•°æ®åŒæ­¥ï¼Œè¯·æ±‚è½¬å‘å’Œ Proposal æè®®çš„æŠ•ç¥¨ç­‰ã€‚Leader æœåŠ¡å™¨ä¿å­˜äº†æ‰€æœ‰ F/O çš„ LearnerHandlerã€‚</p><blockquote><h3 id="ZooKeeper-æ˜¯å¦ä¼šè‡ªåŠ¨è¿›è¡Œæ—¥å¿—æ¸…ç†ï¼Ÿ"><a href="#ZooKeeper-æ˜¯å¦ä¼šè‡ªåŠ¨è¿›è¡Œæ—¥å¿—æ¸…ç†ï¼Ÿ" class="headerlink" title="ZooKeeper æ˜¯å¦ä¼šè‡ªåŠ¨è¿›è¡Œæ—¥å¿—æ¸…ç†ï¼Ÿ"></a>ZooKeeper æ˜¯å¦ä¼šè‡ªåŠ¨è¿›è¡Œæ—¥å¿—æ¸…ç†ï¼Ÿ</h3></blockquote><p>å¦‚ä½•è¿›è¡Œæ—¥å¿—æ¸…ç†ï¼ŸZK è‡ªå·±ä¸ä¼šè¿›è¡Œæ—¥å¿—æ¸…ç†ï¼Œéœ€è¦è¿ç»´äººå‘˜è¿›è¡Œæ—¥å¿—æ¸…ç†ã€‚</p><blockquote><h3 id="è°ˆè°ˆä½ å¯¹-ZooKeeper-çš„ç†è§£ï¼Ÿ"><a href="#è°ˆè°ˆä½ å¯¹-ZooKeeper-çš„ç†è§£ï¼Ÿ" class="headerlink" title="è°ˆè°ˆä½ å¯¹ ZooKeeper çš„ç†è§£ï¼Ÿ"></a>è°ˆè°ˆä½ å¯¹ ZooKeeper çš„ç†è§£ï¼Ÿ</h3></blockquote><ul><li><p>Zookeeper ä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼çš„æœåŠ¡æ¡†æ¶ï¼Œä¸»è¦ç”¨æ¥è§£å†³åˆ†å¸ƒå¼é›†ç¾¤ä¸­åº”ç”¨ç³»ç»Ÿçš„ä¸€è‡´æ€§é—®é¢˜ã€‚ZooKeeper æä¾›çš„æœåŠ¡åŒ…æ‹¬ï¼š<strong>åˆ†å¸ƒå¼æ¶ˆæ¯åŒæ­¥å’Œåè°ƒæœºåˆ¶</strong>ã€<strong>æœåŠ¡å™¨èŠ‚ç‚¹åŠ¨æ€ä¸Šä¸‹çº¿</strong>ã€<strong>ç»Ÿä¸€é…ç½®ç®¡ç†</strong>ã€<strong>è´Ÿè½½å‡è¡¡</strong>ã€<strong>é›†ç¾¤ç®¡ç†</strong>ç­‰ã€‚</p></li><li><p>ZooKeeper æä¾›åŸºäºç±»ä¼¼äº Linux æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•èŠ‚ç‚¹æ ‘æ–¹å¼çš„æ•°æ®å­˜å‚¨ï¼Œå³åˆ†å±‚å‘½åç©ºé—´ã€‚Zookeeper å¹¶ä¸æ˜¯ç”¨æ¥ä¸“é—¨å­˜å‚¨æ•°æ®çš„ï¼Œå®ƒçš„ä½œç”¨ä¸»è¦æ˜¯ç”¨æ¥ç»´æŠ¤å’Œç›‘æ§ä½ å­˜å‚¨çš„æ•°æ®çš„çŠ¶æ€å˜åŒ–ï¼Œé€šè¿‡ç›‘æ§è¿™äº›æ•°æ®çŠ¶æ€çš„å˜åŒ–ï¼Œä»è€Œå¯ä»¥è¾¾åˆ°åŸºäºæ•°æ®çš„é›†ç¾¤ç®¡ç†ï¼ŒZooKeeper èŠ‚ç‚¹çš„æ•°æ®ä¸Šé™æ˜¯ 1MBã€‚</p></li><li><p>æˆ‘ä»¬å¯ä»¥è®¤ä¸º Zookeeper = æ–‡ä»¶ç³»ç»Ÿ + é€šçŸ¥æœºåˆ¶ï¼Œå¯¹äº ZooKeeper çš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªå­ç›®å½•é¡¹å¦‚ NameService éƒ½è¢«ç§°ä½œä¸º znodeï¼Œè¿™ä¸ª znode æ˜¯è¢«å®ƒæ‰€åœ¨çš„è·¯å¾„å”¯ä¸€æ ‡è¯†ï¼Œå¦‚ Server1 è¿™ä¸ª znode çš„æ ‡è¯†ä¸º <code>/NameService/Server1</code>ï¼›</p></li><li><p>znode å¯ä»¥æœ‰å­èŠ‚ç‚¹ç›®å½•ï¼Œå¹¶ä¸”æ¯ä¸ª znode å¯ä»¥å­˜å‚¨æ•°æ®ï¼Œæ³¨æ„ <code>EPHEMERAL</code> ç±»å‹çš„ç›®å½•èŠ‚ç‚¹ä¸èƒ½æœ‰å­èŠ‚ç‚¹ç›®å½•(å› ä¸ºå®ƒæ˜¯ä¸´æ—¶èŠ‚ç‚¹)ï¼›</p></li><li><p>znode æ˜¯æœ‰ç‰ˆæœ¬çš„ï¼Œæ¯ä¸ª znode ä¸­å­˜å‚¨çš„æ•°æ®å¯ä»¥æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè®¿é—®è·¯å¾„ä¸­å¯ä»¥å­˜å‚¨å¤šä»½æ•°æ®ï¼›</p></li><li><p>znode å¯ä»¥æ˜¯ä¸´æ—¶èŠ‚ç‚¹ï¼Œä¸€æ—¦åˆ›å»ºè¿™ä¸ª znode çš„å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å¤±å»è”ç³»ï¼Œè¿™ä¸ª znode ä¹Ÿå°†è‡ªåŠ¨åˆ é™¤ï¼ŒZookeeper çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šä¿¡é‡‡ç”¨é•¿è¿æ¥æ–¹å¼ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨é€šè¿‡å¿ƒè·³æ¥ä¿æŒè¿æ¥ï¼Œè¿™ä¸ªè¿æ¥çŠ¶æ€ç§°ä¸º sessionï¼Œå¦‚æœ znode æ˜¯ä¸´æ—¶èŠ‚ç‚¹ï¼Œè¿™ä¸ª session å¤±æ•ˆï¼Œznode ä¹Ÿå°±åˆ é™¤äº†ï¼›</p></li><li><p>znode çš„ç›®å½•åå¯ä»¥è‡ªåŠ¨ç¼–å·ï¼Œå¦‚ App1 å·²ç»å­˜åœ¨ï¼Œå†åˆ›å»ºçš„è¯ï¼Œå°†ä¼šè‡ªåŠ¨å‘½åä¸º App2ï¼›</p></li><li><p>znode å¯ä»¥è¢«ç›‘æ§ï¼ŒåŒ…æ‹¬è¿™ä¸ªç›®å½•èŠ‚ç‚¹ä¸­å­˜å‚¨çš„æ•°æ®çš„ä¿®æ”¹ï¼Œå­èŠ‚ç‚¹ç›®å½•çš„å˜åŒ–ç­‰ï¼Œä¸€æ—¦å˜åŒ–å¯ä»¥é€šçŸ¥è®¾ç½®ç›‘æ§çš„å®¢æˆ·ç«¯ï¼Œè¿™ä¸ªæ˜¯ Zookeeper çš„æ ¸å¿ƒç‰¹æ€§ï¼ŒZookeeper çš„å¾ˆå¤šåŠŸèƒ½éƒ½æ˜¯åŸºäºè¿™ä¸ªç‰¹æ€§å®ç°çš„ï¼Œåé¢åœ¨å…¸å‹çš„åº”ç”¨åœºæ™¯ä¸­ä¼šæœ‰å®ä¾‹ä»‹ç»ã€‚</p></li></ul><blockquote><h3 id="ZooKeeper-èŠ‚ç‚¹ç±»å‹ï¼Ÿ"><a href="#ZooKeeper-èŠ‚ç‚¹ç±»å‹ï¼Ÿ" class="headerlink" title="ZooKeeper èŠ‚ç‚¹ç±»å‹ï¼Ÿ"></a>ZooKeeper èŠ‚ç‚¹ç±»å‹ï¼Ÿ</h3></blockquote><ol><li>znode æœ‰ä¸¤ç§ç±»å‹ï¼š<ul><li>çŸ­æš‚ï¼ˆephemeralï¼‰ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯æ–­å¼€è¿æ¥åï¼Œåˆ›å»ºçš„èŠ‚ç‚¹è‡ªå·±åˆ é™¤ã€‚</li><li>æŒä¹…ï¼ˆpersistentï¼‰ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯æ–­å¼€è¿æ¥åï¼Œåˆ›å»ºçš„èŠ‚ç‚¹ä¸åˆ é™¤ã€‚</li></ul></li><li>znode æœ‰å››ç§å½¢å¼çš„ç›®å½•èŠ‚ç‚¹ï¼ˆé»˜è®¤æ˜¯ persistentï¼‰<ul><li>æŒä¹…åŒ–ç›®å½•èŠ‚ç‚¹ï¼ˆPERSISTENTï¼‰å®¢æˆ·ç«¯ä¸ Zookeeper æ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹ä¾æ—§å­˜åœ¨ã€‚<ul><li>æŒä¹…åŒ–é¡ºåºç¼–å·ç›®å½•èŠ‚ç‚¹ï¼ˆPERSISTENT_SEQUENTIALï¼‰ å®¢æˆ·ç«¯ä¸ Zookeeper æ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹ä¾æ—§å­˜åœ¨ï¼Œåªæ˜¯ Zookeeper ç»™è¯¥èŠ‚ç‚¹åç§°è¿›è¡Œé¡ºåºç¼–å·ã€‚</li><li>ä¸´æ—¶ç›®å½•èŠ‚ç‚¹ï¼ˆEPHEMERALï¼‰ å®¢æˆ·ç«¯ä¸ Zookeeper æ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹è¢«åˆ é™¤ã€‚</li><li>ä¸´æ—¶é¡ºåºç¼–å·ç›®å½•èŠ‚ç‚¹ï¼ˆEPHEMERAL_SEQUENTIALï¼‰å®¢æˆ·ç«¯ä¸ Zookeeper æ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹è¢«åˆ é™¤ï¼Œåªæ˜¯ Zookeeper ç»™è¯¥èŠ‚ç‚¹åç§°è¿›è¡Œé¡ºåºç¼–å·ã€‚</li></ul></li></ul></li></ol><blockquote><h3 id="è¯·è¯´æ˜-ZooKeeper-çš„é€šçŸ¥æœºåˆ¶ï¼Ÿ"><a href="#è¯·è¯´æ˜-ZooKeeper-çš„é€šçŸ¥æœºåˆ¶ï¼Ÿ" class="headerlink" title="è¯·è¯´æ˜ ZooKeeper çš„é€šçŸ¥æœºåˆ¶ï¼Ÿ"></a>è¯·è¯´æ˜ ZooKeeper çš„é€šçŸ¥æœºåˆ¶ï¼Ÿ</h3></blockquote><p>ZooKeeper é€‰æ‹©äº†åŸºäºé€šçŸ¥ï¼ˆnotificationï¼‰çš„æœºåˆ¶ï¼Œå³ï¼šå®¢æˆ·ç«¯å‘ ZooKeeper æ³¨å†Œéœ€è¦æ¥å—é€šçŸ¥çš„ znodeï¼Œé€šè¿‡ znode è®¾ç½®ç›‘æ§ç‚¹ï¼ˆwatchï¼‰æ¥æ¥å—é€šçŸ¥ã€‚ç›‘è§†ç‚¹æ˜¯ä¸€ä¸ªå•æ¬¡è§¦å‘çš„æ“ä½œï¼Œæ„å³ç›‘è§†ç‚¹ä¼šè§¦å‘ä¸€ä¸ªé€šçŸ¥ã€‚ä¸ºäº†æ¥æ”¶å¤šä¸ªé€šçŸ¥ï¼Œå®¢æˆ·ç«¯å¿…é¡»åœ¨æ¯æ¬¡é€šçŸ¥åè®¾ç½®ä¸€ä¸ªæ–°çš„ç›‘è§†ç‚¹ã€‚åœ¨ä¸‹å›¾é˜è¿°çš„æƒ…å†µä¸‹ï¼Œå½“èŠ‚ç‚¹/task å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šå—åˆ°ä¸€ä¸ªé€šçŸ¥ï¼Œå¹¶ä» ZooKeeper è¯»å–ä¸€ä¸ªæ–°å€¼ã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/zookeeper_notification.png" alt></p><blockquote><h3 id="ZooKeeper-çš„ç›‘å¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ZooKeeper-çš„ç›‘å¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ZooKeeper çš„ç›‘å¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ZooKeeper çš„ç›‘å¬åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3></blockquote><p>åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œ<code>main()</code> æ–¹æ³•é¦–å…ˆä¼šåˆ›å»º zkClientï¼Œåˆ›å»º zkClient çš„åŒæ—¶å°±ä¼šäº§ç”Ÿä¸¤ä¸ªè¿›ç¨‹ï¼Œå³ <code>Listener</code> è¿›ç¨‹ï¼ˆç›‘å¬è¿›ç¨‹ï¼‰å’Œ <code>connect</code> è¿›ç¨‹ï¼ˆç½‘ç»œè¿æ¥/ä¼ è¾“è¿›ç¨‹ï¼‰ï¼Œå½“ zkClient è°ƒç”¨ <code>getChildren()</code> ç­‰æ–¹æ³•æ³¨å†Œç›‘è§†å™¨æ—¶ï¼Œ<code>connect</code> è¿›ç¨‹å‘ ZooKeeper æ³¨å†Œç›‘å¬å™¨ï¼Œæ³¨å†Œåçš„ç›‘å¬å™¨ä½äº ZooKeeper çš„ç›‘å¬å™¨åˆ—è¡¨ä¸­ï¼Œç›‘å¬å™¨åˆ—è¡¨ä¸­è®°å½•äº† zkClient çš„ IPï¼Œç«¯å£å·ä»¥åŠè¦ç›‘æ§çš„è·¯å¾„ï¼Œä¸€æ—¦ç›®æ ‡æ–‡ä»¶å‘ç”Ÿå˜åŒ–ï¼ŒZooKeeper å°±ä¼šæŠŠè¿™æ¡æ¶ˆæ¯å‘é€ç»™å¯¹åº”çš„ zkClient çš„ <code>Listener()</code> è¿›ç¨‹ï¼Œ<code>Listener</code> è¿›ç¨‹æ¥æ”¶åˆ°åï¼Œå°±ä¼šæ‰§è¡Œ <code>process()</code> æ–¹æ³•ï¼Œåœ¨ <code>process()</code> æ–¹æ³•ä¸­é’ˆå¯¹å‘ç”Ÿçš„äº‹ä»¶è¿›è¡Œå¤„ç†ã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/zookeeper_listener.png" alt></p><blockquote><h3 id="è¯·è¯´æ˜-ZooKeeper-ä½¿ç”¨åˆ°çš„å„ä¸ªç«¯å£çš„ä½œç”¨ï¼Ÿ"><a href="#è¯·è¯´æ˜-ZooKeeper-ä½¿ç”¨åˆ°çš„å„ä¸ªç«¯å£çš„ä½œç”¨ï¼Ÿ" class="headerlink" title="è¯·è¯´æ˜ ZooKeeper ä½¿ç”¨åˆ°çš„å„ä¸ªç«¯å£çš„ä½œç”¨ï¼Ÿ"></a>è¯·è¯´æ˜ ZooKeeper ä½¿ç”¨åˆ°çš„å„ä¸ªç«¯å£çš„ä½œç”¨ï¼Ÿ</h3></blockquote><ul><li><code>2888</code>ï¼šFollower ä¸ Leader äº¤æ¢ä¿¡æ¯çš„ç«¯å£ã€‚</li><li><code>3888</code>ï¼šä¸‡ä¸€é›†ç¾¤ä¸­çš„ Leader æœåŠ¡å™¨æŒ‚äº†ï¼Œéœ€è¦ä¸€ä¸ªç«¯å£æ¥é‡æ–°è¿›è¡Œé€‰ä¸¾ï¼Œé€‰å‡ºä¸€ä¸ªæ–°çš„ Leaderï¼Œè€Œè¿™ä¸ªç«¯å£å°±æ˜¯ç”¨æ¥æ‰§è¡Œé€‰ä¸¾æ—¶æœåŠ¡å™¨ç›¸äº’é€šä¿¡çš„ç«¯å£ã€‚</li></ul><blockquote><h3 id="ZooKeeper-çš„éƒ¨ç½²æ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿé›†ç¾¤ä¸­çš„è§’è‰²æœ‰å“ªäº›ï¼Ÿé›†ç¾¤æœ€å°‘éœ€è¦å‡ å°æœºå™¨ï¼Ÿ"><a href="#ZooKeeper-çš„éƒ¨ç½²æ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿé›†ç¾¤ä¸­çš„è§’è‰²æœ‰å“ªäº›ï¼Ÿé›†ç¾¤æœ€å°‘éœ€è¦å‡ å°æœºå™¨ï¼Ÿ" class="headerlink" title="ZooKeeper çš„éƒ¨ç½²æ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿé›†ç¾¤ä¸­çš„è§’è‰²æœ‰å“ªäº›ï¼Ÿé›†ç¾¤æœ€å°‘éœ€è¦å‡ å°æœºå™¨ï¼Ÿ"></a>ZooKeeper çš„éƒ¨ç½²æ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿé›†ç¾¤ä¸­çš„è§’è‰²æœ‰å“ªäº›ï¼Ÿé›†ç¾¤æœ€å°‘éœ€è¦å‡ å°æœºå™¨ï¼Ÿ</h3></blockquote><p>ZooKeeper çš„éƒ¨ç½²æ–¹å¼æœ‰<strong>å•æœºæ¨¡å¼</strong>å’Œ<strong>é›†ç¾¤æ¨¡å¼</strong>ï¼Œé›†ç¾¤ä¸­çš„è§’è‰²æœ‰ Leader å’Œ Followerï¼Œé›†ç¾¤æœ€å°‘ 3ï¼ˆ2N+1ï¼‰å°ï¼Œæ ¹æ®é€‰ä¸¾ç®—æ³•ï¼Œåº”ä¿è¯å¥‡æ•°ã€‚</p><blockquote><h3 id="ZooKeeper-é›†ç¾¤å¦‚æœæœ‰-3-å°æœºå™¨ï¼ŒæŒ‚æ‰ä¸€å°æ˜¯å¦è¿˜èƒ½å·¥ä½œï¼ŸæŒ‚æ‰ä¸¤å°å‘¢ï¼Ÿ"><a href="#ZooKeeper-é›†ç¾¤å¦‚æœæœ‰-3-å°æœºå™¨ï¼ŒæŒ‚æ‰ä¸€å°æ˜¯å¦è¿˜èƒ½å·¥ä½œï¼ŸæŒ‚æ‰ä¸¤å°å‘¢ï¼Ÿ" class="headerlink" title="ZooKeeper é›†ç¾¤å¦‚æœæœ‰ 3 å°æœºå™¨ï¼ŒæŒ‚æ‰ä¸€å°æ˜¯å¦è¿˜èƒ½å·¥ä½œï¼ŸæŒ‚æ‰ä¸¤å°å‘¢ï¼Ÿ"></a>ZooKeeper é›†ç¾¤å¦‚æœæœ‰ 3 å°æœºå™¨ï¼ŒæŒ‚æ‰ä¸€å°æ˜¯å¦è¿˜èƒ½å·¥ä½œï¼ŸæŒ‚æ‰ä¸¤å°å‘¢ï¼Ÿ</h3></blockquote><p>å¯¹äºZooKeeperé›†ç¾¤ï¼Œè¿‡åŠå­˜æ´»å³å¯ä½¿ç”¨ã€‚</p><blockquote><h3 id="ZooKeeper-ä½¿ç”¨çš„-ZAB-åè®®ä¸-Paxo-ç®—æ³•çš„å¼‚åŒï¼Ÿ"><a href="#ZooKeeper-ä½¿ç”¨çš„-ZAB-åè®®ä¸-Paxo-ç®—æ³•çš„å¼‚åŒï¼Ÿ" class="headerlink" title="ZooKeeper ä½¿ç”¨çš„ ZAB åè®®ä¸ Paxo ç®—æ³•çš„å¼‚åŒï¼Ÿ"></a>ZooKeeper ä½¿ç”¨çš„ ZAB åè®®ä¸ Paxo ç®—æ³•çš„å¼‚åŒï¼Ÿ</h3></blockquote><p>Paxos ç®—æ³•æ˜¯åˆ†å¸ƒå¼é€‰ä¸¾ç®—æ³•ï¼ŒZookeeper ä½¿ç”¨çš„ZABåè®®ï¼ˆZookeeper åŸå­å¹¿æ’­ï¼‰ï¼Œä¸¤è€…çš„å¼‚åŒå¦‚ä¸‹ï¼š</p><ul><li><p>ç›¸åŒä¹‹å¤„ï¼š</p><p>æ¯”å¦‚éƒ½æœ‰ä¸€ä¸ª Leaderï¼Œç”¨æ¥åè°ƒ N ä¸ª Follower çš„è¿è¡Œï¼›Leader è¦ç­‰å¾…è¶…åŠæ•°çš„ Follower åšå‡ºæ­£ç¡®åé¦ˆä¹‹åæ‰è¿›è¡Œææ¡ˆï¼›äºŒè€…éƒ½æœ‰ä¸€ä¸ªå€¼æ¥ä»£è¡¨ Leader çš„å‘¨æœŸã€‚</p></li><li><p>ä¸åŒä¹‹å¤„ï¼š</p><p>ZAB ç”¨æ¥æ„å»ºé«˜å¯ç”¨çš„åˆ†å¸ƒå¼æ•°æ®ä¸»å¤‡ç³»ç»Ÿï¼ˆZookeeperï¼‰ï¼ŒPaxos æ˜¯ç”¨æ¥æ„å»ºåˆ†å¸ƒå¼ä¸€è‡´æ€§çŠ¶æ€æœºç³»ç»Ÿã€‚</p></li></ul><blockquote><h3 id="è¯·è°ˆè°ˆå¯¹-ZooKeeper-å¯¹äº‹åŠ¡æ€§çš„æ”¯æŒï¼Ÿ"><a href="#è¯·è°ˆè°ˆå¯¹-ZooKeeper-å¯¹äº‹åŠ¡æ€§çš„æ”¯æŒï¼Ÿ" class="headerlink" title="è¯·è°ˆè°ˆå¯¹ ZooKeeper å¯¹äº‹åŠ¡æ€§çš„æ”¯æŒï¼Ÿ"></a>è¯·è°ˆè°ˆå¯¹ ZooKeeper å¯¹äº‹åŠ¡æ€§çš„æ”¯æŒï¼Ÿ</h3></blockquote><p>ZooKeeper å¯¹äºäº‹åŠ¡æ€§çš„æ”¯æŒä¸»è¦ä¾èµ–äºå››ä¸ªå‡½æ•°ï¼Œ<code>zoo_create_op_init</code>ï¼Œ<code>zoo_delete_op_init</code>ï¼Œ<code>zoo_set_op_init</code> ä»¥åŠ <code>zoo_check_op_init</code>ã€‚</p><p>æ¯ä¸€ä¸ªå‡½æ•°éƒ½ä¼šåœ¨å®¢æˆ·ç«¯åˆå§‹åŒ–ä¸€ä¸ª <code>operation</code>ï¼Œå®¢æˆ·ç«¯ç¨‹åºæœ‰ä¹‰åŠ¡ä¿ç•™è¿™äº›<code>operations</code>ã€‚å½“å‡†å¤‡å¥½ä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œåï¼Œå¯ä»¥ä½¿ç”¨ <code>zoo_multi</code> æ¥æäº¤æ‰€æœ‰çš„æ“ä½œï¼Œç”± Zookeeper æœåŠ¡æ¥ä¿è¯è¿™ä¸€ç³»åˆ—æ“ä½œçš„åŸå­æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´åªè¦å…¶ä¸­æœ‰ä¸€ä¸ªæ“ä½œå¤±è´¥äº†ï¼Œç›¸å½“äºæ­¤æ¬¡æäº¤çš„ä»»ä½•ä¸€ä¸ªæ“ä½œéƒ½æ²¡æœ‰å¯¹æœåŠ¡ç«¯çš„æ•°æ®é€ æˆå½±å“ã€‚<code>zoo_multi</code> çš„è¿”å›å€¼æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥æ“ä½œçš„çŠ¶æ€ä¿¡å·ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ‘¨â€ğŸŒ¾Zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hadoop é¢è¯•é¢˜è§£æ</title>
      <link href="post/2b822834.html"/>
      <url>post/2b822834.html</url>
      
        <content type="html"><![CDATA[<h2 id="Hadoop-åŸºç¡€"><a href="#Hadoop-åŸºç¡€" class="headerlink" title="Hadoop åŸºç¡€"></a>Hadoop åŸºç¡€</h2><blockquote><h3 id="é›†ç¾¤çš„æœ€ä¸»è¦ç“¶é¢ˆï¼Ÿ"><a href="#é›†ç¾¤çš„æœ€ä¸»è¦ç“¶é¢ˆï¼Ÿ" class="headerlink" title="é›†ç¾¤çš„æœ€ä¸»è¦ç“¶é¢ˆï¼Ÿ"></a>é›†ç¾¤çš„æœ€ä¸»è¦ç“¶é¢ˆï¼Ÿ</h3></blockquote><p>ç£ç›˜ IOã€‚</p><blockquote><h3 id="Hadoop-è¿è¡Œæ¨¡å¼ï¼Ÿ"><a href="#Hadoop-è¿è¡Œæ¨¡å¼ï¼Ÿ" class="headerlink" title="Hadoop è¿è¡Œæ¨¡å¼ï¼Ÿ"></a>Hadoop è¿è¡Œæ¨¡å¼ï¼Ÿ</h3></blockquote><ul><li>ç‹¬ç«‹ï¼ˆæœ¬åœ°ï¼‰è¿è¡Œæ¨¡å¼ï¼šæ— éœ€ä»»ä½•å®ˆæŠ¤è¿›ç¨‹ï¼Œæ‰€æœ‰çš„ç¨‹åºéƒ½è¿è¡Œåœ¨åŒä¸€ä¸ª JVM ä¸Šæ‰§è¡Œã€‚åœ¨ç‹¬ç«‹æ¨¡å¼ä¸‹è°ƒè¯• MR ç¨‹åºéå¸¸é«˜æ•ˆæ–¹ä¾¿ã€‚æ‰€ä»¥ä¸€èˆ¬è¯¥æ¨¡å¼ä¸»è¦æ˜¯åœ¨å­¦ä¹ æˆ–è€…å¼€å‘é˜¶æ®µè°ƒè¯•ä½¿ç”¨ã€‚</li><li>ä¼ªåˆ†å¸ƒå¼æ¨¡å¼ï¼šHadoop å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨æœ¬åœ°æœºå™¨ä¸Šï¼Œæ¨¡æ‹Ÿä¸€ä¸ªå°è§„æ¨¡çš„é›†ç¾¤ï¼Œæ¢å¥è¯è¯´ï¼Œå¯ä»¥é…ç½®ä¸€å°æœºå™¨çš„ Hadoop é›†ç¾¤ï¼Œä¼ªåˆ†å¸ƒå¼æ˜¯å®Œå…¨åˆ†å¸ƒå¼çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚</li><li>å®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼ï¼šHadoop å®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ä¸€ä¸ªé›†ç¾¤ä¸Šã€‚</li></ul><p><strong>æ³¨æ„ï¼š</strong>æ‰€è°“åˆ†å¸ƒå¼è¦å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼Œå³ï¼šä½¿ç”¨åˆ†å¸ƒå¼ Hadoop æ—¶ï¼Œè¦å…ˆå¯åŠ¨ä¸€äº›å‡†å¤‡ç¨‹åºè¿›ç¨‹ï¼Œç„¶åæ‰èƒ½ä½¿ç”¨æ¯”å¦‚ <code>start-dfs.sh</code>ã€<code>start-yarn.sh</code>ã€‚è€Œæœ¬åœ°æ¨¡å¼ä¸éœ€è¦å¯åŠ¨è¿™äº›å®ˆæŠ¤è¿›ç¨‹ã€‚</p><p>ä¸‰ç§æ¨¡å¼çš„é›†ç¾¤å¿…é¡»é…ç½®ä¿¡æ¯ï¼š</p><p>ä¸‹é¢è¯¦ç»†åˆ†æé…ç½®ä¸‰ç§æ¨¡å¼çš„â€œé›†ç¾¤â€æ‰€éœ€è¦çš„å¿…é¡»é…ç½®ã€‚å¯ä»¥é…ç½®å®Œï¼Œä½“éªŒä¸€æŠŠï¼Œå°±å¯ä»¥ä¸»è§‚åœ°æ„Ÿå—ä¸‰ç§ä¹‹é—´çš„åŒºåˆ«ã€‚</p><div class="table-container"><table><thead><tr><th>ç»„ä»¶åç§°</th><th>å±æ€§åç§°</th><th>æœ¬åœ°æ¨¡å¼</th><th>ä¼ªåˆ†å¸ƒå¼</th><th>å®Œå…¨åˆ†å¸ƒå¼</th></tr></thead><tbody><tr><td>Common</td><td>fs.defaultFs</td><td>file:///(é»˜è®¤)</td><td>hdfs://localhost/</td><td>hdfs://namenode</td></tr><tr><td>HDFS</td><td>dfs.replication</td><td>N/A</td><td>1</td><td>3(é»˜è®¤)</td></tr><tr><td>MapReduce</td><td>mapreduce.framework.name</td><td>local(é»˜è®¤)</td><td>yarn</td><td>yarn</td></tr><tr><td>Yarn</td><td>yarn.resoucemanager.hostname <br> yarn.nodemanager.auxservice</td><td>N/A <br> N/A</td><td>localhost <br> mapreduce_shuffle</td><td>resoucemanager <br> maperduce_shuffle</td></tr></tbody></table></div><p><strong>æ³¨æ„ï¼š</strong>åœ¨æœ¬åœ°æ¨¡å¼ä¸‹ï¼Œå°†ä½¿ç”¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå’Œæœ¬åœ° MapReduce è¿è¡Œå™¨ã€‚åœ¨åˆ†å¸ƒå¼æ¨¡å¼ä¸‹ï¼Œå°†å¯åŠ¨ HDFS å’Œ YARN å®ˆæŠ¤è¿›ç¨‹ã€‚</p><blockquote><h3 id="Hadoop-ç”Ÿæ€åœˆçš„ç»„ä»¶å¹¶åšç®€è¦æè¿°ï¼Ÿ"><a href="#Hadoop-ç”Ÿæ€åœˆçš„ç»„ä»¶å¹¶åšç®€è¦æè¿°ï¼Ÿ" class="headerlink" title="Hadoop ç”Ÿæ€åœˆçš„ç»„ä»¶å¹¶åšç®€è¦æè¿°ï¼Ÿ"></a>Hadoop ç”Ÿæ€åœˆçš„ç»„ä»¶å¹¶åšç®€è¦æè¿°ï¼Ÿ</h3></blockquote><ul><li>Zookeeperï¼šæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºåè°ƒæœåŠ¡ï¼ŒåŸºäº Zookeeper å¯ä»¥å®ç°åŒæ­¥æœåŠ¡ï¼Œé…ç½®ç»´æŠ¤ï¼Œå‘½åæœåŠ¡ã€‚</li><li>Flumeï¼šä¸€ä¸ªé«˜å¯ç”¨çš„ï¼Œé«˜å¯é çš„ï¼Œåˆ†å¸ƒå¼çš„æµ·é‡æ—¥å¿—é‡‡é›†ã€èšåˆå’Œä¼ è¾“çš„ç³»ç»Ÿã€‚</li><li>Hbaseï¼šæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ã€é¢å‘åˆ—çš„å¼€æºæ•°æ®åº“ï¼Œåˆ©ç”¨ Hadoop HDFS ä½œä¸ºå…¶å­˜å‚¨ç³»ç»Ÿã€‚</li><li>Hiveï¼šåŸºäº Hadoop çš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·ï¼Œå¯ä»¥å°†ç»“æ„åŒ–çš„æ•°æ®æ¡£æ˜ å°„ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼Œå¹¶æä¾›ç®€å•çš„ SQL æŸ¥è¯¢åŠŸèƒ½ï¼Œå¯ä»¥å°† SQL è¯­å¥è½¬æ¢ä¸º MapReduce ä»»åŠ¡è¿›è¡Œè¿è¡Œã€‚</li><li>Sqoopï¼šå°†ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ä¸­çš„æ•°æ®å¯¼è¿›åˆ° Hadoop çš„ HDFS ä¸­ï¼Œä¹Ÿå¯ä»¥å°† HDFS çš„æ•°æ®å¯¼è¿›åˆ°å…³ç³»å‹æ•°æ®åº“ä¸­ã€‚</li></ul><blockquote><h3 id="è§£é‡Šâ€œHadoopâ€å’Œâ€œHadoop-ç”Ÿæ€ç³»ç»Ÿâ€ä¸¤ä¸ªæ¦‚å¿µï¼Ÿ"><a href="#è§£é‡Šâ€œHadoopâ€å’Œâ€œHadoop-ç”Ÿæ€ç³»ç»Ÿâ€ä¸¤ä¸ªæ¦‚å¿µï¼Ÿ" class="headerlink" title="è§£é‡Šâ€œHadoopâ€å’Œâ€œHadoop ç”Ÿæ€ç³»ç»Ÿâ€ä¸¤ä¸ªæ¦‚å¿µï¼Ÿ"></a>è§£é‡Šâ€œHadoopâ€å’Œâ€œHadoop ç”Ÿæ€ç³»ç»Ÿâ€ä¸¤ä¸ªæ¦‚å¿µï¼Ÿ</h3></blockquote><p>Hadoop æ˜¯æŒ‡ Hadoop æ¡†æ¶æœ¬èº«ï¼›Hadoop ç”Ÿæ€ç³»ç»Ÿï¼Œä¸ä»…åŒ…å« Hadoopï¼Œè¿˜åŒ…æ‹¬ä¿è¯ Hadoop æ¡†æ¶æ­£å¸¸é«˜æ•ˆè¿è¡Œå…¶ä»–æ¡†æ¶ï¼Œæ¯”å¦‚ Zookeeperã€Flumeã€Hbaseã€Hiveã€Sqoop ç­‰è¾…åŠ©æ¡†æ¶ã€‚</p><blockquote><h3 id="è¯·åˆ—å‡ºæ­£å¸¸å·¥ä½œçš„-Hadoop-é›†ç¾¤ä¸­-Hadoop-éƒ½åˆ†åˆ«éœ€è¦å¯åŠ¨å“ªäº›è¿›ç¨‹ï¼Œå®ƒä»¬çš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#è¯·åˆ—å‡ºæ­£å¸¸å·¥ä½œçš„-Hadoop-é›†ç¾¤ä¸­-Hadoop-éƒ½åˆ†åˆ«éœ€è¦å¯åŠ¨å“ªäº›è¿›ç¨‹ï¼Œå®ƒä»¬çš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="è¯·åˆ—å‡ºæ­£å¸¸å·¥ä½œçš„ Hadoop é›†ç¾¤ä¸­ Hadoop éƒ½åˆ†åˆ«éœ€è¦å¯åŠ¨å“ªäº›è¿›ç¨‹ï¼Œå®ƒä»¬çš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>è¯·åˆ—å‡ºæ­£å¸¸å·¥ä½œçš„ Hadoop é›†ç¾¤ä¸­ Hadoop éƒ½åˆ†åˆ«éœ€è¦å¯åŠ¨å“ªäº›è¿›ç¨‹ï¼Œå®ƒä»¬çš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3></blockquote><ul><li>NameNodeï¼šå®ƒæ˜¯ Hadoop ä¸­çš„ä¸»æœåŠ¡å™¨ï¼Œç®¡ç†æ–‡ä»¶ç³»ç»Ÿåç§°ç©ºé—´å’Œå¯¹é›†ç¾¤ä¸­å­˜å‚¨çš„æ–‡ä»¶çš„è®¿é—®ï¼Œä¿å­˜æœ‰ metadateã€‚</li><li>SecondaryNameNodeï¼šå®ƒä¸æ˜¯ NameNode çš„å†—ä½™å®ˆæŠ¤è¿›ç¨‹ï¼Œè€Œæ˜¯æä¾›å‘¨æœŸæ£€æŸ¥ç‚¹å’Œæ¸…ç†ä»»åŠ¡ã€‚å¸®åŠ© NameNode åˆå¹¶ editslogï¼Œå‡å°‘ NameNode å¯åŠ¨æ—¶é—´ã€‚</li><li>DataNodeï¼šå®ƒè´Ÿè´£ç®¡ç†è¿æ¥åˆ°èŠ‚ç‚¹çš„å­˜å‚¨ï¼ˆä¸€ä¸ªé›†ç¾¤ä¸­å¯ä»¥æœ‰å¤šä¸ªèŠ‚ç‚¹ï¼‰ã€‚æ¯ä¸ªå­˜å‚¨æ•°æ®çš„èŠ‚ç‚¹è¿è¡Œä¸€ä¸ª DataNode å®ˆæŠ¤è¿›ç¨‹ã€‚</li><li>ResourceManagerï¼ˆJobTrackerï¼‰ï¼šJobTracker è´Ÿè´£è°ƒåº¦ DataNode ä¸Šçš„å·¥ä½œã€‚æ¯ä¸ª DataNode æœ‰ä¸€ä¸ª TaskTrackerï¼Œå®ƒä»¬æ‰§è¡Œå®é™…å·¥ä½œã€‚</li><li>NodeManagerï¼ˆTaskTrackerï¼‰ï¼šæ‰§è¡Œä»»åŠ¡ã€‚</li><li>DFSZKFailoverControllerï¼šé«˜å¯ç”¨æ—¶å®ƒè´Ÿè´£ç›‘æ§ NameNode çš„çŠ¶æ€ï¼Œå¹¶åŠæ—¶çš„æŠŠçŠ¶æ€ä¿¡æ¯å†™å…¥ Zookeeperã€‚å®ƒé€šè¿‡ä¸€ä¸ªç‹¬ç«‹çº¿ç¨‹å‘¨æœŸæ€§çš„è°ƒç”¨ NameNode ä¸Šçš„ä¸€ä¸ªç‰¹å®šæ¥å£æ¥è·å– NameNode çš„å¥åº·çŠ¶æ€ã€‚FC ä¹Ÿæœ‰é€‰æ‹©è°ä½œä¸º Active NameNode çš„æƒåˆ©ï¼Œå› ä¸ºæœ€å¤šåªæœ‰ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œç›®å‰é€‰æ‹©ç­–ç•¥è¿˜æ¯”è¾ƒç®€å•ï¼ˆå…ˆåˆ°å…ˆå¾—ï¼Œè½®æ¢ï¼‰ã€‚</li><li>JournalNodeï¼šé«˜å¯ç”¨æƒ…å†µä¸‹å­˜æ”¾ NameNode çš„ EditLog æ–‡ä»¶ã€‚</li></ul><blockquote><h3 id="NameNode-åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šåšå“ªäº›æ“ä½œï¼Ÿ"><a href="#NameNode-åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šåšå“ªäº›æ“ä½œï¼Ÿ" class="headerlink" title="NameNode åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šåšå“ªäº›æ“ä½œï¼Ÿ"></a>NameNode åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šåšå“ªäº›æ“ä½œï¼Ÿ</h3></blockquote><p>NameNode æ•°æ®å­˜å‚¨åœ¨å†…å­˜å’Œæœ¬åœ°ç£ç›˜ï¼Œæœ¬åœ°ç£ç›˜æ•°æ®å­˜å‚¨åœ¨ fsimage é•œåƒæ–‡ä»¶å’Œedits ç¼–è¾‘æ—¥å¿—æ–‡ä»¶ã€‚</p><ul><li><p>é¦–æ¬¡å¯åŠ¨ NameNode</p><ol><li>æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿï¼Œä¸ºäº†ç”Ÿæˆ fsimage é•œåƒæ–‡ä»¶ï¼›</li><li>å¯åŠ¨ NameNodeï¼›<ol><li>è¯»å– fsimage æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å†…å®¹åŠ è½½è¿›å†…å­˜ï¼›</li><li>ç­‰å¾… DataNode æ³¨å†Œä¸å‘é€ block reportã€‚</li></ol></li><li>å¯åŠ¨ DataNodeï¼›<ol><li>å‘ NameNode æ³¨å†Œï¼›</li><li>å‘é€ block reportï¼›</li><li>æ£€æŸ¥ fsimage ä¸­è®°å½•çš„å—çš„æ•°é‡å’Œ block report ä¸­çš„å—çš„æ€»æ•°æ˜¯å¦ç›¸åŒã€‚</li></ol></li><li>å¯¹æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œæ“ä½œï¼ˆåˆ›å»ºç›®å½•ï¼Œä¸Šä¼ æ–‡ä»¶ï¼Œåˆ é™¤æ–‡ä»¶ç­‰ï¼‰ã€‚<ol><li>æ­¤æ—¶å†…å­˜ä¸­å·²ç»æœ‰æ–‡ä»¶ç³»ç»Ÿæ”¹å˜çš„ä¿¡æ¯ï¼Œä½†æ˜¯ç£ç›˜ä¸­æ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿæ”¹å˜çš„ä¿¡æ¯ï¼Œæ­¤æ—¶ä¼šå°†è¿™äº›æ”¹å˜ä¿¡æ¯å†™å…¥ edits æ–‡ä»¶ä¸­ï¼Œedits æ–‡ä»¶ä¸­å­˜å‚¨çš„æ˜¯æ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®æ”¹å˜çš„ä¿¡æ¯ã€‚</li></ol></li></ol></li><li><p>ç¬¬äºŒæ¬¡å¯åŠ¨ NameNode</p><ol><li>è¯»å– fsimage å’Œ edits æ–‡ä»¶ï¼›</li><li>å°† fsimage å’Œ edits æ–‡ä»¶åˆå¹¶æˆæ–°çš„ fsimage æ–‡ä»¶ï¼›</li><li>åˆ›å»ºæ–°çš„ edits æ–‡ä»¶ï¼Œå†…å®¹ä¸ºç©ºï¼›</li><li>å¯åŠ¨ DataNodeã€‚</li></ol></li></ul><blockquote><h3 id="DataNode-äº†è§£å—ï¼Œå®ƒçš„å·¥ä½œæœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#DataNode-äº†è§£å—ï¼Œå®ƒçš„å·¥ä½œæœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="DataNode äº†è§£å—ï¼Œå®ƒçš„å·¥ä½œæœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ"></a>DataNode äº†è§£å—ï¼Œå®ƒçš„å·¥ä½œæœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ</h3></blockquote><ol><li>ä¸€ä¸ªæ•°æ®å—åœ¨ DataNode ä¸Šä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼ŒåŒ…æ‹¬ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯æ•°æ®æœ¬èº«ï¼Œä¸€ä¸ªæ˜¯å…ƒæ•°æ®åŒ…æ‹¬æ•°æ®å—çš„é•¿åº¦ï¼Œå—æ•°æ®çš„æ ¡éªŒå’Œï¼Œæ—¶é—´æˆ³ã€‚</li><li>DataNode å¯åŠ¨åå‘ NameNode è¿›è¡Œæ³¨å†Œï¼Œé€šè¿‡åï¼Œå‘¨æœŸæ€§ï¼ˆ1 å°æ—¶ï¼‰åœ°å‘NameNode ä¸ŠæŠ¥æ‰€æœ‰çš„å—ä¿¡æ¯ï¼›</li><li>å¿ƒè·³æ¯ 3 ç§’ä¸€æ¬¡ï¼Œå¿ƒè·³è¿”å›ç»“æœå¸¦æœ‰ NameNode ç»™è¯¥ DataNode çš„å‘½ä»¤ï¼Œå¦‚å¤åˆ¶å—æ•°æ®åˆ°å¦ä¸€å°æœºå™¨ï¼Œæˆ–åˆ é™¤æŸä¸ªæ•°æ®å—ã€‚å¦‚æœè¶…è¿‡ 10 åˆ†é’Ÿæ²¡æœ‰æ”¶åˆ°æŸä¸ª DataNode çš„å¿ƒè·³ï¼Œåˆ™è®¤ä¸ºè¯¥èŠ‚ç‚¹ä¸å¯ç”¨ï¼›</li><li>é›†ç¾¤è¿è¡Œä¸­å¯ä»¥å®‰å…¨åŠ å…¥å’Œé€€å‡ºä¸€äº›æœºå™¨ã€‚</li></ol><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/datanode.png" alt></p><blockquote><h3 id="Secondary-NameNode-äº†è§£å—ï¼Œå®ƒçš„å·¥ä½œæœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#Secondary-NameNode-äº†è§£å—ï¼Œå®ƒçš„å·¥ä½œæœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="Secondary NameNode äº†è§£å—ï¼Œå®ƒçš„å·¥ä½œæœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ"></a>Secondary NameNode äº†è§£å—ï¼Œå®ƒçš„å·¥ä½œæœºåˆ¶æ˜¯æ€æ ·çš„ï¼Ÿ</h3></blockquote><p>Secondary NameNode ç›®çš„æ˜¯åˆå¹¶ NameNode çš„ edit logs åˆ° fsimage æ–‡ä»¶ä¸­ï¼Œæ˜¯å‡å°‘ NameNode å¯åŠ¨æ—¶é—´ï¼Œå®ƒçš„å…·ä½“å·¥ä½œæœºåˆ¶ï¼š</p><ol><li>ç¬¬ä¸€é˜¶æ®µï¼šNameNodeå¯åŠ¨<ol><li>ç¬¬ä¸€æ¬¡å¯åŠ¨ NameNode æ ¼å¼åŒ–åï¼Œåˆ›å»º fsimage å’Œ edits æ–‡ä»¶ã€‚å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œç›´æ¥åŠ è½½ç¼–è¾‘æ—¥å¿—å’Œé•œåƒæ–‡ä»¶åˆ°å†…å­˜ï¼›</li><li>å®¢æˆ·ç«¯å¯¹å…ƒæ•°æ®è¿›è¡Œå¢åˆ æ”¹çš„è¯·æ±‚ï¼›</li><li>NameNode è®°å½•æ“ä½œæ—¥å¿—ï¼Œæ›´æ–°æ»šåŠ¨æ—¥å¿—ï¼›</li><li>NameNode åœ¨å†…å­˜ä¸­å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥ã€‚</li></ol></li><li>ç¬¬äºŒé˜¶æ®µï¼šSecondary NameNodeå·¥ä½œ<ol><li>Secondary NameNode è¯¢é—® NameNode æ˜¯å¦éœ€è¦ checkpointã€‚ç›´æ¥å¸¦å› NameNode æ˜¯å¦æ£€æŸ¥ç»“æœï¼›</li><li>Secondary NameNode è¯·æ±‚æ‰§è¡Œ checkpointï¼›</li><li>NameNode æ»šåŠ¨æ­£åœ¨å†™çš„ edits æ—¥å¿—</li><li>å°†æ»šåŠ¨å‰çš„ç¼–è¾‘æ—¥å¿—å’Œé•œåƒæ–‡ä»¶æ‹·è´åˆ° Secondary NameNodeï¼›</li><li>Secondary NameNode åŠ è½½ç¼–è¾‘æ—¥å¿—å’Œé•œåƒæ–‡ä»¶åˆ°å†…å­˜ï¼Œå¹¶åˆå¹¶ï¼›</li><li>ç”Ÿæˆæ–°çš„é•œåƒæ–‡ä»¶ fsimage.chkpointï¼›</li><li>æ‹·è´ fsimage.chkpoint åˆ° NameNodeï¼›</li><li>NameNode å°† fsimage.chkpoint é‡æ–°å‘½åæˆ fsimage æ‰€ä»¥å¦‚æœ NameNode ä¸­çš„å…ƒæ•°æ®ä¸¢å¤±ï¼Œæ˜¯å¯ä»¥ä» Secondary NameNode æ¢å¤ä¸€éƒ¨åˆ†å…ƒæ•°æ®ä¿¡æ¯çš„ï¼Œä½†ä¸æ˜¯å…¨éƒ¨ï¼Œå› ä¸º NameNode æ­£åœ¨å†™çš„ edits æ—¥å¿—è¿˜æ²¡æœ‰æ‹·è´åˆ° Secondary NameNodeï¼Œè¿™éƒ¨åˆ†æ¢å¤ä¸äº†ã€‚</li></ol></li></ol><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/namenode.png" alt></p><blockquote><h3 id="Secondary-NameNode-ä¸èƒ½æ¢å¤-NameNode-çš„å…¨éƒ¨æ•°æ®ï¼Œé‚£å¦‚ä½•ä¿è¯-NameNode-æ•°æ®å­˜å‚¨å®‰å…¨ï¼Ÿ"><a href="#Secondary-NameNode-ä¸èƒ½æ¢å¤-NameNode-çš„å…¨éƒ¨æ•°æ®ï¼Œé‚£å¦‚ä½•ä¿è¯-NameNode-æ•°æ®å­˜å‚¨å®‰å…¨ï¼Ÿ" class="headerlink" title="Secondary NameNode ä¸èƒ½æ¢å¤ NameNode çš„å…¨éƒ¨æ•°æ®ï¼Œé‚£å¦‚ä½•ä¿è¯ NameNode æ•°æ®å­˜å‚¨å®‰å…¨ï¼Ÿ"></a>Secondary NameNode ä¸èƒ½æ¢å¤ NameNode çš„å…¨éƒ¨æ•°æ®ï¼Œé‚£å¦‚ä½•ä¿è¯ NameNode æ•°æ®å­˜å‚¨å®‰å…¨ï¼Ÿ</h3></blockquote><p>è¿™ä¸ªé—®é¢˜å°±è¦è¯´ NameNode çš„é«˜å¯ç”¨äº†ï¼Œå³ <strong>NameNode HA</strong> ä¸€ä¸ª NameNode æœ‰å•ç‚¹æ•…éšœçš„é—®é¢˜ï¼Œé‚£å°±é…ç½®åŒ NameNodeï¼Œé…ç½®æœ‰ä¸¤ä¸ªå…³é”®ç‚¹ï¼Œä¸€æ˜¯å¿…é¡»è¦ä¿è¯è¿™ä¸¤ä¸ª NameNode çš„å…ƒæ•°æ®ä¿¡æ¯å¿…é¡»è¦åŒæ­¥çš„ï¼ŒäºŒæ˜¯ä¸€ä¸ª NameNode æŒ‚æ‰ä¹‹åå¦ä¸€ä¸ªè¦ç«‹é©¬è¡¥ä¸Šã€‚</p><ul><li><p>å…ƒæ•°æ®ä¿¡æ¯åŒæ­¥åœ¨ HA æ–¹æ¡ˆä¸­é‡‡ç”¨çš„æ˜¯â€œå…±äº«å­˜å‚¨â€ã€‚æ¯æ¬¡å†™æ–‡ä»¶æ—¶ï¼Œéœ€è¦å°†æ—¥å¿—åŒæ­¥å†™å…¥å…±äº«å­˜å‚¨ï¼Œè¿™ä¸ªæ­¥éª¤æˆåŠŸæ‰èƒ½è®¤å®šå†™æ–‡ä»¶æˆåŠŸã€‚ç„¶åå¤‡ä»½èŠ‚ç‚¹å®šæœŸä»å…±äº«å­˜å‚¨åŒæ­¥æ—¥å¿—ï¼Œä»¥ä¾¿è¿›è¡Œä¸»å¤‡åˆ‡æ¢ã€‚</p></li><li><p>ç›‘æ§ NameNode çŠ¶æ€é‡‡ç”¨ Zookeeperï¼Œä¸¤ä¸ª NameNode èŠ‚ç‚¹çš„çŠ¶æ€å­˜æ”¾åœ¨ Zookeeper ä¸­ï¼Œå¦å¤–ä¸¤ä¸ª NameNode èŠ‚ç‚¹åˆ†åˆ«æœ‰ä¸€ä¸ªè¿›ç¨‹ç›‘æ§ç¨‹åºï¼Œå®æ–½è¯»å– Zookeeper ä¸­æœ‰ NameNode çš„çŠ¶æ€ï¼Œæ¥åˆ¤æ–­å½“å‰çš„ NameNode æ˜¯ä¸æ˜¯å·²ç» down æœºã€‚å¦‚æœ standby çš„ NameNode èŠ‚ç‚¹çš„ ZKFC å‘ç°ä¸»èŠ‚ç‚¹å·²ç»æŒ‚æ‰ï¼Œé‚£ä¹ˆå°±ä¼šå¼ºåˆ¶ç»™åŸæœ¬çš„ active  NameNode èŠ‚ç‚¹å‘é€å¼ºåˆ¶å…³é—­è¯·æ±‚ï¼Œä¹‹åå°†å¤‡ç”¨çš„ NameNode è®¾ç½®ä¸º activeã€‚</p></li></ul><p><strong>å¦‚æœé¢è¯•å®˜å†é—® HA ä¸­çš„å…±äº«å­˜å‚¨æ˜¯æ€ä¹ˆå®ç°çš„çŸ¥é“å—ï¼Ÿ</strong></p><p>å¯ä»¥è¿›è¡Œè§£é‡Šä¸‹ï¼šNameNode å…±äº«å­˜å‚¨æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ Linux HAï¼ŒVMware FTï¼ŒQJM ç­‰ï¼Œç›®å‰ç¤¾åŒºå·²ç»æŠŠç”± Cloudera å…¬å¸å®ç°çš„åŸºäº QJMï¼ˆQuorum Journal Managerï¼‰çš„æ–¹æ¡ˆåˆå¹¶åˆ° HDFS çš„ trunk ä¹‹ä¸­å¹¶ä¸”ä½œä¸º<strong>é»˜è®¤çš„å…±äº«å­˜å‚¨</strong>å®ç°åŸºäº QJM çš„å…±äº«å­˜å‚¨ç³»ç»Ÿä¸»è¦ç”¨äºä¿å­˜ EditLogï¼Œå¹¶ä¸ä¿å­˜ FSImage æ–‡ä»¶ã€‚FSImage æ–‡ä»¶è¿˜æ˜¯åœ¨ NameNode çš„æœ¬åœ°ç£ç›˜ä¸Šã€‚</p><p>QJM å…±äº«å­˜å‚¨çš„åŸºæœ¬æ€æƒ³æ¥è‡ªäº Paxos ç®—æ³•ï¼Œé‡‡ç”¨å¤šä¸ªç§°ä¸º JournalNode çš„èŠ‚ç‚¹ç»„æˆçš„ JournalNode é›†ç¾¤æ¥å­˜å‚¨ EditLogã€‚æ¯ä¸ª JournalNode ä¿å­˜åŒæ ·çš„ EditLog å‰¯æœ¬ã€‚æ¯æ¬¡ NameNode å†™ EditLog çš„æ—¶å€™ï¼Œé™¤äº†å‘æœ¬åœ°ç£ç›˜å†™å…¥ EditLog ä¹‹å¤–ï¼Œä¹Ÿä¼šå¹¶è¡Œåœ°å‘ JournalNode é›†ç¾¤ä¹‹ä¸­çš„æ¯ä¸€ä¸ª JournalNode å‘é€å†™è¯·æ±‚ï¼Œåªè¦å¤§å¤šæ•°ï¼ˆmajorityï¼‰çš„ JournalNode èŠ‚ç‚¹è¿”å›æˆåŠŸå°±è®¤ä¸ºå‘ JournalNode é›†ç¾¤å†™å…¥ EditLog æˆåŠŸã€‚å¦‚æœæœ‰ 2N+1 å° JournalNodeï¼Œé‚£ä¹ˆæ ¹æ®å¤§å¤šæ•°çš„åŸåˆ™ï¼Œæœ€å¤šå¯ä»¥å®¹å¿æœ‰ N å° JournalNode èŠ‚ç‚¹æŒ‚æ‰ã€‚</p><blockquote><h3 id="åœ¨-NameNode-HA-ä¸­ï¼Œä¼šå‡ºç°è„‘è£‚é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³è„‘è£‚ï¼Ÿ"><a href="#åœ¨-NameNode-HA-ä¸­ï¼Œä¼šå‡ºç°è„‘è£‚é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³è„‘è£‚ï¼Ÿ" class="headerlink" title="åœ¨ NameNode HA ä¸­ï¼Œä¼šå‡ºç°è„‘è£‚é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³è„‘è£‚ï¼Ÿ"></a>åœ¨ NameNode HA ä¸­ï¼Œä¼šå‡ºç°è„‘è£‚é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³è„‘è£‚ï¼Ÿ</h3></blockquote><p>å‡è®¾ NameNode1 å½“å‰ä¸º Active çŠ¶æ€ï¼ŒNameNode2 å½“å‰ä¸º Standby çŠ¶æ€ã€‚å¦‚æœæŸä¸€æ—¶åˆ» NameNode1 å¯¹åº”çš„ ZKFailoverController è¿›ç¨‹å‘ç”Ÿäº†â€œå‡æ­»â€ç°è±¡ï¼Œé‚£ä¹ˆ Zookeeper æœåŠ¡ç«¯ä¼šè®¤ä¸º NameNode1 æŒ‚æ‰äº†ï¼Œæ ¹æ®å‰é¢çš„ä¸»å¤‡åˆ‡æ¢é€»è¾‘ï¼ŒNameNode2 ä¼šæ›¿ä»£ NameNode1 è¿›å…¥ Active çŠ¶æ€ã€‚ä½†æ˜¯æ­¤æ—¶ NameNode1 å¯èƒ½ä»ç„¶å¤„äº Active çŠ¶æ€æ­£å¸¸è¿è¡Œï¼Œè¿™æ · NameNode1 å’Œ NameNode2 éƒ½å¤„äº Active çŠ¶æ€ï¼Œéƒ½å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡ã€‚è¿™ç§æƒ…å†µç§°ä¸ºè„‘è£‚ã€‚</p><p>è„‘è£‚å¯¹äº NameNode è¿™ç±»å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚éå¸¸é«˜çš„ç³»ç»Ÿæ¥è¯´æ˜¯ç¾éš¾æ€§çš„ï¼Œæ•°æ®ä¼šå‘ç”Ÿé”™ä¹±ä¸”æ— æ³•æ¢å¤ã€‚Zookeeper ç¤¾åŒºå¯¹è¿™ç§é—®é¢˜çš„è§£å†³æ–¹æ³•å«åš fencingï¼Œä¸­æ–‡ç¿»è¯‘ä¸ºéš”ç¦»ï¼Œä¹Ÿå°±æ˜¯æƒ³åŠæ³•æŠŠæ—§çš„ Active NameNode éš”ç¦»èµ·æ¥ï¼Œä½¿å®ƒä¸èƒ½æ­£å¸¸å¯¹å¤–æä¾›æœåŠ¡ã€‚åœ¨è¿›è¡Œ fencing çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œä»¥ä¸‹çš„æ“ä½œï¼š</p><ol><li>é¦–å…ˆå°è¯•è°ƒç”¨è¿™ä¸ªæ—§ Active NameNode çš„ HAServiceProtocol RPC æ¥å£çš„ transitionToStandby æ–¹æ³•ï¼Œçœ‹èƒ½ä¸èƒ½æŠŠå®ƒè½¬æ¢ä¸º Standby çŠ¶æ€ã€‚</li><li>å¦‚æœ transitionToStandby æ–¹æ³•è°ƒç”¨å¤±è´¥ï¼Œé‚£ä¹ˆå°±æ‰§è¡Œ Hadoop é…ç½®æ–‡ä»¶ä¹‹ä¸­é¢„å®šä¹‰çš„éš”ç¦»æªæ–½ï¼ŒHadoop ç›®å‰ä¸»è¦æä¾›ä¸¤ç§éš”ç¦»æªæ–½ï¼Œé€šå¸¸ä¼šé€‰æ‹© sshfenceï¼š<ul><li>sshfenceï¼šé€šè¿‡ SSH ç™»å½•åˆ°ç›®æ ‡æœºå™¨ä¸Šï¼Œæ‰§è¡Œå‘½ä»¤ fuser å°†å¯¹åº”çš„è¿›ç¨‹æ€æ­»ï¼›</li><li>shellfenceï¼šæ‰§è¡Œä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰çš„ shell è„šæœ¬æ¥å°†å¯¹åº”çš„è¿›ç¨‹éš”ç¦»ã€‚</li></ul></li></ol><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/ha_namenode.png" alt></p><p><strong>è¡¥å……ï¼šZKFailoverController ä¸»è¦èŒè´£</strong></p><ul><li>å¥åº·ç›‘æµ‹ï¼šå‘¨æœŸæ€§çš„å‘å®ƒç›‘æ§çš„ NameNode å‘é€å¥åº·æ¢æµ‹å‘½ä»¤ï¼Œä»è€Œæ¥ç¡®å®šæŸä¸ª NameNode æ˜¯å¦å¤„äºå¥åº·çŠ¶æ€ï¼Œå¦‚æœæœºå™¨å®•æœºï¼Œå¿ƒè·³å¤±è´¥ï¼Œé‚£ä¹ˆ ZKFC å°±ä¼šæ ‡è®°å®ƒå¤„äºä¸€ä¸ªä¸å¥åº·çš„çŠ¶æ€ï¼›</li><li>ä¼šè¯ç®¡ç†ï¼šå¦‚æœ NameNode æ˜¯å¥åº·çš„ï¼ŒZKFC å°±ä¼šåœ¨ Zookeeper ä¸­ä¿æŒä¸€ä¸ªæ‰“å¼€çš„ä¼šè¯ï¼Œå¦‚æœ NameNode åŒæ—¶è¿˜æ˜¯ Active çŠ¶æ€çš„ï¼Œé‚£ä¹ˆ ZKFC è¿˜ä¼šåœ¨ Zookeeperä¸­å æœ‰ä¸€ä¸ªç±»å‹ä¸ºçŸ­æš‚ç±»å‹çš„ znodeï¼Œå½“è¿™ä¸ª NameNode æŒ‚æ‰æ—¶ï¼Œè¿™ä¸ª znode å°†ä¼šè¢«åˆ é™¤ï¼Œç„¶åå¤‡ç”¨çš„ NameNode ï¼Œå°†ä¼šå¾—åˆ°è¿™æŠŠé”ï¼Œå‡çº§ä¸ºä¸» NameNode ï¼ŒåŒæ—¶æ ‡è®°çŠ¶æ€ä¸º Activeï¼›</li><li>å½“å®•æœºçš„ NameNode æ–°å¯åŠ¨æ—¶ï¼Œå®ƒä¼šå†æ¬¡æ³¨å†Œ Zookeperï¼Œå‘ç°å·²ç»æœ‰ znode é”äº†ï¼Œä¾¿ä¼šè‡ªåŠ¨å˜ä¸º Standby çŠ¶æ€ï¼Œå¦‚æ­¤å¾€å¤å¾ªç¯ï¼Œä¿è¯é«˜å¯é ï¼Œéœ€è¦æ³¨æ„ï¼Œç›®å‰ä»…ä»…æ”¯æŒæœ€å¤šé…ç½® 2 ä¸ª NameNodeï¼›</li><li>master é€‰ä¸¾ï¼šå¦‚ä¸Šæ‰€è¿°ï¼Œé€šè¿‡åœ¨ Zookeeper ä¸­ç»´æŒä¸€ä¸ªçŸ­æš‚ç±»å‹çš„ znodeï¼Œæ¥å®ç°æŠ¢å å¼çš„é”æœºåˆ¶ï¼Œä»è€Œåˆ¤æ–­é‚£ä¸ª NameNode ä¸º Active çŠ¶æ€ã€‚</li></ul><h2 id="Hadoop-HDFS"><a href="#Hadoop-HDFS" class="headerlink" title="Hadoop HDFS"></a>Hadoop HDFS</h2><blockquote><h3 id="HDFS-ä¸­çš„-block-é»˜è®¤ä¿å­˜å‡ ä»½ï¼Ÿ"><a href="#HDFS-ä¸­çš„-block-é»˜è®¤ä¿å­˜å‡ ä»½ï¼Ÿ" class="headerlink" title="HDFS ä¸­çš„ block é»˜è®¤ä¿å­˜å‡ ä»½ï¼Ÿ"></a>HDFS ä¸­çš„ block é»˜è®¤ä¿å­˜å‡ ä»½ï¼Ÿ</h3></blockquote><p>é»˜è®¤ä¿å­˜ 3 ä»½ã€‚</p><blockquote><h3 id="HDFS-é»˜è®¤-BlockSize-æ˜¯å¤šå¤§ï¼Ÿ"><a href="#HDFS-é»˜è®¤-BlockSize-æ˜¯å¤šå¤§ï¼Ÿ" class="headerlink" title="HDFS é»˜è®¤ BlockSize æ˜¯å¤šå¤§ï¼Ÿ"></a>HDFS é»˜è®¤ BlockSize æ˜¯å¤šå¤§ï¼Ÿ</h3></blockquote><p>Hadoop1.x æ˜¯ 64MBï¼Œhadoop2.x å¼€å§‹æ˜¯ 128MBã€‚</p><blockquote><h3 id="è´Ÿè´£-HDFS-æ•°æ®å­˜å‚¨çš„æ˜¯å“ªä¸€éƒ¨åˆ†ï¼Ÿ"><a href="#è´Ÿè´£-HDFS-æ•°æ®å­˜å‚¨çš„æ˜¯å“ªä¸€éƒ¨åˆ†ï¼Ÿ" class="headerlink" title="è´Ÿè´£ HDFS æ•°æ®å­˜å‚¨çš„æ˜¯å“ªä¸€éƒ¨åˆ†ï¼Ÿ"></a>è´Ÿè´£ HDFS æ•°æ®å­˜å‚¨çš„æ˜¯å“ªä¸€éƒ¨åˆ†ï¼Ÿ</h3></blockquote><p>DataNode è´Ÿè´£æ•°æ®å­˜å‚¨</p><blockquote><h3 id="HDFS-ç»„æˆæ¶æ„ï¼Ÿ"><a href="#HDFS-ç»„æˆæ¶æ„ï¼Ÿ" class="headerlink" title="HDFS ç»„æˆæ¶æ„ï¼Ÿ"></a>HDFS ç»„æˆæ¶æ„ï¼Ÿ</h3></blockquote><p>æ¶æ„ä¸»è¦ç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«ä¸º HDFS Clientã€NameNodeã€DataNode å’Œ Secondary NameNodeã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hdfs_architecture.png" alt></p><ul><li>Clientï¼šå°±æ˜¯å®¢æˆ·ç«¯ã€‚<ul><li>æ–‡ä»¶åˆ‡åˆ†ã€‚æ–‡ä»¶ä¸Šä¼  HDFS çš„æ—¶å€™ï¼ŒClient å°†æ–‡ä»¶åˆ‡åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„ Blockï¼Œç„¶åè¿›è¡Œå­˜å‚¨ï¼›</li><li>ä¸ NameNode äº¤äº’ï¼Œè·å–æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯ï¼›</li><li>ä¸ DataNode äº¤äº’ï¼Œè¯»å–æˆ–è€…å†™å…¥æ•°æ®ï¼›</li><li>Client æä¾›ä¸€äº›å‘½ä»¤æ¥ç®¡ç†HDFSï¼Œæ¯”å¦‚å¯åŠ¨æˆ–è€…å…³é—­HDFSï¼›</li><li>Client å¯ä»¥é€šè¿‡ä¸€äº›å‘½ä»¤æ¥è®¿é—®HDFSã€‚</li></ul></li><li>NameNodeï¼šå°±æ˜¯ Masterï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸»ç®¡ã€ç®¡ç†è€…ã€‚<ul><li>ç®¡ç† HDFS çš„åç§°ç©ºé—´ï¼›</li><li>ç®¡ç†æ•°æ®å—ï¼ˆBlockï¼‰æ˜ å°„ä¿¡æ¯ï¼›</li><li>é…ç½®å‰¯æœ¬ç­–ç•¥ï¼›</li><li>å¤„ç†å®¢æˆ·ç«¯è¯»å†™è¯·æ±‚ã€‚</li></ul></li><li>DataNodeï¼šå°±æ˜¯ Slaveã€‚NameNode ä¸‹è¾¾å‘½ä»¤ï¼ŒDataNode æ‰§è¡Œå®é™…çš„æ“ä½œã€‚<ul><li>å­˜å‚¨å®é™…çš„æ•°æ®å—ï¼›</li><li>æ‰§è¡Œæ•°æ®å—çš„è¯»/å†™æ“ä½œã€‚</li></ul></li><li>Secondary NameNodeï¼šå¹¶é NameNode çš„çƒ­å¤‡ã€‚å½“ NameNode æŒ‚æ‰çš„æ—¶å€™ï¼Œå®ƒå¹¶ä¸èƒ½é©¬ä¸Šæ›¿æ¢ NameNode å¹¶æä¾›æœåŠ¡ã€‚<ul><li>è¾…åŠ© NameNodeï¼Œåˆ†æ‹…å…¶å·¥ä½œé‡ï¼›</li><li>å®šæœŸåˆå¹¶ fsimage å’Œ editsï¼Œå¹¶æ¨é€ç»™ NameNodeï¼›</li><li>åœ¨ç´§æ€¥æƒ…å†µä¸‹ï¼Œå¯è¾…åŠ©æ¢å¤ NameNodeã€‚</li></ul></li></ul><blockquote><h3 id="æ–‡ä»¶å¤§å°è®¾ç½®ï¼Œå¢å¤§æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"><a href="#æ–‡ä»¶å¤§å°è®¾ç½®ï¼Œå¢å¤§æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ" class="headerlink" title="æ–‡ä»¶å¤§å°è®¾ç½®ï¼Œå¢å¤§æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"></a>æ–‡ä»¶å¤§å°è®¾ç½®ï¼Œå¢å¤§æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</h3></blockquote><p>HDFS ä¸­çš„æ–‡ä»¶åœ¨ç‰©ç†ä¸Šæ˜¯åˆ†å—å­˜å‚¨ï¼ˆblockï¼‰ï¼Œå—çš„å¤§å°å¯ä»¥é€šè¿‡é…ç½®å‚æ•° <code>dfs.blocksize</code> æ¥è§„å®šï¼Œé»˜è®¤å¤§å°åœ¨ hadoop2.x ç‰ˆæœ¬ä¸­æ˜¯ 128MBï¼Œè€ç‰ˆæœ¬ä¸­æ˜¯ 64MBã€‚</p><p><strong>æ€è€ƒï¼šä¸ºä»€ä¹ˆå—çš„å¤§å°ä¸èƒ½è®¾ç½®çš„å¤ªå°ï¼Œä¹Ÿä¸èƒ½è®¾ç½®çš„å¤ªå¤§ï¼Ÿ</strong></p><p>HDFS çš„å—æ¯”ç£ç›˜çš„å—å¤§ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†æœ€å°åŒ–å¯»å€å¼€é”€ã€‚å¦‚æœå—è®¾ç½®å¾—è¶³å¤Ÿå¤§ï¼Œä»ç£ç›˜ä¼ è¾“æ•°æ®çš„æ—¶é—´ä¼šæ˜æ˜¾å¤§äºå®šä½è¿™ä¸ªå—å¼€å§‹ä½ç½®æ‰€éœ€çš„æ—¶é—´ã€‚å› è€Œï¼Œä¼ è¾“ä¸€ä¸ªç”±å¤šä¸ªå—ç»„æˆçš„æ–‡ä»¶çš„æ—¶é—´å–å†³äºç£ç›˜ä¼ è¾“é€Ÿç‡ã€‚</p><p>å¦‚æœå¯»å€æ—¶é—´çº¦ä¸º 10msï¼Œè€Œä¼ è¾“é€Ÿç‡ä¸º 100MB/sï¼Œä¸ºäº†ä½¿å¯»å€æ—¶é—´ä»…å ä¼ è¾“æ—¶é—´çš„ 1%ï¼Œæˆ‘ä»¬è¦å°†å—å¤§å°è®¾ç½®çº¦ä¸º 10msÃ—100Ã—100M/s = 100MBã€‚å¦‚å›¾ï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/blocksize.png" alt></p><p>é»˜è®¤çš„å—å¤§å° 128MBï¼Œå¢åŠ æ–‡ä»¶å—å¤§å°ï¼Œéœ€è¦å¢åŠ ç£ç›˜çš„ä¼ è¾“é€Ÿç‡ã€‚</p><blockquote><h3 id="HDFS-çš„å‹ç¼©ç®—æ³•ï¼Ÿ"><a href="#HDFS-çš„å‹ç¼©ç®—æ³•ï¼Ÿ" class="headerlink" title="HDFS çš„å‹ç¼©ç®—æ³•ï¼Ÿ"></a>HDFS çš„å‹ç¼©ç®—æ³•ï¼Ÿ</h3></blockquote><p>ä¼ä¸šå¼€å‘ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ snappyã€‚</p><div class="table-container"><table><thead><tr><th>å‹ç¼©ç®—æ³•</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Gzip</td><td>- å‹ç¼©æ¯”ä¾‹æ¯”è¾ƒé«˜ï¼Œè€Œä¸”å‹ç¼©ã€è§£å‹é€Ÿåº¦æ¯”è¾ƒå¿«ï¼› <br> - hadoop æœ¬èº«æ”¯æŒï¼Œåœ¨åº”ç”¨ä¸­å¤„ç† gzip æ ¼å¼çš„æ–‡ä»¶å°±å’Œç›´æ¥å¤„ç†æ–‡æœ¬ä¸€æ ·ï¼› <br> - å¤§éƒ¨åˆ† linux ç³»ç»Ÿéƒ½è‡ªå¸¦ gzip å‘½ä»¤ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚</td><td>ä¸æ”¯æŒ splitã€‚</td><td>å½“æ¯ä¸ªæ–‡ä»¶å‹ç¼©ä¹‹ååœ¨ 130M ä»¥å†…çš„ï¼ˆ1 ä¸ªå—å¤§å°å†…ï¼‰ï¼Œéƒ½å¯ä»¥è€ƒè™‘ç”¨ gzipå‹ç¼©æ ¼å¼ã€‚</td></tr><tr><td>Bzip2</td><td>- æ”¯æŒ splitï¼› <br> - å…·æœ‰å¾ˆé«˜çš„å‹ç¼©ç‡ï¼Œæ¯” gzip å‹ç¼©ç‡éƒ½é«˜ï¼› <br> - hadoop æœ¬èº«æ”¯æŒï¼Œä½†ä¸æ”¯æŒ nativeï¼› <br> - åœ¨ linux ç³»ç»Ÿä¸‹è‡ªå¸¦ bzip2 å‘½ä»¤ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚</td><td>- å‹ç¼©/è§£å‹é€Ÿåº¦æ…¢ï¼› <br> - ä¸æ”¯æŒ nativeã€‚</td><td>- é€‚åˆå¯¹é€Ÿåº¦è¦æ±‚ä¸é«˜ï¼Œä½†éœ€è¦è¾ƒé«˜çš„å‹ç¼©ç‡çš„æ—¶å€™ï¼Œå¯ä»¥ä½œä¸º MapReduce ä½œä¸šçš„è¾“å‡ºæ ¼å¼ï¼› <br> - æˆ–è€…è¾“å‡ºä¹‹åçš„æ•°æ®æ¯”è¾ƒå¤§ï¼Œå¤„ç†ä¹‹åçš„æ•°æ®éœ€è¦å‹ç¼©å­˜æ¡£å‡å°‘ç£ç›˜ç©ºé—´å¹¶ä¸”ä»¥åæ•°æ®ç”¨å¾—æ¯”è¾ƒå°‘çš„æƒ…å†µï¼› <br> - æˆ–è€…å¯¹å•ä¸ªå¾ˆå¤§çš„æ–‡æœ¬æ–‡ä»¶æƒ³å‹ç¼©å‡å°‘å­˜å‚¨ç©ºé—´ï¼ŒåŒæ—¶åˆéœ€è¦æ”¯æŒ splitï¼Œè€Œä¸”å…¼å®¹ä¹‹å‰çš„åº”ç”¨ç¨‹åºï¼ˆå³åº”ç”¨ç¨‹åºä¸éœ€è¦ä¿®æ”¹ï¼‰çš„æƒ…å†µã€‚</td></tr><tr><td>Lzo</td><td>- å‹ç¼©/è§£å‹é€Ÿåº¦ä¹Ÿæ¯”è¾ƒå¿«ï¼Œåˆç†çš„å‹ç¼©ç‡ï¼› <br> - æ”¯æŒ splitï¼Œæ˜¯ hadoop ä¸­æœ€æµè¡Œçš„å‹ç¼©æ ¼å¼ï¼› <br> - å¯ä»¥åœ¨ linux ç³»ç»Ÿä¸‹å®‰è£… lzop å‘½ä»¤ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚</td><td>- å‹ç¼©ç‡æ¯” gzip è¦ä½ä¸€äº›ï¼› <br> - hadoop æœ¬èº«ä¸æ”¯æŒï¼Œéœ€è¦å®‰è£…ï¼› <br> - åœ¨åº”ç”¨ä¸­å¯¹ lzo æ ¼å¼çš„æ–‡ä»¶éœ€è¦åšä¸€äº›ç‰¹æ®Šå¤„ç†ï¼ˆä¸ºäº†æ”¯æŒ split éœ€è¦å»ºç´¢å¼•ï¼Œè¿˜éœ€è¦æŒ‡å®š inputFormat ä¸º lzo æ ¼å¼ï¼‰ã€‚</td><td>ä¸€ä¸ªå¾ˆå¤§çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå‹ç¼©ä¹‹åè¿˜å¤§äº 200MB ä»¥ä¸Šçš„å¯ä»¥è€ƒè™‘ï¼Œè€Œä¸”å•ä¸ªæ–‡ä»¶è¶Šå¤§ï¼Œlzo ä¼˜ç‚¹è¶Šè¶Šæ˜æ˜¾ã€‚</td></tr><tr><td>Snappy</td><td>é«˜é€Ÿå‹ç¼©é€Ÿåº¦å’Œåˆç†çš„å‹ç¼©ç‡ã€‚</td><td>- ä¸æ”¯æŒ splitï¼› <br> - å‹ç¼©ç‡æ¯” gzip è¦ä½ï¼› <br> - hadoop æœ¬èº«ä¸æ”¯æŒï¼Œéœ€è¦å®‰è£…ã€‚</td><td>- å½“ MapReduce ä½œä¸šçš„ Map è¾“å‡ºçš„æ•°æ®æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œä½œä¸º Map åˆ° Reduce çš„ä¸­é—´æ•°æ®çš„å‹ç¼©æ ¼å¼ï¼› <br> - æˆ–è€…ä½œä¸ºä¸€ä¸ª MapReduce ä½œä¸šçš„è¾“å‡ºå’Œå¦å¤–ä¸€ä¸ª MapReduce ä½œä¸šçš„è¾“å…¥ã€‚</td></tr></tbody></table></div><blockquote><h3 id="HDFS-çš„å­˜å‚¨æœºåˆ¶ï¼Ÿ"><a href="#HDFS-çš„å­˜å‚¨æœºåˆ¶ï¼Ÿ" class="headerlink" title="HDFS çš„å­˜å‚¨æœºåˆ¶ï¼Ÿ"></a>HDFS çš„å­˜å‚¨æœºåˆ¶ï¼Ÿ</h3></blockquote><p>HDFS å­˜å‚¨æœºåˆ¶ï¼ŒåŒ…æ‹¬ HDFS çš„<strong>å†™å…¥æ•°æ®</strong>è¿‡ç¨‹å’Œ<strong>è¯»å–æ•°æ®</strong>è¿‡ç¨‹ä¸¤éƒ¨åˆ†</p><p><strong>HDFS å†™æ•°æ®è¿‡ç¨‹</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hdfs_write.png" alt></p><ol><li>å®¢æˆ·ç«¯é€šè¿‡ Distributed FileSystem æ¨¡å—å‘ NameNode è¯·æ±‚ä¸Šä¼ æ–‡ä»¶ï¼ŒNameNode æ£€æŸ¥ç›®æ ‡æ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨ï¼Œçˆ¶ç›®å½•æ˜¯å¦å­˜åœ¨ï¼›</li><li>NameNode è¿”å›æ˜¯å¦å¯ä»¥ä¸Šä¼ ï¼›</li><li>å®¢æˆ·ç«¯è¯·æ±‚ç¬¬ä¸€ä¸ª block ä¸Šä¼ åˆ°å“ªå‡ ä¸ª DataNode æœåŠ¡å™¨ä¸Šï¼›</li><li>NameNode è¿”å› 3 ä¸ª DataNode èŠ‚ç‚¹ï¼Œåˆ†åˆ«ä¸º dn1ã€dn2ã€dn3ï¼›</li><li>å®¢æˆ·ç«¯é€šè¿‡ FSDataOutputStream æ¨¡å—è¯·æ±‚ dn1 ä¸Šä¼ æ•°æ®ï¼Œdn1 æ”¶åˆ°è¯·æ±‚ä¼šç»§ç»­è°ƒç”¨ dn2ï¼Œç„¶å dn2 è°ƒç”¨ dn3ï¼Œå°†è¿™ä¸ª<strong>é€šä¿¡ç®¡é“</strong>å»ºç«‹å®Œæˆï¼›</li><li>dn1ã€dn2ã€dn3 é€çº§åº”ç­”å®¢æˆ·ç«¯ï¼›</li><li>å®¢æˆ·ç«¯å¼€å§‹å¾€ dn1 ä¸Šä¼ ç¬¬ä¸€ä¸ª blockï¼ˆå…ˆä»ç£ç›˜è¯»å–æ•°æ®æ”¾åˆ°ä¸€ä¸ªæœ¬åœ°å†…å­˜ç¼“å­˜ï¼‰ï¼Œä»¥ packet ä¸ºå•ä½ï¼Œdn1 æ”¶åˆ°ä¸€ä¸ª packet å°±ä¼šä¼ ç»™ dn2ï¼Œdn2 ä¼ ç»™ dn3ï¼›dn1 æ¯ä¼ ä¸€ä¸ª packet ä¼šæ”¾å…¥ä¸€ä¸ªåº”ç­”é˜Ÿåˆ—ç­‰å¾…åº”ç­”ï¼›</li><li>å½“ä¸€ä¸ª block ä¼ è¾“å®Œæˆä¹‹åï¼Œå®¢æˆ·ç«¯å†æ¬¡è¯·æ±‚ NameNode ä¸Šä¼ ç¬¬äºŒä¸ª block çš„æœåŠ¡å™¨ã€‚ï¼ˆé‡å¤æ‰§è¡Œ 3~7 æ­¥ï¼‰ã€‚</li></ol><p><strong>HDFSè¯»æ•°æ®è¿‡ç¨‹</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hdfs_read.png" alt></p><ol><li>å®¢æˆ·ç«¯é€šè¿‡ Distributed FileSystem å‘ NameNode è¯·æ±‚ä¸‹è½½æ–‡ä»¶ï¼ŒNameNode é€šè¿‡æŸ¥è¯¢å…ƒæ•°æ®ï¼Œæ‰¾åˆ°æ–‡ä»¶å—æ‰€åœ¨çš„ DataNode åœ°å€ï¼›</li><li>æŒ‘é€‰ä¸€å° DataNodeï¼ˆå°±è¿‘åŸåˆ™ï¼Œç„¶åéšæœºï¼‰æœåŠ¡å™¨ï¼Œè¯·æ±‚è¯»å–æ•°æ®ï¼›</li><li>DataNode å¼€å§‹ä¼ è¾“æ•°æ®ç»™å®¢æˆ·ç«¯ï¼ˆä»ç£ç›˜é‡Œé¢è¯»å–æ•°æ®è¾“å…¥æµï¼Œä»¥ packet ä¸ºå•ä½æ¥åšæ ¡éªŒï¼‰ï¼›</li><li>å®¢æˆ·ç«¯ä»¥ packet ä¸ºå•ä½æ¥æ”¶ï¼Œå…ˆåœ¨æœ¬åœ°ç¼“å­˜ï¼Œç„¶åå†™å…¥ç›®æ ‡æ–‡ä»¶ã€‚</li></ol><p>å¯ä»¥å‚è€ƒä¸‹é¢çš„æ¼«ç”»è¿›è¡Œç†è§£ï¼š</p><ul><li><strong>HDFS å†™æ•°æ®</strong></li></ul><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hdfs_write1.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hdfs_write2.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hdfs_write3.png" alt></p><ul><li><strong>HDFS è¯»æ•°æ®</strong></li></ul><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hdfs_read1.png" alt></p><ul><li><strong>å®¹é”™</strong></li></ul><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hdfs_error1.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hdfs_error2.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hdfs_error3.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hdfs_error4.png" alt></p><ul><li><strong>å‰¯æœ¬å­˜æ”¾ç­–ç•¥</strong></li></ul><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/hdfs_duplication1.png" alt></p><h2 id="Hadoop-MapReduce"><a href="#Hadoop-MapReduce" class="headerlink" title="Hadoop MapReduce"></a>Hadoop MapReduce</h2><blockquote><h3 id="è°ˆè°ˆ-Hadoop-åºåˆ—åŒ–å’Œååºåˆ—åŒ–åŠè‡ªå®šä¹‰-bean-å¯¹è±¡å®ç°åºåˆ—åŒ–ï¼Ÿ"><a href="#è°ˆè°ˆ-Hadoop-åºåˆ—åŒ–å’Œååºåˆ—åŒ–åŠè‡ªå®šä¹‰-bean-å¯¹è±¡å®ç°åºåˆ—åŒ–ï¼Ÿ" class="headerlink" title="è°ˆè°ˆ Hadoop åºåˆ—åŒ–å’Œååºåˆ—åŒ–åŠè‡ªå®šä¹‰ bean å¯¹è±¡å®ç°åºåˆ—åŒ–ï¼Ÿ"></a>è°ˆè°ˆ Hadoop åºåˆ—åŒ–å’Œååºåˆ—åŒ–åŠè‡ªå®šä¹‰ bean å¯¹è±¡å®ç°åºåˆ—åŒ–ï¼Ÿ</h3></blockquote><ul><li><p>åºåˆ—åŒ–å’Œååºåˆ—åŒ–</p><ul><li>åºåˆ—åŒ–å°±æ˜¯æŠŠå†…å­˜ä¸­çš„å¯¹è±¡ï¼Œè½¬æ¢æˆå­—èŠ‚åºåˆ—ï¼ˆæˆ–å…¶ä»–æ•°æ®ä¼ è¾“åè®®ï¼‰ä»¥ä¾¿äºå­˜å‚¨ï¼ˆæŒä¹…åŒ–ï¼‰å’Œç½‘ç»œä¼ è¾“ã€‚</li><li>ååºåˆ—åŒ–å°±æ˜¯å°†æ”¶åˆ°å­—èŠ‚åºåˆ—ï¼ˆæˆ–å…¶ä»–æ•°æ®ä¼ è¾“åè®®ï¼‰æˆ–è€…æ˜¯ç¡¬ç›˜çš„æŒä¹…åŒ–æ•°æ®ï¼Œè½¬æ¢æˆå†…å­˜ä¸­çš„å¯¹è±¡ã€‚</li><li>Java çš„åºåˆ—åŒ–æ˜¯ä¸€ä¸ªé‡é‡çº§åºåˆ—åŒ–æ¡†æ¶ï¼ˆSerializableï¼‰ï¼Œä¸€ä¸ªå¯¹è±¡è¢«åºåˆ—åŒ–åï¼Œä¼šé™„å¸¦å¾ˆå¤šé¢å¤–çš„ä¿¡æ¯ï¼ˆå„ç§æ ¡éªŒä¿¡æ¯ï¼Œheaderï¼Œç»§æ‰¿ä½“ç³»ç­‰ï¼‰ï¼Œä¸ä¾¿äºåœ¨ç½‘ç»œä¸­é«˜æ•ˆä¼ è¾“ã€‚æ‰€ä»¥ï¼ŒHadoop è‡ªå·±å¼€å‘äº†ä¸€å¥—åºåˆ—åŒ–æœºåˆ¶ï¼ˆWritableï¼‰ï¼Œç²¾ç®€ã€é«˜æ•ˆã€‚</li></ul></li><li><p>è‡ªå®šä¹‰ bean å¯¹è±¡è¦æƒ³åºåˆ—åŒ–ä¼ è¾“æ­¥éª¤åŠæ³¨æ„äº‹é¡¹ï¼š</p><ol><li>å¿…é¡»å®ç°Writableæ¥å£ï¼›</li><li>ååºåˆ—åŒ–æ—¶ï¼Œéœ€è¦åå°„è°ƒç”¨ç©ºå‚æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å¿…é¡»æœ‰ç©ºå‚æ„é€ ï¼›</li><li>é‡å†™åºåˆ—åŒ–æ–¹æ³•ï¼›</li><li>é‡å†™ååºåˆ—åŒ–æ–¹æ³•ï¼›</li><li>æ³¨æ„ååºåˆ—åŒ–çš„é¡ºåºå’Œåºåˆ—åŒ–çš„é¡ºåºå®Œå…¨ä¸€è‡´ï¼›</li><li>è¦æƒ³æŠŠç»“æœæ˜¾ç¤ºåœ¨æ–‡ä»¶ä¸­ï¼Œéœ€è¦é‡å†™ <code>toString()</code>ï¼Œä¸”ç”¨ <code>\t</code> åˆ†å¼€ï¼Œæ–¹ä¾¿åç»­ç”¨ï¼›</li><li>å¦‚æœéœ€è¦å°†è‡ªå®šä¹‰çš„ bean æ”¾åœ¨ key ä¸­ä¼ è¾“ï¼Œåˆ™è¿˜éœ€è¦å®ç° comparable æ¥å£ï¼Œå› ä¸º mapreduce æ¡†ä¸­çš„ shuffle è¿‡ç¨‹ä¸€å®šä¼šå¯¹ key è¿›è¡Œæ’åºã€‚</li></ol></li></ul><blockquote><h3 id="MapTask-å’Œ-ReduceTask-å·¥ä½œæœºåˆ¶ï¼ˆMapReduce-å·¥ä½œåŸç†ï¼‰ï¼Ÿ"><a href="#MapTask-å’Œ-ReduceTask-å·¥ä½œæœºåˆ¶ï¼ˆMapReduce-å·¥ä½œåŸç†ï¼‰ï¼Ÿ" class="headerlink" title="MapTask å’Œ ReduceTask å·¥ä½œæœºåˆ¶ï¼ˆMapReduce å·¥ä½œåŸç†ï¼‰ï¼Ÿ"></a>MapTask å’Œ ReduceTask å·¥ä½œæœºåˆ¶ï¼ˆMapReduce å·¥ä½œåŸç†ï¼‰ï¼Ÿ</h3></blockquote><p><strong>MapTask å·¥ä½œæœºåˆ¶</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/map_task.png" alt></p><ol><li>Read é˜¶æ®µï¼šMap Task é€šè¿‡ç”¨æˆ·ç¼–å†™çš„ RecordReaderï¼Œä»è¾“å…¥ InputSplit ä¸­è§£æå‡ºä¸€ä¸ªä¸ª key/valueï¼›</li><li>Map é˜¶æ®µï¼šè¯¥èŠ‚ç‚¹ä¸»è¦æ˜¯å°†è§£æå‡ºçš„ key/value äº¤ç»™ç”¨æˆ·ç¼–å†™ <code>map()</code> å‡½æ•°å¤„ç†ï¼Œå¹¶äº§ç”Ÿä¸€ç³»åˆ—æ–°çš„ key/valueï¼›</li><li>Collect æ”¶é›†é˜¶æ®µï¼šåœ¨ç”¨æˆ·ç¼–å†™ <code>map()</code> å‡½æ•°ä¸­ï¼Œå½“æ•°æ®å¤„ç†å®Œæˆåï¼Œä¸€èˆ¬ä¼šè°ƒç”¨ <code>OutputCollector.collect()</code> è¾“å‡ºç»“æœã€‚åœ¨è¯¥å‡½æ•°å†…éƒ¨ï¼Œå®ƒä¼šå°†ç”Ÿæˆçš„ key/value åˆ†åŒºï¼ˆè°ƒç”¨ Partitionerï¼‰ï¼Œå¹¶å†™å…¥ä¸€ä¸ªç¯å½¢å†…å­˜ç¼“å†²åŒºä¸­ï¼›</li><li>Spill é˜¶æ®µï¼šå³â€œæº¢å†™â€ï¼Œå½“ç¯å½¢ç¼“å†²åŒºæ»¡åï¼ŒMapReduce ä¼šå°†æ•°æ®å†™åˆ°æœ¬åœ°ç£ç›˜ä¸Šï¼Œç”Ÿæˆä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°†æ•°æ®å†™å…¥æœ¬åœ°ç£ç›˜ä¹‹å‰ï¼Œå…ˆè¦å¯¹æ•°æ®è¿›è¡Œä¸€æ¬¡æœ¬åœ°æ’åºï¼Œå¹¶åœ¨å¿…è¦æ—¶å¯¹æ•°æ®è¿›è¡Œåˆå¹¶ã€å‹ç¼©ç­‰æ“ä½œï¼›</li><li>Combine é˜¶æ®µï¼šå½“æ‰€æœ‰æ•°æ®å¤„ç†å®Œæˆåï¼ŒMapTask å¯¹æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶è¿›è¡Œä¸€æ¬¡åˆå¹¶ï¼Œä»¥ç¡®ä¿æœ€ç»ˆåªä¼šç”Ÿæˆä¸€ä¸ªæ•°æ®æ–‡ä»¶ã€‚</li></ol><p><strong>ReduceTaskå·¥ä½œæœºåˆ¶</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/reduce_task.png" alt></p><ol><li>Copy é˜¶æ®µï¼šReduceTask ä»å„ä¸ª MapTask ä¸Šè¿œç¨‹æ‹·è´ä¸€ç‰‡æ•°æ®ï¼Œå¹¶é’ˆå¯¹æŸä¸€ç‰‡æ•°æ®ï¼Œå¦‚æœå…¶å¤§å°è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼Œåˆ™å†™åˆ°ç£ç›˜ä¸Šï¼Œå¦åˆ™ç›´æ¥æ”¾åˆ°å†…å­˜ä¸­ï¼›</li><li>Merge é˜¶æ®µï¼šåœ¨è¿œç¨‹æ‹·è´æ•°æ®çš„åŒæ—¶ï¼ŒReduceTask å¯åŠ¨äº†ä¸¤ä¸ªåå°çº¿ç¨‹å¯¹å†…å­˜å’Œç£ç›˜ä¸Šçš„æ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼Œä»¥é˜²æ­¢å†…å­˜ä½¿ç”¨è¿‡å¤šæˆ–ç£ç›˜ä¸Šæ–‡ä»¶è¿‡å¤šï¼›</li><li>Sort é˜¶æ®µï¼šæŒ‰ç…§ MapReduce è¯­ä¹‰ï¼Œç”¨æˆ·ç¼–å†™ <code>reduce()</code> å‡½æ•°è¾“å…¥æ•°æ®æ˜¯æŒ‰ key è¿›è¡Œèšé›†çš„ä¸€ç»„æ•°æ®ã€‚ä¸ºäº†å°† key ç›¸åŒçš„æ•°æ®èšåœ¨ä¸€èµ·ï¼ŒHadoop é‡‡ç”¨äº†åŸºäºæ’åºçš„ç­–ç•¥ã€‚ç”±äºå„ä¸ª MapTask å·²ç»å®ç°å¯¹è‡ªå·±çš„å¤„ç†ç»“æœè¿›è¡Œäº†å±€éƒ¨æ’åºï¼Œå› æ­¤ï¼Œ ReduceTask åªéœ€å¯¹æ‰€æœ‰æ•°æ®è¿›è¡Œä¸€æ¬¡å½’å¹¶æ’åºå³å¯ï¼›</li><li>Reduce é˜¶æ®µï¼š<code>reduce()</code> å‡½æ•°å°†è®¡ç®—ç»“æœå†™åˆ° HDFS ä¸Šã€‚</li></ol><blockquote><h3 id="å¦‚ä½•åˆ¤å®šä¸€ä¸ª-job-çš„-map-å’Œ-reduce-çš„æ•°é‡"><a href="#å¦‚ä½•åˆ¤å®šä¸€ä¸ª-job-çš„-map-å’Œ-reduce-çš„æ•°é‡" class="headerlink" title="å¦‚ä½•åˆ¤å®šä¸€ä¸ª job çš„ map å’Œ reduce çš„æ•°é‡?"></a>å¦‚ä½•åˆ¤å®šä¸€ä¸ª job çš„ map å’Œ reduce çš„æ•°é‡?</h3></blockquote><ul><li><p><strong>map çš„æ•°é‡</strong></p><p>  map ä¸ªæ•°çš„è®¡ç®—å…¬å¼ä¸ºï¼š<code>splitSize = max(minSize, min(maxSize, blockSize))</code>ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½® minSize å’Œ maxSizeï¼ŒsplitSize çš„å¤§å°é»˜è®¤ç­‰äº blockSizeï¼Œ</p><p>  åœ¨ map é˜¶æ®µè¯»å–æ•°æ®å‰ï¼ŒFileInputFormat ä¼šå°†è¾“å…¥æ–‡ä»¶åˆ†å‰²æˆ splitã€‚split çš„ä¸ªæ•°å†³å®šäº† map çš„ä¸ªæ•°ã€‚å½±å“ map ä¸ªæ•°ï¼Œå³ split ä¸ªæ•°çš„å› ç´ ä¸»è¦æœ‰ï¼š</p><ul><li><p>HDFS å—çš„å¤§å°ï¼Œå³ HDFS ä¸­ <code>dfs.block.size</code> çš„å€¼ã€‚å¦‚æœæœ‰ä¸€ä¸ªè¾“å…¥æ–‡ä»¶ä¸º1024MBï¼Œå½“å—ä¸º 256MB æ—¶ï¼Œä¼šè¢«åˆ’åˆ†ä¸º 4 ä¸ª splitï¼›å½“å—ä¸º 128MB æ—¶ï¼Œä¼šè¢«åˆ’åˆ†ä¸º 8 ä¸ª splitã€‚</p></li><li><p>æ–‡ä»¶çš„å¤§å°ã€‚å½“å—ä¸º 128MB æ—¶ï¼Œå¦‚æœè¾“å…¥æ–‡ä»¶ä¸º 128MBï¼Œä¼šè¢«åˆ’åˆ†ä¸º 1 ä¸ª splitï¼›å½“å—ä¸º 256MBï¼Œä¼šè¢«åˆ’åˆ†ä¸º 2 ä¸ª splitã€‚</p></li><li><p>æ–‡ä»¶çš„ä¸ªæ•°ã€‚FileInputFormat æŒ‰ç…§æ–‡ä»¶åˆ†å‰² splitï¼Œå¹¶ä¸”åªä¼šåˆ†å‰²å¤§æ–‡ä»¶ï¼Œå³é‚£äº›å¤§å°è¶…è¿‡ HDFS å—çš„å¤§å°çš„æ–‡ä»¶ã€‚å¦‚æœ HDFS ä¸­ <code>dfs.block.size</code> è®¾ç½®ä¸º 64MBï¼Œè€Œè¾“å…¥çš„ç›®å½•ä¸­æ–‡ä»¶æœ‰ 100 ä¸ªï¼Œåˆ™åˆ’åˆ†åçš„ split ä¸ªæ•°è‡³å°‘ä¸º 100 ä¸ªã€‚</p></li><li><p>splitSize çš„å¤§å°ã€‚åˆ†ç‰‡æ˜¯æŒ‰ç…§ splitSize çš„å¤§å°è¿›è¡Œåˆ†å‰²çš„ï¼Œä¸€ä¸ª split çš„å¤§å°åœ¨æ²¡æœ‰è®¾ç½®çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤ç­‰äº HDFS Block çš„å¤§å°ã€‚ä½†åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ä¸¤ä¸ªå‚æ•°æ¥å¯¹ splitSize è¿›è¡Œè°ƒèŠ‚ã€‚</p><ul><li>maxSizeï¼šsplit çš„æœ€å¤§å€¼ï¼Œé»˜è®¤æ˜¯ <code>Long.MAX_VALUE</code>ã€‚å¯ä»¥é€šè¿‡<code>mapreduce.input.fileinputformat.split.maxsize</code> è¿›è¡Œè®¾ç½®ã€‚</li><li>minSizeï¼šsplitçš„æœ€å°å€¼ï¼Œè¯¥å€¼å¯ç”±ä¸¤ä¸ªé€”å¾„è®¾ç½®ï¼š(1)é€šè¿‡å­ç±»é‡å†™æ–¹æ³• <code>protected void setMinSplitSize(long minSplitSize)</code> è¿›è¡Œè®¾ç½®ã€‚ä¸€èˆ¬æƒ…å†µä¸º <code>1</code>ï¼Œç‰¹æ®Šæƒ…å†µé™¤å¤–ï¼›(2)é€šè¿‡é…ç½®æ–‡ä»¶ä¸­çš„ <code>mapreduce.input.fileinputformat.split.minsize</code> è¿›è¡Œè®¾ç½®ã€‚</li></ul></li></ul></li><li><p><strong>reduceæ•°é‡</strong></p><p>  reduce çš„æ•°é‡ <code>job.setNumReduceTasks(x);</code> x ä¸º reduce çš„æ•°é‡ã€‚ä¸è®¾ç½®çš„è¯é»˜è®¤ä¸º 1ã€‚</p></li></ul><blockquote><h3 id="åœ¨ä¸€ä¸ªè¿è¡Œçš„-Hadoop-ä»»åŠ¡ä¸­ï¼Œä»€ä¹ˆæ˜¯-InputSplitï¼Ÿ"><a href="#åœ¨ä¸€ä¸ªè¿è¡Œçš„-Hadoop-ä»»åŠ¡ä¸­ï¼Œä»€ä¹ˆæ˜¯-InputSplitï¼Ÿ" class="headerlink" title="åœ¨ä¸€ä¸ªè¿è¡Œçš„ Hadoop ä»»åŠ¡ä¸­ï¼Œä»€ä¹ˆæ˜¯ InputSplitï¼Ÿ"></a>åœ¨ä¸€ä¸ªè¿è¡Œçš„ Hadoop ä»»åŠ¡ä¸­ï¼Œä»€ä¹ˆæ˜¯ InputSplitï¼Ÿ</h3></blockquote><p>FileInputFormat æºç è§£æ <code>input.getSplits(job)</code></p><ol><li>æ‰¾åˆ°ä½ æ•°æ®å­˜å‚¨çš„ç›®å½•ï¼›</li><li>å¼€å§‹éå†å¤„ç†ï¼ˆè§„åˆ’åˆ‡ç‰‡ï¼‰ç›®å½•ä¸‹çš„æ¯ä¸€ä¸ªæ–‡ä»¶ï¼›</li><li>éå†ç¬¬ä¸€ä¸ªæ–‡ä»¶ ss.txtï¼›<ol><li>è·å–æ–‡ä»¶å¤§å° <code>fs.sizeOf(ss.txt)</code>;</li><li>è®¡ç®—åˆ‡ç‰‡å¤§å° <code>computeSliteSize(Math.max(minSize, Math.min(maxSize, blocksize))) = blocksize = 128MB</code>ï¼›</li><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ‡ç‰‡å¤§å° = blocksizeï¼›</li><li>å¼€å§‹åˆ‡ï¼Œå½¢æˆç¬¬ 1 ä¸ªåˆ‡ç‰‡ï¼šss.txtâ€”0:128MBï¼Œç¬¬ 2 ä¸ªåˆ‡ç‰‡ss.txtâ€”128:256MBï¼Œç¬¬ 3 ä¸ªåˆ‡ç‰‡ ss.txtâ€”256MB:300MBï¼ˆæ¯æ¬¡åˆ‡ç‰‡æ—¶ï¼Œéƒ½è¦åˆ¤æ–­åˆ‡å®Œå‰©ä¸‹çš„éƒ¨åˆ†æ˜¯å¦å¤§äºå—çš„ 1.1 å€ï¼Œä¸å¤§äº 1.1 å€å°±åˆ’åˆ†ä¸ºä¸€å—åˆ‡ç‰‡ï¼‰ï¼›</li><li>å°†åˆ‡ç‰‡ä¿¡æ¯å†™åˆ°ä¸€ä¸ªåˆ‡ç‰‡è§„åˆ’æ–‡ä»¶ä¸­ï¼›</li><li>æ•´ä¸ªåˆ‡ç‰‡çš„æ ¸å¿ƒè¿‡ç¨‹åœ¨ <code>getSplit()</code> æ–¹æ³•ä¸­å®Œæˆï¼›</li><li>æ•°æ®åˆ‡ç‰‡åªæ˜¯åœ¨é€»è¾‘ä¸Šå¯¹è¾“å…¥æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œå¹¶ä¸ä¼šå†ç£ç›˜ä¸Šå°†å…¶åˆ‡åˆ†æˆåˆ†ç‰‡è¿›è¡Œå­˜å‚¨ã€‚InputSplit åªè®°å½•äº†åˆ†ç‰‡çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œæ¯”å¦‚èµ·å§‹ä½ç½®ã€é•¿åº¦ä»¥åŠæ‰€åœ¨çš„èŠ‚ç‚¹åˆ—è¡¨ç­‰ï¼›</li><li>æ³¨æ„ï¼šblock æ˜¯ HDFS ä¸Šç‰©ç†ä¸Šå­˜å‚¨çš„å­˜å‚¨çš„æ•°æ®ï¼Œåˆ‡ç‰‡æ˜¯å¯¹æ•°æ®é€»è¾‘ä¸Šçš„åˆ’åˆ†ã€‚</li></ol></li><li>æäº¤åˆ‡ç‰‡è§„åˆ’æ–‡ä»¶åˆ° YARN ä¸Šï¼ŒYARN ä¸Šçš„ MRAppMaster å°±å¯ä»¥æ ¹æ®åˆ‡ç‰‡è§„åˆ’æ–‡ä»¶è®¡ç®—å¼€å¯ MapTask ä¸ªæ•°ï¼Œä¸€ä¸ª job çš„ map é˜¶æ®µ MapTask å¹¶è¡Œåº¦ï¼ˆä¸ªæ•°ï¼‰ï¼Œä¹Ÿæ˜¯ç”±å®¢æˆ·ç«¯æäº¤ job æ—¶çš„åˆ‡ç‰‡ï¼ˆsplitï¼‰ä¸ªæ•°å†³å®šã€‚</li></ol><blockquote><h3 id="æè¿°-MapReduce-æœ‰å‡ ç§æ’åºåŠæ’åºå‘ç”Ÿçš„é˜¶æ®µï¼Ÿ"><a href="#æè¿°-MapReduce-æœ‰å‡ ç§æ’åºåŠæ’åºå‘ç”Ÿçš„é˜¶æ®µï¼Ÿ" class="headerlink" title="æè¿° MapReduce æœ‰å‡ ç§æ’åºåŠæ’åºå‘ç”Ÿçš„é˜¶æ®µï¼Ÿ"></a>æè¿° MapReduce æœ‰å‡ ç§æ’åºåŠæ’åºå‘ç”Ÿçš„é˜¶æ®µï¼Ÿ</h3></blockquote><p><strong>æ’åºçš„åˆ†ç±»ï¼š</strong></p><ul><li><p>éƒ¨åˆ†æ’åºï¼šMapReduce æ ¹æ®è¾“å…¥è®°å½•çš„é”®å¯¹æ•°æ®é›†æ’åºã€‚ä¿è¯è¾“å‡ºçš„æ¯ä¸ªæ–‡ä»¶å†…éƒ¨æ’åºï¼›</p></li><li><p>å…¨æ’åºï¼šå¦‚ä½•ç”¨ Hadoop äº§ç”Ÿä¸€ä¸ªå…¨å±€æ’åºçš„æ–‡ä»¶ï¼Ÿæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªåˆ†åŒºã€‚ä½†è¯¥æ–¹æ³•åœ¨å¤„ç†å¤§å‹æ–‡ä»¶æ—¶æ•ˆç‡æä½ï¼Œå› ä¸ºä¸€å°æœºå™¨å¿…é¡»å¤„ç†æ‰€æœ‰è¾“å‡ºæ–‡ä»¶ï¼Œä»è€Œå®Œå…¨ä¸§å¤±äº† MapReduce æ‰€æä¾›çš„å¹¶è¡Œæ¶æ„ï¼›</p><p>æ›¿ä»£æ–¹æ¡ˆï¼šé¦–å…ˆåˆ›å»ºä¸€ç³»åˆ—æ’å¥½åºçš„æ–‡ä»¶ï¼›å…¶æ¬¡ï¼Œä¸²è”è¿™äº›æ–‡ä»¶ï¼›æœ€åï¼Œç”Ÿæˆä¸€ä¸ªå…¨å±€æ’åºçš„æ–‡ä»¶ã€‚ä¸»è¦æ€è·¯æ˜¯ä½¿ç”¨ä¸€ä¸ªåˆ†åŒºæ¥æè¿°è¾“å‡ºçš„å…¨å±€æ’åºã€‚ä¾‹å¦‚ï¼šå¯ä»¥ä¸ºå¾…åˆ†ææ–‡ä»¶åˆ›å»º 3 ä¸ªåˆ†åŒºï¼Œåœ¨ç¬¬ä¸€åˆ†åŒºä¸­ï¼Œè®°å½•çš„å•è¯é¦–å­—æ¯ a-gï¼Œç¬¬äºŒåˆ†åŒºè®°å½•å•è¯é¦–å­—æ¯ h-n, ç¬¬ä¸‰åˆ†åŒºè®°å½•å•è¯é¦–å­—æ¯ o-zï¼›</p></li><li><p>è¾…åŠ©æ’åºï¼šï¼ˆGroupingComparator åˆ†ç»„ï¼‰ï¼šMapReduce æ¡†æ¶åœ¨è®°å½•åˆ°è¾¾ reducer ä¹‹å‰æŒ‰é”®å¯¹è®°å½•æ’åºï¼Œä½†é”®æ‰€å¯¹åº”çš„å€¼å¹¶æ²¡æœ‰è¢«æ’åºã€‚ç”šè‡³åœ¨ä¸åŒçš„æ‰§è¡Œè½®æ¬¡ä¸­ï¼Œè¿™äº›å€¼çš„æ’åºä¹Ÿä¸å›ºå®šï¼Œå› ä¸ºå®ƒä»¬æ¥è‡ªä¸åŒçš„ map ä»»åŠ¡ä¸”è¿™äº› map ä»»åŠ¡åœ¨ä¸åŒè½®æ¬¡ä¸­å®Œæˆæ—¶é—´å„ä¸ç›¸åŒã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¤§å¤šæ•° MapReduce ç¨‹åºä¼šé¿å…è®© reduce å‡½æ•°ä¾èµ–äºå€¼çš„æ’åºã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶ä¹Ÿéœ€è¦é€šè¿‡ç‰¹å®šçš„æ–¹æ³•å¯¹é”®è¿›è¡Œæ’åºå’Œåˆ†ç»„ç­‰ä»¥å®ç°å¯¹å€¼çš„æ’åºï¼›</p></li><li><p>äºŒæ¬¡æ’åºï¼šåœ¨è‡ªå®šä¹‰æ’åºè¿‡ç¨‹ä¸­ï¼Œå¦‚æœ <code>compareTo</code> ä¸­çš„åˆ¤æ–­æ¡ä»¶ä¸ºä¸¤ä¸ªå³ä¸ºäºŒæ¬¡æ’åºã€‚</p></li></ul><p><strong>è‡ªå®šä¹‰æ’åº WritableComparableï¼š</strong></p><p>bean å¯¹è±¡å®ç° WritableComparable æ¥å£é‡å†™ <code>compareTo</code> æ–¹æ³•ï¼Œå°±å¯ä»¥å®ç°æ’åºã€‚<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">FlowBean</span> o<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å€’åºæ’åˆ—ï¼Œä»å¤§åˆ°å°</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sumFlow <span class="token operator">></span> o<span class="token punctuation">.</span><span class="token function">getSumFlow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><strong>æ’åºå‘ç”Ÿçš„é˜¶æ®µï¼š</strong></p><ul><li>ä¸€ä¸ªæ˜¯åœ¨ map side å‘ç”Ÿåœ¨ spill å partition å‰ï¼›</li><li>ä¸€ä¸ªæ˜¯åœ¨ reduce side å‘ç”Ÿåœ¨ copy å reduce å‰ã€‚</li></ul><blockquote><h3 id="MapReduce-çš„-shuffle-è¿‡ç¨‹ï¼Ÿ"><a href="#MapReduce-çš„-shuffle-è¿‡ç¨‹ï¼Ÿ" class="headerlink" title="MapReduce çš„ shuffle è¿‡ç¨‹ï¼Ÿ"></a>MapReduce çš„ shuffle è¿‡ç¨‹ï¼Ÿ</h3></blockquote><p>Shuffle æœºåˆ¶ï¼šMapReduce ä¿è¯æ¯ä¸ª reducer çš„è¾“å…¥éƒ½æ˜¯æŒ‰é”®æœ‰åºæ’åˆ—çš„ï¼Œç³»ç»Ÿæ‰§è¡Œæ’åºçš„è¿‡ç¨‹ï¼ˆå³å°† map è¾“å‡ºä½œä¸ºè¾“å…¥ä¼ ç»™ reducerï¼‰ç§°ä¸º shuffleã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/mapreduce_shuffle.png" alt></p><p>åˆ†åŒºï¼Œæ’åºï¼Œæº¢å†™ï¼Œæ‹·è´åˆ°å¯¹åº” reduce æœºå™¨ä¸Šï¼Œå¢åŠ  combinerï¼Œå‹ç¼©æº¢å†™çš„æ–‡ä»¶ã€‚</p><blockquote><h3 id="å¦‚ä½•ä¼˜åŒ–-shuffleï¼Ÿ"><a href="#å¦‚ä½•ä¼˜åŒ–-shuffleï¼Ÿ" class="headerlink" title="å¦‚ä½•ä¼˜åŒ– shuffleï¼Ÿ"></a>å¦‚ä½•ä¼˜åŒ– shuffleï¼Ÿ</h3></blockquote><p><strong>Map ç«¯ shuffle</strong></p><ul><li>kvbufferï¼Œé»˜è®¤æ˜¯ 100MBï¼Œå¯ä»¥é€šè¿‡å‚æ•° <code>mapreduce.task.io.sort.mb</code> æ¥ä¿®æ”¹ï¼Œä¸€èˆ¬ä¸ä¿®æ”¹ï¼›</li><li>ç¼“å†²åŒºé˜ˆå€¼ï¼Œä¸€èˆ¬æ˜¯ 80%ï¼Œå¯ä»¥é€šè¿‡ <code>mapreduce.map.sort.spill.percent</code> æ¥ä¿®æ”¹ï¼›</li><li>åˆå¹¶ spill æ–‡ä»¶ï¼Œ<code>mapreduce.task.io.sort.factor</code> å±æ€§é…ç½®æ¯æ¬¡æœ€å¤šåˆå¹¶å¤šå°‘ä¸ªæ–‡ä»¶ï¼Œé»˜è®¤ä¸º 10ï¼Œå³ä¸€æ¬¡æœ€å¤šåˆå¹¶ 10 ä¸ª spill æ–‡ä»¶.å¦‚æœ spill æ–‡ä»¶æ•°é‡å¤§äº <code>mapreduce.map.combiner.minspills</code> é…ç½®çš„æ•°ï¼Œåˆ™åœ¨åˆå¹¶æ–‡ä»¶å†™å…¥ä¹‹å‰ï¼Œä¼šå†æ¬¡è¿è¡Œ combinerã€‚å¦‚æœ spill æ–‡ä»¶æ•°é‡å¤ªå°‘ï¼Œè¿è¡Œ combiner çš„æ”¶ç›Šå¯èƒ½å°äºè°ƒç”¨çš„ä»£ä»·ï¼›</li><li>å¯¹ map è¾“å‡ºè¿›è¡Œå‹ç¼©ï¼Œåœ¨æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œå¯ä»¥å¯¹ map è¾“å‡ºè¿›è¡Œå‹ç¼©,è¦å¯ç”¨å‹ç¼©ï¼Œå°† <code>mapreduce.map.output.compress</code> è®¾ä¸º trueï¼Œå¹¶ä½¿ç”¨ <code>mapreduce.map.output.compress.codec</code> è®¾ç½®ä½¿ç”¨çš„å‹ç¼©ç®—æ³•ã€‚</li></ul><p><strong>Reduce ç«¯ shuffle</strong></p><ul><li>copy çº¿ç¨‹æ•°é‡ï¼šcopy æ˜¯ç”¨æ¥ä» map ä»»åŠ¡ä¸­æå–æ•°æ®çš„ï¼Œé»˜è®¤ä¸º 5 ä¸ª copy çº¿ç¨‹ï¼Œå¯ä»¥é€šæ˜¯ <code>mapreduce.reduce.shuffle.parallelcopies</code> é…ç½®ã€‚</li><li>å†…å­˜åˆ†é…ï¼šå¦‚æœèƒ½å¤Ÿè®©æ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¯ä»¥è¾¾åˆ°æœ€ä½³çš„æ€§èƒ½ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå†…å­˜éƒ½ä¿ç•™ç»™ <code>reduce</code> å‡½æ•°ï¼Œä½†æ˜¯å¦‚æœ <code>reduce</code> å‡½æ•°å¯¹å†…å­˜éœ€æ±‚ä¸æ˜¯å¾ˆé«˜ï¼Œå°† <code>mapreduce.reduce.merge.inmem.threshold</code>ï¼ˆè§¦å‘åˆå¹¶çš„ map è¾“å‡ºæ–‡ä»¶æ•°ï¼‰è®¾ä¸º 0ï¼Œ<code>mapreduce.reduce.input.buffer.percent</code>ï¼ˆç”¨äºä¿å­˜ map è¾“å‡ºæ–‡ä»¶çš„å †å†…å­˜æ¯”ä¾‹ï¼‰è®¾ä¸º1.0ã€‚</li></ul><blockquote><h3 id="Partion-åˆ†åŒº"><a href="#Partion-åˆ†åŒº" class="headerlink" title="Partion åˆ†åŒº"></a>Partion åˆ†åŒº</h3></blockquote><p>Partion ä½œç”¨ä¸»è¦æ˜¯å¯¹ map å¤„ç†çš„æ•°æ®è¿›è¡Œåˆ†åŒºï¼Œå¯ä»¥è§£å†³æ•°æ®å€¾æ–œçš„é—®é¢˜ã€‚</p><ul><li>åˆ†åŒºæ˜¯æ ¹æ® MR çš„è¾“å‡º <code>&lt;keyï¼Œvalue&gt;</code> è¿›è¡Œåˆ†åŒºçš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMR çš„è¾“å‡ºåªæœ‰ä¸€ä¸ªåˆ†åŒºï¼Œä¸€ä¸ªåˆ†åŒºå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚</li><li>è‡ªå®šä¹‰åˆ†åŒºï¼šç»§æ‰¿ Partitionerï¼Œé‡å†™ <code>getPartition</code> è¿™ä¸ªæ–¹æ³•ã€‚</li><li>å¦‚æœæ²¡æœ‰å®šä¹‰ Partitionerï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„ partition ç®—æ³•ï¼Œå³æ ¹æ®æ¯ä¸€æ¡æ•°æ®çš„ key çš„ hashcode å€¼æ‘¸è¿ç®—ï¼ˆ%ï¼‰reduce çš„æ•°é‡ï¼Œå¾—åˆ°çš„æ•°å­—å°±æ˜¯â€œåˆ†åŒºå·â€ã€‚</li></ul><blockquote><h3 id="æè¿°-MapReduce-ä¸­-Combiner-çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œä¸€èˆ¬ä½¿ç”¨æƒ…æ™¯ï¼Œå“ªäº›æƒ…å†µä¸éœ€è¦ï¼Œä»¥åŠå’Œ-Reduce-çš„åŒºåˆ«ï¼Ÿ"><a href="#æè¿°-MapReduce-ä¸­-Combiner-çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œä¸€èˆ¬ä½¿ç”¨æƒ…æ™¯ï¼Œå“ªäº›æƒ…å†µä¸éœ€è¦ï¼Œä»¥åŠå’Œ-Reduce-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="æè¿° MapReduce ä¸­ Combiner çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œä¸€èˆ¬ä½¿ç”¨æƒ…æ™¯ï¼Œå“ªäº›æƒ…å†µä¸éœ€è¦ï¼Œä»¥åŠå’Œ Reduce çš„åŒºåˆ«ï¼Ÿ"></a>æè¿° MapReduce ä¸­ Combiner çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œä¸€èˆ¬ä½¿ç”¨æƒ…æ™¯ï¼Œå“ªäº›æƒ…å†µä¸éœ€è¦ï¼Œä»¥åŠå’Œ Reduce çš„åŒºåˆ«ï¼Ÿ</h3></blockquote><ul><li>Combiner æ˜¯ä¸€ç§ç‰¹æ®Šçš„Reducerï¼Œå®ƒçš„æ„ä¹‰å°±æ˜¯å¯¹æ¯ä¸€ä¸ª MapTask çš„è¾“å‡ºè¿›è¡Œ<strong>å±€éƒ¨æ±‡æ€»</strong>ï¼Œä»¥å‡å°ç½‘ç»œä¼ è¾“é‡ï¼›</li><li>Combiner åœ¨ Mapper ç«¯æ‰§è¡Œä¸€æ¬¡åˆå¹¶ï¼Œç”¨äºå‡å°‘ Mapper è¾“å‡ºåˆ° Reducer çš„æ•°é‡ï¼Œå¯ä»¥è°ƒé«˜æ•ˆç‡ï¼›</li><li>Combiner èƒ½å¤Ÿåº”ç”¨çš„å‰ææ˜¯ä¸èƒ½å½±å“æœ€ç»ˆçš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸”ï¼ŒCombiner çš„è¾“å‡º kv åº”è¯¥è·Ÿ Reducer çš„è¾“å…¥ kv ç±»å‹è¦å¯¹åº”èµ·æ¥ï¼›</li><li>Combiner å’Œ Reducer çš„åŒºåˆ«åœ¨äºè¿è¡Œçš„ä½ç½®ï¼›<ul><li>Combiner æ˜¯åœ¨æ¯ä¸€ä¸ª MapTask æ‰€åœ¨çš„èŠ‚ç‚¹è¿è¡Œï¼›</li><li>Reducer æ˜¯æ¥æ”¶å…¨å±€æ‰€æœ‰ Mapper çš„è¾“å‡ºç»“æœã€‚</li></ul></li></ul><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/mapreduce_combiner.png" alt></p><h2 id="Hadoop-YARN"><a href="#Hadoop-YARN" class="headerlink" title="Hadoop YARN"></a>Hadoop YARN</h2><blockquote><h3 id="ç®€è¿°-hadoop1-x-ä¸-hadoop2-x-çš„æ¶æ„å¼‚åŒ"><a href="#ç®€è¿°-hadoop1-x-ä¸-hadoop2-x-çš„æ¶æ„å¼‚åŒ" class="headerlink" title="ç®€è¿° hadoop1.x ä¸ hadoop2.x çš„æ¶æ„å¼‚åŒ"></a>ç®€è¿° hadoop1.x ä¸ hadoop2.x çš„æ¶æ„å¼‚åŒ</h3></blockquote><ul><li>åŠ å…¥äº† yarn è§£å†³äº†èµ„æºè°ƒåº¦çš„é—®é¢˜;</li><li>åŠ å…¥äº†å¯¹ zookeeper çš„æ”¯æŒå®ç°æ¯”è¾ƒå¯é çš„é«˜å¯ç”¨ã€‚</li></ul><blockquote><h3 id="ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿ-yarnï¼Œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿ-yarnï¼Œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿ yarnï¼Œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿ yarnï¼Œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</h3></blockquote><ul><li>Yarn æœ€ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯è§£å†³è¿è¡Œçš„ç”¨æˆ·ç¨‹åºä¸ yarn æ¡†æ¶å®Œå…¨è§£è€¦ã€‚</li><li>Yarn ä¸Šå¯ä»¥è¿è¡Œå„ç§ç±»å‹çš„åˆ†å¸ƒå¼è¿ç®—ç¨‹åºï¼ˆmapreduce åªæ˜¯å…¶ä¸­çš„ä¸€ç§ï¼‰ï¼Œæ¯”å¦‚ mapreduceã€storm ç¨‹åºï¼Œspark ç¨‹åºç­‰ç­‰ã€‚</li></ul><blockquote><h3 id="yarn-åŒ…æ‹¬ä»€ä¹ˆç»„ä»¶ï¼Œå„è‡ªçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#yarn-åŒ…æ‹¬ä»€ä¹ˆç»„ä»¶ï¼Œå„è‡ªçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="yarn åŒ…æ‹¬ä»€ä¹ˆç»„ä»¶ï¼Œå„è‡ªçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>yarn åŒ…æ‹¬ä»€ä¹ˆç»„ä»¶ï¼Œå„è‡ªçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3></blockquote><p>yarn æ˜¯ä¸€ä¸ªèµ„æºç®¡ç†ã€ä»»åŠ¡è°ƒåº¦çš„æ¡†æ¶ã€‚ä¸»è¦åŒ…å«ä¸‰ä¸ªæ¨¡å—ï¼šResourceMangerã€NodeMangerã€ApplicationMaterã€‚</p><ul><li>ResourceMangerï¼šè´Ÿè´£æ‰€æœ‰èµ„æºçš„ç›‘æ§ã€åˆ†é…å’Œç®¡ç†ï¼›</li><li>ApplicationMaterï¼šè´Ÿè´£æ¯ä¸€ä¸ªå…·ä½“åº”ç”¨ç¨‹åºçš„è°ƒåº¦å’Œåè°ƒï¼Œç”¨æˆ·æäº¤çš„æ¯ä¸ªåº”ç”¨ç¨‹åºå‡åŒ…å«ä¸€ä¸ª ApplicationMaterï¼Œå®ƒå¯ä»¥è¿è¡Œåœ¨ ResourceManger ä»¥å¤–çš„æœºå™¨ä¸Šï¼›</li><li>NodeMangerï¼šè´Ÿè´£æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ç»´æŠ¤ã€‚</li></ul><blockquote><h3 id="Hadoop-æœ‰å“ªäº›è°ƒåº¦å™¨ï¼Ÿ"><a href="#Hadoop-æœ‰å“ªäº›è°ƒåº¦å™¨ï¼Ÿ" class="headerlink" title="Hadoop æœ‰å“ªäº›è°ƒåº¦å™¨ï¼Ÿ"></a>Hadoop æœ‰å“ªäº›è°ƒåº¦å™¨ï¼Ÿ</h3></blockquote><ul><li>é»˜è®¤çš„è°ƒåº¦å™¨ FIFOï¼šHadoop ä¸­é»˜è®¤çš„è°ƒåº¦å™¨ï¼Œå®ƒå…ˆæŒ‰ç…§ä½œä¸šçš„ä¼˜å…ˆçº§é«˜ä½ï¼Œå†æŒ‰ç…§åˆ°è¾¾æ—¶é—´çš„å…ˆåé€‰æ‹©è¢«æ‰§è¡Œçš„ä½œä¸šã€‚</li><li>è®¡ç®—èƒ½åŠ›è°ƒåº¦å™¨ Capacity Schedulerï¼šæ”¯æŒå¤šä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—å¯é…ç½®ä¸€å®šçš„èµ„æºé‡ï¼Œæ¯ä¸ªé˜Ÿåˆ—é‡‡ç”¨ FIFO è°ƒåº¦ç­–ç•¥ï¼Œä¸ºäº†é˜²æ­¢åŒä¸€ä¸ªç”¨æˆ·çš„ä½œä¸šç‹¬å é˜Ÿåˆ—ä¸­çš„èµ„æºï¼Œè¯¥è°ƒåº¦å™¨ä¼šå¯¹åŒä¸€ç”¨æˆ·æäº¤çš„ä½œä¸šæ‰€å èµ„æºé‡è¿›è¡Œé™å®šã€‚è°ƒåº¦æ—¶ï¼Œé¦–å…ˆæŒ‰ä»¥ä¸‹ç­–ç•¥é€‰æ‹©ä¸€ä¸ªåˆé€‚é˜Ÿåˆ—ï¼šè®¡ç®—æ¯ä¸ªé˜Ÿåˆ—ä¸­æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡æ•°ä¸å…¶åº”è¯¥åˆ†å¾—çš„è®¡ç®—èµ„æºä¹‹é—´çš„æ¯”å€¼ï¼Œé€‰æ‹©ä¸€ä¸ªè¯¥æ¯”å€¼æœ€å°çš„é˜Ÿåˆ—ï¼›ç„¶åæŒ‰ä»¥ä¸‹ç­–ç•¥é€‰æ‹©è¯¥é˜Ÿåˆ—ä¸­ä¸€ä¸ªä½œä¸šï¼šæŒ‰ç…§ä½œä¸šä¼˜å…ˆçº§å’Œæäº¤æ—¶é—´é¡ºåºé€‰æ‹©ï¼ŒåŒæ—¶è€ƒè™‘ç”¨æˆ·èµ„æºé‡é™åˆ¶å’Œå†…å­˜é™åˆ¶ã€‚</li><li>å…¬å¹³è°ƒåº¦å™¨ Fair Schedulerï¼šåŒè®¡ç®—èƒ½åŠ›è°ƒåº¦å™¨ç±»ä¼¼ï¼Œæ”¯æŒå¤šé˜Ÿåˆ—å¤šç”¨æˆ·ï¼Œæ¯ä¸ªé˜Ÿåˆ—ä¸­çš„èµ„æºé‡å¯ä»¥é…ç½®ï¼ŒåŒä¸€é˜Ÿåˆ—ä¸­çš„ä½œä¸šå…¬å¹³å…±äº«é˜Ÿåˆ—ä¸­æ‰€æœ‰èµ„æºã€‚å®é™…ä¸Šï¼ŒHadoop çš„è°ƒåº¦å™¨è¿œä¸æ­¢ä»¥ä¸Šä¸‰ç§ï¼Œæœ€è¿‘ï¼Œå‡ºç°äº†å¾ˆå¤šé’ˆå¯¹æ–°å‹åº”ç”¨çš„ Hadoop è°ƒåº¦å™¨ã€‚</li></ul><blockquote><h3 id="ä»€ä¹ˆæ˜¯-Containerï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Containerï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Containerï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Containerï¼Ÿ</h3></blockquote><p>Container æ˜¯ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œç§°ä¹‹ä¸ºå®¹å™¨ï¼ŒåŒ…å«ä»»åŠ¡è¿è¡Œæ—¶æ‰€éœ€çš„èµ„æºï¼ˆåŒ…æ‹¬å†…å­˜ã€ç¡¬ç›˜ã€cpu ç­‰ï¼‰å’Œç¯å¢ƒï¼ˆåŒ…å«å¯åŠ¨å‘½ä»¤ã€ç¯å¢ƒå˜é‡ç­‰ï¼‰ã€‚</p><blockquote><h3 id="yarn-çš„æ‰§è¡Œæµç¨‹ï¼Ÿ"><a href="#yarn-çš„æ‰§è¡Œæµç¨‹ï¼Ÿ" class="headerlink" title="yarn çš„æ‰§è¡Œæµç¨‹ï¼Ÿ"></a>yarn çš„æ‰§è¡Œæµç¨‹ï¼Ÿ</h3></blockquote><ol><li>å®¢æˆ·ç«¯å‘é›†ç¾¤æäº¤ä¸€ä¸ªä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡é¦–å…ˆåˆ° RM ä¸­çš„ AMï¼›</li><li>AM æ”¶åˆ°ä»»åŠ¡åï¼Œä¼šåœ¨é›†ç¾¤ä¸­æ‰¾ä¸€ä¸ª NodeMangerï¼Œåœ¨è¯¥ NodeManger ä¸Šå¯åŠ¨ä¸€ä¸ª APPMaster è¿›ç¨‹ã€‚è¯¥è¿›ç¨‹ç”¨äºæ‰§è¡Œä»»åŠ¡åˆ’åˆ†å’Œä»»åŠ¡ç›‘æ§ï¼›</li><li>AppMaster å¯åŠ¨èµ·æ¥ä¹‹åï¼Œä¼šå‘ RM ä¸­çš„ AM æ³¨å†Œä¿¡æ¯ï¼ŒAPPMaster å‘ RM ä¸‹çš„ ResourceSchedule ç”³è¯·è®¡ç®—ä»»åŠ¡æ‰€éœ€çš„èµ„æºï¼›</li><li>AppMaster ç”³è¯·åˆ°èµ„æºä¹‹åï¼Œä¼šä¸æ‰€æœ‰ NodeManger é€šä¿¡è¦æ±‚ä»–ä»¬å¯åŠ¨æ‰€æœ‰è®¡ç®—ä»»åŠ¡ï¼ˆMap å’Œ Reduceï¼‰ï¼›</li><li>å„ä¸ª NM å¯åŠ¨å¯¹åº”çš„å®¹å™¨ Container ç”¨æ¥æ‰§è¡Œ Map å’Œ Reduce ä»»åŠ¡ï¼›</li><li>å„ä¸ªä»»åŠ¡ä¼šå‘ APPMaster æ±‡æŠ¥è‡ªå·±çš„æ‰§è¡Œè¿›åº¦å’Œæ‰§è¡ŒçŠ¶å†µï¼Œä»¥ä¾¿è®© AppMaster éšæ—¶æŒæ¡å„ä¸ªä»»åŠ¡çš„è¿è¡ŒçŠ¶æ€ï¼Œåœ¨æŸä¸ªä»»åŠ¡å‡ºäº†é—®é¢˜ä¹‹åé‡å¯æ‰§è¡Œè¯¥ä»»åŠ¡ï¼›</li><li>åœ¨æ‰§è¡Œå®Œä¹‹åï¼ŒAPPMaster ä¼šå‘ AM æ±‡æŠ¥ï¼Œä»¥ä¾¿è®© ApplicationManger æ³¨é”€å¹¶å…³é—­è‡ªå·±ï¼Œä½¿å¾—èµ„æºå¾—ä»¥å›æ”¶ã€‚</li></ol><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/bigdata_interview/yarn.png" alt></p><blockquote><h3 id="MapReduce-å®¹é”™æ€§ï¼Ÿ"><a href="#MapReduce-å®¹é”™æ€§ï¼Ÿ" class="headerlink" title="MapReduce å®¹é”™æ€§ï¼Ÿ"></a>MapReduce å®¹é”™æ€§ï¼Ÿ</h3></blockquote><p>1ï¼‰MRAppMaster å®¹é”™æ€§â€ƒ ä¸€æ—¦è¿è¡Œå¤±è´¥ï¼Œç”± YARN çš„ ResourceManager è´Ÿè´£é‡æ–°å¯åŠ¨ï¼Œæœ€å¤šé‡å¯æ¬¡æ•°å¯ç”±ç”¨æˆ·è®¾ç½®ï¼Œé»˜è®¤æ˜¯ 2 æ¬¡ã€‚ä¸€æ—¦è¶…è¿‡æœ€é«˜é‡å¯æ¬¡æ•°ï¼Œåˆ™ä½œä¸šè¿è¡Œå¤±è´¥ã€‚2ï¼‰Map/Reduce Taskâ€ƒ Task Task å‘¨æœŸæ€§å‘ MRAppMaster æ±‡æŠ¥å¿ƒè·³ï¼›ä¸€æ—¦ Task æŒ‚æ‰ï¼Œåˆ™ MRAppMaster å°†ä¸ºä¹‹é‡æ–°ç”³è¯·èµ„æºï¼Œå¹¶è¿è¡Œä¹‹ã€‚æœ€å¤šé‡æ–°è¿è¡Œæ¬¡æ•°å¯ç”±ç”¨æˆ·è®¾ç½®ï¼Œé»˜è®¤ 4 æ¬¡ã€‚</p><blockquote><h3 id="MapReduce-2-x-æ¨æµ‹æ‰§è¡Œç®—æ³•åŠåŸç†ï¼Ÿ"><a href="#MapReduce-2-x-æ¨æµ‹æ‰§è¡Œç®—æ³•åŠåŸç†ï¼Ÿ" class="headerlink" title="MapReduce 2.x æ¨æµ‹æ‰§è¡Œç®—æ³•åŠåŸç†ï¼Ÿ"></a>MapReduce 2.x æ¨æµ‹æ‰§è¡Œç®—æ³•åŠåŸç†ï¼Ÿ</h3></blockquote><ul><li>ä½œä¸šå®Œæˆæ—¶é—´å–å†³äºæœ€æ…¢çš„ä»»åŠ¡å®Œæˆæ—¶é—´<ul><li>ä¸€ä¸ªä½œä¸šç”±è‹¥å¹²ä¸ª Map ä»»åŠ¡å’Œ Reduce ä»»åŠ¡æ„æˆã€‚å› ç¡¬ä»¶è€åŒ–ã€è½¯ä»¶ Bug ç­‰ï¼ŒæŸäº›ä»»åŠ¡å¯èƒ½è¿è¡Œéå¸¸æ…¢ã€‚</li><li>å…¸å‹æ¡ˆä¾‹ï¼šç³»ç»Ÿä¸­æœ‰ 99% çš„ Map ä»»åŠ¡éƒ½å®Œæˆäº†ï¼Œåªæœ‰å°‘æ•°å‡ ä¸ª Map è€æ˜¯è¿›åº¦å¾ˆæ…¢ï¼Œå®Œä¸æˆï¼Œæ€ä¹ˆåŠï¼Ÿ</li></ul></li><li>æ¨æµ‹æ‰§è¡Œæœºåˆ¶<ul><li>å‘ç°æ‹–åè…¿çš„ä»»åŠ¡ï¼Œæ¯”å¦‚æŸä¸ªä»»åŠ¡è¿è¡Œé€Ÿåº¦è¿œæ…¢äºä»»åŠ¡å¹³å‡é€Ÿåº¦ã€‚ä¸ºæ‹–åè…¿ä»»åŠ¡å¯åŠ¨ä¸€ä¸ªå¤‡ä»½ä»»åŠ¡ï¼ŒåŒæ—¶è¿è¡Œã€‚è°å…ˆè¿è¡Œå®Œï¼Œåˆ™é‡‡ç”¨è°çš„ç»“æœã€‚</li></ul></li><li>ä¸èƒ½å¯ç”¨æ¨æµ‹æ‰§è¡Œæœºåˆ¶æƒ…å†µ<ul><li>ä»»åŠ¡é—´å­˜åœ¨ä¸¥é‡çš„è´Ÿè½½å€¾æ–œï¼›</li><li>ç‰¹æ®Šä»»åŠ¡ï¼Œæ¯”å¦‚ä»»åŠ¡å‘æ•°æ®åº“ä¸­å†™æ•°æ®ã€‚</li></ul></li><li><p>ç®—æ³•åŸç†</p><p>å‡è®¾æŸä¸€æ—¶åˆ»ï¼Œä»»åŠ¡ <code>T</code> çš„æ‰§è¡Œè¿›åº¦ä¸º <code>progress</code>ï¼Œåˆ™å¯é€šè¿‡ä¸€å®šçš„ç®—æ³•æ¨æµ‹å‡ºè¯¥ä»»åŠ¡çš„æœ€ç»ˆå®Œæˆæ—¶åˆ» <code>estimateEndTime</code>ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ­¤åˆ»ä¸ºè¯¥ä»»åŠ¡å¯åŠ¨ä¸€ä¸ªå¤‡ä»½ä»»åŠ¡ï¼Œåˆ™å¯æ¨æ–­å‡ºå®ƒå¯èƒ½çš„å®Œæˆæ—¶åˆ» <code>estimateEndTime</code>,äºæ˜¯å¯å¾—å‡ºä»¥ä¸‹å‡ ä¸ªå…¬å¼ï¼š</p><ul><li><code>estimateEndTime = estimatedRunTime + taskStartTime</code></li><li><code>estimatedRunTime = (currentTimestamp - taskStartTime)/progress</code></li><li><code>estimateEndTime = currentTimestamp + averageRunTime</code></li></ul><p>å…¶ä¸­ï¼Œ<code>currentTimestamp</code> ä¸ºå½“å‰æ—¶åˆ»ï¼›<code>taskStartTime</code> ä¸ºè¯¥ä»»åŠ¡çš„å¯åŠ¨æ—¶åˆ»ï¼›<code>averageRunTime</code> ä¸ºå·²ç»æˆåŠŸè¿è¡Œå®Œæˆçš„ä»»åŠ¡çš„å¹³å‡è¿è¡Œæ—¶é—´ã€‚è¿™æ ·ï¼ŒMRv2 æ€»æ˜¯é€‰æ‹© <code>estimateEndTime- estimateEndTime</code> å·®å€¼æœ€å¤§çš„ä»»åŠ¡ï¼Œå¹¶ä¸ºä¹‹å¯åŠ¨å¤‡ä»½ä»»åŠ¡ã€‚ä¸ºäº†é˜²æ­¢å¤§é‡ä»»åŠ¡åŒæ—¶å¯åŠ¨å¤‡ä»½ä»»åŠ¡é€ æˆçš„èµ„æºæµªè´¹ï¼ŒMRv2ä¸ºæ¯ä¸ªä½œä¸šè®¾ç½®äº†åŒæ—¶å¯åŠ¨çš„å¤‡ä»½ä»»åŠ¡æ•°ç›®ä¸Šé™ã€‚</p><p>æ¨æµ‹æ‰§è¡Œæœºåˆ¶å®é™…ä¸Šé‡‡ç”¨äº†ç»å…¸çš„ç®—æ³•ä¼˜åŒ–æ–¹æ³•ï¼šä»¥ç©ºé—´æ¢æ—¶é—´ï¼Œå®ƒåŒæ—¶å¯åŠ¨å¤šä¸ªç›¸åŒä»»åŠ¡å¤„ç†ç›¸åŒçš„æ•°æ®ï¼Œå¹¶è®©è¿™äº›ä»»åŠ¡ç«äº‰ä»¥ç¼©çŸ­æ•°æ®å¤„ç†æ—¶é—´ã€‚æ˜¾ç„¶ï¼Œè¿™ç§æ–¹æ³•éœ€è¦å ç”¨æ›´å¤šçš„è®¡ç®—èµ„æºã€‚åœ¨é›†ç¾¤èµ„æºç´§ç¼ºçš„æƒ…å†µä¸‹ï¼Œåº”åˆç†ä½¿ç”¨è¯¥æœºåˆ¶ï¼Œäº‰å–åœ¨å¤šç”¨å°‘é‡èµ„æºçš„æƒ…å†µä¸‹ï¼Œå‡å°‘ä½œä¸šçš„è®¡ç®—æ—¶é—´ã€‚</p></li></ul><h2 id="Hadoop-è°ƒä¼˜"><a href="#Hadoop-è°ƒä¼˜" class="headerlink" title="Hadoop è°ƒä¼˜"></a>Hadoop è°ƒä¼˜</h2><blockquote><h3 id="MapReduce-è·‘å¾—æ…¢çš„åŸå› ï¼Ÿ"><a href="#MapReduce-è·‘å¾—æ…¢çš„åŸå› ï¼Ÿ" class="headerlink" title="MapReduce è·‘å¾—æ…¢çš„åŸå› ï¼Ÿ"></a>MapReduce è·‘å¾—æ…¢çš„åŸå› ï¼Ÿ</h3></blockquote><p>MapReduce ç¨‹åºæ•ˆç‡çš„ç“¶é¢ˆåœ¨äºä¸¤ç‚¹ï¼š</p><ul><li>è®¡ç®—æœºæ€§èƒ½<ul><li>CPUã€å†…å­˜ã€ç£ç›˜å¥åº·ã€ç½‘ç»œ</li></ul></li><li>I/O æ“ä½œä¼˜åŒ–<ul><li>æ•°æ®å€¾æ–œ</li><li>map å’Œ reduce æ•°è®¾ç½®ä¸åˆç†</li><li>reduce ç­‰å¾…è¿‡ä¹…</li><li>å°æ–‡ä»¶è¿‡å¤š</li><li>å¤§é‡çš„ä¸å¯åˆ†å—çš„è¶…å¤§æ–‡ä»¶</li><li>spill æ¬¡æ•°è¿‡å¤š</li><li>merge æ¬¡æ•°è¿‡å¤šç­‰</li></ul></li></ul><blockquote><h3 id="MapReduce-ä¼˜åŒ–æ–¹æ³•ï¼Ÿ"><a href="#MapReduce-ä¼˜åŒ–æ–¹æ³•ï¼Ÿ" class="headerlink" title="MapReduce ä¼˜åŒ–æ–¹æ³•ï¼Ÿ"></a>MapReduce ä¼˜åŒ–æ–¹æ³•ï¼Ÿ</h3></blockquote><ol><li><p>æ•°æ®è¾“å…¥</p><ul><li>åˆå¹¶å°æ–‡ä»¶ï¼šåœ¨æ‰§è¡Œ mr ä»»åŠ¡å‰å°†å°æ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼Œå¤§é‡çš„å°æ–‡ä»¶ä¼šäº§ç”Ÿå¤§é‡çš„ map ä»»åŠ¡ï¼Œå¢å¤§ map ä»»åŠ¡è£…è½½æ¬¡æ•°ï¼Œè€Œä»»åŠ¡çš„è£…è½½æ¯”è¾ƒè€—æ—¶ï¼Œä»è€Œå¯¼è‡´ mr è¿è¡Œè¾ƒæ…¢ã€‚</li><li>é‡‡ç”¨ CombineFileInputFormat æ¥ä½œä¸ºè¾“å…¥ï¼Œè§£å†³è¾“å…¥ç«¯å¤§é‡å°æ–‡ä»¶åœºæ™¯ã€‚</li></ul></li><li><p>map é˜¶æ®µ</p><ul><li>å‡å°‘ spill æ¬¡æ•°ï¼šé€šè¿‡è°ƒæ•´ <code>io.sort.mb</code> åŠ <code>sort.spill.percent</code>å‚æ•°å€¼ï¼Œå¢å¤§è§¦å‘ spill çš„å†…å­˜ä¸Šé™ï¼Œå‡å°‘ spill æ¬¡æ•°ï¼Œä»è€Œå‡å°‘ç£ç›˜ IOã€‚</li><li>å‡å°‘ merge æ¬¡æ•°ï¼šé€šè¿‡è°ƒæ•´ <code>io.sort.factor</code> å‚æ•°ï¼Œå¢å¤§ merge çš„æ–‡ä»¶æ•°ç›®ï¼Œå‡å°‘ merge çš„æ¬¡æ•°ï¼Œä»è€Œç¼©çŸ­ mr å¤„ç†æ—¶é—´ã€‚</li><li>åœ¨ map ä¹‹åå…ˆè¿›è¡Œ combine å¤„ç†ï¼Œå‡å°‘ I/Oã€‚</li></ul></li><li><p>reduce é˜¶æ®µ</p><ul><li>åˆç†è®¾ç½® map å’Œ reduce æ•°ï¼šä¸¤ä¸ªéƒ½ä¸èƒ½è®¾ç½®å¤ªå°‘ï¼Œä¹Ÿä¸èƒ½è®¾ç½®å¤ªå¤šã€‚å¤ªå°‘ï¼Œä¼šå¯¼è‡´ task ç­‰å¾…ï¼Œå»¶é•¿å¤„ç†æ—¶é—´ï¼›å¤ªå¤šï¼Œä¼šå¯¼è‡´ mapã€reduce ä»»åŠ¡é—´ç«äº‰èµ„æºï¼Œé€ æˆå¤„ç†è¶…æ—¶ç­‰é”™è¯¯ã€‚</li><li>è®¾ç½® mapã€reduce å…±å­˜ï¼šè°ƒæ•´ <code>slowstart.completedmaps</code>å‚æ•°ï¼Œä½¿ map è¿è¡Œåˆ°ä¸€å®šç¨‹åº¦åï¼Œreduce ä¹Ÿå¼€å§‹è¿è¡Œï¼Œå‡å°‘ reduce çš„ç­‰å¾…æ—¶é—´ã€‚</li><li>è§„é¿ä½¿ç”¨ reduceï¼Œå› ä¸º reduce åœ¨ç”¨äºè¿æ¥æ•°æ®é›†çš„æ—¶å€™å°†ä¼šäº§ç”Ÿå¤§é‡çš„ç½‘ç»œæ¶ˆè€—ã€‚</li><li>åˆç†è®¾ç½® reduce ç«¯çš„ bufferï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°æ®è¾¾åˆ°ä¸€ä¸ªé˜ˆå€¼çš„æ—¶å€™ï¼Œbuffer ä¸­çš„æ•°æ®å°±ä¼šå†™å…¥ç£ç›˜ï¼Œç„¶å reduce ä¼šä»ç£ç›˜ä¸­è·å¾—æ‰€æœ‰çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œbuffer å’Œ reduce æ˜¯æ²¡æœ‰ç›´æ¥å…³è”çš„ï¼Œä¸­é—´å¤šä¸ªä¸€ä¸ªå†™ç£ç›˜ -&gt; è¯»ç£ç›˜çš„è¿‡ç¨‹ï¼Œæ—¢ç„¶æœ‰è¿™ä¸ªå¼Šç«¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡å‚æ•°æ¥é…ç½®ï¼Œä½¿å¾— buffer ä¸­çš„ä¸€éƒ¨åˆ†æ•°æ®å¯ä»¥ç›´æ¥è¾“é€åˆ° reduceï¼Œä»è€Œå‡å°‘ IO å¼€é”€ï¼š<code>mapred.job.reduce.input.buffer.percent</code>ï¼Œé»˜è®¤ä¸º 0.0ã€‚å½“å€¼å¤§äº 0 çš„æ—¶å€™ï¼Œä¼šä¿ç•™æŒ‡å®šæ¯”ä¾‹çš„å†…å­˜è¯» buffer ä¸­çš„æ•°æ®ç›´æ¥æ‹¿ç»™ reduce ä½¿ç”¨ã€‚è¿™æ ·ä¸€æ¥ï¼Œè®¾ç½® buffer éœ€è¦å†…å­˜ï¼Œè¯»å–æ•°æ®éœ€è¦å†…å­˜ï¼Œreduce è®¡ç®—ä¹Ÿè¦å†…å­˜ï¼Œæ‰€ä»¥è¦æ ¹æ®ä½œä¸šçš„è¿è¡Œæƒ…å†µè¿›è¡Œè°ƒæ•´ã€‚</li></ul></li><li><p>IOä¼ è¾“</p><ul><li>é‡‡ç”¨æ•°æ®å‹ç¼©çš„æ–¹å¼ï¼Œå‡å°‘ç½‘ç»œ IO çš„çš„æ—¶é—´ã€‚å®‰è£… Snappy å’Œ LZOP å‹ç¼©ç¼–ç å™¨ã€‚</li><li>ä½¿ç”¨ SequenceFile äºŒè¿›åˆ¶æ–‡ä»¶</li></ul></li><li><p>æ•°æ®å€¾æ–œé—®é¢˜</p><ol><li>æ•°æ®å€¾æ–œç°è±¡ï¼š<ul><li>æ•°æ®é¢‘ç‡å€¾æ–œï¼šæŸä¸€ä¸ªåŒºåŸŸçš„æ•°æ®é‡è¦è¿œè¿œå¤§äºå…¶ä»–åŒºåŸŸã€‚</li><li>æ•°æ®å¤§å°å€¾æ–œï¼šéƒ¨åˆ†è®°å½•çš„å¤§å°è¿œè¿œå¤§äºå¹³å‡å€¼ã€‚</li></ul></li><li><p>å¦‚ä½•æ”¶é›†å€¾æ–œæ•°æ®</p><ul><li>åœ¨ reduce æ–¹æ³•ä¸­åŠ å…¥è®°å½• map è¾“å‡ºé”®çš„è¯¦ç»†æƒ…å†µçš„åŠŸèƒ½ã€‚</li></ul><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> MAX_VALUES <span class="token operator">=</span> <span class="token string">"skew.maxvalues"</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">int</span> maxValueThreshold<span class="token punctuation">;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">JobConf</span> job<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    maxValueThreshold <span class="token operator">=</span> job<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span>MAX_VALUES<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">reduce</span><span class="token punctuation">(</span><span class="token class-name">Text</span> key<span class="token punctuation">,</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span><span class="token punctuation">></span></span> values<span class="token punctuation">,</span>                    <span class="token class-name">OutputCollector</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span><span class="token punctuation">,</span> <span class="token class-name">Text</span><span class="token punctuation">></span></span> output<span class="token punctuation">,</span>                    <span class="token class-name">Reporter</span> reporter<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        values<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        i<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>i <span class="token operator">></span> maxValueThreshold<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Received "</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">" values for key "</span> <span class="token operator">+</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li>å‡å°‘æ•°æ®å€¾æ–œçš„æ–¹æ³•<ul><li>æŠ½æ ·å’ŒèŒƒå›´åˆ†åŒºï¼šå¯ä»¥é€šè¿‡å¯¹åŸå§‹æ•°æ®è¿›è¡ŒæŠ½æ ·å¾—åˆ°çš„ç»“æœé›†æ¥é¢„è®¾åˆ†åŒºè¾¹ç•Œå€¼ã€‚</li><li>è‡ªå®šä¹‰åˆ†åŒºï¼šå¦ä¸€ä¸ªæŠ½æ ·å’ŒèŒƒå›´åˆ†åŒºçš„æ›¿ä»£æ–¹æ¡ˆæ˜¯åŸºäºè¾“å‡ºé”®çš„èƒŒæ™¯çŸ¥è¯†è¿›è¡Œè‡ªå®šä¹‰åˆ†åŒºã€‚ä¾‹å¦‚ï¼Œå¦‚æœ map è¾“å‡ºé”®çš„å•è¯æ¥æºäºä¸€æœ¬ä¹¦ã€‚å…¶ä¸­å¤§éƒ¨åˆ†å¿…ç„¶æ˜¯çœç•¥è¯ï¼ˆstopwordï¼‰ã€‚é‚£ä¹ˆå°±å¯ä»¥å°†è‡ªå®šä¹‰åˆ†åŒºå°†è¿™éƒ¨åˆ†çœç•¥è¯å‘é€ç»™å›ºå®šçš„ä¸€éƒ¨åˆ† reduce å®ä¾‹ã€‚è€Œå°†å…¶ä»–çš„éƒ½å‘é€ç»™å‰©ä½™çš„ reduce å®ä¾‹ã€‚</li><li>Combineï¼šä½¿ç”¨ Combine å¯ä»¥å¤§é‡åœ°å‡å°æ•°æ®é¢‘ç‡å€¾æ–œå’Œæ•°æ®å¤§å°å€¾æ–œã€‚åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼ŒCombine çš„ç›®çš„å°±æ˜¯èšåˆå¹¶ç²¾ç®€æ•°æ®ã€‚</li></ul></li></ol></li></ol><blockquote><h3 id="HDFSå°æ–‡ä»¶ä¼˜åŒ–æ–¹æ³•ï¼Ÿ"><a href="#HDFSå°æ–‡ä»¶ä¼˜åŒ–æ–¹æ³•ï¼Ÿ" class="headerlink" title="HDFSå°æ–‡ä»¶ä¼˜åŒ–æ–¹æ³•ï¼Ÿ"></a>HDFSå°æ–‡ä»¶ä¼˜åŒ–æ–¹æ³•ï¼Ÿ</h3></blockquote><ol><li><p>HDFS å°æ–‡ä»¶å¼Šç«¯ï¼š</p><p> HDFS ä¸Šæ¯ä¸ªæ–‡ä»¶éƒ½è¦åœ¨ NameNode ä¸Šå»ºç«‹ä¸€ä¸ªç´¢å¼•ï¼Œè¿™ä¸ªç´¢å¼•çš„å¤§å°çº¦ä¸º 150byteï¼Œè¿™æ ·å½“å°æ–‡ä»¶æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œå°±ä¼šäº§ç”Ÿå¾ˆå¤šçš„ç´¢å¼•æ–‡ä»¶ï¼Œä¸€æ–¹é¢ä¼šå¤§é‡å ç”¨ NameNode çš„å†…å­˜ç©ºé—´ï¼Œå¦ä¸€æ–¹é¢å°±æ˜¯ç´¢å¼•æ–‡ä»¶è¿‡å¤§æ˜¯çš„ç´¢å¼•é€Ÿåº¦å˜æ…¢ã€‚</p></li><li><p>è§£å†³çš„æ–¹å¼ï¼š</p><ul><li>Hadoop æœ¬èº«æä¾›äº†ä¸€äº›æ–‡ä»¶å‹ç¼©çš„æ–¹æ¡ˆã€‚</li><li>ä»ç³»ç»Ÿå±‚é¢æ”¹å˜ç°æœ‰ HDFS å­˜åœ¨çš„é—®é¢˜ï¼Œå…¶å®ä¸»è¦è¿˜æ˜¯å°æ–‡ä»¶çš„åˆå¹¶ï¼Œç„¶åå»ºç«‹æ¯”è¾ƒå¿«é€Ÿçš„ç´¢å¼•ã€‚</li></ul></li><li><p>Hadoop è‡ªå¸¦å°æ–‡ä»¶è§£å†³æ–¹æ¡ˆ</p><ul><li>Hadoop Archiveï¼šæ˜¯ä¸€ä¸ªé«˜æ•ˆåœ°å°†å°æ–‡ä»¶æ”¾å…¥ HDFS å—ä¸­çš„æ–‡ä»¶å­˜æ¡£å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿå°†å¤šä¸ªå°æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ª HAR æ–‡ä»¶ï¼Œè¿™æ ·åœ¨å‡å°‘ NameNode å†…å­˜ä½¿ç”¨çš„åŒæ—¶ã€‚</li><li>Sequence fileï¼šSequence file ç”±ä¸€ç³»åˆ—çš„äºŒè¿›åˆ¶ key/value ç»„æˆï¼Œå¦‚æœä¸º key å°æ–‡ä»¶åï¼Œvalue ä¸ºæ–‡ä»¶å†…å®¹ï¼Œåˆ™å¯ä»¥å°†å¤§æ‰¹å°æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªå¤§æ–‡ä»¶ã€‚</li><li>CombineFileInputFormatï¼šCombineFileInputFormat æ˜¯ä¸€ç§æ–°çš„ inputFormatï¼Œç”¨äºå°†å¤šä¸ªæ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªå•ç‹¬çš„ splitï¼Œå¦å¤–ï¼Œå®ƒä¼šè€ƒè™‘æ•°æ®çš„å­˜å‚¨ä½ç½®ã€‚</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ˜Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤§æ•°æ®é¢è¯•é¢˜è§£æ</title>
      <link href="post/7e24cf66.html"/>
      <url>post/7e24cf66.html</url>
      
        <content type="html"><![CDATA[<h2 id="Hadoop-é¢è¯•é¢˜è§£æ"><a href="#Hadoop-é¢è¯•é¢˜è§£æ" class="headerlink" title="Hadoop é¢è¯•é¢˜è§£æ"></a><a href="/post/2b822834.html">Hadoop é¢è¯•é¢˜è§£æ</a></h2><h2 id="Zookeeper-é¢è¯•é¢˜è§£æ"><a href="#Zookeeper-é¢è¯•é¢˜è§£æ" class="headerlink" title="Zookeeper é¢è¯•é¢˜è§£æ"></a><a href="/post/2f1ea7f2.html">Zookeeper é¢è¯•é¢˜è§£æ</a></h2><h2 id="Flume-é¢è¯•é¢˜è§£æ"><a href="#Flume-é¢è¯•é¢˜è§£æ" class="headerlink" title="Flume é¢è¯•é¢˜è§£æ"></a><a href="/post/5a2a12a6.html">Flume é¢è¯•é¢˜è§£æ</a></h2><h2 id="Kafka-é¢è¯•é¢˜è§£æ"><a href="#Kafka-é¢è¯•é¢˜è§£æ" class="headerlink" title="Kafka é¢è¯•é¢˜è§£æ"></a><a href="/post/89cabcb1.html">Kafka é¢è¯•é¢˜è§£æ</a></h2><h2 id="Hive-é¢è¯•é¢˜è§£æ"><a href="#Hive-é¢è¯•é¢˜è§£æ" class="headerlink" title="Hive é¢è¯•é¢˜è§£æ"></a><a href="/post/62c9bbde.html">Hive é¢è¯•é¢˜è§£æ</a></h2><h2 id="HBase-é¢è¯•é¢˜è§£æ"><a href="#HBase-é¢è¯•é¢˜è§£æ" class="headerlink" title="HBase é¢è¯•é¢˜è§£æ"></a><a href="/post/47457d03.html">HBase é¢è¯•é¢˜è§£æ</a></h2><h2 id="Sqoop-é¢è¯•é¢˜è§£æ"><a href="#Sqoop-é¢è¯•é¢˜è§£æ" class="headerlink" title="Sqoop é¢è¯•é¢˜è§£æ"></a><a href="/post/420614eb.html">Sqoop é¢è¯•é¢˜è§£æ</a></h2>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸŒŠFlume </tag>
            
            <tag> ğŸ˜Hadoop </tag>
            
            <tag> ğŸš¢Sqoop </tag>
            
            <tag> ğŸ‘¨â€ğŸŒ¾Zookeeper </tag>
            
            <tag> ğŸ“«Kafka </tag>
            
            <tag> ğŸHive </tag>
            
            <tag> ğŸ—„ï¸HBase </tag>
            
            <tag> â­Spark </tag>
            
            <tag> ğŸ¿ï¸Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java é¢è¯•é¢˜è§£æï¼ˆJava EEï¼‰</title>
      <link href="post/dc04fa32.html"/>
      <url>post/dc04fa32.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="ä»€ä¹ˆæ˜¯-ORMï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-ORMï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ ORMï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ ORMï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆObject-Relational Mappingï¼Œç®€ç§° ORMï¼‰æ˜¯ä¸€ç§ä¸ºäº†è§£å†³ç¨‹åºçš„é¢å‘å¯¹è±¡æ¨¡å‹ä¸æ•°æ®åº“çš„å…³ç³»æ¨¡å‹äº’ä¸åŒ¹é…é—®é¢˜çš„æŠ€æœ¯ï¼›ç®€å•çš„è¯´ï¼ŒORM æ˜¯é€šè¿‡ä½¿ç”¨æè¿°å¯¹è±¡å’Œæ•°æ®åº“ä¹‹é—´æ˜ å°„çš„å…ƒæ•°æ®ï¼ˆåœ¨ Java ä¸­å¯ä»¥ç”¨ XML æˆ–è€…æ˜¯æ³¨è§£ï¼‰ï¼Œå°†ç¨‹åºä¸­çš„å¯¹è±¡è‡ªåŠ¨æŒä¹…åŒ–åˆ°å…³ç³»æ•°æ®åº“ä¸­æˆ–è€…å°†å…³ç³»æ•°æ®åº“è¡¨ä¸­çš„è¡Œè½¬æ¢æˆ Java å¯¹è±¡ï¼Œå…¶æœ¬è´¨ä¸Šå°±æ˜¯å°†æ•°æ®ä»ä¸€ç§å½¢å¼è½¬æ¢åˆ°å¦å¤–ä¸€ç§å½¢å¼ã€‚</p><blockquote><h3 id="æŒä¹…å±‚è®¾è®¡è¦è€ƒè™‘çš„é—®é¢˜æœ‰å“ªäº›ï¼Ÿä½ ç”¨è¿‡çš„æŒä¹…å±‚æ¡†æ¶æœ‰å“ªäº›ï¼Ÿ"><a href="#æŒä¹…å±‚è®¾è®¡è¦è€ƒè™‘çš„é—®é¢˜æœ‰å“ªäº›ï¼Ÿä½ ç”¨è¿‡çš„æŒä¹…å±‚æ¡†æ¶æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="æŒä¹…å±‚è®¾è®¡è¦è€ƒè™‘çš„é—®é¢˜æœ‰å“ªäº›ï¼Ÿä½ ç”¨è¿‡çš„æŒä¹…å±‚æ¡†æ¶æœ‰å“ªäº›ï¼Ÿ"></a>æŒä¹…å±‚è®¾è®¡è¦è€ƒè™‘çš„é—®é¢˜æœ‰å“ªäº›ï¼Ÿä½ ç”¨è¿‡çš„æŒä¹…å±‚æ¡†æ¶æœ‰å“ªäº›ï¼Ÿ</h3></blockquote><p>ç­”ï¼šæ‰€è°“â€œæŒä¹…â€å°±æ˜¯å°†æ•°æ®ä¿å­˜åˆ°å¯æ‰ç”µå¼å­˜å‚¨è®¾å¤‡ä¸­ä»¥ä¾¿ä»Šåä½¿ç”¨ï¼Œç®€å•çš„è¯´ï¼Œå°±æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°å…³ç³»å‹æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰æä¾›æŒä¹…åŒ–æ”¯æŒçš„è®¾å¤‡ä¸­ã€‚æŒä¹…å±‚å°±æ˜¯ç³»ç»Ÿä¸­ä¸“æ³¨äºå®ç°æ•°æ®æŒä¹…åŒ–çš„ç›¸å¯¹ç‹¬ç«‹çš„å±‚é¢ã€‚</p><p>æŒä¹…å±‚è®¾è®¡çš„ç›®æ ‡åŒ…æ‹¬ï¼š</p><ul><li>æ•°æ®å­˜å‚¨é€»è¾‘çš„åˆ†ç¦»ï¼Œæä¾›æŠ½è±¡åŒ–çš„æ•°æ®è®¿é—®æ¥å£ã€‚</li><li>æ•°æ®è®¿é—®åº•å±‚å®ç°çš„åˆ†ç¦»ï¼Œå¯ä»¥åœ¨ä¸ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹åˆ‡æ¢åº•å±‚å®ç°ã€‚</li><li>èµ„æºç®¡ç†å’Œè°ƒåº¦çš„åˆ†ç¦»ï¼Œåœ¨æ•°æ®è®¿é—®å±‚å®ç°ç»Ÿä¸€çš„èµ„æºè°ƒåº¦ï¼ˆå¦‚ç¼“å­˜æœºåˆ¶ï¼‰ã€‚</li><li>æ•°æ®æŠ½è±¡ï¼Œæä¾›æ›´é¢å‘å¯¹è±¡çš„æ•°æ®æ“ä½œã€‚</li></ul><p>æŒä¹…å±‚æ¡†æ¶æœ‰ï¼š</p><ul><li>Hibernate</li><li>MyBatis</li><li>TopLink</li><li>Guzz</li><li>jOOQ</li><li>Spring Data</li><li>ActiveJDBC</li></ul><blockquote><h3 id="Hibernate-ä¸­-SessionFactory-æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼ŸSession-æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼ˆä¸¤ä¸ªçº¿ç¨‹èƒ½å¤Ÿå…±äº«åŒä¸€ä¸ª-Session-å—ï¼‰ï¼Ÿ"><a href="#Hibernate-ä¸­-SessionFactory-æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼ŸSession-æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼ˆä¸¤ä¸ªçº¿ç¨‹èƒ½å¤Ÿå…±äº«åŒä¸€ä¸ª-Session-å—ï¼‰ï¼Ÿ" class="headerlink" title="Hibernate ä¸­ SessionFactory æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼ŸSession æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼ˆä¸¤ä¸ªçº¿ç¨‹èƒ½å¤Ÿå…±äº«åŒä¸€ä¸ª Session å—ï¼‰ï¼Ÿ"></a>Hibernate ä¸­ SessionFactory æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼ŸSession æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼ˆä¸¤ä¸ªçº¿ç¨‹èƒ½å¤Ÿå…±äº«åŒä¸€ä¸ª Session å—ï¼‰ï¼Ÿ</h3></blockquote><p>ç­”ï¼šSessionFactory å¯¹åº” Hibernate çš„ä¸€ä¸ªæ•°æ®å­˜å‚¨çš„æ¦‚å¿µï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹å¹¶å‘è®¿é—®ã€‚SessionFactory ä¸€èˆ¬åªä¼šåœ¨å¯åŠ¨çš„æ—¶å€™æ„å»ºã€‚å¯¹äºåº”ç”¨ç¨‹åºï¼Œæœ€å¥½å°† SessionFactory é€šè¿‡å•ä¾‹æ¨¡å¼è¿›è¡Œå°è£…ä»¥ä¾¿äºè®¿é—®ã€‚Session æ˜¯ä¸€ä¸ªè½»é‡çº§éçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡ï¼ˆçº¿ç¨‹é—´ä¸èƒ½å…±äº« Sessionï¼‰ï¼Œå®ƒè¡¨ç¤ºä¸æ•°æ®åº“è¿›è¡Œäº¤äº’çš„ä¸€ä¸ªå·¥ä½œå•å…ƒã€‚Session æ˜¯ç”± SessionFactory åˆ›å»ºçš„ï¼Œåœ¨ä»»åŠ¡å®Œæˆä¹‹åå®ƒä¼šè¢«å…³é—­ã€‚Session æ˜¯æŒä¹…å±‚æœåŠ¡å¯¹å¤–æä¾›çš„ä¸»è¦æ¥å£ã€‚Session ä¼šå»¶è¿Ÿè·å–æ•°æ®åº“è¿æ¥ï¼ˆä¹Ÿå°±æ˜¯åœ¨éœ€è¦çš„æ—¶å€™æ‰ä¼šè·å–ï¼‰ã€‚ä¸ºäº†é¿å…åˆ›å»ºå¤ªå¤šçš„ Sessionï¼Œå¯ä»¥ä½¿ç”¨ <code>ThreadLocal</code> å°† Session å’Œå½“å‰çº¿ç¨‹ç»‘å®šåœ¨ä¸€èµ·ï¼Œè¿™æ ·å¯ä»¥è®©åŒä¸€ä¸ªçº¿ç¨‹è·å¾—çš„æ€»æ˜¯åŒä¸€ä¸ª Sessionã€‚Hibernate 3 ä¸­ SessionFactory çš„ <code>getCurrentSession()</code> æ–¹æ³•å°±å¯ä»¥åšåˆ°ã€‚</p><blockquote><h3 id="Hibernate-ä¸­-Session-çš„-load-å’Œ-get-æ–¹æ³•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Hibernate-ä¸­-Session-çš„-load-å’Œ-get-æ–¹æ³•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Hibernate ä¸­ Session çš„ load å’Œ get æ–¹æ³•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Hibernate ä¸­ Session çš„ <code>load</code> å’Œ <code>get</code> æ–¹æ³•çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3></blockquote><p>ç­”ï¼šä¸»è¦æœ‰ä»¥ä¸‹ä¸‰é¡¹åŒºåˆ«ï¼š</p><ol><li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„è®°å½•ï¼Œ<code>get</code> æ–¹æ³•è¿”å› <code>null</code>ï¼Œ<code>load</code> æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ã€‚</li><li><code>get</code> æ–¹æ³•ç›´æ¥è¿”å›å®ä½“ç±»å¯¹è±¡ï¼Œ<code>load</code> æ–¹æ³•è¿”å›å®ä½“ç±»å¯¹è±¡çš„ä»£ç†ã€‚</li><li>åœ¨ Hibernate 3 ä¹‹å‰ï¼Œ<code>get</code> æ–¹æ³•åªåœ¨ä¸€çº§ç¼“å­˜ä¸­è¿›è¡Œæ•°æ®æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„æ•°æ®åˆ™è¶Šè¿‡äºŒçº§ç¼“å­˜ï¼Œç›´æ¥å‘å‡º SQL è¯­å¥å®Œæˆæ•°æ®è¯»å–ï¼›<code>load</code> æ–¹æ³•åˆ™å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–æ•°æ®ï¼›ä» Hibernate 3 å¼€å§‹ï¼Œ<code>get</code> æ–¹æ³•ä¸å†æ˜¯å¯¹äºŒçº§ç¼“å­˜åªå†™ä¸è¯»ï¼Œå®ƒä¹Ÿæ˜¯å¯ä»¥è®¿é—®äºŒçº§ç¼“å­˜çš„ã€‚</li></ol><p><strong>è¯´æ˜ï¼š</strong>å¯¹äº <code>load()</code> æ–¹æ³• Hibernate è®¤ä¸ºè¯¥æ•°æ®åœ¨æ•°æ®åº“ä¸­ä¸€å®šå­˜åœ¨å¯ä»¥æ”¾å¿ƒçš„ä½¿ç”¨ä»£ç†æ¥å®ç°å»¶è¿ŸåŠ è½½ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®å°±æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œé€šè¿‡ <code>get()</code> æ–¹æ³•è·å–çš„æ•°æ®å¯ä»¥ä¸å­˜åœ¨ã€‚</p><blockquote><h3 id="Session-çš„-save-ã€update-ã€merge-ã€lock-ã€saveOrUpdate-å’Œ-persist-æ–¹æ³•åˆ†åˆ«æ˜¯åšä»€ä¹ˆçš„ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Session-çš„-save-ã€update-ã€merge-ã€lock-ã€saveOrUpdate-å’Œ-persist-æ–¹æ³•åˆ†åˆ«æ˜¯åšä»€ä¹ˆçš„ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Session çš„ save()ã€update()ã€merge()ã€lock()ã€saveOrUpdate()å’Œ persist() æ–¹æ³•åˆ†åˆ«æ˜¯åšä»€ä¹ˆçš„ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Session çš„ <code>save()</code>ã€<code>update()</code>ã€<code>merge()</code>ã€<code>lock()</code>ã€<code>saveOrUpdate()</code>å’Œ <code>persist()</code> æ–¹æ³•åˆ†åˆ«æ˜¯åšä»€ä¹ˆçš„ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼šHibernate çš„å¯¹è±¡æœ‰ä¸‰ç§çŠ¶æ€ï¼šç¬æ—¶æ€ï¼ˆtransientï¼‰ã€æŒä¹…æ€ï¼ˆpersistentï¼‰å’Œæ¸¸ç¦»æ€ï¼ˆdetachedï¼‰ï¼Œå¦‚ç¬¬ 135 é¢˜ä¸­çš„å›¾æ‰€ç¤ºã€‚ç¬æ—¶æ€çš„å®ä¾‹å¯ä»¥é€šè¿‡è°ƒç”¨ <code>save()</code>ã€<code>persist()</code> æˆ–è€… <code>saveOrUpdate()</code> æ–¹æ³•å˜æˆæŒä¹…æ€ï¼›æ¸¸ç¦»æ€çš„å®ä¾‹å¯ä»¥é€šè¿‡è°ƒç”¨ <code>update()</code>ã€<code>saveOrUpdate()</code>ã€<code>lock()</code> æˆ–è€… <code>replicate()</code> å˜æˆæŒä¹…æ€ã€‚<code>save()</code> å’Œ <code>persist()</code> å°†ä¼šå¼•å‘ SQL çš„ <code>INSERT</code> è¯­å¥ï¼Œè€Œ <code>update()</code> æˆ– <code>merge()</code> ä¼šå¼•å‘ <code>UPDATE</code> è¯­å¥ã€‚<code>save()</code> å’Œ <code>update()</code> çš„åŒºåˆ«åœ¨äºä¸€ä¸ªæ˜¯å°†ç¬æ—¶æ€å¯¹è±¡å˜æˆæŒä¹…æ€ï¼Œä¸€ä¸ªæ˜¯å°†æ¸¸ç¦»æ€å¯¹è±¡å˜ä¸ºæŒä¹…æ€ã€‚<code>merge()</code> æ–¹æ³•å¯ä»¥å®Œæˆ <code>save()</code> å’Œ <code>update()</code> æ–¹æ³•çš„åŠŸèƒ½ï¼Œå®ƒçš„æ„å›¾æ˜¯å°†æ–°çš„çŠ¶æ€åˆå¹¶åˆ°å·²æœ‰çš„æŒä¹…åŒ–å¯¹è±¡ä¸Šæˆ–åˆ›å»ºæ–°çš„æŒä¹…åŒ–å¯¹è±¡ã€‚å¯¹äº <code>persist()</code> æ–¹æ³•ï¼ŒæŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ï¼š(1)<code>persist()</code> æ–¹æ³•æŠŠä¸€ä¸ªç¬æ—¶æ€çš„å®ä¾‹æŒä¹…åŒ–ï¼Œä½†æ˜¯å¹¶ä¸ä¿è¯æ ‡è¯†ç¬¦è¢«ç«‹åˆ»å¡«å…¥åˆ°æŒä¹…åŒ–å®ä¾‹ä¸­ï¼Œæ ‡è¯†ç¬¦çš„å¡«å…¥å¯èƒ½è¢«æ¨è¿Ÿåˆ° <code>flush</code> çš„æ—¶é—´ï¼›(2)<code>persist()</code> æ–¹æ³•ä¿è¯å½“å®ƒåœ¨ä¸€ä¸ªäº‹åŠ¡å¤–éƒ¨è¢«è°ƒç”¨çš„æ—¶å€™å¹¶ä¸è§¦å‘ä¸€ä¸ª <code>INSERT</code> è¯­å¥ï¼Œå½“éœ€è¦å°è£…ä¸€ä¸ªé•¿ä¼šè¯æµç¨‹çš„æ—¶å€™ï¼Œ<code>persist()</code> æ–¹æ³•æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼›(3)<code>save()</code> æ–¹æ³•ä¸ä¿è¯ç¬¬(2)æ¡ï¼Œå®ƒè¦è¿”å›æ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥å®ƒä¼šç«‹å³æ‰§è¡Œ <code>INSERT</code> è¯­å¥ï¼Œä¸ç®¡æ˜¯åœ¨äº‹åŠ¡å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ã€‚è‡³äº <code>lock()</code> æ–¹æ³•å’Œ <code>update()</code> æ–¹æ³•çš„åŒºåˆ«ï¼Œ<code>update()</code> æ–¹æ³•æ˜¯æŠŠä¸€ä¸ªå·²ç»æ›´æ”¹è¿‡çš„è„±ç®¡çŠ¶æ€çš„å¯¹è±¡å˜æˆæŒä¹…çŠ¶æ€ï¼›<code>lock()</code> æ–¹æ³•æ˜¯æŠŠä¸€ä¸ªæ²¡æœ‰æ›´æ”¹è¿‡çš„è„±ç®¡çŠ¶æ€çš„å¯¹è±¡å˜æˆæŒä¹…çŠ¶æ€ã€‚</p><blockquote><h3 id="é˜è¿°-Session-åŠ è½½å®ä½“å¯¹è±¡çš„è¿‡ç¨‹ã€‚"><a href="#é˜è¿°-Session-åŠ è½½å®ä½“å¯¹è±¡çš„è¿‡ç¨‹ã€‚" class="headerlink" title="é˜è¿° Session åŠ è½½å®ä½“å¯¹è±¡çš„è¿‡ç¨‹ã€‚"></a>é˜è¿° Session åŠ è½½å®ä½“å¯¹è±¡çš„è¿‡ç¨‹ã€‚</h3></blockquote><p>ç­”ï¼šSession åŠ è½½å®ä½“å¯¹è±¡çš„æ­¥éª¤æ˜¯ï¼š</p><ol><li>Session åœ¨è°ƒç”¨æ•°æ®åº“æŸ¥è¯¢åŠŸèƒ½ä¹‹å‰ï¼Œé¦–å…ˆä¼šåœ¨ä¸€çº§ç¼“å­˜ä¸­é€šè¿‡å®ä½“ç±»å‹å’Œä¸»é”®è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœä¸€çº§ç¼“å­˜æŸ¥æ‰¾å‘½ä¸­ä¸”æ•°æ®çŠ¶æ€åˆæ³•ï¼Œåˆ™ç›´æ¥è¿”å›ï¼›</li><li>å¦‚æœä¸€çº§ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œæ¥ä¸‹æ¥ Session ä¼šåœ¨å½“å‰ <code>NonExists</code> è®°å½•ï¼ˆç›¸å½“äºä¸€ä¸ªæŸ¥è¯¢é»‘åå•ï¼Œå¦‚æœå‡ºç°é‡å¤çš„æ— æ•ˆæŸ¥è¯¢å¯ä»¥è¿…é€Ÿåšå‡ºåˆ¤æ–­ï¼Œä»è€Œæå‡æ€§èƒ½ï¼‰ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœ <code>NonExists</code> ä¸­å­˜åœ¨åŒæ ·çš„æŸ¥è¯¢æ¡ä»¶ï¼Œåˆ™è¿”å› <code>null</code>ï¼›</li><li>å¦‚æœä¸€çº§ç¼“å­˜æŸ¥è¯¢å¤±è´¥åˆ™æŸ¥è¯¢äºŒçº§ç¼“å­˜ï¼Œå¦‚æœäºŒçº§ç¼“å­˜å‘½ä¸­åˆ™ç›´æ¥è¿”å›ï¼›</li><li>å¦‚æœä¹‹å‰çš„æŸ¥è¯¢éƒ½æœªå‘½ä¸­ï¼Œåˆ™å‘å‡º SQL è¯­å¥ï¼Œå¦‚æœæŸ¥è¯¢æœªå‘ç°å¯¹åº”è®°å½•åˆ™å°†æ­¤æ¬¡æŸ¥è¯¢æ·»åŠ åˆ° Session çš„ <code>NonExists</code> ä¸­åŠ ä»¥è®°å½•ï¼Œå¹¶è¿”å› <code>null</code>ï¼›</li><li>æ ¹æ®æ˜ å°„é…ç½®å’Œ SQL è¯­å¥å¾—åˆ° <code>ResultSet</code>ï¼Œå¹¶åˆ›å»ºå¯¹åº”çš„å®ä½“å¯¹è±¡ï¼›</li><li>å°†å¯¹è±¡çº³å…¥ Sessionï¼ˆä¸€çº§ç¼“å­˜ï¼‰çš„ç®¡ç†ï¼›</li><li>å¦‚æœæœ‰å¯¹åº”çš„æ‹¦æˆªå™¨ï¼Œåˆ™æ‰§è¡Œæ‹¦æˆªå™¨çš„ <code>onLoad</code> æ–¹æ³•ï¼›</li><li>å¦‚æœå¼€å¯å¹¶è®¾ç½®äº†è¦ä½¿ç”¨äºŒçº§ç¼“å­˜ï¼Œåˆ™å°†æ•°æ®å¯¹è±¡çº³å…¥äºŒçº§ç¼“å­˜ï¼›</li><li>è¿”å›æ•°æ®å¯¹è±¡ã€‚</li></ol><blockquote><h3 id="Query-æ¥å£çš„-list-æ–¹æ³•å’Œ-iterate-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Query-æ¥å£çš„-list-æ–¹æ³•å’Œ-iterate-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Query æ¥å£çš„ list æ–¹æ³•å’Œ iterate æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a><code>Query</code> æ¥å£çš„ <code>list</code> æ–¹æ³•å’Œ <code>iterate</code> æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li><code>list()</code> æ–¹æ³•æ— æ³•åˆ©ç”¨ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼ˆå¯¹ç¼“å­˜åªå†™ä¸è¯»ï¼‰ï¼Œå®ƒåªèƒ½åœ¨å¼€å¯æŸ¥è¯¢ç¼“å­˜çš„å‰æä¸‹ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ï¼›<code>iterate()</code> æ–¹æ³•å¯ä»¥å……åˆ†åˆ©ç”¨ç¼“å­˜ï¼Œå¦‚æœç›®æ ‡æ•°æ®åªè¯»æˆ–è€…è¯»å–é¢‘ç¹ï¼Œä½¿ç”¨ <code>iterate()</code> æ–¹æ³•å¯ä»¥å‡å°‘æ€§èƒ½å¼€é”€ã€‚</li><li><code>list()</code> æ–¹æ³•ä¸ä¼šå¼•èµ· N+1 æŸ¥è¯¢é—®é¢˜ï¼Œè€Œ <code>iterate()</code> æ–¹æ³•å¯èƒ½å¼•èµ· N+1 æŸ¥è¯¢é—®é¢˜</li></ul><p><strong>è¯´æ˜ï¼š</strong>å…³äº N+1 æŸ¥è¯¢é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒ CSDN çš„ä¸€ç¯‡æ–‡ç« <a href="http://blog.csdn.net/xtayhicbladwin/article/details/4739852">ã€Šä»€ä¹ˆæ˜¯N+1æŸ¥è¯¢ã€‹</a></p><blockquote><h3 id="Hibernate-å¦‚ä½•å®ç°åˆ†é¡µæŸ¥è¯¢ï¼Ÿ"><a href="#Hibernate-å¦‚ä½•å®ç°åˆ†é¡µæŸ¥è¯¢ï¼Ÿ" class="headerlink" title="Hibernate å¦‚ä½•å®ç°åˆ†é¡µæŸ¥è¯¢ï¼Ÿ"></a>Hibernate å¦‚ä½•å®ç°åˆ†é¡µæŸ¥è¯¢ï¼Ÿ</h3></blockquote><p>ç­”ï¼šé€šè¿‡ Hibernate å®ç°åˆ†é¡µæŸ¥è¯¢ï¼Œå¼€å‘äººå‘˜åªéœ€è¦æä¾› HQL è¯­å¥ï¼ˆè°ƒç”¨ Session çš„ <code>createQuery()</code> æ–¹æ³•ï¼‰æˆ–æŸ¥è¯¢æ¡ä»¶ï¼ˆè°ƒç”¨ Session çš„ <code>createCriteria()</code> æ–¹æ³•ï¼‰ã€è®¾ç½®æŸ¥è¯¢èµ·å§‹è¡Œæ•°ï¼ˆè°ƒç”¨ <code>Query</code> æˆ– <code>Criteria</code> æ¥å£çš„ <code>setFirstResult()</code> æ–¹æ³•ï¼‰å’Œæœ€å¤§æŸ¥è¯¢è¡Œæ•°ï¼ˆè°ƒç”¨ <code>Query</code> æˆ– <code>Criteria</code> æ¥å£çš„ <code>setMaxResults()</code> æ–¹æ³•ï¼‰ï¼Œå¹¶è°ƒç”¨ <code>Query</code> æˆ– <code>Criteria</code> æ¥å£çš„ <code>list()</code> æ–¹æ³•ï¼ŒHibernate ä¼šè‡ªåŠ¨ç”Ÿæˆåˆ†é¡µæŸ¥è¯¢çš„ SQL è¯­å¥ã€‚</p><blockquote><h3 id="é”æœºåˆ¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿç®€è¿°-Hibernate-çš„æ‚²è§‚é”å’Œä¹è§‚é”æœºåˆ¶ã€‚"><a href="#é”æœºåˆ¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿç®€è¿°-Hibernate-çš„æ‚²è§‚é”å’Œä¹è§‚é”æœºåˆ¶ã€‚" class="headerlink" title="é”æœºåˆ¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿç®€è¿° Hibernate çš„æ‚²è§‚é”å’Œä¹è§‚é”æœºåˆ¶ã€‚"></a>é”æœºåˆ¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿç®€è¿° Hibernate çš„æ‚²è§‚é”å’Œä¹è§‚é”æœºåˆ¶ã€‚</h3></blockquote><p>ç­”ï¼šæœ‰äº›ä¸šåŠ¡é€»è¾‘åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¦æ±‚å¯¹æ•°æ®è¿›è¡Œæ’ä»–æ€§çš„è®¿é—®ï¼Œäºæ˜¯éœ€è¦é€šè¿‡ä¸€äº›æœºåˆ¶ä¿è¯åœ¨æ­¤è¿‡ç¨‹ä¸­æ•°æ®è¢«é”ä½ä¸ä¼šè¢«å¤–ç•Œä¿®æ”¹ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„é”æœºåˆ¶ã€‚</p><p>Hibernate æ”¯æŒæ‚²è§‚é”å’Œä¹è§‚é”ä¸¤ç§é”æœºåˆ¶ã€‚</p><ul><li><p>æ‚²è§‚é”ï¼Œé¡¾åæ€ä¹‰æ‚²è§‚çš„è®¤ä¸ºåœ¨æ•°æ®å¤„ç†è¿‡ç¨‹ä¸­ææœ‰å¯èƒ½å­˜åœ¨ä¿®æ”¹æ•°æ®çš„å¹¶å‘äº‹åŠ¡ï¼ˆåŒ…æ‹¬æœ¬ç³»ç»Ÿçš„å…¶ä»–äº‹åŠ¡æˆ–æ¥è‡ªå¤–éƒ¨ç³»ç»Ÿçš„äº‹åŠ¡ï¼‰ï¼Œäºæ˜¯å°†å¤„ç†çš„æ•°æ®è®¾ç½®ä¸ºé”å®šçŠ¶æ€ã€‚æ‚²è§‚é”å¿…é¡»ä¾èµ–æ•°æ®åº“æœ¬èº«çš„é”æœºåˆ¶æ‰èƒ½çœŸæ­£ä¿è¯æ•°æ®è®¿é—®çš„æ’ä»–æ€§ï¼Œå…³äºæ•°æ®åº“çš„é”æœºåˆ¶å’Œäº‹åŠ¡éš”ç¦»çº§åˆ«åœ¨å‰é¢å·²ç»è®¨è®ºè¿‡äº†ã€‚</p></li><li><p>ä¹è§‚é”ï¼Œé¡¾åæ€ä¹‰ï¼Œå¯¹å¹¶å‘äº‹åŠ¡æŒä¹è§‚æ€åº¦ï¼ˆè®¤ä¸ºå¯¹æ•°æ®çš„å¹¶å‘æ“ä½œä¸ä¼šç»å¸¸æ€§çš„å‘ç”Ÿï¼‰ï¼Œé€šè¿‡æ›´åŠ å®½æ¾çš„é”æœºåˆ¶æ¥è§£å†³ç”±äºæ‚²è§‚é”æ’ä»–æ€§çš„æ•°æ®è®¿é—®å¯¹ç³»ç»Ÿæ€§èƒ½é€ æˆçš„ä¸¥é‡å½±å“ã€‚æœ€å¸¸è§çš„ä¹è§‚é”æ˜¯é€šè¿‡æ•°æ®ç‰ˆæœ¬æ ‡è¯†æ¥å®ç°çš„ï¼Œè¯»å–æ•°æ®æ—¶è·å¾—æ•°æ®çš„ç‰ˆæœ¬å·ï¼Œæ›´æ–°æ•°æ®æ—¶å°†æ­¤ç‰ˆæœ¬å·åŠ  1ï¼Œç„¶åå’Œæ•°æ®åº“è¡¨å¯¹åº”è®°å½•çš„å½“å‰ç‰ˆæœ¬å·è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæäº¤çš„æ•°æ®ç‰ˆæœ¬å·å¤§äºæ•°æ®åº“ä¸­æ­¤è®°å½•çš„å½“å‰ç‰ˆæœ¬å·åˆ™æ›´æ–°æ•°æ®ï¼Œå¦åˆ™è®¤ä¸ºæ˜¯è¿‡æœŸæ•°æ®æ— æ³•æ›´æ–°ã€‚Hibernate ä¸­é€šè¿‡ Session çš„ <code>get()</code> å’Œ <code>load()</code> æ–¹æ³•ä»æ•°æ®åº“ä¸­åŠ è½½å¯¹è±¡æ—¶å¯ä»¥é€šè¿‡å‚æ•°æŒ‡å®šä½¿ç”¨æ‚²è§‚é”ï¼›è€Œä¹è§‚é”å¯ä»¥é€šè¿‡ç»™å®ä½“ç±»åŠ æ•´å‹çš„ç‰ˆæœ¬å­—æ®µå†é€šè¿‡ XML æˆ– <code>@Version</code> æ³¨è§£è¿›è¡Œé…ç½®ã€‚</p></li></ul><p><strong>æ³¨æ„ï¼š</strong>ä½¿ç”¨ä¹è§‚é”ä¼šå¢åŠ äº†ä¸€ä¸ªç‰ˆæœ¬å­—æ®µï¼Œå¾ˆæ˜æ˜¾è¿™éœ€è¦é¢å¤–çš„ç©ºé—´æ¥å­˜å‚¨è¿™ä¸ªç‰ˆæœ¬å­—æ®µï¼Œæµªè´¹äº†ç©ºé—´ï¼Œä½†æ˜¯ä¹è§‚é”ä¼šè®©ç³»ç»Ÿå…·æœ‰æ›´å¥½çš„å¹¶å‘æ€§ï¼Œè¿™æ˜¯å¯¹æ—¶é—´çš„èŠ‚çœã€‚å› æ­¤ä¹è§‚é”ä¹Ÿæ˜¯å…¸å‹çš„ç©ºé—´æ¢æ—¶é—´çš„ç­–ç•¥ã€‚</p><blockquote><h3 id="é˜è¿°å®ä½“å¯¹è±¡çš„ä¸‰ç§çŠ¶æ€ä»¥åŠè½¬æ¢å…³ç³»ã€‚"><a href="#é˜è¿°å®ä½“å¯¹è±¡çš„ä¸‰ç§çŠ¶æ€ä»¥åŠè½¬æ¢å…³ç³»ã€‚" class="headerlink" title="é˜è¿°å®ä½“å¯¹è±¡çš„ä¸‰ç§çŠ¶æ€ä»¥åŠè½¬æ¢å…³ç³»ã€‚"></a>é˜è¿°å®ä½“å¯¹è±¡çš„ä¸‰ç§çŠ¶æ€ä»¥åŠè½¬æ¢å…³ç³»ã€‚</h3></blockquote><p>ç­”ï¼šæœ€æ–°çš„ Hibernate æ–‡æ¡£ä¸­ä¸º Hibernate å¯¹è±¡å®šä¹‰äº†å››ç§çŠ¶æ€ï¼ˆåŸæ¥æ˜¯ä¸‰ç§çŠ¶æ€ï¼Œé¢è¯•çš„æ—¶å€™åŸºæœ¬ä¸Šé—®çš„ä¹Ÿæ˜¯ä¸‰ç§çŠ¶æ€ï¼‰ï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>ç¬æ—¶æ€</strong>ï¼ˆnew, or transientï¼‰ã€<strong>æŒä¹…æ€</strong>ï¼ˆmanaged, or persistentï¼‰ã€<strong>æ¸¸çŠ¶æ€</strong>ï¼ˆdetachedï¼‰å’Œ<strong>ç§»é™¤æ€</strong>ï¼ˆremovedï¼Œä»¥å‰ Hibernate æ–‡æ¡£ä¸­å®šä¹‰çš„ä¸‰ç§çŠ¶æ€ä¸­æ²¡æœ‰ç§»é™¤æ€ï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°±ä»¥å‰çš„Hibernateæ–‡æ¡£ä¸­ç§»é™¤æ€è¢«è§†ä¸ºæ˜¯ç¬æ—¶æ€ã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/135.png" alt></p><ul><li><p>ç¬æ—¶æ€ï¼šå½“ new ä¸€ä¸ªå®ä½“å¯¹è±¡åï¼Œè¿™ä¸ªå¯¹è±¡å¤„äºç¬æ—¶æ€ï¼Œå³è¿™ä¸ªå¯¹è±¡åªæ˜¯ä¸€ä¸ªä¿å­˜ä¸´æ—¶æ•°æ®çš„å†…å­˜åŒºåŸŸï¼Œå¦‚æœæ²¡æœ‰å˜é‡å¼•ç”¨è¿™ä¸ªå¯¹è±¡ï¼Œåˆ™ä¼šè¢« JVM çš„åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚è¿™ä¸ªå¯¹è±¡æ‰€ä¿å­˜çš„æ•°æ®ä¸æ•°æ®åº“æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œé™¤éé€šè¿‡ Session çš„ <code>save()</code>ã€<code>saveOrUpdate()</code>ã€<code>persist()</code>ã€<code>merge()</code> æ–¹æ³•æŠŠç¬æ—¶æ€å¯¹è±¡ä¸æ•°æ®åº“å…³è”ï¼Œå¹¶æŠŠæ•°æ®æ’å…¥æˆ–è€…æ›´æ–°åˆ°æ•°æ®åº“ï¼Œè¿™ä¸ªå¯¹è±¡æ‰è½¬æ¢ä¸ºæŒä¹…æ€å¯¹è±¡ã€‚</p></li><li><p>æŒä¹…æ€ï¼šæŒä¹…æ€å¯¹è±¡çš„å®ä¾‹åœ¨æ•°æ®åº“ä¸­æœ‰å¯¹åº”çš„è®°å½•ï¼Œå¹¶æ‹¥æœ‰ä¸€ä¸ªæŒä¹…åŒ–æ ‡è¯†ï¼ˆIDï¼‰ã€‚å¯¹æŒä¹…æ€å¯¹è±¡è¿›è¡Œ <code>delete</code> æ“ä½œåï¼Œæ•°æ®åº“ä¸­å¯¹åº”çš„è®°å½•å°†è¢«åˆ é™¤ï¼Œé‚£ä¹ˆæŒä¹…æ€å¯¹è±¡ä¸æ•°æ®åº“è®°å½•ä¸å†å­˜åœ¨å¯¹åº”å…³ç³»ï¼ŒæŒä¹…æ€å¯¹è±¡å˜æˆç§»é™¤æ€ï¼ˆå¯ä»¥è§†ä¸ºç¬æ—¶æ€ï¼‰ã€‚æŒä¹…æ€å¯¹è±¡è¢«ä¿®æ”¹å˜æ›´åï¼Œä¸ä¼šé©¬ä¸ŠåŒæ­¥åˆ°æ•°æ®åº“ï¼Œç›´åˆ°æ•°æ®åº“äº‹åŠ¡æäº¤ã€‚</p></li><li><p>æ¸¸ç¦»æ€ï¼šå½“ Session è¿›è¡Œäº† <code>close()</code>ã€<code>clear()</code>ã€<code>evict()</code> æˆ– <code>flush()</code> åï¼Œå®ä½“å¯¹è±¡ä»æŒä¹…æ€å˜æˆæ¸¸ç¦»æ€ï¼Œå¯¹è±¡è™½ç„¶æ‹¥æœ‰æŒä¹…å’Œä¸æ•°æ®åº“å¯¹åº”è®°å½•ä¸€è‡´çš„æ ‡è¯†å€¼ï¼Œä½†æ˜¯å› ä¸ºå¯¹è±¡å·²ç»ä»ä¼šè¯ä¸­æ¸…é™¤æ‰ï¼Œå¯¹è±¡ä¸åœ¨æŒä¹…åŒ–ç®¡ç†ä¹‹å†…ï¼Œæ‰€ä»¥å¤„äºæ¸¸ç¦»æ€ï¼ˆä¹Ÿå«è„±ç®¡æ€ï¼‰ã€‚æ¸¸ç¦»æ€çš„å¯¹è±¡ä¸ä¸´æ—¶çŠ¶æ€å¯¹è±¡æ˜¯ååˆ†ç›¸ä¼¼çš„ï¼Œåªæ˜¯å®ƒè¿˜å«æœ‰æŒä¹…åŒ–æ ‡è¯†ã€‚</p></li></ul><p><strong>æ³¨æ„ï¼š</strong>å…³äºè¿™ä¸ªé—®é¢˜ï¼Œåœ¨ <a href="https://docs.jboss.org/hibernate/orm/4.3/devguide/en-US/html_single/">Hibernate çš„å®˜æ–¹æ–‡æ¡£</a>ä¸­æœ‰æ›´ä¸ºè¯¦ç»†çš„è§£è¯»ã€‚</p><blockquote><h3 id="å¦‚ä½•ç†è§£-Hibernate-çš„å»¶è¿ŸåŠ è½½æœºåˆ¶ï¼Ÿåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»¶è¿ŸåŠ è½½ä¸-Session-å…³é—­çš„çŸ›ç›¾æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ"><a href="#å¦‚ä½•ç†è§£-Hibernate-çš„å»¶è¿ŸåŠ è½½æœºåˆ¶ï¼Ÿåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»¶è¿ŸåŠ è½½ä¸-Session-å…³é—­çš„çŸ›ç›¾æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç†è§£ Hibernate çš„å»¶è¿ŸåŠ è½½æœºåˆ¶ï¼Ÿåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»¶è¿ŸåŠ è½½ä¸ Session å…³é—­çš„çŸ›ç›¾æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ"></a>å¦‚ä½•ç†è§£ Hibernate çš„å»¶è¿ŸåŠ è½½æœºåˆ¶ï¼Ÿåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»¶è¿ŸåŠ è½½ä¸ Session å…³é—­çš„çŸ›ç›¾æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå»¶è¿ŸåŠ è½½å°±æ˜¯å¹¶ä¸æ˜¯åœ¨è¯»å–çš„æ—¶å€™å°±æŠŠæ•°æ®åŠ è½½è¿›æ¥ï¼Œè€Œæ˜¯ç­‰åˆ°ä½¿ç”¨æ—¶å†åŠ è½½ã€‚Hibernate ä½¿ç”¨äº†è™šæ‹Ÿä»£ç†æœºåˆ¶å®ç°å»¶è¿ŸåŠ è½½ï¼Œæˆ‘ä»¬ä½¿ç”¨ Session çš„ <code>load()</code> æ–¹æ³•åŠ è½½æ•°æ®æˆ–è€…ä¸€å¯¹å¤šå…³è”æ˜ å°„åœ¨ä½¿ç”¨å»¶è¿ŸåŠ è½½çš„æƒ…å†µä¸‹ä»ä¸€çš„ä¸€æ–¹åŠ è½½å¤šçš„ä¸€æ–¹ï¼Œå¾—åˆ°çš„éƒ½æ˜¯è™šæ‹Ÿä»£ç†ï¼Œç®€å•çš„è¯´è¿”å›ç»™ç”¨æˆ·çš„å¹¶ä¸æ˜¯å®ä½“æœ¬èº«ï¼Œè€Œæ˜¯å®ä½“å¯¹è±¡çš„ä»£ç†ã€‚ä»£ç†å¯¹è±¡åœ¨ç”¨æˆ·è°ƒç”¨ <code>getter</code> æ–¹æ³•æ—¶æ‰ä¼šå»æ•°æ®åº“åŠ è½½æ•°æ®ã€‚ä½†åŠ è½½æ•°æ®å°±éœ€è¦æ•°æ®åº“è¿æ¥ã€‚è€Œå½“æˆ‘ä»¬æŠŠä¼šè¯å…³é—­æ—¶ï¼Œæ•°æ®åº“è¿æ¥å°±åŒæ—¶å…³é—­äº†ã€‚</p><p>å»¶è¿ŸåŠ è½½ä¸ session å…³é—­çš„çŸ›ç›¾ä¸€èˆ¬å¯ä»¥è¿™æ ·å¤„ç†ï¼š</p><ol><li>å…³é—­å»¶è¿ŸåŠ è½½ç‰¹æ€§ã€‚è¿™ç§æ–¹å¼æ“ä½œèµ·æ¥æ¯”è¾ƒç®€å•ï¼Œå› ä¸º Hibernate çš„å»¶è¿ŸåŠ è½½ç‰¹æ€§æ˜¯å¯ä»¥é€šè¿‡æ˜ å°„æ–‡ä»¶æˆ–è€…æ³¨è§£è¿›è¡Œé…ç½®çš„ï¼Œä½†è¿™ç§è§£å†³æ–¹æ¡ˆå­˜åœ¨æ˜æ˜¾çš„ç¼ºé™·ã€‚é¦–å…ˆï¼Œå‡ºç° &quot;no session or session was closed&quot; é€šå¸¸è¯´æ˜ç³»ç»Ÿä¸­å·²ç»å­˜åœ¨ä¸»å¤–é”®å…³è”ï¼Œå¦‚æœå»æ‰å»¶è¿ŸåŠ è½½çš„è¯ï¼Œæ¯æ¬¡æŸ¥è¯¢çš„å¼€é”€éƒ½ä¼šå˜å¾—å¾ˆå¤§ã€‚</li><li>åœ¨ session å…³é—­ä¹‹å‰å…ˆè·å–éœ€è¦æŸ¥è¯¢çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·æ–¹æ³• <code>Hibernate.isInitialized()</code> åˆ¤æ–­å¯¹è±¡æ˜¯å¦è¢«åŠ è½½ï¼Œå¦‚æœæ²¡æœ‰è¢«åŠ è½½åˆ™å¯ä»¥ä½¿ç”¨ <code>Hibernate.initialize()</code> æ–¹æ³•åŠ è½½å¯¹è±¡ã€‚</li><li>ä½¿ç”¨æ‹¦æˆªå™¨æˆ–è¿‡æ»¤å™¨å»¶é•¿ Session çš„ç”Ÿå‘½å‘¨æœŸç›´åˆ°è§†å›¾è·å¾—æ•°æ®ã€‚Spring æ•´åˆ Hibernate æä¾›çš„ <code>OpenSessionInViewFilter</code> å’Œ <code>OpenSessionInViewInterceptor</code> å°±æ˜¯è¿™ç§åšæ³•ã€‚</li></ol><blockquote><h3 id="ä¸¾ä¸€ä¸ªå¤šå¯¹å¤šå…³è”çš„ä¾‹å­ï¼Œå¹¶è¯´æ˜å¦‚ä½•å®ç°å¤šå¯¹å¤šå…³è”æ˜ å°„ã€‚"><a href="#ä¸¾ä¸€ä¸ªå¤šå¯¹å¤šå…³è”çš„ä¾‹å­ï¼Œå¹¶è¯´æ˜å¦‚ä½•å®ç°å¤šå¯¹å¤šå…³è”æ˜ å°„ã€‚" class="headerlink" title="ä¸¾ä¸€ä¸ªå¤šå¯¹å¤šå…³è”çš„ä¾‹å­ï¼Œå¹¶è¯´æ˜å¦‚ä½•å®ç°å¤šå¯¹å¤šå…³è”æ˜ å°„ã€‚"></a>ä¸¾ä¸€ä¸ªå¤šå¯¹å¤šå…³è”çš„ä¾‹å­ï¼Œå¹¶è¯´æ˜å¦‚ä½•å®ç°å¤šå¯¹å¤šå…³è”æ˜ å°„ã€‚</h3></blockquote><p>ç­”ï¼šä¾‹å¦‚ï¼šå•†å“å’Œè®¢å•ã€å­¦ç”Ÿå’Œè¯¾ç¨‹éƒ½æ˜¯å…¸å‹çš„å¤šå¯¹å¤šå…³ç³»ã€‚å¯ä»¥åœ¨å®ä½“ç±»ä¸Šé€šè¿‡ <code>@ManyToMany</code> æ³¨è§£é…ç½®å¤šå¯¹å¤šå…³è”æˆ–è€…é€šè¿‡æ˜ å°„æ–‡ä»¶ä¸­çš„å’Œæ ‡ç­¾é…ç½®å¤šå¯¹å¤šå…³è”ï¼Œä½†æ˜¯å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯å°†å¤šå¯¹å¤šå…³è”æ˜ å°„è½¬æ¢æˆä¸¤ä¸ªå¤šå¯¹ä¸€å…³è”æ˜ å°„æ¥å®ç°çš„ã€‚</p><blockquote><h3 id="è°ˆä¸€ä¸‹ä½ å¯¹ç»§æ‰¿æ˜ å°„çš„ç†è§£ã€‚"><a href="#è°ˆä¸€ä¸‹ä½ å¯¹ç»§æ‰¿æ˜ å°„çš„ç†è§£ã€‚" class="headerlink" title="è°ˆä¸€ä¸‹ä½ å¯¹ç»§æ‰¿æ˜ å°„çš„ç†è§£ã€‚"></a>è°ˆä¸€ä¸‹ä½ å¯¹ç»§æ‰¿æ˜ å°„çš„ç†è§£ã€‚</h3></blockquote><p>ç­”ï¼šç»§æ‰¿å…³ç³»çš„æ˜ å°„ç­–ç•¥æœ‰ä¸‰ç§ï¼š</p><ul><li>æ¯ä¸ªç»§æ‰¿ç»“æ„ä¸€å¼ è¡¨ï¼ˆtable per class hierarchyï¼‰ï¼Œä¸ç®¡å¤šå°‘ä¸ªå­ç±»éƒ½ç”¨ä¸€å¼ è¡¨ã€‚</li><li>æ¯ä¸ªå­ç±»ä¸€å¼ è¡¨ï¼ˆtable per subclassï¼‰ï¼Œå…¬å…±ä¿¡æ¯æ”¾ä¸€å¼ è¡¨ï¼Œç‰¹æœ‰ä¿¡æ¯æ”¾å•ç‹¬çš„è¡¨ã€‚</li><li>æ¯ä¸ªå…·ä½“ç±»ä¸€å¼ è¡¨ï¼ˆtable per concrete classï¼‰ï¼Œæœ‰å¤šå°‘ä¸ªå­ç±»å°±æœ‰å¤šå°‘å¼ è¡¨ã€‚</li></ul><p>ç¬¬ä¸€ç§æ–¹å¼å±äºå•è¡¨ç­–ç•¥ï¼Œå…¶ä¼˜ç‚¹åœ¨äºæŸ¥è¯¢å­ç±»å¯¹è±¡çš„æ—¶å€™æ— éœ€è¡¨è¿æ¥ï¼ŒæŸ¥è¯¢é€Ÿåº¦å¿«ï¼Œé€‚åˆå¤šæ€æŸ¥è¯¢ï¼›ç¼ºç‚¹æ˜¯å¯èƒ½å¯¼è‡´è¡¨å¾ˆå¤§ã€‚åä¸¤ç§æ–¹å¼å±äºå¤šè¡¨ç­–ç•¥ï¼Œå…¶ä¼˜ç‚¹åœ¨äºæ•°æ®å­˜å‚¨ç´§å‡‘ï¼Œå…¶ç¼ºç‚¹æ˜¯éœ€è¦è¿›è¡Œè¿æ¥æŸ¥è¯¢ï¼Œä¸é€‚åˆå¤šæ€æŸ¥è¯¢ã€‚</p><blockquote><h3 id="ç®€è¿°-Hibernate-å¸¸è§ä¼˜åŒ–ç­–ç•¥ã€‚"><a href="#ç®€è¿°-Hibernate-å¸¸è§ä¼˜åŒ–ç­–ç•¥ã€‚" class="headerlink" title="ç®€è¿° Hibernate å¸¸è§ä¼˜åŒ–ç­–ç•¥ã€‚"></a>ç®€è¿° Hibernate å¸¸è§ä¼˜åŒ–ç­–ç•¥ã€‚</h3></blockquote><p>ç­”ï¼šè¿™ä¸ªé—®é¢˜åº”å½“æŒ‘è‡ªå·±ä½¿ç”¨è¿‡çš„ä¼˜åŒ–ç­–ç•¥å›ç­”ï¼Œå¸¸ç”¨çš„æœ‰ï¼š</p><ul><li>åˆ¶å®šåˆç†çš„ç¼“å­˜ç­–ç•¥ï¼ˆäºŒçº§ç¼“å­˜ã€æŸ¥è¯¢ç¼“å­˜ï¼‰ã€‚</li><li>é‡‡ç”¨åˆç†çš„ Session ç®¡ç†æœºåˆ¶ã€‚</li><li>å°½é‡ä½¿ç”¨å»¶è¿ŸåŠ è½½ç‰¹æ€§ã€‚</li><li>è®¾å®šåˆç†çš„æ‰¹å¤„ç†å‚æ•°ã€‚</li><li>å¦‚æœå¯ä»¥ï¼Œé€‰ç”¨ UUID ä½œä¸ºä¸»é”®ç”Ÿæˆå™¨ã€‚</li><li>å¦‚æœå¯ä»¥ï¼Œé€‰ç”¨åŸºäºç‰ˆæœ¬å·çš„ä¹è§‚é”æ›¿ä»£æ‚²è§‚é”ã€‚</li><li>åœ¨å¼€å‘è¿‡ç¨‹ä¸­, å¼€å¯ <code>hibernate.show_sql</code> é€‰é¡¹æŸ¥çœ‹ç”Ÿæˆçš„ SQLï¼Œä»è€Œäº†è§£åº•å±‚çš„çŠ¶å†µï¼›å¼€å‘å®Œæˆåå…³é—­æ­¤é€‰é¡¹ã€‚</li><li>è€ƒè™‘æ•°æ®åº“æœ¬èº«çš„ä¼˜åŒ–ï¼Œåˆç†çš„ç´¢å¼•ã€æ°å½“çš„æ•°æ®åˆ†åŒºç­–ç•¥ç­‰éƒ½ä¼šå¯¹æŒä¹…å±‚çš„æ€§èƒ½å¸¦æ¥å¯è§‚çš„æå‡ï¼Œä½†è¿™äº›éœ€è¦ä¸“ä¸šçš„ DBAï¼ˆæ•°æ®åº“ç®¡ç†å‘˜ï¼‰æä¾›æ”¯æŒã€‚</li></ul><blockquote><h3 id="è°ˆä¸€è°ˆ-Hibernate-çš„ä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜å’ŒæŸ¥è¯¢ç¼“å­˜ã€‚"><a href="#è°ˆä¸€è°ˆ-Hibernate-çš„ä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜å’ŒæŸ¥è¯¢ç¼“å­˜ã€‚" class="headerlink" title="è°ˆä¸€è°ˆ Hibernate çš„ä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜å’ŒæŸ¥è¯¢ç¼“å­˜ã€‚"></a>è°ˆä¸€è°ˆ Hibernate çš„ä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜å’ŒæŸ¥è¯¢ç¼“å­˜ã€‚</h3></blockquote><p>ç­”ï¼šHibernate çš„ Session æä¾›äº†ä¸€çº§ç¼“å­˜çš„åŠŸèƒ½ï¼Œé»˜è®¤æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œå½“åº”ç”¨ç¨‹åºä¿å­˜æŒä¹…åŒ–å®ä½“ã€ä¿®æ”¹æŒä¹…åŒ–å®ä½“æ—¶ï¼ŒSession å¹¶ä¸ä¼šç«‹å³æŠŠè¿™ç§æ”¹å˜æäº¤åˆ°æ•°æ®åº“ï¼Œè€Œæ˜¯ç¼“å­˜åœ¨å½“å‰çš„ Session ä¸­ï¼Œé™¤éæ˜¾ç¤ºè°ƒç”¨äº† Session çš„ <code>flush()</code> æ–¹æ³•æˆ–é€šè¿‡ <code>close()</code> æ–¹æ³•å…³é—­ Sessionã€‚é€šè¿‡ä¸€çº§ç¼“å­˜ï¼Œå¯ä»¥å‡å°‘ç¨‹åºä¸æ•°æ®åº“çš„äº¤äº’ï¼Œä»è€Œæé«˜æ•°æ®åº“è®¿é—®æ€§èƒ½ã€‚</p><p>SessionFactory çº§åˆ«çš„äºŒçº§ç¼“å­˜æ˜¯å…¨å±€æ€§çš„ï¼Œæ‰€æœ‰çš„ Session å¯ä»¥å…±äº«è¿™ä¸ªäºŒçº§ç¼“å­˜ã€‚ä¸è¿‡äºŒçº§ç¼“å­˜é»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦æ˜¾ç¤ºå¼€å¯å¹¶æŒ‡å®šéœ€è¦ä½¿ç”¨å“ªç§äºŒçº§ç¼“å­˜å®ç°ç±»ï¼ˆå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„å®ç°ï¼‰ã€‚ä¸€æ—¦å¼€å¯äº†äºŒçº§ç¼“å­˜å¹¶è®¾ç½®äº†éœ€è¦ä½¿ç”¨äºŒçº§ç¼“å­˜çš„å®ä½“ç±»ï¼ŒSessionFactory å°±ä¼šç¼“å­˜è®¿é—®è¿‡çš„è¯¥å®ä½“ç±»çš„æ¯ä¸ªå¯¹è±¡ï¼Œé™¤éç¼“å­˜çš„æ•°æ®è¶…å‡ºäº†æŒ‡å®šçš„ç¼“å­˜ç©ºé—´ã€‚</p><p>ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜éƒ½æ˜¯å¯¹æ•´ä¸ªå®ä½“è¿›è¡Œç¼“å­˜ï¼Œä¸ä¼šç¼“å­˜æ™®é€šå±æ€§ï¼Œå¦‚æœå¸Œæœ›å¯¹æ™®é€šå±æ€§è¿›è¡Œç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ã€‚æŸ¥è¯¢ç¼“å­˜æ˜¯å°†HQLæˆ–SQLè¯­å¥ä»¥åŠå®ƒä»¬çš„æŸ¥è¯¢ç»“æœä½œä¸ºé”®å€¼å¯¹è¿›è¡Œç¼“å­˜ï¼Œå¯¹äºåŒæ ·çš„æŸ¥è¯¢å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­è·å–æ•°æ®ã€‚æŸ¥è¯¢ç¼“å­˜é»˜è®¤ä¹Ÿæ˜¯å…³é—­çš„ï¼Œéœ€è¦æ˜¾ç¤ºå¼€å¯ã€‚</p><blockquote><h3 id="Hibernate-ä¸­-DetachedCriteria-ç±»æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"><a href="#Hibernate-ä¸­-DetachedCriteria-ç±»æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="Hibernate ä¸­ DetachedCriteria ç±»æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ"></a>Hibernate ä¸­ DetachedCriteria ç±»æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</h3></blockquote><p>ç­”ï¼šDetachedCriteria å’Œ Criteria çš„ç”¨æ³•åŸºæœ¬ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œä½† Criteria æ˜¯ç”± Session çš„ <code>createCriteria()</code> æ–¹æ³•åˆ›å»ºçš„ï¼Œä¹Ÿå°±æ„å‘³ç€ç¦»å¼€åˆ›å»ºå®ƒçš„ Sessionï¼ŒCriteria å°±æ— æ³•ä½¿ç”¨äº†ã€‚DetachedCriteria ä¸éœ€è¦ Session å°±å¯ä»¥åˆ›å»ºï¼ˆä½¿ç”¨ <code>DetachedCriteria.forClass()</code> æ–¹æ³•åˆ›å»ºï¼‰ï¼Œæ‰€ä»¥é€šå¸¸ä¹Ÿç§°å…¶ä¸ºç¦»çº¿çš„ Criteriaï¼Œåœ¨éœ€è¦è¿›è¡ŒæŸ¥è¯¢æ“ä½œçš„æ—¶å€™å†å’Œ Session ç»‘å®šï¼ˆè°ƒç”¨å…¶ <code>getExecutableCriteria(Session)</code> æ–¹æ³•ï¼‰ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ä¸€ä¸ª DetachedCriteria å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™å’Œä¸åŒçš„ Session è¿›è¡Œç»‘å®šã€‚</p><blockquote><h3 id="OneToMany-æ³¨è§£çš„-mappedBy-å±æ€§æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#OneToMany-æ³¨è§£çš„-mappedBy-å±æ€§æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="@OneToMany æ³¨è§£çš„ mappedBy å±æ€§æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a><code>@OneToMany</code> æ³¨è§£çš„ <code>mappedBy</code> å±æ€§æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>@OneToMany</code> ç”¨æ¥é…ç½®ä¸€å¯¹å¤šå…³è”æ˜ å°„ï¼Œä½†é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€å¯¹å¤šå…³è”æ˜ å°„éƒ½ç”±å¤šçš„ä¸€æ–¹æ¥ç»´æŠ¤å…³è”å…³ç³»ï¼Œä¾‹å¦‚å­¦ç”Ÿå’Œç­çº§ï¼Œåº”è¯¥åœ¨å­¦ç”Ÿç±»ä¸­æ·»åŠ ç­çº§å±æ€§æ¥ç»´æŒå­¦ç”Ÿå’Œç­çº§çš„å…³è”å…³ç³»ï¼ˆåœ¨æ•°æ®åº“ä¸­æ˜¯ç”±å­¦ç”Ÿè¡¨ä¸­çš„å¤–é”®ç­çº§ç¼–å·æ¥ç»´æŠ¤å­¦ç”Ÿè¡¨å’Œç­çº§è¡¨çš„å¤šå¯¹ä¸€å…³ç³»ï¼‰ï¼Œå¦‚æœè¦ä½¿ç”¨åŒå‘å…³è”ï¼Œåœ¨ç­çº§ç±»ä¸­æ·»åŠ ä¸€ä¸ªå®¹å™¨å±æ€§æ¥å­˜æ”¾å­¦ç”Ÿï¼Œå¹¶ä½¿ç”¨ <code>@OneToMany</code> æ³¨è§£è¿›è¡Œæ˜ å°„ï¼Œæ­¤æ—¶ <code>mappedBy</code> å±æ€§å°±éå¸¸é‡è¦ã€‚å¦‚æœä½¿ç”¨ XML è¿›è¡Œé…ç½®ï¼Œå¯ä»¥ç”¨ <code>&lt;set&gt;</code> æ ‡ç­¾çš„ <code>inverse=&quot;true&quot;</code> è®¾ç½®æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚</p><blockquote><h3 id="MyBatis-ä¸­ä½¿ç”¨-å’Œ-ä¹¦å†™å ä½ç¬¦æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#MyBatis-ä¸­ä½¿ç”¨-å’Œ-ä¹¦å†™å ä½ç¬¦æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="MyBatis ä¸­ä½¿ç”¨ # å’Œ $ ä¹¦å†™å ä½ç¬¦æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a><code>MyBatis</code> ä¸­ä½¿ç”¨ <code>#</code> å’Œ <code>$</code> ä¹¦å†™å ä½ç¬¦æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>#</code> å°†ä¼ å…¥çš„æ•°æ®éƒ½å½“æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¼šå¯¹ä¼ å…¥çš„æ•°æ®è‡ªåŠ¨åŠ ä¸Šå¼•å·ï¼›<code>$</code> å°†ä¼ å…¥çš„æ•°æ®ç›´æ¥æ˜¾ç¤ºç”Ÿæˆåœ¨SQLä¸­ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>ä½¿ç”¨ <script type="math/tex">` å ä½ç¬¦å¯èƒ½ä¼šå¯¼è‡´ SQL æ³¨å°„æ”»å‡»ï¼Œèƒ½ç”¨ `#` çš„åœ°æ–¹å°±ä¸è¦ä½¿ç”¨ `</script>ï¼Œå†™ <code>order by</code> å­å¥çš„æ—¶å€™åº”è¯¥ç”¨ <code>$</code> è€Œä¸æ˜¯ <code>#</code>ã€‚</p><blockquote><h3 id="è§£é‡Šä¸€ä¸‹-MyBatis-ä¸­å‘½åç©ºé—´ï¼ˆnamespaceï¼‰çš„ä½œç”¨ã€‚"><a href="#è§£é‡Šä¸€ä¸‹-MyBatis-ä¸­å‘½åç©ºé—´ï¼ˆnamespaceï¼‰çš„ä½œç”¨ã€‚" class="headerlink" title="è§£é‡Šä¸€ä¸‹ MyBatis ä¸­å‘½åç©ºé—´ï¼ˆnamespaceï¼‰çš„ä½œç”¨ã€‚"></a>è§£é‡Šä¸€ä¸‹ MyBatis ä¸­å‘½åç©ºé—´ï¼ˆnamespaceï¼‰çš„ä½œç”¨ã€‚</h3></blockquote><p>ç­”ï¼šåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå¯èƒ½å­˜åœ¨å¤§é‡çš„ SQL è¯­å¥ï¼Œè¿™æ—¶å€™ä¸ºæ¯ä¸ª SQL è¯­å¥èµ·ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ï¼ˆIDï¼‰å°±å˜å¾—å¹¶ä¸å®¹æ˜“äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ MyBatis ä¸­ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªæ˜ å°„æ–‡ä»¶èµ·ä¸€ä¸ªå”¯ä¸€çš„å‘½åç©ºé—´ï¼Œè¿™æ ·å®šä¹‰åœ¨è¿™ä¸ªæ˜ å°„æ–‡ä»¶ä¸­çš„æ¯ä¸ª SQL è¯­å¥å°±æˆäº†å®šä¹‰åœ¨è¿™ä¸ªå‘½åç©ºé—´ä¸­çš„ä¸€ä¸ª IDã€‚åªè¦æˆ‘ä»¬èƒ½å¤Ÿä¿è¯æ¯ä¸ªå‘½åç©ºé—´ä¸­è¿™ä¸ª ID æ˜¯å”¯ä¸€çš„ï¼Œå³ä½¿åœ¨ä¸åŒæ˜ å°„æ–‡ä»¶ä¸­çš„è¯­å¥ ID ç›¸åŒï¼Œä¹Ÿä¸ä¼šå†äº§ç”Ÿå†²çªäº†ã€‚</p><blockquote><h3 id="MyBatis-ä¸­çš„åŠ¨æ€-SQL-æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"><a href="#MyBatis-ä¸­çš„åŠ¨æ€-SQL-æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ" class="headerlink" title="MyBatis ä¸­çš„åŠ¨æ€ SQL æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"></a>MyBatis ä¸­çš„åŠ¨æ€ SQL æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¯¹äºä¸€äº›å¤æ‚çš„æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæŒ‡å®šå¤šä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œä½†æ˜¯è¿™äº›æ¡ä»¶å¯èƒ½å­˜åœ¨ä¹Ÿå¯èƒ½ä¸å­˜åœ¨ï¼Œä¾‹å¦‚åœ¨ 58 åŒåŸä¸Šé¢æ‰¾æˆ¿å­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæŒ‡å®šé¢ç§¯ã€æ¥¼å±‚å’Œæ‰€åœ¨ä½ç½®æ¥æŸ¥æ‰¾æˆ¿æºï¼Œä¹Ÿå¯èƒ½ä¼šæŒ‡å®šé¢ç§¯ã€ä»·æ ¼ã€æˆ·å‹å’Œæ‰€åœ¨ä½ç½®æ¥æŸ¥æ‰¾æˆ¿æºï¼Œæ­¤æ—¶å°±éœ€è¦æ ¹æ®ç”¨æˆ·æŒ‡å®šçš„æ¡ä»¶åŠ¨æ€ç”Ÿæˆ SQL è¯­å¥ã€‚å¦‚æœä¸ä½¿ç”¨æŒä¹…å±‚æ¡†æ¶æˆ‘ä»¬å¯èƒ½éœ€è¦è‡ªå·±æ‹¼è£… SQL è¯­å¥ï¼Œè¿˜å¥½ MyBatis æä¾›äº†åŠ¨æ€ SQL çš„åŠŸèƒ½æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚MyBatis ä¸­ç”¨äºå®ç°åŠ¨æ€ SQL çš„å…ƒç´ ä¸»è¦æœ‰ï¼š</p><ul><li>if</li><li>choose / when / otherwise</li><li>trim</li><li>where</li><li>set</li><li>foreach</li></ul><p>ä¸‹é¢æ˜¯æ˜ å°„æ–‡ä»¶çš„ç‰‡æ®µã€‚</p><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>foo<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Blog<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Blog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>     select * from t_blog where 1 = 1     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title != null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         and title = #&#123;title&#125;     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content != null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         and content = #&#123;content&#125;     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>owner != null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         and owner = #&#123;owner&#125;     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“ç„¶ä¹Ÿå¯ä»¥åƒä¸‹é¢è¿™äº›ä¹¦å†™ã€‚</p><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>foo<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Blog<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Blog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select * from t_blog where 1 = 1     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title != null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            and title = #&#123;title&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content != null<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            and content = #&#123;content&#125;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>otherwise</span><span class="token punctuation">></span></span>            and owner = "owner1"        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>otherwise</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å†çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚</p><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bar<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Blog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    select * from t_blog where id in    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>array<span class="token punctuation">"</span></span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(<span class="token punctuation">"</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>,<span class="token punctuation">"</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        #&#123;item&#125;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="ä»€ä¹ˆæ˜¯-IoC-å’Œ-DIï¼ŸDI-æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-IoC-å’Œ-DIï¼ŸDI-æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ IoC å’Œ DIï¼ŸDI æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ IoC å’Œ DIï¼ŸDI æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h3></blockquote><p>ç­”ï¼šIoC å«æ§åˆ¶åè½¬ï¼Œæ˜¯ Inversion of Control çš„ç¼©å†™ï¼ŒDIï¼ˆDependency Injectionï¼‰å«ä¾èµ–æ³¨å…¥ï¼Œæ˜¯å¯¹ IoC æ›´ç®€å•çš„è¯ é‡Šã€‚æ§åˆ¶åè½¬æ˜¯æŠŠä¼ ç»Ÿä¸Šç”±ç¨‹åºä»£ç ç›´æ¥æ“æ§çš„å¯¹è±¡çš„è°ƒç”¨æƒäº¤ç»™å®¹å™¨ï¼Œé€šè¿‡å®¹å™¨æ¥å®ç°å¯¹è±¡ç»„ä»¶çš„è£…é…å’Œç®¡ç†ã€‚æ‰€è°“çš„â€œæ§åˆ¶åè½¬â€å°±æ˜¯å¯¹ç»„ä»¶å¯¹è±¡æ§åˆ¶æƒçš„è½¬ç§»ï¼Œä»ç¨‹åºä»£ç æœ¬èº«è½¬ç§»åˆ°äº†å¤–éƒ¨å®¹å™¨ï¼Œç”±å®¹å™¨æ¥åˆ›å»ºå¯¹è±¡å¹¶ç®¡ç†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ IoC ä½“ç°äº†å¥½è±ååŸåˆ™ - &quot;Donâ€™t call me, we will call you&quot;ã€‚ä¾èµ–æ³¨å…¥çš„åŸºæœ¬åŸåˆ™æ˜¯åº”ç”¨ç»„ä»¶ä¸åº”è¯¥è´Ÿè´£æŸ¥æ‰¾èµ„æºæˆ–è€…å…¶ä»–ä¾èµ–çš„åä½œå¯¹è±¡ã€‚é…ç½®å¯¹è±¡çš„å·¥ä½œåº”è¯¥ç”±å®¹å™¨è´Ÿè´£ï¼ŒæŸ¥æ‰¾èµ„æºçš„é€»è¾‘åº”è¯¥ä»åº”ç”¨ç»„ä»¶çš„ä»£ç ä¸­æŠ½å–å‡ºæ¥ï¼Œäº¤ç»™å®¹å™¨æ¥å®Œæˆã€‚DI æ˜¯å¯¹ IoC æ›´å‡†ç¡®çš„æè¿°ï¼Œå³ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ç”±å®¹å™¨åœ¨è¿è¡ŒæœŸå†³å®šï¼Œå½¢è±¡çš„æ¥è¯´ï¼Œå³ç”±å®¹å™¨åŠ¨æ€çš„å°†æŸç§ä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¹‹ä¸­ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šä¸€ä¸ªç±» A éœ€è¦ç”¨åˆ°æ¥å£ B ä¸­çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸ºç±» A å’Œæ¥å£ B å»ºç«‹å…³è”æˆ–ä¾èµ–å…³ç³»ï¼Œæœ€åŸå§‹çš„æ–¹æ³•æ˜¯åœ¨ç±» A ä¸­åˆ›å»ºä¸€ä¸ªæ¥å£ B çš„å®ç°ç±» C çš„å®ä¾‹ï¼Œä½†è¿™ç§æ–¹æ³•éœ€è¦å¼€å‘äººå‘˜è‡ªè¡Œç»´æŠ¤äºŒè€…çš„ä¾èµ–å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ä¾èµ–å…³ç³»å‘ç”Ÿå˜åŠ¨çš„æ—¶å€™éœ€è¦ä¿®æ”¹ä»£ç å¹¶é‡æ–°æ„å»ºæ•´ä¸ªç³»ç»Ÿã€‚å¦‚æœé€šè¿‡ä¸€ä¸ªå®¹å™¨æ¥ç®¡ç†è¿™äº›å¯¹è±¡ä»¥åŠå¯¹è±¡çš„ä¾èµ–å…³ç³»ï¼Œåˆ™åªéœ€è¦åœ¨ç±» A ä¸­å®šä¹‰å¥½ç”¨äºå…³è”æ¥å£ B çš„æ–¹æ³•ï¼ˆæ„é€ å™¨æˆ– setter æ–¹æ³•ï¼‰ï¼Œå°†ç±» A å’Œæ¥å£ B çš„å®ç°ç±» C æ”¾å…¥å®¹å™¨ä¸­ï¼Œé€šè¿‡å¯¹å®¹å™¨çš„é…ç½®æ¥å®ç°äºŒè€…çš„å…³è”ã€‚</p><p>ä¾èµ–æ³¨å…¥å¯ä»¥é€šè¿‡ setter æ–¹æ³•æ³¨å…¥ï¼ˆè®¾å€¼æ³¨å…¥ï¼‰ã€æ„é€ å™¨æ³¨å…¥å’Œæ¥å£æ³¨å…¥ä¸‰ç§æ–¹å¼æ¥å®ç°ï¼ŒSpring æ”¯æŒ setter æ³¨å…¥å’Œæ„é€ å™¨æ³¨å…¥ï¼Œé€šå¸¸ä½¿ç”¨æ„é€ å™¨æ³¨å…¥æ¥æ³¨å…¥å¿…é¡»çš„ä¾èµ–å…³ç³»ï¼Œå¯¹äºå¯é€‰çš„ä¾èµ–å…³ç³»ï¼Œåˆ™ setter æ³¨å…¥æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œsetter æ³¨å…¥éœ€è¦ç±»æä¾›æ— å‚æ„é€ å™¨æˆ–è€…æ— å‚çš„é™æ€å·¥å‚æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚</p><blockquote><h3 id="Spring-ä¸­-Bean-çš„ä½œç”¨åŸŸæœ‰å“ªäº›ï¼Ÿ"><a href="#Spring-ä¸­-Bean-çš„ä½œç”¨åŸŸæœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Spring ä¸­ Bean çš„ä½œç”¨åŸŸæœ‰å“ªäº›ï¼Ÿ"></a>Spring ä¸­ Bean çš„ä½œç”¨åŸŸæœ‰å“ªäº›ï¼Ÿ</h3></blockquote><p>ç­”ï¼šåœ¨ Spring çš„æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œä»…æœ‰ä¸¤ä¸ªä½œç”¨åŸŸï¼š<code>singleton</code> å’Œ <code>prototype</code>ï¼Œå‰è€…è¡¨ç¤º Bean ä»¥å•ä¾‹çš„æ–¹å¼å­˜åœ¨ï¼›åè€…è¡¨ç¤ºæ¯æ¬¡ä»å®¹å™¨ä¸­è°ƒç”¨ Bean æ—¶ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œ<code>prototype</code> é€šå¸¸ç¿»è¯‘ä¸ºåŸå‹ã€‚</p><p><strong>è¡¥å……ï¼š</strong>è®¾è®¡æ¨¡å¼ä¸­çš„åˆ›å»ºå‹æ¨¡å¼ä¸­ä¹Ÿæœ‰ä¸€ä¸ªåŸå‹æ¨¡å¼ï¼ŒåŸå‹æ¨¡å¼ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ¨¡å¼ï¼Œä¾‹å¦‚åšä¸€ä¸ªå®¤å†…è®¾è®¡è½¯ä»¶ï¼Œæ‰€æœ‰çš„ç´ æéƒ½åœ¨å·¥å…·ç®±ä¸­ï¼Œè€Œæ¯æ¬¡ä»å·¥å…·ç®±ä¸­å–å‡ºçš„éƒ½æ˜¯ç´ æå¯¹è±¡çš„ä¸€ä¸ªåŸå‹ï¼Œå¯ä»¥é€šè¿‡å¯¹è±¡å…‹éš†æ¥å®ç°åŸå‹æ¨¡å¼ã€‚</p><p>Spring 2.x ä¸­é’ˆå¯¹ <code>WebApplicationContext</code> æ–°å¢äº†3ä¸ªä½œç”¨åŸŸï¼Œåˆ†åˆ«æ˜¯ï¼š<code>request</code>ï¼ˆæ¯æ¬¡HTTPè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Beanï¼‰ã€<code>session</code>ï¼ˆåŒä¸€ä¸ª HttpSession å…±äº«åŒä¸€ä¸ª Beanï¼Œä¸åŒçš„ HttpSession ä½¿ç”¨ä¸åŒçš„ Beanï¼‰å’Œ <code>globalSession</code>ï¼ˆåŒä¸€ä¸ªå…¨å±€ Session å…±äº«ä¸€ä¸ª Beanï¼‰ã€‚</p><p><strong>è¯´æ˜ï¼š</strong>å•ä¾‹æ¨¡å¼å’ŒåŸå‹æ¨¡å¼éƒ½æ˜¯é‡è¦çš„è®¾è®¡æ¨¡å¼ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ— çŠ¶æ€æˆ–çŠ¶æ€ä¸å¯å˜çš„ç±»é€‚åˆä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚åœ¨ä¼ ç»Ÿå¼€å‘ä¸­ï¼Œç”±äº DAO æŒæœ‰ Connection è¿™ä¸ªéçº¿ç¨‹å®‰å…¨å¯¹è±¡å› è€Œæ²¡æœ‰ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼›ä½†åœ¨ Spring ç¯å¢ƒä¸‹ï¼Œæ‰€æœ‰ DAO ç±»å¯¹å¯ä»¥é‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼Œå› ä¸º Spring åˆ©ç”¨ AOP å’Œ Java API ä¸­çš„ ThreadLocal å¯¹éçº¿ç¨‹å®‰å…¨çš„å¯¹è±¡è¿›è¡Œäº†ç‰¹æ®Šå¤„ç†ã€‚</p><p>ThreadLocal ä¸ºè§£å†³å¤šçº¿ç¨‹ç¨‹åºçš„å¹¶å‘é—®é¢˜æä¾›äº†ä¸€ç§æ–°çš„æ€è·¯ã€‚ThreadLocalï¼Œé¡¾åæ€ä¹‰æ˜¯çº¿ç¨‹çš„ä¸€ä¸ªæœ¬åœ°åŒ–å¯¹è±¡ï¼Œå½“å·¥ä½œäºå¤šçº¿ç¨‹ä¸­çš„å¯¹è±¡ä½¿ç”¨ ThreadLocal ç»´æŠ¤å˜é‡æ—¶ï¼ŒThreadLocal ä¸ºæ¯ä¸ªä½¿ç”¨è¯¥å˜é‡çš„çº¿ç¨‹åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½å¯ä»¥ç‹¬ç«‹çš„æ”¹å˜è‡ªå·±çš„å‰¯æœ¬ï¼Œè€Œä¸å½±å“å…¶ä»–çº¿ç¨‹æ‰€å¯¹åº”çš„å‰¯æœ¬ã€‚ä»çº¿ç¨‹çš„è§’åº¦çœ‹ï¼Œè¿™ä¸ªå˜é‡å°±åƒæ˜¯çº¿ç¨‹çš„æœ¬åœ°å˜é‡ã€‚</p><p>ThreadLocal ç±»éå¸¸ç®€å•å¥½ç”¨ï¼Œåªæœ‰å››ä¸ªæ–¹æ³•ï¼Œèƒ½ç”¨ä¸Šçš„ä¹Ÿå°±æ˜¯ä¸‹é¢ä¸‰ä¸ªæ–¹æ³•ï¼š</p><ul><li><code>void set(T value)</code>ï¼šè®¾ç½®å½“å‰çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼ã€‚</li><li><code>T get()</code>ï¼šè·å¾—å½“å‰çº¿ç¨‹æ‰€å¯¹åº”çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼ã€‚</li><li><code>void remove()</code>ï¼šåˆ é™¤å½“å‰çº¿ç¨‹ä¸­çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼ã€‚</li></ul><p>ThreadLocal æ˜¯å¦‚ä½•åšåˆ°ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹ç»´æŠ¤ä¸€ä»½ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬çš„å‘¢ï¼Ÿåœ¨ ThreadLocal ç±»ä¸­æœ‰ä¸€ä¸ª <code>Map</code>ï¼Œé”®ä¸ºçº¿ç¨‹å¯¹è±¡ï¼Œå€¼æ˜¯å…¶çº¿ç¨‹å¯¹åº”çš„å˜é‡çš„å‰¯æœ¬ï¼Œè‡ªå·±è¦æ¨¡æ‹Ÿå®ç°ä¸€ä¸ªThreadLocal ç±»å…¶å®å¹¶ä¸å›°éš¾ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Thread</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">></span></span> map <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedMap</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Thread</span><span class="token punctuation">,</span> <span class="token class-name">T</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">T</span> newValue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        map<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="è§£é‡Šä¸€ä¸‹ä»€ä¹ˆå«-AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼Ÿ"><a href="#è§£é‡Šä¸€ä¸‹ä»€ä¹ˆå«-AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼Ÿ" class="headerlink" title="è§£é‡Šä¸€ä¸‹ä»€ä¹ˆå« AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼Ÿ"></a>è§£é‡Šä¸€ä¸‹ä»€ä¹ˆå« AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼Ÿ</h3></blockquote><p>ç­”ï¼šAOPï¼ˆAspect-Oriented Programmingï¼‰æŒ‡ä¸€ç§ç¨‹åºè®¾è®¡èŒƒå‹ï¼Œè¯¥èŒƒå‹ä»¥ä¸€ç§ç§°ä¸ºåˆ‡é¢ï¼ˆaspectï¼‰çš„è¯­è¨€æ„é€ ä¸ºåŸºç¡€ï¼Œåˆ‡é¢æ˜¯ä¸€ç§æ–°çš„æ¨¡å—åŒ–æœºåˆ¶ï¼Œç”¨æ¥æè¿°åˆ†æ•£åœ¨å¯¹è±¡ã€ç±»æˆ–æ–¹æ³•ä¸­çš„æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆcrosscutting concernï¼‰ã€‚</p><blockquote><h3 id="ä½ æ˜¯å¦‚ä½•ç†è§£â€œæ¨ªåˆ‡å…³æ³¨â€è¿™ä¸ªæ¦‚å¿µçš„ï¼Ÿ"><a href="#ä½ æ˜¯å¦‚ä½•ç†è§£â€œæ¨ªåˆ‡å…³æ³¨â€è¿™ä¸ªæ¦‚å¿µçš„ï¼Ÿ" class="headerlink" title="ä½ æ˜¯å¦‚ä½•ç†è§£â€œæ¨ªåˆ‡å…³æ³¨â€è¿™ä¸ªæ¦‚å¿µçš„ï¼Ÿ"></a>ä½ æ˜¯å¦‚ä½•ç†è§£â€œæ¨ªåˆ‡å…³æ³¨â€è¿™ä¸ªæ¦‚å¿µçš„ï¼Ÿ</h3></blockquote><p>ç­”ï¼šâ€œæ¨ªåˆ‡å…³æ³¨â€æ˜¯ä¼šå½±å“åˆ°æ•´ä¸ªåº”ç”¨ç¨‹åºçš„å…³æ³¨åŠŸèƒ½ï¼Œå®ƒè·Ÿæ­£å¸¸çš„ä¸šåŠ¡é€»è¾‘æ˜¯æ­£äº¤çš„ï¼Œæ²¡æœ‰å¿…ç„¶çš„è”ç³»ï¼Œä½†æ˜¯å‡ ä¹æ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘éƒ½ä¼šæ¶‰åŠåˆ°è¿™äº›å…³æ³¨åŠŸèƒ½ã€‚é€šå¸¸ï¼Œäº‹åŠ¡ã€æ—¥å¿—ã€å®‰å…¨æ€§ç­‰å…³æ³¨å°±æ˜¯åº”ç”¨ä¸­çš„æ¨ªåˆ‡å…³æ³¨åŠŸèƒ½ã€‚</p><blockquote><h3 id="ä½ å¦‚ä½•ç†è§£-AOP-ä¸­çš„è¿æ¥ç‚¹ï¼ˆJoinpointï¼‰ã€åˆ‡ç‚¹ï¼ˆPointcutï¼‰ã€å¢å¼ºï¼ˆAdviceï¼‰ã€å¼•ä»‹ï¼ˆIntroductionï¼‰ã€ç»‡å…¥ï¼ˆWeavingï¼‰ã€åˆ‡é¢ï¼ˆAspectï¼‰è¿™äº›æ¦‚å¿µï¼Ÿ"><a href="#ä½ å¦‚ä½•ç†è§£-AOP-ä¸­çš„è¿æ¥ç‚¹ï¼ˆJoinpointï¼‰ã€åˆ‡ç‚¹ï¼ˆPointcutï¼‰ã€å¢å¼ºï¼ˆAdviceï¼‰ã€å¼•ä»‹ï¼ˆIntroductionï¼‰ã€ç»‡å…¥ï¼ˆWeavingï¼‰ã€åˆ‡é¢ï¼ˆAspectï¼‰è¿™äº›æ¦‚å¿µï¼Ÿ" class="headerlink" title="ä½ å¦‚ä½•ç†è§£ AOP ä¸­çš„è¿æ¥ç‚¹ï¼ˆJoinpointï¼‰ã€åˆ‡ç‚¹ï¼ˆPointcutï¼‰ã€å¢å¼ºï¼ˆAdviceï¼‰ã€å¼•ä»‹ï¼ˆIntroductionï¼‰ã€ç»‡å…¥ï¼ˆWeavingï¼‰ã€åˆ‡é¢ï¼ˆAspectï¼‰è¿™äº›æ¦‚å¿µï¼Ÿ"></a>ä½ å¦‚ä½•ç†è§£ AOP ä¸­çš„è¿æ¥ç‚¹ï¼ˆJoinpointï¼‰ã€åˆ‡ç‚¹ï¼ˆPointcutï¼‰ã€å¢å¼ºï¼ˆAdviceï¼‰ã€å¼•ä»‹ï¼ˆIntroductionï¼‰ã€ç»‡å…¥ï¼ˆWeavingï¼‰ã€åˆ‡é¢ï¼ˆAspectï¼‰è¿™äº›æ¦‚å¿µï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li>è¿æ¥ç‚¹ï¼ˆJoinpointï¼‰ï¼šç¨‹åºæ‰§è¡Œçš„æŸä¸ªç‰¹å®šä½ç½®ï¼ˆå¦‚ï¼šæŸä¸ªæ–¹æ³•è°ƒç”¨å‰ã€è°ƒç”¨åï¼Œæ–¹æ³•æŠ›å‡ºå¼‚å¸¸åï¼‰ã€‚ä¸€ä¸ªç±»æˆ–ä¸€æ®µç¨‹åºä»£ç æ‹¥æœ‰ä¸€äº›å…·æœ‰è¾¹ç•Œæ€§è´¨çš„ç‰¹å®šç‚¹ï¼Œè¿™äº›ä»£ç ä¸­çš„ç‰¹å®šç‚¹å°±æ˜¯è¿æ¥ç‚¹ã€‚Spring ä»…æ”¯æŒæ–¹æ³•çš„è¿æ¥ç‚¹ã€‚</li><li>åˆ‡ç‚¹ï¼ˆPointcutï¼‰ï¼šå¦‚æœè¿æ¥ç‚¹ç›¸å½“äºæ•°æ®ä¸­çš„è®°å½•ï¼Œé‚£ä¹ˆåˆ‡ç‚¹ç›¸å½“äºæŸ¥è¯¢æ¡ä»¶ï¼Œä¸€ä¸ªåˆ‡ç‚¹å¯ä»¥åŒ¹é…å¤šä¸ªè¿æ¥ç‚¹ã€‚Spring AOP çš„è§„åˆ™è§£æå¼•æ“è´Ÿè´£è§£æåˆ‡ç‚¹æ‰€è®¾å®šçš„æŸ¥è¯¢æ¡ä»¶ï¼Œæ‰¾åˆ°å¯¹åº”çš„è¿æ¥ç‚¹ã€‚</li><li>å¢å¼ºï¼ˆAdviceï¼‰ï¼šå¢å¼ºæ˜¯ç»‡å…¥åˆ°ç›®æ ‡ç±»è¿æ¥ç‚¹ä¸Šçš„ä¸€æ®µç¨‹åºä»£ç ã€‚Spring æä¾›çš„å¢å¼ºæ¥å£éƒ½æ˜¯å¸¦æ–¹ä½åçš„ï¼Œå¦‚ï¼šBeforeAdviceã€AfterReturningAdviceã€ThrowsAdvice ç­‰ã€‚å¾ˆå¤šèµ„æ–™ä¸Šå°†å¢å¼ºè¯‘ä¸ºâ€œé€šçŸ¥â€ï¼Œè¿™æ˜æ˜¾æ˜¯ä¸ªè¯ä¸è¾¾æ„çš„ç¿»è¯‘ï¼Œè®©å¾ˆå¤šç¨‹åºå‘˜å›°æƒ‘äº†è®¸ä¹…ã€‚</li></ul><p><strong>è¯´æ˜ï¼š</strong> Advice åœ¨å›½å†…çš„å¾ˆå¤šä¹¦é¢èµ„æ–™ä¸­éƒ½è¢«ç¿»è¯‘æˆ&quot;é€šçŸ¥&quot;ï¼Œä½†æ˜¯å¾ˆæ˜¾ç„¶è¿™ä¸ªç¿»è¯‘æ— æ³•è¡¨è¾¾å…¶æœ¬è´¨ï¼Œæœ‰å°‘é‡çš„è¯»ç‰©ä¸Šå°†è¿™ä¸ªè¯ç¿»è¯‘ä¸º&quot;å¢å¼º&quot;ï¼Œè¿™ä¸ªç¿»è¯‘æ˜¯å¯¹ Advice è¾ƒä¸ºå‡†ç¡®çš„è¯ é‡Šï¼Œæˆ‘ä»¬é€šè¿‡ AOP å°†æ¨ªåˆ‡å…³æ³¨åŠŸèƒ½åŠ åˆ°åŸæœ‰çš„ä¸šåŠ¡é€»è¾‘ä¸Šï¼Œè¿™å°±æ˜¯å¯¹åŸæœ‰ä¸šåŠ¡é€»è¾‘çš„ä¸€ç§å¢å¼ºï¼Œè¿™ç§å¢å¼ºå¯ä»¥æ˜¯å‰ç½®å¢å¼ºã€åç½®å¢å¼ºã€è¿”å›åå¢å¼ºã€æŠ›å¼‚å¸¸æ—¶å¢å¼ºå’ŒåŒ…å›´å‹å¢å¼ºã€‚</p><ul><li>å¼•ä»‹ï¼ˆIntroductionï¼‰ï¼šå¼•ä»‹æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¢å¼ºï¼Œå®ƒä¸ºç±»æ·»åŠ ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚è¿™æ ·ï¼Œå³ä½¿ä¸€ä¸ªä¸šåŠ¡ç±»åŸæœ¬æ²¡æœ‰å®ç°æŸä¸ªæ¥å£ï¼Œé€šè¿‡å¼•ä»‹åŠŸèƒ½ï¼Œå¯ä»¥åŠ¨æ€çš„æœªè¯¥ä¸šåŠ¡ç±»æ·»åŠ æ¥å£çš„å®ç°é€»è¾‘ï¼Œè®©ä¸šåŠ¡ç±»æˆä¸ºè¿™ä¸ªæ¥å£çš„å®ç°ç±»ã€‚</li><li>ç»‡å…¥ï¼ˆWeavingï¼‰ï¼šç»‡å…¥æ˜¯å°†å¢å¼ºæ·»åŠ åˆ°ç›®æ ‡ç±»å…·ä½“è¿æ¥ç‚¹ä¸Šçš„è¿‡ç¨‹ï¼ŒAOP æœ‰ä¸‰ç§ç»‡å…¥æ–¹å¼ï¼š<ul><li>ç¼–è¯‘æœŸç»‡å…¥ï¼šéœ€è¦ç‰¹æ®Šçš„ Java ç¼–è¯‘æœŸï¼ˆä¾‹å¦‚ AspectJ çš„ ajcï¼‰ï¼›</li><li>è£…è½½æœŸç»‡å…¥ï¼šè¦æ±‚ä½¿ç”¨ç‰¹æ®Šçš„ç±»åŠ è½½å™¨ï¼Œåœ¨è£…è½½ç±»çš„æ—¶å€™å¯¹ç±»è¿›è¡Œå¢å¼ºï¼›</li><li>è¿è¡Œæ—¶ç»‡å…¥ï¼šåœ¨è¿è¡Œæ—¶ä¸ºç›®æ ‡ç±»ç”Ÿæˆä»£ç†å®ç°å¢å¼ºã€‚Spring é‡‡ç”¨äº†åŠ¨æ€ä»£ç†çš„æ–¹å¼å®ç°äº†è¿è¡Œæ—¶ç»‡å…¥ï¼Œè€Œ AspectJ é‡‡ç”¨äº†ç¼–è¯‘æœŸç»‡å…¥å’Œè£…è½½æœŸç»‡å…¥çš„æ–¹å¼ã€‚</li></ul></li><li>åˆ‡é¢ï¼ˆAspectï¼‰ï¼šåˆ‡é¢æ˜¯ç”±åˆ‡ç‚¹å’Œå¢å¼ºï¼ˆå¼•ä»‹ï¼‰ç»„æˆçš„ï¼Œå®ƒåŒ…æ‹¬äº†å¯¹æ¨ªåˆ‡å…³æ³¨åŠŸèƒ½çš„å®šä¹‰ï¼Œä¹ŸåŒ…æ‹¬äº†å¯¹è¿æ¥ç‚¹çš„å®šä¹‰ã€‚</li></ul><p><strong>è¡¥å……ï¼š</strong>ä»£ç†æ¨¡å¼æ˜¯ GoF æå‡ºçš„ 23 ç§è®¾è®¡æ¨¡å¼ä¸­æœ€ä¸ºç»å…¸çš„æ¨¡å¼ä¹‹ä¸€ï¼Œä»£ç†æ¨¡å¼æ˜¯å¯¹è±¡çš„ç»“æ„æ¨¡å¼ï¼Œå®ƒç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚ç®€å•çš„è¯´ï¼Œä»£ç†å¯¹è±¡å¯ä»¥å®Œæˆæ¯”åŸå¯¹è±¡æ›´å¤šçš„èŒè´£ï¼Œå½“éœ€è¦ä¸ºåŸå¯¹è±¡æ·»åŠ æ¨ªåˆ‡å…³æ³¨åŠŸèƒ½æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨åŸå¯¹è±¡çš„ä»£ç†å¯¹è±¡ã€‚æˆ‘ä»¬åœ¨æ‰“å¼€ Office ç³»åˆ—çš„ Word æ–‡æ¡£æ—¶ï¼Œå¦‚æœæ–‡æ¡£ä¸­æœ‰æ’å›¾ï¼Œå½“æ–‡æ¡£åˆšåŠ è½½æ—¶ï¼Œæ–‡æ¡£ä¸­çš„æ’å›¾éƒ½åªæ˜¯ä¸€ä¸ªè™šæ¡†å ä½ç¬¦ï¼Œç­‰ç”¨æˆ·çœŸæ­£ç¿»åˆ°æŸé¡µè¦æŸ¥çœ‹è¯¥å›¾ç‰‡æ—¶ï¼Œæ‰ä¼šçœŸæ­£åŠ è½½è¿™å¼ å›¾ï¼Œè¿™å…¶å®å°±æ˜¯å¯¹ä»£ç†æ¨¡å¼çš„ä½¿ç”¨ï¼Œä»£æ›¿çœŸæ­£å›¾ç‰‡çš„è™šæ¡†å°±æ˜¯ä¸€ä¸ªè™šæ‹Ÿä»£ç†ï¼› Hibernate çš„ <code>load</code> æ–¹æ³•ä¹Ÿæ˜¯è¿”å›ä¸€ä¸ªè™šæ‹Ÿä»£ç†å¯¹è±¡ï¼Œç­‰ç”¨æˆ·çœŸæ­£éœ€è¦è®¿é—®å¯¹è±¡çš„å±æ€§æ—¶ï¼Œæ‰å‘æ•°æ®åº“å‘å‡º SQL è¯­å¥è·å¾—çœŸå®å¯¹è±¡ã€‚</p><p>ä¸‹é¢ç”¨ä¸€ä¸ªæ‰¾æªæ‰‹ä»£è€ƒçš„ä¾‹å­æ¼”ç¤ºä»£ç†æ¨¡å¼çš„ä½¿ç”¨ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å‚è€ƒäººå‘˜æ¥å£ */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Candidate</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * ç­”é¢˜     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">answerTheQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æ‡’å­¦ç”Ÿ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LazyStudent</span> <span class="token keyword">implements</span> <span class="token class-name">Candidate</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>        <span class="token comment">// å§“å</span>    <span class="token keyword">public</span> <span class="token class-name">LazyStudent</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">answerTheQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// æ‡’å­¦ç”Ÿåªèƒ½å†™å‡ºè‡ªå·±çš„åå­—ä¸ä¼šç­”é¢˜</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å§“å: "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æªæ‰‹ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Gunman</span> <span class="token keyword">implements</span> <span class="token class-name">Candidate</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Candidate</span> target<span class="token punctuation">;</span>     <span class="token comment">// è¢«ä»£ç†å¯¹è±¡</span>    <span class="token keyword">public</span> <span class="token class-name">Gunman</span><span class="token punctuation">(</span><span class="token class-name">Candidate</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">answerTheQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// æªæ‰‹è¦å†™ä¸Šä»£è€ƒçš„å­¦ç”Ÿçš„å§“å</span>        target<span class="token punctuation">.</span><span class="token function">answerTheQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æªæ‰‹è¦å¸®åŠ©æ‡’å­¦ç”Ÿç­”é¢˜å¹¶äº¤å·</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¥‹ç¬”ç–¾ä¹¦æ­£ç¡®ç­”æ¡ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"äº¤å·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyTest1</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Candidate</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gunman</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LazyStudent</span><span class="token punctuation">(</span><span class="token string">"ç‹å°äºŒ"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        c<span class="token punctuation">.</span><span class="token function">answerTheQuestions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¯´æ˜ï¼š</strong>ä» JDK 1.3 å¼€å§‹ï¼ŒJava æä¾›äº†åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼Œå…è®¸å¼€å‘è€…åœ¨è¿è¡Œæ—¶åˆ›å»ºæ¥å£çš„ä»£ç†å®ä¾‹ï¼Œä¸»è¦åŒ…æ‹¬ <code>Proxy</code> ç±»å’Œ <code>InvocationHandler</code> æ¥å£ã€‚ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨åŠ¨æ€ä»£ç†ä¸º <code>ArrayList</code> ç¼–å†™ä¸€ä¸ªä»£ç†ï¼Œåœ¨æ·»åŠ å’Œåˆ é™¤å…ƒç´ æ—¶ï¼Œåœ¨æ§åˆ¶å°æ‰“å°æ·»åŠ æˆ–åˆ é™¤çš„å…ƒç´ ä»¥åŠ <code>ArrayList</code> çš„å¤§å°ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">InvocationHandler</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ListProxy</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> target<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ListProxy</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>            <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Object</span> retVal <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"["</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">": "</span> <span class="token operator">+</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        retVal <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"[size="</span> <span class="token operator">+</span> target<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> retVal<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Proxy</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyTest2</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> clazz <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ListProxy</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> myProxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListProxy</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> newList <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">)</span>                 <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>clazz<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                 clazz<span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> myProxy<span class="token punctuation">)</span><span class="token punctuation">;</span>        newList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"apple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        newList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"banana"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        newList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"orange"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        newList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"banana"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¯´æ˜ï¼š</strong>ä½¿ç”¨ Java çš„åŠ¨æ€ä»£ç†æœ‰ä¸€ä¸ªå±€é™æ€§å°±æ˜¯ä»£ç†çš„ç±»å¿…é¡»è¦å®ç°æ¥å£ï¼Œè™½ç„¶é¢å‘æ¥å£ç¼–ç¨‹æ˜¯æ¯ä¸ªä¼˜ç§€çš„ Java ç¨‹åºéƒ½çŸ¥é“çš„è§„åˆ™ï¼Œä½†ç°å®å¾€å¾€ä¸å°½å¦‚äººæ„ï¼Œå¯¹äºæ²¡æœ‰å®ç°æ¥å£çš„ç±»å¦‚ä½•ä¸ºå…¶ç”Ÿæˆä»£ç†å‘¢ï¼Ÿç»§æ‰¿ï¼ç»§æ‰¿æ˜¯æœ€ç»å…¸çš„æ‰©å±•å·²æœ‰ä»£ç èƒ½åŠ›çš„æ‰‹æ®µï¼Œè™½ç„¶ç»§æ‰¿å¸¸å¸¸è¢«åˆå­¦è€…æ»¥ç”¨ï¼Œä½†ç»§æ‰¿ä¹Ÿå¸¸å¸¸è¢«è¿›é˜¶çš„ç¨‹åºå‘˜å¿½è§†ã€‚CGLib é‡‡ç”¨éå¸¸åº•å±‚çš„å­—èŠ‚ç ç”ŸæˆæŠ€æœ¯ï¼Œé€šè¿‡ä¸ºä¸€ä¸ªç±»åˆ›å»ºå­ç±»æ¥ç”Ÿæˆä»£ç†ï¼Œå®ƒå¼¥è¡¥äº† Java åŠ¨æ€ä»£ç†çš„ä¸è¶³ï¼Œå› æ­¤ Spring ä¸­åŠ¨æ€ä»£ç†å’Œ CGLib éƒ½æ˜¯åˆ›å»ºä»£ç†çš„é‡è¦æ‰‹æ®µï¼Œå¯¹äºå®ç°äº†æ¥å£çš„ç±»å°±ç”¨åŠ¨æ€ä»£ç†ä¸ºå…¶ç”Ÿæˆä»£ç†ç±»ï¼Œè€Œæ²¡æœ‰å®ç°æ¥å£çš„ç±»å°±ç”¨ CGLib é€šè¿‡ç»§æ‰¿çš„æ–¹å¼ä¸ºå…¶åˆ›å»ºä»£ç†ã€‚</p><blockquote><h3 id="Spring-ä¸­è‡ªåŠ¨è£…é…çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"><a href="#Spring-ä¸­è‡ªåŠ¨è£…é…çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Spring ä¸­è‡ªåŠ¨è£…é…çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ"></a>Spring ä¸­è‡ªåŠ¨è£…é…çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li><code>no</code>ï¼šä¸è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œæ‰‹åŠ¨è®¾ç½® Bean çš„ä¾èµ–å…³ç³»ã€‚</li><li><code>byName</code>ï¼šæ ¹æ® Bean çš„åå­—è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚</li><li><code>byType</code>ï¼šæ ¹æ® Bean çš„ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚</li><li><code>constructor</code>ï¼šç±»ä¼¼äº <code>byType</code>ï¼Œä¸è¿‡æ˜¯åº”ç”¨äºæ„é€ å™¨çš„å‚æ•°ï¼Œå¦‚æœæ­£å¥½æœ‰ä¸€ä¸ª Bean ä¸æ„é€ å™¨çš„å‚æ•°ç±»å‹ç›¸åŒåˆ™å¯ä»¥è‡ªåŠ¨è£…é…ï¼Œå¦åˆ™ä¼šå¯¼è‡´é”™è¯¯ã€‚</li><li><code>autodetect</code>ï¼šå¦‚æœæœ‰é»˜è®¤çš„æ„é€ å™¨ï¼Œåˆ™é€šè¿‡ <code>constructor</code> çš„æ–¹å¼è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œå¦åˆ™ä½¿ç”¨ <code>byType</code> çš„æ–¹å¼è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚</li></ul><p><strong>è¯´æ˜ï¼š</strong>è‡ªåŠ¨è£…é…æ²¡æœ‰è‡ªå®šä¹‰è£…é…æ–¹å¼é‚£ä¹ˆç²¾ç¡®ï¼Œè€Œä¸”ä¸èƒ½è‡ªåŠ¨è£…é…ç®€å•å±æ€§ï¼ˆåŸºæœ¬ç±»å‹ã€å­—ç¬¦ä¸²ç­‰ï¼‰ï¼Œåœ¨ä½¿ç”¨æ—¶åº”æ³¨æ„ã€‚</p><blockquote><h3 id="Spring-ä¸­å¦‚ä½•ä½¿ç”¨æ³¨è§£æ¥é…ç½®-Beanï¼Ÿæœ‰å“ªäº›ç›¸å…³çš„æ³¨è§£ï¼Ÿ"><a href="#Spring-ä¸­å¦‚ä½•ä½¿ç”¨æ³¨è§£æ¥é…ç½®-Beanï¼Ÿæœ‰å“ªäº›ç›¸å…³çš„æ³¨è§£ï¼Ÿ" class="headerlink" title="Spring ä¸­å¦‚ä½•ä½¿ç”¨æ³¨è§£æ¥é…ç½® Beanï¼Ÿæœ‰å“ªäº›ç›¸å…³çš„æ³¨è§£ï¼Ÿ"></a>Spring ä¸­å¦‚ä½•ä½¿ç”¨æ³¨è§£æ¥é…ç½® Beanï¼Ÿæœ‰å“ªäº›ç›¸å…³çš„æ³¨è§£ï¼Ÿ</h3></blockquote><p>ç­”ï¼šé¦–å…ˆéœ€è¦åœ¨ Spring é…ç½®æ–‡ä»¶ä¸­å¢åŠ å¦‚ä¸‹é…ç½®ï¼š</p><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.example<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ç„¶åå¯ä»¥ç”¨ <code>@Component</code>ã€<code>@Controller</code>ã€<code>@Service</code>ã€<code>@Repository</code> æ³¨è§£æ¥æ ‡æ³¨éœ€è¦ç”± Spring IoC å®¹å™¨è¿›è¡Œå¯¹è±¡æ‰˜ç®¡çš„ç±»ã€‚è¿™å‡ ä¸ªæ³¨è§£æ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œåªä¸è¿‡ <code>@Controller</code> é€šå¸¸ç”¨äºæ§åˆ¶å™¨ï¼Œ<code>@Service</code> é€šå¸¸ç”¨äºä¸šåŠ¡é€»è¾‘ç±»ï¼Œ<code>@Repository</code> é€šå¸¸ç”¨äºä»“å‚¨ç±»ï¼ˆä¾‹å¦‚æˆ‘ä»¬çš„ DAO å®ç°ç±»ï¼‰ï¼Œæ™®é€šçš„ç±»ç”¨ <code>@Component</code> æ¥æ ‡æ³¨ã€‚</p><blockquote><h3 id="Spring-æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹æœ‰å“ªäº›ï¼Ÿä½ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å“ªç§æ–¹å¼ï¼Ÿ"><a href="#Spring-æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹æœ‰å“ªäº›ï¼Ÿä½ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å“ªç§æ–¹å¼ï¼Ÿ" class="headerlink" title="Spring æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹æœ‰å“ªäº›ï¼Ÿä½ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å“ªç§æ–¹å¼ï¼Ÿ"></a>Spring æ”¯æŒçš„äº‹åŠ¡ç®¡ç†ç±»å‹æœ‰å“ªäº›ï¼Ÿä½ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å“ªç§æ–¹å¼ï¼Ÿ</h3></blockquote><p>ç­”ï¼šSpring æ”¯æŒ<strong>ç¼–ç¨‹å¼</strong>äº‹åŠ¡ç®¡ç†å’Œ<strong>å£°æ˜å¼</strong>äº‹åŠ¡ç®¡ç†ã€‚è®¸å¤š Spring æ¡†æ¶çš„ç”¨æˆ·é€‰æ‹©å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œå› ä¸ºè¿™ç§æ–¹å¼å’Œåº”ç”¨ç¨‹åºçš„å…³è”è¾ƒå°‘ï¼Œå› æ­¤æ›´åŠ ç¬¦åˆè½»é‡çº§å®¹å™¨çš„æ¦‚å¿µã€‚å£°æ˜å¼äº‹åŠ¡ç®¡ç†è¦ä¼˜äºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œå°½ç®¡åœ¨çµæ´»æ€§æ–¹é¢å®ƒå¼±äºç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†ï¼Œå› ä¸ºç¼–ç¨‹å¼äº‹åŠ¡å…è®¸ä½ é€šè¿‡ä»£ç æ§åˆ¶ä¸šåŠ¡ã€‚</p><p>äº‹åŠ¡åˆ†ä¸º<strong>å…¨å±€äº‹åŠ¡</strong>å’Œ<strong>å±€éƒ¨äº‹åŠ¡</strong>ã€‚å…¨å±€äº‹åŠ¡ç”±åº”ç”¨æœåŠ¡å™¨ç®¡ç†ï¼Œéœ€è¦åº•å±‚æœåŠ¡å™¨ JTA æ”¯æŒï¼ˆå¦‚ WebLogicã€WildFly ç­‰ï¼‰ã€‚å±€éƒ¨äº‹åŠ¡å’Œåº•å±‚é‡‡ç”¨çš„æŒä¹…åŒ–æ–¹æ¡ˆæœ‰å…³ï¼Œä¾‹å¦‚ä½¿ç”¨ JDBC è¿›è¡ŒæŒä¹…åŒ–æ—¶ï¼Œéœ€è¦ä½¿ç”¨ Connetion å¯¹è±¡æ¥æ“ä½œäº‹åŠ¡ï¼›è€Œé‡‡ç”¨ Hibernate è¿›è¡ŒæŒä¹…åŒ–æ—¶ï¼Œéœ€è¦ä½¿ç”¨ Session å¯¹è±¡æ¥æ“ä½œäº‹åŠ¡ã€‚</p><p>Spring æä¾›äº†å¦‚ä¸‹æ‰€ç¤ºçš„äº‹åŠ¡ç®¡ç†å™¨ã€‚</p><div class="table-container"><table><thead><tr><th>äº‹åŠ¡ç®¡ç†å™¨å®ç°ç±»</th><th>ç›®æ ‡å¯¹è±¡</th></tr></thead><tbody><tr><td>DataSourceTransactionManager</td><td>æ³¨å…¥ DataSource</td></tr><tr><td>HibernateTransactionManager</td><td>æ³¨å…¥ SessionFactory</td></tr><tr><td>JdoTransactionManager</td><td>ç®¡ç† JDO äº‹åŠ¡</td></tr><tr><td>JtaTransactionManager</td><td>ä½¿ç”¨ JTA ç®¡ç†äº‹åŠ¡</td></tr><tr><td>PersistenceBrokerTransactionManager</td><td>ç®¡ç† Apache çš„ OJB äº‹åŠ¡</td></tr></tbody></table></div><p>è¿™äº›äº‹åŠ¡çš„çˆ¶æ¥å£éƒ½æ˜¯ <code>PlatformTransactionManager</code>ã€‚Spring çš„äº‹åŠ¡ç®¡ç†æœºåˆ¶æ˜¯ä¸€ç§å…¸å‹çš„ç­–ç•¥æ¨¡å¼ï¼Œ<code>PlatformTransactionManager</code> ä»£è¡¨äº‹åŠ¡ç®¡ç†æ¥å£ï¼Œè¯¥æ¥å£å®šä¹‰äº†ä¸‰ä¸ªæ–¹æ³•ï¼Œè¯¥æ¥å£å¹¶ä¸çŸ¥é“åº•å±‚å¦‚ä½•ç®¡ç†äº‹åŠ¡ï¼Œä½†æ˜¯å®ƒçš„å®ç°ç±»å¿…é¡»æä¾› <code>getTransaction()</code> æ–¹æ³•ï¼ˆå¼€å¯äº‹åŠ¡ï¼‰ã€<code>commit()</code> æ–¹æ³•ï¼ˆæäº¤äº‹åŠ¡ï¼‰ã€<code>rollback()</code> æ–¹æ³•ï¼ˆå›æ»šäº‹åŠ¡ï¼‰çš„å¤šæ€å®ç°ï¼Œè¿™æ ·å°±å¯ä»¥ç”¨ä¸åŒçš„å®ç°ç±»ä»£è¡¨ä¸åŒçš„äº‹åŠ¡ç®¡ç†ç­–ç•¥ã€‚ä½¿ç”¨ JTA å…¨å±€äº‹åŠ¡ç­–ç•¥æ—¶ï¼Œéœ€è¦åº•å±‚åº”ç”¨æœåŠ¡å™¨æ”¯æŒï¼Œè€Œä¸åŒçš„åº”ç”¨æœåŠ¡å™¨æ‰€æä¾›çš„ JTA å…¨å±€äº‹åŠ¡å¯èƒ½å­˜åœ¨ç»†èŠ‚ä¸Šçš„å·®å¼‚ï¼Œå› æ­¤å®é™…é…ç½®å…¨å±€äº‹åŠ¡ç®¡ç†å™¨æ˜¯å¯èƒ½éœ€è¦ä½¿ç”¨ <code>JtaTransactionManager</code> çš„å­ç±»ï¼Œå¦‚ï¼š<code>WebLogicJtaTransactionManager</code>ï¼ˆOracle çš„ WebLogic æœåŠ¡å™¨æä¾›ï¼‰ã€<code>UowJtaTransactionManager</code>ï¼ˆIBM çš„ WebSphere æœåŠ¡å™¨æä¾›ï¼‰ç­‰ã€‚</p><p>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>     <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>  <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/p<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>     <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd     http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.jackfrued<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>propertyConfig<span class="token punctuation">"</span></span>         <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.beans.factory.config.PropertyPlaceholderConfigurer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>location<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>jdbc.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.apache.commons.dbcp.BasicDataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driverClassName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>$&#123;db.driver&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>$&#123;db.url&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>$&#123;db.username&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>$&#123;db.password&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbcTemplate<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.jdbc.core.JdbcTemplate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>     <span class="token comment">&lt;!-- JDBCäº‹åŠ¡ç®¡ç†å™¨ --></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span>         <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">"</span></span>ã€€<span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>singleton<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>     <span class="token comment">&lt;!-- å£°æ˜äº‹åŠ¡æ¨¡æ¿ --></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionTemplate<span class="token punctuation">"</span></span>         <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.transaction.support.TransactionTemplate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>             <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JdbcTemplate</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">EmpDao</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Emp</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpDao</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Emp</span> emp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into emp values (?,?,?)"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> emp<span class="token punctuation">.</span><span class="token function">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>biz<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span></span><span class="token class-name">TransactionStatus</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">TransactionCallbackWithoutResult</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">TransactionTemplate</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>biz<span class="token punctuation">.</span></span><span class="token class-name">EmpService</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">EmpDao</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Emp</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmpServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">EmpService</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">TransactionTemplate</span> txTemplate<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">EmpDao</span> empDao<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addEmp</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Emp</span> emp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        txTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TransactionCallbackWithoutResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doInTransactionWithoutResult</span><span class="token punctuation">(</span><span class="token class-name">TransactionStatus</span> txStatus<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                empDao<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>emp<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å£°æ˜å¼äº‹åŠ¡å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»¥ Spring æ•´åˆ Hibernate 3 ä¸ºä¾‹ï¼ŒåŒ…æ‹¬å®Œæ•´çš„ DAO å’Œä¸šåŠ¡é€»è¾‘ä»£ç ã€‚</p><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>     <span class="token attr-name"><span class="token namespace">xmlns:</span>p</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/p<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/aop<span class="token punctuation">"</span></span>     <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/tx<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans           http://www.springframework.org/schema/beans/spring-beans-3.2.xsd           http://www.springframework.org/schema/context           http://www.springframework.org/schema/context/spring-context-3.2.xsd           http://www.springframework.org/schema/aop           http://www.springframework.org/schema/aop/spring-aop-3.2.xsd           http://www.springframework.org/schema/tx           http://www.springframework.org/schema/tx/spring-tx-3.2.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- é…ç½®ç”±Spring IoCå®¹å™¨æ‰˜ç®¡çš„å¯¹è±¡å¯¹åº”çš„è¢«æ³¨è§£çš„ç±»æ‰€åœ¨çš„åŒ… --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.jackfrued<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- é…ç½®é€šè¿‡è‡ªåŠ¨ç”Ÿæˆä»£ç†å®ç°AOPåŠŸèƒ½ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- é…ç½®æ•°æ®åº“è¿æ¥æ±  (DBCP) --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.apache.commons.dbcp.BasicDataSource<span class="token punctuation">"</span></span>        <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>close<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- é…ç½®é©±åŠ¨ç¨‹åºç±» --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driverClassName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.jdbc.Driver<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®è¿æ¥æ•°æ®åº“çš„URL --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/myweb<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®è®¿é—®æ•°æ®åº“çš„ç”¨æˆ·å --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®è®¿é—®æ•°æ®åº“çš„å£ä»¤ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123456<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®æœ€å¤§è¿æ¥æ•° --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>maxActive<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>150<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®æœ€å°ç©ºé—²è¿æ¥æ•° --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>minIdle<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®æœ€å¤§ç©ºé—²è¿æ¥æ•° --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>maxIdle<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®åˆå§‹è¿æ¥æ•° --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>initialSize<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®è¿æ¥è¢«æ³„éœ²æ—¶æ˜¯å¦ç”Ÿæˆæ—¥å¿— --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logAbandoned<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®æ˜¯å¦åˆ é™¤è¶…æ—¶è¿æ¥ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>removeAbandoned<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®åˆ é™¤è¶…æ—¶è¿æ¥çš„è¶…æ—¶é—¨é™å€¼(ä»¥ç§’ä¸ºå•ä½) --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>removeAbandonedTimeout<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>120<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®è¶…æ—¶ç­‰å¾…æ—¶é—´(ä»¥æ¯«ç§’ä¸ºå•ä½) --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>maxWait<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®ç©ºé—²è¿æ¥å›æ”¶å™¨çº¿ç¨‹è¿è¡Œçš„æ—¶é—´é—´éš”(ä»¥æ¯«ç§’ä¸ºå•ä½) --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>timeBetweenEvictionRunsMillis<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>300000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®è¿æ¥ç©ºé—²å¤šé•¿æ—¶é—´å(ä»¥æ¯«ç§’ä¸ºå•ä½)è¢«æ–­å¼€è¿æ¥ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>minEvictableIdleTimeMillis<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>60000<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- é…ç½®Springæä¾›çš„æ”¯æŒæ³¨è§£ORMæ˜ å°„çš„Hibernateä¼šè¯å·¥å‚ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sessionFactory<span class="token punctuation">"</span></span>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- é€šè¿‡setteræ³¨å…¥æ•°æ®æºå±æ€§ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®å®ä½“ç±»æ‰€åœ¨çš„åŒ… --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>packagesToScan<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.jackfrued.entity<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token comment">&lt;!-- é…ç½®Hibernateçš„ç›¸å…³å±æ€§ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hibernateProperties<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- åœ¨é¡¹ç›®è°ƒè¯•å®Œæˆåè¦åˆ é™¤show_sqlå’Œformat_sqlå±æ€§å¦åˆ™å¯¹æ€§èƒ½æœ‰æ˜¾è‘—å½±å“ --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>                hibernate.dialect=org.hibernate.dialect.MySQL5Dialect            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- é…ç½®Springæä¾›çš„Hibernateäº‹åŠ¡ç®¡ç†å™¨ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.orm.hibernate3.HibernateTransactionManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- é€šè¿‡setteræ³¨å…¥Hibernateä¼šè¯å·¥å‚ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sessionFactory<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sessionFactory<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- é…ç½®åŸºäºæ³¨è§£é…ç½®å£°æ˜å¼äº‹åŠ¡ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm<span class="token punctuation">.</span></span><span class="token class-name">QueryBean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm<span class="token punctuation">.</span></span><span class="token class-name">QueryResult</span><span class="token punctuation">;</span><span class="token comment">/** * æ•°æ®è®¿é—®å¯¹è±¡æ¥å£(ä»¥å¯¹è±¡ä¸ºå•ä½å°è£…CRUDæ“ä½œ) * @param &lt;E> å®ä½“ç±»å‹ * @param &lt;K> å®ä½“æ ‡è¯†å­—æ®µçš„ç±»å‹ */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BaseDao</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span> <span class="token class-name">K</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * æ–°å¢     * @param entity ä¸šåŠ¡å®ä½“å¯¹è±¡     * @return å¢åŠ æˆåŠŸè¿”å›å®ä½“å¯¹è±¡çš„æ ‡è¯†     */</span>    <span class="token keyword">public</span> <span class="token class-name">K</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">E</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * åˆ é™¤     * @param entity ä¸šåŠ¡å®ä½“å¯¹è±¡     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">E</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æ ¹æ®IDåˆ é™¤     * @param id ä¸šåŠ¡å®ä½“å¯¹è±¡çš„æ ‡è¯†     * @return åˆ é™¤æˆåŠŸè¿”å›trueå¦åˆ™è¿”å›false     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">K</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * ä¿®æ”¹     * @param entity ä¸šåŠ¡å®ä½“å¯¹è±¡     * @return ä¿®æ”¹æˆåŠŸè¿”å›trueå¦åˆ™è¿”å›false     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">E</span> entity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æ ¹æ®IDæŸ¥æ‰¾ä¸šåŠ¡å®ä½“å¯¹è±¡     * @param id ä¸šåŠ¡å®ä½“å¯¹è±¡çš„æ ‡è¯†     * @return ä¸šåŠ¡å®ä½“å¯¹è±¡å¯¹è±¡æˆ–null     */</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">K</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æ ¹æ®IDæŸ¥æ‰¾ä¸šåŠ¡å®ä½“å¯¹è±¡     * @param id ä¸šåŠ¡å®ä½“å¯¹è±¡çš„æ ‡è¯†     * @param lazy æ˜¯å¦ä½¿ç”¨å»¶è¿ŸåŠ è½½     * @return ä¸šåŠ¡å®ä½“å¯¹è±¡å¯¹è±¡     */</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">K</span> id<span class="token punctuation">,</span> <span class="token keyword">boolean</span> lazy<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æŸ¥æ‰¾æ‰€æœ‰ä¸šåŠ¡å®ä½“å¯¹è±¡     * @return è£…æ‰€æœ‰ä¸šåŠ¡å®ä½“å¯¹è±¡çš„åˆ—è¡¨å®¹å™¨     */</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * åˆ†é¡µæŸ¥æ‰¾ä¸šåŠ¡å®ä½“å¯¹è±¡     * @param page é¡µç      * @param size é¡µé¢å¤§å°     * @return æŸ¥è¯¢ç»“æœå¯¹è±¡     */</span>    <span class="token keyword">public</span> <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * åˆ†é¡µæŸ¥æ‰¾ä¸šåŠ¡å®ä½“å¯¹è±¡     * @param queryBean æŸ¥è¯¢æ¡ä»¶å¯¹è±¡     * @param page é¡µç      * @param size é¡µé¢å¤§å°     * @return æŸ¥è¯¢ç»“æœå¯¹è±¡     */</span>    <span class="token keyword">public</span> <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token class-name">QueryBean</span> queryBean<span class="token punctuation">,</span> <span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm<span class="token punctuation">.</span></span><span class="token class-name">QueryBean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm<span class="token punctuation">.</span></span><span class="token class-name">QueryResult</span><span class="token punctuation">;</span><span class="token comment">/** * BaseDaoçš„ç¼ºçœé€‚é…å™¨ * @param &lt;E> å®ä½“ç±»å‹ * @param &lt;K> å®ä½“æ ‡è¯†å­—æ®µçš„ç±»å‹ */</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseDaoAdapter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span> <span class="token class-name">K</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">BaseDao</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span> <span class="token class-name">K</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">K</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">E</span> entity<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">E</span> entity<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token class-name">K</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">E</span> entity <span class="token operator">=</span> <span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>entity <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">delete</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">E</span> entity<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">K</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">K</span> id<span class="token punctuation">,</span> <span class="token keyword">boolean</span> lazy<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token class-name">QueryBean</span> queryBean<span class="token punctuation">,</span> <span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">ParameterizedType</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span></span><span class="token class-name">Query</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span></span><span class="token class-name">Session</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span></span><span class="token class-name">SessionFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm<span class="token punctuation">.</span></span><span class="token class-name">HQLQueryBean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm<span class="token punctuation">.</span></span><span class="token class-name">QueryBean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm<span class="token punctuation">.</span></span><span class="token class-name">QueryResult</span><span class="token punctuation">;</span><span class="token comment">/** * åŸºäºHibernateçš„BaseDaoå®ç°ç±» * @param &lt;E> å®ä½“ç±»å‹ * @param &lt;K> ä¸»é”®ç±»å‹ */</span><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"unchecked"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">BaseDaoHibernateImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span> <span class="token class-name">K</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">BaseDaoAdapter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">,</span> <span class="token class-name">K</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">protected</span> <span class="token class-name">SessionFactory</span> sessionFactory<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> entityClass<span class="token punctuation">;</span>       <span class="token comment">// ä¸šåŠ¡å®ä½“çš„ç±»å¯¹è±¡</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> entityName<span class="token punctuation">;</span>          <span class="token comment">// ä¸šåŠ¡å®ä½“çš„åå­—</span>    <span class="token keyword">public</span> <span class="token class-name">BaseDaoHibernateImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ParameterizedType</span> pt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ParameterizedType</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getGenericSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        entityClass <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> pt<span class="token punctuation">.</span><span class="token function">getActualTypeArguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        entityName <span class="token operator">=</span> entityClass<span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">K</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">E</span> entity<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">K</span><span class="token punctuation">)</span> sessionFactory<span class="token punctuation">.</span><span class="token function">getCurrentSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">E</span> entity<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        sessionFactory<span class="token punctuation">.</span><span class="token function">getCurrentSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">E</span> entity<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        sessionFactory<span class="token punctuation">.</span><span class="token function">getCurrentSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">K</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">K</span> id<span class="token punctuation">,</span> <span class="token keyword">boolean</span> lazy<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Session</span> session <span class="token operator">=</span> sessionFactory<span class="token punctuation">.</span><span class="token function">getCurrentSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>lazy<span class="token operator">?</span> session<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>entityClass<span class="token punctuation">,</span> id<span class="token punctuation">)</span> <span class="token operator">:</span> session<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>entityClass<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> sessionFactory<span class="token punctuation">.</span><span class="token function">getCurrentSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createCriteria</span><span class="token punctuation">(</span>entityClass<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>            <span class="token function">findByHQLAndPage</span><span class="token punctuation">(</span><span class="token string">"from "</span> <span class="token operator">+</span> entityName <span class="token punctuation">,</span> page<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token function">getCountByHQL</span><span class="token punctuation">(</span><span class="token string">"select count(*) from "</span> <span class="token operator">+</span> entityName<span class="token punctuation">)</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findByPage</span><span class="token punctuation">(</span><span class="token class-name">QueryBean</span> queryBean<span class="token punctuation">,</span> <span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>queryBean <span class="token keyword">instanceof</span> <span class="token class-name">HQLQueryBean</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">HQLQueryBean</span> hqlQueryBean <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HQLQueryBean</span><span class="token punctuation">)</span> queryBean<span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>                <span class="token function">findByHQLAndPage</span><span class="token punctuation">(</span>hqlQueryBean<span class="token punctuation">.</span><span class="token function">getQueryString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> page<span class="token punctuation">,</span> size<span class="token punctuation">,</span> hqlQueryBean<span class="token punctuation">.</span><span class="token function">getParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token function">getCountByHQL</span><span class="token punctuation">(</span>hqlQueryBean<span class="token punctuation">.</span><span class="token function">getCountString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> hqlQueryBean<span class="token punctuation">.</span><span class="token function">getParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ ¹æ®HQLå’Œå¯å˜å‚æ•°åˆ—è¡¨è¿›è¡ŒæŸ¥è¯¢     * @param hql åŸºäºHQLçš„æŸ¥è¯¢è¯­å¥     * @param params å¯å˜å‚æ•°åˆ—è¡¨     * @return æŒæœ‰æŸ¥è¯¢ç»“æœçš„åˆ—è¡¨å®¹å™¨æˆ–ç©ºåˆ—è¡¨å®¹å™¨     */</span>    <span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findByHQL</span><span class="token punctuation">(</span><span class="token class-name">String</span> hql<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findByHQL</span><span class="token punctuation">(</span>hql<span class="token punctuation">,</span> <span class="token function">getParamList</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ ¹æ®HQLå’Œå‚æ•°åˆ—è¡¨è¿›è¡ŒæŸ¥è¯¢     * @param hql åŸºäºHQLçš„æŸ¥è¯¢è¯­å¥     * @param params æŸ¥è¯¢å‚æ•°åˆ—è¡¨     * @return æŒæœ‰æŸ¥è¯¢ç»“æœçš„åˆ—è¡¨å®¹å™¨æˆ–ç©ºåˆ—è¡¨å®¹å™¨     */</span>    <span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findByHQL</span><span class="token punctuation">(</span><span class="token class-name">String</span> hql<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> params<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> list <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> list <span class="token operator">:</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span>EMPTY_LIST<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ ¹æ®HQLå’Œå‚æ•°åˆ—è¡¨è¿›è¡Œåˆ†é¡µæŸ¥è¯¢     * @param hql åŸºäºHQLçš„æŸ¥è¯¢è¯­å¥     * @page é¡µç      * @size é¡µé¢å¤§å°     * @param params å¯å˜å‚æ•°åˆ—è¡¨     * @return æŒæœ‰æŸ¥è¯¢ç»“æœçš„åˆ—è¡¨å®¹å™¨æˆ–ç©ºåˆ—è¡¨å®¹å™¨     */</span>    <span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findByHQLAndPage</span><span class="token punctuation">(</span><span class="token class-name">String</span> hql<span class="token punctuation">,</span> <span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findByHQLAndPage</span><span class="token punctuation">(</span>hql<span class="token punctuation">,</span> page<span class="token punctuation">,</span> size<span class="token punctuation">,</span> <span class="token function">getParamList</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ ¹æ®HQLå’Œå‚æ•°åˆ—è¡¨è¿›è¡Œåˆ†é¡µæŸ¥è¯¢     * @param hql åŸºäºHQLçš„æŸ¥è¯¢è¯­å¥     * @page é¡µç      * @size é¡µé¢å¤§å°     * @param params æŸ¥è¯¢å‚æ•°åˆ—è¡¨     * @return æŒæœ‰æŸ¥è¯¢ç»“æœçš„åˆ—è¡¨å®¹å™¨æˆ–ç©ºåˆ—è¡¨å®¹å™¨     */</span>    <span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> <span class="token function">findByHQLAndPage</span><span class="token punctuation">(</span><span class="token class-name">String</span> hql<span class="token punctuation">,</span> <span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> params<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">,</span> params<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setFirstResult</span><span class="token punctuation">(</span><span class="token punctuation">(</span>page <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> size<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">setMaxResults</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> list <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> list <span class="token operator">:</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span>EMPTY_LIST<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„è®°å½•æ•°     * @param hql åŸºäºHQLçš„æŸ¥è¯¢è¯­å¥     * @param params å¯å˜å‚æ•°åˆ—è¡¨     * @return æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„æ€»è®°å½•æ•°     */</span>    <span class="token keyword">protected</span> <span class="token keyword">long</span> <span class="token function">getCountByHQL</span><span class="token punctuation">(</span><span class="token class-name">String</span> hql<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCountByHQL</span><span class="token punctuation">(</span>hql<span class="token punctuation">,</span> <span class="token function">getParamList</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„è®°å½•æ•°     * @param hql åŸºäºHQLçš„æŸ¥è¯¢è¯­å¥     * @param params å‚æ•°åˆ—è¡¨å®¹å™¨     * @return æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„æ€»è®°å½•æ•°     */</span>    <span class="token keyword">protected</span> <span class="token keyword">long</span> <span class="token function">getCountByHQL</span><span class="token punctuation">(</span><span class="token class-name">String</span> hql<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> params<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">)</span> <span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">uniqueResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// åˆ›å»ºHibernateæŸ¥è¯¢å¯¹è±¡(Query)</span>    <span class="token keyword">private</span> <span class="token class-name">Query</span> <span class="token function">createQuery</span><span class="token punctuation">(</span><span class="token class-name">String</span> hql<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> params<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Query</span> query <span class="token operator">=</span> sessionFactory<span class="token punctuation">.</span><span class="token function">getCurrentSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>hql<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> params<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            query<span class="token punctuation">.</span><span class="token function">setParameter</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> query<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// å°†å¯å˜å‚æ•°åˆ—è¡¨ç»„è£…æˆåˆ—è¡¨å®¹å™¨</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> <span class="token function">getParamList</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> paramList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>params <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> params<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                paramList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> paramList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token operator">?</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span>EMPTY_LIST <span class="token operator">:</span> paramList<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token comment">/** * æŸ¥è¯¢æ¡ä»¶çš„æ¥å£ */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">QueryBean</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * æ·»åŠ æ’åºå­—æ®µ     * @param fieldName ç”¨äºæ’åºçš„å­—æ®µ     * @param asc å‡åºè¿˜æ˜¯é™åº     * @return æŸ¥è¯¢æ¡ä»¶å¯¹è±¡è‡ªèº«(æ–¹ä¾¿çº§è”ç¼–ç¨‹)     */</span>    <span class="token keyword">public</span> <span class="token class-name">QueryBean</span> <span class="token function">addOrder</span><span class="token punctuation">(</span><span class="token class-name">String</span> fieldName<span class="token punctuation">,</span> <span class="token keyword">boolean</span> asc<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æ·»åŠ æ’åºå­—æ®µ     * @param available æ˜¯å¦æ·»åŠ æ­¤æ’åºå­—æ®µ     * @param fieldName ç”¨äºæ’åºçš„å­—æ®µ     * @param asc å‡åºè¿˜æ˜¯é™åº     * @return æŸ¥è¯¢æ¡ä»¶å¯¹è±¡è‡ªèº«(æ–¹ä¾¿çº§è”ç¼–ç¨‹)     */</span>    <span class="token keyword">public</span> <span class="token class-name">QueryBean</span> <span class="token function">addOrder</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> available<span class="token punctuation">,</span> <span class="token class-name">String</span> fieldName<span class="token punctuation">,</span> <span class="token keyword">boolean</span> asc<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æ·»åŠ æŸ¥è¯¢æ¡ä»¶     * @param condition æ¡ä»¶     * @param params æ›¿æ¢æ‰æ¡ä»¶ä¸­å‚æ•°å ä½ç¬¦çš„å‚æ•°     * @return æŸ¥è¯¢æ¡ä»¶å¯¹è±¡è‡ªèº«(æ–¹ä¾¿çº§è”ç¼–ç¨‹)     */</span>    <span class="token keyword">public</span> <span class="token class-name">QueryBean</span> <span class="token function">addCondition</span><span class="token punctuation">(</span><span class="token class-name">String</span> condition<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * æ·»åŠ æŸ¥è¯¢æ¡ä»¶     * @param available æ˜¯å¦éœ€è¦æ·»åŠ æ­¤æ¡ä»¶     * @param condition æ¡ä»¶     * @param params æ›¿æ¢æ‰æ¡ä»¶ä¸­å‚æ•°å ä½ç¬¦çš„å‚æ•°     * @return æŸ¥è¯¢æ¡ä»¶å¯¹è±¡è‡ªèº«(æ–¹ä¾¿çº§è”ç¼–ç¨‹)     */</span>    <span class="token keyword">public</span> <span class="token class-name">QueryBean</span> <span class="token function">addCondition</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> available<span class="token punctuation">,</span> <span class="token class-name">String</span> condition<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * è·å¾—æŸ¥è¯¢è¯­å¥     * @return æŸ¥è¯¢è¯­å¥     */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getQueryString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * è·å–æŸ¥è¯¢è®°å½•æ•°çš„æŸ¥è¯¢è¯­å¥     * @return æŸ¥è¯¢è®°å½•æ•°çš„æŸ¥è¯¢è¯­å¥     */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCountString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * è·å¾—æŸ¥è¯¢å‚æ•°     * @return æŸ¥è¯¢å‚æ•°çš„åˆ—è¡¨å®¹å™¨     */</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">></span></span> <span class="token function">getParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token comment">/** * æŸ¥è¯¢ç»“æœ * @param &lt;T> æ³›å‹å‚æ•° */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> result<span class="token punctuation">;</span>     <span class="token comment">// æŒæœ‰æŸ¥è¯¢ç»“æœçš„åˆ—è¡¨å®¹å™¨</span>    <span class="token keyword">private</span> <span class="token keyword">long</span> totalRecords<span class="token punctuation">;</span>  <span class="token comment">// æŸ¥è¯¢åˆ°çš„æ€»è®°å½•æ•°</span>    <span class="token comment">/**     * æ„é€ å™¨     */</span>    <span class="token keyword">public</span> <span class="token class-name">QueryResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ„é€ å™¨     * @param result æŒæœ‰æŸ¥è¯¢ç»“æœçš„åˆ—è¡¨å®¹å™¨     * @param totalRecords æŸ¥è¯¢åˆ°çš„æ€»è®°å½•æ•°     */</span>    <span class="token keyword">public</span> <span class="token class-name">QueryResult</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> result<span class="token punctuation">,</span> <span class="token keyword">long</span> totalRecords<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">=</span> result<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>totalRecords <span class="token operator">=</span> totalRecords<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setResult</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> result<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>result <span class="token operator">=</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getTotalRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> totalRecords<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTotalRecords</span><span class="token punctuation">(</span><span class="token keyword">long</span> totalRecords<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>totalRecords <span class="token operator">=</span> totalRecords<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm<span class="token punctuation">.</span></span><span class="token class-name">QueryResult</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Dept</span><span class="token punctuation">;</span><span class="token comment">/** * éƒ¨é—¨æ•°æ®è®¿é—®å¯¹è±¡æ¥å£ */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptDao</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDao</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * åˆ†é¡µæŸ¥è¯¢é¡¶çº§éƒ¨é—¨     * @param page é¡µç      * @param size é¡µç å¤§å°     * @return æŸ¥è¯¢ç»“æœå¯¹è±¡     */</span>    <span class="token keyword">public</span> <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">></span></span> <span class="token function">findTopDeptByPage</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Repository</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm<span class="token punctuation">.</span></span><span class="token class-name">QueryResult</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">BaseDaoHibernateImpl</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">DeptDao</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Dept</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptDaoImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDaoHibernateImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token keyword">implements</span> <span class="token class-name">DeptDao</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> HQL_FIND_TOP_DEPT <span class="token operator">=</span> <span class="token string">" from Dept as d where d.superiorDept is null "</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">></span></span> <span class="token function">findTopDeptByPage</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token function">findByHQLAndPage</span><span class="token punctuation">(</span>HQL_FIND_TOP_DEPT<span class="token punctuation">,</span> page<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> totalRecords <span class="token operator">=</span> <span class="token function">getCountByHQL</span><span class="token punctuation">(</span><span class="token string">" select count(*) "</span> <span class="token operator">+</span> HQL_FIND_TOP_DEPT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> totalRecords<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token comment">/** * åˆ†é¡µå™¨ * @param &lt;T> åˆ†é¡µæ•°æ®å¯¹è±¡çš„ç±»å‹ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAUL_INIT_PAGE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_PAGE_SIZE <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_PAGE_COUNT <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> data<span class="token punctuation">;</span>           <span class="token comment">// åˆ†é¡µæ•°æ®</span>    <span class="token keyword">private</span> <span class="token class-name">PageRange</span> pageRange<span class="token punctuation">;</span>    <span class="token comment">// é¡µç èŒƒå›´</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> totalPage<span class="token punctuation">;</span>          <span class="token comment">// æ€»é¡µæ•°</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>               <span class="token comment">// é¡µé¢å¤§å°</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> currentPage<span class="token punctuation">;</span>        <span class="token comment">// å½“å‰é¡µç </span>    <span class="token keyword">private</span> <span class="token keyword">int</span> pageCount<span class="token punctuation">;</span>          <span class="token comment">// é¡µç æ•°é‡</span>    <span class="token comment">/**     * æ„é€ å™¨     * @param currentPage å½“å‰é¡µç      * @param size é¡µç å¤§å°     * @param pageCount é¡µç æ•°é‡     */</span>    <span class="token keyword">public</span> <span class="token class-name">PageBean</span><span class="token punctuation">(</span><span class="token keyword">int</span> currentPage<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">,</span> <span class="token keyword">int</span> pageCount<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>currentPage <span class="token operator">=</span> currentPage <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> currentPage <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> size <span class="token operator">:</span> DEFAULT_PAGE_SIZE<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pageCount <span class="token operator">=</span> pageCount <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> size <span class="token operator">:</span> DEFAULT_PAGE_COUNT<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ„é€ å™¨     * @param currentPage å½“å‰é¡µç      * @param size é¡µç å¤§å°     */</span>    <span class="token keyword">public</span> <span class="token class-name">PageBean</span><span class="token punctuation">(</span><span class="token keyword">int</span> currentPage<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">(</span>currentPage<span class="token punctuation">,</span> size<span class="token punctuation">,</span> DEFAULT_PAGE_COUNT<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ„é€ å™¨     * @param currentPage å½“å‰é¡µç      */</span>    <span class="token keyword">public</span> <span class="token class-name">PageBean</span><span class="token punctuation">(</span><span class="token keyword">int</span> currentPage<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">(</span>currentPage<span class="token punctuation">,</span> DEFAULT_PAGE_SIZE<span class="token punctuation">,</span> DEFAULT_PAGE_COUNT<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ„é€ å™¨     */</span>    <span class="token keyword">public</span> <span class="token class-name">PageBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">(</span>DEFAUL_INIT_PAGE<span class="token punctuation">,</span> DEFAULT_PAGE_SIZE<span class="token punctuation">,</span> DEFAULT_PAGE_COUNT<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> data<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getStartPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> pageRange <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> pageRange<span class="token punctuation">.</span><span class="token function">getStartPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getEndPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> pageRange <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> pageRange<span class="token punctuation">.</span><span class="token function">getEndPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getTotalPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> totalPage<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> size<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCurrentPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> currentPage<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å°†æŸ¥è¯¢ç»“æœè½¬æ¢ä¸ºåˆ†é¡µæ•°æ®     * @param queryResult æŸ¥è¯¢ç»“æœå¯¹è±¡     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transferQueryResult</span><span class="token punctuation">(</span><span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> queryResult<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">long</span> totalRecords <span class="token operator">=</span> queryResult<span class="token punctuation">.</span><span class="token function">getTotalRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        data <span class="token operator">=</span> queryResult<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        totalPage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>totalRecords <span class="token operator">+</span> size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>         totalPage <span class="token operator">=</span> totalPage <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span> totalPage <span class="token operator">:</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>pageRange <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageRange</span><span class="token punctuation">(</span>pageCount<span class="token punctuation">,</span> currentPage<span class="token punctuation">,</span> totalPage<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm</span><span class="token punctuation">;</span><span class="token comment">/** * é¡µç èŒƒå›´ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageRange</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> startPage<span class="token punctuation">;</span>  <span class="token comment">// èµ·å§‹é¡µç </span>    <span class="token keyword">private</span> <span class="token keyword">int</span> endPage<span class="token punctuation">;</span>    <span class="token comment">// ç»ˆæ­¢é¡µç </span>    <span class="token comment">/**     * æ„é€ å™¨     * @param pageCount æ€»å…±æ˜¾ç¤ºå‡ ä¸ªé¡µç      * @param currentPage å½“å‰é¡µç      * @param totalPage æ€»é¡µæ•°     */</span>    <span class="token keyword">public</span> <span class="token class-name">PageRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> pageCount<span class="token punctuation">,</span> <span class="token keyword">int</span> currentPage<span class="token punctuation">,</span> <span class="token keyword">int</span> totalPage<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        startPage <span class="token operator">=</span> currentPage <span class="token operator">-</span> <span class="token punctuation">(</span>pageCount <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        endPage <span class="token operator">=</span> currentPage <span class="token operator">+</span> pageCount <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>startPage <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            startPage <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>            endPage <span class="token operator">=</span> totalPage <span class="token operator">></span> pageCount <span class="token operator">?</span> pageCount <span class="token operator">:</span> totalPage<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>endPage <span class="token operator">></span> totalPage<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            endPage <span class="token operator">=</span> totalPage<span class="token punctuation">;</span>            startPage <span class="token operator">=</span> <span class="token punctuation">(</span>endPage <span class="token operator">-</span> pageCount <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> endPage <span class="token operator">-</span> pageCount <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è·å¾—èµ·å§‹é¡µé¡µç      * @return èµ·å§‹é¡µé¡µç      */</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getStartPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> startPage<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è·å¾—ç»ˆæ­¢é¡µé¡µç      * @return ç»ˆæ­¢é¡µé¡µç      */</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getEndPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> endPage<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>biz</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm<span class="token punctuation">.</span></span><span class="token class-name">PageBean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Dept</span><span class="token punctuation">;</span><span class="token comment">/** * éƒ¨é—¨ä¸šåŠ¡é€»è¾‘æ¥å£ */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DeptService</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/**     * åˆ›å»ºæ–°çš„éƒ¨é—¨     * @param department éƒ¨é—¨å¯¹è±¡     * @return åˆ›å»ºæˆåŠŸè¿”å›trueå¦åˆ™è¿”å›false     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">createNewDepartment</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> department<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * åˆ é™¤æŒ‡å®šéƒ¨é—¨     * @param id è¦åˆ é™¤çš„éƒ¨é—¨çš„ç¼–å·     * @return åˆ é™¤æˆåŠŸè¿”å›trueå¦åˆ™è¿”å›false     */</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">deleteDepartment</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * åˆ†é¡µè·å–é¡¶çº§éƒ¨é—¨     * @param page é¡µç      * @param size é¡µç å¤§å°     * @return éƒ¨é—¨å¯¹è±¡çš„åˆ†é¡µå™¨å¯¹è±¡     */</span>    <span class="token keyword">public</span> <span class="token class-name">PageBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">></span></span> <span class="token function">getTopDeptByPage</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>biz<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Transactional</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>biz<span class="token punctuation">.</span></span><span class="token class-name">DeptService</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm<span class="token punctuation">.</span></span><span class="token class-name">PageBean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>comm<span class="token punctuation">.</span></span><span class="token class-name">QueryResult</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">DeptDao</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Dept</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Service</span><span class="token annotation punctuation">@Transactional</span>  <span class="token comment">// å£°æ˜å¼äº‹åŠ¡çš„æ³¨è§£</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">DeptService</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">DeptDao</span> deptDao<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">createNewDepartment</span><span class="token punctuation">(</span><span class="token class-name">Dept</span> department<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> deptDao<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>department<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">deleteDepartment</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> deptDao<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">PageBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">></span></span> <span class="token function">getTopDeptByPage</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">QueryResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">></span></span> queryResult <span class="token operator">=</span> deptDao<span class="token punctuation">.</span><span class="token function">findTopDeptByPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">PageBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">></span></span> pageBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageBean</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>        pageBean<span class="token punctuation">.</span><span class="token function">transferQueryResult</span><span class="token punctuation">(</span>queryResult<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> pageBean<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="å¦‚ä½•åœ¨-Web-é¡¹ç›®ä¸­é…ç½®-Spring-çš„-IoC-å®¹å™¨ï¼Ÿ"><a href="#å¦‚ä½•åœ¨-Web-é¡¹ç›®ä¸­é…ç½®-Spring-çš„-IoC-å®¹å™¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨ Web é¡¹ç›®ä¸­é…ç½® Spring çš„ IoC å®¹å™¨ï¼Ÿ"></a>å¦‚ä½•åœ¨ Web é¡¹ç›®ä¸­é…ç½® Spring çš„ IoC å®¹å™¨ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¦‚æœéœ€è¦åœ¨ Web é¡¹ç›®ä¸­ä½¿ç”¨ Spring çš„ IoC å®¹å™¨ï¼Œå¯ä»¥åœ¨ Web é¡¹ç›®é…ç½®æ–‡ä»¶ web.xml ä¸­åšå‡ºå¦‚ä¸‹é…ç½®ï¼š</p><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>classpath:applicationContext.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">></span></span>        org.springframework.web.context.ContextLoaderListener    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="å¦‚ä½•åœ¨-Web-é¡¹ç›®ä¸­é…ç½®-Spring-MVCï¼Ÿ"><a href="#å¦‚ä½•åœ¨-Web-é¡¹ç›®ä¸­é…ç½®-Spring-MVCï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨ Web é¡¹ç›®ä¸­é…ç½® Spring MVCï¼Ÿ"></a>å¦‚ä½•åœ¨ Web é¡¹ç›®ä¸­é…ç½® Spring MVCï¼Ÿ</h3></blockquote><p>ç­”ï¼šè¦ä½¿ç”¨ Spring MVC éœ€è¦åœ¨ Web é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­é…ç½®å…¶å‰ç«¯æ§åˆ¶å™¨ <code>DispatcherServlet</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>            org.springframework.web.servlet.DispatcherServlet        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¯´æ˜ï¼š</strong>ä¸Šé¢çš„é…ç½®ä¸­ä½¿ç”¨äº† <code>*.html</code> çš„åç¼€æ˜ å°„ï¼Œè¿™æ ·åšä¸€æ–¹é¢ä¸èƒ½å¤Ÿé€šè¿‡ URL æ¨æ–­é‡‡ç”¨äº†ä½•ç§æœåŠ¡å™¨ç«¯çš„æŠ€æœ¯ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥æ¬ºéª—æœç´¢å¼•æ“ï¼Œå› ä¸ºæœç´¢å¼•æ“ä¸ä¼šæœç´¢åŠ¨æ€é¡µé¢ï¼Œè¿™ç§åšæ³•ç§°ä¸º<strong>ä¼ªé™æ€åŒ–</strong>ã€‚</p><blockquote><h3 id="Spring-MVC-çš„å·¥ä½œåŸç†æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#Spring-MVC-çš„å·¥ä½œåŸç†æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="Spring MVC çš„å·¥ä½œåŸç†æ˜¯æ€æ ·çš„ï¼Ÿ"></a>Spring MVC çš„å·¥ä½œåŸç†æ˜¯æ€æ ·çš„ï¼Ÿ</h3></blockquote><p>ç­”ï¼šSpring MVC çš„å·¥ä½œåŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/156.png" alt></p><ol><li>å®¢æˆ·ç«¯çš„æ‰€æœ‰è¯·æ±‚éƒ½äº¤ç»™å‰ç«¯æ§åˆ¶å™¨ <code>DispatcherServlet</code> æ¥å¤„ç†ï¼Œå®ƒä¼šè´Ÿè´£è°ƒç”¨ç³»ç»Ÿçš„å…¶ä»–æ¨¡å—æ¥çœŸæ­£å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ã€‚</li><li><code>DispatcherServlet</code> æ”¶åˆ°è¯·æ±‚åï¼Œå°†æ ¹æ®è¯·æ±‚çš„ä¿¡æ¯ï¼ˆåŒ…æ‹¬ URLã€HTTP åè®®æ–¹æ³•ã€è¯·æ±‚å¤´ã€è¯·æ±‚å‚æ•°ã€Cookie ç­‰ï¼‰ä»¥åŠ <code>HandlerMapping</code> çš„é…ç½®æ‰¾åˆ°å¤„ç†è¯¥è¯·æ±‚çš„ <code>Handler</code>ï¼ˆä»»ä½•ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºè¯·æ±‚çš„ <code>Handler</code>ï¼‰ã€‚</li><li>åœ¨è¿™ä¸ªåœ°æ–¹ Spring ä¼šé€šè¿‡ <code>Controller</code> å¯¹è¯¥å¤„ç†å™¨è¿›è¡Œå°è£…ã€‚</li><li><code>Controller</code> æ˜¯ä¸€ä¸ªé€‚é…å™¨ï¼Œå®ƒç”¨ç»Ÿä¸€çš„æ¥å£å¯¹å„ç§ <code>Handler</code> ä¸­çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨ã€‚</li><li><code>Handler</code> å®Œæˆå¯¹ç”¨æˆ·è¯·æ±‚çš„å¤„ç†åï¼Œä¼šè¿”å›ä¸€ä¸ª <code>ModelAndView</code> å¯¹è±¡ç»™ <code>DispatcherServlet</code>ï¼Œ<code>ModelAndView</code> é¡¾åæ€ä¹‰ï¼ŒåŒ…å«äº†æ•°æ®æ¨¡å‹ä»¥åŠç›¸åº”çš„è§†å›¾çš„ä¿¡æ¯ã€‚</li><li><code>ModelAndView</code> çš„è§†å›¾æ˜¯é€»è¾‘è§†å›¾ï¼Œ<code>DispatcherServlet</code> è¿˜è¦å€ŸåŠ© <code>ViewResolver</code> å®Œæˆä»é€»è¾‘è§†å›¾åˆ°çœŸå®è§†å›¾å¯¹è±¡çš„è§£æå·¥ä½œã€‚</li><li>å½“å¾—åˆ°çœŸæ­£çš„è§†å›¾å¯¹è±¡åï¼Œ<code>DispatcherServlet</code> ä¼šåˆ©ç”¨è§†å›¾å¯¹è±¡å¯¹æ¨¡å‹æ•°æ®è¿›è¡Œæ¸²æŸ“ã€‚</li><li>å®¢æˆ·ç«¯å¾—åˆ°å“åº”ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªæ™®é€šçš„HTMLé¡µé¢ï¼Œä¹Ÿå¯ä»¥æ˜¯ XML æˆ– JSON å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€å¼ å›¾ç‰‡æˆ–è€…ä¸€ä¸ª PDF æ–‡ä»¶ã€‚</li></ol><blockquote><h3 id="å¦‚ä½•åœ¨-Spring-IoC-å®¹å™¨ä¸­é…ç½®æ•°æ®æºï¼Ÿ"><a href="#å¦‚ä½•åœ¨-Spring-IoC-å®¹å™¨ä¸­é…ç½®æ•°æ®æºï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨ Spring IoC å®¹å™¨ä¸­é…ç½®æ•°æ®æºï¼Ÿ"></a>å¦‚ä½•åœ¨ Spring IoC å®¹å™¨ä¸­é…ç½®æ•°æ®æºï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><p>DBCP é…ç½®ï¼š</p><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.apache.commons.dbcp.BasicDataSource<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>close<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driverClassName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.driverClassName&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.url&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.username&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.password&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc.properties<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>C3P0 é…ç½®ï¼š</p><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mchange.v2.c3p0.ComboPooledDataSource<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>close<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driverClass<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.driverClassName&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbcUrl<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.url&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.username&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;jdbc.password&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc.properties<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong> DBCP çš„è¯¦ç»†é…ç½®åœ¨ç¬¬ 153 é¢˜ä¸­å·²ç»å®Œæ•´çš„å±•ç¤ºè¿‡äº†ã€‚</p><blockquote><h3 id="å¦‚ä½•é…ç½®é…ç½®äº‹åŠ¡å¢å¼ºï¼Ÿ"><a href="#å¦‚ä½•é…ç½®é…ç½®äº‹åŠ¡å¢å¼ºï¼Ÿ" class="headerlink" title="å¦‚ä½•é…ç½®é…ç½®äº‹åŠ¡å¢å¼ºï¼Ÿ"></a>å¦‚ä½•é…ç½®é…ç½®äº‹åŠ¡å¢å¼ºï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/aop<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/tx<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>     http://www.springframework.org/schema/beans     http://www.springframework.org/schema/beans/spring-beans.xsd     http://www.springframework.org/schema/tx     http://www.springframework.org/schema/tx/spring-tx.xsd     http://www.springframework.org/schema/aop     http://www.springframework.org/schema/aop/spring-aop.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- this is the service object that we want to make transactional --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fooService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x.y.service.DefaultFooService<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment">&lt;!-- the transactional advice --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>advice</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>txAdvice<span class="token punctuation">"</span></span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>txManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token comment">&lt;!-- the transactional semantics... --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">></span></span>            <span class="token comment">&lt;!-- all methods starting with 'get' are read-only --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>get*<span class="token punctuation">"</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>            <span class="token comment">&lt;!-- other methods use the default transaction settings (see below) --></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>*<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>advice</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- ensure that the above transactional advice runs for any execution of         an operation defined by the FooService interface --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fooServiceOperation<span class="token punctuation">"</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>execution(* x.y.service.FooService.*(..))<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>txAdvice<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fooServiceOperation<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- don't forget the DataSource --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.apache.commons.dbcp.BasicDataSource<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>close<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driverClassName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>oracle.jdbc.driver.OracleDriver<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:oracle:thin:@localhost:1521:orcl<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scott<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tiger<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- similarly, don't forget the PlatformTransactionManager --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>txManager<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataSource<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- other &lt;bean/> definitions here --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="é€‰æ‹©ä½¿ç”¨-Spring-æ¡†æ¶çš„åŸå› ï¼ˆSpring-æ¡†æ¶ä¸ºä¼ä¸šçº§å¼€å‘å¸¦æ¥çš„å¥½å¤„æœ‰å“ªäº›ï¼‰ï¼Ÿ"><a href="#é€‰æ‹©ä½¿ç”¨-Spring-æ¡†æ¶çš„åŸå› ï¼ˆSpring-æ¡†æ¶ä¸ºä¼ä¸šçº§å¼€å‘å¸¦æ¥çš„å¥½å¤„æœ‰å“ªäº›ï¼‰ï¼Ÿ" class="headerlink" title="é€‰æ‹©ä½¿ç”¨ Spring æ¡†æ¶çš„åŸå› ï¼ˆSpring æ¡†æ¶ä¸ºä¼ä¸šçº§å¼€å‘å¸¦æ¥çš„å¥½å¤„æœ‰å“ªäº›ï¼‰ï¼Ÿ"></a>é€‰æ‹©ä½¿ç”¨ Spring æ¡†æ¶çš„åŸå› ï¼ˆSpring æ¡†æ¶ä¸ºä¼ä¸šçº§å¼€å‘å¸¦æ¥çš„å¥½å¤„æœ‰å“ªäº›ï¼‰ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ä½œç­”ï¼š</p><ul><li>éä¾µå…¥å¼ï¼šæ”¯æŒåŸºäº POJO çš„ç¼–ç¨‹æ¨¡å¼ï¼Œä¸å¼ºåˆ¶æ€§çš„è¦æ±‚å®ç° Spring æ¡†æ¶ä¸­çš„æ¥å£æˆ–ç»§æ‰¿ Spring æ¡†æ¶ä¸­çš„ç±»ã€‚</li><li>IoC å®¹å™¨ï¼šIoC å®¹å™¨å¸®åŠ©åº”ç”¨ç¨‹åºç®¡ç†å¯¹è±¡ä»¥åŠå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»å¦‚æœå‘ç”Ÿäº†æ”¹å˜åªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶è€Œä¸æ˜¯ä¿®æ”¹ä»£ç ï¼Œå› ä¸ºä»£ç çš„ä¿®æ”¹å¯èƒ½æ„å‘³ç€é¡¹ç›®çš„é‡æ–°æ„å»ºå’Œå®Œæ•´çš„å›å½’æµ‹è¯•ã€‚æœ‰äº† IoC å®¹å™¨ï¼Œç¨‹åºå‘˜å†ä¹Ÿä¸éœ€è¦è‡ªå·±ç¼–å†™å·¥å‚ã€å•ä¾‹ï¼Œè¿™ä¸€ç‚¹ç‰¹åˆ«ç¬¦åˆ Spring çš„ç²¾ç¥â€œä¸è¦é‡å¤çš„å‘æ˜è½®å­â€ã€‚</li><li>AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼šå°†æ‰€æœ‰çš„æ¨ªåˆ‡å…³æ³¨åŠŸèƒ½å°è£…åˆ°åˆ‡é¢ï¼ˆaspectï¼‰ä¸­ï¼Œé€šè¿‡é…ç½®çš„æ–¹å¼å°†æ¨ªåˆ‡å…³æ³¨åŠŸèƒ½åŠ¨æ€æ·»åŠ åˆ°ç›®æ ‡ä»£ç ä¸Šï¼Œè¿›ä¸€æ­¥å®ç°äº†ä¸šåŠ¡é€»è¾‘å’Œç³»ç»ŸæœåŠ¡ä¹‹é—´çš„åˆ†ç¦»ã€‚å¦ä¸€æ–¹é¢ï¼Œæœ‰äº† AOP ç¨‹åºå‘˜å¯ä»¥çœå»å¾ˆå¤šè‡ªå·±å†™ä»£ç†ç±»çš„å·¥ä½œã€‚</li><li>MVCï¼šSpring çš„ MVC æ¡†æ¶æ˜¯éå¸¸ä¼˜ç§€çš„ï¼Œä»å„ä¸ªæ–¹é¢éƒ½å¯ä»¥ç”© Struts 2 å‡ æ¡è¡—ï¼Œä¸º Web è¡¨ç¤ºå±‚æä¾›äº†æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</li><li>äº‹åŠ¡ç®¡ç†ï¼šSpring ä»¥å®½å¹¿çš„èƒ¸æ€€æ¥çº³å¤šç§æŒä¹…å±‚æŠ€æœ¯ï¼Œå¹¶ä¸”ä¸ºå…¶æä¾›äº†å£°æ˜å¼çš„äº‹åŠ¡ç®¡ç†ï¼Œåœ¨ä¸éœ€è¦ä»»ä½•ä¸€è¡Œä»£ç çš„æƒ…å†µä¸‹å°±èƒ½å¤Ÿå®Œæˆäº‹åŠ¡ç®¡ç†ã€‚</li><li>å…¶ä»–ï¼šé€‰æ‹© Spring æ¡†æ¶çš„åŸå› è¿˜è¿œä¸æ­¢äºæ­¤ï¼ŒSpring ä¸º Java ä¼ä¸šçº§å¼€å‘æä¾›äº†ä¸€ç«™å¼é€‰æ‹©ï¼Œä½ å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™ä½¿ç”¨å®ƒçš„éƒ¨åˆ†å’Œå…¨éƒ¨ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œä½ ç”šè‡³å¯ä»¥åœ¨æ„Ÿè§‰ä¸åˆ° Spring å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œåœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨ Spring æä¾›çš„å„ç§ä¼˜ç§€çš„åŠŸèƒ½ã€‚</li></ul><blockquote><h3 id="Spring-IoC-å®¹å™¨é…ç½®-Bean-çš„æ–¹å¼ï¼Ÿ"><a href="#Spring-IoC-å®¹å™¨é…ç½®-Bean-çš„æ–¹å¼ï¼Ÿ" class="headerlink" title="Spring IoC å®¹å™¨é…ç½® Bean çš„æ–¹å¼ï¼Ÿ"></a>Spring IoC å®¹å™¨é…ç½® Bean çš„æ–¹å¼ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li>åŸºäº XML æ–‡ä»¶è¿›è¡Œé…ç½®ã€‚</li><li>åŸºäºæ³¨è§£è¿›è¡Œé…ç½®ã€‚</li><li>åŸºäº Java ç¨‹åºè¿›è¡Œé…ç½®ï¼ˆSpring 3+ï¼‰</li></ul><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">Car</span> car<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCar</span><span class="token punctuation">(</span><span class="token class-name">Car</span> car<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>car <span class="token operator">=</span> car<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Person [name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">", car="</span> <span class="token operator">+</span> car <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> brand<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> maxSpeed<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token class-name">String</span> brand<span class="token punctuation">,</span> <span class="token keyword">int</span> maxSpeed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> brand<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>maxSpeed <span class="token operator">=</span> maxSpeed<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Car [brand="</span> <span class="token operator">+</span> brand <span class="token operator">+</span> <span class="token string">", maxSpeed="</span> <span class="token operator">+</span> maxSpeed <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Car</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Person</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Car</span> <span class="token function">car</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token string">"Benz"</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Person</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Jack"</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Person</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">AppConfig</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// TWR (Java 7+)</span>        <span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableApplicationContext</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">AppConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Person</span> person <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="é˜è¿°-Spring-æ¡†æ¶ä¸­-Bean-çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"><a href="#é˜è¿°-Spring-æ¡†æ¶ä¸­-Bean-çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ" class="headerlink" title="é˜è¿° Spring æ¡†æ¶ä¸­ Bean çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"></a>é˜è¿° Spring æ¡†æ¶ä¸­ Bean çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ol><li>Spring IoC å®¹å™¨æ‰¾åˆ°å…³äº Bean çš„å®šä¹‰å¹¶å®ä¾‹åŒ–è¯¥ Beanã€‚</li><li>Spring IoC å®¹å™¨å¯¹ Bean è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚</li><li>å¦‚æœ Bean å®ç°äº† <code>BeanNameAware</code> æ¥å£ï¼Œåˆ™å°†è¯¥ Bean çš„ <code>id</code> ä¼ ç»™ <code>setBeanName</code> æ–¹æ³•ã€‚</li><li>å¦‚æœ Bean å®ç°äº† <code>BeanFactoryAware</code> æ¥å£ï¼Œåˆ™å°† <code>BeanFactory</code> å¯¹è±¡ä¼ ç»™ <code>setBeanFactory</code> æ–¹æ³•ã€‚</li><li>å¦‚æœ Bean å®ç°äº† <code>BeanPostProcessor</code> æ¥å£ï¼Œåˆ™è°ƒç”¨å…¶ <code>postProcessBeforeInitialization</code> æ–¹æ³•ã€‚</li><li>å¦‚æœ Bean å®ç°äº† <code>InitializingBean</code> æ¥å£ï¼Œåˆ™è°ƒç”¨å…¶ <code>afterPropertySet</code> æ–¹æ³•ã€‚</li><li>å¦‚æœæœ‰å’Œ Bean å…³è”çš„ <code>BeanPostProcessors</code> å¯¹è±¡ï¼Œåˆ™è¿™äº›å¯¹è±¡çš„ <code>postProcessAfterInitialization</code> æ–¹æ³•è¢«è°ƒç”¨ã€‚</li><li>å½“é”€æ¯ Bean å®ä¾‹æ—¶ï¼Œå¦‚æœBeanå®ç°äº† <code>DisposableBean</code> æ¥å£ï¼Œåˆ™è°ƒç”¨å…¶ <code>destroy</code> æ–¹æ³•ã€‚</li></ol><blockquote><h3 id="ä¾èµ–æ³¨å…¥æ—¶å¦‚ä½•æ³¨å…¥é›†åˆå±æ€§ï¼Ÿ"><a href="#ä¾èµ–æ³¨å…¥æ—¶å¦‚ä½•æ³¨å…¥é›†åˆå±æ€§ï¼Ÿ" class="headerlink" title="ä¾èµ–æ³¨å…¥æ—¶å¦‚ä½•æ³¨å…¥é›†åˆå±æ€§ï¼Ÿ"></a>ä¾èµ–æ³¨å…¥æ—¶å¦‚ä½•æ³¨å…¥é›†åˆå±æ€§ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¯ä»¥åœ¨å®šä¹‰ Bean å±æ€§æ—¶ï¼Œé€šè¿‡ <code>&lt;list&gt;</code>/<code>&lt;set&gt;</code>/<code>&lt;map&gt;</code>/<code>&lt;props&gt;</code> åˆ†åˆ«ä¸ºå…¶æ³¨å…¥åˆ—è¡¨ã€é›†åˆã€æ˜ å°„å’Œé”®å€¼éƒ½æ˜¯å­—ç¬¦ä¸²çš„æ˜ å°„å±æ€§ã€‚</p><blockquote><h3 id="Spring-ä¸­çš„è‡ªåŠ¨è£…é…æœ‰å“ªäº›é™åˆ¶ï¼Ÿ"><a href="#Spring-ä¸­çš„è‡ªåŠ¨è£…é…æœ‰å“ªäº›é™åˆ¶ï¼Ÿ" class="headerlink" title="Spring ä¸­çš„è‡ªåŠ¨è£…é…æœ‰å“ªäº›é™åˆ¶ï¼Ÿ"></a>Spring ä¸­çš„è‡ªåŠ¨è£…é…æœ‰å“ªäº›é™åˆ¶ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li>å¦‚æœä½¿ç”¨äº†æ„é€ å™¨æ³¨å…¥æˆ–è€… setter æ³¨å…¥ï¼Œé‚£ä¹ˆå°†è¦†ç›–è‡ªåŠ¨è£…é…çš„ä¾èµ–å…³ç³»ã€‚</li><li>åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ã€å­—ç¬¦ä¸²å­—é¢é‡ã€ç±»å­—é¢é‡æ— æ³•ä½¿ç”¨è‡ªåŠ¨è£…é…æ¥æ³¨å…¥ã€‚</li><li>ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨æ˜¾å¼çš„è£…é…æ¥è¿›è¡Œæ›´ç²¾ç¡®çš„ä¾èµ–æ³¨å…¥è€Œä¸æ˜¯ä½¿ç”¨è‡ªåŠ¨è£…é…ã€‚</li></ul><blockquote><h3 id="åœ¨-Web-é¡¹ç›®ä¸­å¦‚ä½•è·å¾—-Spring-çš„-IoC-å®¹å™¨ï¼Ÿ"><a href="#åœ¨-Web-é¡¹ç›®ä¸­å¦‚ä½•è·å¾—-Spring-çš„-IoC-å®¹å™¨ï¼Ÿ" class="headerlink" title="åœ¨ Web é¡¹ç›®ä¸­å¦‚ä½•è·å¾— Spring çš„ IoC å®¹å™¨ï¼Ÿ"></a>åœ¨ Web é¡¹ç›®ä¸­å¦‚ä½•è·å¾— Spring çš„ IoC å®¹å™¨ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">WebApplicationContext</span> ctx <span class="token operator">=</span> <span class="token class-name">WebApplicationContextUtils</span><span class="token punctuation">.</span><span class="token function">getWebApplicationContext</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><blockquote><h3 id="å¤§å‹ç½‘ç«™åœ¨æ¶æ„ä¸Šåº”å½“è€ƒè™‘å“ªäº›é—®é¢˜ï¼Ÿ"><a href="#å¤§å‹ç½‘ç«™åœ¨æ¶æ„ä¸Šåº”å½“è€ƒè™‘å“ªäº›é—®é¢˜ï¼Ÿ" class="headerlink" title="å¤§å‹ç½‘ç«™åœ¨æ¶æ„ä¸Šåº”å½“è€ƒè™‘å“ªäº›é—®é¢˜ï¼Ÿ"></a>å¤§å‹ç½‘ç«™åœ¨æ¶æ„ä¸Šåº”å½“è€ƒè™‘å“ªäº›é—®é¢˜ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li><p>åˆ†å±‚ï¼šåˆ†å±‚æ˜¯å¤„ç†ä»»ä½•å¤æ‚ç³»ç»Ÿæœ€å¸¸è§çš„æ‰‹æ®µä¹‹ä¸€ï¼Œå°†ç³»ç»Ÿæ¨ªå‘åˆ‡åˆ†æˆè‹¥å¹²ä¸ªå±‚é¢ï¼Œæ¯ä¸ªå±‚é¢åªæ‰¿æ‹…å•ä¸€çš„èŒè´£ï¼Œç„¶åé€šè¿‡ä¸‹å±‚ä¸ºä¸Šå±‚æä¾›çš„åŸºç¡€è®¾æ–½å’ŒæœåŠ¡ä»¥åŠä¸Šå±‚å¯¹ä¸‹å±‚çš„è°ƒç”¨æ¥å½¢æˆä¸€ä¸ªå®Œæ•´çš„å¤æ‚çš„ç³»ç»Ÿã€‚è®¡ç®—æœºç½‘ç»œçš„å¼€æ”¾ç³»ç»Ÿäº’è”å‚è€ƒæ¨¡å‹ï¼ˆOSI/RMï¼‰å’Œ Internet çš„ TCP/IP æ¨¡å‹éƒ½æ˜¯åˆ†å±‚ç»“æ„ã€‚</p><p>  å¤§å‹ç½‘ç«™çš„è½¯ä»¶ç³»ç»Ÿä¹Ÿå¯ä»¥ä½¿ç”¨åˆ†å±‚çš„ç†å¿µå°†å…¶åˆ†ä¸º<strong>æŒä¹…å±‚</strong>ï¼ˆæä¾›æ•°æ®å­˜å‚¨å’Œè®¿é—®æœåŠ¡ï¼‰ã€<strong>ä¸šåŠ¡å±‚</strong>ï¼ˆå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œç³»ç»Ÿä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼‰å’Œ<strong>è¡¨ç¤ºå±‚</strong>ï¼ˆç³»ç»Ÿäº¤äº’ã€è§†å›¾å±•ç¤ºï¼‰ã€‚éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼š(1)åˆ†å±‚æ˜¯é€»è¾‘ä¸Šçš„åˆ’åˆ†ï¼Œåœ¨ç‰©ç†ä¸Šå¯ä»¥ä½äºåŒä¸€è®¾å¤‡ä¸Šä¹Ÿå¯ä»¥åœ¨ä¸åŒçš„è®¾å¤‡ä¸Šéƒ¨ç½²ä¸åŒçš„åŠŸèƒ½æ¨¡å—ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨æ›´å¤šçš„è®¡ç®—èµ„æºæ¥åº”å¯¹ç”¨æˆ·çš„å¹¶å‘è®¿é—®ï¼›(2)å±‚ä¸å±‚ä¹‹é—´åº”å½“æœ‰æ¸…æ™°çš„è¾¹ç•Œï¼Œè¿™æ ·åˆ†å±‚æ‰æœ‰æ„ä¹‰ï¼Œæ‰æ›´åˆ©äºè½¯ä»¶çš„å¼€å‘å’Œç»´æŠ¤ã€‚</p></li><li><p>åˆ†å‰²ï¼šåˆ†å‰²æ˜¯å¯¹è½¯ä»¶çš„çºµå‘åˆ‡åˆ†ã€‚æˆ‘ä»¬å¯ä»¥å°†å¤§å‹ç½‘ç«™çš„ä¸åŒåŠŸèƒ½å’ŒæœåŠ¡åˆ†å‰²å¼€ï¼Œå½¢æˆé«˜å†…èšä½è€¦åˆçš„åŠŸèƒ½æ¨¡å—ï¼ˆå•å…ƒï¼‰ã€‚åœ¨è®¾è®¡åˆæœŸå¯ä»¥åšä¸€ä¸ªç²—ç²’åº¦çš„åˆ†å‰²ï¼Œå°†ç½‘ç«™åˆ†å‰²ä¸ºè‹¥å¹²ä¸ªåŠŸèƒ½æ¨¡å—ï¼ŒåæœŸè¿˜å¯ä»¥è¿›ä¸€æ­¥å¯¹æ¯ä¸ªæ¨¡å—è¿›è¡Œç»†ç²’åº¦çš„åˆ†å‰²ï¼Œè¿™æ ·ä¸€æ–¹é¢æœ‰åŠ©äºè½¯ä»¶çš„å¼€å‘å’Œç»´æŠ¤ï¼Œå¦ä¸€æ–¹é¢æœ‰åŠ©äºåˆ†å¸ƒå¼çš„éƒ¨ç½²ï¼Œæä¾›ç½‘ç«™çš„å¹¶å‘å¤„ç†èƒ½åŠ›å’ŒåŠŸèƒ½çš„æ‰©å±•ã€‚</p></li><li><p>åˆ†å¸ƒå¼ï¼šé™¤äº†ä¸Šé¢æåˆ°çš„å†…å®¹ï¼Œç½‘ç«™çš„é™æ€èµ„æºï¼ˆJavaScriptã€CSSã€å›¾ç‰‡ç­‰ï¼‰ä¹Ÿå¯ä»¥é‡‡ç”¨ç‹¬ç«‹åˆ†å¸ƒå¼éƒ¨ç½²å¹¶é‡‡ç”¨ç‹¬ç«‹çš„åŸŸåï¼Œè¿™æ ·å¯ä»¥å‡è½»åº”ç”¨æœåŠ¡å™¨çš„è´Ÿè½½å‹åŠ›ï¼Œä¹Ÿä½¿å¾—æµè§ˆå™¨å¯¹èµ„æºçš„åŠ è½½æ›´å¿«ã€‚æ•°æ®çš„å­˜å–ä¹Ÿåº”è¯¥æ˜¯åˆ†å¸ƒå¼çš„ï¼Œä¼ ç»Ÿçš„å•†ä¸šçº§å…³ç³»å‹æ•°æ®åº“äº§å“åŸºæœ¬ä¸Šéƒ½æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ï¼Œè€Œæ–°ç”Ÿçš„ NoSQL äº§å“å‡ ä¹éƒ½æ˜¯åˆ†å¸ƒå¼çš„ã€‚å½“ç„¶ï¼Œç½‘ç«™åå°çš„ä¸šåŠ¡å¤„ç†ä¹Ÿè¦ä½¿ç”¨åˆ†å¸ƒå¼æŠ€æœ¯ï¼Œä¾‹å¦‚æŸ¥è¯¢ç´¢å¼•çš„æ„å»ºã€æ•°æ®åˆ†æç­‰ï¼Œè¿™äº›ä¸šåŠ¡è®¡ç®—è§„æ¨¡åºå¤§ï¼Œå¯ä»¥ä½¿ç”¨ Hadoop ä»¥åŠ MapReduce åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶æ¥å¤„ç†ã€‚</p></li><li><p>é›†ç¾¤ï¼šé›†ç¾¤ä½¿å¾—æœ‰æ›´å¤šçš„æœåŠ¡å™¨æä¾›ç›¸åŒçš„æœåŠ¡ï¼Œå¯ä»¥æ›´å¥½çš„æä¾›å¯¹å¹¶å‘çš„æ”¯æŒã€‚</p></li><li><p>ç¼“å­˜ï¼šæ‰€è°“ç¼“å­˜å°±æ˜¯ç”¨ç©ºé—´æ¢å–æ—¶é—´çš„æŠ€æœ¯ï¼Œå°†æ•°æ®å°½å¯èƒ½æ”¾åœ¨è·ç¦»è®¡ç®—æœ€è¿‘çš„ä½ç½®ã€‚ä½¿ç”¨ç¼“å­˜æ˜¯ç½‘ç«™ä¼˜åŒ–çš„ç¬¬ä¸€å®šå¾‹ã€‚æˆ‘ä»¬é€šå¸¸è¯´çš„ CDNã€åå‘ä»£ç†ã€çƒ­ç‚¹æ•°æ®éƒ½æ˜¯å¯¹ç¼“å­˜æŠ€æœ¯çš„ä½¿ç”¨ã€‚</p></li><li><p>å¼‚æ­¥ï¼šå¼‚æ­¥æ˜¯å®ç°è½¯ä»¶å®ä½“ä¹‹é—´è§£è€¦åˆçš„åˆä¸€é‡è¦æ‰‹æ®µã€‚å¼‚æ­¥æ¶æ„æ˜¯å…¸å‹çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ï¼ŒäºŒè€…ä¹‹é—´æ²¡æœ‰ç›´æ¥çš„è°ƒç”¨å…³ç³»ï¼Œåªè¦ä¿æŒæ•°æ®ç»“æ„ä¸å˜ï¼Œå½¼æ­¤åŠŸèƒ½å®ç°å¯ä»¥éšæ„å˜åŒ–è€Œä¸äº’ç›¸å½±å“ï¼Œè¿™å¯¹ç½‘ç«™çš„æ‰©å±•éå¸¸æœ‰åˆ©ã€‚ä½¿ç”¨å¼‚æ­¥å¤„ç†è¿˜å¯ä»¥æé«˜ç³»ç»Ÿå¯ç”¨æ€§ï¼ŒåŠ å¿«ç½‘ç«™çš„å“åº”é€Ÿåº¦ï¼ˆç”¨ Ajax åŠ è½½æ•°æ®å°±æ˜¯ä¸€ç§å¼‚æ­¥æŠ€æœ¯ï¼‰ï¼ŒåŒæ—¶è¿˜å¯ä»¥èµ·åˆ°å‰Šå³°ä½œç”¨ï¼ˆåº”å¯¹ç¬æ—¶é«˜å¹¶å‘ï¼‰ã€‚â€œèƒ½æ¨è¿Ÿå¤„ç†çš„éƒ½è¦æ¨è¿Ÿå¤„ç†â€æ˜¯ç½‘ç«™ä¼˜åŒ–çš„ç¬¬äºŒå®šå¾‹ï¼Œè€Œå¼‚æ­¥æ˜¯è·µè¡Œç½‘ç«™ä¼˜åŒ–ç¬¬äºŒå®šå¾‹çš„é‡è¦æ‰‹æ®µã€‚</p></li><li><p>å†—ä½™ï¼šå„ç§æœåŠ¡å™¨éƒ½è¦æä¾›ç›¸åº”çš„å†—ä½™æœåŠ¡å™¨ä»¥ä¾¿åœ¨æŸå°æˆ–æŸäº›æœåŠ¡å™¨å®•æœºæ—¶è¿˜èƒ½ä¿è¯ç½‘ç«™å¯ä»¥æ­£å¸¸å·¥ä½œï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†ç¾éš¾æ¢å¤çš„å¯èƒ½æ€§ã€‚å†—ä½™æ˜¯ç½‘ç«™é«˜å¯ç”¨æ€§çš„é‡è¦ä¿è¯ã€‚</p></li></ul><blockquote><h3 id="ä½ ç”¨è¿‡çš„ç½‘ç«™å‰ç«¯ä¼˜åŒ–çš„æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿ"><a href="#ä½ ç”¨è¿‡çš„ç½‘ç«™å‰ç«¯ä¼˜åŒ–çš„æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="ä½ ç”¨è¿‡çš„ç½‘ç«™å‰ç«¯ä¼˜åŒ–çš„æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿ"></a>ä½ ç”¨è¿‡çš„ç½‘ç«™å‰ç«¯ä¼˜åŒ–çš„æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li><p>æµè§ˆå™¨è®¿é—®ä¼˜åŒ–ï¼š</p><ul><li>å‡å°‘ HTTP è¯·æ±‚æ•°é‡ï¼šåˆå¹¶ CSSã€åˆå¹¶ JavaScriptã€åˆå¹¶å›¾ç‰‡ï¼ˆCSS Spriteï¼‰</li><li>ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜ï¼šé€šè¿‡è®¾ç½® HTTP å“åº”å¤´ä¸­çš„ Cache-Control å’Œ Expires å±æ€§ï¼Œå°† CSSã€JavaScriptã€å›¾ç‰‡ç­‰åœ¨æµè§ˆå™¨ä¸­ç¼“å­˜ï¼Œå½“è¿™äº›é™æ€èµ„æºéœ€è¦æ›´æ–°æ—¶ï¼Œå¯ä»¥æ›´æ–° HTML æ–‡ä»¶ä¸­çš„å¼•ç”¨æ¥è®©æµè§ˆå™¨é‡æ–°è¯·æ±‚æ–°çš„èµ„æº</li><li>å¯ç”¨å‹ç¼©</li><li>CSS å‰ç½®ï¼ŒJavaScript åç½®</li><li>å‡å°‘ Cookie ä¼ è¾“</li></ul></li><li><p>CDN åŠ é€Ÿï¼šCDNï¼ˆContent Distribute Networkï¼‰çš„æœ¬è´¨ä»ç„¶æ˜¯ç¼“å­˜ï¼Œå°†æ•°æ®ç¼“å­˜åœ¨ç¦»ç”¨æˆ·æœ€è¿‘çš„åœ°æ–¹ï¼ŒCDN é€šå¸¸éƒ¨ç½²åœ¨ç½‘ç»œè¿è¥å•†çš„æœºæˆ¿ï¼Œä¸ä»…å¯ä»¥æå‡å“åº”é€Ÿåº¦ï¼Œè¿˜å¯ä»¥å‡å°‘åº”ç”¨æœåŠ¡å™¨çš„å‹åŠ›ã€‚å½“ç„¶ï¼ŒCDN ç¼“å­˜çš„é€šå¸¸éƒ½æ˜¯é™æ€èµ„æºã€‚</p></li><li><p>åå‘ä»£ç†ï¼šåå‘ä»£ç†ç›¸å½“äºåº”ç”¨æœåŠ¡å™¨çš„ä¸€ä¸ªé—¨é¢ï¼Œå¯ä»¥ä¿æŠ¤ç½‘ç«™çš„å®‰å…¨æ€§ï¼Œä¹Ÿå¯ä»¥å®ç°è´Ÿè½½å‡è¡¡çš„åŠŸèƒ½ï¼Œå½“ç„¶æœ€é‡è¦çš„æ˜¯å®ƒç¼“å­˜äº†ç”¨æˆ·è®¿é—®çš„çƒ­ç‚¹èµ„æºï¼Œå¯ä»¥ç›´æ¥ä»åå‘ä»£ç†å°†æŸäº›å†…å®¹è¿”å›ç»™ç”¨æˆ·æµè§ˆå™¨ã€‚</p></li></ul><blockquote><h3 id="ä½ ä½¿ç”¨è¿‡çš„åº”ç”¨æœåŠ¡å™¨ä¼˜åŒ–æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿ"><a href="#ä½ ä½¿ç”¨è¿‡çš„åº”ç”¨æœåŠ¡å™¨ä¼˜åŒ–æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="ä½ ä½¿ç”¨è¿‡çš„åº”ç”¨æœåŠ¡å™¨ä¼˜åŒ–æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿ"></a>ä½ ä½¿ç”¨è¿‡çš„åº”ç”¨æœåŠ¡å™¨ä¼˜åŒ–æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li><p>åˆ†å¸ƒå¼ç¼“å­˜ï¼šç¼“å­˜çš„æœ¬è´¨å°±æ˜¯å†…å­˜ä¸­çš„å“ˆå¸Œè¡¨ï¼Œå¦‚æœè®¾è®¡ä¸€ä¸ªä¼˜è´¨çš„å“ˆå¸Œå‡½æ•°ï¼Œé‚£ä¹ˆç†è®ºä¸Šå“ˆå¸Œè¡¨è¯»å†™çš„æ¸è¿‘æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚ç¼“å­˜ä¸»è¦ç”¨æ¥å­˜æ”¾é‚£äº›è¯»å†™æ¯”å¾ˆé«˜ã€å˜åŒ–å¾ˆå°‘çš„æ•°æ®ï¼Œè¿™æ ·åº”ç”¨ç¨‹åºè¯»å–æ•°æ®æ—¶å…ˆåˆ°ç¼“å­˜ä¸­è¯»å–ï¼Œå¦‚æœæ²¡æœ‰æˆ–è€…æ•°æ®å·²ç»å¤±æ•ˆå†å»è®¿é—®æ•°æ®åº“æˆ–æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶æ ¹æ®æ‹Ÿå®šçš„è§„åˆ™å°†æ•°æ®å†™å…¥ç¼“å­˜ã€‚å¯¹ç½‘ç«™æ•°æ®çš„è®¿é—®ä¹Ÿç¬¦åˆäºŒå…«å®šå¾‹ï¼ˆPareto åˆ†å¸ƒï¼Œå¹‚å¾‹åˆ†å¸ƒï¼‰ï¼Œå³ 80% çš„è®¿é—®éƒ½é›†ä¸­åœ¨ 20% çš„æ•°æ®ä¸Šï¼Œå¦‚æœèƒ½å¤Ÿå°†è¿™ 20% çš„æ•°æ®ç¼“å­˜èµ·æ¥ï¼Œé‚£ä¹ˆç³»ç»Ÿçš„æ€§èƒ½å°†å¾—åˆ°æ˜¾è‘—çš„æ”¹å–„ã€‚å½“ç„¶ï¼Œä½¿ç”¨ç¼“å­˜éœ€è¦è§£å†³ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p><ul><li>é¢‘ç¹ä¿®æ”¹çš„æ•°æ®ï¼›</li><li>æ•°æ®ä¸ä¸€è‡´ä¸è„è¯»ï¼›</li><li>ç¼“å­˜é›ªå´©ï¼ˆå¯ä»¥é‡‡ç”¨åˆ†å¸ƒå¼ç¼“å­˜æœåŠ¡å™¨é›†ç¾¤åŠ ä»¥è§£å†³ï¼Œ<a href="http://memcached.org/">memcached</a> æ˜¯å¹¿æ³›é‡‡ç”¨çš„è§£å†³æ–¹æ¡ˆï¼‰ï¼›</li><li>ç¼“å­˜é¢„çƒ­ï¼›</li><li>ç¼“å­˜ç©¿é€ï¼ˆæ¶æ„æŒç»­è¯·æ±‚ä¸å­˜åœ¨çš„æ•°æ®ï¼‰ã€‚</li></ul></li><li><p>å¼‚æ­¥æ“ä½œï¼šå¯ä»¥ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å°†è°ƒç”¨å¼‚æ­¥åŒ–ï¼Œé€šè¿‡å¼‚æ­¥å¤„ç†å°†çŸ­æ—¶é—´é«˜å¹¶å‘äº§ç”Ÿçš„äº‹ä»¶æ¶ˆæ¯å­˜å‚¨åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œä»è€Œèµ·åˆ°å‰Šå³°ä½œç”¨ã€‚ç”µå•†ç½‘ç«™åœ¨è¿›è¡Œä¿ƒé”€æ´»åŠ¨æ—¶ï¼Œå¯ä»¥å°†ç”¨æˆ·çš„è®¢å•è¯·æ±‚å­˜å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¿™æ ·å¯ä»¥æŠµå¾¡å¤§é‡çš„å¹¶å‘è®¢å•è¯·æ±‚å¯¹ç³»ç»Ÿå’Œæ•°æ®åº“çš„å†²å‡»ã€‚ç›®å‰ï¼Œç»å¤§å¤šæ•°çš„ç”µå•†ç½‘ç«™å³ä¾¿ä¸è¿›è¡Œä¿ƒé”€æ´»åŠ¨ï¼Œè®¢å•ç³»ç»Ÿéƒ½é‡‡ç”¨äº†æ¶ˆæ¯é˜Ÿåˆ—æ¥å¤„ç†ã€‚</p></li><li><p>ä½¿ç”¨é›†ç¾¤ã€‚</p></li><li><p>ä»£ç ä¼˜åŒ–ï¼š</p><ul><li>å¤šçº¿ç¨‹ï¼šåŸºäº Java çš„ Web å¼€å‘åŸºæœ¬ä¸Šéƒ½é€šè¿‡å¤šçº¿ç¨‹çš„æ–¹å¼å“åº”ç”¨æˆ·çš„å¹¶å‘è¯·æ±‚ï¼Œä½¿ç”¨å¤šçº¿ç¨‹æŠ€æœ¯åœ¨ç¼–ç¨‹ä¸Šè¦è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä¸»è¦å¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š<ul><li>å°†å¯¹è±¡è®¾è®¡ä¸ºæ— çŠ¶æ€å¯¹è±¡ï¼ˆè¿™å’Œé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è§‚ç‚¹æ˜¯çŸ›ç›¾çš„ï¼Œåœ¨é¢å‘å¯¹è±¡çš„ä¸–ç•Œä¸­è¢«è§†ä¸ºä¸è‰¯è®¾è®¡ï¼‰ï¼Œè¿™æ ·å°±ä¸ä¼šå­˜åœ¨å¹¶å‘è®¿é—®æ—¶å¯¹è±¡çŠ¶æ€ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</li><li>åœ¨æ–¹æ³•å†…éƒ¨åˆ›å»ºå¯¹è±¡ï¼Œè¿™æ ·å¯¹è±¡ç”±è¿›å…¥æ–¹æ³•çš„çº¿ç¨‹åˆ›å»ºï¼Œä¸ä¼šå‡ºç°å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€å¯¹è±¡çš„é—®é¢˜ã€‚ä½¿ç”¨ ThreadLocal å°†å¯¹è±¡ä¸çº¿ç¨‹ç»‘å®šä¹Ÿæ˜¯å¾ˆå¥½çš„åšæ³•ï¼Œè¿™ä¸€ç‚¹åœ¨å‰é¢å·²ç»æ¢è®¨è¿‡äº†ã€‚</li><li>å¯¹èµ„æºè¿›è¡Œå¹¶å‘è®¿é—®æ—¶åº”å½“ä½¿ç”¨åˆç†çš„é”æœºåˆ¶ã€‚</li></ul></li><li>éé˜»å¡ I/Oï¼š ä½¿ç”¨å•çº¿ç¨‹å’Œéé˜»å¡ I/O æ˜¯ç›®å‰å…¬è®¤çš„æ¯”å¤šçº¿ç¨‹çš„æ–¹å¼æ›´èƒ½å……åˆ†å‘æŒ¥æœåŠ¡å™¨æ€§èƒ½çš„åº”ç”¨æ¨¡å¼ï¼ŒåŸºäº Node.js æ„å»ºçš„æœåŠ¡å™¨å°±é‡‡ç”¨äº†è¿™æ ·çš„æ–¹å¼ã€‚Java åœ¨ JDK 1.4 ä¸­å°±å¼•å…¥äº† NIOï¼ˆNon-blocking I/Oï¼‰,åœ¨ Servlet 3 è§„èŒƒä¸­åˆå¼•å…¥äº†å¼‚æ­¥ Servlet çš„æ¦‚å¿µï¼Œè¿™äº›éƒ½ä¸ºåœ¨æœåŠ¡å™¨ç«¯é‡‡ç”¨éé˜»å¡ I/O æä¾›äº†å¿…è¦çš„åŸºç¡€ã€‚</li><li>èµ„æºå¤ç”¨ï¼šèµ„æºå¤ç”¨ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€æ˜¯å•ä¾‹ï¼ŒäºŒæ˜¯å¯¹è±¡æ± ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ•°æ®åº“è¿æ¥æ± ã€çº¿ç¨‹æ± éƒ½æ˜¯å¯¹è±¡æ± åŒ–æŠ€æœ¯ï¼Œè¿™æ˜¯å…¸å‹çš„ç”¨ç©ºé—´æ¢å–æ—¶é—´çš„ç­–ç•¥ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå®ç°å¯¹èµ„æºçš„å¤ç”¨ï¼Œä»è€Œé¿å…äº†ä¸å¿…è¦çš„åˆ›å»ºå’Œé‡Šæ”¾èµ„æºæ‰€å¸¦æ¥çš„å¼€é”€ã€‚</li></ul></li></ul><blockquote><h3 id="ä»€ä¹ˆæ˜¯-XSS-æ”»å‡»ï¼Ÿä»€ä¹ˆæ˜¯-SQL-æ³¨å…¥æ”»å‡»ï¼Ÿä»€ä¹ˆæ˜¯-CSRF-æ”»å‡»ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-XSS-æ”»å‡»ï¼Ÿä»€ä¹ˆæ˜¯-SQL-æ³¨å…¥æ”»å‡»ï¼Ÿä»€ä¹ˆæ˜¯-CSRF-æ”»å‡»ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ XSS æ”»å‡»ï¼Ÿä»€ä¹ˆæ˜¯ SQL æ³¨å…¥æ”»å‡»ï¼Ÿä»€ä¹ˆæ˜¯ CSRF æ”»å‡»ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ XSS æ”»å‡»ï¼Ÿä»€ä¹ˆæ˜¯ SQL æ³¨å…¥æ”»å‡»ï¼Ÿä»€ä¹ˆæ˜¯ CSRF æ”»å‡»ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li><p>XSSï¼ˆCross Site Scriptï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰æ˜¯å‘ç½‘é¡µä¸­æ³¨å…¥æ¶æ„è„šæœ¬åœ¨ç”¨æˆ·æµè§ˆç½‘é¡µæ—¶åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­æ‰§è¡Œæ¶æ„è„šæœ¬çš„æ”»å‡»æ–¹å¼ã€‚è·¨ç«™è„šæœ¬æ”»å‡»åˆ†æœ‰ä¸¤ç§å½¢å¼ï¼šåå°„å‹æ”»å‡»ï¼ˆè¯±ä½¿ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªåµŒå…¥æ¶æ„è„šæœ¬çš„é“¾æ¥ä»¥è¾¾åˆ°æ”»å‡»çš„ç›®æ ‡ï¼Œç›®å‰æœ‰å¾ˆå¤šæ”»å‡»è€…åˆ©ç”¨è®ºå›ã€å¾®åšå‘å¸ƒå«æœ‰æ¶æ„è„šæœ¬çš„ URL å°±å±äºè¿™ç§æ–¹å¼ï¼‰å’ŒæŒä¹…å‹æ”»å‡»ï¼ˆå°†æ¶æ„è„šæœ¬æäº¤åˆ°è¢«æ”»å‡»ç½‘ç«™çš„æ•°æ®åº“ä¸­ï¼Œç”¨æˆ·æµè§ˆç½‘é¡µæ—¶ï¼Œæ¶æ„è„šæœ¬ä»æ•°æ®åº“ä¸­è¢«åŠ è½½åˆ°é¡µé¢æ‰§è¡Œï¼ŒQQ é‚®ç®±çš„æ—©æœŸç‰ˆæœ¬å°±æ›¾ç»è¢«åˆ©ç”¨ä½œä¸ºæŒä¹…å‹è·¨ç«™è„šæœ¬æ”»å‡»çš„å¹³å°ï¼‰ã€‚XSS è™½ç„¶ä¸æ˜¯ä»€ä¹ˆæ–°é²œç©æ„ï¼Œä½†æ˜¯æ”»å‡»çš„æ‰‹æ³•å´ä¸æ–­ç¿»æ–°ï¼Œé˜²èŒƒ XSS ä¸»è¦æœ‰ä¸¤æ–¹é¢ï¼šæ¶ˆæ¯’ï¼ˆå¯¹å±é™©å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼‰å’Œ HttpOnlyï¼ˆé˜²èŒƒ XSS æ”»å‡»è€…çªƒå– Cookie æ•°æ®ï¼‰ã€‚</p></li><li><p>SQL æ³¨å…¥æ”»å‡»æ˜¯æ³¨å…¥æ”»å‡»æœ€å¸¸è§çš„å½¢å¼ï¼ˆæ­¤å¤–è¿˜æœ‰ OS æ³¨å…¥æ”»å‡»ï¼ˆStruts 2 çš„é«˜å±æ¼æ´å°±æ˜¯é€šè¿‡ OGNL å®æ–½ OS æ³¨å…¥æ”»å‡»å¯¼è‡´çš„ï¼‰ï¼‰ï¼Œå½“æœåŠ¡å™¨ä½¿ç”¨è¯·æ±‚å‚æ•°æ„é€  SQL è¯­å¥æ—¶ï¼Œæ¶æ„çš„ SQL è¢«åµŒå…¥åˆ° SQL ä¸­äº¤ç»™æ•°æ®åº“æ‰§è¡Œã€‚SQL æ³¨å…¥æ”»å‡»éœ€è¦æ”»å‡»è€…å¯¹æ•°æ®åº“ç»“æ„æœ‰æ‰€äº†è§£æ‰èƒ½è¿›è¡Œï¼Œæ”»å‡»è€…æƒ³è¦è·å¾—è¡¨ç»“æ„æœ‰å¤šç§æ–¹å¼ï¼š(1)å¦‚æœä½¿ç”¨å¼€æºç³»ç»Ÿæ­å»ºç½‘ç«™ï¼Œæ•°æ®åº“ç»“æ„ä¹Ÿæ˜¯å…¬å¼€çš„ï¼ˆç›®å‰æœ‰å¾ˆå¤šç°æˆçš„ç³»ç»Ÿå¯ä»¥ç›´æ¥æ­å»ºè®ºå›ï¼Œç”µå•†ç½‘ç«™ï¼Œè™½ç„¶æ–¹ä¾¿å¿«æ·ä½†æ˜¯é£é™©æ˜¯å¿…é¡»è¦è®¤çœŸè¯„ä¼°çš„ï¼‰ï¼›(2)é”™è¯¯å›æ˜¾ï¼ˆå¦‚æœå°†æœåŠ¡å™¨çš„é”™è¯¯ä¿¡æ¯ç›´æ¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡éæ³•å‚æ•°å¼•å‘é¡µé¢é”™è¯¯ä»è€Œé€šè¿‡é”™è¯¯ä¿¡æ¯äº†è§£æ•°æ®åº“ç»“æ„ï¼ŒWeb åº”ç”¨åº”å½“è®¾ç½®å‹å¥½çš„é”™è¯¯é¡µï¼Œä¸€æ–¹é¢ç¬¦åˆæœ€å°æƒŠè®¶åŸåˆ™ï¼Œä¸€æ–¹é¢å±è”½æ‰å¯èƒ½ç»™ç³»ç»Ÿå¸¦æ¥å±é™©çš„é”™è¯¯å›æ˜¾ä¿¡æ¯ï¼‰ï¼›(3)ç›²æ³¨ã€‚é˜²èŒƒ SQL æ³¨å…¥æ”»å‡»ä¹Ÿå¯ä»¥é‡‡ç”¨æ¶ˆæ¯’çš„æ–¹å¼ï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å¯¹è¯·æ±‚å‚æ•°è¿›è¡ŒéªŒè¯ï¼Œæ­¤å¤–ï¼Œå‚æ•°ç»‘å®šä¹Ÿæ˜¯å¾ˆå¥½çš„æ‰‹æ®µï¼Œè¿™æ ·æ¶æ„çš„ SQL ä¼šè¢«å½“åš SQL çš„å‚æ•°è€Œä¸æ˜¯å‘½ä»¤è¢«æ‰§è¡Œï¼ŒJDBC ä¸­çš„ <code>PreparedStatement</code> å°±æ˜¯æ”¯æŒå‚æ•°ç»‘å®šçš„è¯­å¥å¯¹è±¡ï¼Œä»æ€§èƒ½å’Œå®‰å…¨æ€§ä¸Šéƒ½æ˜æ˜¾ä¼˜äº <code>Statement</code>ã€‚</p></li><li><p>CSRF æ”»å‡»ï¼ˆCross Site Request Forgeryï¼Œè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰æ˜¯æ”»å‡»è€…é€šè¿‡è·¨ç«™è¯·æ±‚ï¼Œä»¥åˆæ³•çš„ç”¨æˆ·èº«ä»½è¿›è¡Œéæ³•æ“ä½œï¼ˆå¦‚è½¬è´¦æˆ–å‘å¸–ç­‰ï¼‰ã€‚CSRF çš„åŸç†æ˜¯åˆ©ç”¨æµè§ˆå™¨çš„ Cookie æˆ–æœåŠ¡å™¨çš„ Sessionï¼Œç›—å–ç”¨æˆ·èº«ä»½ï¼Œå…¶åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚é˜²èŒƒ CSRF çš„ä¸»è¦æ‰‹æ®µæ˜¯è¯†åˆ«è¯·æ±‚è€…çš„èº«ä»½ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š(1)åœ¨è¡¨å•ä¸­æ·»åŠ ä»¤ç‰Œï¼ˆtokenï¼‰ï¼›(2)éªŒè¯ç ï¼›(3)æ£€æŸ¥è¯·æ±‚å¤´ä¸­çš„ Refererï¼ˆå‰é¢æåˆ°é˜²å›¾ç‰‡ç›—é“¾æ¥ä¹Ÿæ˜¯ç”¨çš„è¿™ç§æ–¹å¼ï¼‰ã€‚ä»¤ç‰Œå’ŒéªŒè¯éƒ½å…·æœ‰ä¸€æ¬¡æ¶ˆè´¹æ€§çš„ç‰¹å¾ï¼Œå› æ­¤åœ¨åŸç†ä¸Šä¸€è‡´çš„ï¼Œä½†æ˜¯éªŒè¯ç æ˜¯ä¸€ç§ç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒï¼Œä¸æ˜¯å¿…è¦çš„æƒ…å†µä¸‹ä¸è¦è½»æ˜“ä½¿ç”¨éªŒè¯ç ï¼Œç›®å‰å¾ˆå¤šç½‘ç«™çš„åšæ³•æ˜¯å¦‚æœåœ¨çŸ­æ—¶é—´å†…å¤šæ¬¡æäº¤ä¸€ä¸ªè¡¨å•æœªè·å¾—æˆåŠŸåæ‰è¦æ±‚æä¾›éªŒè¯ç ï¼Œè¿™æ ·ä¼šè·å¾—è¾ƒå¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p></li></ul><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/168.png" alt></p><p><strong>è¡¥å……ï¼š</strong>é˜²ç«å¢™çš„æ¶è®¾æ˜¯ Web å®‰å…¨çš„é‡è¦ä¿éšœï¼Œ<a href="https://www.modsecurity.org/">ModSecurity</a> æ˜¯å¼€æºçš„ Web é˜²ç«å¢™ä¸­çš„ä½¼ä½¼è€…ã€‚ä¼ä¸šçº§é˜²ç«å¢™çš„æ¶è®¾åº”å½“æœ‰ä¸¤çº§é˜²ç«å¢™ï¼ŒWeb æœåŠ¡å™¨å’Œéƒ¨åˆ†åº”ç”¨æœåŠ¡å™¨å¯ä»¥æ¶è®¾åœ¨ä¸¤çº§é˜²ç«å¢™ä¹‹é—´çš„ DMZï¼Œè€Œæ•°æ®å’Œèµ„æºæœåŠ¡å™¨åº”å½“æ¶è®¾åœ¨ç¬¬äºŒçº§é˜²ç«å¢™ä¹‹åã€‚</p><blockquote><h3 id="ä»€ä¹ˆæ˜¯é¢†åŸŸæ¨¡å‹ï¼ˆdomain-modelï¼‰ï¼Ÿè´«è¡€æ¨¡å‹ï¼ˆanaemic-domain-modelï¼‰å’Œå……è¡€æ¨¡å‹ï¼ˆrich-domain-modelï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é¢†åŸŸæ¨¡å‹ï¼ˆdomain-modelï¼‰ï¼Ÿè´«è¡€æ¨¡å‹ï¼ˆanaemic-domain-modelï¼‰å’Œå……è¡€æ¨¡å‹ï¼ˆrich-domain-modelï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é¢†åŸŸæ¨¡å‹ï¼ˆdomain modelï¼‰ï¼Ÿè´«è¡€æ¨¡å‹ï¼ˆanaemic domain modelï¼‰å’Œå……è¡€æ¨¡å‹ï¼ˆrich domain modelï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯é¢†åŸŸæ¨¡å‹ï¼ˆdomain modelï¼‰ï¼Ÿè´«è¡€æ¨¡å‹ï¼ˆanaemic domain modelï¼‰å’Œå……è¡€æ¨¡å‹ï¼ˆrich domain modelï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼šé¢†åŸŸæ¨¡å‹æ˜¯é¢†åŸŸå†…çš„æ¦‚å¿µç±»æˆ–ç°å®ä¸–ç•Œä¸­å¯¹è±¡çš„å¯è§†åŒ–è¡¨ç¤ºï¼Œåˆç§°ä¸ºæ¦‚å¿µæ¨¡å‹æˆ–åˆ†æå¯¹è±¡æ¨¡å‹ï¼Œå®ƒä¸“æ³¨äºåˆ†æé—®é¢˜é¢†åŸŸæœ¬èº«ï¼Œå‘æ˜é‡è¦çš„ä¸šåŠ¡é¢†åŸŸæ¦‚å¿µï¼Œå¹¶å»ºç«‹ä¸šåŠ¡é¢†åŸŸæ¦‚å¿µä¹‹é—´çš„å…³ç³»ã€‚è´«è¡€æ¨¡å‹æ˜¯æŒ‡ä½¿ç”¨çš„é¢†åŸŸå¯¹è±¡ä¸­åªæœ‰ <code>setter</code> å’Œ <code>getter</code> æ–¹æ³•ï¼ˆPOJOï¼‰ï¼Œæ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘éƒ½ä¸åŒ…å«åœ¨é¢†åŸŸå¯¹è±¡ä¸­è€Œæ˜¯æ”¾åœ¨ä¸šåŠ¡é€»è¾‘å±‚ã€‚æœ‰äººå°†æˆ‘ä»¬è¿™é‡Œè¯´çš„è´«è¡€æ¨¡å‹è¿›ä¸€æ­¥åˆ’åˆ†æˆå¤±è¡€æ¨¡å‹ï¼ˆé¢†åŸŸå¯¹è±¡å®Œå…¨æ²¡æœ‰ä¸šåŠ¡é€»è¾‘ï¼‰å’Œè´«è¡€æ¨¡å‹ï¼ˆé¢†åŸŸå¯¹è±¡æœ‰å°‘é‡çš„ä¸šåŠ¡é€»è¾‘ï¼‰ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä¸å¯¹æ­¤åŠ ä»¥åŒºåˆ†äº†ã€‚å……è¡€æ¨¡å‹å°†å¤§å¤šæ•°ä¸šåŠ¡é€»è¾‘å’ŒæŒä¹…åŒ–æ”¾åœ¨é¢†åŸŸå¯¹è±¡ä¸­ï¼Œä¸šåŠ¡é€»è¾‘ï¼ˆä¸šåŠ¡é—¨é¢ï¼‰åªæ˜¯å®Œæˆå¯¹ä¸šåŠ¡é€»è¾‘çš„å°è£…ã€äº‹åŠ¡å’Œæƒé™ç­‰çš„å¤„ç†ã€‚ä¸‹é¢ä¸¤å¼ å›¾åˆ†åˆ«å±•ç¤ºäº†è´«è¡€æ¨¡å‹å’Œå……è¡€æ¨¡å‹çš„åˆ†å±‚æ¶æ„ã€‚</p><p>è´«è¡€æ¨¡å‹</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/169_1.png" alt></p><p>å……è¡€æ¨¡å‹</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/169_2.png" alt></p><p>è´«è¡€æ¨¡å‹ä¸‹ç»„ç»‡é¢†åŸŸé€»è¾‘é€šå¸¸ä½¿ç”¨äº‹åŠ¡è„šæœ¬æ¨¡å¼ï¼Œè®©æ¯ä¸ªè¿‡ç¨‹å¯¹åº”ç”¨æˆ·å¯èƒ½è¦åšçš„ä¸€ä¸ªåŠ¨ä½œï¼Œæ¯ä¸ªåŠ¨ä½œç”±ä¸€ä¸ªè¿‡ç¨‹æ¥é©±åŠ¨ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨è®¾è®¡ä¸šåŠ¡é€»è¾‘æ¥å£çš„æ—¶å€™ï¼Œæ¯ä¸ªæ–¹æ³•å¯¹åº”ç€ç”¨æˆ·çš„ä¸€ä¸ªæ“ä½œï¼Œè¿™ç§æ¨¡å¼æœ‰ä»¥ä¸‹å‡ ä¸ªæœ‰ç‚¹ï¼š</p><ul><li>å®ƒæ˜¯ä¸€ä¸ªå¤§å¤šæ•°å¼€å‘è€…éƒ½èƒ½å¤Ÿç†è§£çš„ç®€å•è¿‡ç¨‹æ¨¡å‹ï¼ˆé€‚åˆå›½å†…çš„ç»å¤§å¤šæ•°å¼€å‘è€…ï¼‰ã€‚</li><li>å®ƒèƒ½å¤Ÿä¸ä¸€ä¸ªä½¿ç”¨è¡Œæ•°æ®å…¥å£æˆ–è¡¨æ•°æ®å…¥å£çš„ç®€å•æ•°æ®è®¿é—®å±‚å¾ˆå¥½çš„åä½œã€‚</li><li>äº‹åŠ¡è¾¹ç•Œçš„æ˜¾è€Œæ˜“è§ï¼Œä¸€ä¸ªäº‹åŠ¡å¼€å§‹äºè„šæœ¬çš„å¼€å§‹ï¼Œç»ˆæ­¢äºè„šæœ¬çš„ç»“æŸï¼Œå¾ˆå®¹æ˜“é€šè¿‡ä»£ç†ï¼ˆæˆ–åˆ‡é¢ï¼‰å®ç°å£°æ˜å¼äº‹åŠ¡ã€‚</li></ul><p>ç„¶è€Œï¼Œäº‹åŠ¡è„šæœ¬æ¨¡å¼çš„ç¼ºç‚¹ä¹Ÿæ˜¯å¾ˆå¤šçš„ï¼Œéšç€é¢†åŸŸé€»è¾‘å¤æ‚æ€§çš„å¢åŠ ï¼Œç³»ç»Ÿçš„å¤æ‚æ€§å°†è¿…é€Ÿå¢åŠ ï¼Œç¨‹åºç»“æ„å°†å˜å¾—æåº¦æ··ä¹±ã€‚å¼€æºä¸­å›½ç¤¾åŒºä¸Šæœ‰ä¸€ç¯‡å¾ˆå¥½çš„è¯‘æ–‡<a href="https://www.oschina.net/translate/how-anaemic-domain-models-cause-bad-software">ã€Šè´«è¡€é¢†åŸŸæ¨¡å‹æ˜¯å¦‚ä½•å¯¼è‡´ç³Ÿç³•çš„è½¯ä»¶äº§ç”Ÿã€‹</a>å¯¹è¿™ä¸ªé—®é¢˜åšäº†æ¯”è¾ƒç»†è‡´çš„é˜è¿°ã€‚</p><blockquote><h3 id="è°ˆä¸€è°ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰çš„å¥½å¤„ä»¥åŠä½ çš„ç†è§£ã€‚"><a href="#è°ˆä¸€è°ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰çš„å¥½å¤„ä»¥åŠä½ çš„ç†è§£ã€‚" class="headerlink" title="è°ˆä¸€è°ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰çš„å¥½å¤„ä»¥åŠä½ çš„ç†è§£ã€‚"></a>è°ˆä¸€è°ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰çš„å¥½å¤„ä»¥åŠä½ çš„ç†è§£ã€‚</h3></blockquote><p>ç­”ï¼šTDD æ˜¯æŒ‡åœ¨ç¼–å†™çœŸæ­£çš„åŠŸèƒ½å®ç°ä»£ç ä¹‹å‰å…ˆå†™æµ‹è¯•ä»£ç ï¼Œç„¶åæ ¹æ®éœ€è¦é‡æ„å®ç°ä»£ç ã€‚åœ¨ JUnit çš„ä½œè€… Kent Beck çš„å¤§ä½œã€Šæµ‹è¯•é©±åŠ¨å¼€å‘ï¼šå®æˆ˜ä¸æ¨¡å¼è§£æã€‹ï¼ˆTest-Driven Development: by Exampleï¼‰ä¸€ä¹¦ä¸­æœ‰è¿™ä¹ˆä¸€æ®µå†…å®¹ï¼šâ€œæ¶ˆé™¤ææƒ§å’Œä¸ç¡®å®šæ€§æ˜¯ç¼–å†™æµ‹è¯•é©±åŠ¨ä»£ç çš„é‡è¦åŸå› â€ã€‚å› ä¸ºç¼–å†™ä»£ç æ—¶çš„ææƒ§ä¼šè®©ä½ å°å¿ƒè¯•æ¢ï¼Œè®©ä½ å›é¿æ²Ÿé€šï¼Œè®©ä½ ç¾äºå¾—åˆ°åé¦ˆï¼Œè®©ä½ å˜å¾—ç„¦èºä¸å®‰ï¼Œè€Œ TDD æ˜¯æ¶ˆé™¤ææƒ§ã€è®© Java å¼€å‘è€…æ›´åŠ è‡ªä¿¡æ›´åŠ ä¹äºæ²Ÿé€šçš„é‡è¦æ‰‹æ®µã€‚TDD ä¼šå¸¦æ¥çš„å¥½å¤„å¯èƒ½ä¸ä¼šé©¬ä¸Šå‘ˆç°ï¼Œä½†æ˜¯ä½ åœ¨æŸä¸ªæ—¶å€™ä¸€å®šä¼šå‘ç°ï¼Œè¿™äº›å¥½å¤„åŒ…æ‹¬ï¼š</p><ul><li>æ›´æ¸…æ™°çš„ä»£ç  â€” åªå†™éœ€è¦çš„ä»£ç </li><li>æ›´å¥½çš„è®¾è®¡</li><li>æ›´å‡ºè‰²çš„çµæ´»æ€§ â€” é¼“åŠ±ç¨‹åºå‘˜é¢å‘æ¥å£ç¼–ç¨‹</li><li>æ›´å¿«é€Ÿçš„åé¦ˆ â€” ä¸ä¼šåˆ°ç³»ç»Ÿä¸Šçº¿æ—¶æ‰çŸ¥é“bugçš„å­˜åœ¨</li></ul><p><strong>è¡¥å……ï¼š</strong>æ•æ·è½¯ä»¶å¼€å‘çš„æ¦‚å¿µå·²ç»æœ‰å¾ˆå¤šå¹´äº†ï¼Œè€Œä¸”ä¹Ÿéƒ¨åˆ†çš„æ”¹å˜äº†è½¯ä»¶å¼€å‘è¿™ä¸ªè¡Œä¸šï¼ŒTDD ä¹Ÿæ˜¯æ•æ·å¼€å‘æ‰€å€¡å¯¼çš„ã€‚</p><p>TDD å¯ä»¥åœ¨å¤šä¸ªå±‚çº§ä¸Šåº”ç”¨ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ï¼ˆæµ‹è¯•ä¸€ä¸ªç±»ä¸­çš„ä»£ç ï¼‰ã€é›†æˆæµ‹è¯•ï¼ˆæµ‹è¯•ç±»ä¹‹é—´çš„äº¤äº’ï¼‰ã€ç³»ç»Ÿæµ‹è¯•ï¼ˆæµ‹è¯•è¿è¡Œçš„ç³»ç»Ÿï¼‰å’Œç³»ç»Ÿé›†æˆæµ‹è¯•ï¼ˆæµ‹è¯•è¿è¡Œçš„ç³»ç»ŸåŒ…æ‹¬ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼‰ã€‚TDD çš„å®æ–½æ­¥éª¤æ˜¯ï¼šçº¢ï¼ˆå¤±è´¥æµ‹è¯•ï¼‰- ç»¿ï¼ˆé€šè¿‡æµ‹è¯•ï¼‰ - é‡æ„ã€‚å…³äºå®æ–½ TDD çš„è¯¦ç»†æ­¥éª¤è¯·å‚è€ƒå¦ä¸€ç¯‡æ–‡ç« <a href="https://blog.csdn.net/jackfrued/article/details/44433249">ã€Šæµ‹è¯•é©±åŠ¨å¼€å‘ä¹‹åˆçª¥é—¨å¾„ã€‹</a>ã€‚</p><p>åœ¨ä½¿ç”¨ TDD å¼€å‘æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦è¢«æµ‹å¯¹è±¡éœ€è¦ä¾èµ–å…¶ä»–å­ç³»ç»Ÿçš„æƒ…å†µï¼Œä½†æ˜¯ä½ å¸Œæœ›å°†æµ‹è¯•ä»£ç è·Ÿä¾èµ–é¡¹éš”ç¦»ï¼Œä»¥ä¿è¯æµ‹è¯•ä»£ç ä»…ä»…é’ˆå¯¹å½“å‰è¢«æµ‹å¯¹è±¡æˆ–æ–¹æ³•å±•å¼€ï¼Œè¿™æ—¶å€™ä½ éœ€è¦çš„æ˜¯æµ‹è¯•æ›¿èº«ã€‚æµ‹è¯•æ›¿èº«å¯ä»¥åˆ†ä¸ºå››ç±»ï¼š</p><ul><li>è™šè®¾æ›¿èº«ï¼šåªä¼ é€’ä½†æ˜¯ä¸ä¼šä½¿ç”¨åˆ°çš„å¯¹è±¡ï¼Œä¸€èˆ¬ç”¨äºå¡«å……æ–¹æ³•çš„å‚æ•°åˆ—è¡¨</li><li>å­˜æ ¹æ›¿èº«ï¼šæ€»æ˜¯è¿”å›ç›¸åŒçš„é¢„è®¾å“åº”ï¼Œå…¶ä¸­å¯èƒ½åŒ…æ‹¬ä¸€äº›è™šè®¾çŠ¶æ€</li><li>ä¼ªè£…æ›¿èº«ï¼šå¯ä»¥å–ä»£çœŸå®ç‰ˆæœ¬çš„å¯ç”¨ç‰ˆæœ¬ï¼ˆæ¯”çœŸå®ç‰ˆæœ¬è¿˜æ˜¯ä¼šå·®å¾ˆå¤šï¼‰</li><li>æ¨¡æ‹Ÿæ›¿èº«ï¼šå¯ä»¥è¡¨ç¤ºä¸€ç³»åˆ—æœŸæœ›å€¼çš„å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥æä¾›é¢„è®¾å“åº”</li></ul><p>Java ä¸–ç•Œä¸­å®ç°æ¨¡æ‹Ÿæ›¿èº«çš„ç¬¬ä¸‰æ–¹å·¥å…·éå¸¸å¤šï¼ŒåŒ…æ‹¬ EasyMockã€Mockitoã€jMock ç­‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> â˜•Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java é¢è¯•é¢˜è§£æï¼ˆJava Webï¼‰</title>
      <link href="post/d24a315e.html"/>
      <url>post/d24a315e.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="é˜è¿°-Servlet-å’Œ-CGI-çš„åŒºåˆ«"><a href="#é˜è¿°-Servlet-å’Œ-CGI-çš„åŒºåˆ«" class="headerlink" title="é˜è¿° Servlet å’Œ CGI çš„åŒºåˆ«?"></a>é˜è¿° Servlet å’Œ CGI çš„åŒºåˆ«?</h3></blockquote><p>ç­”ï¼šServlet ä¸ CGI çš„åŒºåˆ«åœ¨äº Servlet å¤„äºæœåŠ¡å™¨è¿›ç¨‹ä¸­ï¼Œå®ƒé€šè¿‡å¤šçº¿ç¨‹æ–¹å¼è¿è¡Œå…¶ <code>service()</code> æ–¹æ³•ï¼Œä¸€ä¸ªå®ä¾‹å¯ä»¥æœåŠ¡äºå¤šä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”å…¶å®ä¾‹ä¸€èˆ¬ä¸ä¼šé”€æ¯ï¼Œè€Œ CGI å¯¹æ¯ä¸ªè¯·æ±‚éƒ½äº§ç”Ÿæ–°çš„è¿›ç¨‹ï¼ŒæœåŠ¡å®Œæˆåå°±é”€æ¯ï¼Œæ‰€ä»¥æ•ˆç‡ä¸Šä½äº Servletã€‚</p><p><strong>è¡¥å……ï¼š</strong>Sun Microsystems å…¬å¸åœ¨ 1996 å¹´å‘å¸ƒ Servlet æŠ€æœ¯å°±æ˜¯ä¸ºäº†å’Œ CGI è¿›è¡Œç«äº‰ï¼ŒServlet æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ Java ç¨‹åºï¼Œä¸€ä¸ªåŸºäº Java çš„ Web åº”ç”¨é€šå¸¸åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª Servlet ç±»ã€‚Servlet ä¸èƒ½å¤Ÿè‡ªè¡Œåˆ›å»ºå¹¶æ‰§è¡Œï¼Œå®ƒæ˜¯åœ¨ Servlet å®¹å™¨ä¸­è¿è¡Œçš„ï¼Œå®¹å™¨å°†ç”¨æˆ·çš„è¯·æ±‚ä¼ é€’ç»™ Servlet ç¨‹åºï¼Œå¹¶å°† Servlet çš„å“åº”å›ä¼ ç»™ç”¨æˆ·ã€‚é€šå¸¸ä¸€ä¸ª Servlet ä¼šå…³è”ä¸€ä¸ªæˆ–å¤šä¸ª JSP é¡µé¢ã€‚ä»¥å‰ CGI ç»å¸¸å› ä¸ºæ€§èƒ½å¼€é”€ä¸Šçš„é—®é¢˜è¢«è¯Ÿç—…ï¼Œç„¶è€Œ Fast CGI æ—©å°±å·²ç»è§£å†³äº† CGI æ•ˆç‡ä¸Šçš„é—®é¢˜ï¼Œæ‰€ä»¥é¢è¯•çš„æ—¶å€™å¤§å¯ä¸å¿…ä¿¡å£å¼€æ²³çš„è¯Ÿç—… CGIï¼Œäº‹å®ä¸Šæœ‰å¾ˆå¤šä½ ç†Ÿæ‚‰çš„ç½‘ç«™éƒ½ä½¿ç”¨äº† CGI æŠ€æœ¯ã€‚</p><blockquote><h3 id="Servlet-æ¥å£ä¸­æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ"><a href="#Servlet-æ¥å£ä¸­æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ" class="headerlink" title="Servlet æ¥å£ä¸­æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ"></a>Servlet æ¥å£ä¸­æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ</h3></blockquote><p>ç­”ï¼šServlet æ¥å£å®šä¹‰äº† 5 ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­å‰ä¸‰ä¸ªæ–¹æ³•ä¸ Servlet ç”Ÿå‘½å‘¨æœŸç›¸å…³ï¼š</p><ul><li><code>void init(ServletConfig config) throws ServletException</code></li><li><code>void service(ServletRequest req, ServletResponse resp) throws ServletException, java.io.IOException</code></li><li><code>void destroy()</code></li><li><code>java.lang.String getServletInfo()</code></li><li><code>ServletConfig getServletConfig()</code></li></ul><p>Web å®¹å™¨åŠ è½½ Servlet å¹¶å°†å…¶å®ä¾‹åŒ–åï¼ŒServlet ç”Ÿå‘½å‘¨æœŸå¼€å§‹ï¼Œå®¹å™¨è¿è¡Œå…¶ <code>init()</code> æ–¹æ³•è¿›è¡Œ Servlet çš„åˆå§‹åŒ–ï¼›è¯·æ±‚åˆ°è¾¾æ—¶è°ƒç”¨ Servlet çš„ <code>service()</code> æ–¹æ³•ï¼Œ<code>service()</code> æ–¹æ³•ä¼šæ ¹æ®éœ€è¦è°ƒç”¨ä¸è¯·æ±‚å¯¹åº”çš„ <code>doGet</code> æˆ– <code>doPost</code> ç­‰æ–¹æ³•ï¼›å½“æœåŠ¡å™¨å…³é—­æˆ–é¡¹ç›®è¢«å¸è½½æ—¶æœåŠ¡å™¨ä¼šå°† Servlet å®ä¾‹é”€æ¯ï¼Œæ­¤æ—¶ä¼šè°ƒç”¨ Servlet çš„ <code>destroy()</code> æ–¹æ³•ã€‚</p><blockquote><h3 id="è½¬å‘ï¼ˆforwardï¼‰å’Œé‡å®šå‘ï¼ˆredirectï¼‰çš„åŒºåˆ«ï¼Ÿ"><a href="#è½¬å‘ï¼ˆforwardï¼‰å’Œé‡å®šå‘ï¼ˆredirectï¼‰çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="è½¬å‘ï¼ˆforwardï¼‰å’Œé‡å®šå‘ï¼ˆredirectï¼‰çš„åŒºåˆ«ï¼Ÿ"></a>è½¬å‘ï¼ˆforwardï¼‰å’Œé‡å®šå‘ï¼ˆredirectï¼‰çš„åŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>forward</code> æ˜¯å®¹å™¨ä¸­æ§åˆ¶æƒçš„è½¬å‘ï¼Œæ˜¯æœåŠ¡å™¨è¯·æ±‚èµ„æºï¼ŒæœåŠ¡å™¨ç›´æ¥è®¿é—®ç›®æ ‡åœ°å€çš„ URLï¼ŒæŠŠé‚£ä¸ª URL çš„å“åº”å†…å®¹è¯»å–è¿‡æ¥ï¼Œç„¶åæŠŠè¿™äº›å†…å®¹å†å‘ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨æ ¹æœ¬ä¸çŸ¥é“æœåŠ¡å™¨å‘é€çš„å†…å®¹æ˜¯ä»å“ªå„¿æ¥çš„ï¼Œæ‰€ä»¥å®ƒçš„åœ°å€æ ä¸­è¿˜æ˜¯åŸæ¥çš„åœ°å€ã€‚<code>redirect</code> å°±æ˜¯æœåŠ¡å™¨ç«¯æ ¹æ®é€»è¾‘ï¼Œå‘é€ä¸€ä¸ªçŠ¶æ€ç ï¼Œå‘Šè¯‰æµè§ˆå™¨é‡æ–°å»è¯·æ±‚é‚£ä¸ªåœ°å€ï¼Œå› æ­¤ä»æµè§ˆå™¨çš„åœ°å€æ ä¸­å¯ä»¥çœ‹åˆ°è·³è½¬åçš„é“¾æ¥åœ°å€ï¼Œå¾ˆæ˜æ˜¾ <code>redirect</code> æ— æ³•è®¿é—®åˆ°æœåŠ¡å™¨ä¿æŠ¤èµ·æ¥èµ„æºï¼Œä½†æ˜¯å¯ä»¥ä»ä¸€ä¸ªç½‘ç«™ <code>redirect</code> åˆ°å…¶ä»–ç½‘ç«™ã€‚<code>forward</code> æ›´åŠ é«˜æ•ˆï¼Œæ‰€ä»¥åœ¨æ»¡è¶³éœ€è¦æ—¶å°½é‡ä½¿ç”¨ <code>forward</code>ï¼ˆé€šè¿‡è°ƒç”¨ <code>RequestDispatcher</code> å¯¹è±¡çš„ <code>forward()</code> æ–¹æ³•ï¼Œè¯¥å¯¹è±¡å¯ä»¥é€šè¿‡ <code>ServletRequest</code> å¯¹è±¡çš„ <code>getRequestDispatcher()</code> æ–¹æ³•è·å¾—ï¼‰ï¼Œå¹¶ä¸”è¿™æ ·ä¹Ÿæœ‰åŠ©äºéšè—å®é™…çš„é“¾æ¥ï¼›åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæ¯”å¦‚éœ€è¦è®¿é—®ä¸€ä¸ªå…¶å®ƒæœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œåˆ™å¿…é¡»ä½¿ç”¨é‡å®šå‘ï¼ˆé€šè¿‡ <code>HttpServletResponse</code> å¯¹è±¡è°ƒç”¨å…¶ <code>sendRedirect()</code> æ–¹æ³•å®ç°ï¼‰ã€‚</p><blockquote><h3 id="JSP-æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#JSP-æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="JSP æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>JSP æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3></blockquote><p>ç­”ï¼šJSP æœ‰ 9 ä¸ªå†…ç½®å¯¹è±¡ï¼š</p><ul><li><code>request</code>ï¼šå°è£…å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå…¶ä¸­åŒ…å«æ¥è‡ª GET æˆ– POST è¯·æ±‚çš„å‚æ•°ï¼›</li><li><code>response</code>ï¼šå°è£…æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„å“åº”ï¼›</li><li><code>pageContext</code>ï¼šé€šè¿‡è¯¥å¯¹è±¡å¯ä»¥è·å–å…¶ä»–å¯¹è±¡ï¼›</li><li><code>session</code>ï¼šå°è£…ç”¨æˆ·ä¼šè¯çš„å¯¹è±¡ï¼›</li><li><code>application</code>ï¼šå°è£…æœåŠ¡å™¨è¿è¡Œç¯å¢ƒçš„å¯¹è±¡ï¼›</li><li><code>out</code>ï¼šè¾“å‡ºæœåŠ¡å™¨å“åº”çš„è¾“å‡ºæµå¯¹è±¡ï¼›</li><li><code>config</code>ï¼šWeb åº”ç”¨çš„é…ç½®å¯¹è±¡ï¼›</li><li><code>page</code>ï¼šJSP é¡µé¢æœ¬èº«ï¼ˆç›¸å½“äº Java ç¨‹åºä¸­çš„ <code>this</code>ï¼‰ï¼›</li><li><code>exception</code>ï¼šå°è£…é¡µé¢æŠ›å‡ºå¼‚å¸¸çš„å¯¹è±¡ã€‚</li></ul><p><strong>è¡¥å……ï¼š</strong>å¦‚æœç”¨ Servlet æ¥ç”Ÿæˆç½‘é¡µä¸­çš„åŠ¨æ€å†…å®¹æ— ç–‘æ˜¯éå¸¸ç¹ççš„å·¥ä½œï¼Œå¦ä¸€æ–¹é¢ï¼Œæ‰€æœ‰çš„æ–‡æœ¬å’Œ HTML æ ‡ç­¾éƒ½æ˜¯ç¡¬ç¼–ç ï¼Œå³ä½¿åšå‡ºå¾®å°çš„ä¿®æ”¹ï¼Œéƒ½éœ€è¦è¿›è¡Œé‡æ–°ç¼–è¯‘ã€‚JSP è§£å†³äº† Servlet çš„è¿™äº›é—®é¢˜ï¼Œå®ƒæ˜¯ Servlet å¾ˆå¥½çš„è¡¥å……ï¼Œå¯ä»¥ä¸“é—¨ç”¨ä½œä¸ºç”¨æˆ·å‘ˆç°è§†å›¾ï¼ˆViewï¼‰ï¼Œè€Œ Servlet ä½œä¸ºæ§åˆ¶å™¨ï¼ˆControllerï¼‰ä¸“é—¨è´Ÿè´£å¤„ç†ç”¨æˆ·è¯·æ±‚å¹¶è½¬å‘æˆ–é‡å®šå‘åˆ°æŸä¸ªé¡µé¢ã€‚åŸºäº Java çš„ Web å¼€å‘å¾ˆå¤šéƒ½åŒæ—¶ä½¿ç”¨äº† Servlet å’Œ JSPã€‚JSP é¡µé¢å…¶å®æ˜¯ä¸€ä¸ª Servletï¼Œèƒ½å¤Ÿè¿è¡Œ Servlet çš„æœåŠ¡å™¨ï¼ˆServlet å®¹å™¨ï¼‰é€šå¸¸ä¹Ÿæ˜¯ JSP å®¹å™¨ï¼Œå¯ä»¥æä¾› JSP é¡µé¢çš„è¿è¡Œç¯å¢ƒï¼ŒTomcat å°±æ˜¯ä¸€ä¸ª Servlet/JSP å®¹å™¨ã€‚ç¬¬ä¸€æ¬¡è¯·æ±‚ä¸€ä¸ª JSP é¡µé¢æ—¶ï¼ŒServlet/JSP å®¹å™¨é¦–å…ˆå°† JSP é¡µé¢è½¬æ¢æˆä¸€ä¸ª JSP é¡µé¢çš„å®ç°ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªå®ç°äº† JspPage æ¥å£æˆ–å…¶å­æ¥å£ HttpJspPage çš„ Java ç±»ã€‚JspPage æ¥å£æ˜¯ Servlet çš„å­æ¥å£ï¼Œå› æ­¤æ¯ä¸ª JSP é¡µé¢éƒ½æ˜¯ä¸€ä¸ª Servletã€‚è½¬æ¢æˆåŠŸåï¼Œå®¹å™¨ä¼šç¼–è¯‘ Servlet ç±»ï¼Œä¹‹åå®¹å™¨åŠ è½½å’Œå®ä¾‹åŒ– Java å­—èŠ‚ç ï¼Œå¹¶æ‰§è¡Œå®ƒé€šå¸¸å¯¹ Servlet æ‰€åšçš„ç”Ÿå‘½å‘¨æœŸæ“ä½œã€‚å¯¹åŒä¸€ä¸ª JSP é¡µé¢çš„åç»­è¯·æ±‚ï¼Œå®¹å™¨ä¼šæŸ¥çœ‹è¿™ä¸ª JSP é¡µé¢æ˜¯å¦è¢«ä¿®æ”¹è¿‡ï¼Œå¦‚æœä¿®æ”¹è¿‡å°±ä¼šé‡æ–°è½¬æ¢å¹¶é‡æ–°ç¼–è¯‘å¹¶æ‰§è¡Œã€‚å¦‚æœæ²¡æœ‰åˆ™æ‰§è¡Œå†…å­˜ä¸­å·²ç»å­˜åœ¨çš„ Servlet å®ä¾‹ã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€æ®µ JSP ä»£ç å¯¹åº”çš„ Java ç¨‹åºå°±çŸ¥é“ä¸€åˆ‡äº†ï¼Œè€Œä¸” 9 ä¸ªå†…ç½®å¯¹è±¡çš„ç¥ç§˜é¢çº±ä¹Ÿä¼šè¢«æ­å¼€ã€‚</p><p>JSP é¡µé¢ï¼š</p><p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page pageEncoding&#x3D;&quot;UTF-8&quot;%&gt;&lt;%String path &#x3D; request.getContextPath();String basePath &#x3D; request.getScheme() + &quot;:&#x2F;&#x2F;&quot; + request.getServerName() + &quot;:&quot; + request.getServerPort() + path + &quot;&#x2F;&quot;;%&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;  &lt;head&gt;    &lt;base href&#x3D;&quot;&lt;%&#x3D;basePath%&gt;&quot;&gt;    &lt;title&gt;é¦–é¡µ&lt;&#x2F;title&gt;    &lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;        * &#123; font-family: &quot;Arial&quot;; &#125;    &lt;&#x2F;style&gt;  &lt;&#x2F;head&gt;  &lt;body&gt;    &lt;h1&gt;Hello, World!&lt;&#x2F;h1&gt;    &lt;hr&#x2F;&gt;    &lt;h2&gt;Current time is: &lt;%&#x3D; new java.util.Date().toString() %&gt;&lt;&#x2F;h2&gt;  &lt;&#x2F;body&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å¯¹åº”çš„ Java ä»£ç ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/* * Generated by the Jasper component of Apache Tomcat * Version: Apache Tomcat/7.0.52 * Generated at: 2014-10-13 13:28:38 UTC * Note: The last modified time of this file was set to *       the last modified time of the source file after *       generation to assist with modification tracking. */</span><span class="token keyword">package</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>jsp</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> index_jsp <span class="token keyword">extends</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>jasper<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span><span class="token class-name">HttpJspBase</span>        <span class="token keyword">implements</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>jasper<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span><span class="token class-name">JspSourceDependent</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span><span class="token class-name">JspFactory</span> _jspxFactory <span class="token operator">=</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span><span class="token class-name">JspFactory</span>            <span class="token punctuation">.</span><span class="token function">getDefaultFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span>java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span><span class="token class-name">String</span><span class="token punctuation">,</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> _jspx_dependants<span class="token punctuation">;</span>    <span class="token keyword">private</span> javax<span class="token punctuation">.</span>el<span class="token punctuation">.</span><span class="token class-name">ExpressionFactory</span> _el_expressionfactory<span class="token punctuation">;</span>    <span class="token keyword">private</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>tomcat<span class="token punctuation">.</span><span class="token class-name">InstanceManager</span> _jsp_instancemanager<span class="token punctuation">;</span>    <span class="token keyword">public</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span>java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span><span class="token class-name">String</span><span class="token punctuation">,</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span><span class="token class-name">Long</span><span class="token punctuation">></span></span> <span class="token function">getDependants</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> _jspx_dependants<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">_jspInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        _el_expressionfactory <span class="token operator">=</span> _jspxFactory<span class="token punctuation">.</span><span class="token function">getJspApplicationContext</span><span class="token punctuation">(</span>                <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getExpressionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        _jsp_instancemanager <span class="token operator">=</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>jasper<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span><span class="token class-name">InstanceManagerFactory</span>                <span class="token punctuation">.</span><span class="token function">getInstanceManager</span><span class="token punctuation">(</span><span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">_jspDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">_jspService</span><span class="token punctuation">(</span>            <span class="token keyword">final</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>            <span class="token keyword">final</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span>            <span class="token keyword">throws</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token class-name">IOException</span><span class="token punctuation">,</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span><span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å†…ç½®å¯¹è±¡å°±æ˜¯åœ¨è¿™é‡Œå®šä¹‰çš„</span>        <span class="token keyword">final</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span><span class="token class-name">PageContext</span> pageContext<span class="token punctuation">;</span>        javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span><span class="token class-name">HttpSession</span> session <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">final</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span><span class="token class-name">ServletContext</span> application<span class="token punctuation">;</span>        <span class="token keyword">final</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span><span class="token class-name">ServletConfig</span> config<span class="token punctuation">;</span>        javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span><span class="token class-name">JspWriter</span> out <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">final</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span><span class="token class-name">Object</span> page <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span><span class="token class-name">JspWriter</span> _jspx_out <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span><span class="token class-name">PageContext</span> _jspx_page_context <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageContext <span class="token operator">=</span> _jspxFactory<span class="token punctuation">.</span><span class="token function">getPageContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span>                    <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">8192</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            _jspx_page_context <span class="token operator">=</span> pageContext<span class="token punctuation">;</span>            application <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            config <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            session <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            _jspx_out <span class="token operator">=</span> out<span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'\r'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> path <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> basePath <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"://"</span>                    <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getServerName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getServerPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                    <span class="token operator">+</span> path <span class="token operator">+</span> <span class="token string">"/"</span><span class="token punctuation">;</span>                        <span class="token comment">// ä»¥ä¸‹ä»£ç é€šè¿‡è¾“å‡ºæµå°†HTMLæ ‡ç­¾è¾“å‡ºåˆ°æµè§ˆå™¨ä¸­</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;!DOCTYPE html>\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;html>\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"  &lt;head>\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"    &lt;base href=\""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>basePath<span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"\">\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"    &lt;title>é¦–é¡µ&lt;/title>\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"    &lt;style type=\"text/css\">\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"    \t* &#123; font-family: \"Arial\"; &#125;\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"    &lt;/style>\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"  &lt;/head>\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"  \r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"  &lt;body>\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"    &lt;h1>Hello, World!&lt;/h1>\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"    &lt;hr/>\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"    &lt;h2>Current time is: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">new</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;/h2>\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"  &lt;/body>\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;/html>\r\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span><span class="token class-name">Throwable</span> t<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>t <span class="token keyword">instanceof</span> javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span><span class="token class-name">SkipPageException</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                out <span class="token operator">=</span> _jspx_out<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>out <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> out<span class="token punctuation">.</span><span class="token function">getBufferSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>                    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                        out<span class="token punctuation">.</span><span class="token function">clearBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>java<span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token punctuation">&#125;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_jspx_page_context <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                    _jspx_page_context<span class="token punctuation">.</span><span class="token function">handlePageException</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">else</span>                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            _jspxFactory<span class="token punctuation">.</span><span class="token function">releasePageContext</span><span class="token punctuation">(</span>_jspx_page_context<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="get-å’Œ-post-è¯·æ±‚çš„åŒºåˆ«ï¼Ÿ"><a href="#get-å’Œ-post-è¯·æ±‚çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="get å’Œ post è¯·æ±‚çš„åŒºåˆ«ï¼Ÿ"></a>get å’Œ post è¯·æ±‚çš„åŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ol><li>get è¯·æ±‚ç”¨æ¥ä»æœåŠ¡å™¨ä¸Šè·å¾—èµ„æºï¼Œè€Œ post æ˜¯ç”¨æ¥å‘æœåŠ¡å™¨æäº¤æ•°æ®ï¼›</li><li>get å°†è¡¨å•ä¸­æ•°æ®æŒ‰ç…§ <code>name=value</code> çš„å½¢å¼ï¼Œæ·»åŠ åˆ° <code>action</code> æ‰€æŒ‡å‘çš„ URL åé¢ï¼Œå¹¶ä¸”ä¸¤è€…ä½¿ç”¨ <code>?</code> è¿æ¥ï¼Œè€Œå„ä¸ªå˜é‡ä¹‹é—´ä½¿ç”¨ <code>&amp;</code> è¿æ¥ï¼›post æ˜¯å°†è¡¨å•ä¸­çš„æ•°æ®æ”¾åœ¨ HTTP åè®®çš„è¯·æ±‚å¤´æˆ–æ¶ˆæ¯ä½“ä¸­ï¼Œä¼ é€’åˆ° <code>action</code> æ‰€æŒ‡å‘ URLï¼›</li><li>get ä¼ è¾“çš„æ•°æ®è¦å—åˆ° URL é•¿åº¦é™åˆ¶ï¼ˆ1024 å­—èŠ‚ï¼‰ï¼›è€Œ post å¯ä»¥ä¼ è¾“å¤§é‡çš„æ•°æ®ï¼Œä¸Šä¼ æ–‡ä»¶é€šå¸¸è¦ä½¿ç”¨ post æ–¹å¼ï¼›</li><li>ä½¿ç”¨ get æ—¶å‚æ•°ä¼šæ˜¾ç¤ºåœ¨åœ°å€æ ä¸Šï¼Œå¦‚æœè¿™äº›æ•°æ®ä¸æ˜¯æ•æ„Ÿæ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ getï¼›å¯¹äºæ•æ„Ÿæ•°æ®è¿˜æ˜¯åº”ç”¨ä½¿ç”¨ postï¼›</li><li>get ä½¿ç”¨ MIME ç±»å‹ <code>application/x-www-form-urlencoded</code> çš„ URL ç¼–ç ï¼ˆä¹Ÿå«ç™¾åˆ†å·ç¼–ç ï¼‰æ–‡æœ¬çš„æ ¼å¼ä¼ é€’å‚æ•°ï¼Œä¿è¯è¢«ä¼ é€çš„å‚æ•°ç”±éµå¾ªè§„èŒƒçš„æ–‡æœ¬ç»„æˆï¼Œä¾‹å¦‚ä¸€ä¸ªç©ºæ ¼çš„ç¼–ç æ˜¯ <code>%20</code>ã€‚</li></ol><blockquote><h3 id="å¸¸ç”¨çš„-Web-æœåŠ¡å™¨æœ‰å“ªäº›ï¼Ÿ"><a href="#å¸¸ç”¨çš„-Web-æœåŠ¡å™¨æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="å¸¸ç”¨çš„ Web æœåŠ¡å™¨æœ‰å“ªäº›ï¼Ÿ"></a>å¸¸ç”¨çš„ Web æœåŠ¡å™¨æœ‰å“ªäº›ï¼Ÿ</h3></blockquote><p>ç­”ï¼šUnix å’Œ Linux å¹³å°ä¸‹ä½¿ç”¨æœ€å¹¿æ³›çš„å…è´¹ HTTP æœåŠ¡å™¨æ˜¯ Apache æœåŠ¡å™¨ï¼Œè€Œ Windows å¹³å°çš„æœåŠ¡å™¨é€šå¸¸ä½¿ç”¨ IIS ä½œä¸º Web æœåŠ¡å™¨ã€‚é€‰æ‹© Web æœåŠ¡å™¨åº”è€ƒè™‘çš„å› ç´ æœ‰ï¼šæ€§èƒ½ã€å®‰å…¨æ€§ã€æ—¥å¿—å’Œç»Ÿè®¡ã€è™šæ‹Ÿä¸»æœºã€ä»£ç†æœåŠ¡å™¨ã€ç¼“å†²æœåŠ¡å’Œé›†æˆåº”ç”¨ç¨‹åºç­‰ã€‚ä¸‹é¢æ˜¯å¯¹å¸¸è§æœåŠ¡å™¨çš„ç®€ä»‹ï¼š</p><ul><li><p>IISï¼šMicrosoft çš„ Web æœåŠ¡å™¨äº§å“ï¼Œå…¨ç§°æ˜¯ Internet Information Servicesã€‚IIS æ˜¯å…è®¸åœ¨å…¬å…± Intranet æˆ– Internet ä¸Šå‘å¸ƒä¿¡æ¯çš„ Web æœåŠ¡å™¨ã€‚IIS æ˜¯ç›®å‰æœ€æµè¡Œçš„ Web æœåŠ¡å™¨äº§å“ä¹‹ä¸€ï¼Œå¾ˆå¤šè‘—åçš„ç½‘ç«™éƒ½æ˜¯å»ºç«‹åœ¨ IIS çš„å¹³å°ä¸Šã€‚IIS æä¾›äº†ä¸€ä¸ªå›¾å½¢ç•Œé¢çš„ç®¡ç†å·¥å…·ï¼Œç§°ä¸º Internet æœåŠ¡ç®¡ç†å™¨ï¼Œå¯ç”¨äºç›‘è§†é…ç½®å’Œæ§åˆ¶ Internet æœåŠ¡ã€‚IIS æ˜¯ä¸€ç§ Web æœåŠ¡ç»„ä»¶ï¼Œå…¶ä¸­åŒ…æ‹¬ Web æœåŠ¡å™¨ã€FTP æœåŠ¡å™¨ã€NNTP æœåŠ¡å™¨å’Œ SMTP æœåŠ¡å™¨ï¼Œåˆ†åˆ«ç”¨äºç½‘é¡µæµè§ˆã€æ–‡ä»¶ä¼ è¾“ã€æ–°é—»æœåŠ¡å’Œé‚®ä»¶å‘é€ç­‰æ–¹é¢ï¼Œå®ƒä½¿å¾—åœ¨ç½‘ç»œï¼ˆåŒ…æ‹¬äº’è”ç½‘å’Œå±€åŸŸç½‘ï¼‰ä¸Šå‘å¸ƒä¿¡æ¯æˆäº†ä¸€ä»¶å¾ˆå®¹æ˜“çš„äº‹ã€‚å®ƒæä¾› ISAPIï¼ˆIntranet Server APIï¼‰ä½œä¸ºæ‰©å±• Web æœåŠ¡å™¨åŠŸèƒ½çš„ç¼–ç¨‹æ¥å£ï¼›åŒæ—¶ï¼Œå®ƒè¿˜æä¾›ä¸€ä¸ª Internet æ•°æ®åº“è¿æ¥å™¨ï¼Œå¯ä»¥å®ç°å¯¹æ•°æ®åº“çš„æŸ¥è¯¢å’Œæ›´æ–°ã€‚</p></li><li><p>Kangleï¼šKangle Web æœåŠ¡å™¨æ˜¯ä¸€æ¬¾è·¨å¹³å°ã€åŠŸèƒ½å¼ºå¤§ã€å®‰å…¨ç¨³å®šã€æ˜“æ“ä½œçš„é«˜æ€§èƒ½ Web æœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨è½¯ä»¶ã€‚æ­¤å¤–ï¼ŒKangle ä¹Ÿæ˜¯ä¸€æ¬¾ä¸“ä¸ºåšè™šæ‹Ÿä¸»æœºç ”å‘çš„ Web æœåŠ¡å™¨ã€‚å®ç°è™šæ‹Ÿä¸»æœºç‹¬ç«‹è¿›ç¨‹ã€ç‹¬ç«‹èº«ä»½è¿è¡Œã€‚ç”¨æˆ·ä¹‹é—´å®‰å…¨éš”ç¦»ï¼Œä¸€ä¸ªç”¨æˆ·å‡ºé—®é¢˜ä¸å½±å“å…¶ä»–ç”¨æˆ·ã€‚æ”¯æŒ PHPã€ASPã€ASP.NETã€Javaã€Ruby ç­‰å¤šç§åŠ¨æ€å¼€å‘è¯­è¨€ã€‚</p></li><li><p>WebSphereï¼šWebSphere Application Server æ˜¯åŠŸèƒ½å®Œå–„ã€å¼€æ”¾çš„ Web åº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼Œæ˜¯ IBM ç”µå­å•†åŠ¡è®¡åˆ’çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå®ƒæ˜¯åŸºäº Java çš„åº”ç”¨ç¯å¢ƒï¼Œç”¨äºå»ºç«‹ã€éƒ¨ç½²å’Œç®¡ç† Internet å’Œ Intranet Web åº”ç”¨ç¨‹åºï¼Œé€‚åº”å„ç§ Web åº”ç”¨ç¨‹åºæœåŠ¡å™¨çš„éœ€è¦ã€‚</p></li><li><p>WebLogicï¼šWebLogic Server æ˜¯ä¸€æ¬¾å¤šåŠŸèƒ½ã€åŸºäºæ ‡å‡†çš„ Web åº”ç”¨æœåŠ¡å™¨ï¼Œä¸ºä¼ä¸šæ„å»ºä¼ä¸šåº”ç”¨æä¾›äº†åšå®çš„åŸºç¡€ã€‚é’ˆå¯¹å„ç§åº”ç”¨å¼€å‘ã€å…³é”®æ€§ä»»åŠ¡çš„éƒ¨ç½²ï¼Œå„ç§ç³»ç»Ÿå’Œæ•°æ®åº“çš„é›†æˆã€è·¨ Internet åä½œç­‰ Weblogic éƒ½æä¾›äº†ç›¸åº”çš„æ”¯æŒã€‚ç”±äºå®ƒå…·æœ‰å…¨é¢çš„åŠŸèƒ½ã€å¯¹å¼€æ”¾æ ‡å‡†çš„éµä»æ€§ã€å¤šå±‚æ¶æ„ã€æ”¯æŒåŸºäºç»„ä»¶çš„å¼€å‘ç­‰ä¼˜åŠ¿ï¼Œå¾ˆå¤šå…¬å¸çš„ä¼ä¸šçº§åº”ç”¨éƒ½é€‰æ‹©å®ƒæ¥ä½œä¸ºå¼€å‘å’Œéƒ¨ç½²çš„ç¯å¢ƒã€‚WebLogic Server åœ¨ä½¿åº”ç”¨æœåŠ¡å™¨æˆä¸ºä¼ä¸šåº”ç”¨æ¶æ„çš„åŸºç¡€æ–¹é¢ä¸€ç›´å¤„äºé¢†å…ˆåœ°ä½ï¼Œä¸ºæ„å»ºé›†æˆåŒ–çš„ä¼ä¸šçº§åº”ç”¨æä¾›äº†ç¨³å›ºçš„åŸºç¡€ã€‚</p></li><li><p>Apacheï¼šç›®å‰ Apache ä»ç„¶æ˜¯ä¸–ç•Œä¸Šç”¨å¾—æœ€å¤šçš„ Web æœåŠ¡å™¨ï¼Œå…¶å¸‚åœºå æœ‰ç‡å¾ˆé•¿æ—¶é—´éƒ½ä¿æŒåœ¨ 60% ä»¥ä¸Šï¼ˆç›®å‰çš„å¸‚åœºä»½é¢çº¦ 40% å·¦å³ï¼‰ã€‚ä¸–ç•Œä¸Šå¾ˆå¤šè‘—åçš„ç½‘ç«™éƒ½æ˜¯ Apache çš„äº§ç‰©ï¼Œå®ƒçš„æˆåŠŸä¹‹å¤„ä¸»è¦åœ¨äºå®ƒçš„æºä»£ç å¼€æ”¾ã€æœ‰ä¸€æ”¯å¼ºå¤§çš„å¼€å‘å›¢é˜Ÿã€æ”¯æŒè·¨å¹³å°çš„åº”ç”¨ï¼ˆå¯ä»¥è¿è¡Œåœ¨å‡ ä¹æ‰€æœ‰çš„ Unixã€Windowsã€Linux ç³»ç»Ÿå¹³å°ä¸Šï¼‰ä»¥åŠå®ƒçš„å¯ç§»æ¤æ€§ç­‰æ–¹é¢ã€‚</p></li><li><p>Tomcatï¼šTomcat æ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç ã€è¿è¡Œ Servlet å’Œ JSP çš„å®¹å™¨ã€‚Tomcat å®ç°äº† Servlet å’Œ JSP è§„èŒƒã€‚æ­¤å¤–ï¼ŒTomcat è¿˜å®ç°äº† Apache-Jakarta è§„èŒƒè€Œä¸”æ¯”ç»å¤§å¤šæ•°å•†ä¸šåº”ç”¨è½¯ä»¶æœåŠ¡å™¨è¦å¥½ï¼Œå› æ­¤ç›®å‰ä¹Ÿæœ‰ä¸å°‘çš„ Web æœåŠ¡å™¨éƒ½é€‰æ‹©äº† Tomcatã€‚</p></li><li><p>Nginxï¼šè¯»ä½œ&quot;engine x&quot;ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª IMAP/POP3/SMTP ä»£ç†æœåŠ¡å™¨ã€‚ Nginx æ˜¯ç”± Igor Sysoev ä¸ºä¿„ç½—æ–¯è®¿é—®é‡ç¬¬äºŒçš„ Rambler ç«™ç‚¹å¼€å‘çš„ï¼Œç¬¬ä¸€ä¸ªå…¬å¼€ç‰ˆæœ¬ 0.1.0 å‘å¸ƒäº 2004 å¹´ 10 æœˆ 4 æ—¥ã€‚å…¶å°†æºä»£ç ä»¥ç±» BSD è®¸å¯è¯çš„å½¢å¼å‘å¸ƒï¼Œå› å®ƒçš„ç¨³å®šæ€§ã€ä¸°å¯Œçš„åŠŸèƒ½é›†ã€ç¤ºä¾‹é…ç½®æ–‡ä»¶å’Œä½ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—è€Œé—»åã€‚åœ¨ 2014 å¹´ä¸‹åŠå¹´ï¼ŒNginx çš„å¸‚åœºä»½é¢è¾¾åˆ°äº† 14%ã€‚</p></li></ul><blockquote><h3 id="JSP-å’Œ-Servlet-æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ"><a href="#JSP-å’Œ-Servlet-æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ" class="headerlink" title="JSP å’Œ Servlet æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ"></a>JSP å’Œ Servlet æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå…¶å®è¿™ä¸ªé—®é¢˜åœ¨ä¸Šé¢å·²ç»é˜è¿°è¿‡äº†ï¼ŒServlet æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ Java ç¨‹åºï¼Œå®ƒè¿è¡ŒäºæœåŠ¡å™¨çš„ JVM ä¸­ï¼Œèƒ½å¤Ÿä¾é æœåŠ¡å™¨çš„æ”¯æŒå‘æµè§ˆå™¨æä¾›æ˜¾ç¤ºå†…å®¹ã€‚JSP æœ¬è´¨ä¸Šæ˜¯ Servlet çš„ä¸€ç§ç®€æ˜“å½¢å¼ï¼ŒJSP ä¼šè¢«æœåŠ¡å™¨å¤„ç†æˆä¸€ä¸ªç±»ä¼¼äº Servlet çš„ Java ç¨‹åºï¼Œå¯ä»¥ç®€åŒ–é¡µé¢å†…å®¹çš„ç”Ÿæˆã€‚Servlet å’Œ JSP æœ€ä¸»è¦çš„ä¸åŒç‚¹åœ¨äºï¼ŒServlet çš„åº”ç”¨é€»è¾‘æ˜¯åœ¨ Java æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”å®Œå…¨ä»è¡¨ç¤ºå±‚ä¸­çš„ HTML åˆ†ç¦»å¼€æ¥ã€‚è€Œ JSP çš„æƒ…å†µæ˜¯ Java å’Œ HTML å¯ä»¥ç»„åˆæˆä¸€ä¸ªæ‰©å±•åä¸º <code>.jsp</code> çš„æ–‡ä»¶ã€‚æœ‰äººè¯´ï¼ŒServlet å°±æ˜¯åœ¨ Java ä¸­å†™ HTMLï¼Œè€Œ JSP å°±æ˜¯åœ¨ HTML ä¸­å†™ Java ä»£ç ï¼Œå½“ç„¶è¿™ä¸ªè¯´æ³•æ˜¯å¾ˆç‰‡é¢ä¸”ä¸å¤Ÿå‡†ç¡®çš„ã€‚JSP ä¾§é‡äºè§†å›¾ï¼ŒServlet æ›´ä¾§é‡äºæ§åˆ¶é€»è¾‘ï¼Œåœ¨ MVC æ¶æ„æ¨¡å¼ä¸­ï¼ŒJSP é€‚åˆå……å½“è§†å›¾ï¼ˆviewï¼‰è€Œ Servlet é€‚åˆå……å½“æ§åˆ¶å™¨ï¼ˆcontrollerï¼‰ã€‚</p><blockquote><h3 id="è®²è§£-JSP-ä¸­çš„å››ç§ä½œç”¨åŸŸã€‚"><a href="#è®²è§£-JSP-ä¸­çš„å››ç§ä½œç”¨åŸŸã€‚" class="headerlink" title="è®²è§£ JSP ä¸­çš„å››ç§ä½œç”¨åŸŸã€‚"></a>è®²è§£ JSP ä¸­çš„å››ç§ä½œç”¨åŸŸã€‚</h3></blockquote><p>ç­”ï¼šJSP ä¸­çš„å››ç§ä½œç”¨åŸŸåŒ…æ‹¬ <code>page</code>ã€<code>request</code>ã€<code>session</code> å’Œ <code>application</code>ï¼Œå…·ä½“æ¥è¯´ï¼š</p><ul><li><code>page</code> ä»£è¡¨ä¸ä¸€ä¸ªé¡µé¢ç›¸å…³çš„å¯¹è±¡å’Œå±æ€§ã€‚</li><li><code>request</code> ä»£è¡¨ä¸ Web å®¢æˆ·æœºå‘å‡ºçš„ä¸€ä¸ªè¯·æ±‚ç›¸å…³çš„å¯¹è±¡å’Œå±æ€§ã€‚ä¸€ä¸ªè¯·æ±‚å¯èƒ½è·¨è¶Šå¤šä¸ªé¡µé¢ï¼Œæ¶‰åŠå¤šä¸ª Web ç»„ä»¶ï¼›éœ€è¦åœ¨é¡µé¢æ˜¾ç¤ºçš„ä¸´æ—¶æ•°æ®å¯ä»¥ç½®äºæ­¤ä½œç”¨åŸŸã€‚</li><li><code>session</code> ä»£è¡¨ä¸æŸä¸ªç”¨æˆ·ä¸æœåŠ¡å™¨å»ºç«‹çš„ä¸€æ¬¡ä¼šè¯ç›¸å…³çš„å¯¹è±¡å’Œå±æ€§ã€‚è·ŸæŸä¸ªç”¨æˆ·ç›¸å…³çš„æ•°æ®åº”è¯¥æ”¾åœ¨ç”¨æˆ·è‡ªå·±çš„ session ä¸­ã€‚</li><li><code>application</code> ä»£è¡¨ä¸æ•´ä¸ª Web åº”ç”¨ç¨‹åºç›¸å…³çš„å¯¹è±¡å’Œå±æ€§ï¼Œå®ƒå®è´¨ä¸Šæ˜¯è·¨è¶Šæ•´ä¸ª Web åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬å¤šä¸ªé¡µé¢ã€è¯·æ±‚å’Œä¼šè¯çš„ä¸€ä¸ªå…¨å±€ä½œç”¨åŸŸã€‚</li></ul><blockquote><h3 id="å¦‚ä½•å®ç°-JSP-æˆ–-Servlet-çš„å•çº¿ç¨‹æ¨¡å¼ï¼Ÿ"><a href="#å¦‚ä½•å®ç°-JSP-æˆ–-Servlet-çš„å•çº¿ç¨‹æ¨¡å¼ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç° JSP æˆ– Servlet çš„å•çº¿ç¨‹æ¨¡å¼ï¼Ÿ"></a>å¦‚ä½•å®ç° JSP æˆ– Servlet çš„å•çº¿ç¨‹æ¨¡å¼ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><p>å¯¹äº JSP é¡µé¢ï¼Œå¯ä»¥é€šè¿‡ <code>page</code> æŒ‡ä»¤è¿›è¡Œè®¾ç½®ã€‚</p><p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@page isThreadSafe&#x3D;â€falseâ€%&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>å¯¹äº Servletï¼Œå¯ä»¥è®©è‡ªå®šä¹‰çš„ Servlet å®ç° <code>SingleThreadModel</code> æ ‡è¯†æ¥å£ã€‚</p><p><strong>è¯´æ˜ï¼š</strong>å¦‚æœå°† JSP æˆ– Servlet è®¾ç½®æˆå•çº¿ç¨‹å·¥ä½œæ¨¡å¼ï¼Œä¼šå¯¼è‡´æ¯ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ª Servlet å®ä¾‹ï¼Œè¿™ç§å®è·µå°†å¯¼è‡´ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼ˆæœåŠ¡å™¨çš„å†…å­˜å‹åŠ›å¾ˆå¤§ï¼Œè¿˜ä¼šå¯¼è‡´é¢‘ç¹çš„åƒåœ¾å›æ”¶ï¼‰ï¼Œæ‰€ä»¥é€šå¸¸æƒ…å†µä¸‹å¹¶ä¸ä¼šè¿™ä¹ˆåšã€‚</p><blockquote><h3 id="å®ç°ä¼šè¯è·Ÿè¸ªçš„æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿ"><a href="#å®ç°ä¼šè¯è·Ÿè¸ªçš„æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="å®ç°ä¼šè¯è·Ÿè¸ªçš„æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿ"></a>å®ç°ä¼šè¯è·Ÿè¸ªçš„æŠ€æœ¯æœ‰å“ªäº›ï¼Ÿ</h3></blockquote><p>ç­”ï¼šç”±äº HTTP åè®®æœ¬èº«æ˜¯æ— çŠ¶æ€çš„ï¼ŒæœåŠ¡å™¨ä¸ºäº†åŒºåˆ†ä¸åŒçš„ç”¨æˆ·ï¼Œå°±éœ€è¦å¯¹ç”¨æˆ·ä¼šè¯è¿›è¡Œè·Ÿè¸ªï¼Œç®€å•çš„è¯´å°±æ˜¯ä¸ºç”¨æˆ·è¿›è¡Œç™»è®°ï¼Œä¸ºç”¨æˆ·åˆ†é…å”¯ä¸€çš„ IDï¼Œä¸‹ä¸€æ¬¡ç”¨æˆ·åœ¨è¯·æ±‚ä¸­åŒ…å«æ­¤ IDï¼ŒæœåŠ¡å™¨æ®æ­¤åˆ¤æ–­åˆ°åº•æ˜¯å“ªä¸€ä¸ªç”¨æˆ·ã€‚</p><ol><li>URL é‡å†™ï¼šåœ¨ URL ä¸­æ·»åŠ ç”¨æˆ·ä¼šè¯çš„ä¿¡æ¯ä½œä¸ºè¯·æ±‚çš„å‚æ•°ï¼Œæˆ–è€…å°†å”¯ä¸€çš„ä¼šè¯ ID æ·»åŠ åˆ° URL ç»“å°¾ä»¥æ ‡è¯†ä¸€ä¸ªä¼šè¯ã€‚</li><li>è®¾ç½®è¡¨å•éšè—åŸŸï¼šå°†å’Œä¼šè¯è·Ÿè¸ªç›¸å…³çš„å­—æ®µæ·»åŠ åˆ°éšå¼è¡¨å•åŸŸä¸­ï¼Œè¿™äº›ä¿¡æ¯ä¸ä¼šåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºä½†æ˜¯æäº¤è¡¨å•æ—¶ä¼šæäº¤ç»™æœåŠ¡å™¨ã€‚è¿™ä¸¤ç§æ–¹å¼å¾ˆéš¾å¤„ç†è·¨è¶Šå¤šä¸ªé¡µé¢çš„ä¿¡æ¯ä¼ é€’ï¼Œå› ä¸ºå¦‚æœæ¯æ¬¡éƒ½è¦ä¿®æ”¹ URL æˆ–åœ¨é¡µé¢ä¸­æ·»åŠ éšå¼è¡¨å•åŸŸæ¥å­˜å‚¨ç”¨æˆ·ä¼šè¯ç›¸å…³ä¿¡æ¯ï¼Œäº‹æƒ…å°†å˜å¾—éå¸¸éº»çƒ¦ã€‚</li><li>cookieï¼šcookie æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯åŸºäºçª—å£çš„ï¼Œæµè§ˆå™¨çª—å£å…³é—­åï¼Œcookie å°±æ²¡æœ‰äº†ï¼›å¦ä¸€ç§æ˜¯å°†ä¿¡æ¯å­˜å‚¨åœ¨ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå¹¶è®¾ç½®å­˜åœ¨çš„æ—¶é—´ã€‚å½“ç”¨æˆ·é€šè¿‡æµè§ˆå™¨å’ŒæœåŠ¡å™¨å»ºç«‹ä¸€æ¬¡ä¼šè¯åï¼Œä¼šè¯ ID å°±ä¼šéšå“åº”ä¿¡æ¯è¿”å›å­˜å‚¨åœ¨åŸºäºçª—å£çš„ cookie ä¸­ï¼Œé‚£å°±æ„å‘³ç€åªè¦æµè§ˆå™¨æ²¡æœ‰å…³é—­ï¼Œä¼šè¯æ²¡æœ‰è¶…æ—¶ï¼Œä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶è¿™ä¸ªä¼šè¯ ID åˆä¼šæäº¤ç»™æœåŠ¡å™¨è®©æœåŠ¡å™¨è¯†åˆ«ç”¨æˆ·èº«ä»½ã€‚ä¼šè¯ä¸­å¯ä»¥ä¸ºç”¨æˆ·ä¿å­˜ä¿¡æ¯ã€‚ä¼šè¯å¯¹è±¡æ˜¯åœ¨æœåŠ¡å™¨å†…å­˜ä¸­çš„ï¼Œè€ŒåŸºäºçª—å£çš„ cookie æ˜¯åœ¨å®¢æˆ·ç«¯å†…å­˜ä¸­çš„ã€‚å¦‚æœæµè§ˆå™¨ç¦ç”¨äº† cookieï¼Œé‚£ä¹ˆå°±éœ€è¦é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼è¿›è¡Œä¼šè¯è·Ÿè¸ªã€‚å½“ç„¶ï¼Œåœ¨ä½¿ç”¨ cookie æ—¶è¦æ³¨æ„å‡ ç‚¹ï¼šé¦–å…ˆä¸è¦åœ¨ cookie ä¸­å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼›å…¶æ¬¡ cookie å­˜å‚¨çš„æ•°æ®é‡æœ‰é™ï¼ˆ4kï¼‰ï¼Œä¸èƒ½å°†è¿‡å¤šçš„å†…å®¹å­˜å‚¨ cookie ä¸­ï¼›å†è€…æµè§ˆå™¨é€šå¸¸åªå…è®¸ä¸€ä¸ªç«™ç‚¹æœ€å¤šå­˜æ”¾ 20 ä¸ª cookieã€‚å½“ç„¶ï¼Œå’Œç”¨æˆ·ä¼šè¯ç›¸å…³çš„å…¶ä»–ä¿¡æ¯ï¼ˆé™¤äº†ä¼šè¯ IDï¼‰ä¹Ÿå¯ä»¥å­˜åœ¨ cookie æ–¹ä¾¿è¿›è¡Œä¼šè¯è·Ÿè¸ªã€‚</li><li>HttpSessionï¼šåœ¨æ‰€æœ‰ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ä¸­ï¼ŒHttpSession å¯¹è±¡æ˜¯æœ€å¼ºå¤§ä¹Ÿæ˜¯åŠŸèƒ½æœ€å¤šçš„ã€‚å½“ä¸€ä¸ªç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®æŸä¸ªç½‘ç«™æ—¶ä¼šè‡ªåŠ¨åˆ›å»º HttpSessionï¼Œæ¯ä¸ªç”¨æˆ·å¯ä»¥è®¿é—®ä»–è‡ªå·±çš„ HttpSessionã€‚å¯ä»¥é€šè¿‡ <code>HttpServletRequest</code> å¯¹è±¡çš„ <code>getSession</code> æ–¹æ³•è·å¾— HttpSessionï¼Œé€šè¿‡ HttpSession çš„ <code>setAttribute</code> æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªå€¼æ”¾åœ¨ HttpSession ä¸­ï¼Œé€šè¿‡è°ƒç”¨ HttpSession å¯¹è±¡çš„ <code>getAttribute</code> æ–¹æ³•ï¼ŒåŒæ—¶ä¼ å…¥å±æ€§åå°±å¯ä»¥è·å–ä¿å­˜åœ¨ HttpSession ä¸­çš„å¯¹è±¡ã€‚ä¸ä¸Šé¢ä¸‰ç§æ–¹å¼ä¸åŒçš„æ˜¯ï¼ŒHttpSession æ”¾åœ¨æœåŠ¡å™¨çš„å†…å­˜ä¸­ï¼Œå› æ­¤ä¸è¦å°†è¿‡å¤§çš„å¯¹è±¡æ”¾åœ¨é‡Œé¢ï¼Œå³ä½¿ç›®å‰çš„ Servlet å®¹å™¨å¯ä»¥åœ¨å†…å­˜å°†æ»¡æ—¶å°† HttpSession ä¸­çš„å¯¹è±¡ç§»åˆ°å…¶ä»–å­˜å‚¨è®¾å¤‡ä¸­ï¼Œä½†æ˜¯è¿™æ ·åŠ¿å¿…å½±å“æ€§èƒ½ã€‚æ·»åŠ åˆ° HttpSession ä¸­çš„å€¼å¯ä»¥æ˜¯ä»»æ„ Java å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ€å¥½å®ç°äº† <code>Serializable</code> æ¥å£ï¼Œè¿™æ · Servlet å®¹å™¨åœ¨å¿…è¦çš„æ—¶å€™å¯ä»¥å°†å…¶åºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­ï¼Œå¦åˆ™åœ¨åºåˆ—åŒ–æ—¶å°±ä¼šå‡ºç°å¼‚å¸¸ã€‚</li></ol><p><strong>è¡¥å……ï¼š</strong>HTML5 ä¸­å¯ä»¥ä½¿ç”¨ Web Storage æŠ€æœ¯é€šè¿‡ JavaScript æ¥ä¿å­˜æ•°æ®ï¼Œä¾‹å¦‚å¯ä»¥ä½¿ç”¨ <code>localStorage</code> å’Œ <code>sessionStorage</code> æ¥ä¿å­˜ç”¨æˆ·ä¼šè¯çš„ä¿¡æ¯ï¼Œä¹Ÿèƒ½å¤Ÿå®ç°ä¼šè¯è·Ÿè¸ªã€‚</p><blockquote><h3 id="è¿‡æ»¤å™¨æœ‰å“ªäº›ä½œç”¨å’Œç”¨æ³•ï¼Ÿ"><a href="#è¿‡æ»¤å™¨æœ‰å“ªäº›ä½œç”¨å’Œç”¨æ³•ï¼Ÿ" class="headerlink" title="è¿‡æ»¤å™¨æœ‰å“ªäº›ä½œç”¨å’Œç”¨æ³•ï¼Ÿ"></a>è¿‡æ»¤å™¨æœ‰å“ªäº›ä½œç”¨å’Œç”¨æ³•ï¼Ÿ</h3></blockquote><p>ç­”ï¼šJava Web å¼€å‘ä¸­çš„è¿‡æ»¤å™¨ï¼ˆfilterï¼‰æ˜¯ä» Servlet 2.3 è§„èŒƒå¼€å§‹å¢åŠ çš„åŠŸèƒ½ï¼Œå¹¶åœ¨ Servlet 2.4 è§„èŒƒä¸­å¾—åˆ°å¢å¼ºã€‚å¯¹ Web åº”ç”¨æ¥è¯´ï¼Œè¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªé©»ç•™åœ¨æœåŠ¡å™¨ç«¯çš„ Web ç»„ä»¶ï¼Œå®ƒå¯ä»¥æˆªå–å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¯·æ±‚ä¸å“åº”ä¿¡æ¯ï¼Œå¹¶å¯¹è¿™äº›ä¿¡æ¯è¿›è¡Œè¿‡æ»¤ã€‚å½“ Web å®¹å™¨æ¥å—åˆ°ä¸€ä¸ªå¯¹èµ„æºçš„è¯·æ±‚æ—¶ï¼Œå®ƒå°†åˆ¤æ–­æ˜¯å¦æœ‰è¿‡æ»¤å™¨ä¸è¿™ä¸ªèµ„æºç›¸å…³è”ã€‚å¦‚æœæœ‰ï¼Œé‚£ä¹ˆå®¹å™¨å°†æŠŠè¯·æ±‚äº¤ç»™è¿‡æ»¤å™¨è¿›è¡Œå¤„ç†ã€‚åœ¨è¿‡æ»¤å™¨ä¸­ï¼Œä½ å¯ä»¥æ”¹å˜è¯·æ±‚çš„å†…å®¹ï¼Œæˆ–è€…é‡æ–°è®¾ç½®è¯·æ±‚çš„æŠ¥å¤´ä¿¡æ¯ï¼Œç„¶åå†å°†è¯·æ±‚å‘é€ç»™ç›®æ ‡èµ„æºã€‚å½“ç›®æ ‡èµ„æºå¯¹è¯·æ±‚ä½œå‡ºå“åº”æ—¶å€™ï¼Œå®¹å™¨åŒæ ·ä¼šå°†å“åº”å…ˆè½¬å‘ç»™è¿‡æ»¤å™¨ï¼Œåœ¨è¿‡æ»¤å™¨ä¸­ä½ å¯ä»¥å¯¹å“åº”çš„å†…å®¹è¿›è¡Œè½¬æ¢ï¼Œç„¶åå†å°†å“åº”å‘é€åˆ°å®¢æˆ·ç«¯ã€‚</p><p>å¸¸è§çš„è¿‡æ»¤å™¨ç”¨é€”ä¸»è¦åŒ…æ‹¬ï¼šå¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡Œç»Ÿä¸€è®¤è¯ã€å¯¹ç”¨æˆ·çš„è®¿é—®è¯·æ±‚è¿›è¡Œè®°å½•å’Œå®¡æ ¸ã€å¯¹ç”¨æˆ·å‘é€çš„æ•°æ®è¿›è¡Œè¿‡æ»¤æˆ–æ›¿æ¢ã€è½¬æ¢å›¾è±¡æ ¼å¼ã€å¯¹å“åº”å†…å®¹è¿›è¡Œå‹ç¼©ä»¥å‡å°‘ä¼ è¾“é‡ã€å¯¹è¯·æ±‚æˆ–å“åº”è¿›è¡ŒåŠ è§£å¯†å¤„ç†ã€è§¦å‘èµ„æºè®¿é—®äº‹ä»¶ã€å¯¹ XML çš„è¾“å‡ºåº”ç”¨ XSLT ç­‰ã€‚</p><p>å’Œè¿‡æ»¤å™¨ç›¸å…³çš„æ¥å£ä¸»è¦æœ‰ï¼š<code>Filter</code>ã€<code>FilterConfig</code> å’Œ <code>FilterChain</code>ã€‚</p><p>ç¼–ç è¿‡æ»¤å™¨çš„ä¾‹å­ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">Filter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">FilterChain</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">FilterConfig</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebInitParam</span><span class="token punctuation">;</span><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token punctuation">&#123;</span> <span class="token string">"*"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> initParams <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token annotation punctuation">@WebInitParam</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"encoding"</span><span class="token punctuation">,</span> value<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CodingFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> defaultEncoding <span class="token operator">=</span> <span class="token string">"utf-8"</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> resp<span class="token punctuation">,</span>            <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>        req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span>defaultEncoding<span class="token punctuation">)</span><span class="token punctuation">;</span>        resp<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span>defaultEncoding<span class="token punctuation">)</span><span class="token punctuation">;</span>        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> encoding <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"encoding"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>encoding <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            defaultEncoding <span class="token operator">=</span> encoding<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä¸‹è½½è®¡æ•°è¿‡æ»¤å™¨çš„ä¾‹å­ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileReader</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileWriter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">Filter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">FilterChain</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">FilterConfig</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebFilter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"/*"</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DownloadCounterFilter</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">ExecutorService</span> executorService <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newSingleThreadExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Properties</span> downloadLog<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">File</span> logFile<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        executorService<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> resp<span class="token punctuation">,</span>            <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> req<span class="token punctuation">;</span>        <span class="token keyword">final</span> <span class="token class-name">String</span> uri <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        executorService<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">String</span> value <span class="token operator">=</span> downloadLog<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    downloadLog<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span>uri<span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>                    downloadLog<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span>uri<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token operator">++</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    downloadLog<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>logFile<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                 <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> appPath <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        logFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>appPath<span class="token punctuation">,</span> <span class="token string">"downloadLog.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>logFile<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                logFile<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>             <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        downloadLog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            downloadLog<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>logFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¯´æ˜ï¼š</strong>è¿™é‡Œä½¿ç”¨äº† Servlet 3 è§„èŒƒä¸­çš„æ³¨è§£æ¥éƒ¨ç½²è¿‡æ»¤å™¨ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨ web.xml ä¸­ä½¿ç”¨ <code>&lt;filter&gt;</code> å’Œ <code>&lt;filter-mapping&gt;</code> æ ‡ç­¾éƒ¨ç½²è¿‡æ»¤å™¨ï¼Œå¦‚ 108 é¢˜ä¸­æ‰€ç¤ºã€‚</p><blockquote><h3 id="ç›‘å¬å™¨æœ‰å“ªäº›ä½œç”¨å’Œç”¨æ³•ï¼Ÿ"><a href="#ç›‘å¬å™¨æœ‰å“ªäº›ä½œç”¨å’Œç”¨æ³•ï¼Ÿ" class="headerlink" title="ç›‘å¬å™¨æœ‰å“ªäº›ä½œç”¨å’Œç”¨æ³•ï¼Ÿ"></a>ç›‘å¬å™¨æœ‰å“ªäº›ä½œç”¨å’Œç”¨æ³•ï¼Ÿ</h3></blockquote><p>ç­”ï¼šJava Web å¼€å‘ä¸­çš„ç›‘å¬å™¨ï¼ˆlistenerï¼‰å°±æ˜¯ <code>application</code>ã€<code>session</code>ã€<code>request</code> ä¸‰ä¸ªå¯¹è±¡åˆ›å»ºã€é”€æ¯æˆ–è€…å¾€å…¶ä¸­æ·»åŠ ä¿®æ”¹åˆ é™¤å±æ€§æ—¶è‡ªåŠ¨æ‰§è¡Œä»£ç çš„åŠŸèƒ½ç»„ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ol><li><code>ServletContextListener</code>ï¼šå¯¹ Servlet ä¸Šä¸‹æ–‡çš„åˆ›å»ºå’Œé”€æ¯è¿›è¡Œç›‘å¬ã€‚</li><li><code>ServletContextAttributeListener</code>ï¼šç›‘å¬ Servlet ä¸Šä¸‹æ–‡å±æ€§çš„æ·»åŠ ã€åˆ é™¤å’Œæ›¿æ¢ã€‚</li><li><code>HttpSessionListener</code>ï¼šå¯¹ Session çš„åˆ›å»ºå’Œé”€æ¯è¿›è¡Œç›‘å¬ã€‚</li><li><code>HttpSessionAttributeListener</code>ï¼šå¯¹ Session å¯¹è±¡ä¸­å±æ€§çš„æ·»åŠ ã€åˆ é™¤å’Œæ›¿æ¢è¿›è¡Œç›‘å¬ã€‚</li><li><code>ServletRequestListener</code>ï¼šå¯¹è¯·æ±‚å¯¹è±¡çš„åˆå§‹åŒ–å’Œé”€æ¯è¿›è¡Œç›‘å¬ã€‚</li><li><code>ServletRequestAttributeListener</code>ï¼šå¯¹è¯·æ±‚å¯¹è±¡å±æ€§çš„æ·»åŠ ã€åˆ é™¤å’Œæ›¿æ¢è¿›è¡Œç›‘å¬ã€‚</li></ol><p><strong>è¡¥å……ï¼š</strong>session çš„é”€æ¯æœ‰ä¸¤ç§æƒ…å†µï¼š(1)session è¶…æ—¶ï¼ˆå¯ä»¥åœ¨ web.xml ä¸­é€šè¿‡ <code>&lt;session-config&gt;/&lt;session-timeout&gt;</code> æ ‡ç­¾é…ç½®è¶…æ—¶æ—¶é—´ï¼‰ï¼›(2)é€šè¿‡è°ƒç”¨ session å¯¹è±¡çš„ <code>invalidate()</code> æ–¹æ³•ä½¿ session å¤±æ•ˆã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç»Ÿè®¡ç½‘ç«™æœ€å¤šåœ¨çº¿äººæ•°ç›‘å¬å™¨çš„ä¾‹å­ã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletContextEvent</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletContextListener</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebListener</span><span class="token punctuation">;</span><span class="token comment">/** ä¸Šä¸‹æ–‡ç›‘å¬å™¨ï¼Œåœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶åˆå§‹åŒ–onLineCountå’ŒmaxOnLineCountä¸¤ä¸ªå˜é‡ å¹¶å°†å…¶ç½®äºæœåŠ¡å™¨ä¸Šä¸‹æ–‡ï¼ˆServletContextï¼‰ä¸­ï¼Œå…¶åˆå§‹å€¼éƒ½æ˜¯0*/</span><span class="token annotation punctuation">@WebListener</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InitListener</span> <span class="token keyword">implements</span> <span class="token class-name">ServletContextListener</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextDestroyed</span><span class="token punctuation">(</span><span class="token class-name">ServletContextEvent</span> evt<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextInitialized</span><span class="token punctuation">(</span><span class="token class-name">ServletContextEvent</span> evt<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        evt<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"onLineCount"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        evt<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"maxOnLineCount"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">DateFormat</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletContext</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebListener</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSessionEvent</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpSessionListener</span><span class="token punctuation">;</span><span class="token comment">/** ä¼šè¯ç›‘å¬å™¨ï¼Œåœ¨ç”¨æˆ·ä¼šè¯åˆ›å»ºå’Œé”€æ¯çš„æ—¶å€™æ ¹æ®æƒ…å†µ ä¿®æ”¹onLineCountå’ŒmaxOnLineCountçš„å€¼*/</span><span class="token annotation punctuation">@WebListener</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MaxCountListener</span> <span class="token keyword">implements</span> <span class="token class-name">HttpSessionListener</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionCreated</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ServletContext</span> ctx <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"onLineCount"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        count<span class="token operator">++</span><span class="token punctuation">;</span>        ctx<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"onLineCount"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> maxOnLineCount <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"maxOnLineCount"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">></span> maxOnLineCount<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            ctx<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"maxOnLineCount"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">DateFormat</span> df <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ctx<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"date"</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sessionDestroyed</span><span class="token punctuation">(</span><span class="token class-name">HttpSessionEvent</span> event<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ServletContext</span> app <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"onLineCount"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        count<span class="token operator">--</span><span class="token punctuation">;</span>        app<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"onLineCount"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¯´æ˜ï¼š</strong>è¿™é‡Œä½¿ç”¨äº† Servlet 3 è§„èŒƒä¸­çš„ @WebListener æ³¨è§£é…ç½®ç›‘å¬å™¨ï¼Œå½“ç„¶ä½ å¯ä»¥åœ¨ web.xml æ–‡ä»¶ä¸­ç”¨ <code>&lt;listener&gt;</code> æ ‡ç­¾é…ç½®ç›‘å¬å™¨ï¼Œå¦‚ 108 é¢˜ä¸­æ‰€ç¤ºã€‚</p><blockquote><h3 id="web-xml-æ–‡ä»¶ä¸­å¯ä»¥é…ç½®å“ªäº›å†…å®¹ï¼Ÿ"><a href="#web-xml-æ–‡ä»¶ä¸­å¯ä»¥é…ç½®å“ªäº›å†…å®¹ï¼Ÿ" class="headerlink" title="web.xml æ–‡ä»¶ä¸­å¯ä»¥é…ç½®å“ªäº›å†…å®¹ï¼Ÿ"></a>web.xml æ–‡ä»¶ä¸­å¯ä»¥é…ç½®å“ªäº›å†…å®¹ï¼Ÿ</h3></blockquote><p>ç­”ï¼šweb.xml ç”¨äºé…ç½® Web åº”ç”¨çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ï¼šç›‘å¬å™¨ï¼ˆlistenerï¼‰ã€è¿‡æ»¤å™¨ï¼ˆfilterï¼‰ã€Servletã€ç›¸å…³å‚æ•°ã€ä¼šè¯è¶…æ—¶æ—¶é—´ã€å®‰å…¨éªŒè¯æ–¹å¼ã€é”™è¯¯é¡µé¢ç­‰ï¼Œä¸‹é¢æ˜¯ä¸€äº›å¼€å‘ä¸­å¸¸è§çš„é…ç½®ï¼š</p><ol><li>é…ç½®Springä¸Šä¸‹æ–‡åŠ è½½ç›‘å¬å™¨åŠ è½½Springé…ç½®æ–‡ä»¶å¹¶åˆ›å»ºIoCå®¹å™¨ï¼š</li></ol><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>classpath:applicationContext.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">></span></span>     org.springframework.web.context.ContextLoaderListener   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><ol><li>é…ç½®Springçš„OpenSessionInViewè¿‡æ»¤å™¨æ¥è§£å†³å»¶è¿ŸåŠ è½½å’ŒHibernateä¼šè¯å…³é—­çš„çŸ›ç›¾ï¼š</li></ol><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>openSessionInView<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>       org.springframework.orm.hibernate3.support.OpenSessionInViewFilter    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>openSessionInView<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><ol><li>é…ç½®ä¼šè¯è¶…æ—¶æ—¶é—´ä¸º10åˆ†é’Ÿï¼š</li></ol><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">></span></span>10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><ol><li>é…ç½®404å’ŒExceptionçš„é”™è¯¯é¡µé¢ï¼š</li></ol><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-code</span><span class="token punctuation">></span></span>404<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-code</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">></span></span>/error.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>error-page</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exception-type</span><span class="token punctuation">></span></span>java.lang.Exception<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exception-type</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>location</span><span class="token punctuation">></span></span>/error.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>location</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>error-page</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><ol><li>é…ç½®å®‰å…¨è®¤è¯æ–¹å¼ï¼š</li></ol><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>security-constraint</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-resource-collection</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-resource-name</span><span class="token punctuation">></span></span>ProtectedArea<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-resource-name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/admin/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>http-method</span><span class="token punctuation">></span></span>GET<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>http-method</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>http-method</span><span class="token punctuation">></span></span>POST<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>http-method</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-resource-collection</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>auth-constraint</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role-name</span><span class="token punctuation">></span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>role-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>auth-constraint</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>security-constraint</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>login-config</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>auth-method</span><span class="token punctuation">></span></span>BASIC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>auth-method</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>login-config</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>security-role</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>role-name</span><span class="token punctuation">></span></span>admin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>role-name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>security-role</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¯´æ˜ï¼š</strong>å¯¹ Servletï¼ˆå°æœåŠ¡ï¼‰ã€Listenerï¼ˆç›‘å¬å™¨ï¼‰å’Œ Filterï¼ˆè¿‡æ»¤å™¨ï¼‰ç­‰ Web ç»„ä»¶çš„é…ç½®ï¼ŒServlet 3 è§„èŒƒæä¾›äº†åŸºäºæ³¨è§£çš„é…ç½®æ–¹å¼ï¼Œå¯ä»¥åˆ†åˆ«ä½¿ç”¨ <code>@WebServlet</code>ã€<code>@WebListener</code>ã€<code>@WebFilter</code> æ³¨è§£è¿›è¡Œé…ç½®ã€‚</p><p><strong>è¡¥å……ï¼š</strong>å¦‚æœ Web æä¾›äº†æœ‰ä»·å€¼çš„å•†ä¸šä¿¡æ¯æˆ–è€…æ˜¯æ•æ„Ÿæ•°æ®ï¼Œé‚£ä¹ˆç«™ç‚¹çš„å®‰å…¨æ€§å°±æ˜¯å¿…é¡»è€ƒè™‘çš„é—®é¢˜ã€‚å®‰å…¨è®¤è¯æ˜¯å®ç°å®‰å…¨æ€§çš„é‡è¦æ‰‹æ®µï¼Œè®¤è¯å°±æ˜¯è¦è§£å†³â€œAre you who you say you are?â€çš„é—®é¢˜ã€‚è®¤è¯çš„æ–¹å¼éå¸¸å¤šï¼Œç®€å•è¯´æ¥å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼š</p><ul><li>A. What you know? â€” å£ä»¤</li><li>B. What you have? â€” æ•°å­—è¯ä¹¦ï¼ˆUç›¾ã€å¯†ä¿å¡ï¼‰</li><li>C. Who you are? â€” æŒ‡çº¹è¯†åˆ«ã€è™¹è†œè¯†åˆ«</li></ul><p>åœ¨ Tomcat ä¸­å¯ä»¥é€šè¿‡å»ºç«‹å®‰å…¨å¥—æ¥å­—å±‚ï¼ˆSecure Socket Layer, SSLï¼‰ä»¥åŠé€šè¿‡åŸºæœ¬éªŒè¯æˆ–è¡¨å•éªŒè¯æ¥å®ç°å¯¹å®‰å…¨æ€§çš„æ”¯æŒã€‚</p><blockquote><h3 id="ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨è¿‡å“ªäº›-JSTL-æ ‡ç­¾ï¼ˆJSP-æ ‡å‡†æ ‡ç­¾åº“ï¼‰ï¼Ÿ"><a href="#ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨è¿‡å“ªäº›-JSTL-æ ‡ç­¾ï¼ˆJSP-æ ‡å‡†æ ‡ç­¾åº“ï¼‰ï¼Ÿ" class="headerlink" title="ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨è¿‡å“ªäº› JSTL æ ‡ç­¾ï¼ˆJSP æ ‡å‡†æ ‡ç­¾åº“ï¼‰ï¼Ÿ"></a>ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨è¿‡å“ªäº› JSTL æ ‡ç­¾ï¼ˆJSP æ ‡å‡†æ ‡ç­¾åº“ï¼‰ï¼Ÿ</h3></blockquote><p>ç­”ï¼šé¡¹ç›®ä¸­ä¸»è¦ä½¿ç”¨äº† JSTL çš„æ ¸å¿ƒæ ‡ç­¾åº“ï¼ŒåŒ…æ‹¬ <code>&lt;c:if&gt;</code>ã€<code>&lt;c:choose&gt;</code>ã€<code>&lt;c: when&gt;</code>ã€<code>&lt;c: otherwise&gt;</code>ã€<code>&lt;c:forEach&gt;</code> ç­‰ï¼Œä¸»è¦ç”¨äºæ„é€ å¾ªç¯å’Œåˆ†æ”¯ç»“æ„ä»¥æ§åˆ¶æ˜¾ç¤ºé€»è¾‘ã€‚</p><p><strong>è¯´æ˜ï¼š</strong>è™½ç„¶ JSTL æ ‡ç­¾åº“æä¾›äº† <code>core</code>ã€<code>sql</code>ã€<code>fmt</code>ã€<code>xml</code> ç­‰æ ‡ç­¾åº“ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­å»ºè®®åªä½¿ç”¨æ ¸å¿ƒæ ‡ç­¾åº“ï¼ˆ<code>core</code>ï¼‰ï¼Œè€Œä¸”æœ€å¥½åªä½¿ç”¨åˆ†æ”¯å’Œå¾ªç¯æ ‡ç­¾å¹¶è¾…ä»¥è¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰ï¼Œè¿™æ ·æ‰èƒ½çœŸæ­£åšåˆ°æ•°æ®æ˜¾ç¤ºå’Œä¸šåŠ¡é€»è¾‘çš„åˆ†ç¦»ï¼Œè¿™æ‰æ˜¯æœ€ä½³å®è·µã€‚</p><blockquote><h3 id="ä½¿ç”¨æ ‡ç­¾åº“æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿå¦‚ä½•è‡ªå®šä¹‰-JSP-æ ‡ç­¾ï¼Ÿ"><a href="#ä½¿ç”¨æ ‡ç­¾åº“æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿå¦‚ä½•è‡ªå®šä¹‰-JSP-æ ‡ç­¾ï¼Ÿ" class="headerlink" title="ä½¿ç”¨æ ‡ç­¾åº“æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿå¦‚ä½•è‡ªå®šä¹‰ JSP æ ‡ç­¾ï¼Ÿ"></a>ä½¿ç”¨æ ‡ç­¾åº“æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿå¦‚ä½•è‡ªå®šä¹‰ JSP æ ‡ç­¾ï¼Ÿ</h3></blockquote><p>ç­”ï¼šä½¿ç”¨æ ‡ç­¾åº“çš„å¥½å¤„åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ul><li>åˆ†ç¦» JSP é¡µé¢çš„å†…å®¹å’Œé€»è¾‘ï¼Œç®€åŒ–äº† Web å¼€å‘ï¼›</li><li>å¼€å‘è€…å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰æ ‡ç­¾æ¥å°è£…ä¸šåŠ¡é€»è¾‘å’Œæ˜¾ç¤ºé€»è¾‘ï¼›</li><li>æ ‡ç­¾å…·æœ‰å¾ˆå¥½çš„å¯ç§»æ¤æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§ï¼›</li><li>é¿å…äº†å¯¹ Scriptletï¼ˆå°è„šæœ¬ï¼‰çš„ä½¿ç”¨ï¼ˆå¾ˆå¤šå…¬å¸çš„é¡¹ç›®å¼€å‘éƒ½ä¸å…è®¸åœ¨ JSP ä¸­ä¹¦å†™å°è„šæœ¬ï¼‰ã€‚</li></ul><p>è‡ªå®šä¹‰ JSP æ ‡ç­¾åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li>ç¼–å†™ä¸€ä¸ª Java ç±»å®ç°å®ç° <code>Tag</code>/<code>BodyTag</code>/<code>IterationTag</code> æ¥å£ï¼ˆå¼€å‘ä¸­é€šå¸¸ä¸ç›´æ¥å®ç°è¿™äº›æ¥å£è€Œæ˜¯ç»§æ‰¿ <code>TagSupport</code>/<code>BodyTagSupport</code>/<code>SimpleTagSupport</code> ç±»ï¼Œè¿™æ˜¯å¯¹ç¼ºçœé€‚é…æ¨¡å¼çš„åº”ç”¨ï¼‰ï¼Œé‡å†™ <code>doStartTag()</code>ã€<code>doEndTag()</code> ç­‰æ–¹æ³•ï¼Œå®šä¹‰æ ‡ç­¾è¦å®Œæˆçš„åŠŸèƒ½ï¼›</li><li>ç¼–å†™æ‰©å±•åä¸º <code>tld</code> çš„æ ‡ç­¾æè¿°æ–‡ä»¶å¯¹è‡ªå®šä¹‰æ ‡ç­¾è¿›è¡Œéƒ¨ç½²ï¼Œtld æ–‡ä»¶é€šå¸¸æ”¾åœ¨ WEB-INF æ–‡ä»¶å¤¹ä¸‹æˆ–å…¶å­ç›®å½•ä¸­ï¼›</li><li>åœ¨ JSP é¡µé¢ä¸­ä½¿ç”¨ <code>taglib</code> æŒ‡ä»¤å¼•ç”¨è¯¥æ ‡ç­¾åº“ã€‚</li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æ ‡ç­¾åº“çš„ä¾‹å­ã€‚</p><ol><li><p>æ ‡ç­¾ç±»æºä»£ç  TimeTag.javaï¼š</p><p> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>tags</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span></span><span class="token class-name">JspException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span></span><span class="token class-name">JspWriter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span>tagext<span class="token punctuation">.</span></span><span class="token class-name">TagSupport</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TimeTag</span> <span class="token keyword">extends</span> <span class="token class-name">TagSupport</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> format <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd hh:mm:ss"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> foreColor <span class="token operator">=</span> <span class="token string">"black"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> backColor <span class="token operator">=</span> <span class="token string">"white"</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">doStartTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JspException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>format<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">JspWriter</span> writer <span class="token operator">=</span> pageContext<span class="token punctuation">.</span><span class="token function">getOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"&lt;span style='color:%s;background-color:%s'>%s&lt;/span>"</span><span class="token punctuation">,</span>            foreColor<span class="token punctuation">,</span> backColor<span class="token punctuation">,</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>          writer<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> SKIP_BODY<span class="token punctuation">;</span>      <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFormat</span><span class="token punctuation">(</span><span class="token class-name">String</span> format<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>format <span class="token operator">=</span> format<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setForeColor</span><span class="token punctuation">(</span><span class="token class-name">String</span> foreColor<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>foreColor <span class="token operator">=</span> foreColor<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBackColor</span><span class="token punctuation">(</span><span class="token class-name">String</span> backColor<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>backColor <span class="token operator">=</span> backColor<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>ç¼–å†™æ ‡ç­¾åº“æè¿°æ–‡ä»¶ my.tldï¼š</p><p> <pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>taglib</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://java.sun.com/xml/ns/j2ee<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://java.sun.com/xml/ns/j2ee     http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd<span class="token punctuation">"</span></span>    <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">></span></span>å®šä¹‰æ ‡ç­¾åº“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tlib-version</span><span class="token punctuation">></span></span>1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tlib-version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>short-name</span><span class="token punctuation">></span></span>MyTag<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>short-name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>time<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag-class</span><span class="token punctuation">></span></span>com.jackfrued.tags.TimeTag<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag-class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body-content</span><span class="token punctuation">></span></span>empty<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body-content</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>format<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>required</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>required</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>foreColor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>backColor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>taglib</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>åœ¨ JSP é¡µé¢ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ ‡ç­¾ï¼š</p><p> <pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page pageEncoding&#x3D;&quot;UTF-8&quot;%&gt;&lt;%@ taglib prefix&#x3D;&quot;my&quot; uri&#x3D;&quot;&#x2F;WEB-INF&#x2F;tld&#x2F;my.tld&quot; %&gt;&lt;%String path &#x3D; request.getContextPath();String basePath &#x3D; request.getScheme() + &quot;:&#x2F;&#x2F;&quot; + request.getServerName() + &quot;:&quot; + request.getServerPort() + path + &quot;&#x2F;&quot;;%&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;  &lt;head&gt;    &lt;base href&#x3D;&quot;&lt;%&#x3D;basePath%&gt;&quot;&gt;    &lt;title&gt;é¦–é¡µ&lt;&#x2F;title&gt;    &lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;        * &#123; font-family: &quot;Arial&quot;; font-size:72px; &#125;    &lt;&#x2F;style&gt;  &lt;&#x2F;head&gt;  &lt;body&gt;    &lt;my:time format&#x3D;&quot;yyyy-MM-dd&quot; backColor&#x3D;&quot;blue&quot; foreColor&#x3D;&quot;yellow&quot;&#x2F;&gt;  &lt;&#x2F;body&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li></ol><p><strong>æ³¨æ„ï¼š</strong>å¦‚æœè¦å°†è‡ªå®šä¹‰çš„æ ‡ç­¾åº“å‘å¸ƒæˆ JAR æ–‡ä»¶ï¼Œéœ€è¦å°†æ ‡ç­¾åº“æè¿°æ–‡ä»¶ï¼ˆtld æ–‡ä»¶ï¼‰æ”¾åœ¨ JAR æ–‡ä»¶çš„ META-INF ç›®å½•ä¸‹ï¼Œå¯ä»¥ç”¨ JDK ä¸­çš„ jar å·¥å…·å®Œæˆ JAR æ–‡ä»¶çš„ç”Ÿæˆï¼Œå¦‚æœä¸æ¸…æ¥šå¦‚ä½•æ“ä½œï¼Œå¯ä»¥è¯·æ•™<a href="https://www.google.com/">è°·è€å¸ˆ</a>å’Œ<a href="https://www.baidu.com/">ç™¾è€å¸ˆ</a>ã€‚</p><blockquote><h3 id="è¯´ä¸€ä¸‹è¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰çš„éšå¼å¯¹è±¡åŠå…¶ä½œç”¨ã€‚"><a href="#è¯´ä¸€ä¸‹è¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰çš„éšå¼å¯¹è±¡åŠå…¶ä½œç”¨ã€‚" class="headerlink" title="è¯´ä¸€ä¸‹è¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰çš„éšå¼å¯¹è±¡åŠå…¶ä½œç”¨ã€‚"></a>è¯´ä¸€ä¸‹è¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰çš„éšå¼å¯¹è±¡åŠå…¶ä½œç”¨ã€‚</h3></blockquote><p>ç­”ï¼šEL çš„éšå¼å¯¹è±¡åŒ…æ‹¬ï¼špageContextã€initParamï¼ˆè®¿é—®ä¸Šä¸‹æ–‡å‚æ•°ï¼‰ã€paramï¼ˆè®¿é—®è¯·æ±‚å‚æ•°ï¼‰ã€paramValuesã€headerï¼ˆè®¿é—®è¯·æ±‚å¤´ï¼‰ã€headerValuesã€cookieï¼ˆè®¿é—® cookieï¼‰ã€applicationScopeï¼ˆè®¿é—® application ä½œç”¨åŸŸï¼‰ã€sessionScopeï¼ˆè®¿é—® session ä½œç”¨åŸŸï¼‰ã€requestScopeï¼ˆè®¿é—® request ä½œç”¨åŸŸï¼‰ã€pageScopeï¼ˆè®¿é—® page ä½œç”¨åŸŸï¼‰ã€‚</p><p>ç”¨æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">$&#123;pageContext.request.method&#125;$&#123;pageContext[&quot;request&quot;][&quot;method&quot;]&#125;$&#123;pageContext.request[&quot;method&quot;]&#125;$&#123;pageContext[&quot;request&quot;].method&#125;$&#123;initParam.defaultEncoding&#125;$&#123;header[&quot;accept-language&quot;]&#125;$&#123;headerValues[&quot;accept-language&quot;][0]&#125;$&#123;cookie.jsessionid.value&#125;$&#123;sessionScope.loginUser.username&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¡¥å……ï¼š</strong>è¡¨è¾¾å¼è¯­è¨€çš„ <code>.</code> å’Œ <code>[]</code> è¿ç®—ä½œç”¨æ˜¯ä¸€è‡´çš„ï¼Œå”¯ä¸€çš„å·®åˆ«åœ¨äºå¦‚æœè®¿é—®çš„å±æ€§åä¸ç¬¦åˆ Java æ ‡è¯†ç¬¦å‘½åè§„åˆ™ï¼Œä¾‹å¦‚ä¸Šé¢çš„ <code>accept-language</code> å°±ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ Java æ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±åªèƒ½ç”¨ <code>[]</code> è¿ç®—ç¬¦è€Œä¸èƒ½ä½¿ç”¨ <code>.</code> è¿ç®—ç¬¦è·å–å®ƒçš„å€¼ã€‚</p><blockquote><h3 id="è¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰æ”¯æŒå“ªäº›è¿ç®—ç¬¦ï¼Ÿ"><a href="#è¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰æ”¯æŒå“ªäº›è¿ç®—ç¬¦ï¼Ÿ" class="headerlink" title="è¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰æ”¯æŒå“ªäº›è¿ç®—ç¬¦ï¼Ÿ"></a>è¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰æ”¯æŒå“ªäº›è¿ç®—ç¬¦ï¼Ÿ</h3></blockquote><p>ç­”ï¼šé™¤äº† <code>.</code> å’Œ <code>[]</code> è¿ç®—ç¬¦ï¼ŒEL è¿˜æä¾›äº†ï¼š</p><ul><li>ç®—æœ¯è¿ç®—ç¬¦ï¼š<code>+</code>ã€<code>-</code>ã€<code>*</code>ã€<code>/</code> æˆ– <code>div</code>ã€<code>%</code> æˆ– <code>mod</code>ï¼›</li><li>å…³ç³»è¿ç®—ç¬¦ï¼š<code>==</code> æˆ– <code>eq</code>ã€<code>!=</code> æˆ– <code>ne</code>ã€<code>&gt;</code> æˆ– <code>gt</code>ã€<code>&gt;=</code> æˆ– <code>ge</code>ã€<code>&lt;</code> æˆ– <code>lt</code>ã€<code>&lt;=</code> æˆ– <code>le</code>ï¼›</li><li>é€»è¾‘è¿ç®—ç¬¦ï¼š<code>&amp;&amp;</code> æˆ– <code>and</code>ã€<code>||</code> æˆ– <code>or</code>ã€<code>!</code> æˆ– <code>not</code>ï¼›</li><li>æ¡ä»¶è¿ç®—ç¬¦ï¼š<code>$&#123;statement? A : B&#125;</code>ï¼ˆè·Ÿ Java çš„æ¡ä»¶è¿ç®—ç¬¦ç±»ä¼¼ï¼‰ï¼›</li><li><code>empty</code> è¿ç®—ç¬¦ï¼šæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸º <code>null</code> æˆ–è€… <code>ç©º</code>ï¼ˆæ•°ç»„é•¿åº¦ä¸º 0 æˆ–é›†åˆä¸­æ²¡æœ‰å…ƒç´ ä¹Ÿè¿”å› <code>true</code>ï¼‰ã€‚</li></ul><blockquote><h3 id="Java-Web-å¼€å‘çš„-Model-1-å’Œ-Model-2-åˆ†åˆ«æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Java-Web-å¼€å‘çš„-Model-1-å’Œ-Model-2-åˆ†åˆ«æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Java Web å¼€å‘çš„ Model 1 å’Œ Model 2 åˆ†åˆ«æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Java Web å¼€å‘çš„ Model 1 å’Œ Model 2 åˆ†åˆ«æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h3></blockquote><p>ç­”ï¼šModel 1 æ˜¯ä»¥é¡µé¢ä¸ºä¸­å¿ƒçš„ Java Webå¼€å‘ï¼Œä½¿ç”¨ JSP+JavaBean æŠ€æœ¯å°†é¡µé¢æ˜¾ç¤ºé€»è¾‘å’Œä¸šåŠ¡é€»è¾‘å¤„ç†åˆ†å¼€ï¼ŒJSP å®ç°é¡µé¢æ˜¾ç¤ºï¼ŒJavaBean å¯¹è±¡ç”¨æ¥ä¿å­˜æ•°æ®å’Œå®ç°ä¸šåŠ¡é€»è¾‘ã€‚Model 2 æ˜¯åŸºäº MVCï¼ˆæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ï¼ŒModel-View-Controllerï¼‰æ¶æ„æ¨¡å¼çš„å¼€å‘æ¨¡å‹ï¼Œå®ç°äº†æ¨¡å‹å’Œè§†å›¾çš„å½»åº•åˆ†ç¦»ï¼Œåˆ©äºå›¢é˜Ÿå¼€å‘å’Œä»£ç å¤ç”¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/113.png" alt></p><blockquote><h3 id="Servlet-3-ä¸­çš„å¼‚æ­¥å¤„ç†æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Servlet-3-ä¸­çš„å¼‚æ­¥å¤„ç†æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Servlet 3 ä¸­çš„å¼‚æ­¥å¤„ç†æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Servlet 3 ä¸­çš„å¼‚æ­¥å¤„ç†æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h3></blockquote><p>ç­”ï¼šåœ¨ Servlet 3 ä¸­å¼•å…¥äº†ä¸€é¡¹æ–°çš„æŠ€æœ¯å¯ä»¥è®© Servlet å¼‚æ­¥å¤„ç†è¯·æ±‚ã€‚æœ‰äººå¯èƒ½ä¼šè´¨ç–‘ï¼Œæ—¢ç„¶éƒ½æœ‰å¤šçº¿ç¨‹äº†ï¼Œè¿˜éœ€è¦å¼‚æ­¥å¤„ç†è¯·æ±‚å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šéœ€è¦çš„ï¼Œå› ä¸ºå¦‚æœä¸€ä¸ªä»»åŠ¡å¤„ç†æ—¶é—´ç›¸å½“é•¿ï¼Œé‚£ä¹ˆ Servlet æˆ– Filter ä¼šä¸€ç›´å ç”¨ç€è¯·æ±‚å¤„ç†çº¿ç¨‹ç›´åˆ°ä»»åŠ¡ç»“æŸï¼Œéšç€å¹¶å‘ç”¨æˆ·çš„å¢åŠ ï¼Œå®¹å™¨å°†ä¼šé­é‡çº¿ç¨‹è¶…å‡ºçš„é£é™©ï¼Œè¿™è¿™ç§æƒ…å†µä¸‹å¾ˆå¤šçš„è¯·æ±‚å°†ä¼šè¢«å †ç§¯èµ·æ¥è€Œåç»­çš„è¯·æ±‚å¯èƒ½ä¼šé­é‡æ‹’ç»æœåŠ¡ï¼Œç›´åˆ°æœ‰èµ„æºå¯ä»¥å¤„ç†è¯·æ±‚ä¸ºæ­¢ã€‚å¼‚æ­¥ç‰¹æ€§å¯ä»¥å¸®åŠ©åº”ç”¨èŠ‚çœå®¹å™¨ä¸­çš„çº¿ç¨‹ï¼Œç‰¹åˆ«é€‚åˆæ‰§è¡Œæ—¶é—´é•¿è€Œä¸”ç”¨æˆ·éœ€è¦å¾—åˆ°ç»“æœçš„ä»»åŠ¡ï¼Œå¦‚æœç”¨æˆ·ä¸éœ€è¦å¾—åˆ°ç»“æœåˆ™ç›´æ¥å°†ä¸€ä¸ª Runnable å¯¹è±¡äº¤ç»™ Executor å¹¶ç«‹å³è¿”å›å³å¯ã€‚</p><p><strong>è¡¥å……ï¼š</strong>å¤šçº¿ç¨‹åœ¨ Java è¯ç”ŸåˆæœŸæ— ç–‘æ˜¯ä¸€ä¸ªäº®ç‚¹ï¼Œè€Œ Servlet å•å®ä¾‹å¤šçº¿ç¨‹çš„å·¥ä½œæ–¹å¼ä¹Ÿæ›¾ä¸ºå…¶èµ¢å¾—ç¾åï¼Œç„¶è€ŒæŠ€æœ¯çš„å‘å±•å¾€å¾€ä¼šé¢ è¦†æˆ‘ä»¬å¾ˆå¤šçš„è®¤çŸ¥ï¼Œå°±å¦‚åŒå½“å¹´çˆ±å› æ–¯å¦çš„ç›¸å¯¹è®ºé¢ è¦†äº†ç‰›é¡¿çš„ç»å…¸åŠ›å­¦ä¸€èˆ¬ã€‚äº‹å®ä¸Šï¼Œå¼‚æ­¥å¤„ç†ç»ä¸æ˜¯ Serlvet 3 é¦–åˆ›ï¼Œå¦‚æœä½ äº†è§£ Node.js çš„è¯ï¼Œå¯¹ Servlet 3 çš„è¿™ä¸ªé‡è¦æ”¹è¿›å°±ä¸ä»¥ä¸ºå¥‡äº†ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ”¯æŒå¼‚æ­¥å¤„ç†è¯·æ±‚çš„ Servlet çš„ä¾‹å­ã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">AsyncContext</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">;</span><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"/async"</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> asyncSupported <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AsyncServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span>             <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å¼€å¯Tomcatå¼‚æ­¥Servletæ”¯æŒ</span>        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"org.apache.catalina.ASYNC_SUPPORTED"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">final</span> <span class="token class-name">AsyncContext</span> ctx <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">startAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å¯åŠ¨å¼‚æ­¥å¤„ç†çš„ä¸Šä¸‹æ–‡</span>        <span class="token comment">// ctx.setTimeout(30000);</span>        ctx<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// åœ¨æ­¤å¤„æ·»åŠ å¼‚æ­¥å¤„ç†çš„ä»£ç </span>                ctx<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="å¦‚ä½•åœ¨åŸºäº-Java-çš„-Web-é¡¹ç›®ä¸­å®ç°æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ï¼Ÿ"><a href="#å¦‚ä½•åœ¨åŸºäº-Java-çš„-Web-é¡¹ç›®ä¸­å®ç°æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨åŸºäº Java çš„ Web é¡¹ç›®ä¸­å®ç°æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ï¼Ÿ"></a>å¦‚ä½•åœ¨åŸºäº Java çš„ Web é¡¹ç›®ä¸­å®ç°æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ï¼Ÿ</h3></blockquote><p>ç­”ï¼šåœ¨ Sevlet 3 ä»¥å‰ï¼ŒServlet API ä¸­æ²¡æœ‰æ”¯æŒä¸Šä¼ åŠŸèƒ½çš„ APIï¼Œå› æ­¤è¦å®ç°ä¸Šä¼ åŠŸèƒ½éœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹å·¥å…·ä» POST è¯·æ±‚ä¸­è·å¾—ä¸Šä¼ çš„é™„ä»¶æˆ–è€…é€šè¿‡è‡ªè¡Œå¤„ç†è¾“å…¥æµæ¥è·å¾—ä¸Šä¼ çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ Apache çš„ commons-fileuploadã€‚</p><p>ä» Servlet 3 å¼€å§‹ï¼Œæ–‡ä»¶ä¸Šä¼ å˜å¾—æ— æ¯”ç®€å•ï¼Œç›¸ä¿¡çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ä¸€åˆ‡éƒ½æ¸…æ¥šäº†ã€‚</p><p>ä¸Šä¼ é¡µé¢index.jspï¼š</p><p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page pageEncoding&#x3D;&quot;utf-8&quot;%&gt;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta http-equiv&#x3D;&quot;Content-Type&quot; content&#x3D;&quot;text&#x2F;html; charset&#x3D;UTF-8&quot;&gt;&lt;title&gt;Photo Upload&lt;&#x2F;title&gt;&lt;&#x2F;head&gt;&lt;body&gt;&lt;h1&gt;Select your photo and upload&lt;&#x2F;h1&gt;&lt;hr&#x2F;&gt;&lt;div style&#x3D;&quot;color:red;font-size:14px;&quot;&gt;$&#123;hint&#125;&lt;&#x2F;div&gt;&lt;form action&#x3D;&quot;UploadServlet&quot; method&#x3D;&quot;post&quot; enctype&#x3D;&quot;multipart&#x2F;form-data&quot;&gt;    Photo file: &lt;input type&#x3D;&quot;file&quot; name&#x3D;&quot;photo&quot; &#x2F;&gt;    &lt;input type&#x3D;&quot;submit&quot; value&#x3D;&quot;Upload&quot; &#x2F;&gt;&lt;&#x2F;form&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ”¯æŒä¸Šä¼ çš„ Servletï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>jackfrued<span class="token punctuation">.</span>servlet</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">MultipartConfig</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServlet</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">Part</span><span class="token punctuation">;</span><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/UploadServlet"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@MultipartConfig</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UploadServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token number">1L</span><span class="token punctuation">;</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>            <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// å¯ä»¥ç”¨request.getPart()æ–¹æ³•è·å¾—åä¸ºphotoçš„ä¸Šä¼ é™„ä»¶</span>        <span class="token comment">// ä¹Ÿå¯ä»¥ç”¨request.getParts()è·å¾—æ‰€æœ‰ä¸Šä¼ é™„ä»¶ï¼ˆå¤šæ–‡ä»¶ä¸Šä¼ ï¼‰</span>        <span class="token comment">// ç„¶åé€šè¿‡å¾ªç¯åˆ†åˆ«å¤„ç†æ¯ä¸€ä¸ªä¸Šä¼ çš„æ–‡ä»¶</span>        <span class="token class-name">Part</span> part <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getPart</span><span class="token punctuation">(</span><span class="token string">"photo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>part <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> part<span class="token punctuation">.</span><span class="token function">getSubmittedFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// ç”¨ServletContextå¯¹è±¡çš„getRealPath()æ–¹æ³•è·å¾—ä¸Šä¼ æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„</span>            <span class="token class-name">String</span> savePath <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/upload"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Servlet 3.1è§„èŒƒä¸­å¯ä»¥ç”¨Partå¯¹è±¡çš„getSubmittedFileName()æ–¹æ³•è·å¾—ä¸Šä¼ çš„æ–‡ä»¶å</span>            <span class="token comment">// æ›´å¥½çš„åšæ³•æ˜¯ä¸ºä¸Šä¼ çš„æ–‡ä»¶è¿›è¡Œé‡å‘½åï¼ˆé¿å…åŒåæ–‡ä»¶çš„ç›¸äº’è¦†ç›–ï¼‰</span>            part<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>savePath <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> part<span class="token punctuation">.</span><span class="token function">getSubmittedFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"hint"</span><span class="token punctuation">,</span> <span class="token string">"Upload Successfully!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"hint"</span><span class="token punctuation">,</span> <span class="token string">"Upload failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// è·³è½¬å›åˆ°ä¸Šä¼ é¡µé¢</span>        request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"index.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="æœåŠ¡å™¨æ”¶åˆ°ç”¨æˆ·æäº¤çš„è¡¨å•æ•°æ®ï¼Œåˆ°åº•æ˜¯è°ƒç”¨-Servlet-çš„-doGet-è¿˜æ˜¯-doPost-æ–¹æ³•ï¼Ÿ"><a href="#æœåŠ¡å™¨æ”¶åˆ°ç”¨æˆ·æäº¤çš„è¡¨å•æ•°æ®ï¼Œåˆ°åº•æ˜¯è°ƒç”¨-Servlet-çš„-doGet-è¿˜æ˜¯-doPost-æ–¹æ³•ï¼Ÿ" class="headerlink" title="æœåŠ¡å™¨æ”¶åˆ°ç”¨æˆ·æäº¤çš„è¡¨å•æ•°æ®ï¼Œåˆ°åº•æ˜¯è°ƒç”¨ Servlet çš„ doGet() è¿˜æ˜¯ doPost() æ–¹æ³•ï¼Ÿ"></a>æœåŠ¡å™¨æ”¶åˆ°ç”¨æˆ·æäº¤çš„è¡¨å•æ•°æ®ï¼Œåˆ°åº•æ˜¯è°ƒç”¨ Servlet çš„ <code>doGet()</code> è¿˜æ˜¯ <code>doPost()</code> æ–¹æ³•ï¼Ÿ</h3></blockquote><p>ç­”ï¼šHTML çš„ <code>&lt;form&gt;</code> å…ƒç´ æœ‰ä¸€ä¸ª <code>method</code> å±æ€§ï¼Œç”¨æ¥æŒ‡å®šæäº¤è¡¨å•çš„æ–¹å¼ï¼Œå…¶å€¼å¯ä»¥æ˜¯ <code>get</code> æˆ– <code>post</code>ã€‚æˆ‘ä»¬è‡ªå®šä¹‰çš„ Servlet ä¸€èˆ¬æƒ…å†µä¸‹ä¼šé‡å†™ <code>doGet()</code> æˆ– <code>doPost()</code> ä¸¤ä¸ªæ–¹æ³•ä¹‹ä¸€æˆ–å…¨éƒ¨ï¼Œå¦‚æœæ˜¯ <code>GET</code> è¯·æ±‚å°±è°ƒç”¨ <code>doGet()</code> æ–¹æ³•ï¼Œå¦‚æœæ˜¯ <code>POST</code> è¯·æ±‚å°±è°ƒç”¨ <code>doPost()</code> æ–¹æ³•ï¼Œé‚£ä¸ºä»€ä¹ˆä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼Ÿæˆ‘ä»¬è‡ªå®šä¹‰çš„ Servlet é€šå¸¸ç»§æ‰¿è‡ª <code>HttpServlet</code>ï¼Œ<code>HttpServlet</code> ç»§æ‰¿è‡ª <code>GenericServlet</code> å¹¶é‡å†™äº†å…¶ä¸­çš„ <code>service()</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ Servlet æ¥å£ä¸­å®šä¹‰çš„ã€‚<code>HttpServlet</code> é‡å†™çš„ <code>service()</code> æ–¹æ³•ä¼šå…ˆè·å–ç”¨æˆ·è¯·æ±‚çš„æ–¹æ³•ï¼Œç„¶åæ ¹æ®è¯·æ±‚æ–¹æ³•è°ƒç”¨ <code>doGet()</code>ã€<code>doPost()</code>ã€<code>doPut()</code>ã€<code>doDelete()</code> ç­‰æ–¹æ³•ï¼Œå¦‚æœåœ¨è‡ªå®šä¹‰ Servlet ä¸­é‡å†™äº†è¿™äº›æ–¹æ³•ï¼Œé‚£ä¹ˆæ˜¾ç„¶ä¼šè°ƒç”¨é‡å†™è¿‡çš„ï¼ˆè‡ªå®šä¹‰çš„ï¼‰æ–¹æ³•ï¼Œè¿™æ˜¾ç„¶æ˜¯å¯¹æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„åº”ç”¨ï¼ˆå¦‚æœä¸ç†è§£ï¼Œè¯·å‚è€ƒé˜å®åšå£«çš„ã€ŠJavaä¸æ¨¡å¼ã€‹ä¸€ä¹¦çš„ç¬¬ 37 ç« ï¼‰ã€‚å½“ç„¶ï¼Œè‡ªå®šä¹‰ Servlet ä¸­ä¹Ÿå¯ä»¥ç›´æ¥é‡å†™ <code>service()</code> æ–¹æ³•ï¼Œé‚£ä¹ˆä¸ç®¡æ˜¯å“ªç§æ–¹å¼çš„è¯·æ±‚ï¼Œéƒ½å¯ä»¥é€šè¿‡è‡ªå·±çš„ä»£ç è¿›è¡Œå¤„ç†ï¼Œè¿™å¯¹äºä¸åŒºåˆ†è¯·æ±‚æ–¹æ³•çš„åœºæ™¯æ¯”è¾ƒåˆé€‚ã€‚</p><blockquote><h3 id="JSP-ä¸­çš„é™æ€åŒ…å«å’ŒåŠ¨æ€åŒ…å«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#JSP-ä¸­çš„é™æ€åŒ…å«å’ŒåŠ¨æ€åŒ…å«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="JSP ä¸­çš„é™æ€åŒ…å«å’ŒåŠ¨æ€åŒ…å«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>JSP ä¸­çš„é™æ€åŒ…å«å’ŒåŠ¨æ€åŒ…å«æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼šé™æ€åŒ…å«æ˜¯é€šè¿‡ JSP çš„ <code>include</code> æŒ‡ä»¤åŒ…å«é¡µé¢ï¼ŒåŠ¨æ€åŒ…å«æ˜¯é€šè¿‡ JSP æ ‡å‡†åŠ¨ä½œ <code>&lt;jsp:forward&gt;</code> åŒ…å«é¡µé¢ã€‚</p><ul><li><p>é™æ€åŒ…å«æ˜¯ç¼–è¯‘æ—¶åŒ…å«ï¼Œå¦‚æœåŒ…å«çš„é¡µé¢ä¸å­˜åœ¨åˆ™ä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ï¼Œè€Œä¸”ä¸¤ä¸ªé¡µé¢çš„ <code>contentType</code> å±æ€§åº”ä¿æŒä¸€è‡´ï¼Œå› ä¸ºä¸¤ä¸ªé¡µé¢ä¼šåˆäºŒä¸ºä¸€ï¼Œåªäº§ç”Ÿä¸€ä¸ª class æ–‡ä»¶ï¼Œå› æ­¤è¢«åŒ…å«é¡µé¢å‘ç”Ÿçš„å˜åŠ¨å†åŒ…å«å®ƒçš„é¡µé¢æ›´æ–°å‰ä¸ä¼šå¾—åˆ°æ›´æ–°ã€‚</p></li><li><p>åŠ¨æ€åŒ…å«æ˜¯è¿è¡Œæ—¶åŒ…å«ï¼Œå¯ä»¥å‘è¢«åŒ…å«çš„é¡µé¢ä¼ é€’å‚æ•°ï¼ŒåŒ…å«é¡µé¢å’Œè¢«åŒ…å«é¡µé¢æ˜¯ç‹¬ç«‹çš„ï¼Œä¼šç¼–è¯‘å‡ºä¸¤ä¸ª class æ–‡ä»¶ï¼Œå¦‚æœè¢«åŒ…å«çš„é¡µé¢ä¸å­˜åœ¨ï¼Œä¸ä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ï¼Œä¹Ÿä¸å½±å“é¡µé¢å…¶ä»–éƒ¨åˆ†çš„æ‰§è¡Œã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p></li></ul><p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%-- é™æ€åŒ…å« --%&gt;&lt;%@ include file&#x3D;&quot;...&quot; %&gt;&lt;%-- åŠ¨æ€åŒ…å« --%&gt;&lt;jsp:include page&#x3D;&quot;...&quot;&gt;    &lt;jsp:param name&#x3D;&quot;...&quot; value&#x3D;&quot;...&quot; &#x2F;&gt;&lt;&#x2F;jsp:include&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="Servlet-ä¸­å¦‚ä½•è·å–ç”¨æˆ·æäº¤çš„æŸ¥è¯¢å‚æ•°æˆ–è¡¨å•æ•°æ®ï¼Ÿ"><a href="#Servlet-ä¸­å¦‚ä½•è·å–ç”¨æˆ·æäº¤çš„æŸ¥è¯¢å‚æ•°æˆ–è¡¨å•æ•°æ®ï¼Ÿ" class="headerlink" title="Servlet ä¸­å¦‚ä½•è·å–ç”¨æˆ·æäº¤çš„æŸ¥è¯¢å‚æ•°æˆ–è¡¨å•æ•°æ®ï¼Ÿ"></a>Servlet ä¸­å¦‚ä½•è·å–ç”¨æˆ·æäº¤çš„æŸ¥è¯¢å‚æ•°æˆ–è¡¨å•æ•°æ®ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¯ä»¥é€šè¿‡è¯·æ±‚å¯¹è±¡ <code>HttpServletRequest</code> çš„ <code>getParameter()</code> æ–¹æ³•é€šè¿‡å‚æ•°åè·å¾—å‚æ•°å€¼ã€‚å¦‚æœæœ‰åŒ…å«å¤šä¸ªå€¼çš„å‚æ•°ï¼ˆä¾‹å¦‚å¤é€‰æ¡†ï¼‰ï¼Œå¯ä»¥é€šè¿‡è¯·æ±‚å¯¹è±¡çš„ <code>getParameterValues()</code> æ–¹æ³•è·å¾—ã€‚å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡è¯·æ±‚å¯¹è±¡çš„ <code>getParameterMap()</code> è·å¾—ä¸€ä¸ªå‚æ•°åå’Œå‚æ•°å€¼çš„æ˜ å°„ï¼ˆMapï¼‰ã€‚</p><blockquote><h3 id="Servlet-ä¸­å¦‚ä½•è·å–ç”¨æˆ·é…ç½®çš„åˆå§‹åŒ–å‚æ•°ä»¥åŠæœåŠ¡å™¨ä¸Šä¸‹æ–‡å‚æ•°ï¼Ÿ"><a href="#Servlet-ä¸­å¦‚ä½•è·å–ç”¨æˆ·é…ç½®çš„åˆå§‹åŒ–å‚æ•°ä»¥åŠæœåŠ¡å™¨ä¸Šä¸‹æ–‡å‚æ•°ï¼Ÿ" class="headerlink" title="Servlet ä¸­å¦‚ä½•è·å–ç”¨æˆ·é…ç½®çš„åˆå§‹åŒ–å‚æ•°ä»¥åŠæœåŠ¡å™¨ä¸Šä¸‹æ–‡å‚æ•°ï¼Ÿ"></a>Servlet ä¸­å¦‚ä½•è·å–ç”¨æˆ·é…ç½®çš„åˆå§‹åŒ–å‚æ•°ä»¥åŠæœåŠ¡å™¨ä¸Šä¸‹æ–‡å‚æ•°ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¯ä»¥é€šè¿‡é‡å†™ Servlet æ¥å£çš„ <code>init(ServletConfig)</code> æ–¹æ³•å¹¶é€šè¿‡ <code>ServletConfig</code> å¯¹è±¡çš„ <code>getInitParameter()</code> æ–¹æ³•æ¥è·å– Servlet çš„åˆå§‹åŒ–å‚æ•°ã€‚å¯ä»¥é€šè¿‡ <code>ServletConfig</code> å¯¹è±¡çš„ <code>getServletContext()</code> æ–¹æ³•è·å– <code>ServletContext</code> å¯¹è±¡ï¼Œå¹¶é€šè¿‡è¯¥å¯¹è±¡çš„ <code>getInitParameter()</code> æ–¹æ³•æ¥è·å–æœåŠ¡å™¨ä¸Šä¸‹æ–‡å‚æ•°ã€‚å½“ç„¶ï¼Œ<code>ServletContext</code> å¯¹è±¡ä¹Ÿåœ¨å¤„ç†ç”¨æˆ·è¯·æ±‚çš„æ–¹æ³•ï¼ˆå¦‚ <code>doGet()</code> æ–¹æ³•ï¼‰ä¸­é€šè¿‡è¯·æ±‚å¯¹è±¡çš„ <code>getServletContext()</code>æ–¹æ³•æ¥è·å¾—ã€‚</p><blockquote><h3 id="å¦‚ä½•è®¾ç½®è¯·æ±‚çš„ç¼–ç ä»¥åŠå“åº”å†…å®¹çš„ç±»å‹ï¼Ÿ"><a href="#å¦‚ä½•è®¾ç½®è¯·æ±‚çš„ç¼–ç ä»¥åŠå“åº”å†…å®¹çš„ç±»å‹ï¼Ÿ" class="headerlink" title="å¦‚ä½•è®¾ç½®è¯·æ±‚çš„ç¼–ç ä»¥åŠå“åº”å†…å®¹çš„ç±»å‹ï¼Ÿ"></a>å¦‚ä½•è®¾ç½®è¯·æ±‚çš„ç¼–ç ä»¥åŠå“åº”å†…å®¹çš„ç±»å‹ï¼Ÿ</h3></blockquote><p>ç­”ï¼šé€šè¿‡è¯·æ±‚å¯¹è±¡ <code>ServletRequest</code> çš„ <code>setCharacterEncoding(String)</code> æ–¹æ³•å¯ä»¥è®¾ç½®è¯·æ±‚çš„ç¼–ç ï¼Œå…¶å®è¦å½»åº•è§£å†³ä¹±ç é—®é¢˜å°±åº”è¯¥è®©é¡µé¢ã€æœåŠ¡å™¨ã€è¯·æ±‚å’Œå“åº”ã€Java ç¨‹åºéƒ½ä½¿ç”¨ç»Ÿä¸€çš„ç¼–ç ï¼Œæœ€å¥½çš„é€‰æ‹©å½“ç„¶æ˜¯ <code>UTF-8</code>ï¼›é€šè¿‡å“åº”å¯¹è±¡ <code>ServletResponse</code> çš„ <code>setContentType(String)</code> æ–¹æ³•å¯ä»¥è®¾ç½®å“åº”å†…å®¹çš„ç±»å‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ <code>HttpServletResponsed</code> å¯¹è±¡çš„ <code>setHeader(String, String)</code> æ–¹æ³•æ¥è®¾ç½®ã€‚</p><p><strong>è¯´æ˜ï¼š</strong>ç°åœ¨å¦‚æœè¿˜æœ‰å…¬å¸åœ¨é¢è¯•çš„æ—¶å€™é—® JSP çš„å£°æ˜æ ‡è®°ã€è¡¨è¾¾å¼æ ‡è®°ã€å°è„šæœ¬æ ‡è®°è¿™äº›å†…å®¹çš„è¯ï¼Œè¿™æ ·çš„å…¬å¸ä¹Ÿä¸ç”¨å»äº†ï¼Œå…¶å® JSP å†…ç½®å¯¹è±¡ã€JSP æŒ‡ä»¤è¿™äº›ä¸œè¥¿åŸºæœ¬ä¸Šéƒ½å¯ä»¥å¿˜å´äº†ï¼Œå…³äº Java Web å¼€å‘çš„ç›¸å…³çŸ¥è¯†ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹æˆ‘çš„ <a target="_blank" rel="noopener" href="/images/post/java_interview/servlet_jsp.png" one-link-mark="yes">Servlet&amp;JSP æ€ç»´å¯¼å›¾</a>ï¼Œä¸Šé¢æœ‰å®Œæ•´çš„çŸ¥è¯†ç‚¹çš„ç½—åˆ—ã€‚</p><blockquote><h3 id="è§£é‡Šä¸€ä¸‹ç½‘ç»œåº”ç”¨çš„æ¨¡å¼åŠå…¶ç‰¹ç‚¹ã€‚"><a href="#è§£é‡Šä¸€ä¸‹ç½‘ç»œåº”ç”¨çš„æ¨¡å¼åŠå…¶ç‰¹ç‚¹ã€‚" class="headerlink" title="è§£é‡Šä¸€ä¸‹ç½‘ç»œåº”ç”¨çš„æ¨¡å¼åŠå…¶ç‰¹ç‚¹ã€‚"></a>è§£é‡Šä¸€ä¸‹ç½‘ç»œåº”ç”¨çš„æ¨¡å¼åŠå…¶ç‰¹ç‚¹ã€‚</h3></blockquote><p>ç­”ï¼šå…¸å‹çš„ç½‘ç»œåº”ç”¨æ¨¡å¼å¤§è‡´æœ‰ä¸‰ç±»ï¼šB/Sã€C/Sã€P2Pã€‚å…¶ä¸­ B ä»£è¡¨æµè§ˆå™¨ï¼ˆBrowserï¼‰ã€C ä»£è¡¨å®¢æˆ·ç«¯ï¼ˆClientï¼‰ã€S ä»£è¡¨æœåŠ¡å™¨ï¼ˆServerï¼‰ï¼ŒP2P æ˜¯å¯¹ç­‰æ¨¡å¼ï¼Œä¸åŒºåˆ†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ã€‚B/S åº”ç”¨æ¨¡å¼ä¸­å¯ä»¥è§†ä¸ºç‰¹æ®Šçš„ C/S åº”ç”¨æ¨¡å¼ï¼Œåªæ˜¯å°† C/S åº”ç”¨æ¨¡å¼ä¸­çš„ç‰¹æ®Šçš„å®¢æˆ·ç«¯æ¢æˆäº†æµè§ˆå™¨ï¼Œå› ä¸ºå‡ ä¹æ‰€æœ‰çš„ç³»ç»Ÿä¸Šéƒ½æœ‰æµè§ˆå™¨ï¼Œé‚£ä¹ˆåªè¦æ‰“å¼€æµè§ˆå™¨å°±å¯ä»¥ä½¿ç”¨åº”ç”¨ï¼Œæ²¡æœ‰å®‰è£…ã€é…ç½®ã€å‡çº§å®¢æˆ·ç«¯æ‰€å¸¦æ¥çš„å„ç§å¼€é”€ã€‚P2P åº”ç”¨æ¨¡å¼ä¸­ï¼Œæˆåƒä¸Šä¸‡å°å½¼æ­¤è¿æ¥çš„è®¡ç®—æœºéƒ½å¤„äºå¯¹ç­‰çš„åœ°ä½ï¼Œæ•´ä¸ªç½‘ç»œä¸€èˆ¬æ¥è¯´ä¸ä¾èµ–ä¸“ç”¨çš„é›†ä¸­æœåŠ¡å™¨ã€‚ç½‘ç»œä¸­çš„æ¯ä¸€å°è®¡ç®—æœºæ—¢èƒ½å……å½“ç½‘ç»œæœåŠ¡çš„è¯·æ±‚è€…ï¼Œåˆå¯¹å…¶å®ƒè®¡ç®—æœºçš„è¯·æ±‚ä½œå‡ºå“åº”ï¼Œæä¾›èµ„æºå’ŒæœåŠ¡ã€‚é€šå¸¸è¿™äº›èµ„æºå’ŒæœåŠ¡åŒ…æ‹¬ï¼šä¿¡æ¯çš„å…±äº«å’Œäº¤æ¢ã€è®¡ç®—èµ„æºï¼ˆå¦‚ CPU çš„å…±äº«ï¼‰ã€å­˜å‚¨å…±äº«ï¼ˆå¦‚ç¼“å­˜å’Œç£ç›˜ç©ºé—´çš„ä½¿ç”¨ï¼‰ç­‰ï¼Œè¿™ç§åº”ç”¨æ¨¡å¼æœ€å¤§çš„é˜»åŠ›å®‰å…¨æ€§ã€ç‰ˆæœ¬ç­‰é—®é¢˜ï¼Œç›®å‰æœ‰å¾ˆå¤šåº”ç”¨éƒ½æ··åˆä½¿ç”¨äº†å¤šç§åº”ç”¨æ¨¡å‹ï¼Œæœ€å¸¸è§çš„ç½‘ç»œè§†é¢‘åº”ç”¨ï¼Œå®ƒå‡ ä¹æŠŠä¸‰ç§æ¨¡å¼éƒ½ç”¨ä¸Šäº†ã€‚</p><p><strong>è¡¥å……ï¼š</strong>æ­¤é¢˜è¦è·Ÿâ€œç”µå­å•†åŠ¡æ¨¡å¼â€åŒºåˆ†å¼€ï¼Œå› ä¸ºæœ‰å¾ˆå¤šäººè¢«é—®åˆ°è¿™ä¸ªé—®é¢˜çš„æ—¶å€™é©¬ä¸Šæƒ³åˆ°çš„æ˜¯ B2Bï¼ˆå¦‚é˜¿é‡Œå·´å·´ï¼‰ã€B2Cï¼ˆå¦‚å½“å½“ã€äºšé©¬é€Šã€äº¬ä¸œï¼‰ã€C2Cï¼ˆå¦‚æ·˜å®ã€æ‹æ‹ï¼‰ã€C2Bï¼ˆå¦‚å¨å®¢ï¼‰ã€O2Oï¼ˆå¦‚ç¾å›¢ã€é¥¿äº†ä¹ˆï¼‰ã€‚å¯¹äºè¿™ç±»é—®é¢˜ï¼Œå¯ä»¥å»ç™¾åº¦ä¸Šé¢ç§‘æ™®ä¸€ä¸‹ã€‚</p><blockquote><h3 id="ä»€ä¹ˆæ˜¯-Web-Serviceï¼ˆWeb-æœåŠ¡ï¼‰ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Web-Serviceï¼ˆWeb-æœåŠ¡ï¼‰ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Web Serviceï¼ˆWeb æœåŠ¡ï¼‰ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Web Serviceï¼ˆWeb æœåŠ¡ï¼‰ï¼Ÿ</h3></blockquote><p>ç­”ï¼šä»è¡¨é¢ä¸Šçœ‹ï¼ŒWeb Service å°±æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå®ƒå‘å¤–ç•Œæš´éœ²å‡ºä¸€ä¸ªèƒ½å¤Ÿé€šè¿‡ Web è¿›è¡Œè°ƒç”¨çš„ APIã€‚è¿™å°±æ˜¯è¯´ï¼Œä½ èƒ½å¤Ÿç”¨ç¼–ç¨‹çš„æ–¹æ³•é€æ˜çš„è°ƒç”¨è¿™ä¸ªåº”ç”¨ç¨‹åºï¼Œä¸éœ€è¦äº†è§£å®ƒçš„ä»»ä½•ç»†èŠ‚ï¼Œè·Ÿä½ ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ä¹Ÿæ²¡æœ‰å…³ç³»ã€‚ä¾‹å¦‚å¯ä»¥åˆ›å»ºä¸€ä¸ªæä¾›å¤©æ°”é¢„æŠ¥çš„ Web Serviceï¼Œé‚£ä¹ˆæ— è®ºä½ ç”¨å“ªç§ç¼–ç¨‹è¯­è¨€å¼€å‘çš„åº”ç”¨éƒ½å¯ä»¥é€šè¿‡è°ƒç”¨å®ƒçš„ API å¹¶ä¼ å…¥åŸå¸‚ä¿¡æ¯æ¥è·å¾—è¯¥åŸå¸‚çš„å¤©æ°”é¢„æŠ¥ã€‚ä¹‹æ‰€ä»¥ç§°ä¹‹ä¸º Web Serviceï¼Œæ˜¯å› ä¸ºå®ƒåŸºäº HTTP åè®®ä¼ è¾“æ•°æ®ï¼Œè¿™ä½¿å¾—è¿è¡Œåœ¨ä¸åŒæœºå™¨ä¸Šçš„ä¸åŒåº”ç”¨æ— é¡»å€ŸåŠ©é™„åŠ çš„ã€ä¸“é—¨çš„ç¬¬ä¸‰æ–¹è½¯ä»¶æˆ–ç¡¬ä»¶ï¼Œå°±å¯ç›¸äº’äº¤æ¢æ•°æ®æˆ–é›†æˆã€‚</p><p><strong>è¡¥å……ï¼š</strong>è¿™é‡Œå¿…é¡»è¦æåŠçš„ä¸€ä¸ªæ¦‚å¿µæ˜¯ SOAï¼ˆService-Oriented Architectureï¼Œé¢å‘æœåŠ¡çš„æ¶æ„ï¼‰ï¼ŒSOA æ˜¯ä¸€ç§æ€æƒ³ï¼Œå®ƒå°†åº”ç”¨ç¨‹åºçš„ä¸åŒåŠŸèƒ½å•å…ƒé€šè¿‡ä¸­ç«‹çš„å¥‘çº¦è”ç³»èµ·æ¥ï¼Œç‹¬ç«‹äºç¡¬ä»¶å¹³å°ã€æ“ä½œç³»ç»Ÿå’Œç¼–ç¨‹è¯­è¨€ï¼Œä½¿å¾—å„ç§å½¢å¼çš„åŠŸèƒ½å•å…ƒèƒ½å¤Ÿæ›´å¥½çš„é›†æˆã€‚æ˜¾ç„¶ï¼ŒWeb Service æ˜¯ SOA çš„ä¸€ç§è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒæ›´å¤šçš„æ˜¯ä¸€ç§æ ‡å‡†ï¼Œè€Œä¸æ˜¯ä¸€ç§å…·ä½“çš„æŠ€æœ¯ã€‚</p><blockquote><h3 id="æ¦‚å¿µè§£é‡Šï¼šSOAPã€WSDLã€UDDIã€‚"><a href="#æ¦‚å¿µè§£é‡Šï¼šSOAPã€WSDLã€UDDIã€‚" class="headerlink" title="æ¦‚å¿µè§£é‡Šï¼šSOAPã€WSDLã€UDDIã€‚"></a>æ¦‚å¿µè§£é‡Šï¼šSOAPã€WSDLã€UDDIã€‚</h3></blockquote><p>ç­”ï¼š</p><ul><li>SOAPï¼šç®€å•å¯¹è±¡è®¿é—®åè®®ï¼ˆSimple Object Access Protocolï¼‰ï¼Œæ˜¯ Web Service ä¸­äº¤æ¢æ•°æ®çš„ä¸€ç§åè®®è§„èŒƒã€‚</li><li>WSDLï¼šWeb æœåŠ¡æè¿°è¯­è¨€ï¼ˆWeb Service Description Languageï¼‰ï¼Œå®ƒæè¿°äº† Web æœåŠ¡çš„å…¬å…±æ¥å£ã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäº XML çš„å…³äºå¦‚ä½•ä¸ Web æœåŠ¡é€šè®¯å’Œä½¿ç”¨çš„æœåŠ¡æè¿°ï¼›ä¹Ÿå°±æ˜¯æè¿°ä¸ç›®å½•ä¸­åˆ—å‡ºçš„ Web æœåŠ¡è¿›è¡Œäº¤äº’æ—¶éœ€è¦ç»‘å®šçš„åè®®å’Œä¿¡æ¯æ ¼å¼ã€‚é€šå¸¸é‡‡ç”¨æŠ½è±¡è¯­è¨€æè¿°è¯¥æœåŠ¡æ”¯æŒçš„æ“ä½œå’Œä¿¡æ¯ï¼Œä½¿ç”¨çš„æ—¶å€™å†å°†å®é™…çš„ç½‘ç»œåè®®å’Œä¿¡æ¯æ ¼å¼ç»‘å®šç»™è¯¥æœåŠ¡ã€‚</li><li>UDDIï¼šç»Ÿä¸€æè¿°ã€å‘ç°å’Œé›†æˆï¼ˆUniversal Description, Discovery and Integrationï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäº XML çš„è·¨å¹³å°çš„æè¿°è§„èŒƒï¼Œå¯ä»¥ä½¿ä¸–ç•ŒèŒƒå›´å†…çš„ä¼ä¸šåœ¨äº’è”ç½‘ä¸Šå‘å¸ƒè‡ªå·±æ‰€æä¾›çš„æœåŠ¡ã€‚ç®€å•çš„è¯´ï¼ŒUDDI æ˜¯è®¿é—®å„ç§ WSDL çš„ä¸€ä¸ªé—¨é¢ï¼ˆå¯ä»¥å‚è€ƒè®¾è®¡æ¨¡å¼ä¸­çš„é—¨é¢æ¨¡å¼ï¼‰ã€‚</li></ul><blockquote><h3 id="Java-è§„èŒƒä¸­å’Œ-Web-Service-ç›¸å…³çš„è§„èŒƒæœ‰å“ªäº›ï¼Ÿ"><a href="#Java-è§„èŒƒä¸­å’Œ-Web-Service-ç›¸å…³çš„è§„èŒƒæœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="Java è§„èŒƒä¸­å’Œ Web Service ç›¸å…³çš„è§„èŒƒæœ‰å“ªäº›ï¼Ÿ"></a>Java è§„èŒƒä¸­å’Œ Web Service ç›¸å…³çš„è§„èŒƒæœ‰å“ªäº›ï¼Ÿ</h3></blockquote><p>ç­”ï¼šJava è§„èŒƒä¸­å’Œ Web Service ç›¸å…³çš„æœ‰ä¸‰ä¸ªï¼š</p><ul><li>JAX-WS(JSR 224)ï¼šè¿™ä¸ªè§„èŒƒæ˜¯æ—©æœŸçš„åŸºäº SOAP çš„ Web Service è§„èŒƒ JAX-RPC çš„æ›¿ä»£ç‰ˆæœ¬ï¼Œå®ƒå¹¶ä¸æä¾›å‘ä¸‹å…¼å®¹æ€§ï¼Œå› ä¸º RPC æ ·å¼çš„ WSDL ä»¥åŠç›¸å…³çš„ API å·²ç»åœ¨ Java EE5 ä¸­è¢«ç§»é™¤äº†ã€‚WS-MetaData æ˜¯ JAX-WS çš„ä¾èµ–è§„èŒƒï¼Œæä¾›äº†åŸºäºæ³¨è§£é…ç½® Web Service å’Œ SOAP æ¶ˆæ¯çš„ç›¸å…³ APIã€‚</li><li>JAXM(JSR 67)ï¼šå®šä¹‰äº†å‘é€å’Œæ¥æ”¶æ¶ˆæ¯æ‰€éœ€çš„ APIï¼Œç›¸å½“äº Web Service çš„æœåŠ¡å™¨ç«¯ã€‚</li><li>JAX-RS(JSR 311 &amp; JSR 339 &amp; JSR 370)ï¼šæ˜¯ Java é’ˆå¯¹ RESTï¼ˆRepresentation State Transferï¼‰æ¶æ„é£æ ¼åˆ¶å®šçš„ä¸€å¥— Web Service è§„èŒƒã€‚REST æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„æ¨¡å¼ï¼Œæ˜¯ä¸€ç§é£æ ¼ï¼Œå®ƒä¸åƒ SOAP é‚£æ ·æœ¬èº«æ‰¿è½½ç€ä¸€ç§æ¶ˆæ¯åè®®ï¼Œ (ä¸¤ç§é£æ ¼çš„ Web Service å‡é‡‡ç”¨äº† HTTP åšä¼ è¾“åè®®ï¼Œå› ä¸º HTTP åè®®èƒ½ç©¿è¶Šé˜²ç«å¢™ï¼ŒJava çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼ˆRMIï¼‰ç­‰æ˜¯é‡é‡çº§åè®®ï¼Œé€šå¸¸ä¸èƒ½ç©¿è¶Šé˜²ç«å¢™ï¼‰ï¼Œå› æ­¤å¯ä»¥å°† REST è§†ä¸ºåŸºäº HTTP åè®®çš„è½¯ä»¶æ¶æ„ã€‚REST ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªæ¦‚å¿µæ˜¯èµ„æºå®šä½å’Œèµ„æºæ“ä½œï¼Œè€Œ HTTP åè®®æ°å¥½å®Œæ•´çš„æä¾›äº†è¿™ä¸¤ä¸ªç‚¹ã€‚HTTP åè®®ä¸­çš„ URI å¯ä»¥å®Œæˆèµ„æºå®šä½ï¼Œè€Œ GETã€POSTã€OPTIONã€DELETE æ–¹æ³•å¯ä»¥å®Œæˆèµ„æºæ“ä½œã€‚å› æ­¤ REST å®Œå…¨ä¾èµ– HTTP åè®®å°±å¯ä»¥å®Œæˆ Web Serviceï¼Œè€Œä¸åƒ SOAP åè®®é‚£æ ·åªåˆ©ç”¨äº† HTTP çš„ä¼ è¾“ç‰¹æ€§ï¼Œå®šä½å’Œæ“ä½œéƒ½æ˜¯ç”± SOAP åè®®è‡ªèº«å®Œæˆçš„ï¼Œä¹Ÿæ­£æ˜¯ç”±äº SOAP æ¶ˆæ¯çš„å­˜åœ¨ä½¿å¾—åŸºäº SOAP çš„ Web Service æ˜¾å¾—ç¬¨é‡è€Œé€æ¸è¢«æ·˜æ±°ã€‚</li></ul><blockquote><h3 id="ä»‹ç»ä¸€ä¸‹ä½ äº†è§£çš„-Java-é¢†åŸŸçš„-Web-Service-æ¡†æ¶ã€‚"><a href="#ä»‹ç»ä¸€ä¸‹ä½ äº†è§£çš„-Java-é¢†åŸŸçš„-Web-Service-æ¡†æ¶ã€‚" class="headerlink" title="ä»‹ç»ä¸€ä¸‹ä½ äº†è§£çš„ Java é¢†åŸŸçš„ Web Service æ¡†æ¶ã€‚"></a>ä»‹ç»ä¸€ä¸‹ä½ äº†è§£çš„ Java é¢†åŸŸçš„ Web Service æ¡†æ¶ã€‚</h3></blockquote><p>ç­”ï¼šJava é¢†åŸŸçš„ Web Service æ¡†æ¶å¾ˆå¤šï¼ŒåŒ…æ‹¬ Axis2ï¼ˆAxis çš„å‡çº§ç‰ˆæœ¬ï¼‰ã€Jerseyï¼ˆRESTful çš„ Web Service æ¡†æ¶ï¼‰ã€CXFï¼ˆXFire çš„å»¶ç»­ç‰ˆæœ¬ï¼‰ã€Hessianã€Turmericã€JBoss SOA ç­‰ï¼Œå…¶ä¸­ç»å¤§å¤šæ•°éƒ½æ˜¯å¼€æºæ¡†æ¶ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>é¢è¯•è¢«é—®åˆ°è¿™ç±»é—®é¢˜çš„æ—¶å€™ä¸€å®šé€‰æ‹©è‡ªå·±ç”¨è¿‡çš„æœ€ç†Ÿæ‚‰çš„ä½œç­”ï¼Œå¦‚æœä¹‹å‰æ²¡æœ‰äº†è§£è¿‡å°±åº”è¯¥åœ¨é¢è¯•å‰èŠ±ä¸€äº›æ—¶é—´äº†è§£å…¶ä¸­çš„ä¸¤ä¸ªï¼Œå¹¶æ¯”è¾ƒå…¶ä¼˜ç¼ºç‚¹ï¼Œè¿™æ ·æ‰èƒ½åœ¨é¢è¯•æ—¶ç»™å‡ºä¸€ä¸ªæ¼‚äº®çš„ç­”æ¡ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> â˜•Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java é¢è¯•é¢˜è§£æï¼ˆè®¾è®¡æ¨¡å¼ï¼‰</title>
      <link href="post/1cfbd3b3.html"/>
      <url>post/1cfbd3b3.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="ç®€è¿°ä¸€ä¸‹é¢å‘å¯¹è±¡çš„-quot-å…­åŸåˆ™ä¸€æ³•åˆ™-quot-ã€‚"><a href="#ç®€è¿°ä¸€ä¸‹é¢å‘å¯¹è±¡çš„-quot-å…­åŸåˆ™ä¸€æ³•åˆ™-quot-ã€‚" class="headerlink" title="ç®€è¿°ä¸€ä¸‹é¢å‘å¯¹è±¡çš„&quot;å…­åŸåˆ™ä¸€æ³•åˆ™&quot;ã€‚"></a>ç®€è¿°ä¸€ä¸‹é¢å‘å¯¹è±¡çš„&quot;å…­åŸåˆ™ä¸€æ³•åˆ™&quot;ã€‚</h3></blockquote><p>ç­”ï¼š</p><ul><li><p><strong>å•ä¸€èŒè´£åŸåˆ™ï¼šä¸€ä¸ªç±»åªåšå®ƒè¯¥åšçš„äº‹æƒ…ã€‚</strong>ï¼ˆå•ä¸€èŒè´£åŸåˆ™æƒ³è¡¨è¾¾çš„å°±æ˜¯&quot;é«˜å†…èš&quot;ï¼Œå†™ä»£ç æœ€ç»ˆæçš„åŸåˆ™åªæœ‰å…­ä¸ªå­—â€œé«˜å†…èšã€ä½è€¦åˆâ€ï¼Œå°±å¦‚åŒè‘µèŠ±å®å…¸æˆ–è¾Ÿé‚ªå‰‘è°±çš„ä¸­å¿ƒæ€æƒ³å°±å…«ä¸ªå­—â€œæ¬²ç»ƒæ­¤åŠŸå¿…å…ˆè‡ªå®«â€ï¼Œæ‰€è°“çš„é«˜å†…èšå°±æ˜¯ä¸€ä¸ªä»£ç æ¨¡å—åªå®Œæˆä¸€é¡¹åŠŸèƒ½ï¼Œåœ¨é¢å‘å¯¹è±¡ä¸­ï¼Œå¦‚æœåªè®©ä¸€ä¸ªç±»å®Œæˆå®ƒè¯¥åšçš„äº‹ï¼Œè€Œä¸æ¶‰åŠä¸å®ƒæ— å…³çš„é¢†åŸŸå°±æ˜¯è·µè¡Œäº†é«˜å†…èšçš„åŸåˆ™ï¼Œè¿™ä¸ªç±»å°±åªæœ‰å•ä¸€èŒè´£ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ä¸€å¥è¯å«â€œå› ä¸ºä¸“æ³¨ï¼Œæ‰€ä»¥ä¸“ä¸šâ€ï¼Œä¸€ä¸ªå¯¹è±¡å¦‚æœæ‰¿æ‹…å¤ªå¤šçš„èŒè´£ï¼Œé‚£ä¹ˆæ³¨å®šå®ƒä»€ä¹ˆéƒ½åšä¸å¥½ã€‚è¿™ä¸ªä¸–ç•Œä¸Šä»»ä½•å¥½çš„ä¸œè¥¿éƒ½æœ‰ä¸¤ä¸ªç‰¹å¾ï¼Œä¸€ä¸ªæ˜¯åŠŸèƒ½å•ä¸€ï¼Œå¥½çš„ç›¸æœºç»å¯¹ä¸æ˜¯ç”µè§†è´­ç‰©é‡Œé¢å–çš„é‚£ç§ä¸€ä¸ªæœºå™¨æœ‰ä¸€ç™¾å¤šç§åŠŸèƒ½çš„ï¼Œå®ƒåŸºæœ¬ä¸Šåªèƒ½ç…§ç›¸ï¼›å¦ä¸€ä¸ªæ˜¯æ¨¡å—åŒ–ï¼Œå¥½çš„è‡ªè¡Œè½¦æ˜¯ç»„è£…è½¦ï¼Œä»å‡éœ‡å‰ã€åˆ¹è½¦åˆ°å˜é€Ÿå™¨ï¼Œæ‰€æœ‰çš„éƒ¨ä»¶éƒ½æ˜¯å¯ä»¥æ‹†å¸å’Œé‡æ–°ç»„è£…çš„ï¼Œå¥½çš„ä¹’ä¹“çƒæ‹ä¹Ÿä¸æ˜¯æˆå“æ‹ï¼Œä¸€å®šæ˜¯åº•æ¿å’Œèƒ¶çš®å¯ä»¥æ‹†åˆ†å’Œè‡ªè¡Œç»„è£…çš„ï¼Œä¸€ä¸ªå¥½çš„è½¯ä»¶ç³»ç»Ÿï¼Œå®ƒé‡Œé¢çš„æ¯ä¸ªåŠŸèƒ½æ¨¡å—ä¹Ÿåº”è¯¥æ˜¯å¯ä»¥è½»æ˜“çš„æ‹¿åˆ°å…¶ä»–ç³»ç»Ÿä¸­ä½¿ç”¨çš„ï¼Œè¿™æ ·æ‰èƒ½å®ç°è½¯ä»¶å¤ç”¨çš„ç›®æ ‡ã€‚ï¼‰</p></li><li><p><strong>å¼€é—­åŸåˆ™ï¼šè½¯ä»¶å®ä½“åº”å½“å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</strong>ï¼ˆåœ¨ç†æƒ³çš„çŠ¶æ€ä¸‹ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¸ºä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿå¢åŠ æ–°åŠŸèƒ½æ—¶ï¼Œåªéœ€è¦ä»åŸæ¥çš„ç³»ç»Ÿæ´¾ç”Ÿå‡ºä¸€äº›æ–°ç±»å°±å¯ä»¥ï¼Œä¸éœ€è¦ä¿®æ”¹åŸæ¥çš„ä»»ä½•ä¸€è¡Œä»£ç ã€‚è¦åšåˆ°å¼€é—­æœ‰ä¸¤ä¸ªè¦ç‚¹ï¼š(1)æŠ½è±¡æ˜¯å…³é”®ï¼Œä¸€ä¸ªç³»ç»Ÿä¸­å¦‚æœæ²¡æœ‰æŠ½è±¡ç±»æˆ–æ¥å£ç³»ç»Ÿå°±æ²¡æœ‰æ‰©å±•ç‚¹ï¼›(2)å°è£…å¯å˜æ€§ï¼Œå°†ç³»ç»Ÿä¸­çš„å„ç§å¯å˜å› ç´ å°è£…åˆ°ä¸€ä¸ªç»§æ‰¿ç»“æ„ä¸­ï¼Œå¦‚æœå¤šä¸ªå¯å˜å› ç´ æ··æ‚åœ¨ä¸€èµ·ï¼Œç³»ç»Ÿå°†å˜å¾—å¤æ‚è€Œæ¢ä¹±ï¼Œå¦‚æœä¸æ¸…æ¥šå¦‚ä½•å°è£…å¯å˜æ€§ï¼Œå¯ä»¥å‚è€ƒã€Šè®¾è®¡æ¨¡å¼ç²¾è§£ã€‹ä¸€ä¹¦ä¸­å¯¹æ¡¥æ¢æ¨¡å¼çš„è®²è§£çš„ç« èŠ‚ã€‚ï¼‰</p></li><li><p><strong>ä¾èµ–å€’è½¬åŸåˆ™ï¼šé¢å‘æ¥å£ç¼–ç¨‹ã€‚</strong>ï¼ˆè¯¥åŸåˆ™è¯´å¾—ç›´ç™½å’Œå…·ä½“ä¸€äº›å°±æ˜¯å£°æ˜æ–¹æ³•çš„å‚æ•°ç±»å‹ã€æ–¹æ³•çš„è¿”å›ç±»å‹ã€å˜é‡çš„å¼•ç”¨ç±»å‹æ—¶ï¼Œå°½å¯èƒ½ä½¿ç”¨æŠ½è±¡ç±»å‹è€Œä¸ç”¨å…·ä½“ç±»å‹ï¼Œå› ä¸ºæŠ½è±¡ç±»å‹å¯ä»¥è¢«å®ƒçš„ä»»ä½•ä¸€ä¸ªå­ç±»å‹æ‰€æ›¿ä»£ï¼Œè¯·å‚è€ƒä¸‹é¢çš„é‡Œæ°æ›¿æ¢åŸåˆ™ã€‚ï¼‰<strong>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼šä»»ä½•æ—¶å€™éƒ½å¯ä»¥ç”¨å­ç±»å‹æ›¿æ¢æ‰çˆ¶ç±»å‹ã€‚</strong>ï¼ˆå…³äºé‡Œæ°æ›¿æ¢åŸåˆ™çš„æè¿°ï¼ŒBarbara Liskov å¥³å£«çš„æè¿°æ¯”è¿™ä¸ªè¦å¤æ‚å¾—å¤šï¼Œä½†ç®€å•çš„è¯´å°±æ˜¯èƒ½ç”¨çˆ¶ç±»å‹çš„åœ°æ–¹å°±ä¸€å®šèƒ½ä½¿ç”¨å­ç±»å‹ã€‚é‡Œæ°æ›¿æ¢åŸåˆ™å¯ä»¥æ£€æŸ¥ç»§æ‰¿å…³ç³»æ˜¯å¦åˆç†ï¼Œå¦‚æœä¸€ä¸ªç»§æ‰¿å…³ç³»è¿èƒŒäº†é‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œé‚£ä¹ˆè¿™ä¸ªç»§æ‰¿å…³ç³»ä¸€å®šæ˜¯é”™è¯¯çš„ï¼Œéœ€è¦å¯¹ä»£ç è¿›è¡Œé‡æ„ã€‚ä¾‹å¦‚è®©çŒ«ç»§æ‰¿ç‹—ï¼Œæˆ–è€…ç‹—ç»§æ‰¿çŒ«ï¼Œåˆæˆ–è€…è®©æ­£æ–¹å½¢ç»§æ‰¿é•¿æ–¹å½¢éƒ½æ˜¯é”™è¯¯çš„ç»§æ‰¿å…³ç³»ï¼Œå› ä¸ºä½ å¾ˆå®¹æ˜“æ‰¾åˆ°è¿åé‡Œæ°æ›¿æ¢åŸåˆ™çš„åœºæ™¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå­ç±»ä¸€å®šæ˜¯å¢åŠ çˆ¶ç±»çš„èƒ½åŠ›è€Œä¸æ˜¯å‡å°‘çˆ¶ç±»çš„èƒ½åŠ›ï¼Œå› ä¸ºå­ç±»æ¯”çˆ¶ç±»çš„èƒ½åŠ›æ›´å¤šï¼ŒæŠŠèƒ½åŠ›å¤šçš„å¯¹è±¡å½“æˆèƒ½åŠ›å°‘çš„å¯¹è±¡æ¥ç”¨å½“ç„¶æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ï¼‰</p></li><li><p><strong>æ¥å£éš”ç¦»åŸåˆ™ï¼šæ¥å£è¦å°è€Œä¸“ï¼Œç»ä¸èƒ½å¤§è€Œå…¨ã€‚</strong>ï¼ˆè‡ƒè‚¿çš„æ¥å£æ˜¯å¯¹æ¥å£çš„æ±¡æŸ“ï¼Œæ—¢ç„¶æ¥å£è¡¨ç¤ºèƒ½åŠ›ï¼Œé‚£ä¹ˆä¸€ä¸ªæ¥å£åªåº”è¯¥æè¿°ä¸€ç§èƒ½åŠ›ï¼Œæ¥å£ä¹Ÿåº”è¯¥æ˜¯é«˜åº¦å†…èšçš„ã€‚ä¾‹å¦‚ï¼Œç´æ£‹ä¹¦ç”»å°±åº”è¯¥åˆ†åˆ«è®¾è®¡ä¸ºå››ä¸ªæ¥å£ï¼Œè€Œä¸åº”è®¾è®¡æˆä¸€ä¸ªæ¥å£ä¸­çš„å››ä¸ªæ–¹æ³•ï¼Œå› ä¸ºå¦‚æœè®¾è®¡æˆä¸€ä¸ªæ¥å£ä¸­çš„å››ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¥å£å¾ˆéš¾ç”¨ï¼Œæ¯•ç«Ÿç´æ£‹ä¹¦ç”»å››æ ·éƒ½ç²¾é€šçš„äººè¿˜æ˜¯å°‘æ•°ï¼Œè€Œå¦‚æœè®¾è®¡æˆå››ä¸ªæ¥å£ï¼Œä¼šå‡ é¡¹å°±å®ç°å‡ ä¸ªæ¥å£ï¼Œè¿™æ ·çš„è¯æ¯ä¸ªæ¥å£è¢«å¤ç”¨çš„å¯èƒ½æ€§æ˜¯å¾ˆé«˜çš„ã€‚Javaä¸­çš„æ¥å£ä»£è¡¨èƒ½åŠ›ã€ä»£è¡¨çº¦å®šã€ä»£è¡¨è§’è‰²ï¼Œèƒ½å¦æ­£ç¡®çš„ä½¿ç”¨æ¥å£ä¸€å®šæ˜¯ç¼–ç¨‹æ°´å¹³é«˜ä½çš„é‡è¦æ ‡è¯†ã€‚ï¼‰</p></li><li><p><strong>åˆæˆèšåˆå¤ç”¨åŸåˆ™ï¼šä¼˜å…ˆä½¿ç”¨èšåˆæˆ–åˆæˆå…³ç³»å¤ç”¨ä»£ç ã€‚</strong>ï¼ˆé€šè¿‡ç»§æ‰¿æ¥å¤ç”¨ä»£ç æ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­è¢«æ»¥ç”¨å¾—æœ€å¤šçš„ä¸œè¥¿ï¼Œå› ä¸ºæ‰€æœ‰çš„æ•™ç§‘ä¹¦éƒ½æ— ä¸€ä¾‹å¤–çš„å¯¹ç»§æ‰¿è¿›è¡Œäº†é¼“å¹ä»è€Œè¯¯å¯¼äº†åˆå­¦è€…ï¼Œç±»ä¸ç±»ä¹‹é—´ç®€å•çš„è¯´æœ‰ä¸‰ç§å…³ç³»ï¼ŒIs-A å…³ç³»ã€Has-A å…³ç³»ã€Use-A å…³ç³»ï¼Œåˆ†åˆ«ä»£è¡¨ç»§æ‰¿ã€å…³è”å’Œä¾èµ–ã€‚å…¶ä¸­ï¼Œå…³è”å…³ç³»æ ¹æ®å…¶å…³è”çš„å¼ºåº¦åˆå¯ä»¥è¿›ä¸€æ­¥åˆ’åˆ†ä¸ºå…³è”ã€èšåˆå’Œåˆæˆï¼Œä½†è¯´ç™½äº†éƒ½æ˜¯ Has-Aå…³ ç³»ï¼Œåˆæˆèšåˆå¤ç”¨åŸåˆ™æƒ³è¡¨è¾¾çš„æ˜¯ä¼˜å…ˆè€ƒè™‘ Has-A å…³ç³»è€Œä¸æ˜¯ Is-A å…³ç³»å¤ç”¨ä»£ç ï¼ŒåŸå› å˜›å¯ä»¥è‡ªå·±ä»ç™¾åº¦ä¸Šæ‰¾åˆ°ä¸€ä¸‡ä¸ªç†ç”±ï¼Œéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå³ä½¿åœ¨ Java çš„ API ä¸­ä¹Ÿæœ‰ä¸å°‘æ»¥ç”¨ç»§æ‰¿çš„ä¾‹å­ï¼Œä¾‹å¦‚ Properties ç±»ç»§æ‰¿äº† Hashtable ç±»ï¼ŒStack ç±»ç»§æ‰¿äº† Vector ç±»ï¼Œè¿™äº›ç»§æ‰¿æ˜æ˜¾å°±æ˜¯é”™è¯¯çš„ï¼Œæ›´å¥½çš„åšæ³•æ˜¯åœ¨ Properties ç±»ä¸­æ”¾ç½®ä¸€ä¸ª Hashtable ç±»å‹çš„æˆå‘˜å¹¶ä¸”å°†å…¶é”®å’Œå€¼éƒ½è®¾ç½®ä¸ºå­—ç¬¦ä¸²æ¥å­˜å‚¨æ•°æ®ï¼Œè€Œ Stack ç±»çš„è®¾è®¡ä¹Ÿåº”è¯¥æ˜¯åœ¨ Stack ç±»ä¸­æ”¾ä¸€ä¸ª Vector å¯¹è±¡æ¥å­˜å‚¨æ•°æ®ã€‚è®°ä½ï¼šä»»ä½•æ—¶å€™éƒ½ä¸è¦ç»§æ‰¿å·¥å…·ç±»ï¼Œå·¥å…·æ˜¯å¯ä»¥æ‹¥æœ‰å¹¶å¯ä»¥ä½¿ç”¨çš„ï¼Œè€Œä¸æ˜¯æ‹¿æ¥ç»§æ‰¿çš„ã€‚ï¼‰</p></li><li><p><strong>è¿ªç±³ç‰¹æ³•åˆ™ï¼šè¿ªç±³ç‰¹æ³•åˆ™åˆå«æœ€å°‘çŸ¥è¯†åŸåˆ™ï¼Œä¸€ä¸ªå¯¹è±¡åº”å½“å¯¹å…¶ä»–å¯¹è±¡æœ‰å°½å¯èƒ½å°‘çš„äº†è§£ã€‚</strong>ï¼ˆè¿ªç±³ç‰¹æ³•åˆ™ç®€å•çš„è¯´å°±æ˜¯å¦‚ä½•åšåˆ°â€œä½è€¦åˆâ€ï¼Œé—¨é¢æ¨¡å¼å’Œè°ƒåœè€…æ¨¡å¼å°±æ˜¯å¯¹è¿ªç±³ç‰¹æ³•åˆ™çš„è·µè¡Œã€‚å¯¹äºé—¨é¢æ¨¡å¼å¯ä»¥ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½ å»ä¸€å®¶å…¬å¸æ´½è°ˆä¸šåŠ¡ï¼Œä½ ä¸éœ€è¦äº†è§£è¿™ä¸ªå…¬å¸å†…éƒ¨æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Œä½ ç”šè‡³å¯ä»¥å¯¹è¿™ä¸ªå…¬å¸ä¸€æ— æ‰€çŸ¥ï¼Œå»çš„æ—¶å€™åªéœ€è¦æ‰¾åˆ°å…¬å¸å…¥å£å¤„çš„å‰å°ç¾å¥³ï¼Œå‘Šè¯‰å¥¹ä»¬ä½ è¦åšä»€ä¹ˆï¼Œå¥¹ä»¬ä¼šæ‰¾åˆ°åˆé€‚çš„äººè·Ÿä½ æ¥æ´½ï¼Œå‰å°çš„ç¾å¥³å°±æ˜¯å…¬å¸è¿™ä¸ªç³»ç»Ÿçš„é—¨é¢ã€‚å†å¤æ‚çš„ç³»ç»Ÿéƒ½å¯ä»¥ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªç®€å•çš„é—¨é¢ï¼ŒJava Web å¼€å‘ä¸­ä½œä¸ºå‰ç«¯æ§åˆ¶å™¨çš„ Servlet æˆ– Filter ä¸å°±æ˜¯ä¸€ä¸ªé—¨é¢å—ï¼Œæµè§ˆå™¨å¯¹æœåŠ¡å™¨çš„è¿ä½œæ–¹å¼ä¸€æ— æ‰€çŸ¥ï¼Œä½†æ˜¯é€šè¿‡å‰ç«¯æ§åˆ¶å™¨å°±èƒ½å¤Ÿæ ¹æ®ä½ çš„è¯·æ±‚å¾—åˆ°ç›¸åº”çš„æœåŠ¡ã€‚è°ƒåœè€…æ¨¡å¼ä¹Ÿå¯ä»¥ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜ï¼Œä¾‹å¦‚ä¸€å°è®¡ç®—æœºï¼ŒCPUã€å†…å­˜ã€ç¡¬ç›˜ã€æ˜¾å¡ã€å£°å¡å„ç§è®¾å¤‡éœ€è¦ç›¸äº’é…åˆæ‰èƒ½å¾ˆå¥½çš„å·¥ä½œï¼Œä½†æ˜¯å¦‚æœè¿™äº›ä¸œè¥¿éƒ½ç›´æ¥è¿æ¥åˆ°ä¸€èµ·ï¼Œè®¡ç®—æœºçš„å¸ƒçº¿å°†å¼‚å¸¸å¤æ‚ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸»æ¿ä½œä¸ºä¸€ä¸ªè°ƒåœè€…çš„èº«ä»½å‡ºç°ï¼Œå®ƒå°†å„ä¸ªè®¾å¤‡è¿æ¥åœ¨ä¸€èµ·è€Œä¸éœ€è¦æ¯ä¸ªè®¾å¤‡ä¹‹é—´ç›´æ¥äº¤æ¢æ•°æ®ï¼Œè¿™æ ·å°±å‡å°äº†ç³»ç»Ÿçš„è€¦åˆåº¦å’Œå¤æ‚åº¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è¿ªç±³ç‰¹æ³•åˆ™ç”¨é€šä¿—çš„è¯æ¥å°†å°±æ˜¯ä¸è¦å’Œé™Œç”Ÿäººæ‰“äº¤é“ï¼Œå¦‚æœçœŸçš„éœ€è¦ï¼Œæ‰¾ä¸€ä¸ªè‡ªå·±çš„æœ‹å‹ï¼Œè®©ä»–æ›¿ä½ å’Œé™Œç”Ÿäººæ‰“äº¤é“ã€‚ï¼‰</p></li></ul><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/89_1.png" alt></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/89_2.png" alt></p><blockquote><h3 id="ç®€è¿°ä¸€ä¸‹ä½ äº†è§£çš„è®¾è®¡æ¨¡å¼ã€‚"><a href="#ç®€è¿°ä¸€ä¸‹ä½ äº†è§£çš„è®¾è®¡æ¨¡å¼ã€‚" class="headerlink" title="ç®€è¿°ä¸€ä¸‹ä½ äº†è§£çš„è®¾è®¡æ¨¡å¼ã€‚"></a>ç®€è¿°ä¸€ä¸‹ä½ äº†è§£çš„è®¾è®¡æ¨¡å¼ã€‚</h3></blockquote><p>ç­”ï¼šæ‰€è°“è®¾è®¡æ¨¡å¼ï¼Œå°±æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨çš„ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ï¼ˆæƒ…å¢ƒä¸­ä¸€ä¸ªé—®é¢˜ç»è¿‡è¯å®çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼‰ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚è®¾è®¡æ¨¡å¼ä½¿äººä»¬å¯ä»¥æ›´åŠ ç®€å•æ–¹ä¾¿çš„å¤ç”¨æˆåŠŸçš„è®¾è®¡å’Œä½“ç³»ç»“æ„ã€‚å°†å·²è¯å®çš„æŠ€æœ¯è¡¨è¿°æˆè®¾è®¡æ¨¡å¼ä¹Ÿä¼šä½¿æ–°ç³»ç»Ÿå¼€å‘è€…æ›´åŠ å®¹æ˜“ç†è§£å…¶è®¾è®¡æ€è·¯ã€‚</p><p>åœ¨ GoF çš„ã€ŠDesign Patterns: Elements of Reusable Object-Oriented Softwareã€‹ä¸­ç»™å‡ºäº†ä¸‰ç±»ï¼ˆ<strong>åˆ›å»ºå‹</strong>[å¯¹ç±»çš„å®ä¾‹åŒ–è¿‡ç¨‹çš„æŠ½è±¡åŒ–]ã€<strong>ç»“æ„å‹</strong>[æè¿°å¦‚ä½•å°†ç±»æˆ–å¯¹è±¡ç»“åˆåœ¨ä¸€èµ·å½¢æˆæ›´å¤§çš„ç»“æ„]ã€<strong>è¡Œä¸ºå‹</strong>[å¯¹åœ¨ä¸åŒçš„å¯¹è±¡ä¹‹é—´åˆ’åˆ†è´£ä»»å’Œç®—æ³•çš„æŠ½è±¡åŒ–]ï¼‰å…± 23 ç§è®¾è®¡æ¨¡å¼ï¼ŒåŒ…æ‹¬ï¼šAbstract Factoryï¼ˆæŠ½è±¡å·¥å‚æ¨¡å¼ï¼‰ï¼ŒBuilderï¼ˆå»ºé€ è€…æ¨¡å¼ï¼‰ï¼ŒFactory Methodï¼ˆå·¥å‚æ–¹æ³•æ¨¡å¼ï¼‰ï¼ŒPrototypeï¼ˆåŸå§‹æ¨¡å‹æ¨¡å¼ï¼‰ï¼ŒSingletonï¼ˆå•ä¾‹æ¨¡å¼ï¼‰ï¼›Facadeï¼ˆé—¨é¢æ¨¡å¼ï¼‰ï¼ŒAdapterï¼ˆé€‚é…å™¨æ¨¡å¼ï¼‰ï¼ŒBridgeï¼ˆæ¡¥æ¢æ¨¡å¼ï¼‰ï¼ŒCompositeï¼ˆåˆæˆæ¨¡å¼ï¼‰ï¼ŒDecoratorï¼ˆè£…é¥°æ¨¡å¼ï¼‰ï¼ŒFlyweightï¼ˆäº«å…ƒæ¨¡å¼ï¼‰ï¼ŒProxyï¼ˆä»£ç†æ¨¡å¼ï¼‰ï¼›Commandï¼ˆå‘½ä»¤æ¨¡å¼ï¼‰ï¼ŒInterpreterï¼ˆè§£é‡Šå™¨æ¨¡å¼ï¼‰ï¼ŒVisitorï¼ˆè®¿é—®è€…æ¨¡å¼ï¼‰ï¼ŒIteratorï¼ˆè¿­ä»£å­æ¨¡å¼ï¼‰ï¼ŒMediatorï¼ˆè°ƒåœè€…æ¨¡å¼ï¼‰ï¼ŒMementoï¼ˆå¤‡å¿˜å½•æ¨¡å¼ï¼‰ï¼ŒObserverï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰ï¼ŒStateï¼ˆçŠ¶æ€æ¨¡å¼ï¼‰ï¼ŒStrategyï¼ˆç­–ç•¥æ¨¡å¼ï¼‰ï¼ŒTemplate Methodï¼ˆæ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼‰ï¼ŒChain Of Responsibilityï¼ˆè´£ä»»é“¾æ¨¡å¼ï¼‰ã€‚</p><p>é¢è¯•è¢«é—®åˆ°å…³äºè®¾è®¡æ¨¡å¼çš„çŸ¥è¯†æ—¶ï¼Œå¯ä»¥æ‹£æœ€å¸¸ç”¨çš„ä½œç­”ï¼Œä¾‹å¦‚ï¼š</p><ul><li>å·¥å‚æ¨¡å¼ï¼šå·¥å‚ç±»å¯ä»¥æ ¹æ®æ¡ä»¶ç”Ÿæˆä¸åŒçš„å­ç±»å®ä¾‹ï¼Œè¿™äº›å­ç±»æœ‰ä¸€ä¸ªå…¬å…±çš„æŠ½è±¡çˆ¶ç±»å¹¶ä¸”å®ç°äº†ç›¸åŒçš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•é’ˆå¯¹ä¸åŒçš„æ•°æ®è¿›è¡Œäº†ä¸åŒçš„æ“ä½œï¼ˆå¤šæ€æ–¹æ³•ï¼‰ã€‚å½“å¾—åˆ°å­ç±»çš„å®ä¾‹åï¼Œå¼€å‘äººå‘˜å¯ä»¥è°ƒç”¨åŸºç±»ä¸­çš„æ–¹æ³•è€Œä¸å¿…è€ƒè™‘åˆ°åº•è¿”å›çš„æ˜¯å“ªä¸€ä¸ªå­ç±»çš„å®ä¾‹ã€‚</li><li>ä»£ç†æ¨¡å¼ï¼šç»™ä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶åŸå¯¹è±¡çš„å¼•ç”¨ã€‚å®é™…å¼€å‘ä¸­ï¼ŒæŒ‰ç…§ä½¿ç”¨ç›®çš„çš„ä¸åŒï¼Œä»£ç†å¯ä»¥åˆ†ä¸ºï¼šè¿œç¨‹ä»£ç†ã€è™šæ‹Ÿä»£ç†ã€ä¿æŠ¤ä»£ç†ã€Cache ä»£ç†ã€é˜²ç«å¢™ä»£ç†ã€åŒæ­¥åŒ–ä»£ç†ã€æ™ºèƒ½å¼•ç”¨ä»£ç†ã€‚</li><li>é€‚é…å™¨æ¨¡å¼ï¼šæŠŠä¸€ä¸ªç±»çš„æ¥å£å˜æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸå¾…çš„å¦ä¸€ç§æ¥å£ï¼Œä»è€Œä½¿åŸæœ¬å› æ¥å£ä¸åŒ¹é…è€Œæ— æ³•åœ¨ä¸€èµ·ä½¿ç”¨çš„ç±»èƒ½å¤Ÿä¸€èµ·å·¥ä½œã€‚</li><li>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šæä¾›ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå°†éƒ¨åˆ†é€»è¾‘ä»¥å…·ä½“æ–¹æ³•æˆ–æ„é€ å™¨çš„å½¢å¼å®ç°ï¼Œç„¶åå£°æ˜ä¸€äº›æŠ½è±¡æ–¹æ³•æ¥è¿«ä½¿å­ç±»å®ç°å‰©ä½™çš„é€»è¾‘ã€‚ä¸åŒçš„å­ç±»å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼å®ç°è¿™äº›æŠ½è±¡æ–¹æ³•ï¼ˆå¤šæ€å®ç°ï¼‰ï¼Œä»è€Œå®ç°ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ã€‚</li></ul><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è®²è®²ä¸Šé¢æåˆ°çš„é—¨é¢æ¨¡å¼ã€æ¡¥æ¢æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€è£…æ½¢æ¨¡å¼ï¼ˆCollections å·¥å…·ç±»å’Œ I/O ç³»ç»Ÿä¸­éƒ½ä½¿ç”¨è£…æ½¢æ¨¡å¼ï¼‰ç­‰ï¼Œåæ­£åŸºæœ¬åŸåˆ™å°±æ˜¯æ‹£è‡ªå·±æœ€ç†Ÿæ‚‰çš„ã€ç”¨å¾—æœ€å¤šçš„ä½œç­”ï¼Œä»¥å…è¨€å¤šå¿…å¤±ã€‚</p><blockquote><h3 id="ç”¨Javaå†™ä¸€ä¸ªå•ä¾‹ç±»ã€‚"><a href="#ç”¨Javaå†™ä¸€ä¸ªå•ä¾‹ç±»ã€‚" class="headerlink" title="ç”¨Javaå†™ä¸€ä¸ªå•ä¾‹ç±»ã€‚"></a>ç”¨Javaå†™ä¸€ä¸ªå•ä¾‹ç±»ã€‚</h3></blockquote><p>ç­”ï¼š</p><ul><li><p>é¥¿æ±‰å¼å•ä¾‹</p><p>  <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>æ‡’æ±‰å¼å•ä¾‹</p><p>  <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> instance ï¼ <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li></ul><p><strong>æ³¨æ„ï¼š</strong>å®ç°ä¸€ä¸ªå•ä¾‹æœ‰ä¸¤ç‚¹æ³¨æ„äº‹é¡¹ï¼Œ(1)å°†æ„é€ å™¨ç§æœ‰ï¼Œä¸å…è®¸å¤–ç•Œé€šè¿‡æ„é€ å™¨åˆ›å»ºå¯¹è±¡ï¼›(2)é€šè¿‡å…¬å¼€çš„é™æ€æ–¹æ³•å‘å¤–ç•Œè¿”å›ç±»çš„å”¯ä¸€å®ä¾‹ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜å¯ä»¥æ€è€ƒï¼šSpring çš„ IoC å®¹å™¨å¯ä»¥ä¸ºæ™®é€šçš„ç±»åˆ›å»ºå•ä¾‹ï¼Œå®ƒæ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p><blockquote><h3 id="ä»€ä¹ˆæ˜¯-UMLï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-UMLï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ UMLï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ UMLï¼Ÿ</h3></blockquote><p>ç­”ï¼šUML æ˜¯ç»Ÿä¸€å»ºæ¨¡è¯­è¨€ï¼ˆUnified Modeling Languageï¼‰çš„ç¼©å†™ï¼Œå®ƒå‘è¡¨äº 1997 å¹´ï¼Œç»¼åˆäº†å½“æ—¶å·²ç»å­˜åœ¨çš„é¢å‘å¯¹è±¡çš„å»ºæ¨¡è¯­è¨€ã€æ–¹æ³•å’Œè¿‡ç¨‹ï¼Œæ˜¯ä¸€ä¸ªæ”¯æŒæ¨¡å‹åŒ–å’Œè½¯ä»¶ç³»ç»Ÿå¼€å‘çš„å›¾å½¢åŒ–è¯­è¨€ï¼Œä¸ºè½¯ä»¶å¼€å‘çš„æ‰€æœ‰é˜¶æ®µæä¾›æ¨¡å‹åŒ–å’Œå¯è§†åŒ–æ”¯æŒã€‚ä½¿ç”¨UMLå¯ä»¥å¸®åŠ©æ²Ÿé€šä¸äº¤æµï¼Œè¾…åŠ©åº”ç”¨è®¾è®¡å’Œæ–‡æ¡£çš„ç”Ÿæˆï¼Œè¿˜èƒ½å¤Ÿé˜é‡Šç³»ç»Ÿçš„ç»“æ„å’Œè¡Œä¸ºã€‚</p><blockquote><h3 id="UML-ä¸­æœ‰å“ªäº›å¸¸ç”¨çš„å›¾ï¼Ÿ"><a href="#UML-ä¸­æœ‰å“ªäº›å¸¸ç”¨çš„å›¾ï¼Ÿ" class="headerlink" title="UML ä¸­æœ‰å“ªäº›å¸¸ç”¨çš„å›¾ï¼Ÿ"></a>UML ä¸­æœ‰å“ªäº›å¸¸ç”¨çš„å›¾ï¼Ÿ</h3></blockquote><p>ç­”ï¼šUML å®šä¹‰äº†å¤šç§å›¾å½¢åŒ–çš„ç¬¦å·æ¥æè¿°è½¯ä»¶ç³»ç»Ÿéƒ¨åˆ†æˆ–å…¨éƒ¨çš„é™æ€ç»“æ„å’ŒåŠ¨æ€ç»“æ„ï¼ŒåŒ…æ‹¬ï¼šç”¨ä¾‹å›¾ï¼ˆuse case diagramï¼‰ã€ç±»å›¾ï¼ˆclass diagramï¼‰ã€æ—¶åºå›¾ï¼ˆsequence diagramï¼‰ã€åä½œå›¾ï¼ˆcollaboration diagramï¼‰ã€çŠ¶æ€å›¾ï¼ˆstatechart diagramï¼‰ã€æ´»åŠ¨å›¾ï¼ˆactivity diagramï¼‰ã€æ„ä»¶å›¾ï¼ˆcomponent diagramï¼‰ã€éƒ¨ç½²å›¾ï¼ˆdeployment diagramï¼‰ç­‰ã€‚åœ¨è¿™äº›å›¾å½¢åŒ–ç¬¦å·ä¸­ï¼Œæœ‰ä¸‰ç§å›¾æœ€ä¸ºé‡è¦ï¼Œåˆ†åˆ«æ˜¯ï¼šç”¨ä¾‹å›¾ï¼ˆç”¨æ¥æ•è·éœ€æ±‚ï¼Œæè¿°ç³»ç»Ÿçš„åŠŸèƒ½ï¼Œé€šè¿‡è¯¥å›¾å¯ä»¥è¿…é€Ÿçš„äº†è§£ç³»ç»Ÿçš„åŠŸèƒ½æ¨¡å—åŠå…¶å…³ç³»ï¼‰ã€ç±»å›¾ï¼ˆæè¿°ç±»ä»¥åŠç±»ä¸ç±»ä¹‹é—´çš„å…³ç³»ï¼Œé€šè¿‡è¯¥å›¾å¯ä»¥å¿«é€Ÿäº†è§£ç³»ç»Ÿï¼‰ã€æ—¶åºå›¾ï¼ˆæè¿°æ‰§è¡Œç‰¹å®šä»»åŠ¡æ—¶å¯¹è±¡ä¹‹é—´çš„äº¤äº’å…³ç³»ä»¥åŠæ‰§è¡Œé¡ºåºï¼Œé€šè¿‡è¯¥å›¾å¯ä»¥äº†è§£å¯¹è±¡èƒ½æ¥æ”¶çš„æ¶ˆæ¯ä¹Ÿå°±æ˜¯è¯´å¯¹è±¡èƒ½å¤Ÿå‘å¤–ç•Œæä¾›çš„æœåŠ¡ï¼‰ã€‚</p><ul><li>ç”¨ä¾‹å›¾ï¼š</li></ul><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/93_1.png" alt></p><ul><li>ç±»å›¾ï¼š</li></ul><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/93_2.png" alt></p><ul><li>æ—¶åºå›¾ï¼š</li></ul><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/93_3.png" alt></p><blockquote><h3 id="ç”¨-Java-å†™ä¸€ä¸ªå†’æ³¡æ’åºã€‚"><a href="#ç”¨-Java-å†™ä¸€ä¸ªå†’æ³¡æ’åºã€‚" class="headerlink" title="ç”¨ Java å†™ä¸€ä¸ªå†’æ³¡æ’åºã€‚"></a>ç”¨ Java å†™ä¸€ä¸ªå†’æ³¡æ’åºã€‚</h3></blockquote><p>ç­”ï¼šå†’æ³¡æ’åºå‡ ä¹æ˜¯ä¸ªç¨‹åºå‘˜éƒ½å†™å¾—å‡ºæ¥ï¼Œä½†æ˜¯é¢è¯•çš„æ—¶å€™å¦‚ä½•å†™ä¸€ä¸ªé€¼æ ¼é«˜çš„å†’æ³¡æ’åºå´ä¸æ˜¯æ¯ä¸ªäººéƒ½èƒ½åšåˆ°ï¼Œä¸‹é¢æä¾›ä¸€ä¸ªå‚è€ƒä»£ç ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Comparator</span><span class="token punctuation">;</span><span class="token comment">/** * æ’åºå™¨æ¥å£(ç­–ç•¥æ¨¡å¼: å°†ç®—æ³•å°è£…åˆ°å…·æœ‰å…±åŒæ¥å£çš„ç‹¬ç«‹çš„ç±»ä¸­ä½¿å¾—å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢) */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Sorter</span> <span class="token punctuation">&#123;</span>   <span class="token comment">/**    * æ’åº    * @param list å¾…æ’åºçš„æ•°ç»„    */</span>   <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">/**    * æ’åº    * @param list å¾…æ’åºçš„æ•°ç»„    * @param comp æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„æ¯”è¾ƒå™¨    */</span>   <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> list<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> comp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Comparator</span><span class="token punctuation">;</span><span class="token comment">/** * å†’æ³¡æ’åº */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BubbleSorter</span> <span class="token keyword">implements</span> <span class="token class-name">Sorter</span> <span class="token punctuation">&#123;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> list<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">boolean</span> swapped <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> len <span class="token operator">=</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token operator">&amp;&amp;</span> swapped<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            swapped <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len <span class="token operator">-</span> i<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">T</span> temp <span class="token operator">=</span> list<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                    list<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                    list<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>                    swapped <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> list<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> comp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">boolean</span> swapped <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> len <span class="token operator">=</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len <span class="token operator">&amp;&amp;</span> swapped<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            swapped <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len <span class="token operator">-</span> i<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>comp<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> list<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">T</span> temp <span class="token operator">=</span> list<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                    list<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                    list<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>                    swapped <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="ç”¨-Java-å†™ä¸€ä¸ªæŠ˜åŠæŸ¥æ‰¾ã€‚"><a href="#ç”¨-Java-å†™ä¸€ä¸ªæŠ˜åŠæŸ¥æ‰¾ã€‚" class="headerlink" title="ç”¨ Java å†™ä¸€ä¸ªæŠ˜åŠæŸ¥æ‰¾ã€‚"></a>ç”¨ Java å†™ä¸€ä¸ªæŠ˜åŠæŸ¥æ‰¾ã€‚</h3></blockquote><p>ç­”ï¼šæŠ˜åŠæŸ¥æ‰¾ï¼Œä¹Ÿç§°äºŒåˆ†æŸ¥æ‰¾ã€äºŒåˆ†æœç´¢ï¼Œæ˜¯ä¸€ç§åœ¨æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾æŸä¸€ç‰¹å®šå…ƒç´ çš„æœç´¢ç®—æ³•ã€‚æœç´ è¿‡ç¨‹ä»æ•°ç»„çš„ä¸­é—´å…ƒç´ å¼€å§‹ï¼Œå¦‚æœä¸­é—´å…ƒç´ æ­£å¥½æ˜¯è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œåˆ™æœç´ è¿‡ç¨‹ç»“æŸï¼›å¦‚æœæŸä¸€ç‰¹å®šå…ƒç´ å¤§äºæˆ–è€…å°äºä¸­é—´å…ƒç´ ï¼Œåˆ™åœ¨æ•°ç»„å¤§äºæˆ–å°äºä¸­é—´å…ƒç´ çš„é‚£ä¸€åŠä¸­æŸ¥æ‰¾ï¼Œè€Œä¸”è·Ÿå¼€å§‹ä¸€æ ·ä»ä¸­é—´å…ƒç´ å¼€å§‹æ¯”è¾ƒã€‚å¦‚æœåœ¨æŸä¸€æ­¥éª¤æ•°ç»„å·²ç»ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºæ‰¾ä¸åˆ°æŒ‡å®šçš„å…ƒç´ ã€‚è¿™ç§æœç´¢ç®—æ³•æ¯ä¸€æ¬¡æ¯”è¾ƒéƒ½ä½¿æœç´¢èŒƒå›´ç¼©å°ä¸€åŠï¼Œå…¶æ—¶é—´å¤æ‚åº¦æ˜¯ O(logN)ã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Comparator</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyUtil</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token keyword">int</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> x<span class="token punctuation">,</span> <span class="token class-name">T</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">return</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> x<span class="token punctuation">.</span>length<span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token comment">// ä½¿ç”¨å¾ªç¯å®ç°çš„äºŒåˆ†æŸ¥æ‰¾</span>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">int</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> x<span class="token punctuation">,</span> <span class="token class-name">T</span> key<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> comp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">int</span> low <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token keyword">int</span> high <span class="token operator">=</span> x<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token keyword">while</span> <span class="token punctuation">(</span>low <span class="token operator">&lt;=</span> high<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>          <span class="token keyword">int</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>low <span class="token operator">+</span> high<span class="token punctuation">)</span> <span class="token operator">>>></span> <span class="token number">1</span><span class="token punctuation">;</span>          <span class="token keyword">int</span> cmp <span class="token operator">=</span> comp<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            low<span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>          <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            high<span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>          <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> mid<span class="token punctuation">;</span>          <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span>   <span class="token comment">// ä½¿ç”¨é€’å½’å®ç°çš„äºŒåˆ†æŸ¥æ‰¾</span>   <span class="token keyword">private</span> <span class="token keyword">static</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token keyword">int</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> low<span class="token punctuation">,</span> <span class="token keyword">int</span> high<span class="token punctuation">,</span> <span class="token class-name">T</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>low <span class="token operator">&lt;=</span> high<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> low <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>high <span class="token operator">-</span>low<span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> mid<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>low<span class="token punctuation">,</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>           <span class="token keyword">return</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> high<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>      <span class="token punctuation">&#125;</span>      <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¯´æ˜ï¼š</strong>ä¸Šé¢çš„ä»£ç ä¸­ç»™å‡ºäº†æŠ˜åŠæŸ¥æ‰¾çš„ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªç”¨é€’å½’å®ç°ï¼Œä¸€ä¸ªç”¨å¾ªç¯å®ç°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è®¡ç®—ä¸­é—´ä½ç½®æ—¶ä¸åº”è¯¥ä½¿ç”¨(high+ low) / 2çš„æ–¹å¼ï¼Œå› ä¸ºåŠ æ³•è¿ç®—å¯èƒ½å¯¼è‡´æ•´æ•°è¶Šç•Œï¼Œè¿™é‡Œåº”è¯¥ä½¿ç”¨ä»¥ä¸‹ä¸‰ç§æ–¹å¼ä¹‹ä¸€ï¼šlow + (high - low) / 2æˆ–low + (high â€“ low) &gt;&gt; 1æˆ–(low + high) &gt;&gt;&gt; 1ï¼ˆ&gt;&gt;&gt;æ˜¯é€»è¾‘å³ç§»ï¼Œæ˜¯ä¸å¸¦ç¬¦å·ä½çš„å³ç§»ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> â˜•Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java é¢è¯•é¢˜è§£æï¼ˆåå°„ï¼‰</title>
      <link href="post/9fbf7373.html"/>
      <url>post/9fbf7373.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="è·å¾—ä¸€ä¸ªç±»çš„ç±»å¯¹è±¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿ"><a href="#è·å¾—ä¸€ä¸ªç±»çš„ç±»å¯¹è±¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿ" class="headerlink" title="è·å¾—ä¸€ä¸ªç±»çš„ç±»å¯¹è±¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿ"></a>è·å¾—ä¸€ä¸ªç±»çš„ç±»å¯¹è±¡æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li>ç±»å‹.classï¼Œä¾‹å¦‚ï¼š<code>String.class</code></li><li>å¯¹è±¡.getClass()ï¼Œä¾‹å¦‚ï¼š<code>&quot;hello&quot;.getClass()</code></li><li>Class.forName()ï¼Œä¾‹å¦‚ï¼š<code>Class.forName(&quot;java.lang.String&quot;)</code></li></ul><blockquote><h3 id="å¦‚ä½•é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡ï¼Ÿ"><a href="#å¦‚ä½•é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡ï¼Ÿ" class="headerlink" title="å¦‚ä½•é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡ï¼Ÿ"></a>å¦‚ä½•é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li>é€šè¿‡ç±»å¯¹è±¡è°ƒç”¨ <code>newInstance()</code> æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š<code>String.class.newInstance()</code></li><li>é€šè¿‡ç±»å¯¹è±¡çš„ <code>getConstructor()</code> æˆ– <code>getDeclaredConstructor()</code> æ–¹æ³•è·å¾—æ„é€ å™¨ï¼ˆConstructorï¼‰å¯¹è±¡å¹¶è°ƒç”¨å…¶ <code>newInstance()</code> æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œä¾‹å¦‚ï¼š<code>String.class.getConstructor(String.class).newInstance(&quot;Hello&quot;);</code></li></ul><blockquote><h3 id="å¦‚ä½•é€šè¿‡åå°„è·å–å’Œè®¾ç½®å¯¹è±¡ç§æœ‰å­—æ®µçš„å€¼ï¼Ÿ"><a href="#å¦‚ä½•é€šè¿‡åå°„è·å–å’Œè®¾ç½®å¯¹è±¡ç§æœ‰å­—æ®µçš„å€¼ï¼Ÿ" class="headerlink" title="å¦‚ä½•é€šè¿‡åå°„è·å–å’Œè®¾ç½®å¯¹è±¡ç§æœ‰å­—æ®µçš„å€¼ï¼Ÿ"></a>å¦‚ä½•é€šè¿‡åå°„è·å–å’Œè®¾ç½®å¯¹è±¡ç§æœ‰å­—æ®µçš„å€¼ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¯ä»¥é€šè¿‡ç±»å¯¹è±¡çš„ <code>getDeclaredField()</code> æ–¹æ³•å­—æ®µï¼ˆFieldï¼‰å¯¹è±¡ï¼Œç„¶åå†é€šè¿‡å­—æ®µå¯¹è±¡çš„ <code>setAccessible(true)</code> å°†å…¶è®¾ç½®ä¸ºå¯ä»¥è®¿é—®ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥é€šè¿‡ get/set æ–¹æ³•æ¥è·å–/è®¾ç½®å­—æ®µçš„å€¼äº†ã€‚ä¸‹é¢çš„ä»£ç å®ç°äº†ä¸€ä¸ªåå°„çš„å·¥å…·ç±»ï¼Œå…¶ä¸­çš„ä¸¤ä¸ªé™æ€æ–¹æ³•åˆ†åˆ«ç”¨äºè·å–å’Œè®¾ç½®ç§æœ‰å­—æ®µçš„å€¼ï¼Œå­—æ®µå¯ä»¥æ˜¯åŸºæœ¬ç±»å‹ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ç±»å‹ä¸”æ”¯æŒå¤šçº§å¯¹è±¡æ“ä½œï¼Œä¾‹å¦‚ <code>ReflectionUtil.get(dog, &quot;owner.car.engine.id&quot;);</code> å¯ä»¥è·å¾— dog å¯¹è±¡çš„ä¸»äººçš„æ±½è½¦çš„å¼•æ“çš„ ID å·ã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Constructor</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Field</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Modifier</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token comment">/** * åå°„å·¥å…·ç±» */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectionUtil</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">ReflectionUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AssertionError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * é€šè¿‡åå°„å–å¯¹è±¡æŒ‡å®šå­—æ®µ(å±æ€§)çš„å€¼     * @param target ç›®æ ‡å¯¹è±¡     * @param fieldName å­—æ®µçš„åå­—     * @throws å¦‚æœå–ä¸åˆ°å¯¹è±¡æŒ‡å®šå­—æ®µçš„å€¼åˆ™æŠ›å‡ºå¼‚å¸¸     * @return å­—æ®µçš„å€¼     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">,</span> <span class="token class-name">String</span> fieldName<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> clazz <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fs <span class="token operator">=</span> fieldName<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\\."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> fs<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Field</span> f <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>fs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                f<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                target <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>                clazz <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token class-name">Field</span> f <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>fs<span class="token punctuation">[</span>fs<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            f<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> f<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * é€šè¿‡åå°„ç»™å¯¹è±¡çš„æŒ‡å®šå­—æ®µèµ‹å€¼     * @param target ç›®æ ‡å¯¹è±¡     * @param fieldName å­—æ®µçš„åç§°     * @param value å€¼     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">,</span> <span class="token class-name">String</span> fieldName<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> clazz <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fs <span class="token operator">=</span> fieldName<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\\."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> fs<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Field</span> f <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>fs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                f<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Object</span> val <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">Constructor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">></span></span> c <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    c<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    val <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    f<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                target <span class="token operator">=</span> val<span class="token punctuation">;</span>                clazz <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token class-name">Field</span> f <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span>fs<span class="token punctuation">[</span>fs<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            f<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            f<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="å¦‚ä½•é€šè¿‡åå°„è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Ÿ"><a href="#å¦‚ä½•é€šè¿‡åå°„è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Ÿ" class="headerlink" title="å¦‚ä½•é€šè¿‡åå°„è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Ÿ"></a>å¦‚ä½•é€šè¿‡åå°„è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Ÿ</h3></blockquote><p>ç­”ï¼šè¯·çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span><span class="token class-name">Method</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">MethodInvokeTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>        <span class="token class-name">Method</span> m <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">"toUpperCase"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// HELLO</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> â˜•Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java é¢è¯•é¢˜è§£æï¼ˆæ•°æ®åº“ï¼‰</title>
      <link href="post/73adfcb0.html"/>
      <url>post/73adfcb0.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="XML-æ–‡æ¡£å®šä¹‰æœ‰å‡ ç§å½¢å¼ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä½•æœ¬è´¨åŒºåˆ«ï¼Ÿè§£æ-XML-æ–‡æ¡£æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ"><a href="#XML-æ–‡æ¡£å®šä¹‰æœ‰å‡ ç§å½¢å¼ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä½•æœ¬è´¨åŒºåˆ«ï¼Ÿè§£æ-XML-æ–‡æ¡£æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ" class="headerlink" title="XML æ–‡æ¡£å®šä¹‰æœ‰å‡ ç§å½¢å¼ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä½•æœ¬è´¨åŒºåˆ«ï¼Ÿè§£æ XML æ–‡æ¡£æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ"></a>XML æ–‡æ¡£å®šä¹‰æœ‰å‡ ç§å½¢å¼ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä½•æœ¬è´¨åŒºåˆ«ï¼Ÿè§£æ XML æ–‡æ¡£æœ‰å“ªå‡ ç§æ–¹å¼ï¼Ÿ</h3></blockquote><p>ç­”ï¼šXML æ–‡æ¡£å®šä¹‰åˆ†ä¸º DTD å’Œ Schema ä¸¤ç§å½¢å¼ï¼ŒäºŒè€…éƒ½æ˜¯å¯¹ XML è¯­æ³•çš„çº¦æŸï¼Œå…¶æœ¬è´¨åŒºåˆ«åœ¨äº Schema æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª XML æ–‡ä»¶ï¼Œå¯ä»¥è¢« XML è§£æå™¨è§£æï¼Œè€Œä¸”å¯ä»¥ä¸º XML æ‰¿è½½çš„æ•°æ®å®šä¹‰ç±»å‹ï¼Œçº¦æŸèƒ½åŠ›è¾ƒä¹‹ DTD æ›´å¼ºå¤§ã€‚å¯¹ XML çš„è§£æä¸»è¦æœ‰ DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ŒDocument Object Modelï¼‰ã€SAXï¼ˆSimple API for XMLï¼‰å’Œ StAXï¼ˆJava 6 ä¸­å¼•å…¥çš„æ–°çš„è§£æ XML çš„æ–¹å¼ï¼ŒStreaming API for XMLï¼‰ï¼Œå…¶ä¸­ DOM å¤„ç†å¤§å‹æ–‡ä»¶æ—¶å…¶æ€§èƒ½ä¸‹é™çš„éå¸¸å‰å®³ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯ç”± DOM æ ‘ç»“æ„å ç”¨çš„å†…å­˜è¾ƒå¤šé€ æˆçš„ï¼Œè€Œä¸” DOM è§£ææ–¹å¼å¿…é¡»åœ¨è§£ææ–‡ä»¶ä¹‹å‰æŠŠæ•´ä¸ªæ–‡æ¡£è£…å…¥å†…å­˜ï¼Œé€‚åˆå¯¹ XML çš„éšæœºè®¿é—®ï¼ˆå…¸å‹çš„ç”¨ç©ºé—´æ¢å–æ—¶é—´çš„ç­–ç•¥ï¼‰ï¼›SAX æ˜¯äº‹ä»¶é©±åŠ¨å‹çš„ XML è§£ææ–¹å¼ï¼Œå®ƒé¡ºåºè¯»å– XML æ–‡ä»¶ï¼Œä¸éœ€è¦ä¸€æ¬¡å…¨éƒ¨è£…è½½æ•´ä¸ªæ–‡ä»¶ã€‚å½“é‡åˆ°åƒæ–‡ä»¶å¼€å¤´ï¼Œæ–‡æ¡£ç»“æŸï¼Œæˆ–è€…æ ‡ç­¾å¼€å¤´ä¸æ ‡ç­¾ç»“æŸæ—¶ï¼Œå®ƒä¼šè§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œç”¨æˆ·é€šè¿‡äº‹ä»¶å›è°ƒä»£ç æ¥å¤„ç†XMLæ–‡ä»¶ï¼Œé€‚åˆå¯¹ XML çš„é¡ºåºè®¿é—®ï¼›é¡¾åæ€ä¹‰ï¼ŒStAX æŠŠé‡ç‚¹æ”¾åœ¨æµä¸Šï¼Œå®é™…ä¸Š StAX ä¸å…¶ä»–è§£ææ–¹å¼çš„æœ¬è´¨åŒºåˆ«å°±åœ¨äºåº”ç”¨ç¨‹åºèƒ½å¤ŸæŠŠ XML ä½œä¸ºä¸€ä¸ªäº‹ä»¶æµæ¥å¤„ç†ã€‚å°† XML ä½œä¸ºä¸€ç»„äº‹ä»¶æ¥å¤„ç†çš„æƒ³æ³•å¹¶ä¸æ–°é¢–ï¼ˆSAX å°±æ˜¯è¿™æ ·åšçš„ï¼‰ï¼Œä½†ä¸åŒä¹‹å¤„åœ¨äº StAX å…è®¸åº”ç”¨ç¨‹åºä»£ç æŠŠè¿™äº›äº‹ä»¶é€ä¸ªæ‹‰å‡ºæ¥ï¼Œè€Œä¸ç”¨æä¾›åœ¨è§£æå™¨æ–¹ä¾¿æ—¶ä»è§£æå™¨ä¸­æ¥æ”¶äº‹ä»¶çš„å¤„ç†ç¨‹åºã€‚</p><blockquote><h3 id="ä½ åœ¨é¡¹ç›®ä¸­å“ªäº›åœ°æ–¹ç”¨åˆ°äº†-XMLï¼Ÿ"><a href="#ä½ åœ¨é¡¹ç›®ä¸­å“ªäº›åœ°æ–¹ç”¨åˆ°äº†-XMLï¼Ÿ" class="headerlink" title="ä½ åœ¨é¡¹ç›®ä¸­å“ªäº›åœ°æ–¹ç”¨åˆ°äº† XMLï¼Ÿ"></a>ä½ åœ¨é¡¹ç›®ä¸­å“ªäº›åœ°æ–¹ç”¨åˆ°äº† XMLï¼Ÿ</h3></blockquote><p>ç­”ï¼šXML çš„ä¸»è¦ä½œç”¨æœ‰ä¸¤ä¸ªæ–¹é¢ï¼šæ•°æ®äº¤æ¢å’Œä¿¡æ¯é…ç½®ã€‚åœ¨åšæ•°æ®äº¤æ¢æ—¶ï¼ŒXML å°†æ•°æ®ç”¨æ ‡ç­¾ç»„è£…æˆèµ·æ¥ï¼Œç„¶åå‹ç¼©æ‰“åŒ…åŠ å¯†åé€šè¿‡ç½‘ç»œä¼ é€ç»™æ¥æ”¶è€…ï¼Œæ¥æ”¶è§£å¯†ä¸è§£å‹ç¼©åå†ä» XML æ–‡ä»¶ä¸­è¿˜åŸç›¸å…³ä¿¡æ¯è¿›è¡Œå¤„ç†ï¼ŒXML æ›¾ç»æ˜¯å¼‚æ„ç³»ç»Ÿé—´äº¤æ¢æ•°æ®çš„äº‹å®æ ‡å‡†ï¼Œä½†æ­¤é¡¹åŠŸèƒ½å‡ ä¹å·²ç»è¢« JSONï¼ˆJavaScript Object Notationï¼‰å–è€Œä»£ä¹‹ã€‚å½“ç„¶ï¼Œç›®å‰å¾ˆå¤šè½¯ä»¶ä»ç„¶ä½¿ç”¨ XML æ¥å­˜å‚¨é…ç½®ä¿¡æ¯ï¼Œæˆ‘ä»¬åœ¨å¾ˆå¤šé¡¹ç›®ä¸­é€šå¸¸ä¹Ÿä¼šå°†ä½œä¸ºé…ç½®ä¿¡æ¯çš„ç¡¬ä»£ç å†™åœ¨ XML æ–‡ä»¶ä¸­ï¼ŒJava çš„å¾ˆå¤šæ¡†æ¶ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ï¼Œè€Œä¸”è¿™äº›æ¡†æ¶éƒ½é€‰æ‹©äº† dom4j ä½œä¸ºå¤„ç† XML çš„å·¥å…·ï¼Œå› ä¸º Sun å…¬å¸çš„å®˜æ–¹ API å®åœ¨ä¸æ€ä¹ˆå¥½ç”¨ã€‚</p><p><strong>è¡¥å……ï¼š</strong>ç°åœ¨æœ‰å¾ˆå¤šæ—¶é«¦çš„è½¯ä»¶ï¼ˆå¦‚ Sublimeï¼‰å·²ç»å¼€å§‹å°†é…ç½®æ–‡ä»¶ä¹¦å†™æˆ JSON æ ¼å¼ï¼Œæˆ‘ä»¬å·²ç»å¼ºçƒˆçš„æ„Ÿå—åˆ° XML çš„å¦ä¸€é¡¹åŠŸèƒ½ä¹Ÿå°†é€æ¸è¢«ä¸šç•ŒæŠ›å¼ƒã€‚</p><blockquote><h3 id="é˜è¿°-JDBC-æ“ä½œæ•°æ®åº“çš„æ­¥éª¤ã€‚"><a href="#é˜è¿°-JDBC-æ“ä½œæ•°æ®åº“çš„æ­¥éª¤ã€‚" class="headerlink" title="é˜è¿° JDBC æ“ä½œæ•°æ®åº“çš„æ­¥éª¤ã€‚"></a>é˜è¿° JDBC æ“ä½œæ•°æ®åº“çš„æ­¥éª¤ã€‚</h3></blockquote><p>ç­”ï¼šä¸‹é¢çš„ä»£ç ä»¥è¿æ¥æœ¬æœºçš„ Oracle æ•°æ®åº“ä¸ºä¾‹ï¼Œæ¼”ç¤º JDBC æ“ä½œæ•°æ®åº“çš„æ­¥éª¤ã€‚</p><ol><li><p>åŠ è½½é©±åŠ¨ã€‚</p><p> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"oracle.jdbc.driver.OracleDriver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>åˆ›å»ºè¿æ¥ã€‚</p><p> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Connection</span> con <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">"jdbc:oracle:thin:@localhost:1521:orcl"</span><span class="token punctuation">,</span> <span class="token string">"scott"</span><span class="token punctuation">,</span> <span class="token string">"tiger"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>åˆ›å»ºè¯­å¥ã€‚</p><p> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> con<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">"select * from emp where sal between ? and ?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ps<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ps<span class="token punctuation">.</span><span class="token function">setInt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p></li><li><p>æ‰§è¡Œè¯­å¥ã€‚</p><p> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">ResultSet</span> rs <span class="token operator">=</span> ps<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>å¤„ç†ç»“æœã€‚</p><p> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">while</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">"empno"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" - "</span> <span class="token operator">+</span> rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"ename"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p></li><li><p>å…³é—­èµ„æºã€‚</p><p> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>con <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            con<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li></ol><p><strong>æ³¨æ„ï¼š</strong>å…³é—­å¤–éƒ¨èµ„æºçš„é¡ºåºåº”è¯¥å’Œæ‰“å¼€çš„é¡ºåºç›¸åï¼Œä¹Ÿå°±æ˜¯è¯´å…ˆå…³é—­ <code>ResultSet</code>ã€å†å…³é—­ <code>Statement</code>ã€æœ€åå…³é—­ <code>Connection</code>ã€‚ä¸Šé¢çš„ä»£ç åªå…³é—­äº† Connection`ï¼ˆè¿æ¥ï¼‰ï¼Œè™½ç„¶é€šå¸¸æƒ…å†µä¸‹åœ¨å…³é—­è¿æ¥æ—¶ï¼Œè¿æ¥ä¸Šåˆ›å»ºçš„è¯­å¥å’Œæ‰“å¼€çš„æ¸¸æ ‡ä¹Ÿä¼šå…³é—­ï¼Œä½†ä¸èƒ½ä¿è¯æ€»æ˜¯å¦‚æ­¤ï¼Œå› æ­¤åº”è¯¥æŒ‰ç…§åˆšæ‰è¯´çš„é¡ºåºåˆ†åˆ«å…³é—­ã€‚æ­¤å¤–ï¼Œç¬¬ä¸€æ­¥åŠ è½½é©±åŠ¨åœ¨ JDBC 4.0 ä¸­æ˜¯å¯ä»¥çœç•¥çš„ï¼ˆè‡ªåŠ¨ä»ç±»è·¯å¾„ä¸­åŠ è½½é©±åŠ¨ï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬å»ºè®®ä¿ç•™ã€‚</p><blockquote><h3 id="Statement-å’Œ-PreparedStatement-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå“ªä¸ªæ€§èƒ½æ›´å¥½ï¼Ÿ"><a href="#Statement-å’Œ-PreparedStatement-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå“ªä¸ªæ€§èƒ½æ›´å¥½ï¼Ÿ" class="headerlink" title="Statement å’Œ PreparedStatement æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå“ªä¸ªæ€§èƒ½æ›´å¥½ï¼Ÿ"></a><code>Statement</code> å’Œ <code>PreparedStatement</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå“ªä¸ªæ€§èƒ½æ›´å¥½ï¼Ÿ</h3></blockquote><p>ç­”ï¼šä¸ <code>Statement</code> ç›¸æ¯”ï¼Œ<code>PreparedStatement</code> ä¸»è¦æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><ol><li><code>PreparedStatement</code> æ¥å£ä»£è¡¨é¢„ç¼–è¯‘çš„è¯­å¥ï¼Œå®ƒä¸»è¦çš„ä¼˜åŠ¿åœ¨äºå¯ä»¥å‡å°‘ SQL çš„ç¼–è¯‘é”™è¯¯å¹¶å¢åŠ  SQL çš„å®‰å…¨æ€§ï¼ˆå‡å°‘ SQL æ³¨å°„æ”»å‡»çš„å¯èƒ½æ€§ï¼‰ï¼›</li><li><code>PreparedStatement</code> ä¸­çš„ SQL è¯­å¥æ˜¯å¯ä»¥å¸¦å‚æ•°çš„ï¼Œé¿å…äº†ç”¨å­—ç¬¦ä¸²è¿æ¥æ‹¼æ¥ SQL è¯­å¥çš„éº»çƒ¦å’Œä¸å®‰å…¨ï¼›</li><li>å½“æ‰¹é‡å¤„ç† SQL æˆ–é¢‘ç¹æ‰§è¡Œç›¸åŒçš„æŸ¥è¯¢æ—¶ï¼Œ<code>PreparedStatement</code>æœ‰æ˜æ˜¾çš„æ€§èƒ½ä¸Šçš„ä¼˜åŠ¿ï¼Œç”±äºæ•°æ®åº“å¯ä»¥å°†ç¼–è¯‘ä¼˜åŒ–åçš„ SQL è¯­å¥ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡æ‰§è¡Œç›¸åŒç»“æ„çš„è¯­å¥æ—¶å°±ä¼šå¾ˆå¿«ï¼ˆä¸ç”¨å†æ¬¡ç¼–è¯‘å’Œç”Ÿæˆæ‰§è¡Œè®¡åˆ’ï¼‰ã€‚</li></ol><p><strong>è¡¥å……ï¼š</strong>ä¸ºäº†æä¾›å¯¹å­˜å‚¨è¿‡ç¨‹çš„è°ƒç”¨ï¼ŒJDBC API ä¸­è¿˜æä¾›äº† <code>CallableStatement</code> æ¥å£ã€‚å­˜å‚¨è¿‡ç¨‹ï¼ˆStored Procedureï¼‰æ˜¯æ•°æ®åº“ä¸­ä¸€ç»„ä¸ºäº†å®Œæˆç‰¹å®šåŠŸèƒ½çš„ SQL è¯­å¥çš„é›†åˆï¼Œç»ç¼–è¯‘åå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œç”¨æˆ·é€šè¿‡æŒ‡å®šå­˜å‚¨è¿‡ç¨‹çš„åå­—å¹¶ç»™å‡ºå‚æ•°ï¼ˆå¦‚æœè¯¥å­˜å‚¨è¿‡ç¨‹å¸¦æœ‰å‚æ•°ï¼‰æ¥æ‰§è¡Œå®ƒã€‚è™½ç„¶è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ä¼šåœ¨ç½‘ç»œå¼€é”€ã€å®‰å…¨æ€§ã€æ€§èƒ½ä¸Šè·å¾—å¾ˆå¤šå¥½å¤„ï¼Œä½†æ˜¯å­˜åœ¨å¦‚æœåº•å±‚æ•°æ®åº“å‘ç”Ÿè¿ç§»æ—¶å°±ä¼šæœ‰å¾ˆå¤šéº»çƒ¦ï¼Œå› ä¸ºæ¯ç§æ•°æ®åº“çš„å­˜å‚¨è¿‡ç¨‹åœ¨ä¹¦å†™ä¸Šå­˜åœ¨ä¸å°‘çš„å·®åˆ«ã€‚</p><blockquote><h3 id="ä½¿ç”¨-JDBC-æ“ä½œæ•°æ®åº“æ—¶ï¼Œå¦‚ä½•æå‡è¯»å–æ•°æ®çš„æ€§èƒ½ï¼Ÿå¦‚ä½•æå‡æ›´æ–°æ•°æ®çš„æ€§èƒ½ï¼Ÿ"><a href="#ä½¿ç”¨-JDBC-æ“ä½œæ•°æ®åº“æ—¶ï¼Œå¦‚ä½•æå‡è¯»å–æ•°æ®çš„æ€§èƒ½ï¼Ÿå¦‚ä½•æå‡æ›´æ–°æ•°æ®çš„æ€§èƒ½ï¼Ÿ" class="headerlink" title="ä½¿ç”¨ JDBC æ“ä½œæ•°æ®åº“æ—¶ï¼Œå¦‚ä½•æå‡è¯»å–æ•°æ®çš„æ€§èƒ½ï¼Ÿå¦‚ä½•æå‡æ›´æ–°æ•°æ®çš„æ€§èƒ½ï¼Ÿ"></a>ä½¿ç”¨ JDBC æ“ä½œæ•°æ®åº“æ—¶ï¼Œå¦‚ä½•æå‡è¯»å–æ•°æ®çš„æ€§èƒ½ï¼Ÿå¦‚ä½•æå‡æ›´æ–°æ•°æ®çš„æ€§èƒ½ï¼Ÿ</h3></blockquote><p>ç­”ï¼šè¦<strong>æå‡è¯»å–æ•°æ®çš„æ€§èƒ½</strong>ï¼Œå¯ä»¥æŒ‡å®šé€šè¿‡ç»“æœé›†ï¼ˆResultSetï¼‰å¯¹è±¡çš„ <code>setFetchSize()</code> æ–¹æ³•æŒ‡å®šæ¯æ¬¡æŠ“å–çš„è®°å½•æ•°ï¼ˆå…¸å‹çš„ç©ºé—´æ¢æ—¶é—´ç­–ç•¥ï¼‰ï¼›è¦æå‡æ›´æ–°æ•°æ®çš„æ€§èƒ½å¯ä»¥ä½¿ç”¨ <code>PreparedStatement</code> è¯­å¥æ„å»ºæ‰¹å¤„ç†ï¼Œå°†è‹¥å¹² SQL è¯­å¥ç½®äºä¸€ä¸ªæ‰¹å¤„ç†ä¸­æ‰§è¡Œã€‚</p><blockquote><h3 id="åœ¨è¿›è¡Œæ•°æ®åº“ç¼–ç¨‹æ—¶ï¼Œè¿æ¥æ± æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#åœ¨è¿›è¡Œæ•°æ®åº“ç¼–ç¨‹æ—¶ï¼Œè¿æ¥æ± æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="åœ¨è¿›è¡Œæ•°æ®åº“ç¼–ç¨‹æ—¶ï¼Œè¿æ¥æ± æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>åœ¨è¿›è¡Œæ•°æ®åº“ç¼–ç¨‹æ—¶ï¼Œè¿æ¥æ± æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3></blockquote><p>ç­”ï¼šç”±äºåˆ›å»ºè¿æ¥å’Œé‡Šæ”¾è¿æ¥éƒ½æœ‰å¾ˆå¤§çš„å¼€é”€ï¼ˆå°¤å…¶æ˜¯æ•°æ®åº“æœåŠ¡å™¨ä¸åœ¨æœ¬åœ°æ—¶ï¼Œæ¯æ¬¡å»ºç«‹è¿æ¥éƒ½éœ€è¦è¿›è¡Œ TCP çš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œé‡Šæ”¾è¿æ¥éœ€è¦è¿›è¡Œ TCP å››æ¬¡æ¡æ‰‹ï¼Œé€ æˆçš„å¼€é”€æ˜¯ä¸å¯å¿½è§†çš„ï¼‰ï¼Œä¸ºäº†æå‡ç³»ç»Ÿè®¿é—®æ•°æ®åº“çš„æ€§èƒ½ï¼Œå¯ä»¥äº‹å…ˆåˆ›å»ºè‹¥å¹²è¿æ¥ç½®äºè¿æ¥æ± ä¸­ï¼Œéœ€è¦æ—¶ç›´æ¥ä»è¿æ¥æ± è·å–ï¼Œä½¿ç”¨ç»“æŸæ—¶å½’è¿˜è¿æ¥æ± è€Œä¸å¿…å…³é—­è¿æ¥ï¼Œä»è€Œé¿å…é¢‘ç¹åˆ›å»ºå’Œé‡Šæ”¾è¿æ¥æ‰€é€ æˆçš„å¼€é”€ï¼Œè¿™æ˜¯å…¸å‹çš„ç”¨ç©ºé—´æ¢å–æ—¶é—´çš„ç­–ç•¥ï¼ˆæµªè´¹äº†ç©ºé—´å­˜å‚¨è¿æ¥ï¼Œä½†èŠ‚çœäº†åˆ›å»ºå’Œé‡Šæ”¾è¿æ¥çš„æ—¶é—´ï¼‰ã€‚æ± åŒ–æŠ€æœ¯åœ¨ Java å¼€å‘ä¸­æ˜¯å¾ˆå¸¸è§çš„ï¼Œåœ¨ä½¿ç”¨çº¿ç¨‹æ—¶åˆ›å»ºçº¿ç¨‹æ± çš„é“ç†ä¸æ­¤ç›¸åŒã€‚åŸºäº Java çš„å¼€æºæ•°æ®åº“è¿æ¥æ± ä¸»è¦æœ‰ï¼šC3P0ã€Proxoolã€DBCPã€BoneCPã€Druidç­‰ã€‚</p><p><strong>è¡¥å……ï¼š</strong>åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­æ—¶é—´å’Œç©ºé—´æ˜¯ä¸å¯è°ƒå’Œçš„çŸ›ç›¾ï¼Œç†è§£è¿™ä¸€ç‚¹å¯¹è®¾è®¡æ»¡è¶³æ€§èƒ½è¦æ±‚çš„ç®—æ³•æ˜¯è‡³å…³é‡è¦çš„ã€‚å¤§å‹ç½‘ç«™æ€§èƒ½ä¼˜åŒ–çš„ä¸€ä¸ªå…³é”®å°±æ˜¯ä½¿ç”¨ç¼“å­˜ï¼Œè€Œç¼“å­˜è·Ÿä¸Šé¢è®²çš„è¿æ¥æ± é“ç†éå¸¸ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ç©ºé—´æ¢æ—¶é—´çš„ç­–ç•¥ã€‚å¯ä»¥å°†çƒ­ç‚¹æ•°æ®ç½®äºç¼“å­˜ä¸­ï¼Œå½“ç”¨æˆ·æŸ¥è¯¢è¿™äº›æ•°æ®æ—¶å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­å¾—åˆ°ï¼Œè¿™æ— è®ºå¦‚ä½•ä¹Ÿå¿«è¿‡å»æ•°æ®åº“ä¸­æŸ¥è¯¢ã€‚å½“ç„¶ï¼Œç¼“å­˜çš„ç½®æ¢ç­–ç•¥ç­‰ä¹Ÿä¼šå¯¹ç³»ç»Ÿæ€§èƒ½äº§ç”Ÿé‡è¦å½±å“ï¼Œå¯¹äºè¿™ä¸ªé—®é¢˜çš„è®¨è®ºå·²ç»è¶…å‡ºäº†è¿™é‡Œè¦é˜è¿°çš„èŒƒå›´ã€‚</p><blockquote><h3 id="ä»€ä¹ˆæ˜¯-DAO-æ¨¡å¼ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-DAO-æ¨¡å¼ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ DAO æ¨¡å¼ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ DAO æ¨¡å¼ï¼Ÿ</h3></blockquote><p>ç­”ï¼šDAOï¼ˆData Access Objectï¼‰é¡¾åæ€ä¹‰æ˜¯ä¸€ä¸ªä¸ºæ•°æ®åº“æˆ–å…¶ä»–æŒä¹…åŒ–æœºåˆ¶æä¾›äº†æŠ½è±¡æ¥å£çš„å¯¹è±¡ï¼Œåœ¨ä¸æš´éœ²åº•å±‚æŒä¹…åŒ–æ–¹æ¡ˆå®ç°ç»†èŠ‚çš„å‰æä¸‹æä¾›äº†å„ç§æ•°æ®è®¿é—®æ“ä½œã€‚åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œåº”è¯¥å°†æ‰€æœ‰å¯¹æ•°æ®æºçš„è®¿é—®æ“ä½œè¿›è¡ŒæŠ½è±¡åŒ–åå°è£…åœ¨ä¸€ä¸ªå…¬å…± API ä¸­ã€‚ç”¨ç¨‹åºè®¾è®¡è¯­è¨€æ¥è¯´ï¼Œå°±æ˜¯å»ºç«‹ä¸€ä¸ªæ¥å£ï¼Œæ¥å£ä¸­å®šä¹‰äº†æ­¤åº”ç”¨ç¨‹åºä¸­å°†ä¼šç”¨åˆ°çš„æ‰€æœ‰äº‹åŠ¡æ–¹æ³•ã€‚åœ¨è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œå½“éœ€è¦å’Œæ•°æ®æºè¿›è¡Œäº¤äº’çš„æ—¶å€™åˆ™ä½¿ç”¨è¿™ä¸ªæ¥å£ï¼Œå¹¶ä¸”ç¼–å†™ä¸€ä¸ªå•ç‹¬çš„ç±»æ¥å®ç°è¿™ä¸ªæ¥å£ï¼Œåœ¨é€»è¾‘ä¸Šè¯¥ç±»å¯¹åº”ä¸€ä¸ªç‰¹å®šçš„æ•°æ®å­˜å‚¨ã€‚DAO æ¨¡å¼å®é™…ä¸ŠåŒ…å«äº†ä¸¤ä¸ªæ¨¡å¼ï¼Œä¸€æ˜¯ Data Accessorï¼ˆæ•°æ®è®¿é—®å™¨ï¼‰ï¼ŒäºŒæ˜¯ Data Objectï¼ˆæ•°æ®å¯¹è±¡ï¼‰ï¼Œå‰è€…è¦è§£å†³å¦‚ä½•è®¿é—®æ•°æ®çš„é—®é¢˜ï¼Œè€Œåè€…è¦è§£å†³çš„æ˜¯å¦‚ä½•ç”¨å¯¹è±¡å°è£…æ•°æ®ã€‚</p><blockquote><h3 id="äº‹åŠ¡çš„-ACID-æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿ"><a href="#äº‹åŠ¡çš„-ACID-æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿ" class="headerlink" title="äº‹åŠ¡çš„ ACID æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿ"></a>äº‹åŠ¡çš„ ACID æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li>åŸå­æ€§ï¼ˆAtomicï¼‰ï¼šäº‹åŠ¡ä¸­å„é¡¹æ“ä½œï¼Œè¦ä¹ˆå…¨åšè¦ä¹ˆå…¨ä¸åšï¼Œä»»ä½•ä¸€é¡¹æ“ä½œçš„å¤±è´¥éƒ½ä¼šå¯¼è‡´æ•´ä¸ªäº‹åŠ¡çš„å¤±è´¥ï¼›</li><li>ä¸€è‡´æ€§ï¼ˆConsistentï¼‰ï¼šäº‹åŠ¡ç»“æŸåç³»ç»ŸçŠ¶æ€æ˜¯ä¸€è‡´çš„ï¼›</li><li>éš”ç¦»æ€§ï¼ˆIsolatedï¼‰ï¼šå¹¶å‘æ‰§è¡Œçš„äº‹åŠ¡å½¼æ­¤æ— æ³•çœ‹åˆ°å¯¹æ–¹çš„ä¸­é—´çŠ¶æ€ï¼›</li><li>æŒä¹…æ€§ï¼ˆDurableï¼‰ï¼šäº‹åŠ¡å®Œæˆåæ‰€åšçš„æ”¹åŠ¨éƒ½ä¼šè¢«æŒä¹…åŒ–ï¼Œå³ä½¿å‘ç”Ÿç¾éš¾æ€§çš„å¤±è´¥ã€‚é€šè¿‡æ—¥å¿—å’ŒåŒæ­¥å¤‡ä»½å¯ä»¥åœ¨æ•…éšœå‘ç”Ÿåé‡å»ºæ•°æ®ã€‚</li></ul><p><strong>è¡¥å……ï¼š</strong>å…³äºäº‹åŠ¡ï¼Œåœ¨é¢è¯•ä¸­è¢«é—®åˆ°çš„æ¦‚ç‡æ˜¯å¾ˆé«˜çš„ï¼Œå¯ä»¥é—®çš„é—®é¢˜ä¹Ÿæ˜¯å¾ˆå¤šçš„ã€‚é¦–å…ˆéœ€è¦çŸ¥é“çš„æ˜¯ï¼Œåªæœ‰å­˜åœ¨<strong>å¹¶å‘æ•°æ®è®¿é—®</strong>æ—¶æ‰éœ€è¦äº‹åŠ¡ã€‚å½“å¤šä¸ªäº‹åŠ¡è®¿é—®åŒä¸€æ•°æ®æ—¶ï¼Œå¯èƒ½ä¼šå­˜åœ¨ 5 ç±»é—®é¢˜ï¼ŒåŒ…æ‹¬ 3 ç±»<strong>æ•°æ®è¯»å–</strong>é—®é¢˜ï¼ˆè„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ï¼‰å’Œ 2 ç±»<strong>æ•°æ®æ›´æ–°</strong>é—®é¢˜ï¼ˆç¬¬ 1 ç±»ä¸¢å¤±æ›´æ–°å’Œç¬¬ 2 ç±»ä¸¢å¤±æ›´æ–°ï¼‰ã€‚</p><ul><li>è„è¯»ï¼ˆDirty Readï¼‰ï¼šA äº‹åŠ¡è¯»å– B äº‹åŠ¡å°šæœªæäº¤çš„æ•°æ®å¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ“ä½œï¼Œè€Œ B äº‹åŠ¡æ‰§è¡Œå›æ»šï¼Œé‚£ä¹ˆ A è¯»å–åˆ°çš„æ•°æ®å°±æ˜¯è„æ•°æ®ã€‚</li></ul><div class="table-container"><table><thead><tr><th>æ—¶é—´</th><th>è½¬è´¦äº‹åŠ¡A</th><th>å–æ¬¾äº‹åŠ¡B</th></tr></thead><tbody><tr><td>T1</td><td>&nbsp;</td><td>å¼€å§‹äº‹åŠ¡</td></tr><tr><td>T2</td><td>å¼€å§‹äº‹åŠ¡</td><td>&nbsp;</td></tr><tr><td>T3</td><td>&nbsp;</td><td>æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º1000å…ƒ</td></tr><tr><td>T4</td><td>&nbsp;</td><td>å–å‡º500å…ƒä½™é¢ä¿®æ”¹ä¸º500å…ƒ</td></tr><tr><td>T5</td><td>æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º500å…ƒï¼ˆè„è¯»ï¼‰</td><td>&nbsp;</td></tr><tr><td>T6</td><td>&nbsp;</td><td>æ’¤é”€äº‹åŠ¡ä½™é¢æ¢å¤ä¸º1000å…ƒ</td></tr><tr><td>T7</td><td>æ±‡å…¥100å…ƒæŠŠä½™é¢ä¿®æ”¹ä¸º600å…ƒ</td><td>&nbsp;</td></tr><tr><td>T8</td><td>æäº¤äº‹åŠ¡</td><td>&nbsp;</td></tr></tbody></table></div><ul><li>ä¸å¯é‡å¤è¯»ï¼ˆUnrepeatable Readï¼‰ï¼šäº‹åŠ¡ A é‡æ–°è¯»å–å‰é¢è¯»å–è¿‡çš„æ•°æ®ï¼Œå‘ç°è¯¥æ•°æ®å·²ç»è¢«å¦ä¸€ä¸ªå·²æäº¤çš„äº‹åŠ¡ B ä¿®æ”¹è¿‡äº†ã€‚</li></ul><div class="table-container"><table><thead><tr><th>æ—¶é—´</th><th>è½¬è´¦äº‹åŠ¡A</th><th>å–æ¬¾äº‹åŠ¡B</th></tr></thead><tbody><tr><td>T1</td><td>&nbsp;</td><td>å¼€å§‹äº‹åŠ¡</td></tr><tr><td>T2</td><td>å¼€å§‹äº‹åŠ¡</td><td>&nbsp;</td></tr><tr><td>T3</td><td>&nbsp;</td><td>æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º1000å…ƒ</td></tr><tr><td>T4</td><td>æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º1000å…ƒ</td><td>&nbsp;</td></tr><tr><td>T5</td><td>&nbsp;</td><td>å–å‡º100å…ƒä¿®æ”¹ä½™é¢ä¸º900å…ƒ</td></tr><tr><td>T6</td><td>&nbsp;</td><td>æäº¤äº‹åŠ¡</td></tr><tr><td>T7</td><td>æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º900å…ƒï¼ˆä¸å¯é‡å¤è¯»ï¼‰</td><td>&nbsp;</td></tr></tbody></table></div><ul><li>å¹»è¯»ï¼ˆPhantom Readï¼‰ï¼šäº‹åŠ¡ A é‡æ–°æ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢ï¼Œè¿”å›ä¸€ç³»åˆ—ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„è¡Œï¼Œå‘ç°å…¶ä¸­æ’å…¥äº†è¢«äº‹åŠ¡ B æäº¤çš„è¡Œã€‚</li></ul><div class="table-container"><table><thead><tr><th>æ—¶é—´</th><th>ç»Ÿè®¡é‡‘é¢äº‹åŠ¡A</th><th>è½¬è´¦äº‹åŠ¡B</th></tr></thead><tbody><tr><td>T1</td><td>&nbsp;</td><td>å¼€å§‹äº‹åŠ¡</td></tr><tr><td>T2</td><td>å¼€å§‹äº‹åŠ¡</td><td>&nbsp;</td></tr><tr><td>T3</td><td>ç»Ÿè®¡æ€»å­˜æ¬¾ä¸º10000å…ƒ</td><td>&nbsp;</td></tr><tr><td>T4</td><td>&nbsp;</td><td>æ–°å¢ä¸€ä¸ªå­˜æ¬¾è´¦æˆ·å­˜å…¥100å…ƒ</td></tr><tr><td>T5</td><td>&nbsp;</td><td>æäº¤äº‹åŠ¡</td></tr><tr><td>T6</td><td>å†æ¬¡ç»Ÿè®¡æ€»å­˜æ¬¾ä¸º10100å…ƒï¼ˆå¹»è¯»ï¼‰</td><td>&nbsp;</td></tr></tbody></table></div><ul><li>ç¬¬ 1 ç±»ä¸¢å¤±æ›´æ–°ï¼šäº‹åŠ¡ A æ’¤é”€æ—¶ï¼ŒæŠŠå·²ç»æäº¤çš„äº‹åŠ¡ B çš„æ›´æ–°æ•°æ®è¦†ç›–äº†ã€‚</li></ul><div class="table-container"><table><thead><tr><th>æ—¶é—´</th><th>å–æ¬¾äº‹åŠ¡A</th><th>è½¬è´¦äº‹åŠ¡B</th></tr></thead><tbody><tr><td>T1</td><td>å¼€å§‹äº‹åŠ¡</td><td>&nbsp;</td></tr><tr><td>T2</td><td>&nbsp;</td><td>å¼€å§‹äº‹åŠ¡</td></tr><tr><td>T3</td><td>æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º1000å…ƒ</td><td>&nbsp;</td></tr><tr><td>T4</td><td>&nbsp;</td><td>æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º1000å…ƒ</td></tr><tr><td>T5</td><td>&nbsp;</td><td>æ±‡å…¥100å…ƒä¿®æ”¹ä½™é¢ä¸º1100å…ƒ</td></tr><tr><td>T6</td><td>&nbsp;</td><td>æäº¤äº‹åŠ¡</td></tr><tr><td>T7</td><td>å–å‡º100å…ƒå°†ä½™é¢ä¿®æ”¹ä¸º900å…ƒ</td><td>&nbsp;</td></tr><tr><td>T8</td><td>æ’¤é”€äº‹åŠ¡</td><td>&nbsp;</td></tr><tr><td>T9</td><td>ä½™é¢æ¢å¤ä¸º1000å…ƒï¼ˆä¸¢å¤±æ›´æ–°ï¼‰</td><td>&nbsp;</td></tr></tbody></table></div><ul><li>ç¬¬ 2 ç±»ä¸¢å¤±æ›´æ–°ï¼šäº‹åŠ¡ A è¦†ç›–äº‹åŠ¡ B å·²ç»æäº¤çš„æ•°æ®ï¼Œé€ æˆäº‹åŠ¡ B æ‰€åšçš„æ“ä½œä¸¢å¤±ã€‚</li></ul><div class="table-container"><table><thead><tr><th>æ—¶é—´</th><th>è½¬è´¦äº‹åŠ¡A</th><th>å–æ¬¾äº‹åŠ¡B</th></tr></thead><tbody><tr><td>T1</td><td>&nbsp;</td><td>å¼€å§‹äº‹åŠ¡</td></tr><tr><td>T2</td><td>å¼€å§‹äº‹åŠ¡</td><td>&nbsp;</td></tr><tr><td>T3</td><td>&nbsp;</td><td>æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º1000å…ƒ</td></tr><tr><td>T4</td><td>æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º1000å…ƒ</td><td>&nbsp;</td></tr><tr><td>T5</td><td>&nbsp;</td><td>å–å‡º100å…ƒå°†ä½™é¢ä¿®æ”¹ä¸º900å…ƒ</td></tr><tr><td>T6</td><td>&nbsp;</td><td>æäº¤äº‹åŠ¡</td></tr><tr><td>T7</td><td>æ±‡å…¥100å…ƒå°†ä½™é¢ä¿®æ”¹ä¸º1100å…ƒ</td><td>&nbsp;</td></tr><tr><td>T8</td><td>æäº¤äº‹åŠ¡</td><td>&nbsp;</td></tr><tr><td>T9</td><td>æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º1100å…ƒï¼ˆä¸¢å¤±æ›´æ–°ï¼‰</td><td>&nbsp;</td></tr></tbody></table></div><p>æ•°æ®å¹¶å‘è®¿é—®æ‰€äº§ç”Ÿçš„é—®é¢˜ï¼Œåœ¨æœ‰äº›åœºæ™¯ä¸‹å¯èƒ½æ˜¯å…è®¸çš„ï¼Œä½†æ˜¯æœ‰äº›åœºæ™¯ä¸‹å¯èƒ½å°±æ˜¯è‡´å‘½çš„ï¼Œæ•°æ®åº“é€šå¸¸ä¼šé€šè¿‡<strong>é”æœºåˆ¶</strong>æ¥è§£å†³æ•°æ®å¹¶å‘è®¿é—®é—®é¢˜ï¼ŒæŒ‰é”å®šå¯¹è±¡ä¸åŒå¯ä»¥åˆ†ä¸º<strong>è¡¨çº§é”</strong>å’Œ<strong>è¡Œçº§é”</strong>ï¼›æŒ‰å¹¶å‘äº‹åŠ¡é”å®šå…³ç³»å¯ä»¥åˆ†ä¸º<strong>å…±äº«é”</strong>å’Œ<strong>ç‹¬å é”</strong>ï¼Œå…·ä½“çš„å†…å®¹å¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥é˜…èµ„æ–™è¿›è¡Œäº†è§£ã€‚</p><p>ç›´æ¥ä½¿ç”¨é”æ˜¯éå¸¸éº»çƒ¦çš„ï¼Œä¸ºæ­¤æ•°æ®åº“ä¸ºç”¨æˆ·æä¾›äº†è‡ªåŠ¨é”æœºåˆ¶ï¼Œåªè¦ç”¨æˆ·æŒ‡å®šä¼šè¯çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œæ•°æ®åº“å°±ä¼šé€šè¿‡åˆ†æ SQL è¯­å¥ç„¶åä¸ºäº‹åŠ¡è®¿é—®çš„èµ„æºåŠ ä¸Šåˆé€‚çš„é”ï¼Œæ­¤å¤–ï¼Œæ•°æ®åº“è¿˜ä¼šç»´æŠ¤è¿™äº›é”é€šè¿‡å„ç§æ‰‹æ®µæé«˜ç³»ç»Ÿçš„æ€§èƒ½ï¼Œè¿™äº›å¯¹ç”¨æˆ·æ¥è¯´éƒ½æ˜¯é€æ˜çš„ï¼ˆå°±æ˜¯è¯´ä½ ä¸ç”¨ç†è§£ï¼Œäº‹å®ä¸Šæˆ‘ç¡®å®ä¹Ÿä¸çŸ¥é“ï¼‰ã€‚ANSI/ISO SQL 92 æ ‡å‡†å®šä¹‰äº† 4 ä¸ªç­‰çº§çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><div class="table-container"><table><thead><tr><th>éš”ç¦»çº§åˆ«</th><th>è„è¯»</th><th>ä¸å¯é‡å¤è¯»</th><th>å¹»è¯»</th><th>ç¬¬ä¸€ç±»ä¸¢å¤±æ›´æ–°</th><th>ç¬¬äºŒç±»ä¸¢å¤±æ›´æ–°</th></tr></thead><tbody><tr><td>READ UNCOMMITED</td><td>å…è®¸</td><td>å…è®¸</td><td>å…è®¸</td><td>ä¸å…è®¸</td><td>å…è®¸</td></tr><tr><td>READ COMMITTED</td><td>ä¸å…è®¸</td><td>å…è®¸</td><td>å…è®¸</td><td>ä¸å…è®¸</td><td>å…è®¸</td></tr><tr><td>REPEATABLE READ</td><td>ä¸å…è®¸</td><td>ä¸å…è®¸</td><td>å…è®¸</td><td>ä¸å…è®¸</td><td>ä¸å…è®¸</td></tr><tr><td>SERIALIZABLE</td><td>ä¸å…è®¸</td><td>ä¸å…è®¸</td><td>ä¸å…è®¸</td><td>ä¸å…è®¸</td><td>ä¸å…è®¸</td></tr></tbody></table></div><p><strong>æ³¨æ„ï¼š</strong>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œäº‹åŠ¡éš”ç¦»çº§åˆ«å’Œæ•°æ®è®¿é—®çš„å¹¶å‘æ€§æ˜¯å¯¹ç«‹çš„ï¼Œäº‹åŠ¡éš”ç¦»çº§åˆ«è¶Šé«˜å¹¶å‘æ€§å°±è¶Šå·®ã€‚æ‰€ä»¥è¦æ ¹æ®å…·ä½“çš„åº”ç”¨æ¥ç¡®å®šåˆé€‚çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œè¿™ä¸ªåœ°æ–¹æ²¡æœ‰ä¸‡èƒ½çš„åŸåˆ™ã€‚</p><blockquote><h3 id="JDBC-ä¸­å¦‚ä½•è¿›è¡Œäº‹åŠ¡å¤„ç†ï¼Ÿ"><a href="#JDBC-ä¸­å¦‚ä½•è¿›è¡Œäº‹åŠ¡å¤„ç†ï¼Ÿ" class="headerlink" title="JDBC ä¸­å¦‚ä½•è¿›è¡Œäº‹åŠ¡å¤„ç†ï¼Ÿ"></a>JDBC ä¸­å¦‚ä½•è¿›è¡Œäº‹åŠ¡å¤„ç†ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>Connection</code> æä¾›äº†äº‹åŠ¡å¤„ç†çš„æ–¹æ³•ï¼Œé€šè¿‡è°ƒç”¨ <code>setAutoCommit(false)</code> å¯ä»¥è®¾ç½®æ‰‹åŠ¨æäº¤äº‹åŠ¡ï¼›å½“äº‹åŠ¡å®Œæˆåç”¨ <code>commit()</code> æ˜¾å¼æäº¤äº‹åŠ¡ï¼›å¦‚æœåœ¨äº‹åŠ¡å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸åˆ™é€šè¿‡ <code>rollback()</code> è¿›è¡Œäº‹åŠ¡å›æ»šã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä» JDBC 3.0 ä¸­è¿˜å¼•å…¥äº† Savepointï¼ˆä¿å­˜ç‚¹ï¼‰çš„æ¦‚å¿µï¼Œå…è®¸é€šè¿‡ä»£ç è®¾ç½®ä¿å­˜ç‚¹å¹¶è®©äº‹åŠ¡å›æ»šåˆ°æŒ‡å®šçš„ä¿å­˜ç‚¹ã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/81.png" alt></p><blockquote><h3 id="JDBC-èƒ½å¦å¤„ç†-Blob-å’Œ-Clobï¼Ÿ"><a href="#JDBC-èƒ½å¦å¤„ç†-Blob-å’Œ-Clobï¼Ÿ" class="headerlink" title="JDBC èƒ½å¦å¤„ç† Blob å’Œ Clobï¼Ÿ"></a>JDBC èƒ½å¦å¤„ç† Blob å’Œ Clobï¼Ÿ</h3></blockquote><p>ç­”ï¼š Blob æ˜¯æŒ‡äºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼ˆBinary Large Objectï¼‰ï¼Œè€Œ Clob æ˜¯æŒ‡å¤§å­—ç¬¦å¯¹è±¡ï¼ˆCharacter Large Objecï¼‰ï¼Œå› æ­¤å…¶ä¸­ Blob æ˜¯ä¸ºå­˜å‚¨å¤§çš„äºŒè¿›åˆ¶æ•°æ®è€Œè®¾è®¡çš„ï¼Œè€Œ Clob æ˜¯ä¸ºå­˜å‚¨å¤§çš„æ–‡æœ¬æ•°æ®è€Œè®¾è®¡çš„ã€‚JDBC çš„ <code>PreparedStatement</code> å’Œ <code>ResultSet</code> éƒ½æä¾›äº†ç›¸åº”çš„æ–¹æ³•æ¥æ”¯æŒ Blob å’Œ Clob æ“ä½œã€‚ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ JDBC æ“ä½œ LOBï¼šä¸‹é¢ä»¥ MySQL æ•°æ®åº“ä¸ºä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªå¼ æœ‰ä¸‰ä¸ªå­—æ®µçš„ç”¨æˆ·è¡¨ï¼ŒåŒ…æ‹¬ç¼–å·ï¼ˆ<code>id</code>ï¼‰ã€å§“åï¼ˆ<code>name</code>ï¼‰å’Œç…§ç‰‡ï¼ˆ<code>photo</code>ï¼‰ï¼Œå»ºè¡¨è¯­å¥å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb_user <span class="token punctuation">(</span>  id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>  name <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span> <span class="token number">20</span> <span class="token punctuation">)</span> <span class="token keyword">UNIQUE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  photo <span class="token keyword">LONGBLOB</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä¸‹é¢çš„ Java ä»£ç å‘æ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡è®°å½•ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">JdbcLobTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Connection</span> con <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// 1. åŠ è½½é©±åŠ¨ï¼ˆJava6ä»¥ä¸Šç‰ˆæœ¬å¯ä»¥çœç•¥ï¼‰</span>            <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 2. å»ºç«‹è¿æ¥</span>            con <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">"jdbc:mysql://localhost:3306/test"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">,</span> <span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 3. åˆ›å»ºè¯­å¥å¯¹è±¡</span>            <span class="token class-name">PreparedStatement</span> ps <span class="token operator">=</span> con<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">"insert into tb_user values (default, ?, ?)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            ps<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// å°†SQLè¯­å¥ä¸­ç¬¬ä¸€ä¸ªå ä½ç¬¦æ¢æˆå­—ç¬¦ä¸²</span>            <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"test.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// Java 7çš„TWR</span>                ps<span class="token punctuation">.</span><span class="token function">setBinaryStream</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> in<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// å°†SQLè¯­å¥ä¸­ç¬¬äºŒä¸ªå ä½ç¬¦æ¢æˆäºŒè¿›åˆ¶æµ</span>                                <span class="token comment">// 4. SQL è¯­å¥è·å¾—å—å½±å“è¡Œæ•°</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ps<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">"æ’å…¥æˆåŠŸ"</span> <span class="token operator">:</span> <span class="token string">"æ’å…¥å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è¯»å–ç…§ç‰‡å¤±è´¥!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClassNotFoundException</span> <span class="token operator">|</span> <span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>     <span class="token comment">// Java 7çš„å¤šå¼‚å¸¸æ•è·</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>     <span class="token comment">// é‡Šæ”¾å¤–éƒ¨èµ„æºçš„ä»£ç éƒ½åº”å½“æ”¾åœ¨finallyä¸­ä¿è¯å…¶èƒ½å¤Ÿå¾—åˆ°æ‰§è¡Œ</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>con <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>con<span class="token punctuation">.</span><span class="token function">isClosed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    con<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 5. é‡Šæ”¾æ•°æ®åº“è¿æ¥ </span>                    con <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>     <span class="token comment">// æŒ‡ç¤ºåƒåœ¾å›æ”¶å™¨å¯ä»¥å›æ”¶è¯¥å¯¹è±¡</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="ç®€è¿°æ­£åˆ™è¡¨è¾¾å¼åŠå…¶ç”¨é€”ã€‚"><a href="#ç®€è¿°æ­£åˆ™è¡¨è¾¾å¼åŠå…¶ç”¨é€”ã€‚" class="headerlink" title="ç®€è¿°æ­£åˆ™è¡¨è¾¾å¼åŠå…¶ç”¨é€”ã€‚"></a>ç®€è¿°æ­£åˆ™è¡¨è¾¾å¼åŠå…¶ç”¨é€”ã€‚</h3></blockquote><p>ç­”ï¼šåœ¨ç¼–å†™å¤„ç†å­—ç¬¦ä¸²çš„ç¨‹åºæ—¶ï¼Œç»å¸¸ä¼šæœ‰æŸ¥æ‰¾ç¬¦åˆæŸäº›å¤æ‚è§„åˆ™çš„å­—ç¬¦ä¸²çš„éœ€è¦ã€‚æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯ç”¨äºæè¿°è¿™äº›è§„åˆ™çš„å·¥å…·ã€‚æ¢å¥è¯è¯´ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯è®°å½•æ–‡æœ¬è§„åˆ™çš„ä»£ç ã€‚</p><p><strong>è¯´æ˜ï¼š</strong>è®¡ç®—æœºè¯ç”ŸåˆæœŸå¤„ç†çš„ä¿¡æ¯å‡ ä¹éƒ½æ˜¯æ•°å€¼ï¼Œä½†æ˜¯æ—¶è¿‡å¢ƒè¿ï¼Œä»Šå¤©æˆ‘ä»¬ä½¿ç”¨è®¡ç®—æœºå¤„ç†çš„ä¿¡æ¯æ›´å¤šçš„æ—¶å€™ä¸æ˜¯æ•°å€¼è€Œæ˜¯å­—ç¬¦ä¸²ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯åœ¨è¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…å’Œå¤„ç†çš„æ—¶å€™æœ€ä¸ºå¼ºå¤§çš„å·¥å…·ï¼Œç»å¤§å¤šæ•°è¯­è¨€éƒ½æä¾›äº†å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„æ”¯æŒã€‚</p><blockquote><h3 id="Java-ä¸­æ˜¯å¦‚ä½•æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æ“ä½œçš„ï¼Ÿ"><a href="#Java-ä¸­æ˜¯å¦‚ä½•æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æ“ä½œçš„ï¼Ÿ" class="headerlink" title="Java ä¸­æ˜¯å¦‚ä½•æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æ“ä½œçš„ï¼Ÿ"></a>Java ä¸­æ˜¯å¦‚ä½•æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æ“ä½œçš„ï¼Ÿ</h3></blockquote><p>ç­”ï¼šJava ä¸­çš„ <code>String</code> ç±»æä¾›äº†æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼æ“ä½œçš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼š<code>matches()</code>ã€<code>replaceAll()</code>ã€<code>replaceFirst()</code>ã€<code>split()</code>ã€‚æ­¤å¤–ï¼ŒJava ä¸­å¯ä»¥ç”¨ <code>Pattern</code> ç±»è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„ API è¿›è¡Œå„ç§æ­£åˆ™è¡¨è¾¾å¼æ“ä½œï¼Œè¯·å‚è€ƒä¸‹é¢é¢è¯•é¢˜çš„ä»£ç ã€‚</p><p>é¢è¯•é¢˜ï¼šå¦‚æœè¦ä»å­—ç¬¦ä¸²ä¸­æˆªå–ç¬¬ä¸€ä¸ªè‹±æ–‡å·¦æ‹¬å·ä¹‹å‰çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼šåŒ—äº¬å¸‚(æœé˜³åŒº)(è¥¿åŸåŒº)(æµ·æ·€åŒº)ï¼Œæˆªå–ç»“æœä¸ºï¼šåŒ—äº¬å¸‚ï¼Œé‚£ä¹ˆæ­£åˆ™è¡¨è¾¾å¼æ€ä¹ˆå†™ï¼Ÿ</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Matcher</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">RegExpTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"åŒ—äº¬å¸‚(æœé˜³åŒº)(è¥¿åŸåŒº)(æµ·æ·€åŒº)"</span><span class="token punctuation">;</span>        <span class="token class-name">Pattern</span> p <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">".*?(?=\\()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Matcher</span> m <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¯´æ˜ï¼š</strong>ä¸Šé¢çš„æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨äº†æ‡’æƒ°åŒ¹é…å’Œå‰ç»ï¼Œå¦‚æœä¸æ¸…æ¥šè¿™äº›å†…å®¹ï¼Œæ¨èè¯»ä¸€ä¸‹ç½‘ä¸Šå¾ˆæœ‰åçš„<a href="https://www.jb51.net/tools/zhengze.html">ã€Šæ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹ã€‹</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> â˜•Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java é¢è¯•é¢˜è§£æï¼ˆIOæµï¼‰</title>
      <link href="post/af128a42.html"/>
      <url>post/af128a42.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="Java-ä¸­å¦‚ä½•å®ç°åºåˆ—åŒ–ï¼Œæœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ"><a href="#Java-ä¸­å¦‚ä½•å®ç°åºåˆ—åŒ–ï¼Œæœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ" class="headerlink" title="Java ä¸­å¦‚ä½•å®ç°åºåˆ—åŒ–ï¼Œæœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ"></a>Java ä¸­å¦‚ä½•å®ç°åºåˆ—åŒ–ï¼Œæœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ</h3></blockquote><p>ç­”ï¼šåºåˆ—åŒ–å°±æ˜¯ä¸€ç§ç”¨æ¥å¤„ç†å¯¹è±¡æµçš„æœºåˆ¶ï¼Œæ‰€è°“å¯¹è±¡æµä¹Ÿå°±æ˜¯å°†å¯¹è±¡çš„å†…å®¹è¿›è¡ŒæµåŒ–ã€‚å¯ä»¥å¯¹æµåŒ–åçš„å¯¹è±¡è¿›è¡Œè¯»å†™æ“ä½œï¼Œä¹Ÿå¯å°†æµåŒ–åçš„å¯¹è±¡ä¼ è¾“äºç½‘ç»œä¹‹é—´ã€‚åºåˆ—åŒ–æ˜¯ä¸ºäº†è§£å†³å¯¹è±¡æµè¯»å†™æ“ä½œæ—¶å¯èƒ½å¼•å‘çš„é—®é¢˜ï¼ˆå¦‚æœä¸è¿›è¡Œåºåˆ—åŒ–å¯èƒ½ä¼šå­˜åœ¨æ•°æ®ä¹±åºçš„é—®é¢˜ï¼‰ã€‚</p><p>è¦å®ç°åºåˆ—åŒ–ï¼Œéœ€è¦è®©ä¸€ä¸ªç±»å®ç° <code>Serializable</code> æ¥å£ï¼Œè¯¥æ¥å£æ˜¯ä¸€ä¸ªæ ‡è¯†æ€§æ¥å£ï¼Œæ ‡æ³¨è¯¥ç±»å¯¹è±¡æ˜¯å¯è¢«åºåˆ—åŒ–çš„ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªè¾“å‡ºæµæ¥æ„é€ ä¸€ä¸ªå¯¹è±¡è¾“å‡ºæµå¹¶é€šè¿‡ <code>writeObject(Object)</code> æ–¹æ³•å°±å¯ä»¥å°†å®ç°å¯¹è±¡å†™å‡ºï¼ˆå³ä¿å­˜å…¶çŠ¶æ€ï¼‰ï¼›å¦‚æœéœ€è¦ååºåˆ—åŒ–åˆ™å¯ä»¥ç”¨ä¸€ä¸ªè¾“å…¥æµå»ºç«‹å¯¹è±¡è¾“å…¥æµï¼Œç„¶åé€šè¿‡ <code>readObject</code> æ–¹æ³•ä»æµä¸­è¯»å–å¯¹è±¡ã€‚åºåˆ—åŒ–é™¤äº†èƒ½å¤Ÿå®ç°å¯¹è±¡çš„æŒä¹…åŒ–ä¹‹å¤–ï¼Œè¿˜èƒ½å¤Ÿç”¨äºå¯¹è±¡çš„æ·±åº¦å…‹éš†ï¼ˆå¯ä»¥å‚è€ƒç¬¬ 29 é¢˜ï¼‰ã€‚</p><blockquote><h3 id="Java-ä¸­æœ‰å‡ ç§ç±»å‹çš„æµï¼Ÿ"><a href="#Java-ä¸­æœ‰å‡ ç§ç±»å‹çš„æµï¼Ÿ" class="headerlink" title="Java ä¸­æœ‰å‡ ç§ç±»å‹çš„æµï¼Ÿ"></a>Java ä¸­æœ‰å‡ ç§ç±»å‹çš„æµï¼Ÿ</h3></blockquote><p>ç­”ï¼š<strong>å­—èŠ‚æµ</strong>å’Œ<strong>å­—ç¬¦æµ</strong>ã€‚å­—èŠ‚æµç»§æ‰¿äº <code>InputStream</code>ã€<code>OutputStream</code>ï¼Œå­—ç¬¦æµç»§æ‰¿äº <code>Reader</code>ã€<code>Writer</code>ã€‚åœ¨ <code>java.io</code> åŒ…ä¸­è¿˜æœ‰è®¸å¤šå…¶ä»–çš„æµï¼Œä¸»è¦æ˜¯ä¸ºäº†æé«˜æ€§èƒ½å’Œä½¿ç”¨æ–¹ä¾¿ã€‚å…³äº Java çš„ I/O éœ€è¦æ³¨æ„çš„æœ‰ä¸¤ç‚¹ï¼šä¸€æ˜¯ä¸¤ç§<strong>å¯¹ç§°æ€§</strong>ï¼ˆè¾“å…¥å’Œè¾“å‡ºçš„å¯¹ç§°æ€§ï¼Œå­—èŠ‚å’Œå­—ç¬¦çš„å¯¹ç§°æ€§ï¼‰ï¼›äºŒæ˜¯ä¸¤ç§<strong>è®¾è®¡æ¨¡å¼</strong>ï¼ˆé€‚é…å™¨æ¨¡å¼å’Œè£…æ½¢æ¨¡å¼ï¼‰ã€‚å¦å¤– Java ä¸­çš„æµä¸åŒäº C# çš„æ˜¯å®ƒåªæœ‰ä¸€ä¸ªç»´åº¦ä¸€ä¸ªæ–¹å‘ã€‚</p><p>é¢è¯•é¢˜ - ç¼–ç¨‹å®ç°æ–‡ä»¶æ‹·è´ã€‚ï¼ˆè¿™ä¸ªé¢˜ç›®åœ¨ç¬”è¯•çš„æ—¶å€™ç»å¸¸å‡ºç°ï¼Œä¸‹é¢çš„ä»£ç ç»™å‡ºäº†ä¸¤ç§å®ç°æ–¹æ¡ˆï¼‰</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">OutputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span></span><span class="token class-name">ByteBuffer</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels<span class="token punctuation">.</span></span><span class="token class-name">FileChannel</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">MyUtil</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å·¥å…·ç±»ä¸­çš„æ–¹æ³•éƒ½æ˜¯é™æ€æ–¹å¼è®¿é—®çš„ï¼Œå› æ­¤å°†æ„é€ å™¨ç§æœ‰ä¸å…è®¸åˆ›å»ºå¯¹è±¡(ç»å¯¹å¥½ä¹ æƒ¯)</span>    <span class="token keyword">private</span> <span class="token class-name">MyUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AssertionError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">fileCopy</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">,</span> <span class="token class-name">String</span> target<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">OutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">4096</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> bytesToRead<span class="token punctuation">;</span>                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>bytesToRead <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> bytesToRead<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">fileCopyNIO</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">,</span> <span class="token class-name">String</span> target<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileInputStream</span> in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileOutputStream</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">FileChannel</span> inChannel <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">FileChannel</span> outChannel <span class="token operator">=</span> out<span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">ByteBuffer</span> buffer <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">while</span><span class="token punctuation">(</span>inChannel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    outChannel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>                    buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong>ä¸Šé¢ç”¨åˆ° Java 7 çš„ TWRï¼Œä½¿ç”¨ TWR åå¯ä»¥ä¸ç”¨åœ¨ <code>finally</code> ä¸­é‡Šæ”¾å¤–éƒ¨èµ„æº ï¼Œä»è€Œè®©ä»£ç æ›´åŠ ä¼˜é›…ã€‚</p><blockquote><h3 id="å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¾“å…¥ä¸€ä¸ªæ–‡ä»¶åå’Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç»Ÿè®¡è¿™ä¸ªå­—ç¬¦ä¸²åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚"><a href="#å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¾“å…¥ä¸€ä¸ªæ–‡ä»¶åå’Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç»Ÿè®¡è¿™ä¸ªå­—ç¬¦ä¸²åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚" class="headerlink" title="å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¾“å…¥ä¸€ä¸ªæ–‡ä»¶åå’Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç»Ÿè®¡è¿™ä¸ªå­—ç¬¦ä¸²åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚"></a>å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¾“å…¥ä¸€ä¸ªæ–‡ä»¶åå’Œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç»Ÿè®¡è¿™ä¸ªå­—ç¬¦ä¸²åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚</h3></blockquote><p>ç­”ï¼šä»£ç å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">BufferedReader</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileReader</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">MyUtil</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// å·¥å…·ç±»ä¸­çš„æ–¹æ³•éƒ½æ˜¯é™æ€æ–¹å¼è®¿é—®çš„ï¼Œå› æ­¤å°†æ„é€ å™¨ç§æœ‰ä¸å…è®¸åˆ›å»ºå¯¹è±¡(ç»å¯¹å¥½ä¹ æƒ¯)</span>    <span class="token keyword">private</span> <span class="token class-name">MyUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AssertionError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * ç»Ÿè®¡ç»™å®šæ–‡ä»¶ä¸­ç»™å®šå­—ç¬¦ä¸²çš„å‡ºç°æ¬¡æ•°     * @param filename æ–‡ä»¶å     * @param word å­—ç¬¦ä¸²     * @return å­—ç¬¦ä¸²åœ¨æ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°     */</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">countWordInFile</span><span class="token punctuation">(</span><span class="token class-name">String</span> filename<span class="token punctuation">,</span> <span class="token class-name">String</span> word<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">FileReader</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>fr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">String</span> line <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>                    <span class="token keyword">while</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>index <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        counter<span class="token operator">++</span><span class="token punctuation">;</span>                        line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>index <span class="token operator">+</span> word<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> counter<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="å¦‚ä½•ç”¨-Java-ä»£ç åˆ—å‡ºä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ï¼Ÿ"><a href="#å¦‚ä½•ç”¨-Java-ä»£ç åˆ—å‡ºä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ï¼Ÿ" class="headerlink" title="å¦‚ä½•ç”¨ Java ä»£ç åˆ—å‡ºä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ï¼Ÿ"></a>å¦‚ä½•ç”¨ Java ä»£ç åˆ—å‡ºä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><p>å¦‚æœåªè¦æ±‚åˆ—å‡ºå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Test12</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">File</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"/Users/Hao/Downloads"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">File</span> temp <span class="token operator">:</span> f<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å¦‚æœéœ€è¦å¯¹æ–‡ä»¶å¤¹ç»§ç»­å±•å¼€ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Test12</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">showDirectory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"/Users/Hao/Downloads"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">showDirectory</span><span class="token punctuation">(</span><span class="token class-name">File</span> f<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">_walkDirectory</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">_walkDirectory</span><span class="token punctuation">(</span><span class="token class-name">File</span> f<span class="token punctuation">,</span> <span class="token keyword">int</span> level<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">File</span> temp <span class="token operator">:</span> f<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">_walkDirectory</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> level <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>åœ¨ Java 7 ä¸­å¯ä»¥ä½¿ç”¨ NIO.2 çš„ API æ¥åšåŒæ ·çš„äº‹æƒ…ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">ShowFileTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Path</span> initPath <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/Users/Hao/Downloads"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">walkFileTree</span><span class="token punctuation">(</span>initPath<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SimpleFileVisitor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Path</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token class-name">FileVisitResult</span> <span class="token function">visitFile</span><span class="token punctuation">(</span><span class="token class-name">Path</span> file<span class="token punctuation">,</span> <span class="token class-name">BasicFileAttributes</span> attrs<span class="token punctuation">)</span>                     <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token class-name">FileVisitResult</span><span class="token punctuation">.</span>CONTINUE<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="ç”¨-Java-çš„å¥—æ¥å­—ç¼–ç¨‹å®ç°ä¸€ä¸ªå¤šçº¿ç¨‹çš„å›æ˜¾ï¼ˆechoï¼‰æœåŠ¡å™¨ã€‚"><a href="#ç”¨-Java-çš„å¥—æ¥å­—ç¼–ç¨‹å®ç°ä¸€ä¸ªå¤šçº¿ç¨‹çš„å›æ˜¾ï¼ˆechoï¼‰æœåŠ¡å™¨ã€‚" class="headerlink" title="ç”¨ Java çš„å¥—æ¥å­—ç¼–ç¨‹å®ç°ä¸€ä¸ªå¤šçº¿ç¨‹çš„å›æ˜¾ï¼ˆechoï¼‰æœåŠ¡å™¨ã€‚"></a>ç”¨ Java çš„å¥—æ¥å­—ç¼–ç¨‹å®ç°ä¸€ä¸ªå¤šçº¿ç¨‹çš„å›æ˜¾ï¼ˆechoï¼‰æœåŠ¡å™¨ã€‚</h3></blockquote><p>ç­”ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">BufferedReader</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStreamReader</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">ServerSocket</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EchoServer</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> ECHO_SERVER_PORT <span class="token operator">=</span> <span class="token number">6789</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">ServerSocket</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span>ECHO_SERVER_PORT<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æœåŠ¡å™¨å·²ç»å¯åŠ¨..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Socket</span> client <span class="token operator">=</span> server<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClientHandler</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ClientHandler</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">Socket</span> client<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">ClientHandler</span><span class="token punctuation">(</span><span class="token class-name">Socket</span> client<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>client <span class="token operator">=</span> client<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span><span class="token punctuation">(</span><span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>client<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">PrintWriter</span> pw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span>client<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">String</span> msg <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ”¶åˆ°"</span> <span class="token operator">+</span> client<span class="token punctuation">.</span><span class="token function">getInetAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"å‘é€çš„: "</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                pw<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                pw<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                    client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong>ä¸Šé¢çš„ä»£ç ä½¿ç”¨äº† Java 7 çš„ TWR è¯­æ³•ï¼Œç”±äºå¾ˆå¤šå¤–éƒ¨èµ„æºç±»éƒ½é—´æ¥çš„å®ç°äº† <code>AutoCloseable</code> æ¥å£ï¼ˆå•æ–¹æ³•å›è°ƒæ¥å£ï¼‰ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨ TWR è¯­æ³•åœ¨ <code>try</code> ç»“æŸçš„æ—¶å€™é€šè¿‡å›è°ƒçš„æ–¹å¼è‡ªåŠ¨è°ƒç”¨å¤–éƒ¨èµ„æºç±»çš„ <code>close()</code> æ–¹æ³•ï¼Œé¿å…ä¹¦å†™å†—é•¿çš„ <code>finally</code> ä»£ç å—ã€‚æ­¤å¤–ï¼Œä¸Šé¢çš„ä»£ç ç”¨ä¸€ä¸ªé™æ€å†…éƒ¨ç±»å®ç°çº¿ç¨‹çš„åŠŸèƒ½ï¼Œä½¿ç”¨å¤šçº¿ç¨‹å¯ä»¥é¿å…ä¸€ä¸ªç”¨æˆ· I/O æ“ä½œæ‰€äº§ç”Ÿçš„ä¸­æ–­å½±å“å…¶ä»–ç”¨æˆ·å¯¹æœåŠ¡å™¨çš„è®¿é—®ï¼Œç®€å•çš„è¯´å°±æ˜¯ä¸€ä¸ªç”¨æˆ·çš„è¾“å…¥æ“ä½œä¸ä¼šé€ æˆå…¶ä»–ç”¨æˆ·çš„é˜»å¡ã€‚å½“ç„¶ï¼Œä¸Šé¢çš„ä»£ç ä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œå› ä¸ºé¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹æ‰€é€ æˆçš„å¼€é”€ä¹Ÿæ˜¯ä¸å¯å¿½è§†çš„ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€æ®µå›æ˜¾å®¢æˆ·ç«¯æµ‹è¯•ä»£ç ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">BufferedReader</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStreamReader</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">PrintWriter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">Socket</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Scanner</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EchoClient</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Socket</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token string">"localhost"</span><span class="token punctuation">,</span> <span class="token number">6789</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Scanner</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥å†…å®¹: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> msg <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sc<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">PrintWriter</span> pw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span>client<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        pw<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>        pw<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>client<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å¦‚æœå¸Œæœ›ç”¨ NIO çš„å¤šè·¯å¤ç”¨å¥—æ¥å­—å®ç°æœåŠ¡å™¨ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚NIO çš„æ“ä½œè™½ç„¶å¸¦æ¥äº†æ›´å¥½çš„æ€§èƒ½ï¼Œä½†æ˜¯æœ‰äº›æ“ä½œæ˜¯æ¯”è¾ƒåº•å±‚çš„ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´è¿˜æ˜¯æœ‰äº›éš¾äºç†è§£ã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">InetSocketAddress</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span></span><span class="token class-name">ByteBuffer</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span></span><span class="token class-name">CharBuffer</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels<span class="token punctuation">.</span></span><span class="token class-name">SelectionKey</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels<span class="token punctuation">.</span></span><span class="token class-name">Selector</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels<span class="token punctuation">.</span></span><span class="token class-name">ServerSocketChannel</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>channels<span class="token punctuation">.</span></span><span class="token class-name">SocketChannel</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Iterator</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EchoServerNIO</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> ECHO_SERVER_PORT <span class="token operator">=</span> <span class="token number">6789</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> ECHO_SERVER_TIMEOUT <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> BUFFER_SIZE <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ServerSocketChannel</span> serverChannel <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Selector</span> selector <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token comment">// å¤šè·¯å¤ç”¨é€‰æ‹©å™¨</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ByteBuffer</span> buffer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token comment">// ç¼“å†²åŒº</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            serverChannel <span class="token operator">=</span> <span class="token class-name">ServerSocketChannel</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            buffer <span class="token operator">=</span> <span class="token class-name">ByteBuffer</span><span class="token punctuation">.</span><span class="token function">allocate</span><span class="token punctuation">(</span>BUFFER_SIZE<span class="token punctuation">)</span><span class="token punctuation">;</span>            serverChannel<span class="token punctuation">.</span><span class="token function">socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span>ECHO_SERVER_PORT<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            serverChannel<span class="token punctuation">.</span><span class="token function">configureBlocking</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            selector <span class="token operator">=</span> <span class="token class-name">Selector</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            serverChannel<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> <span class="token class-name">SelectionKey</span><span class="token punctuation">.</span>OP_ACCEPT<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>selector<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>ECHO_SERVER_TIMEOUT<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SelectionKey</span><span class="token punctuation">></span></span> it <span class="token operator">=</span> selector<span class="token punctuation">.</span><span class="token function">selectedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">while</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token class-name">SelectionKey</span> key <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        it<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token function">handleKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">handleKey</span><span class="token punctuation">(</span><span class="token class-name">SelectionKey</span> key<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SocketChannel</span> channel <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">isAcceptable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">ServerSocketChannel</span> serverChannel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ServerSocketChannel</span><span class="token punctuation">)</span> key<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                channel <span class="token operator">=</span> serverChannel<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                channel<span class="token punctuation">.</span><span class="token function">configureBlocking</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                channel<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> <span class="token class-name">SelectionKey</span><span class="token punctuation">.</span>OP_READ<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">isReadable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                channel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SocketChannel</span><span class="token punctuation">)</span> key<span class="token punctuation">.</span><span class="token function">channel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>channel<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    buffer<span class="token punctuation">.</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">CharBuffer</span> charBuffer <span class="token operator">=</span> <span class="token class-name">CharsetHelper</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">String</span> msg <span class="token operator">=</span> charBuffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ”¶åˆ°"</span> <span class="token operator">+</span> channel<span class="token punctuation">.</span><span class="token function">getRemoteAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"çš„æ¶ˆæ¯ï¼š"</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>                    channel<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token class-name">CharsetHelper</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token class-name">CharBuffer</span><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    channel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>channel <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                channel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span></span><span class="token class-name">ByteBuffer</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span></span><span class="token class-name">CharBuffer</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">CharacterCodingException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">Charset</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">CharsetDecoder</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">CharsetEncoder</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">CharsetHelper</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> UTF_8 <span class="token operator">=</span> <span class="token string">"UTF-8"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">CharsetEncoder</span> encoder <span class="token operator">=</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">CharsetDecoder</span> decoder <span class="token operator">=</span> <span class="token class-name">Charset</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">CharsetHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ByteBuffer</span> <span class="token function">encode</span><span class="token punctuation">(</span><span class="token class-name">CharBuffer</span> in<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CharacterCodingException</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CharBuffer</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">ByteBuffer</span> in<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CharacterCodingException</span><span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> decoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> â˜•Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java é¢è¯•é¢˜è§£æï¼ˆå¹¶å‘ï¼‰</title>
      <link href="post/32cf50db.html"/>
      <url>post/32cf50db.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="Thread-ç±»çš„-sleep-æ–¹æ³•å’Œå¯¹è±¡çš„-wait-æ–¹æ³•éƒ½å¯ä»¥è®©çº¿ç¨‹æš‚åœæ‰§è¡Œï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#Thread-ç±»çš„-sleep-æ–¹æ³•å’Œå¯¹è±¡çš„-wait-æ–¹æ³•éƒ½å¯ä»¥è®©çº¿ç¨‹æš‚åœæ‰§è¡Œï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="Thread ç±»çš„ sleep() æ–¹æ³•å’Œå¯¹è±¡çš„ wait() æ–¹æ³•éƒ½å¯ä»¥è®©çº¿ç¨‹æš‚åœæ‰§è¡Œï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«?"></a><code>Thread</code> ç±»çš„ <code>sleep()</code> æ–¹æ³•å’Œå¯¹è±¡çš„ <code>wait()</code> æ–¹æ³•éƒ½å¯ä»¥è®©çº¿ç¨‹æš‚åœæ‰§è¡Œï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«?</h3></blockquote><p>ç­”ï¼š<code>sleep()</code> æ–¹æ³•ï¼ˆä¼‘çœ ï¼‰æ˜¯çº¿ç¨‹ç±» <code>Thread</code> çš„é™æ€æ–¹æ³•ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä¼šè®©å½“å‰çº¿ç¨‹æš‚åœæ‰§è¡ŒæŒ‡å®šçš„æ—¶é—´ï¼Œå°†æ‰§è¡Œæœºä¼šï¼ˆCPUï¼‰è®©ç»™å…¶ä»–çº¿ç¨‹ï¼Œä½†æ˜¯å¯¹è±¡çš„é”ä¾ç„¶ä¿æŒï¼Œå› æ­¤ä¼‘çœ æ—¶é—´ç»“æŸåä¼šè‡ªåŠ¨æ¢å¤ï¼ˆçº¿ç¨‹å›åˆ°å°±ç»ªçŠ¶æ€ï¼Œè¯·å‚è€ƒç¬¬ 66 é¢˜ä¸­çš„çº¿ç¨‹çŠ¶æ€è½¬æ¢å›¾ï¼‰ã€‚<code>wait()</code> æ˜¯ <code>Object</code> ç±»çš„æ–¹æ³•ï¼Œè°ƒç”¨å¯¹è±¡çš„ <code>wait()</code> æ–¹æ³•å¯¼è‡´å½“å‰çº¿ç¨‹æ”¾å¼ƒå¯¹è±¡çš„é”ï¼ˆçº¿ç¨‹æš‚åœæ‰§è¡Œï¼‰ï¼Œè¿›å…¥å¯¹è±¡çš„ç­‰å¾…æ± ï¼ˆwait poolï¼‰ï¼Œåªæœ‰è°ƒç”¨å¯¹è±¡çš„ <code>notify()</code> æ–¹æ³•ï¼ˆæˆ– <code>notifyAll()</code> æ–¹æ³•ï¼‰æ—¶æ‰èƒ½å”¤é†’ç­‰å¾…æ± ä¸­çš„çº¿ç¨‹è¿›å…¥ç­‰é”æ± ï¼ˆlock poolï¼‰ï¼Œå¦‚æœçº¿ç¨‹é‡æ–°è·å¾—å¯¹è±¡çš„é”å°±å¯ä»¥è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚</p><p><strong>è¡¥å……ï¼š</strong>å¯èƒ½ä¸å°‘äººå¯¹ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Œä»€ä¹ˆæ˜¯çº¿ç¨‹è¿˜æ¯”è¾ƒæ¨¡ç³Šï¼Œå¯¹äºä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹ç¼–ç¨‹ä¹Ÿä¸æ˜¯ç‰¹åˆ«ç†è§£ã€‚ç®€å•çš„è¯´ï¼šè¿›ç¨‹æ˜¯å…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ï¼Œæ˜¯æ“ä½œç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼›çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯ CPU è°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ï¼Œæ˜¯æ¯”è¿›ç¨‹æ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ã€‚çº¿ç¨‹çš„åˆ’åˆ†å°ºåº¦å°äºè¿›ç¨‹ï¼Œè¿™ä½¿å¾—å¤šçº¿ç¨‹ç¨‹åºçš„å¹¶å‘æ€§é«˜ï¼›è¿›ç¨‹åœ¨æ‰§è¡Œæ—¶é€šå¸¸æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œè€Œçº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«å†…å­˜ã€‚ä½¿ç”¨å¤šçº¿ç¨‹çš„ç¼–ç¨‹é€šå¸¸èƒ½å¤Ÿå¸¦æ¥æ›´å¥½çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼Œä½†æ˜¯å¤šçº¿ç¨‹çš„ç¨‹åºå¯¹äºå…¶ä»–ç¨‹åºæ˜¯ä¸å‹å¥½çš„ï¼Œå› ä¸ºå®ƒå¯èƒ½å ç”¨äº†æ›´å¤šçš„ CPU èµ„æºã€‚å½“ç„¶ï¼Œä¹Ÿä¸æ˜¯çº¿ç¨‹è¶Šå¤šï¼Œç¨‹åºçš„æ€§èƒ½å°±è¶Šå¥½ï¼Œå› ä¸ºçº¿ç¨‹ä¹‹é—´çš„è°ƒåº¦å’Œåˆ‡æ¢ä¹Ÿä¼šæµªè´¹ CPU æ—¶é—´ã€‚æ—¶ä¸‹å¾ˆæ—¶é«¦çš„ Node.js å°±é‡‡ç”¨äº†å•çº¿ç¨‹å¼‚æ­¥ I/O çš„å·¥ä½œæ¨¡å¼ã€‚</p><blockquote><h3 id="çº¿ç¨‹çš„-sleep-æ–¹æ³•å’Œ-yield-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#çº¿ç¨‹çš„-sleep-æ–¹æ³•å’Œ-yield-æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="çº¿ç¨‹çš„ sleep() æ–¹æ³•å’Œ yield() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>çº¿ç¨‹çš„ <code>sleep()</code> æ–¹æ³•å’Œ <code>yield()</code> æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ol><li><code>sleep()</code> æ–¹æ³•ç»™å…¶ä»–çº¿ç¨‹è¿è¡Œæœºä¼šæ—¶ä¸è€ƒè™‘çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤ä¼šç»™ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹ä»¥è¿è¡Œçš„æœºä¼šï¼›<code>yield()</code> æ–¹æ³•åªä¼šç»™ç›¸åŒä¼˜å…ˆçº§æˆ–æ›´é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ä»¥è¿è¡Œçš„æœºä¼šï¼›</li><li>çº¿ç¨‹æ‰§è¡Œ <code>sleep()</code> æ–¹æ³•åè½¬å…¥é˜»å¡ï¼ˆblockedï¼‰çŠ¶æ€ï¼Œè€Œæ‰§è¡Œ <code>yield()</code> æ–¹æ³•åè½¬å…¥å°±ç»ªï¼ˆreadyï¼‰çŠ¶æ€ï¼›</li><li><code>sleep()</code> æ–¹æ³•å£°æ˜æŠ›å‡º <code>InterruptedException</code>ï¼Œè€Œ <code>yield()</code> æ–¹æ³•æ²¡æœ‰å£°æ˜ä»»ä½•å¼‚å¸¸ï¼›</li><li><code>sleep()</code> æ–¹æ³•æ¯” <code>yield()</code> æ–¹æ³•ï¼ˆè·Ÿæ“ä½œç³»ç»Ÿ CPU è°ƒåº¦ç›¸å…³ï¼‰å…·æœ‰æ›´å¥½çš„å¯ç§»æ¤æ€§ã€‚</li></ol><blockquote><h3 id="å½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸€ä¸ªå¯¹è±¡çš„-synchronized-æ–¹æ³•-A-ä¹‹åï¼Œå…¶å®ƒçº¿ç¨‹æ˜¯å¦å¯è¿›å…¥æ­¤å¯¹è±¡çš„-synchronized-æ–¹æ³•-Bï¼Ÿ"><a href="#å½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸€ä¸ªå¯¹è±¡çš„-synchronized-æ–¹æ³•-A-ä¹‹åï¼Œå…¶å®ƒçº¿ç¨‹æ˜¯å¦å¯è¿›å…¥æ­¤å¯¹è±¡çš„-synchronized-æ–¹æ³•-Bï¼Ÿ" class="headerlink" title="å½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸€ä¸ªå¯¹è±¡çš„ synchronized æ–¹æ³• A ä¹‹åï¼Œå…¶å®ƒçº¿ç¨‹æ˜¯å¦å¯è¿›å…¥æ­¤å¯¹è±¡çš„ synchronized æ–¹æ³• Bï¼Ÿ"></a>å½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥ä¸€ä¸ªå¯¹è±¡çš„ <code>synchronized</code> æ–¹æ³• <code>A</code> ä¹‹åï¼Œå…¶å®ƒçº¿ç¨‹æ˜¯å¦å¯è¿›å…¥æ­¤å¯¹è±¡çš„ <code>synchronized</code> æ–¹æ³• <code>B</code>ï¼Ÿ</h3></blockquote><p>ç­”ï¼šä¸èƒ½ã€‚å…¶å®ƒçº¿ç¨‹åªèƒ½è®¿é—®è¯¥å¯¹è±¡çš„éåŒæ­¥æ–¹æ³•ï¼ŒåŒæ­¥æ–¹æ³•åˆ™ä¸èƒ½è¿›å…¥ã€‚å› ä¸ºéé™æ€æ–¹æ³•ä¸Šçš„ <code>synchronized</code> ä¿®é¥°ç¬¦è¦æ±‚æ‰§è¡Œæ–¹æ³•æ—¶è¦è·å¾—å¯¹è±¡çš„é”ï¼Œå¦‚æœå·²ç»è¿›å…¥ <code>A</code> æ–¹æ³•è¯´æ˜å¯¹è±¡é”å·²ç»è¢«å–èµ°ï¼Œé‚£ä¹ˆè¯•å›¾è¿›å…¥ <code>B</code> æ–¹æ³•çš„çº¿ç¨‹å°±åªèƒ½åœ¨<strong>ç­‰é”æ± </strong>ï¼ˆæ³¨æ„ä¸æ˜¯ç­‰å¾…æ± å“¦ï¼‰ä¸­ç­‰å¾…å¯¹è±¡çš„é”ã€‚</p><blockquote><h3 id="è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚"><a href="#è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚" class="headerlink" title="è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚"></a>è¯·è¯´å‡ºä¸çº¿ç¨‹åŒæ­¥ä»¥åŠçº¿ç¨‹è°ƒåº¦ç›¸å…³çš„æ–¹æ³•ã€‚</h3></blockquote><p>ç­”ï¼š</p><ul><li><code>wait()</code>ï¼šä½¿ä¸€ä¸ªçº¿ç¨‹å¤„äºç­‰å¾…ï¼ˆé˜»å¡ï¼‰çŠ¶æ€ï¼Œå¹¶ä¸”é‡Šæ”¾æ‰€æŒæœ‰çš„å¯¹è±¡çš„é”ï¼›</li><li><code>sleep()</code>ï¼šä½¿ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹å¤„äºç¡çœ çŠ¶æ€ï¼Œæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œè°ƒç”¨æ­¤æ–¹æ³•è¦å¤„ç† <code>InterruptedException</code> å¼‚å¸¸ï¼›</li><li><code>notify()</code>ï¼šå”¤é†’ä¸€ä¸ªå¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œå½“ç„¶åœ¨è°ƒç”¨æ­¤æ–¹æ³•çš„æ—¶å€™ï¼Œå¹¶ä¸èƒ½ç¡®åˆ‡çš„å”¤é†’æŸä¸€ä¸ªç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œè€Œæ˜¯ç”± JVM ç¡®å®šå”¤é†’å“ªä¸ªçº¿ç¨‹ï¼Œè€Œä¸”<strong>ä¸ä¼˜å…ˆçº§æ— å…³</strong>ï¼›</li><li><code>notityAll()</code>ï¼šå”¤é†’æ‰€æœ‰å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œè¯¥æ–¹æ³•å¹¶ä¸æ˜¯å°†å¯¹è±¡çš„é”ç»™æ‰€æœ‰çº¿ç¨‹ï¼Œè€Œæ˜¯è®©å®ƒä»¬<strong>ç«äº‰</strong>ï¼Œåªæœ‰è·å¾—é”çš„çº¿ç¨‹æ‰èƒ½è¿›å…¥å°±ç»ªçŠ¶æ€ï¼›</li></ul><p><strong>è¯´æ˜ï¼š</strong>å…³äº Java å¤šçº¿ç¨‹å’Œå¹¶å‘ç¼–ç¨‹çš„é—®é¢˜ï¼Œå»ºè®®å¤§å®¶çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« <a href="https://blog.csdn.net/jackfrued/article/details/44499227">ã€Šå…³äºJavaå¹¶å‘ç¼–ç¨‹çš„æ€»ç»“å’Œæ€è€ƒã€‹</a>ã€‚</p><p><strong>è¡¥å……ï¼š</strong>Java 5 é€šè¿‡ <code>Lock</code> æ¥å£æä¾›äº†æ˜¾å¼çš„é”æœºåˆ¶ï¼ˆexplicit lockï¼‰ï¼Œå¢å¼ºäº†çµæ´»æ€§ä»¥åŠå¯¹çº¿ç¨‹çš„åè°ƒã€‚<code>Lock</code> æ¥å£ä¸­å®šä¹‰äº†åŠ é” <code>lock()</code> å’Œè§£é” <code>unlock()</code> çš„æ–¹æ³•ï¼ŒåŒæ—¶è¿˜æä¾›äº† <code>newCondition()</code> æ–¹æ³•æ¥äº§ç”Ÿç”¨äºçº¿ç¨‹ä¹‹é—´é€šä¿¡çš„ <code>Condition</code> å¯¹è±¡ï¼›æ­¤å¤–ï¼ŒJava 5 è¿˜æä¾›äº†ä¿¡å·é‡æœºåˆ¶ï¼ˆsemaphoreï¼‰ï¼Œä¿¡å·é‡å¯ä»¥ç”¨æ¥é™åˆ¶å¯¹æŸä¸ªå…±äº«èµ„æºè¿›è¡Œè®¿é—®çš„çº¿ç¨‹çš„æ•°é‡ã€‚åœ¨å¯¹èµ„æºè¿›è¡Œè®¿é—®ä¹‹å‰ï¼Œçº¿ç¨‹å¿…é¡»å¾—åˆ°ä¿¡å·é‡çš„è®¸å¯ï¼ˆè°ƒç”¨ <code>Semaphore</code> å¯¹è±¡çš„ <code>acquire()</code> æ–¹æ³•ï¼‰ï¼›åœ¨å®Œæˆå¯¹èµ„æºçš„è®¿é—®åï¼Œçº¿ç¨‹å¿…é¡»å‘ä¿¡å·é‡å½’è¿˜è®¸å¯ï¼ˆè°ƒç”¨ <code>Semaphore</code> å¯¹è±¡çš„ <code>release()</code> æ–¹æ³•ï¼‰ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº† 100 ä¸ªçº¿ç¨‹åŒæ—¶å‘ä¸€ä¸ªé“¶è¡Œè´¦æˆ·ä¸­å­˜å…¥ 1 å…ƒé’±ï¼Œåœ¨æ²¡æœ‰ä½¿ç”¨åŒæ­¥æœºåˆ¶å’Œä½¿ç”¨åŒæ­¥æœºåˆ¶æƒ…å†µä¸‹çš„æ‰§è¡Œæƒ…å†µã€‚</p><p>é“¶è¡Œè´¦æˆ·ç±»ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * é“¶è¡Œè´¦æˆ· */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">double</span> balance<span class="token punctuation">;</span>       <span class="token comment">// è´¦æˆ·ä½™é¢</span>    <span class="token comment">/**     * å­˜æ¬¾     * @param money å­˜å…¥é‡‘é¢     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deposit</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">double</span> newBalance <span class="token operator">=</span> balance <span class="token operator">+</span> money<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// æ¨¡æ‹Ÿæ­¤ä¸šåŠ¡éœ€è¦ä¸€æ®µå¤„ç†æ—¶é—´</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        balance <span class="token operator">=</span> newBalance<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è·å¾—è´¦æˆ·ä½™é¢     */</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> balance<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å­˜é’±çº¿ç¨‹ç±» */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AddMoneyThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Account</span> account<span class="token punctuation">;</span>    <span class="token comment">// å­˜å…¥è´¦æˆ·</span>    <span class="token keyword">private</span> <span class="token keyword">double</span> money<span class="token punctuation">;</span>       <span class="token comment">// å­˜å…¥é‡‘é¢</span>    <span class="token keyword">public</span> <span class="token class-name">AddMoneyThread</span><span class="token punctuation">(</span><span class="token class-name">Account</span> account<span class="token punctuation">,</span> <span class="token keyword">double</span> money<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>account <span class="token operator">=</span> account<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>money <span class="token operator">=</span> money<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        account<span class="token punctuation">.</span><span class="token function">deposit</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// è°ƒç”¨å­˜æ¬¾æ–¹æ³•</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span><span class="token punctuation">;</span><span class="token comment">/** * æµ‹è¯•ç±» */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Account</span> account <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ExecutorService</span> service <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            service<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AddMoneyThread</span><span class="token punctuation">(</span>account<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>                service<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>service<span class="token punctuation">.</span><span class="token function">isTerminated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è´¦æˆ·ä½™é¢: "</span> <span class="token operator">+</span> account<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>åœ¨æ²¡æœ‰åŒæ­¥çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œç»“æœé€šå¸¸æ˜¯æ˜¾ç¤ºè´¦æˆ·ä½™é¢åœ¨ 10 å…ƒä»¥ä¸‹ï¼Œå‡ºç°è¿™ç§çŠ¶å†µçš„åŸå› æ˜¯ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹ A è¯•å›¾å­˜å…¥ 1 å…ƒçš„æ—¶å€™ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹ B ä¹Ÿèƒ½å¤Ÿè¿›å…¥å­˜æ¬¾çš„æ–¹æ³•ä¸­ï¼Œçº¿ç¨‹ B è¯»å–åˆ°çš„è´¦æˆ·ä½™é¢ä»ç„¶æ˜¯çº¿ç¨‹ A å­˜å…¥ 1 å…ƒé’±ä¹‹å‰çš„è´¦æˆ·ä½™é¢ï¼Œå› æ­¤ä¹Ÿæ˜¯åœ¨åŸæ¥çš„ä½™é¢ 0 ä¸Šé¢åšäº†åŠ  1 å…ƒçš„æ“ä½œï¼ŒåŒç†çº¿ç¨‹ C ä¹Ÿä¼šåšç±»ä¼¼çš„äº‹æƒ…ï¼Œæ‰€ä»¥æœ€å 100 ä¸ªçº¿ç¨‹æ‰§è¡Œç»“æŸæ—¶ï¼Œæœ¬æ¥æœŸæœ›è´¦æˆ·ä½™é¢ä¸º 100 å…ƒï¼Œä½†å®é™…å¾—åˆ°çš„é€šå¸¸åœ¨ 10 å…ƒä»¥ä¸‹ï¼ˆå¾ˆå¯èƒ½æ˜¯ 1 å…ƒå“¦ï¼‰ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å°±æ˜¯åŒæ­¥ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å¯¹é“¶è¡Œè´¦æˆ·å­˜é’±æ—¶ï¼Œéœ€è¦å°†æ­¤è´¦æˆ·é”å®šï¼Œå¾…å…¶æ“ä½œå®Œæˆåæ‰å…è®¸å…¶ä»–çš„çº¿ç¨‹è¿›è¡Œæ“ä½œï¼Œä»£ç æœ‰å¦‚ä¸‹å‡ ç§è°ƒæ•´æ–¹æ¡ˆï¼š</p><ol><li><p>åœ¨é“¶è¡Œè´¦æˆ·çš„å­˜æ¬¾ï¼ˆ<code>deposit</code>ï¼‰æ–¹æ³•ä¸ŠåŒæ­¥ï¼ˆ<code>synchronized</code>ï¼‰å…³é”®å­—</p><p> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*** é“¶è¡Œè´¦æˆ·*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">double</span> balance<span class="token punctuation">;</span>     <span class="token comment">// è´¦æˆ·ä½™é¢</span>    <span class="token comment">/**    * å­˜æ¬¾    * @param money å­˜å…¥é‡‘é¢    */</span>    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">deposit</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token comment">// åŠ ä¸ŠåŒæ­¥ï¼ˆsynchronizedï¼‰å…³é”®å­—</span>        <span class="token keyword">double</span> newBalance <span class="token operator">=</span> balance <span class="token operator">+</span> money<span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// æ¨¡æ‹Ÿæ­¤ä¸šåŠ¡éœ€è¦ä¸€æ®µå¤„ç†æ—¶é—´</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        balance <span class="token operator">=</span> newBalance<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**    * è·å¾—è´¦æˆ·ä½™é¢    */</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> balance<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>åœ¨çº¿ç¨‹è°ƒç”¨å­˜æ¬¾æ–¹æ³•æ—¶å¯¹é“¶è¡Œè´¦æˆ·è¿›è¡ŒåŒæ­¥</p><p> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*** å­˜é’±çº¿ç¨‹*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AddMoneyThread</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Account</span> account<span class="token punctuation">;</span>    <span class="token comment">// å­˜å…¥è´¦æˆ·</span>    <span class="token keyword">private</span> <span class="token keyword">double</span> money<span class="token punctuation">;</span>       <span class="token comment">// å­˜å…¥é‡‘é¢</span>    <span class="token keyword">public</span> <span class="token class-name">AddMoneyThread</span><span class="token punctuation">(</span><span class="token class-name">Account</span> account<span class="token punctuation">,</span> <span class="token keyword">double</span> money<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>account <span class="token operator">=</span> account<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>money <span class="token operator">=</span> money<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>account<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token comment">// åŠ ä¸ŠåŒæ­¥ï¼ˆsynchronizedï¼‰å…³é”®å­—</span>            account<span class="token punctuation">.</span><span class="token function">deposit</span><span class="token punctuation">(</span>money<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>é€šè¿‡ Java 5 æ˜¾ç¤ºçš„é”æœºåˆ¶ï¼Œä¸ºæ¯ä¸ªé“¶è¡Œè´¦æˆ·åˆ›å»ºä¸€ä¸ªé”å¯¹è±¡ï¼Œåœ¨å­˜æ¬¾æ“ä½œè¿›è¡ŒåŠ é”å’Œè§£é”çš„æ“ä½œ</p><p> <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks<span class="token punctuation">.</span></span><span class="token class-name">Lock</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks<span class="token punctuation">.</span></span><span class="token class-name">ReentrantLock</span><span class="token punctuation">;</span><span class="token comment">/*** é“¶è¡Œè´¦æˆ·*/</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">Lock</span> accountLock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">double</span> balance<span class="token punctuation">;</span> <span class="token comment">// è´¦æˆ·ä½™é¢</span>    <span class="token comment">/**    * å­˜å…¥é‡‘é¢    * @param money    */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deposit</span><span class="token punctuation">(</span><span class="token keyword">double</span> money<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        accountLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŠ é”</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">double</span> newBalance <span class="token operator">=</span> balance <span class="token operator">+</span> money<span class="token punctuation">;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¨¡æ‹Ÿæ­¤ä¸šåŠ¡éœ€è¦ä¸€æ®µå¤„ç†æ—¶é—´</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            balance <span class="token operator">=</span> newBalance<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            accountLock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è§£é”</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**    * è·å¾—è´¦æˆ·ä½™é¢    */</span>    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> balance<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æŒ‰ç…§ä¸Šè¿°ä¸‰ç§æ–¹å¼å¯¹ä»£ç è¿›è¡Œä¿®æ”¹åï¼Œé‡å†™æ‰§è¡Œæµ‹è¯•ä»£ç  Test01ï¼Œå°†çœ‹åˆ°æœ€ç»ˆçš„è´¦æˆ·ä½™é¢ä¸º 100 å…ƒã€‚å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>Semaphore</code> æˆ– <code>CountdownLatch</code> æ¥å®ç°åŒæ­¥ã€‚</p></li></ol><blockquote><h3 id="ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºæœ‰å‡ ç§å®ç°æ–¹å¼ï¼Ÿ"><a href="#ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºæœ‰å‡ ç§å®ç°æ–¹å¼ï¼Ÿ" class="headerlink" title="ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºæœ‰å‡ ç§å®ç°æ–¹å¼ï¼Ÿ"></a>ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºæœ‰å‡ ç§å®ç°æ–¹å¼ï¼Ÿ</h3></blockquote><p>ç­”ï¼šJava 5 ä»¥å‰å®ç°å¤šçº¿ç¨‹æœ‰ä¸¤ç§å®ç°æ–¹æ³•ï¼šä¸€ç§æ˜¯ç»§æ‰¿ <code>Thread</code> ç±»ï¼›å¦ä¸€ç§æ˜¯å®ç° <code>Runnable</code> æ¥å£ã€‚ä¸¤ç§æ–¹å¼éƒ½è¦é€šè¿‡é‡å†™ <code>run()</code> æ–¹æ³•æ¥å®šä¹‰çº¿ç¨‹çš„è¡Œä¸ºï¼Œæ¨èä½¿ç”¨åè€…ï¼Œå› ä¸º Java ä¸­çš„ç»§æ‰¿æ˜¯å•ç»§æ‰¿ï¼Œä¸€ä¸ªç±»æœ‰ä¸€ä¸ªçˆ¶ç±»ï¼Œå¦‚æœç»§æ‰¿äº† <code>Thread</code> ç±»å°±æ— æ³•å†ç»§æ‰¿å…¶ä»–ç±»äº†ï¼Œæ˜¾ç„¶ä½¿ç”¨ <code>Runnable</code> æ¥å£æ›´ä¸ºçµæ´»ã€‚</p><p><strong>è¡¥å……ï¼š</strong>Java 5 ä»¥ååˆ›å»ºçº¿ç¨‹è¿˜æœ‰ç¬¬ä¸‰ç§æ–¹å¼ï¼šå®ç° <code>Callable</code> æ¥å£ï¼Œè¯¥æ¥å£ä¸­çš„ <code>call</code> æ–¹æ³•å¯ä»¥åœ¨çº¿ç¨‹æ‰§è¡Œç»“æŸæ—¶äº§ç”Ÿä¸€ä¸ªè¿”å›å€¼ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Callable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">ExecutorService</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Executors</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">Future</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">MyTask</span> <span class="token keyword">implements</span> <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> upperBounds<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">MyTask</span><span class="token punctuation">(</span><span class="token keyword">int</span> upperBounds<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>upperBounds <span class="token operator">=</span> upperBounds<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>         <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> upperBounds<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            sum <span class="token operator">+=</span> i<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> sum<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Future</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ExecutorService</span> service <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>service<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyTask</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">int</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> future <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// while(!future.isDone()) ;</span>            sum <span class="token operator">+=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="synchronized-å…³é”®å­—çš„ç”¨æ³•ï¼Ÿ"><a href="#synchronized-å…³é”®å­—çš„ç”¨æ³•ï¼Ÿ" class="headerlink" title="synchronized å…³é”®å­—çš„ç”¨æ³•ï¼Ÿ"></a><code>synchronized</code> å…³é”®å­—çš„ç”¨æ³•ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>synchronized</code> å…³é”®å­—å¯ä»¥å°†å¯¹è±¡æˆ–è€…æ–¹æ³•æ ‡è®°ä¸º<strong>åŒæ­¥</strong>ï¼Œä»¥å®ç°å¯¹å¯¹è±¡å’Œæ–¹æ³•çš„äº’æ–¥è®¿é—®ï¼Œå¯ä»¥ç”¨ <code>synchronized(å¯¹è±¡) &#123; â€¦ &#125;</code> å®šä¹‰åŒæ­¥ä»£ç å—ï¼Œæˆ–è€…åœ¨å£°æ˜æ–¹æ³•æ—¶å°† <code>synchronized</code> ä½œä¸ºæ–¹æ³•çš„ä¿®é¥°ç¬¦ã€‚åœ¨ç¬¬ 60 é¢˜çš„ä¾‹å­ä¸­å·²ç»å±•ç¤ºäº† <code>synchronized</code> å…³é”®å­—çš„ç”¨æ³•ã€‚</p><blockquote><h3 id="ä¸¾ä¾‹è¯´æ˜åŒæ­¥å’Œå¼‚æ­¥ã€‚"><a href="#ä¸¾ä¾‹è¯´æ˜åŒæ­¥å’Œå¼‚æ­¥ã€‚" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜åŒæ­¥å’Œå¼‚æ­¥ã€‚"></a>ä¸¾ä¾‹è¯´æ˜åŒæ­¥å’Œå¼‚æ­¥ã€‚</h3></blockquote><p>ç­”ï¼šå¦‚æœç³»ç»Ÿä¸­å­˜åœ¨ä¸´ç•Œèµ„æºï¼ˆèµ„æºæ•°é‡å°‘äºç«äº‰èµ„æºçš„çº¿ç¨‹æ•°é‡çš„èµ„æºï¼‰ï¼Œä¾‹å¦‚æ­£åœ¨å†™çš„æ•°æ®ä»¥åå¯èƒ½è¢«å¦ä¸€ä¸ªçº¿ç¨‹è¯»åˆ°ï¼Œæˆ–è€…æ­£åœ¨è¯»çš„æ•°æ®å¯èƒ½å·²ç»è¢«å¦ä¸€ä¸ªçº¿ç¨‹å†™è¿‡äº†ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®å°±å¿…é¡»è¿›è¡ŒåŒæ­¥å­˜å–ï¼ˆæ•°æ®åº“æ“ä½œä¸­çš„æ’ä»–é”å°±æ˜¯æœ€å¥½çš„ä¾‹å­ï¼‰ã€‚å½“åº”ç”¨ç¨‹åºåœ¨å¯¹è±¡ä¸Šè°ƒç”¨äº†ä¸€ä¸ªéœ€è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´æ¥æ‰§è¡Œçš„æ–¹æ³•ï¼Œå¹¶ä¸”ä¸å¸Œæœ›è®©ç¨‹åºç­‰å¾…æ–¹æ³•çš„è¿”å›æ—¶ï¼Œå°±åº”è¯¥ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹ï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹é‡‡ç”¨å¼‚æ­¥é€”å¾„å¾€å¾€æ›´æœ‰æ•ˆç‡ã€‚äº‹å®ä¸Šï¼Œæ‰€è°“çš„åŒæ­¥å°±æ˜¯æŒ‡<strong>é˜»å¡å¼æ“ä½œ</strong>ï¼Œè€Œå¼‚æ­¥å°±æ˜¯<strong>éé˜»å¡å¼æ“ä½œ</strong>ã€‚</p><blockquote><h3 id="å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ˜¯è°ƒç”¨-run-è¿˜æ˜¯-start-æ–¹æ³•ï¼Ÿ"><a href="#å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ˜¯è°ƒç”¨-run-è¿˜æ˜¯-start-æ–¹æ³•ï¼Ÿ" class="headerlink" title="å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ˜¯è°ƒç”¨ run() è¿˜æ˜¯ start() æ–¹æ³•ï¼Ÿ"></a>å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ˜¯è°ƒç”¨ <code>run()</code> è¿˜æ˜¯ <code>start()</code> æ–¹æ³•ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ˜¯è°ƒç”¨ <code>start()</code> æ–¹æ³•ï¼Œä½¿çº¿ç¨‹æ‰€ä»£è¡¨çš„è™šæ‹Ÿå¤„ç†æœºå¤„äºå¯è¿è¡ŒçŠ¶æ€ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥ç”± JVM è°ƒåº¦å¹¶æ‰§è¡Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€çº¿ç¨‹å°±ä¼šç«‹å³è¿è¡Œã€‚<code>run()</code> æ–¹æ³•æ˜¯çº¿ç¨‹å¯åŠ¨åè¦è¿›è¡Œå›è°ƒï¼ˆcallbackï¼‰çš„æ–¹æ³•ã€‚</p><blockquote><h3 id="ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼ˆthread-poolï¼‰ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼ˆthread-poolï¼‰ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼ˆthread poolï¼‰ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼ˆthread poolï¼‰ï¼Ÿ</h3></blockquote><p>ç­”ï¼šåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œåˆ›å»ºå’Œé”€æ¯å¯¹è±¡æ˜¯å¾ˆè´¹æ—¶é—´çš„ï¼Œå› ä¸ºåˆ›å»ºä¸€ä¸ªå¯¹è±¡è¦è·å–å†…å­˜èµ„æºæˆ–è€…å…¶å®ƒæ›´å¤šèµ„æºã€‚åœ¨ Java ä¸­æ›´æ˜¯å¦‚æ­¤ï¼Œè™šæ‹Ÿæœºå°†è¯•å›¾è·Ÿè¸ªæ¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨å¯¹è±¡é”€æ¯åè¿›è¡Œåƒåœ¾å›æ”¶ã€‚æ‰€ä»¥æé«˜æœåŠ¡ç¨‹åºæ•ˆç‡çš„ä¸€ä¸ªæ‰‹æ®µå°±æ˜¯å°½å¯èƒ½å‡å°‘åˆ›å»ºå’Œé”€æ¯å¯¹è±¡çš„æ¬¡æ•°ï¼Œç‰¹åˆ«æ˜¯ä¸€äº›å¾ˆè€—èµ„æºçš„å¯¹è±¡åˆ›å»ºå’Œé”€æ¯ï¼Œè¿™å°±æ˜¯â€œæ± åŒ–èµ„æºâ€æŠ€æœ¯äº§ç”Ÿçš„åŸå› ã€‚çº¿ç¨‹æ± é¡¾åæ€ä¹‰å°±æ˜¯äº‹å…ˆåˆ›å»ºè‹¥å¹²ä¸ªå¯æ‰§è¡Œçš„çº¿ç¨‹æ”¾å…¥ä¸€ä¸ªæ± ï¼ˆå®¹å™¨ï¼‰ä¸­ï¼Œéœ€è¦çš„æ—¶å€™ä»æ± ä¸­è·å–çº¿ç¨‹ä¸ç”¨è‡ªè¡Œåˆ›å»ºï¼Œä½¿ç”¨å®Œæ¯•ä¸éœ€è¦é”€æ¯çº¿ç¨‹è€Œæ˜¯æ”¾å›æ± ä¸­ï¼Œä»è€Œå‡å°‘åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹å¯¹è±¡çš„å¼€é”€ã€‚</p><p>Java 5+ ä¸­çš„ <code>Executor</code> æ¥å£å®šä¹‰ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹çš„å·¥å…·ã€‚å®ƒçš„å­ç±»å‹å³çº¿ç¨‹æ± æ¥å£æ˜¯ <code>ExecutorService</code>ã€‚è¦é…ç½®ä¸€ä¸ªçº¿ç¨‹æ± æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºçº¿ç¨‹æ± çš„åŸç†ä¸æ˜¯å¾ˆæ¸…æ¥šçš„æƒ…å†µä¸‹ï¼Œå› æ­¤åœ¨å·¥å…·ç±» <code>Executors</code> é‡Œé¢æä¾›äº†ä¸€äº›é™æ€å·¥å‚æ–¹æ³•ï¼Œç”Ÿæˆä¸€äº›å¸¸ç”¨çš„çº¿ç¨‹æ± ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li><code>newSingleThreadExecutor</code>ï¼šåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ã€‚è¿™ä¸ªçº¿ç¨‹æ± åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å·¥ä½œï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºå•çº¿ç¨‹ä¸²è¡Œæ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ã€‚å¦‚æœè¿™ä¸ªå”¯ä¸€çš„çº¿ç¨‹å› ä¸ºå¼‚å¸¸ç»“æŸï¼Œé‚£ä¹ˆä¼šæœ‰ä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥æ›¿ä»£å®ƒã€‚æ­¤çº¿ç¨‹æ± ä¿è¯æ‰€æœ‰ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºæŒ‰ç…§ä»»åŠ¡çš„æäº¤é¡ºåºæ‰§è¡Œã€‚</li><li><code>newFixedThreadPool</code>ï¼šåˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ã€‚æ¯æ¬¡æäº¤ä¸€ä¸ªä»»åŠ¡å°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç›´åˆ°çº¿ç¨‹è¾¾åˆ°çº¿ç¨‹æ± çš„æœ€å¤§å¤§å°ã€‚çº¿ç¨‹æ± çš„å¤§å°ä¸€æ—¦è¾¾åˆ°æœ€å¤§å€¼å°±ä¼šä¿æŒä¸å˜ï¼Œå¦‚æœæŸä¸ªçº¿ç¨‹å› ä¸ºæ‰§è¡Œå¼‚å¸¸è€Œç»“æŸï¼Œé‚£ä¹ˆçº¿ç¨‹æ± ä¼šè¡¥å……ä¸€ä¸ªæ–°çº¿ç¨‹ã€‚</li><li><code>newCachedThreadPool</code>ï¼šåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çš„çº¿ç¨‹æ± ã€‚å¦‚æœçº¿ç¨‹æ± çš„å¤§å°è¶…è¿‡äº†å¤„ç†ä»»åŠ¡æ‰€éœ€è¦çš„çº¿ç¨‹ï¼Œé‚£ä¹ˆå°±ä¼šå›æ”¶éƒ¨åˆ†ç©ºé—²ï¼ˆ60 ç§’ä¸æ‰§è¡Œä»»åŠ¡ï¼‰çš„çº¿ç¨‹ï¼Œå½“ä»»åŠ¡æ•°å¢åŠ æ—¶ï¼Œæ­¤çº¿ç¨‹æ± åˆå¯ä»¥æ™ºèƒ½çš„æ·»åŠ æ–°çº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ã€‚æ­¤çº¿ç¨‹æ± ä¸ä¼šå¯¹çº¿ç¨‹æ± å¤§å°åšé™åˆ¶ï¼Œçº¿ç¨‹æ± å¤§å°å®Œå…¨ä¾èµ–äºæ“ä½œç³»ç»Ÿï¼ˆæˆ–è€…è¯´ JVMï¼‰èƒ½å¤Ÿåˆ›å»ºçš„æœ€å¤§çº¿ç¨‹å¤§å°ã€‚</li><li><code>newScheduledThreadPool</code>ï¼šåˆ›å»ºä¸€ä¸ªå¤§å°æ— é™çš„çº¿ç¨‹æ± ã€‚æ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚</li><li><code>newSingleThreadScheduledExecutor</code>ï¼šåˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹çš„çº¿ç¨‹æ± ã€‚æ­¤çº¿ç¨‹æ± æ”¯æŒå®šæ—¶ä»¥åŠå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡çš„éœ€æ±‚ã€‚</li></ul><p>ç¬¬ 60 é¢˜çš„ä¾‹å­ä¸­æ¼”ç¤ºäº†é€šè¿‡ <code>Executors</code> å·¥å…·ç±»åˆ›å»ºçº¿ç¨‹æ± å¹¶ä½¿ç”¨çº¿ç¨‹æ± æ‰§è¡Œçº¿ç¨‹çš„ä»£ç ã€‚å¦‚æœå¸Œæœ›åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨çº¿ç¨‹æ± ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨ <code>newFixedThreadPool</code> æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± ï¼Œè¿™æ ·èƒ½è·å¾—æ›´å¥½çš„æ€§èƒ½ã€‚</p><blockquote><h3 id="çº¿ç¨‹çš„åŸºæœ¬çŠ¶æ€ä»¥åŠçŠ¶æ€ä¹‹é—´çš„å…³ç³»ï¼Ÿ"><a href="#çº¿ç¨‹çš„åŸºæœ¬çŠ¶æ€ä»¥åŠçŠ¶æ€ä¹‹é—´çš„å…³ç³»ï¼Ÿ" class="headerlink" title="çº¿ç¨‹çš„åŸºæœ¬çŠ¶æ€ä»¥åŠçŠ¶æ€ä¹‹é—´çš„å…³ç³»ï¼Ÿ"></a>çº¿ç¨‹çš„åŸºæœ¬çŠ¶æ€ä»¥åŠçŠ¶æ€ä¹‹é—´çš„å…³ç³»ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/66.png" alt></p><p><strong>è¯´æ˜ï¼š</strong>å…¶ä¸­ <code>Running</code> è¡¨ç¤ºè¿è¡ŒçŠ¶æ€ï¼Œ<code>Runnable</code> è¡¨ç¤ºå°±ç»ªçŠ¶æ€ï¼ˆä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬  CPUï¼‰ï¼Œ<code>Blocked</code> è¡¨ç¤ºé˜»å¡çŠ¶æ€ï¼Œé˜»å¡çŠ¶æ€åˆæœ‰å¤šç§æƒ…å†µï¼Œå¯èƒ½æ˜¯å› ä¸ºè°ƒç”¨ <code>wait()</code> æ–¹æ³•è¿›å…¥ç­‰å¾…æ± ï¼Œä¹Ÿå¯èƒ½æ˜¯æ‰§è¡ŒåŒæ­¥æ–¹æ³•æˆ–åŒæ­¥ä»£ç å—è¿›å…¥ç­‰é”æ± ï¼Œæˆ–è€…æ˜¯è°ƒç”¨äº† <code>sleep()</code> æ–¹æ³•æˆ– <code>join()</code> æ–¹æ³•ç­‰å¾…ä¼‘çœ æˆ–å…¶ä»–çº¿ç¨‹ç»“æŸï¼Œæˆ–æ˜¯å› ä¸ºå‘ç”Ÿäº† I/O ä¸­æ–­ã€‚</p><blockquote><h3 id="ç®€è¿°-synchronized-å’Œ-java-util-concurrent-locks-Lock-çš„å¼‚åŒï¼Ÿ"><a href="#ç®€è¿°-synchronized-å’Œ-java-util-concurrent-locks-Lock-çš„å¼‚åŒï¼Ÿ" class="headerlink" title="ç®€è¿° synchronized å’Œ java.util.concurrent.locks.Lock çš„å¼‚åŒï¼Ÿ"></a>ç®€è¿° <code>synchronized</code> å’Œ <code>java.util.concurrent.locks.Lock</code> çš„å¼‚åŒï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>Lock</code> æ˜¯ Java 5 ä»¥åå¼•å…¥çš„æ–°çš„ APIï¼Œå’Œå…³é”®å­— <code>synchronized</code> ç›¸æ¯”ä¸»è¦ç›¸åŒç‚¹ï¼š<code>Lock</code> èƒ½å®Œæˆ <code>synchronized</code> æ‰€å®ç°çš„æ‰€æœ‰åŠŸèƒ½ï¼›ä¸»è¦ä¸åŒç‚¹ï¼š<code>Lock</code> æœ‰æ¯” <code>synchronized</code> æ›´ç²¾ç¡®çš„çº¿ç¨‹è¯­ä¹‰å’Œæ›´å¥½çš„æ€§èƒ½ï¼Œè€Œä¸”ä¸å¼ºåˆ¶æ€§çš„è¦æ±‚ä¸€å®šè¦è·å¾—é”ã€‚<code>synchronized</code> ä¼šè‡ªåŠ¨é‡Šæ”¾é”ï¼Œè€Œ <code>Lock</code> ä¸€å®šè¦æ±‚ç¨‹åºå‘˜æ‰‹å·¥é‡Šæ”¾ï¼Œå¹¶ä¸”æœ€å¥½åœ¨ <code>finally</code> å—ä¸­é‡Šæ”¾ï¼ˆè¿™æ˜¯é‡Šæ”¾å¤–éƒ¨èµ„æºçš„æœ€å¥½çš„åœ°æ–¹ï¼‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> â˜•Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java é¢è¯•é¢˜è§£æï¼ˆå®¹å™¨ï¼‰</title>
      <link href="post/d07acd09.html"/>
      <url>post/d07acd09.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="Listã€Setã€Map-æ˜¯å¦ç»§æ‰¿è‡ª-Collection-æ¥å£ï¼Ÿ"><a href="#Listã€Setã€Map-æ˜¯å¦ç»§æ‰¿è‡ª-Collection-æ¥å£ï¼Ÿ" class="headerlink" title="Listã€Setã€Map æ˜¯å¦ç»§æ‰¿è‡ª Collection æ¥å£ï¼Ÿ"></a><code>List</code>ã€<code>Set</code>ã€<code>Map</code> æ˜¯å¦ç»§æ‰¿è‡ª <code>Collection</code> æ¥å£ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>List</code>ã€<code>Set</code> æ˜¯ï¼Œ<code>Map</code> ä¸æ˜¯ã€‚<code>Map</code> æ˜¯é”®å€¼å¯¹æ˜ å°„å®¹å™¨ï¼Œä¸ <code>List</code> å’Œ <code>Set</code> æœ‰æ˜æ˜¾çš„åŒºåˆ«ï¼Œè€Œ <code>Set</code> å­˜å‚¨çš„é›¶æ•£çš„å…ƒç´ ä¸”ä¸å…è®¸æœ‰é‡å¤å…ƒç´ ï¼ˆæ•°å­¦ä¸­çš„é›†åˆä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ï¼Œ<code>List</code> æ˜¯çº¿æ€§ç»“æ„çš„å®¹å™¨ï¼Œé€‚ç”¨äºæŒ‰æ•°å€¼ç´¢å¼•è®¿é—®å…ƒç´ çš„æƒ…å½¢ã€‚</p><blockquote><h3 id="é˜è¿°-ArrayListã€Vectorã€LinkedList-çš„å­˜å‚¨æ€§èƒ½å’Œç‰¹æ€§ã€‚"><a href="#é˜è¿°-ArrayListã€Vectorã€LinkedList-çš„å­˜å‚¨æ€§èƒ½å’Œç‰¹æ€§ã€‚" class="headerlink" title="é˜è¿° ArrayListã€Vectorã€LinkedList çš„å­˜å‚¨æ€§èƒ½å’Œç‰¹æ€§ã€‚"></a>é˜è¿° <code>ArrayList</code>ã€<code>Vector</code>ã€<code>LinkedList</code> çš„å­˜å‚¨æ€§èƒ½å’Œç‰¹æ€§ã€‚</h3></blockquote><p>ç­”ï¼š</p><ul><li><p><code>ArrayList</code> å’Œ <code>Vector</code> éƒ½æ˜¯ä½¿ç”¨<strong>æ•°ç»„æ–¹å¼</strong>å­˜å‚¨æ•°æ®ï¼Œæ­¤æ•°ç»„å…ƒç´ æ•°å¤§äºå®é™…å­˜å‚¨çš„æ•°æ®ä»¥ä¾¿å¢åŠ å’Œæ’å…¥å…ƒç´ ï¼Œå®ƒä»¬éƒ½å…è®¸ç›´æ¥æŒ‰åºå·ç´¢å¼•å…ƒç´ ï¼Œä½†æ˜¯æ’å…¥å…ƒç´ è¦æ¶‰åŠæ•°ç»„å…ƒç´ ç§»åŠ¨ç­‰å†…å­˜æ“ä½œï¼Œæ‰€ä»¥ç´¢å¼•æ•°æ®å¿«è€Œæ’å…¥æ•°æ®æ…¢ï¼Œ<code>Vector</code> ä¸­çš„æ–¹æ³•ç”±äºæ·»åŠ äº† <code>synchronized</code> ä¿®é¥°ï¼Œå› æ­¤ <code>Vector</code> æ˜¯<strong>çº¿ç¨‹å®‰å…¨</strong>çš„å®¹å™¨ï¼Œä½†æ€§èƒ½ä¸Šè¾ƒ <code>ArrayList</code> å·®ï¼Œå› æ­¤å·²ç»æ˜¯ Java ä¸­çš„é—ç•™å®¹å™¨ã€‚</p></li><li><p><code>LinkedList</code> ä½¿ç”¨<strong>åŒå‘é“¾è¡¨</strong>å®ç°å­˜å‚¨ï¼ˆå°†å†…å­˜ä¸­é›¶æ•£çš„å†…å­˜å•å…ƒé€šè¿‡é™„åŠ çš„å¼•ç”¨å…³è”èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå¯ä»¥æŒ‰åºå·ç´¢å¼•çš„çº¿æ€§ç»“æ„ï¼Œè¿™ç§é“¾å¼å­˜å‚¨æ–¹å¼ä¸æ•°ç»„çš„è¿ç»­å­˜å‚¨æ–¹å¼ç›¸æ¯”ï¼Œå†…å­˜çš„åˆ©ç”¨ç‡æ›´é«˜ï¼‰ï¼ŒæŒ‰åºå·ç´¢å¼•æ•°æ®éœ€è¦è¿›è¡Œå‰å‘æˆ–åå‘éå†ï¼Œä½†æ˜¯æ’å…¥æ•°æ®æ—¶åªéœ€è¦è®°å½•æœ¬é¡¹çš„å‰åé¡¹å³å¯ï¼Œæ‰€ä»¥æ’å…¥é€Ÿåº¦è¾ƒå¿«ã€‚</p></li><li><p><code>Vector</code> å±äºé—ç•™å®¹å™¨ï¼ˆJava æ—©æœŸçš„ç‰ˆæœ¬ä¸­æä¾›çš„å®¹å™¨ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œ<code>Hashtable</code>ã€<code>Dictionary</code>ã€<code>BitSet</code>ã€<code>Stack</code>ã€<code>Properties</code> éƒ½æ˜¯é—ç•™å®¹å™¨ï¼‰ï¼Œå·²ç»ä¸æ¨èä½¿ç”¨ï¼Œä½†æ˜¯ç”±äº <code>ArrayList</code> å’Œ <code>LinkedListed</code> éƒ½æ˜¯<strong>éçº¿ç¨‹å®‰å…¨</strong>çš„ï¼Œå¦‚æœé‡åˆ°å¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€ä¸ªå®¹å™¨çš„åœºæ™¯ï¼Œåˆ™å¯ä»¥é€šè¿‡å·¥å…·ç±» <code>Collections</code> ä¸­çš„ <code>synchronizedList</code> æ–¹æ³•å°†å…¶è½¬æ¢æˆçº¿ç¨‹å®‰å…¨çš„å®¹å™¨åå†ä½¿ç”¨ï¼ˆè¿™æ˜¯å¯¹è£…æ½¢æ¨¡å¼çš„åº”ç”¨ï¼Œå°†å·²æœ‰å¯¹è±¡ä¼ å…¥å¦ä¸€ä¸ªç±»çš„æ„é€ å™¨ä¸­åˆ›å»ºæ–°çš„å¯¹è±¡æ¥å¢å¼ºå®ç°ï¼‰ã€‚</p></li></ul><p><strong>è¡¥å……ï¼š</strong>é—ç•™å®¹å™¨ä¸­çš„ <code>Properties</code> ç±»å’Œ <code>Stack</code> ç±»åœ¨è®¾è®¡ä¸Šæœ‰ä¸¥é‡çš„é—®é¢˜ï¼Œ<code>Properties</code> æ˜¯ä¸€ä¸ªé”®å’Œå€¼éƒ½æ˜¯å­—ç¬¦ä¸²çš„ç‰¹æ®Šçš„é”®å€¼å¯¹æ˜ å°„ï¼Œåœ¨è®¾è®¡ä¸Šåº”è¯¥æ˜¯å…³è”ä¸€ä¸ª <code>Hashtable</code> å¹¶å°†å…¶ä¸¤ä¸ªæ³›å‹å‚æ•°è®¾ç½®ä¸º <code>String</code> ç±»å‹ï¼Œä½†æ˜¯ Java API ä¸­çš„ <code>Properties</code> ç›´æ¥ç»§æ‰¿äº† <code>Hashtable</code>ï¼Œè¿™å¾ˆæ˜æ˜¾æ˜¯å¯¹ç»§æ‰¿çš„æ»¥ç”¨ã€‚è¿™é‡Œå¤ç”¨ä»£ç çš„æ–¹å¼åº”è¯¥æ˜¯ Has-A å…³ç³»è€Œä¸æ˜¯ Is-A å…³ç³»ï¼Œå¦ä¸€æ–¹é¢å®¹å™¨éƒ½å±äºå·¥å…·ç±»ï¼Œç»§æ‰¿å·¥å…·ç±»æœ¬èº«å°±æ˜¯ä¸€ä¸ªé”™è¯¯çš„åšæ³•ï¼Œä½¿ç”¨å·¥å…·ç±»æœ€å¥½çš„æ–¹å¼æ˜¯ Has-A å…³ç³»ï¼ˆå…³è”ï¼‰æˆ– Use-A å…³ç³»ï¼ˆä¾èµ–ï¼‰ã€‚åŒç†ï¼Œ<code>Stack</code> ç±»ç»§æ‰¿ <code>Vector</code> ä¹Ÿæ˜¯ä¸æ­£ç¡®çš„ã€‚Sun å…¬å¸çš„å·¥ç¨‹å¸ˆä»¬ä¹Ÿä¼šçŠ¯è¿™ç§ä½çº§é”™è¯¯ï¼Œè®©äººå”å˜˜ä¸å·²ã€‚</p><blockquote><h3 id="Collection-å’Œ-Collections-çš„åŒºåˆ«ï¼Ÿ"><a href="#Collection-å’Œ-Collections-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="Collection å’Œ Collections çš„åŒºåˆ«ï¼Ÿ"></a><code>Collection</code> å’Œ <code>Collections</code> çš„åŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>Collection</code> æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒæ˜¯ <code>Set</code>ã€<code>List</code> ç­‰å®¹å™¨çš„çˆ¶æ¥å£ï¼›<code>Collections</code> æ˜¯ä¸ªä¸€ä¸ªå·¥å…·ç±»ï¼Œæä¾›äº†ä¸€ç³»åˆ—çš„é™æ€æ–¹æ³•æ¥è¾…åŠ©å®¹å™¨æ“ä½œï¼Œè¿™äº›æ–¹æ³•åŒ…æ‹¬å¯¹å®¹å™¨çš„æœç´¢ã€æ’åºã€çº¿ç¨‹å®‰å…¨åŒ–ç­‰ç­‰ã€‚</p><blockquote><h3 id="Listã€Mapã€Set-ä¸‰ä¸ªæ¥å£å­˜å–å…ƒç´ æ—¶ï¼Œå„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"><a href="#Listã€Mapã€Set-ä¸‰ä¸ªæ¥å£å­˜å–å…ƒç´ æ—¶ï¼Œå„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="Listã€Mapã€Set ä¸‰ä¸ªæ¥å£å­˜å–å…ƒç´ æ—¶ï¼Œå„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"></a><code>List</code>ã€<code>Map</code>ã€<code>Set</code> ä¸‰ä¸ªæ¥å£å­˜å–å…ƒç´ æ—¶ï¼Œå„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>List</code> ä»¥ç‰¹å®šç´¢å¼•æ¥å­˜å–å…ƒç´ ï¼Œå¯ä»¥æœ‰é‡å¤å…ƒç´ ã€‚<code>Set</code> ä¸èƒ½å­˜æ”¾é‡å¤å…ƒç´ ï¼ˆç”¨å¯¹è±¡çš„ <code>equals()</code> æ–¹æ³•æ¥åŒºåˆ†å…ƒç´ æ˜¯å¦é‡å¤ï¼‰ã€‚<code>Map</code> ä¿å­˜é”®å€¼å¯¹ï¼ˆkey-value pairï¼‰æ˜ å°„ï¼Œæ˜ å°„å…³ç³»å¯ä»¥æ˜¯ä¸€å¯¹ä¸€æˆ–å¤šå¯¹ä¸€ã€‚<code>Set</code> å’Œ <code>Map</code> å®¹å™¨éƒ½æœ‰åŸºäºå“ˆå¸Œå­˜å‚¨å’Œæ’åºæ ‘çš„ä¸¤ç§å®ç°ç‰ˆæœ¬ï¼ŒåŸºäºå“ˆå¸Œå­˜å‚¨çš„ç‰ˆæœ¬ç†è®ºå­˜å–æ—¶é—´å¤æ‚åº¦ä¸º <code>O(1)</code>ï¼Œè€ŒåŸºäºæ’åºæ ‘ç‰ˆæœ¬çš„å®ç°åœ¨æ’å…¥æˆ–åˆ é™¤å…ƒç´ æ—¶ä¼šæŒ‰ç…§å…ƒç´ æˆ–å…ƒç´ çš„é”®ï¼ˆkeyï¼‰æ„æˆæ’åºæ ‘ä»è€Œè¾¾åˆ°æ’åºå’Œå»é‡çš„æ•ˆæœã€‚</p><blockquote><h3 id="TreeMap-å’Œ-TreeSet-åœ¨æ’åºæ—¶å¦‚ä½•æ¯”è¾ƒå…ƒç´ ï¼ŸCollectionså·¥å…·ç±»ä¸­çš„sort-æ–¹æ³•å¦‚ä½•æ¯”è¾ƒå…ƒç´ ï¼Ÿ"><a href="#TreeMap-å’Œ-TreeSet-åœ¨æ’åºæ—¶å¦‚ä½•æ¯”è¾ƒå…ƒç´ ï¼ŸCollectionså·¥å…·ç±»ä¸­çš„sort-æ–¹æ³•å¦‚ä½•æ¯”è¾ƒå…ƒç´ ï¼Ÿ" class="headerlink" title="TreeMap å’Œ TreeSet åœ¨æ’åºæ—¶å¦‚ä½•æ¯”è¾ƒå…ƒç´ ï¼ŸCollectionså·¥å…·ç±»ä¸­çš„sort()æ–¹æ³•å¦‚ä½•æ¯”è¾ƒå…ƒç´ ï¼Ÿ"></a><code>TreeMap</code> å’Œ <code>TreeSet</code> åœ¨æ’åºæ—¶å¦‚ä½•æ¯”è¾ƒå…ƒç´ ï¼Ÿ<code>Collections</code>å·¥å…·ç±»ä¸­çš„<code>sort()</code>æ–¹æ³•å¦‚ä½•æ¯”è¾ƒå…ƒç´ ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>TreeSet</code> è¦æ±‚å­˜æ”¾çš„å¯¹è±¡æ‰€å±çš„ç±»å¿…é¡»å®ç° <code>Comparable</code> æ¥å£ï¼Œè¯¥æ¥å£æä¾›äº†æ¯”è¾ƒå…ƒç´ çš„ <code>compareTo()</code> æ–¹æ³•ï¼Œå½“æ’å…¥å…ƒç´ æ—¶ä¼šå›è°ƒè¯¥æ–¹æ³•æ¯”è¾ƒå…ƒç´ çš„å¤§å°ã€‚<code>TreeMap</code> è¦æ±‚å­˜æ”¾çš„é”®å€¼å¯¹æ˜ å°„çš„é”®å¿…é¡»å®ç° <code>Comparable</code> æ¥å£ä»è€Œæ ¹æ®é”®å¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚<code>Collections</code> å·¥å…·ç±»çš„ <code>sort()</code> æ–¹æ³•æœ‰ä¸¤ç§é‡è½½çš„å½¢å¼ï¼Œç¬¬ä¸€ç§è¦æ±‚ä¼ å…¥çš„å¾…æ’åºå®¹å™¨ä¸­å­˜æ”¾çš„å¯¹è±¡æ¯”è¾ƒå®ç° <code>Comparable</code> æ¥å£ä»¥å®ç°å…ƒç´ çš„æ¯”è¾ƒï¼›ç¬¬äºŒç§ä¸å¼ºåˆ¶æ€§çš„è¦æ±‚å®¹å™¨ä¸­çš„å…ƒç´ å¿…é¡»å¯æ¯”è¾ƒï¼Œä½†æ˜¯è¦æ±‚ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå‚æ•°æ˜¯ <code>Comparator</code> æ¥å£çš„å­ç±»å‹ï¼ˆéœ€è¦é‡å†™ <code>compare</code> æ–¹æ³•å®ç°å…ƒç´ çš„æ¯”è¾ƒï¼‰ï¼Œç›¸å½“äºä¸€ä¸ªä¸´æ—¶å®šä¹‰çš„æ’åºè§„åˆ™ï¼Œå…¶å®å°±æ˜¯é€šè¿‡æ¥å£æ³¨å…¥æ¯”è¾ƒå…ƒç´ å¤§å°çš„ç®—æ³•ï¼Œä¹Ÿæ˜¯å¯¹å›è°ƒæ¨¡å¼çš„åº”ç”¨ï¼ˆJava ä¸­å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„æ”¯æŒï¼‰ã€‚ä¾‹å­1ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">implements</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>        <span class="token comment">// å§“å</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>            <span class="token comment">// å¹´é¾„</span>    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Student [name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">Student</span> o<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">-</span> o<span class="token punctuation">.</span>age<span class="token punctuation">;</span> <span class="token comment">// æ¯”è¾ƒå¹´é¾„(å¹´é¾„çš„å‡åº)</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Set</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">TreeSet</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Test01</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Java 7 çš„é’»çŸ³è¯­æ³•(æ„é€ å™¨åé¢çš„å°–æ‹¬å·ä¸­ä¸éœ€è¦å†™ç±»å‹)</span>        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"Hao LUO"</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"XJ WANG"</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"Bruce LEE"</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"Bob YANG"</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Student</span> stu <span class="token operator">:</span> set<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token comment">//      è¾“å‡ºç»“æœï¼š</span><span class="token comment">//      Student [name=Bob YANG, age=22]</span><span class="token comment">//      Student [name=XJ WANG, age=32]</span><span class="token comment">//      Student [name=Hao LUO, age=33]</span><span class="token comment">//      Student [name=Bruce LEE, age=60]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä¾‹å­2ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">// å§“å</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>        <span class="token comment">// å¹´é¾„</span>    <span class="token keyword">public</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è·å–å­¦ç”Ÿå§“å     */</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * è·å–å­¦ç”Ÿå¹´é¾„     */</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Student [name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Comparator</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Test02</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// Java 7çš„é’»çŸ³è¯­æ³•(æ„é€ å™¨åé¢çš„å°–æ‹¬å·ä¸­ä¸éœ€è¦å†™ç±»å‹)</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"Hao LUO"</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"XJ WANG"</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"Bruce LEE"</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"Bob YANG"</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é€šè¿‡ sort æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ª Comparator æ¥å£å¯¹è±¡</span>        <span class="token comment">// ç›¸å½“äºæ˜¯ä¼ å…¥ä¸€ä¸ªæ¯”è¾ƒå¯¹è±¡å¤§å°çš„ç®—æ³•åˆ° sort æ–¹æ³•ä¸­</span>        <span class="token comment">// ç”±äº Java ä¸­æ²¡æœ‰å‡½æ•°æŒ‡é’ˆã€ä»¿å‡½æ•°ã€å§”æ‰˜è¿™æ ·çš„æ¦‚å¿µ</span>        <span class="token comment">// å› æ­¤è¦å°†ä¸€ä¸ªç®—æ³•ä¼ å…¥ä¸€ä¸ªæ–¹æ³•ä¸­å”¯ä¸€çš„é€‰æ‹©å°±æ˜¯é€šè¿‡æ¥å£å›è°ƒ</span>        <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">></span></span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">Student</span> o1<span class="token punctuation">,</span> <span class="token class-name">Student</span> o2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">return</span> o1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>o2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ¯”è¾ƒå­¦ç”Ÿå§“å</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Student</span> stu <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token comment">//      è¾“å‡ºç»“æœ: </span><span class="token comment">//      Student [name=Bob YANG, age=22]</span><span class="token comment">//      Student [name=Bruce LEE, age=60]</span><span class="token comment">//      Student [name=Hao LUO, age=33]</span><span class="token comment">//      Student [name=XJ WANG, age=32]</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> â˜•Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java é¢è¯•é¢˜è§£æï¼ˆåŸºç¡€ï¼‰</title>
      <link href="post/11ea51ea.html"/>
      <url>post/11ea51ea.html</url>
      
        <content type="html"><![CDATA[<blockquote><h3 id="é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢ï¼Ÿ"><a href="#é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢ï¼Ÿ" class="headerlink" title="é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢ï¼Ÿ"></a>é¢å‘å¯¹è±¡çš„ç‰¹å¾æœ‰å“ªäº›æ–¹é¢ï¼Ÿ</h3></blockquote><p>ç­”ï¼šé¢å‘å¯¹è±¡çš„ç‰¹å¾ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ul><li><p>æŠ½è±¡ï¼šæŠ½è±¡æ˜¯å°†ä¸€ç±»å¯¹è±¡çš„å…±åŒç‰¹å¾æ€»ç»“å‡ºæ¥æ„é€ ç±»çš„è¿‡ç¨‹ï¼ŒåŒ…æ‹¬<strong>æ•°æ®æŠ½è±¡</strong>å’Œ<strong>è¡Œä¸ºæŠ½è±¡</strong>ä¸¤æ–¹é¢ã€‚æŠ½è±¡åªå…³æ³¨å¯¹è±¡æœ‰å“ªäº›å±æ€§å’Œè¡Œä¸ºï¼Œå¹¶ä¸å…³æ³¨è¿™äº›è¡Œä¸ºçš„ç»†èŠ‚æ˜¯ä»€ä¹ˆã€‚</p></li><li><p>ç»§æ‰¿ï¼šç»§æ‰¿æ˜¯ä»å·²æœ‰ç±»å¾—åˆ°ç»§æ‰¿ä¿¡æ¯åˆ›å»ºæ–°ç±»çš„è¿‡ç¨‹ã€‚æä¾›ç»§æ‰¿ä¿¡æ¯çš„ç±»è¢«ç§°ä¸ºçˆ¶ç±»ï¼ˆè¶…ç±»ã€åŸºç±»ï¼‰ï¼›å¾—åˆ°ç»§æ‰¿ä¿¡æ¯çš„ç±»è¢«ç§°ä¸ºå­ç±»ï¼ˆæ´¾ç”Ÿç±»ï¼‰ã€‚ç»§æ‰¿è®©å˜åŒ–ä¸­çš„è½¯ä»¶ç³»ç»Ÿæœ‰äº†ä¸€å®šçš„å»¶ç»­æ€§ï¼ŒåŒæ—¶ç»§æ‰¿ä¹Ÿæ˜¯å°è£…ç¨‹åºä¸­å¯å˜å› ç´ çš„é‡è¦æ‰‹æ®µã€‚</p></li><li><p>å°è£…ï¼šé€šå¸¸è®¤ä¸ºå°è£…æ˜¯æŠŠæ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•ç»‘å®šèµ·æ¥ï¼Œå¯¹æ•°æ®çš„è®¿é—®åªèƒ½é€šè¿‡å·²å®šä¹‰çš„æ¥å£ã€‚é¢å‘å¯¹è±¡çš„æœ¬è´¨å°±æ˜¯å°†ç°å®ä¸–ç•Œæç»˜æˆä¸€ç³»åˆ—å®Œå…¨è‡ªæ²»ã€å°é—­çš„å¯¹è±¡ã€‚æˆ‘ä»¬åœ¨ç±»ä¸­ç¼–å†™çš„æ–¹æ³•å°±æ˜¯å¯¹å®ç°ç»†èŠ‚çš„ä¸€ç§å°è£…ï¼›æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç±»å°±æ˜¯å¯¹æ•°æ®å’Œæ•°æ®æ“ä½œçš„å°è£…ã€‚å¯ä»¥è¯´ï¼Œå°è£…å°±æ˜¯éšè—ä¸€åˆ‡å¯éšè—çš„ä¸œè¥¿ï¼Œåªå‘å¤–ç•Œæä¾›æœ€ç®€å•çš„ç¼–ç¨‹æ¥å£ï¼ˆå¯ä»¥æƒ³æƒ³æ™®é€šæ´—è¡£æœºå’Œå…¨è‡ªåŠ¨æ´—è¡£æœºçš„å·®åˆ«ï¼Œæ˜æ˜¾å…¨è‡ªåŠ¨æ´—è¡£æœºå°è£…æ›´å¥½å› æ­¤æ“ä½œèµ·æ¥æ›´ç®€å•ï¼›æˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„æ™ºèƒ½æ‰‹æœºä¹Ÿæ˜¯å°è£…å¾—è¶³å¤Ÿå¥½çš„ï¼Œå› ä¸ºå‡ ä¸ªæŒ‰é”®å°±æå®šäº†æ‰€æœ‰çš„äº‹æƒ…ï¼‰ã€‚</p></li><li><p>å¤šæ€æ€§ï¼šå¤šæ€æ€§æ˜¯æŒ‡å…è®¸ä¸åŒå­ç±»å‹çš„å¯¹è±¡å¯¹åŒä¸€æ¶ˆæ¯ä½œå‡ºä¸åŒçš„å“åº”ã€‚ç®€å•çš„è¯´å°±æ˜¯ç”¨åŒæ ·çš„å¯¹è±¡å¼•ç”¨è°ƒç”¨åŒæ ·çš„æ–¹æ³•ä½†æ˜¯åšäº†ä¸åŒçš„äº‹æƒ…ã€‚å¤šæ€æ€§åˆ†ä¸º<strong>ç¼–è¯‘æ—¶çš„å¤šæ€æ€§</strong>å’Œ<strong>è¿è¡Œæ—¶çš„å¤šæ€æ€§</strong>ã€‚å¦‚æœå°†å¯¹è±¡çš„æ–¹æ³•è§†ä¸ºå¯¹è±¡å‘å¤–ç•Œæä¾›çš„æœåŠ¡ï¼Œé‚£ä¹ˆè¿è¡Œæ—¶çš„å¤šæ€æ€§å¯ä»¥è§£é‡Šä¸ºï¼šå½“ A ç³»ç»Ÿè®¿é—® B ç³»ç»Ÿæä¾›çš„æœåŠ¡æ—¶ï¼ŒB ç³»ç»Ÿæœ‰å¤šç§æä¾›æœåŠ¡çš„æ–¹å¼ï¼Œä½†ä¸€åˆ‡å¯¹ A ç³»ç»Ÿæ¥è¯´éƒ½æ˜¯é€æ˜çš„ï¼ˆå°±åƒç”µåŠ¨å‰ƒé¡»åˆ€æ˜¯ A ç³»ç»Ÿï¼Œå®ƒçš„ä¾›ç”µç³»ç»Ÿæ˜¯ B ç³»ç»Ÿï¼ŒB ç³»ç»Ÿå¯ä»¥ä½¿ç”¨ç”µæ± ä¾›ç”µæˆ–è€…ç”¨äº¤æµç”µï¼Œç”šè‡³è¿˜æœ‰å¯èƒ½æ˜¯å¤ªé˜³èƒ½ï¼ŒA ç³»ç»Ÿåªä¼šé€šè¿‡ B ç±»å¯¹è±¡è°ƒç”¨ä¾›ç”µçš„æ–¹æ³•ï¼Œä½†å¹¶ä¸çŸ¥é“ä¾›ç”µç³»ç»Ÿçš„åº•å±‚å®ç°æ˜¯ä»€ä¹ˆï¼Œç©¶ç«Ÿé€šè¿‡ä½•ç§æ–¹å¼è·å¾—äº†åŠ¨åŠ›ï¼‰ã€‚</p><ul><li><strong>æ–¹æ³•é‡è½½</strong>ï¼ˆ<code>overload</code>ï¼‰å®ç°çš„æ˜¯ç¼–è¯‘æ—¶çš„å¤šæ€æ€§ï¼ˆä¹Ÿç§°ä¸ºå‰ç»‘å®šï¼‰ï¼Œè€Œ<strong>æ–¹æ³•é‡å†™</strong>ï¼ˆ<code>override</code>ï¼‰å®ç°çš„æ˜¯è¿è¡Œæ—¶çš„å¤šæ€æ€§ï¼ˆä¹Ÿç§°ä¸ºåç»‘å®šï¼‰ã€‚</li><li>è¿è¡Œæ—¶çš„å¤šæ€æ˜¯é¢å‘å¯¹è±¡æœ€ç²¾é«“çš„ä¸œè¥¿ï¼Œè¦å®ç°å¤šæ€éœ€è¦åšä¸¤ä»¶äº‹ï¼š<ol><li>æ–¹æ³•é‡å†™ï¼ˆå­ç±»ç»§æ‰¿çˆ¶ç±»å¹¶é‡å†™çˆ¶ç±»ä¸­å·²æœ‰çš„æˆ–æŠ½è±¡çš„æ–¹æ³•ï¼‰ï¼›</li><li>å¯¹è±¡é€ å‹ï¼ˆç”¨çˆ¶ç±»å‹å¼•ç”¨å¼•ç”¨å­ç±»å‹å¯¹è±¡ï¼Œè¿™æ ·åŒæ ·çš„å¼•ç”¨è°ƒç”¨åŒæ ·çš„æ–¹æ³•å°±ä¼šæ ¹æ®å­ç±»å¯¹è±¡çš„ä¸åŒè€Œè¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºï¼‰ã€‚</li></ol></li></ul></li></ul><blockquote><h3 id="è®¿é—®ä¿®é¥°ç¬¦-publicã€privateã€protectedã€ä»¥åŠä¸å†™ï¼ˆé»˜è®¤ï¼‰æ—¶çš„åŒºåˆ«ï¼Ÿ"><a href="#è®¿é—®ä¿®é¥°ç¬¦-publicã€privateã€protectedã€ä»¥åŠä¸å†™ï¼ˆé»˜è®¤ï¼‰æ—¶çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="è®¿é—®ä¿®é¥°ç¬¦ publicã€privateã€protectedã€ä»¥åŠä¸å†™ï¼ˆé»˜è®¤ï¼‰æ—¶çš„åŒºåˆ«ï¼Ÿ"></a>è®¿é—®ä¿®é¥°ç¬¦ <code>public</code>ã€<code>private</code>ã€<code>protected</code>ã€ä»¥åŠä¸å†™ï¼ˆé»˜è®¤ï¼‰æ—¶çš„åŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><div class="table-container"><table><thead><tr><th>ä¿®é¥°ç¬¦</th><th>å½“å‰ç±»</th><th>åŒåŒ…</th><th>å­ç±»</th><th>å…¶ä»–åŒ…</th></tr></thead><tbody><tr><td>public</td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>protected</td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td>Ã—</td></tr><tr><td>default</td><td>âˆš</td><td>âˆš</td><td>Ã—</td><td>Ã—</td></tr><tr><td>private</td><td>âˆš</td><td>Ã—</td><td>Ã—</td><td>Ã—</td></tr></tbody></table></div><p>ç±»çš„æˆå‘˜ä¸å†™è®¿é—®ä¿®é¥°æ—¶é»˜è®¤ä¸º <code>default</code>ã€‚é»˜è®¤å¯¹äºåŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»ç›¸å½“äºå…¬å¼€ï¼ˆ<code>public</code>ï¼‰ï¼Œå¯¹äºä¸æ˜¯åŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»ç›¸å½“äºç§æœ‰ï¼ˆ<code>private</code>ï¼‰ã€‚å—ä¿æŠ¤ï¼ˆ<code>protected</code>ï¼‰å¯¹å­ç±»ç›¸å½“äºå…¬å¼€ï¼Œå¯¹ä¸æ˜¯åŒä¸€åŒ…ä¸­çš„æ²¡æœ‰çˆ¶å­å…³ç³»çš„ç±»ç›¸å½“äºç§æœ‰ã€‚Java ä¸­ï¼Œå¤–éƒ¨ç±»çš„ä¿®é¥°ç¬¦åªèƒ½æ˜¯ <code>public</code> æˆ–é»˜è®¤ï¼Œç±»çš„æˆå‘˜ï¼ˆåŒ…æ‹¬å†…éƒ¨ç±»ï¼‰çš„ä¿®é¥°ç¬¦å¯ä»¥æ˜¯ä»¥ä¸Šå››ç§ã€‚</p><blockquote><h3 id="String-æ˜¯æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹å—ï¼Ÿ"><a href="#String-æ˜¯æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹å—ï¼Ÿ" class="headerlink" title="String æ˜¯æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹å—ï¼Ÿ"></a><code>String</code> æ˜¯æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹å—ï¼Ÿ</h3></blockquote><p>ç­”ï¼šä¸æ˜¯ã€‚Java ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹åªæœ‰ 8 ä¸ªï¼š<code>byte</code>ã€<code>short</code>ã€<code>int</code>ã€<code>long</code>ã€<code>float</code>ã€<code>double</code>ã€<code>char</code>ã€<code>boolean</code>ï¼›é™¤äº†åŸºæœ¬ç±»å‹ï¼ˆprimitive typeï¼‰ï¼Œå‰©ä¸‹çš„éƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼ˆreference typeï¼‰ï¼ŒJava 5 ä»¥åå¼•å…¥çš„æšä¸¾ç±»å‹ï¼ˆenumï¼‰ä¹Ÿç®—æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„å¼•ç”¨ç±»å‹ã€‚</p><blockquote><h3 id="float-f-3-4-æ˜¯å¦æ­£ç¡®ï¼Ÿ"><a href="#float-f-3-4-æ˜¯å¦æ­£ç¡®ï¼Ÿ" class="headerlink" title="float f = 3.4; æ˜¯å¦æ­£ç¡®ï¼Ÿ"></a><code>float f = 3.4;</code> æ˜¯å¦æ­£ç¡®ï¼Ÿ</h3></blockquote><p>ç­”ï¼šä¸æ­£ç¡®ã€‚3.4 æ˜¯åŒç²¾åº¦æ•°ï¼Œå°†åŒç²¾åº¦å‹ï¼ˆ<code>double</code>ï¼‰èµ‹å€¼ç»™æµ®ç‚¹å‹ï¼ˆ<code>float</code>ï¼‰å±äº<strong>ä¸‹è½¬å‹</strong>ï¼ˆdown-castingï¼Œä¹Ÿç§°ä¸ºçª„åŒ–ï¼‰ä¼šé€ æˆ<strong>ç²¾åº¦æŸå¤±</strong>ï¼Œå› æ­¤éœ€è¦<strong>å¼ºåˆ¶ç±»å‹è½¬æ¢</strong> <code>float f = (float)3.4;</code> æˆ–è€…å†™æˆ <code>float f = 3.4F</code>;ã€‚</p><blockquote><h3 id="short-s1-1-s1-s1-1-æœ‰é”™å—ï¼Ÿshort-s1-1-s1-1-æœ‰é”™å—ï¼Ÿ"><a href="#short-s1-1-s1-s1-1-æœ‰é”™å—ï¼Ÿshort-s1-1-s1-1-æœ‰é”™å—ï¼Ÿ" class="headerlink" title="short s1 = 1; s1 = s1 + 1; æœ‰é”™å—ï¼Ÿshort s1 = 1; s1 += 1; æœ‰é”™å—ï¼Ÿ"></a><code>short s1 = 1; s1 = s1 + 1;</code> æœ‰é”™å—ï¼Ÿ<code>short s1 = 1; s1 += 1;</code> æœ‰é”™å—ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¯¹äº <code>short s1 = 1; s1 = s1 + 1;</code> ç”±äº 1 æ˜¯ <code>int</code> ç±»å‹ï¼Œå› æ­¤ <code>s1 + 1</code> è¿ç®—ç»“æœä¹Ÿæ˜¯ <code>int</code> å‹ï¼Œéœ€è¦å¼ºåˆ¶è½¬æ¢ç±»å‹æ‰èƒ½èµ‹å€¼ç»™ <code>short</code> å‹ã€‚è€Œ <code>short s1 = 1; s1 += 1;</code> å¯ä»¥æ­£ç¡®ç¼–è¯‘ï¼Œå› ä¸º <code>s1 += 1;</code> ç›¸å½“äº <code>s1 = (short)(s1 + 1);</code> å…¶ä¸­æœ‰éšå«çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p><blockquote><h3 id="Java-æœ‰æ²¡æœ‰-gotoï¼Ÿ"><a href="#Java-æœ‰æ²¡æœ‰-gotoï¼Ÿ" class="headerlink" title="Java æœ‰æ²¡æœ‰ gotoï¼Ÿ"></a>Java æœ‰æ²¡æœ‰ <code>goto</code>ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>goto</code> æ˜¯ Java ä¸­çš„<strong>ä¿ç•™å­—</strong>ï¼Œåœ¨ç›®å‰ç‰ˆæœ¬çš„ Java ä¸­æ²¡æœ‰ä½¿ç”¨ã€‚ï¼ˆæ ¹æ®James Goslingï¼ˆJavaä¹‹çˆ¶ï¼‰ç¼–å†™çš„ã€ŠThe Java Programming Languageã€‹ä¸€ä¹¦çš„é™„å½•ä¸­ç»™å‡ºäº†ä¸€ä¸ª Java å…³é”®å­—åˆ—è¡¨ï¼Œå…¶ä¸­æœ‰ <code>goto</code> å’Œ <code>const</code>ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ˜¯ç›®å‰æ— æ³•ä½¿ç”¨çš„å…³é”®å­—ï¼Œå› æ­¤æœ‰äº›åœ°æ–¹å°†å…¶ç§°ä¹‹ä¸ºä¿ç•™å­—ï¼Œå…¶å®ä¿ç•™å­—è¿™ä¸ªè¯åº”è¯¥æœ‰æ›´å¹¿æ³›çš„æ„ä¹‰ï¼Œå› ä¸ºç†Ÿæ‚‰ C è¯­è¨€çš„ç¨‹åºå‘˜éƒ½çŸ¥é“ï¼Œåœ¨ç³»ç»Ÿç±»åº“ä¸­ä½¿ç”¨è¿‡çš„æœ‰ç‰¹æ®Šæ„ä¹‰çš„å•è¯æˆ–å•è¯çš„ç»„åˆéƒ½è¢«è§†ä¸ºä¿ç•™å­—ï¼‰ã€‚</p><blockquote><h3 id="int-å’Œ-Integer-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#int-å’Œ-Integer-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="int å’Œ Integer æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a><code>int</code> å’Œ <code>Integer</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼šJava æ˜¯ä¸€ä¸ªè¿‘ä¹çº¯æ´çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œä½†æ˜¯ä¸ºäº†ç¼–ç¨‹çš„æ–¹ä¾¿è¿˜æ˜¯å¼•å…¥äº†åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ä¸ºäº†èƒ½å¤Ÿå°†è¿™äº›åŸºæœ¬æ•°æ®ç±»å‹å½“æˆå¯¹è±¡æ“ä½œï¼ŒJava ä¸ºæ¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹éƒ½å¼•å…¥äº†å¯¹åº”çš„åŒ…è£…ç±»å‹ï¼ˆwrapper classï¼‰ï¼Œ<code>int</code> çš„åŒ…è£…ç±»å°±æ˜¯ <code>Integer</code>ï¼Œä» Java 5 å¼€å§‹å¼•å…¥äº†<strong>è‡ªåŠ¨è£…ç®± / æ‹†ç®±</strong>æœºåˆ¶ï¼Œä½¿å¾—äºŒè€…å¯ä»¥ç›¸äº’è½¬æ¢ã€‚</p><p>Java ä¸ºæ¯ä¸ªåŸå§‹ç±»å‹æä¾›äº†åŒ…è£…ç±»å‹ï¼š</p><ul><li>åŸå§‹ç±»å‹ï¼š<code>boolean</code>ï¼Œ<code>char</code>ï¼Œ<code>byte</code>ï¼Œ<code>short</code>ï¼Œ<code>int</code>ï¼Œ<code>long</code>ï¼Œ<code>float</code>ï¼Œ<code>double</code>ã€‚</li><li>åŒ…è£…ç±»å‹ï¼š<code>Boolean</code>ï¼Œ<code>Character</code>ï¼Œ<code>Byte</code>ï¼Œ<code>Short</code>ï¼Œ<code>Integer</code>ï¼Œ<code>Long</code>ï¼Œ<code>Float</code>ï¼Œ<code>Double</code>ã€‚</li></ul><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">AutoUnboxingTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Integer</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Integer</span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>                  <span class="token comment">// å°† 3 è‡ªåŠ¨è£…ç®±æˆIntegerç±»å‹</span>        <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// false ä¸¤ä¸ªå¼•ç”¨æ²¡æœ‰å¼•ç”¨åŒä¸€å¯¹è±¡</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a <span class="token operator">==</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// true a è‡ªåŠ¨æ‹†ç®±æˆ int ç±»å‹å†å’Œ c æ¯”è¾ƒ</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æœ€è¿‘è¿˜é‡åˆ°ä¸€ä¸ªé¢è¯•é¢˜ï¼Œä¹Ÿæ˜¯å’Œè‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±æœ‰ç‚¹å…³ç³»çš„ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// æ•´å‹å­—é¢é‡çš„å€¼åœ¨ -128 åˆ° 127 ä¹‹é—´ç›´æ¥å¼•ç”¨å¸¸é‡æ± ä¸­çš„ Integer å¯¹è±¡ï¼Œå¦åˆ™ new æ–°çš„ Integer å¯¹è±¡</span>        <span class="token class-name">Integer</span> f1 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> f2 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> f3 <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">,</span> f4 <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f1 <span class="token operator">==</span> f2<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// true ç›´æ¥å¼•ç”¨å¸¸é‡æ± ä¸­çš„ Integer å¯¹è±¡</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>f3 <span class="token operator">==</span> f4<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// false ä¸¤ä¸ªå¼•ç”¨æ²¡æœ‰å¼•ç”¨åŒä¸€å¯¹è±¡</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å¦‚æœä¸æ˜å°±é‡Œå¾ˆå®¹æ˜“è®¤ä¸ºä¸¤ä¸ªè¾“å‡ºè¦ä¹ˆéƒ½æ˜¯ <code>true</code> è¦ä¹ˆéƒ½æ˜¯ <code>false</code>ã€‚é¦–å…ˆéœ€è¦æ³¨æ„çš„æ˜¯ <code>f1</code>ã€<code>f2</code>ã€<code>f3</code>ã€<code>f4</code> å››ä¸ªå˜é‡éƒ½æ˜¯ <code>Integer</code> å¯¹è±¡å¼•ç”¨ï¼Œæ‰€ä»¥ä¸‹é¢çš„ <code>==</code> è¿ç®—æ¯”è¾ƒçš„ä¸æ˜¯å€¼è€Œæ˜¯å¼•ç”¨ã€‚è£…ç®±çš„æœ¬è´¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå½“æˆ‘ä»¬ç»™ä¸€ä¸ª <code>Integer</code> å¯¹è±¡èµ‹ä¸€ä¸ª <code>int</code> å€¼çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ <code>Integer</code> ç±»çš„é™æ€æ–¹æ³• <code>valueOf</code>ï¼Œå¦‚æœçœ‹çœ‹ <code>valueOf</code> çš„æºä»£ç å°±çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Integer</span> <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">>=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>low<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><code>IntegerCache</code> æ˜¯ <code>Integer</code> çš„å†…éƒ¨ç±»ï¼Œå…¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**  * Cache to support the object identity semantics of autoboxing for values between  * -128 and 127 (inclusive) as required by JLS.  *  * The cache is initialized on first usage.  The size of the cache  * may be controlled by the &#123;@code -XX:AutoBoxCacheMax=&lt;size>&#125; option.  * During VM initialization, java.lang.Integer.IntegerCache.high property  * may be set and saved in the private system properties in the  * sun.misc.VM class.  */</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">IntegerCache</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> low <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">128</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> high<span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> cache<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// high value may be configured by property</span>        <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">127</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> integerCacheHighPropValue <span class="token operator">=</span>            sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span>VM<span class="token punctuation">.</span><span class="token function">getSavedProperty</span><span class="token punctuation">(</span><span class="token string">"java.lang.Integer.IntegerCache.high"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>integerCacheHighPropValue <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>integerCacheHighPropValue<span class="token punctuation">)</span><span class="token punctuation">;</span>                i <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// Maximum array size is Integer.MAX_VALUE</span>                h <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token operator">-</span>low<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span> <span class="token class-name">NumberFormatException</span> nfe<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// If the property cannot be parsed into an int, ignore it.</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        high <span class="token operator">=</span> h<span class="token punctuation">;</span>        cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">(</span>high <span class="token operator">-</span> low<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> low<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> cache<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>            cache<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span>        <span class="token keyword">assert</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">.</span>high <span class="token operator">>=</span> <span class="token number">127</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token class-name">IntegerCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ç®€å•çš„è¯´ï¼Œå¦‚æœæ•´å‹å­—é¢é‡çš„å€¼åœ¨ <code>-128</code> åˆ° <code>127</code> ä¹‹é—´ï¼Œé‚£ä¹ˆä¸ä¼š <code>new</code> æ–°çš„ <code>Integer</code> å¯¹è±¡ï¼Œè€Œæ˜¯ç›´æ¥å¼•ç”¨å¸¸é‡æ± ä¸­çš„ <code>Integer</code> å¯¹è±¡ï¼Œæ‰€ä»¥ä¸Šé¢çš„é¢è¯•é¢˜ä¸­ <code>f1 == f2</code> çš„ç»“æœæ˜¯ <code>true</code>ï¼Œè€Œ <code>f3==f4</code> çš„ç»“æœæ˜¯ <code>false</code>ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>è¶Šæ˜¯è²Œä¼¼ç®€å•çš„é¢è¯•é¢˜å…¶ä¸­çš„ç„æœºå°±è¶Šå¤šï¼Œéœ€è¦é¢è¯•è€…æœ‰ç›¸å½“æ·±åšçš„åŠŸåŠ›ã€‚</p><blockquote><h3 id="amp-å’Œ-amp-amp-çš„åŒºåˆ«ï¼Ÿ"><a href="#amp-å’Œ-amp-amp-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="&amp; å’Œ &amp;&amp; çš„åŒºåˆ«ï¼Ÿ"></a><code>&amp;</code> å’Œ <code>&amp;&amp;</code> çš„åŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>&amp;</code> è¿ç®—ç¬¦æœ‰ä¸¤ç§ç”¨æ³•ï¼š(1)<strong>æŒ‰ä½ä¸</strong>ï¼›(2)<strong>é€»è¾‘ä¸</strong>ã€‚<code>&amp;&amp;</code> è¿ç®—ç¬¦æ˜¯<strong>çŸ­è·¯ä¸</strong>è¿ç®—ã€‚é€»è¾‘ä¸è·ŸçŸ­è·¯ä¸çš„å·®åˆ«æ˜¯éå¸¸å·¨å¤§çš„ï¼Œè™½ç„¶äºŒè€…éƒ½è¦æ±‚è¿ç®—ç¬¦å·¦å³ä¸¤ç«¯çš„å¸ƒå°”å€¼éƒ½æ˜¯ <code>true</code> æ•´ä¸ªè¡¨è¾¾å¼çš„å€¼æ‰æ˜¯ <code>true</code>ã€‚<code>&amp;&amp;</code> ä¹‹æ‰€ä»¥ç§°ä¸ºçŸ­è·¯è¿ç®—æ˜¯å› ä¸ºï¼Œå¦‚æœ <code>&amp;&amp;</code> å·¦è¾¹çš„è¡¨è¾¾å¼çš„å€¼æ˜¯ <code>false</code>ï¼Œå³è¾¹çš„è¡¨è¾¾å¼ä¼šè¢«ç›´æ¥çŸ­è·¯æ‰ï¼Œä¸ä¼šè¿›è¡Œè¿ç®—ã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¯èƒ½éƒ½éœ€è¦ç”¨ <code>&amp;&amp;</code> è€Œä¸æ˜¯ <code>&amp;</code>ï¼Œä¾‹å¦‚åœ¨éªŒè¯ç”¨æˆ·ç™»å½•æ—¶åˆ¤å®šç”¨æˆ·åä¸æ˜¯ <code>null</code> è€Œä¸”ä¸æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œåº”å½“å†™ä¸ºï¼š<code>username != null &amp;&amp;!username.equals(&quot;&quot;)</code>ï¼ŒäºŒè€…çš„é¡ºåºä¸èƒ½äº¤æ¢ï¼Œæ›´ä¸èƒ½ç”¨ <code>&amp;</code> è¿ç®—ç¬¦ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæ¡ä»¶å¦‚æœä¸æˆç«‹ï¼Œæ ¹æœ¬ä¸èƒ½è¿›è¡Œå­—ç¬¦ä¸²çš„ <code>equals</code> æ¯”è¾ƒï¼Œå¦åˆ™ä¼šäº§ç”Ÿ <code>NullPointerException</code> å¼‚å¸¸ã€‚<strong>æ³¨æ„ï¼š</strong>é€»è¾‘æˆ–è¿ç®—ç¬¦ï¼ˆ<code>|</code>ï¼‰å’ŒçŸ­è·¯æˆ–è¿ç®—ç¬¦ï¼ˆ<code>||</code>ï¼‰çš„å·®åˆ«ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p><strong>è¡¥å……ï¼š</strong>å¦‚æœä½ ç†Ÿæ‚‰ JavaScriptï¼Œé‚£ä½ å¯èƒ½æ›´èƒ½æ„Ÿå—åˆ°çŸ­è·¯è¿ç®—çš„å¼ºå¤§ï¼Œæƒ³æˆä¸º JavaScript çš„é«˜æ‰‹å°±å…ˆä»ç©è½¬çŸ­è·¯è¿ç®—å¼€å§‹å§ã€‚</p><blockquote><h3 id="è§£é‡Šå†…å­˜ä¸­çš„æ ˆï¼ˆstackï¼‰ã€å †ï¼ˆheapï¼‰å’Œæ–¹æ³•åŒºï¼ˆmethod-areaï¼‰çš„ç”¨æ³•ã€‚"><a href="#è§£é‡Šå†…å­˜ä¸­çš„æ ˆï¼ˆstackï¼‰ã€å †ï¼ˆheapï¼‰å’Œæ–¹æ³•åŒºï¼ˆmethod-areaï¼‰çš„ç”¨æ³•ã€‚" class="headerlink" title="è§£é‡Šå†…å­˜ä¸­çš„æ ˆï¼ˆstackï¼‰ã€å †ï¼ˆheapï¼‰å’Œæ–¹æ³•åŒºï¼ˆmethod areaï¼‰çš„ç”¨æ³•ã€‚"></a>è§£é‡Šå†…å­˜ä¸­çš„æ ˆï¼ˆstackï¼‰ã€å †ï¼ˆheapï¼‰å’Œæ–¹æ³•åŒºï¼ˆmethod areaï¼‰çš„ç”¨æ³•ã€‚</h3></blockquote><p>ç­”ï¼šé€šå¸¸æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡ï¼Œä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œè¿˜æœ‰å°±æ˜¯å‡½æ•°è°ƒç”¨çš„ç°åœºä¿å­˜éƒ½ä½¿ç”¨ JVM ä¸­çš„æ ˆç©ºé—´ï¼›è€Œé€šè¿‡ <code>new</code> å…³é”®å­—å’Œæ„é€ å™¨åˆ›å»ºçš„å¯¹è±¡åˆ™æ”¾åœ¨å †ç©ºé—´ï¼Œå †æ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸï¼Œç”±äºç°åœ¨çš„åƒåœ¾æ”¶é›†å™¨éƒ½é‡‡ç”¨åˆ†ä»£æ”¶é›†ç®—æ³•ï¼Œæ‰€ä»¥å †ç©ºé—´è¿˜å¯ä»¥ç»†åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ï¼Œå†å…·ä½“ä¸€ç‚¹å¯ä»¥åˆ†ä¸º Edenã€Survivorï¼ˆåˆå¯åˆ†ä¸º From Survivor å’Œ To Survivorï¼‰ã€Tenuredï¼›æ–¹æ³•åŒºå’Œå †éƒ½æ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨å·²ç»è¢« JVM åŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€JIT ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ï¼›ç¨‹åºä¸­çš„å­—é¢é‡ï¼ˆliteralï¼‰å¦‚ç›´æ¥ä¹¦å†™çš„ <code>100</code>ã€<code>&quot;hello&quot;</code> å’Œå¸¸é‡éƒ½æ˜¯æ”¾åœ¨å¸¸é‡æ± ä¸­ï¼Œå¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚æ ˆç©ºé—´æ“ä½œèµ·æ¥æœ€å¿«ä½†æ˜¯æ ˆå¾ˆå°ï¼Œé€šå¸¸å¤§é‡çš„å¯¹è±¡éƒ½æ˜¯æ”¾åœ¨å †ç©ºé—´ï¼Œæ ˆå’Œå †çš„å¤§å°éƒ½å¯ä»¥é€šè¿‡ JVM çš„å¯åŠ¨å‚æ•°æ¥è¿›è¡Œè°ƒæ•´ï¼Œæ ˆç©ºé—´ç”¨å…‰äº†ä¼šå¼•å‘ <code>StackOverflowError</code>ï¼Œè€Œå †å’Œå¸¸é‡æ± ç©ºé—´ä¸è¶³åˆ™ä¼šå¼•å‘ <code>OutOfMemoryError</code>ã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä¸Šé¢çš„è¯­å¥ä¸­å˜é‡ <code>str</code> æ”¾åœ¨æ ˆä¸Šï¼Œç”¨ <code>new</code> åˆ›å»ºå‡ºæ¥çš„å­—ç¬¦ä¸²å¯¹è±¡æ”¾åœ¨å †ä¸Šï¼Œè€Œ <code>&quot;hello&quot;</code> è¿™ä¸ªå­—é¢é‡æ˜¯æ”¾åœ¨æ–¹æ³•åŒºçš„ã€‚</p><p><strong>è¡¥å……1ï¼š</strong>è¾ƒæ–°ç‰ˆæœ¬çš„ Javaï¼ˆä» Java 6 çš„æŸä¸ªæ›´æ–°å¼€å§‹ï¼‰ä¸­ï¼Œç”±äº JIT ç¼–è¯‘å™¨çš„å‘å±•å’Œâ€œé€ƒé€¸åˆ†æâ€æŠ€æœ¯çš„é€æ¸æˆç†Ÿï¼Œæ ˆä¸Šåˆ†é…ã€æ ‡é‡æ›¿æ¢ç­‰ä¼˜åŒ–æŠ€æœ¯ä½¿å¾—å¯¹è±¡ä¸€å®šåˆ†é…åœ¨å †ä¸Šè¿™ä»¶äº‹æƒ…å·²ç»å˜å¾—ä¸é‚£ä¹ˆç»å¯¹äº†ã€‚</p><p><strong>è¡¥å……2ï¼š</strong>è¿è¡Œæ—¶å¸¸é‡æ± ç›¸å½“äº Class æ–‡ä»¶å¸¸é‡æ± å…·æœ‰åŠ¨æ€æ€§ï¼ŒJava è¯­è¨€å¹¶ä¸è¦æ±‚å¸¸é‡ä¸€å®šåªæœ‰ç¼–è¯‘æœŸé—´æ‰èƒ½äº§ç”Ÿï¼Œè¿è¡ŒæœŸé—´ä¹Ÿå¯ä»¥å°†æ–°çš„å¸¸é‡æ”¾å…¥æ± ä¸­ï¼Œ<code>String</code> ç±»çš„ <code>intern()</code> æ–¹æ³•å°±æ˜¯è¿™æ ·çš„ã€‚</p><p>çœ‹çœ‹ä¸‹é¢ä»£ç çš„æ‰§è¡Œç»“æœæ˜¯ä»€ä¹ˆå¹¶ä¸”æ¯”è¾ƒä¸€ä¸‹ Java 7 ä»¥å‰å’Œä»¥åçš„è¿è¡Œç»“æœæ˜¯å¦ä¸€è‡´ã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token string">"go"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"od"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">intern</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> s1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token string">"ja"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"va"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s2<span class="token punctuation">.</span><span class="token function">intern</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="Math-round-11-5-ç­‰äºå¤šå°‘ï¼ŸMath-round-11-5-ç­‰äºå¤šå°‘ï¼Ÿ"><a href="#Math-round-11-5-ç­‰äºå¤šå°‘ï¼ŸMath-round-11-5-ç­‰äºå¤šå°‘ï¼Ÿ" class="headerlink" title="Math.round(11.5) ç­‰äºå¤šå°‘ï¼ŸMath.round(-11.5) ç­‰äºå¤šå°‘ï¼Ÿ"></a><code>Math.round(11.5)</code> ç­‰äºå¤šå°‘ï¼Ÿ<code>Math.round(-11.5)</code> ç­‰äºå¤šå°‘ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>Math.round(11.5)</code> çš„è¿”å›å€¼æ˜¯ <code>12</code>ï¼Œ<code>Math.round(-11.5)</code> çš„è¿”å›å€¼æ˜¯ <code>-11</code>ã€‚å››èˆäº”å…¥çš„åŸç†æ˜¯åœ¨å‚æ•°ä¸ŠåŠ  <code>0.5</code> ç„¶åè¿›è¡Œä¸‹å–æ•´ã€‚</p><blockquote><h3 id="switch-æ˜¯å¦èƒ½ä½œç”¨åœ¨-byte-ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨-long-ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨-String-ä¸Šï¼Ÿ"><a href="#switch-æ˜¯å¦èƒ½ä½œç”¨åœ¨-byte-ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨-long-ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨-String-ä¸Šï¼Ÿ" class="headerlink" title="switch æ˜¯å¦èƒ½ä½œç”¨åœ¨ byte ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨ long ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨ String ä¸Šï¼Ÿ"></a><code>switch</code> æ˜¯å¦èƒ½ä½œç”¨åœ¨ <code>byte</code> ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨ <code>long</code> ä¸Šï¼Œæ˜¯å¦èƒ½ä½œç”¨åœ¨ <code>String</code> ä¸Šï¼Ÿ</h3></blockquote><p>ç­”ï¼šåœ¨ Java 5 ä»¥å‰ï¼Œ<code>switch(expr)</code> ä¸­ï¼Œ<code>expr</code> åªèƒ½æ˜¯ <code>byte</code>ã€<code>short</code>ã€<code>char</code>ã€<code>int</code>ã€‚ä» Java 5 å¼€ å§‹ï¼ŒJava ä¸­å¼•å…¥äº†æšä¸¾ç±»å‹ï¼Œ<code>expr</code> ä¹Ÿå¯ä»¥æ˜¯ <code>enum</code> ç±»å‹ï¼Œä» Java 7 å¼€å§‹ï¼Œ<code>expr</code> è¿˜å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼ˆ<code>String</code>ï¼‰ï¼Œä½†æ˜¯é•¿æ•´å‹ï¼ˆ<code>long</code>ï¼‰åœ¨ç›®å‰æ‰€æœ‰çš„ç‰ˆæœ¬ä¸­éƒ½æ˜¯ä¸å¯ä»¥çš„ã€‚</p><blockquote><h3 id="ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•è®¡ç®—-2-ä¹˜ä»¥-8ï¼Ÿ"><a href="#ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•è®¡ç®—-2-ä¹˜ä»¥-8ï¼Ÿ" class="headerlink" title="ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•è®¡ç®— 2 ä¹˜ä»¥ 8ï¼Ÿ"></a>ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹æ³•è®¡ç®— 2 ä¹˜ä»¥ 8ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>2 &lt;&lt; 3</code>ï¼ˆå·¦ç§» 3 ä½ç›¸å½“äºä¹˜ä»¥ 2 çš„ 3 æ¬¡æ–¹ï¼Œå³ç§»3ä½ç›¸å½“äºé™¤ä»¥ 2 çš„ 3 æ¬¡æ–¹ï¼‰ã€‚</p><p><strong>è¡¥å……ï¼š</strong>æˆ‘ä»¬ä¸ºç¼–å†™çš„ç±»é‡å†™ <code>hashCode</code> æ–¹æ³•æ—¶ï¼Œå¯èƒ½ä¼šçœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ï¼Œå…¶å®æˆ‘ä»¬ä¸å¤ªç†è§£ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™æ ·çš„ä¹˜æ³•è¿ç®—æ¥äº§ç”Ÿå“ˆå¸Œç ï¼ˆæ•£åˆ—ç ï¼‰ï¼Œè€Œä¸”ä¸ºä»€ä¹ˆè¿™ä¸ªæ•°æ˜¯ä¸ªç´ æ•°ï¼Œä¸ºä»€ä¹ˆé€šå¸¸é€‰æ‹© 31 è¿™ä¸ªæ•°ï¼Ÿå‰ä¸¤ä¸ªé—®é¢˜çš„ç­”æ¡ˆä½ å¯ä»¥è‡ªå·±ç™¾åº¦ä¸€ä¸‹ï¼Œé€‰æ‹© 31 æ˜¯å› ä¸ºå¯ä»¥ç”¨ç§»ä½å’Œå‡æ³•è¿ç®—æ¥ä»£æ›¿ä¹˜æ³•ï¼Œä»è€Œå¾—åˆ°æ›´å¥½çš„æ€§èƒ½ã€‚è¯´åˆ°è¿™é‡Œä½ å¯èƒ½å·²ç»æƒ³åˆ°äº†ï¼š<code>31 * num</code> ç­‰ä»·äº <code>(num &lt;&lt; 5) - num</code>ï¼Œå·¦ç§» 5 ä½ç›¸å½“äºä¹˜ä»¥ 2 çš„ 5 æ¬¡æ–¹å†å‡å»è‡ªèº«å°±ç›¸å½“äºä¹˜ä»¥ 31ï¼Œç°åœ¨çš„ JVM éƒ½èƒ½è‡ªåŠ¨å®Œæˆè¿™ä¸ªä¼˜åŒ–ã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PhoneNumber</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> areaCode<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> prefix<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> lineNumber<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">final</span> <span class="token keyword">int</span> prime <span class="token operator">=</span> <span class="token number">31</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        result <span class="token operator">=</span> prime <span class="token operator">*</span> result <span class="token operator">+</span> areaCode<span class="token punctuation">;</span>        result <span class="token operator">=</span> prime <span class="token operator">*</span> result                <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>lineNumber <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> lineNumber<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        result <span class="token operator">=</span> prime <span class="token operator">*</span> result <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>prefix <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> prefix<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> obj<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token class-name">PhoneNumber</span> other <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">PhoneNumber</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>areaCode <span class="token operator">!=</span> other<span class="token punctuation">.</span>areaCode<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>lineNumber <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>other<span class="token punctuation">.</span>lineNumber <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lineNumber<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>lineNumber<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>prefix <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>other<span class="token punctuation">.</span>prefix <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>prefix<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>other<span class="token punctuation">.</span>prefix<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="æ•°ç»„æœ‰æ²¡æœ‰-length-æ–¹æ³•ï¼ŸString-æœ‰æ²¡æœ‰-length-æ–¹æ³•ï¼Ÿ"><a href="#æ•°ç»„æœ‰æ²¡æœ‰-length-æ–¹æ³•ï¼ŸString-æœ‰æ²¡æœ‰-length-æ–¹æ³•ï¼Ÿ" class="headerlink" title="æ•°ç»„æœ‰æ²¡æœ‰ length() æ–¹æ³•ï¼ŸString æœ‰æ²¡æœ‰ length() æ–¹æ³•ï¼Ÿ"></a>æ•°ç»„æœ‰æ²¡æœ‰ <code>length()</code> æ–¹æ³•ï¼ŸString æœ‰æ²¡æœ‰ <code>length()</code> æ–¹æ³•ï¼Ÿ</h3></blockquote><p>ç­”ï¼šæ•°ç»„æ²¡æœ‰ <code>length()</code> æ–¹æ³•ï¼Œæœ‰ <code>length</code> çš„å±æ€§ã€‚<code>String</code> æœ‰ <code>length()</code> æ–¹æ³•ã€‚<code>JavaScript</code> ä¸­ï¼Œè·å¾—å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯é€šè¿‡ <code>length</code> å±æ€§å¾—åˆ°çš„ï¼Œè¿™ä¸€ç‚¹å®¹æ˜“å’Œ Java æ··æ·†ã€‚</p><blockquote><h3 id="åœ¨-Java-ä¸­ï¼Œå¦‚ä½•è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯ï¼Ÿ"><a href="#åœ¨-Java-ä¸­ï¼Œå¦‚ä½•è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯ï¼Ÿ" class="headerlink" title="åœ¨ Java ä¸­ï¼Œå¦‚ä½•è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯ï¼Ÿ"></a>åœ¨ Java ä¸­ï¼Œå¦‚ä½•è·³å‡ºå½“å‰çš„å¤šé‡åµŒå¥—å¾ªç¯ï¼Ÿ</h3></blockquote><p>ç­”ï¼šåœ¨æœ€å¤–å±‚å¾ªç¯å‰åŠ ä¸€ä¸ªæ ‡è®°å¦‚ <code>A</code>ï¼Œç„¶åç”¨ <code>break A;</code> å¯ä»¥è·³å‡ºå¤šé‡å¾ªç¯ã€‚ï¼ˆJava ä¸­æ”¯æŒå¸¦æ ‡ç­¾çš„ <code>break</code> å’Œ <code>continue</code> è¯­å¥ï¼Œä½œç”¨æœ‰ç‚¹ç±»ä¼¼äº C å’Œ C++ ä¸­çš„ <code>goto</code> è¯­å¥ï¼Œä½†æ˜¯å°±åƒè¦é¿å…ä½¿ç”¨ <code>goto</code> ä¸€æ ·ï¼Œåº”è¯¥é¿å…ä½¿ç”¨å¸¦æ ‡ç­¾çš„ <code>break</code> å’Œ <code>continue</code>ï¼Œå› ä¸ºå®ƒä¸ä¼šè®©ä½ çš„ç¨‹åºå˜å¾—æ›´ä¼˜é›…ï¼Œå¾ˆå¤šæ—¶å€™ç”šè‡³æœ‰ç›¸åçš„ä½œç”¨ï¼Œæ‰€ä»¥è¿™ç§è¯­æ³•å…¶å®ä¸çŸ¥é“æ›´å¥½ï¼‰</p><blockquote><h3 id="æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰ï¼Ÿ"><a href="#æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰ï¼Ÿ" class="headerlink" title="æ„é€ å™¨ï¼ˆconstructorï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆoverrideï¼‰ï¼Ÿ"></a>æ„é€ å™¨ï¼ˆ<code>constructor</code>ï¼‰æ˜¯å¦å¯è¢«é‡å†™ï¼ˆ<code>override</code>ï¼‰ï¼Ÿ</h3></blockquote><p>ç­”ï¼šæ„é€ å™¨ä¸èƒ½è¢«ç»§æ‰¿ï¼Œå› æ­¤ä¸èƒ½è¢«é‡å†™ï¼Œä½†å¯ä»¥è¢«é‡è½½ã€‚</p><blockquote><h3 id="ä¸¤ä¸ªå¯¹è±¡å€¼ç›¸åŒ-x-equals-y-true-ï¼Œä½†å´å¯æœ‰ä¸åŒçš„-hash-codeï¼Œè¿™å¥è¯å¯¹ä¸å¯¹ï¼Ÿ"><a href="#ä¸¤ä¸ªå¯¹è±¡å€¼ç›¸åŒ-x-equals-y-true-ï¼Œä½†å´å¯æœ‰ä¸åŒçš„-hash-codeï¼Œè¿™å¥è¯å¯¹ä¸å¯¹ï¼Ÿ" class="headerlink" title="ä¸¤ä¸ªå¯¹è±¡å€¼ç›¸åŒ (x.equals(y) == true)ï¼Œä½†å´å¯æœ‰ä¸åŒçš„ hash codeï¼Œè¿™å¥è¯å¯¹ä¸å¯¹ï¼Ÿ"></a>ä¸¤ä¸ªå¯¹è±¡å€¼ç›¸åŒ (<code>x.equals(y) == true</code>)ï¼Œä½†å´å¯æœ‰ä¸åŒçš„ <code>hash code</code>ï¼Œè¿™å¥è¯å¯¹ä¸å¯¹ï¼Ÿ</h3></blockquote><p>ç­”ï¼šä¸å¯¹ï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡ <code>x</code> å’Œ <code>y</code> æ»¡è¶³ <code>x.equals(y) == true</code>ï¼Œå®ƒä»¬çš„å“ˆå¸Œç ï¼ˆhash codeï¼‰åº”å½“ç›¸åŒã€‚Java å¯¹äº <code>eqauls</code> æ–¹æ³•å’Œ <code>hashCode</code> æ–¹æ³•æ˜¯è¿™æ ·è§„å®šçš„ï¼š</p><ol><li>å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸åŒï¼ˆ<code>equals</code> æ–¹æ³•è¿”å› <code>true</code>ï¼‰ï¼Œé‚£ä¹ˆå®ƒä»¬çš„ <code>hashCode</code> å€¼ä¸€å®šè¦ç›¸åŒï¼›</li><li>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„ <code>hashCode</code> ç›¸åŒï¼Œå®ƒä»¬å¹¶ä¸ä¸€å®šç›¸åŒã€‚</li></ol><p>å½“ç„¶ï¼Œä½ æœªå¿…è¦æŒ‰ç…§è¦æ±‚å»åšï¼Œä½†æ˜¯å¦‚æœä½ è¿èƒŒäº†ä¸Šè¿°åŸåˆ™å°±ä¼šå‘ç°åœ¨ä½¿ç”¨å®¹å™¨æ—¶ï¼Œç›¸åŒçš„å¯¹è±¡å¯ä»¥å‡ºç°åœ¨ <code>Set</code> é›†åˆä¸­ï¼ŒåŒæ—¶å¢åŠ æ–°å…ƒç´ çš„æ•ˆç‡ä¼šå¤§å¤§ä¸‹é™ï¼ˆå¯¹äºä½¿ç”¨å“ˆå¸Œå­˜å‚¨çš„ç³»ç»Ÿï¼Œå¦‚æœå“ˆå¸Œç é¢‘ç¹çš„å†²çªå°†ä¼šé€ æˆå­˜å–æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼‰ã€‚</p><p><strong>è¡¥å……ï¼š</strong>å…³äº <code>equals</code> å’Œ <code>hashCode</code> æ–¹æ³•ï¼Œå¾ˆå¤š Java ç¨‹åºå‘˜éƒ½çŸ¥é“ï¼Œä½†å¾ˆå¤šäººä¹Ÿå°±æ˜¯ä»…ä»…çŸ¥é“è€Œå·²ï¼Œåœ¨ Joshua Bloch çš„å¤§ä½œã€ŠEffective Javaã€‹ï¼ˆå¾ˆå¤šè½¯ä»¶å…¬å¸ï¼Œã€ŠEffective Javaã€‹ã€ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹ä»¥åŠã€Šé‡æ„ï¼šæ”¹å–„æ—¢æœ‰ä»£ç è´¨é‡ã€‹æ˜¯ Java ç¨‹åºå‘˜å¿…çœ‹ä¹¦ç±ï¼Œå¦‚æœä½ è¿˜æ²¡çœ‹è¿‡ï¼Œé‚£å°±èµ¶ç´§å»äºšé©¬é€Šä¹°ä¸€æœ¬å§ï¼‰ä¸­æ˜¯è¿™æ ·ä»‹ç» <code>equals</code> æ–¹æ³•çš„ï¼šé¦–å…ˆ <code>equals</code> æ–¹æ³•å¿…é¡»æ»¡è¶³<strong>è‡ªåæ€§</strong>ï¼ˆ<code>x.equals(x)</code> å¿…é¡»è¿”å› <code>true</code>ï¼‰ã€<strong>å¯¹ç§°æ€§</strong>ï¼ˆ <code>x.equals(y)</code> è¿”å› <code>true</code> æ—¶ï¼Œ<code>y.equals(x)</code> ä¹Ÿå¿…é¡»è¿”å› <code>true</code>ï¼‰ã€<strong>ä¼ é€’æ€§</strong>ï¼ˆ<code>x.equals(y)</code> å’Œ <code>y.equals(z)</code> éƒ½è¿”å› <code>true</code> æ—¶ï¼Œ<code>x.equals(z)</code> ä¹Ÿå¿…é¡»è¿”å› <code>true</code>ï¼‰å’Œ<strong>ä¸€è‡´æ€§</strong>ï¼ˆå½“ <code>x</code> å’Œ <code>y</code> å¼•ç”¨çš„å¯¹è±¡ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹æ—¶ï¼Œå¤šæ¬¡è°ƒç”¨ <code>x.equals(y)</code> åº”è¯¥å¾—åˆ°åŒæ ·çš„è¿”å›å€¼ï¼‰ï¼Œè€Œä¸”å¯¹äºä»»ä½•é <code>null</code> å€¼çš„å¼•ç”¨ <code>x</code>ï¼Œ<code>x.equals(null)</code> å¿…é¡»è¿”å› <code>false</code>ã€‚å®ç°é«˜è´¨é‡çš„ <code>equals</code> æ–¹æ³•çš„è¯€çªåŒ…æ‹¬ï¼š</p><ol><li>ä½¿ç”¨ <code>==</code> æ“ä½œç¬¦æ£€æŸ¥â€œå‚æ•°æ˜¯å¦ä¸ºè¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨â€ï¼›</li><li>ä½¿ç”¨ <code>instanceof</code> æ“ä½œç¬¦æ£€æŸ¥â€œå‚æ•°æ˜¯å¦ä¸ºæ­£ç¡®çš„ç±»å‹â€ï¼›</li><li>å¯¹äºç±»ä¸­çš„å…³é”®å±æ€§ï¼Œæ£€æŸ¥å‚æ•°ä¼ å…¥å¯¹è±¡çš„å±æ€§æ˜¯å¦ä¸ä¹‹ç›¸åŒ¹é…ï¼›</li><li>ç¼–å†™å®Œ <code>equals</code> æ–¹æ³•åï¼Œé—®è‡ªå·±å®ƒæ˜¯å¦æ»¡è¶³å¯¹ç§°æ€§ã€ä¼ é€’æ€§ã€ä¸€è‡´æ€§ï¼›</li><li>é‡å†™ <code>equals</code> æ—¶æ€»æ˜¯è¦é‡å†™ <code>hashCode</code>ï¼›</li><li>ä¸è¦å°† <code>equals</code> æ–¹æ³•å‚æ•°ä¸­çš„ <code>Object</code> å¯¹è±¡æ›¿æ¢ä¸ºå…¶ä»–çš„ç±»å‹ï¼Œåœ¨é‡å†™æ—¶ä¸è¦å¿˜æ‰ <code>@Override</code> æ³¨è§£ã€‚</li></ol><blockquote><h3 id="æ˜¯å¦å¯ä»¥ç»§æ‰¿-String-ç±»ï¼Ÿ"><a href="#æ˜¯å¦å¯ä»¥ç»§æ‰¿-String-ç±»ï¼Ÿ" class="headerlink" title="æ˜¯å¦å¯ä»¥ç»§æ‰¿ String ç±»ï¼Ÿ"></a>æ˜¯å¦å¯ä»¥ç»§æ‰¿ <code>String</code> ç±»ï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>String</code> ç±»æ˜¯ <code>final</code> ç±»ï¼Œä¸å¯ä»¥è¢«ç»§æ‰¿ã€‚</p><p><strong>è¡¥å……ï¼š</strong>ç»§æ‰¿ <code>String</code> æœ¬èº«å°±æ˜¯ä¸€ä¸ªé”™è¯¯çš„è¡Œä¸ºï¼Œå¯¹ <code>String</code> ç±»å‹æœ€å¥½çš„é‡ç”¨æ–¹å¼æ˜¯å…³è”å…³ç³»ï¼ˆHas-Aï¼‰å’Œä¾èµ–å…³ç³»ï¼ˆUse-Aï¼‰è€Œä¸æ˜¯ç»§æ‰¿å…³ç³»ï¼ˆIs-Aï¼‰ã€‚</p><blockquote><h3 id="å½“ä¸€ä¸ªå¯¹è±¡è¢«å½“ä½œå‚æ•°ä¼ é€’åˆ°ä¸€ä¸ªæ–¹æ³•åï¼Œæ­¤æ–¹æ³•å¯æ”¹å˜è¿™ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œå¹¶å¯è¿”å›å˜åŒ–åçš„ç»“æœï¼Œé‚£ä¹ˆè¿™é‡Œåˆ°åº•æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ï¼Ÿ"><a href="#å½“ä¸€ä¸ªå¯¹è±¡è¢«å½“ä½œå‚æ•°ä¼ é€’åˆ°ä¸€ä¸ªæ–¹æ³•åï¼Œæ­¤æ–¹æ³•å¯æ”¹å˜è¿™ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œå¹¶å¯è¿”å›å˜åŒ–åçš„ç»“æœï¼Œé‚£ä¹ˆè¿™é‡Œåˆ°åº•æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ï¼Ÿ" class="headerlink" title="å½“ä¸€ä¸ªå¯¹è±¡è¢«å½“ä½œå‚æ•°ä¼ é€’åˆ°ä¸€ä¸ªæ–¹æ³•åï¼Œæ­¤æ–¹æ³•å¯æ”¹å˜è¿™ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œå¹¶å¯è¿”å›å˜åŒ–åçš„ç»“æœï¼Œé‚£ä¹ˆè¿™é‡Œåˆ°åº•æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ï¼Ÿ"></a>å½“ä¸€ä¸ªå¯¹è±¡è¢«å½“ä½œå‚æ•°ä¼ é€’åˆ°ä¸€ä¸ªæ–¹æ³•åï¼Œæ­¤æ–¹æ³•å¯æ”¹å˜è¿™ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œå¹¶å¯è¿”å›å˜åŒ–åçš„ç»“æœï¼Œé‚£ä¹ˆè¿™é‡Œåˆ°åº•æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ï¼Ÿ</h3></blockquote><p>ç­”ï¼šæ˜¯å€¼ä¼ é€’ã€‚Java è¯­è¨€çš„æ–¹æ³•è°ƒç”¨åªæ”¯æŒå‚æ•°çš„å€¼ä¼ é€’ã€‚å½“ä¸€ä¸ªå¯¹è±¡å®ä¾‹ä½œä¸ºä¸€ä¸ªå‚æ•°è¢«ä¼ é€’åˆ°æ–¹æ³•ä¸­æ—¶ï¼Œå‚æ•°çš„å€¼å°±æ˜¯å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ã€‚å¯¹è±¡çš„å±æ€§å¯ä»¥åœ¨è¢«è°ƒç”¨è¿‡ç¨‹ä¸­è¢«æ”¹å˜ï¼Œä½†å¯¹å¯¹è±¡å¼•ç”¨çš„æ”¹å˜æ˜¯ä¸ä¼šå½±å“åˆ°è°ƒç”¨è€…çš„ã€‚C++ å’Œ C# ä¸­å¯ä»¥é€šè¿‡ä¼ å¼•ç”¨æˆ–ä¼ è¾“å‡ºå‚æ•°æ¥æ”¹å˜ä¼ å…¥çš„å‚æ•°çš„å€¼ã€‚åœ¨ C# ä¸­å¯ä»¥ç¼–å†™å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ï¼Œä½†æ˜¯åœ¨ Java ä¸­å´åšä¸åˆ°ã€‚</p><p><pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span><span class="token keyword">namespace</span> <span class="token namespace">CS01</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">class</span> <span class="token class-name">Program</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">ref</span> <span class="token class-name"><span class="token keyword">int</span></span> x<span class="token punctuation">,</span> <span class="token keyword">ref</span> <span class="token class-name"><span class="token keyword">int</span></span> y<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name"><span class="token keyword">int</span></span> temp <span class="token operator">=</span> x<span class="token punctuation">;</span>            x <span class="token operator">=</span> y<span class="token punctuation">;</span>            y <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> Main <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name"><span class="token keyword">int</span></span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>            swap <span class="token punctuation">(</span><span class="token keyword">ref</span> a<span class="token punctuation">,</span> <span class="token keyword">ref</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// a = 10, b = 5;</span>            Console<span class="token punctuation">.</span>WriteLine <span class="token punctuation">(</span><span class="token string">"a = &#123;0&#125;, b = &#123;1&#125;"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¯´æ˜ï¼š</strong>Javaä¸­æ²¡æœ‰ä¼ å¼•ç”¨å®åœ¨æ˜¯éå¸¸çš„ä¸æ–¹ä¾¿ï¼Œè¿™ä¸€ç‚¹åœ¨ Java 8 ä¸­ä»ç„¶æ²¡æœ‰å¾—åˆ°æ”¹è¿›ï¼Œæ­£æ˜¯å¦‚æ­¤åœ¨ Java ç¼–å†™çš„ä»£ç ä¸­æ‰ä¼šå‡ºç°å¤§é‡çš„ <code>Wrapper</code> ç±»ï¼ˆå°†éœ€è¦é€šè¿‡æ–¹æ³•è°ƒç”¨ä¿®æ”¹çš„å¼•ç”¨ç½®äºä¸€ä¸ª <code>Wrapper</code> ç±»ä¸­ï¼Œå†å°† <code>Wrapper</code> å¯¹è±¡ä¼ å…¥æ–¹æ³•ï¼‰ï¼Œè¿™æ ·çš„åšæ³•åªä¼šè®©ä»£ç å˜å¾—è‡ƒè‚¿ï¼Œå°¤å…¶æ˜¯è®©ä» C å’Œ C++ è½¬å‹ä¸º Java ç¨‹åºå‘˜çš„å¼€å‘è€…æ— æ³•å®¹å¿ã€‚</p><blockquote><h3 id="String-å’Œ-StringBuilderã€StringBuffer-çš„åŒºåˆ«ï¼Ÿ"><a href="#String-å’Œ-StringBuilderã€StringBuffer-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="String å’Œ StringBuilderã€StringBuffer çš„åŒºåˆ«ï¼Ÿ"></a><code>String</code> å’Œ <code>StringBuilder</code>ã€<code>StringBuffer</code> çš„åŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼šJava å¹³å°æä¾›äº†ä¸¤ç§ç±»å‹çš„å­—ç¬¦ä¸²ï¼š<code>String</code> å’Œ <code>StringBuffer/StringBuilder</code>ï¼Œå®ƒä»¬å¯ä»¥å‚¨å­˜å’Œæ“ä½œå­—ç¬¦ä¸²ã€‚å…¶ä¸­ <code>String</code> æ˜¯åªè¯»å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ„å‘³ç€ String å¼•ç”¨çš„å­—ç¬¦ä¸²å†…å®¹æ˜¯ä¸èƒ½è¢«æ”¹å˜çš„ã€‚è€Œ <code>StringBuffer/StringBuilder</code> ç±»è¡¨ç¤ºçš„å­—ç¬¦ä¸²å¯¹è±¡å¯ä»¥ç›´æ¥è¿›è¡Œä¿®æ”¹ã€‚<code>StringBuilder</code> æ˜¯ Java 5 ä¸­å¼•å…¥çš„ï¼Œå®ƒå’Œ <code>StringBuffer</code> çš„æ–¹æ³•å®Œå…¨ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºå®ƒæ˜¯åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨çš„ï¼Œå› ä¸ºå®ƒçš„æ‰€æœ‰æ–¹é¢éƒ½æ²¡æœ‰è¢« <code>synchronized</code> ä¿®é¥°ï¼Œå› æ­¤å®ƒçš„æ•ˆç‡ä¹Ÿæ¯” <code>StringBuffer</code> è¦é«˜ã€‚</p><p>é¢è¯•é¢˜1 - ä»€ä¹ˆæƒ…å†µä¸‹ç”¨ <code>+</code> è¿ç®—ç¬¦è¿›è¡Œå­—ç¬¦ä¸²è¿æ¥æ¯”è°ƒç”¨ <code>StringBuffer/StringBuilder</code> å¯¹è±¡çš„ <code>append</code> æ–¹æ³•è¿æ¥å­—ç¬¦ä¸²æ€§èƒ½æ›´å¥½ï¼Ÿ</p><p>é¢è¯•é¢˜2 - è¯·è¯´å‡ºä¸‹é¢ç¨‹åºçš„è¾“å‡ºã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">StringEqualTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"Programming"</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"Programming"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> s3 <span class="token operator">=</span> <span class="token string">"Program"</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> s4 <span class="token operator">=</span> <span class="token string">"ming"</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> s5 <span class="token operator">=</span> <span class="token string">"Program"</span> <span class="token operator">+</span> <span class="token string">"ming"</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> s6 <span class="token operator">=</span> s3 <span class="token operator">+</span> s4<span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// false</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s5<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// true</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s6<span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// false</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s1 <span class="token operator">==</span> s6<span class="token punctuation">.</span><span class="token function">intern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// true</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s2 <span class="token operator">==</span> s2<span class="token punctuation">.</span><span class="token function">intern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// false</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¡¥å……ï¼š</strong>è§£ç­”ä¸Šé¢çš„é¢è¯•é¢˜éœ€è¦æ¸…æ¥šä¸¤ç‚¹ï¼š</p><ol><li><p><code>String</code> å¯¹è±¡çš„ <code>intern</code> æ–¹æ³•ä¼šå¾—åˆ°å­—ç¬¦ä¸²å¯¹è±¡åœ¨å¸¸é‡æ± ä¸­å¯¹åº”çš„ç‰ˆæœ¬çš„å¼•ç”¨ï¼ˆå¦‚æœå¸¸é‡æ± ä¸­æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ <code>String</code> å¯¹è±¡çš„ <code>equals</code> ç»“æœæ˜¯ <code>true</code>ï¼‰ï¼Œå¦‚æœå¸¸é‡æ± ä¸­æ²¡æœ‰å¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œåˆ™è¯¥å­—ç¬¦ä¸²å°†è¢«æ·»åŠ åˆ°å¸¸é‡æ± ä¸­ï¼Œç„¶åè¿”å›å¸¸é‡æ± ä¸­å­—ç¬¦ä¸²çš„å¼•ç”¨ï¼›</p></li><li><p>å­—ç¬¦ä¸²çš„ <code>+</code> æ“ä½œå…¶æœ¬è´¨æ˜¯åˆ›å»ºäº† <code>StringBuilder</code> å¯¹è±¡è¿›è¡Œ <code>append</code> æ“ä½œï¼Œç„¶åå°†æ‹¼æ¥åçš„ <code>StringBuilder</code> å¯¹è±¡ç”¨ <code>toString</code> æ–¹æ³•å¤„ç†æˆ <code>String</code> å¯¹è±¡ï¼Œè¿™ä¸€ç‚¹å¯ä»¥ç”¨ <code>javap -c StringEqualTest.class</code> å‘½ä»¤è·å¾— class æ–‡ä»¶å¯¹åº”çš„ JVM å­—èŠ‚ç æŒ‡ä»¤å°±å¯ä»¥çœ‹å‡ºæ¥ã€‚</p></li></ol><blockquote><h3 id="é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ"><a href="#é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ" class="headerlink" title="é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ"></a>é‡è½½ï¼ˆOverloadï¼‰å’Œé‡å†™ï¼ˆOverrideï¼‰çš„åŒºåˆ«ã€‚é‡è½½çš„æ–¹æ³•èƒ½å¦æ ¹æ®è¿”å›ç±»å‹è¿›è¡ŒåŒºåˆ†ï¼Ÿ</h3></blockquote><p>ç­”ï¼šæ–¹æ³•çš„é‡è½½å’Œé‡å†™éƒ½æ˜¯å®ç°å¤šæ€çš„æ–¹å¼ï¼ŒåŒºåˆ«åœ¨äºå‰è€…å®ç°çš„æ˜¯ç¼–è¯‘æ—¶çš„å¤šæ€æ€§ï¼Œè€Œåè€…å®ç°çš„æ˜¯è¿è¡Œæ—¶çš„å¤šæ€æ€§ã€‚é‡è½½å‘ç”Ÿåœ¨ä¸€ä¸ªç±»ä¸­ï¼ŒåŒåçš„æ–¹æ³•å¦‚æœæœ‰ä¸åŒçš„å‚æ•°åˆ—è¡¨ï¼ˆå‚æ•°ç±»å‹ä¸åŒã€å‚æ•°ä¸ªæ•°ä¸åŒæˆ–è€…äºŒè€…éƒ½ä¸åŒï¼‰åˆ™è§†ä¸ºé‡è½½ï¼›é‡å†™å‘ç”Ÿåœ¨å­ç±»ä¸çˆ¶ç±»ä¹‹é—´ï¼Œé‡å†™è¦æ±‚å­ç±»è¢«é‡å†™æ–¹æ³•ä¸çˆ¶ç±»è¢«é‡å†™æ–¹æ³•æœ‰ç›¸åŒçš„è¿”å›ç±»å‹ï¼Œæ¯”çˆ¶ç±»è¢«é‡å†™æ–¹æ³•æ›´å¥½è®¿é—®ï¼Œä¸èƒ½æ¯”çˆ¶ç±»è¢«é‡å†™æ–¹æ³•å£°æ˜æ›´å¤šçš„å¼‚å¸¸ï¼ˆé‡Œæ°ä»£æ¢åŸåˆ™ï¼‰ã€‚é‡è½½å¯¹è¿”å›ç±»å‹æ²¡æœ‰ç‰¹æ®Šçš„è¦æ±‚ã€‚</p><p>é¢è¯•é¢˜ï¼šåä¸ºçš„é¢è¯•é¢˜ä¸­æ›¾ç»é—®è¿‡è¿™æ ·ä¸€ä¸ªé—®é¢˜ - &quot;ä¸ºä»€ä¹ˆä¸èƒ½æ ¹æ®è¿”å›ç±»å‹æ¥åŒºåˆ†é‡è½½&quot;ï¼Œå¿«è¯´å‡ºä½ çš„ç­”æ¡ˆå§ï¼</p><blockquote><h3 id="æè¿°ä¸€ä¸‹-JVM-åŠ è½½-class-æ–‡ä»¶çš„åŸç†æœºåˆ¶ï¼Ÿ"><a href="#æè¿°ä¸€ä¸‹-JVM-åŠ è½½-class-æ–‡ä»¶çš„åŸç†æœºåˆ¶ï¼Ÿ" class="headerlink" title="æè¿°ä¸€ä¸‹ JVM åŠ è½½ class æ–‡ä»¶çš„åŸç†æœºåˆ¶ï¼Ÿ"></a>æè¿°ä¸€ä¸‹ JVM åŠ è½½ <code>class</code> æ–‡ä»¶çš„åŸç†æœºåˆ¶ï¼Ÿ</h3></blockquote><p>ç­”ï¼šJVM ä¸­ç±»çš„è£…è½½æ˜¯ç”±ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰å’Œå®ƒçš„å­ç±»æ¥å®ç°çš„ï¼ŒJavaä¸­çš„ç±»åŠ è½½å™¨æ˜¯ä¸€ä¸ªé‡è¦çš„ Java è¿è¡Œæ—¶ç³»ç»Ÿç»„ä»¶ï¼Œå®ƒè´Ÿè´£åœ¨è¿è¡Œæ—¶æŸ¥æ‰¾å’Œè£…å…¥ç±»æ–‡ä»¶ä¸­çš„ç±»ã€‚</p><p>ç”±äº Java çš„è·¨å¹³å°æ€§ï¼Œç»è¿‡ç¼–è¯‘çš„ Java æºç¨‹åºå¹¶ä¸æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œè€Œæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªç±»æ–‡ä»¶ã€‚å½“ Java ç¨‹åºéœ€è¦ä½¿ç”¨æŸä¸ªç±»æ—¶ï¼ŒJVM ä¼šç¡®ä¿è¿™ä¸ªç±»å·²ç»è¢«åŠ è½½ã€è¿æ¥ï¼ˆéªŒè¯ã€å‡†å¤‡å’Œè§£æï¼‰å’Œåˆå§‹åŒ–ã€‚ç±»çš„åŠ è½½æ˜¯æŒ‡æŠŠç±»çš„ <code>.class</code> æ–‡ä»¶ä¸­çš„æ•°æ®è¯»å…¥åˆ°å†…å­˜ä¸­ï¼Œé€šå¸¸æ˜¯åˆ›å»ºä¸€ä¸ªå­—èŠ‚æ•°ç»„è¯»å…¥ <code>.class</code> æ–‡ä»¶ï¼Œç„¶åäº§ç”Ÿä¸æ‰€åŠ è½½ç±»å¯¹åº”çš„ <code>Class</code> å¯¹è±¡ã€‚åŠ è½½å®Œæˆåï¼Œ<code>Class</code> å¯¹è±¡è¿˜ä¸å®Œæ•´ï¼Œæ‰€ä»¥æ­¤æ—¶çš„ç±»è¿˜ä¸å¯ç”¨ã€‚å½“ç±»è¢«åŠ è½½åå°±è¿›å…¥è¿æ¥é˜¶æ®µï¼Œè¿™ä¸€é˜¶æ®µåŒ…æ‹¬<strong>éªŒè¯</strong>ã€<strong>å‡†å¤‡</strong>ï¼ˆä¸ºé™æ€å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®é»˜è®¤çš„åˆå§‹å€¼ï¼‰å’Œ<strong>è§£æ</strong>ï¼ˆå°†ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼‰ä¸‰ä¸ªæ­¥éª¤ã€‚æœ€å JVM å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼ŒåŒ…æ‹¬ï¼š(1)å¦‚æœç±»å­˜åœ¨ç›´æ¥çš„çˆ¶ç±»å¹¶ä¸”è¿™ä¸ªç±»è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œé‚£ä¹ˆå°±å…ˆåˆå§‹åŒ–çˆ¶ç±»ï¼›(2)å¦‚æœç±»ä¸­å­˜åœ¨åˆå§‹åŒ–è¯­å¥ï¼Œå°±ä¾æ¬¡æ‰§è¡Œè¿™äº›åˆå§‹åŒ–è¯­å¥ã€‚</p><p>ç±»çš„åŠ è½½æ˜¯ç”±ç±»åŠ è½½å™¨å®Œæˆçš„ï¼Œç±»åŠ è½½å™¨åŒ…æ‹¬ï¼šæ ¹åŠ è½½å™¨ï¼ˆBootStrapï¼‰ã€æ‰©å±•åŠ è½½å™¨ï¼ˆExtensionï¼‰ã€ç³»ç»ŸåŠ è½½å™¨ï¼ˆSystemï¼‰å’Œç”¨æˆ·è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼ˆ<code>java.lang.ClassLoader</code> çš„å­ç±»ï¼‰ã€‚ä» Java 2ï¼ˆJDK 1.2ï¼‰å¼€å§‹ï¼Œç±»åŠ è½½è¿‡ç¨‹é‡‡å–äº†çˆ¶äº²å§”æ‰˜æœºåˆ¶ï¼ˆPDMï¼‰ã€‚PDM æ›´å¥½çš„ä¿è¯äº† Java å¹³å°çš„å®‰å…¨æ€§ï¼Œåœ¨è¯¥æœºåˆ¶ä¸­ï¼ŒJVM è‡ªå¸¦çš„ Bootstrap æ˜¯æ ¹åŠ è½½å™¨ï¼Œå…¶ä»–çš„åŠ è½½å™¨éƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªçˆ¶ç±»åŠ è½½å™¨ã€‚ç±»çš„åŠ è½½é¦–å…ˆè¯·æ±‚çˆ¶ç±»åŠ è½½å™¨åŠ è½½ï¼Œçˆ¶ç±»åŠ è½½å™¨æ— èƒ½ä¸ºåŠ›æ—¶æ‰ç”±å…¶å­ç±»åŠ è½½å™¨è‡ªè¡ŒåŠ è½½ã€‚JVM ä¸ä¼šå‘ Java ç¨‹åºæä¾›å¯¹ Bootstrap çš„å¼•ç”¨ã€‚ä¸‹é¢æ˜¯å…³äºå‡ ä¸ªç±»åŠ è½½å™¨çš„è¯´æ˜ï¼š</p><ul><li>Bootstrapï¼šä¸€èˆ¬ç”¨æœ¬åœ°ä»£ç å®ç°ï¼Œè´Ÿè´£åŠ è½½ JVM åŸºç¡€æ ¸å¿ƒç±»åº“ï¼ˆ<code>rt.jar</code>ï¼‰ï¼›</li><li>Extensionï¼šä» <code>java.ext.dirs</code> ç³»ç»Ÿå±æ€§æ‰€æŒ‡å®šçš„ç›®å½•ä¸­åŠ è½½ç±»åº“ï¼Œå®ƒçš„çˆ¶åŠ è½½å™¨æ˜¯ Bootstrapï¼›</li><li>Systemï¼šåˆå«åº”ç”¨ç±»åŠ è½½å™¨ï¼Œå…¶çˆ¶ç±»æ˜¯ <code>Extension</code>ã€‚å®ƒæ˜¯åº”ç”¨æœ€å¹¿æ³›çš„ç±»åŠ è½½å™¨ã€‚å®ƒä»ç¯å¢ƒå˜é‡ <code>classpath</code> æˆ–è€…ç³»ç»Ÿå±æ€§ <code>java.class.path</code> æ‰€æŒ‡å®šçš„ç›®å½•ä¸­è®°è½½ç±»ï¼Œæ˜¯ç”¨æˆ·è‡ªå®šä¹‰åŠ è½½å™¨çš„é»˜è®¤çˆ¶åŠ è½½å™¨ã€‚</li></ul><blockquote><h3 id="char-ç±»å‹å˜é‡ä¸­èƒ½ä¸èƒ½å­˜å‚¨ä¸€ä¸ªä¸­æ–‡æ±‰å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ"><a href="#char-ç±»å‹å˜é‡ä¸­èƒ½ä¸èƒ½å­˜å‚¨ä¸€ä¸ªä¸­æ–‡æ±‰å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="char ç±»å‹å˜é‡ä¸­èƒ½ä¸èƒ½å­˜å‚¨ä¸€ä¸ªä¸­æ–‡æ±‰å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ"></a><code>char</code> ç±»å‹å˜é‡ä¸­èƒ½ä¸èƒ½å­˜å‚¨ä¸€ä¸ªä¸­æ–‡æ±‰å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</h3></blockquote><p>ç­”ï¼š<code>char</code> ç±»å‹å¯ä»¥å­˜å‚¨ä¸€ä¸ªä¸­æ–‡æ±‰å­—ï¼Œå› ä¸º Java ä¸­ä½¿ç”¨çš„ç¼–ç æ˜¯ <code>Unicode</code>ï¼ˆä¸é€‰æ‹©ä»»ä½•ç‰¹å®šçš„ç¼–ç ï¼Œç›´æ¥ä½¿ç”¨å­—ç¬¦åœ¨å­—ç¬¦é›†ä¸­çš„ç¼–å·ï¼Œè¿™æ˜¯ç»Ÿä¸€çš„å”¯ä¸€æ–¹æ³•ï¼‰ï¼Œä¸€ä¸ª <code>char</code> ç±»å‹å  2 ä¸ªå­—èŠ‚ï¼ˆ16 æ¯”ç‰¹ï¼‰ï¼Œæ‰€ä»¥æ”¾ä¸€ä¸ªä¸­æ–‡æ˜¯æ²¡é—®é¢˜çš„ã€‚</p><p><strong>è¡¥å……ï¼š</strong>ä½¿ç”¨ <code>Unicode</code> æ„å‘³ç€å­—ç¬¦åœ¨ JVM å†…éƒ¨å’Œå¤–éƒ¨æœ‰ä¸åŒçš„è¡¨ç°å½¢å¼ï¼Œåœ¨ JVM å†…éƒ¨éƒ½æ˜¯ <code>Unicode</code>ï¼Œå½“è¿™ä¸ªå­—ç¬¦è¢«ä» JVM å†…éƒ¨è½¬ç§»åˆ°å¤–éƒ¨æ—¶ï¼ˆä¾‹å¦‚å­˜å…¥æ–‡ä»¶ç³»ç»Ÿä¸­ï¼‰ï¼Œéœ€è¦è¿›è¡Œç¼–ç è½¬æ¢ã€‚æ‰€ä»¥ Java ä¸­æœ‰å­—èŠ‚æµå’Œå­—ç¬¦æµï¼Œä»¥åŠåœ¨å­—ç¬¦æµå’Œå­—èŠ‚æµä¹‹é—´è¿›è¡Œè½¬æ¢çš„è½¬æ¢æµï¼Œå¦‚ <code>InputStreamReader</code> å’Œ <code>OutputStreamReader</code>ï¼Œè¿™ä¸¤ä¸ªç±»æ˜¯å­—èŠ‚æµå’Œå­—ç¬¦æµä¹‹é—´çš„é€‚é…å™¨ç±»ï¼Œæ‰¿æ‹…äº†ç¼–ç è½¬æ¢çš„ä»»åŠ¡ï¼›å¯¹äº C ç¨‹åºå‘˜æ¥è¯´ï¼Œè¦å®Œæˆè¿™æ ·çš„ç¼–ç è½¬æ¢ææ€•è¦ä¾èµ–äº <code>union</code>ï¼ˆè”åˆä½“/å…±ç”¨ä½“ï¼‰å…±äº«å†…å­˜çš„ç‰¹å¾æ¥å®ç°äº†ã€‚</p><blockquote><h3 id="æŠ½è±¡ç±»ï¼ˆabstract-classï¼‰å’Œæ¥å£ï¼ˆinterfaceï¼‰æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ"><a href="#æŠ½è±¡ç±»ï¼ˆabstract-classï¼‰å’Œæ¥å£ï¼ˆinterfaceï¼‰æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ" class="headerlink" title="æŠ½è±¡ç±»ï¼ˆabstract classï¼‰å’Œæ¥å£ï¼ˆinterfaceï¼‰æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ"></a>æŠ½è±¡ç±»ï¼ˆabstract classï¼‰å’Œæ¥å£ï¼ˆinterfaceï¼‰æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ</h3></blockquote><p>ç­”ï¼šæŠ½è±¡ç±»å’Œæ¥å£éƒ½ä¸èƒ½å¤Ÿå®ä¾‹åŒ–ï¼Œä½†å¯ä»¥å®šä¹‰æŠ½è±¡ç±»å’Œæ¥å£ç±»å‹çš„å¼•ç”¨ã€‚ä¸€ä¸ªç±»å¦‚æœç»§æ‰¿äº†æŸä¸ªæŠ½è±¡ç±»æˆ–è€…å®ç°äº†æŸä¸ªæ¥å£éƒ½éœ€è¦å¯¹å…¶ä¸­çš„æŠ½è±¡æ–¹æ³•å…¨éƒ¨è¿›è¡Œå®ç°ï¼Œå¦åˆ™è¯¥ç±»ä»ç„¶éœ€è¦è¢«å£°æ˜ä¸ºæŠ½è±¡ç±»ã€‚æ¥å£æ¯”æŠ½è±¡ç±»æ›´åŠ æŠ½è±¡ï¼Œå› ä¸ºæŠ½è±¡ç±»ä¸­å¯ä»¥å®šä¹‰æ„é€ å™¨ï¼Œå¯ä»¥æœ‰æŠ½è±¡æ–¹æ³•å’Œå…·ä½“æ–¹æ³•ï¼Œè€Œæ¥å£ä¸­ä¸èƒ½å®šä¹‰æ„é€ å™¨è€Œä¸”å…¶ä¸­çš„æ–¹æ³•å…¨éƒ¨éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ã€‚æŠ½è±¡ç±»ä¸­çš„æˆå‘˜å¯ä»¥æ˜¯ <code>private</code>ã€<code>é»˜è®¤</code>ã€<code>protected</code>ã€<code>public</code> çš„ï¼Œè€Œæ¥å£ä¸­çš„æˆå‘˜å…¨éƒ½æ˜¯ <code>public</code> çš„ã€‚æŠ½è±¡ç±»ä¸­å¯ä»¥å®šä¹‰æˆå‘˜å˜é‡ï¼Œè€Œæ¥å£ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡å®é™…ä¸Šéƒ½æ˜¯å¸¸é‡ã€‚æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»å¿…é¡»è¢«å£°æ˜ä¸ºæŠ½è±¡ç±»ï¼Œè€ŒæŠ½è±¡ç±»æœªå¿…è¦æœ‰æŠ½è±¡æ–¹æ³•ã€‚</p><blockquote><h3 id="é™æ€åµŒå¥—ç±»ï¼ˆStatic-Nested-Classï¼‰å’Œå†…éƒ¨ç±»ï¼ˆInner-Classï¼‰çš„ä¸åŒï¼Ÿ"><a href="#é™æ€åµŒå¥—ç±»ï¼ˆStatic-Nested-Classï¼‰å’Œå†…éƒ¨ç±»ï¼ˆInner-Classï¼‰çš„ä¸åŒï¼Ÿ" class="headerlink" title="é™æ€åµŒå¥—ç±»ï¼ˆStatic Nested Classï¼‰å’Œå†…éƒ¨ç±»ï¼ˆInner Classï¼‰çš„ä¸åŒï¼Ÿ"></a>é™æ€åµŒå¥—ç±»ï¼ˆStatic Nested Classï¼‰å’Œå†…éƒ¨ç±»ï¼ˆInner Classï¼‰çš„ä¸åŒï¼Ÿ</h3></blockquote><p>ç­”ï¼šStatic Nested Class æ˜¯è¢«å£°æ˜ä¸ºé™æ€ï¼ˆ<code>static</code>ï¼‰çš„å†…éƒ¨ç±»ï¼Œå®ƒå¯ä»¥ä¸ä¾èµ–äºå¤–éƒ¨ç±»å®ä¾‹è¢«å®ä¾‹åŒ–ã€‚è€Œé€šå¸¸çš„å†…éƒ¨ç±»éœ€è¦åœ¨å¤–éƒ¨ç±»å®ä¾‹åŒ–åæ‰èƒ½å®ä¾‹åŒ–ï¼Œå…¶è¯­æ³•çœ‹èµ·æ¥æŒºè¯¡å¼‚çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * æ‰‘å…‹ç±»ï¼ˆä¸€å‰¯æ‰‘å…‹ï¼‰ */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Poker</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> suites <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"é»‘æ¡ƒ"</span><span class="token punctuation">,</span> <span class="token string">"çº¢æ¡ƒ"</span><span class="token punctuation">,</span> <span class="token string">"è‰èŠ±"</span><span class="token punctuation">,</span> <span class="token string">"æ–¹å—"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> faces <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Card</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cards<span class="token punctuation">;</span>    <span class="token comment">/**     * æ„é€ å™¨     */</span>    <span class="token keyword">public</span> <span class="token class-name">Poker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        cards <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Card</span><span class="token punctuation">[</span><span class="token number">52</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> suites<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> faces<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                cards<span class="token punctuation">[</span>i <span class="token operator">*</span> <span class="token number">13</span> <span class="token operator">+</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Card</span><span class="token punctuation">(</span>suites<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> faces<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * æ´—ç‰Œ ï¼ˆéšæœºä¹±åºï¼‰     */</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> cards<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Card</span> temp <span class="token operator">=</span> cards<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>            cards<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å‘ç‰Œ     * @param index å‘ç‰Œçš„ä½ç½®     */</span>    <span class="token keyword">public</span> <span class="token class-name">Card</span> <span class="token function">deal</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> cards<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">/**     * å¡ç‰‡ç±»ï¼ˆä¸€å¼ æ‰‘å…‹ï¼‰     * [å†…éƒ¨ç±»]     */</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Card</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">private</span> <span class="token class-name">String</span> suite<span class="token punctuation">;</span>   <span class="token comment">// èŠ±è‰²</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> face<span class="token punctuation">;</span>       <span class="token comment">// ç‚¹æ•°</span>        <span class="token keyword">public</span> <span class="token class-name">Card</span><span class="token punctuation">(</span><span class="token class-name">String</span> suite<span class="token punctuation">,</span> <span class="token keyword">int</span> face<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>suite <span class="token operator">=</span> suite<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>face <span class="token operator">=</span> face<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">String</span> faceStr <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>            <span class="token keyword">switch</span><span class="token punctuation">(</span>face<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> faceStr <span class="token operator">=</span> <span class="token string">"A"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">11</span><span class="token operator">:</span> faceStr <span class="token operator">=</span> <span class="token string">"J"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">12</span><span class="token operator">:</span> faceStr <span class="token operator">=</span> <span class="token string">"Q"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">case</span> <span class="token number">13</span><span class="token operator">:</span> faceStr <span class="token operator">=</span> <span class="token string">"K"</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token keyword">default</span><span class="token operator">:</span> faceStr <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>face<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> suite <span class="token operator">+</span> faceStr<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æµ‹è¯•ä»£ç ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">PokerTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Poker</span> poker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Poker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        poker<span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// æ´—ç‰Œ</span>        <span class="token class-name">Poker</span><span class="token punctuation">.</span><span class="token class-name">Card</span> c1 <span class="token operator">=</span> poker<span class="token punctuation">.</span><span class="token function">deal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å‘ç¬¬ä¸€å¼ ç‰Œ</span>        <span class="token comment">// å¯¹äºéé™æ€å†…éƒ¨ç±»Card</span>        <span class="token comment">// åªæœ‰é€šè¿‡å…¶å¤–éƒ¨ç±»Pokerå¯¹è±¡æ‰èƒ½åˆ›å»ºCardå¯¹è±¡</span>        <span class="token class-name">Poker</span><span class="token punctuation">.</span><span class="token class-name">Card</span> c2 <span class="token operator">=</span> poker<span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token class-name">Card</span><span class="token punctuation">(</span><span class="token string">"çº¢å¿ƒ"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è‡ªå·±åˆ›å»ºä¸€å¼ ç‰Œ</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// æ´—ç‰Œåçš„ç¬¬ä¸€å¼ </span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// æ‰“å°: çº¢å¿ƒA</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>é¢è¯•é¢˜ - ä¸‹é¢çš„ä»£ç å“ªäº›åœ°æ–¹ä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ï¼Ÿ</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Outer</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">class</span> <span class="token class-name">Inner</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">new</span> <span class="token class-name">Inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">new</span> <span class="token class-name">Inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">new</span> <span class="token class-name">Inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong>Java ä¸­éé™æ€å†…éƒ¨ç±»å¯¹è±¡çš„åˆ›å»ºè¦ä¾èµ–å…¶å¤–éƒ¨ç±»å¯¹è±¡ï¼Œä¸Šé¢çš„é¢è¯•é¢˜ä¸­ <code>foo</code> å’Œ <code>main</code> æ–¹æ³•éƒ½æ˜¯é™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•ä¸­æ²¡æœ‰ <code>this</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰æ‰€è°“çš„å¤–éƒ¨ç±»å¯¹è±¡ï¼Œå› æ­¤æ— æ³•åˆ›å»ºå†…éƒ¨ç±»å¯¹è±¡ï¼Œå¦‚æœè¦åœ¨é™æ€æ–¹æ³•ä¸­åˆ›å»ºå†…éƒ¨ç±»å¯¹è±¡ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">new</span> <span class="token class-name">Outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token class-name">Inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><blockquote><h3 id="Java-ä¸­ä¼šå­˜åœ¨å†…å­˜æ³„æ¼å—ï¼Œè¯·ç®€å•æè¿°ã€‚"><a href="#Java-ä¸­ä¼šå­˜åœ¨å†…å­˜æ³„æ¼å—ï¼Œè¯·ç®€å•æè¿°ã€‚" class="headerlink" title="Java ä¸­ä¼šå­˜åœ¨å†…å­˜æ³„æ¼å—ï¼Œè¯·ç®€å•æè¿°ã€‚"></a>Java ä¸­ä¼šå­˜åœ¨å†…å­˜æ³„æ¼å—ï¼Œè¯·ç®€å•æè¿°ã€‚</h3></blockquote><p>ç­”ï¼šç†è®ºä¸Š Java å› ä¸ºæœ‰åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆGCï¼‰ä¸ä¼šå­˜åœ¨å†…å­˜æ³„éœ²é—®é¢˜ï¼ˆè¿™ä¹Ÿæ˜¯ Java è¢«å¹¿æ³›ä½¿ç”¨äºæœåŠ¡å™¨ç«¯ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦åŸå› ï¼‰ï¼›ç„¶è€Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½ä¼šå­˜åœ¨æ— ç”¨ä½†å¯è¾¾çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ä¸èƒ½è¢« GC å›æ”¶ï¼Œå› æ­¤ä¹Ÿä¼šå¯¼è‡´å†…å­˜æ³„éœ²çš„å‘ç”Ÿã€‚ä¾‹å¦‚ Hibernate çš„ Sessionï¼ˆä¸€çº§ç¼“å­˜ï¼‰ä¸­çš„å¯¹è±¡å±äºæŒä¹…æ€ï¼Œåƒåœ¾å›æ”¶å™¨æ˜¯ä¸ä¼šå›æ”¶è¿™äº›å¯¹è±¡çš„ï¼Œç„¶è€Œè¿™äº›å¯¹è±¡ä¸­å¯èƒ½å­˜åœ¨æ— ç”¨çš„åƒåœ¾å¯¹è±¡ï¼Œå¦‚æœä¸åŠæ—¶å…³é—­ï¼ˆcloseï¼‰æˆ–æ¸…ç©ºï¼ˆflushï¼‰ä¸€çº§ç¼“å­˜å°±å¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²ã€‚ä¸‹é¢ä¾‹å­ä¸­çš„ä»£ç ä¹Ÿä¼šå¯¼è‡´å†…å­˜æ³„éœ²ã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">EmptyStackException</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyStack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elements<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> INIT_CAPACITY <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">MyStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        elements <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>INIT_CAPACITY<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">T</span> elem<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">ensureCapacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        elements<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> elem<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>             <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">EmptyStackException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> elements<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureCapacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>elements<span class="token punctuation">.</span>length <span class="token operator">==</span> size<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            elements <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elements<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä¸Šé¢çš„ä»£ç å®ç°äº†ä¸€ä¸ªæ ˆï¼ˆå…ˆè¿›åå‡ºï¼ˆFILOï¼‰ï¼‰ç»“æ„ï¼Œä¹çœ‹ä¹‹ä¸‹ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„é—®é¢˜ï¼Œå®ƒç”šè‡³å¯ä»¥é€šè¿‡ä½ ç¼–å†™çš„å„ç§å•å…ƒæµ‹è¯•ã€‚ç„¶è€Œå…¶ä¸­çš„ <code>pop</code> æ–¹æ³•å´å­˜åœ¨å†…å­˜æ³„éœ²çš„é—®é¢˜ï¼Œå½“æˆ‘ä»¬ç”¨ <code>pop</code> æ–¹æ³•å¼¹å‡ºæ ˆä¸­çš„å¯¹è±¡æ—¶ï¼Œè¯¥å¯¹è±¡ä¸ä¼šè¢«å½“ä½œåƒåœ¾å›æ”¶ï¼Œå³ä½¿ä½¿ç”¨æ ˆçš„ç¨‹åºä¸å†å¼•ç”¨è¿™äº›å¯¹è±¡ï¼Œå› ä¸ºæ ˆå†…éƒ¨ç»´æŠ¤ç€å¯¹è¿™äº›å¯¹è±¡çš„è¿‡æœŸå¼•ç”¨ï¼ˆobsolete referenceï¼‰ã€‚åœ¨æ”¯æŒåƒåœ¾å›æ”¶çš„è¯­è¨€ä¸­ï¼Œå†…å­˜æ³„éœ²æ˜¯å¾ˆéšè”½çš„ï¼Œè¿™ç§å†…å­˜æ³„éœ²å…¶å®å°±æ˜¯æ— æ„è¯†çš„å¯¹è±¡ä¿æŒã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡å¼•ç”¨è¢«æ— æ„è¯†çš„ä¿ç•™èµ·æ¥äº†ï¼Œé‚£ä¹ˆåƒåœ¾å›æ”¶å™¨ä¸ä¼šå¤„ç†è¿™ä¸ªå¯¹è±¡ï¼Œä¹Ÿä¸ä¼šå¤„ç†è¯¥å¯¹è±¡å¼•ç”¨çš„å…¶ä»–å¯¹è±¡ï¼Œå³ä½¿è¿™æ ·çš„å¯¹è±¡åªæœ‰å°‘æ•°å‡ ä¸ªï¼Œä¹Ÿå¯èƒ½ä¼šå¯¼è‡´å¾ˆå¤šçš„å¯¹è±¡è¢«æ’é™¤åœ¨åƒåœ¾å›æ”¶ä¹‹å¤–ï¼Œä»è€Œå¯¹æ€§èƒ½é€ æˆé‡å¤§å½±å“ï¼Œæç«¯æƒ…å†µä¸‹ä¼šå¼•å‘ Disk Pagingï¼ˆç‰©ç†å†…å­˜ä¸ç¡¬ç›˜çš„è™šæ‹Ÿå†…å­˜äº¤æ¢æ•°æ®ï¼‰ï¼Œç”šè‡³é€ æˆ OutOfMemoryErrorã€‚</p><blockquote><h3 id="æŠ½è±¡çš„ï¼ˆabstractï¼‰æ–¹æ³•æ˜¯å¦å¯åŒæ—¶æ˜¯é™æ€çš„ï¼ˆstaticï¼‰ï¼Œæ˜¯å¦å¯åŒæ—¶æ˜¯æœ¬åœ°æ–¹æ³•ï¼ˆnativeï¼‰ï¼Œæ˜¯å¦å¯åŒæ—¶è¢«-synchronized-ä¿®é¥°ï¼Ÿ"><a href="#æŠ½è±¡çš„ï¼ˆabstractï¼‰æ–¹æ³•æ˜¯å¦å¯åŒæ—¶æ˜¯é™æ€çš„ï¼ˆstaticï¼‰ï¼Œæ˜¯å¦å¯åŒæ—¶æ˜¯æœ¬åœ°æ–¹æ³•ï¼ˆnativeï¼‰ï¼Œæ˜¯å¦å¯åŒæ—¶è¢«-synchronized-ä¿®é¥°ï¼Ÿ" class="headerlink" title="æŠ½è±¡çš„ï¼ˆabstractï¼‰æ–¹æ³•æ˜¯å¦å¯åŒæ—¶æ˜¯é™æ€çš„ï¼ˆstaticï¼‰ï¼Œæ˜¯å¦å¯åŒæ—¶æ˜¯æœ¬åœ°æ–¹æ³•ï¼ˆnativeï¼‰ï¼Œæ˜¯å¦å¯åŒæ—¶è¢« synchronized ä¿®é¥°ï¼Ÿ"></a>æŠ½è±¡çš„ï¼ˆ<code>abstract</code>ï¼‰æ–¹æ³•æ˜¯å¦å¯åŒæ—¶æ˜¯é™æ€çš„ï¼ˆ<code>static</code>ï¼‰ï¼Œæ˜¯å¦å¯åŒæ—¶æ˜¯æœ¬åœ°æ–¹æ³•ï¼ˆ<code>native</code>ï¼‰ï¼Œæ˜¯å¦å¯åŒæ—¶è¢« <code>synchronized</code> ä¿®é¥°ï¼Ÿ</h3></blockquote><p>ç­”ï¼šéƒ½ä¸èƒ½ã€‚æŠ½è±¡æ–¹æ³•éœ€è¦å­ç±»é‡å†™ï¼Œè€Œé™æ€çš„æ–¹æ³•æ˜¯æ— æ³•è¢«é‡å†™çš„ï¼Œå› æ­¤äºŒè€…æ˜¯çŸ›ç›¾çš„ã€‚æœ¬åœ°æ–¹æ³•æ˜¯ç”±æœ¬åœ°ä»£ç ï¼ˆå¦‚ C ä»£ç ï¼‰å®ç°çš„æ–¹æ³•ï¼Œè€ŒæŠ½è±¡æ–¹æ³•æ˜¯æ²¡æœ‰å®ç°çš„ï¼Œä¹Ÿæ˜¯çŸ›ç›¾çš„ã€‚<code>synchronized</code> å’Œæ–¹æ³•çš„å®ç°ç»†èŠ‚æœ‰å…³ï¼ŒæŠ½è±¡æ–¹æ³•ä¸æ¶‰åŠå®ç°ç»†èŠ‚ï¼Œå› æ­¤ä¹Ÿæ˜¯ç›¸äº’çŸ›ç›¾çš„ã€‚</p><blockquote><h3 id="é˜è¿°é™æ€å˜é‡å’Œå®ä¾‹å˜é‡çš„åŒºåˆ«ã€‚"><a href="#é˜è¿°é™æ€å˜é‡å’Œå®ä¾‹å˜é‡çš„åŒºåˆ«ã€‚" class="headerlink" title="é˜è¿°é™æ€å˜é‡å’Œå®ä¾‹å˜é‡çš„åŒºåˆ«ã€‚"></a>é˜è¿°é™æ€å˜é‡å’Œå®ä¾‹å˜é‡çš„åŒºåˆ«ã€‚</h3></blockquote><p>ç­”ï¼šé™æ€å˜é‡æ˜¯è¢« <code>static</code> ä¿®é¥°ç¬¦ä¿®é¥°çš„å˜é‡ï¼Œä¹Ÿç§°ä¸ºç±»å˜é‡ï¼Œå®ƒå±äºç±»ï¼Œä¸å±äºç±»çš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªç±»ä¸ç®¡åˆ›å»ºå¤šå°‘ä¸ªå¯¹è±¡ï¼Œé™æ€å˜é‡åœ¨å†…å­˜ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ‹·è´ï¼›å®ä¾‹å˜é‡å¿…é¡»ä¾å­˜äºæŸä¸€å®ä¾‹ï¼Œéœ€è¦å…ˆåˆ›å»ºå¯¹è±¡ç„¶åé€šè¿‡å¯¹è±¡æ‰èƒ½è®¿é—®åˆ°å®ƒã€‚é™æ€å˜é‡å¯ä»¥å®ç°è®©å¤šä¸ªå¯¹è±¡å…±äº«å†…å­˜ã€‚</p><p><strong>è¡¥å……ï¼š</strong>åœ¨ Java å¼€å‘ä¸­ï¼Œä¸Šä¸‹æ–‡ç±»å’Œå·¥å…·ç±»ä¸­é€šå¸¸ä¼šæœ‰å¤§é‡çš„é™æ€æˆå‘˜ã€‚</p><blockquote><h3 id="æ˜¯å¦å¯ä»¥ä»ä¸€ä¸ªé™æ€ï¼ˆstaticï¼‰æ–¹æ³•å†…éƒ¨å‘å‡ºå¯¹éé™æ€ï¼ˆnon-staticï¼‰æ–¹æ³•çš„è°ƒç”¨ï¼Ÿ"><a href="#æ˜¯å¦å¯ä»¥ä»ä¸€ä¸ªé™æ€ï¼ˆstaticï¼‰æ–¹æ³•å†…éƒ¨å‘å‡ºå¯¹éé™æ€ï¼ˆnon-staticï¼‰æ–¹æ³•çš„è°ƒç”¨ï¼Ÿ" class="headerlink" title="æ˜¯å¦å¯ä»¥ä»ä¸€ä¸ªé™æ€ï¼ˆstaticï¼‰æ–¹æ³•å†…éƒ¨å‘å‡ºå¯¹éé™æ€ï¼ˆnon-staticï¼‰æ–¹æ³•çš„è°ƒç”¨ï¼Ÿ"></a>æ˜¯å¦å¯ä»¥ä»ä¸€ä¸ªé™æ€ï¼ˆstaticï¼‰æ–¹æ³•å†…éƒ¨å‘å‡ºå¯¹éé™æ€ï¼ˆnon-staticï¼‰æ–¹æ³•çš„è°ƒç”¨ï¼Ÿ</h3></blockquote><p>ç­”ï¼šä¸å¯ä»¥ï¼Œé™æ€æ–¹æ³•åªèƒ½è®¿é—®é™æ€æˆå‘˜ï¼Œå› ä¸ºéé™æ€æ–¹æ³•çš„è°ƒç”¨è¦å…ˆåˆ›å»ºå¯¹è±¡ï¼Œåœ¨è°ƒç”¨é™æ€æ–¹æ³•æ—¶å¯èƒ½å¯¹è±¡å¹¶æ²¡æœ‰è¢«åˆå§‹åŒ–ã€‚</p><blockquote><h3 id="å¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿ"><a href="#å¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿ"></a>å¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿ</h3></blockquote><p>ç­”ï¼šæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>å®ç° <code>Cloneable</code> æ¥å£å¹¶é‡å†™ <code>Object</code> ç±»ä¸­çš„ <code>clone()</code> æ–¹æ³•ï¼›</li><li>å®ç° <code>Serializable</code> æ¥å£ï¼Œé€šè¿‡å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–å®ç°å…‹éš†ï¼Œå¯ä»¥å®ç°çœŸæ­£çš„æ·±åº¦å…‹éš†ï¼Œä»£ç å¦‚ä¸‹ã€‚</li></ul><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ObjectInputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ObjectOutputStream</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyUtil</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token class-name">MyUtil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AssertionError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Serializable</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token class-name">T</span> obj<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">ByteArrayOutputStream</span> bout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span>bout<span class="token punctuation">)</span><span class="token punctuation">;</span>        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ByteArrayInputStream</span> bin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>bout<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span>bin<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// **è¯´æ˜ï¼š**è°ƒç”¨ByteArrayInputStreamæˆ–ByteArrayOutputStreamå¯¹è±¡çš„closeæ–¹æ³•æ²¡æœ‰ä»»ä½•æ„ä¹‰</span>        <span class="token comment">// è¿™ä¸¤ä¸ªåŸºäºå†…å­˜çš„æµåªè¦åƒåœ¾å›æ”¶å™¨æ¸…ç†å¯¹è±¡å°±èƒ½å¤Ÿé‡Šæ”¾èµ„æºï¼Œè¿™ä¸€ç‚¹ä¸åŒäºå¯¹å¤–éƒ¨èµ„æºï¼ˆå¦‚æ–‡ä»¶æµï¼‰çš„é‡Šæ”¾</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä¸‹é¢æ˜¯æµ‹è¯•ä»£ç ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span><span class="token punctuation">;</span><span class="token comment">/** * äººç±» */</span><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">9102017020286042305L</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">// å§“å</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>        <span class="token comment">// å¹´é¾„</span>    <span class="token keyword">private</span> <span class="token class-name">Car</span> car<span class="token punctuation">;</span>        <span class="token comment">// åº§é©¾</span>    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span> <span class="token class-name">Car</span> car<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>car <span class="token operator">=</span> car<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">Car</span> <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> car<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCar</span><span class="token punctuation">(</span><span class="token class-name">Car</span> car<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>car <span class="token operator">=</span> car<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Person [name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">", car="</span> <span class="token operator">+</span> car <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * å°æ±½è½¦ç±» */</span><span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> serialVersionUID <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">5713945027627603702L</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> brand<span class="token punctuation">;</span>       <span class="token comment">// å“ç‰Œ</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> maxSpeed<span class="token punctuation">;</span>       <span class="token comment">// æœ€é«˜æ—¶é€Ÿ</span>    <span class="token keyword">public</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token class-name">String</span> brand<span class="token punctuation">,</span> <span class="token keyword">int</span> maxSpeed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> brand<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>maxSpeed <span class="token operator">=</span> maxSpeed<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getBrand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> brand<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBrand</span><span class="token punctuation">(</span><span class="token class-name">String</span> brand<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>brand <span class="token operator">=</span> brand<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getMaxSpeed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> maxSpeed<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMaxSpeed</span><span class="token punctuation">(</span><span class="token keyword">int</span> maxSpeed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>maxSpeed <span class="token operator">=</span> maxSpeed<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token string">"Car [brand="</span> <span class="token operator">+</span> brand <span class="token operator">+</span> <span class="token string">", maxSpeed="</span> <span class="token operator">+</span> maxSpeed <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">CloneTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">"Hao LUO"</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token string">"Benz"</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Person</span> p2 <span class="token operator">=</span> <span class="token class-name">MyUtil</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ·±åº¦å…‹éš†</span>            p2<span class="token punctuation">.</span><span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setBrand</span><span class="token punctuation">(</span><span class="token string">"BYD"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// ä¿®æ”¹å…‹éš†çš„ Person å¯¹è±¡ p2 å…³è”çš„æ±½è½¦å¯¹è±¡çš„å“ç‰Œå±æ€§</span>            <span class="token comment">// åŸæ¥çš„ Person å¯¹è±¡ p1 å…³è”çš„æ±½è½¦ä¸ä¼šå—åˆ°ä»»ä½•å½±å“</span>            <span class="token comment">// å› ä¸ºåœ¨å…‹éš† Person å¯¹è±¡æ—¶å…¶å…³è”çš„æ±½è½¦å¯¹è±¡ä¹Ÿè¢«å…‹éš†äº†</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong>åŸºäºåºåˆ—åŒ–å’Œååºåˆ—åŒ–å®ç°çš„å…‹éš†ä¸ä»…ä»…æ˜¯æ·±åº¦å…‹éš†ï¼Œæ›´é‡è¦çš„æ˜¯é€šè¿‡æ³›å‹é™å®šï¼Œå¯ä»¥æ£€æŸ¥å‡ºè¦å…‹éš†çš„å¯¹è±¡æ˜¯å¦æ”¯æŒåºåˆ—åŒ–ï¼Œè¿™é¡¹æ£€æŸ¥æ˜¯ç¼–è¯‘å™¨å®Œæˆçš„ï¼Œä¸æ˜¯åœ¨è¿è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™ç§æ˜¯æ–¹æ¡ˆæ˜æ˜¾ä¼˜äºä½¿ç”¨ <code>Object</code> ç±»çš„ <code>clone()</code> æ–¹æ³•å…‹éš†å¯¹è±¡ã€‚è®©é—®é¢˜åœ¨ç¼–è¯‘çš„æ—¶å€™æš´éœ²å‡ºæ¥æ€»æ˜¯å¥½è¿‡æŠŠé—®é¢˜ç•™åˆ°è¿è¡Œæ—¶ã€‚</p><blockquote><h3 id="GC-æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦æœ‰-GCï¼Ÿ"><a href="#GC-æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦æœ‰-GCï¼Ÿ" class="headerlink" title="GC æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦æœ‰ GCï¼Ÿ"></a>GC æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦æœ‰ GCï¼Ÿ</h3></blockquote><p>ç­”ï¼šGC æ˜¯åƒåœ¾æ”¶é›†çš„æ„æ€ï¼Œå†…å­˜å¤„ç†æ˜¯ç¼–ç¨‹äººå‘˜å®¹æ˜“å‡ºç°é—®é¢˜çš„åœ°æ–¹ï¼Œå¿˜è®°æˆ–è€…é”™è¯¯çš„å†…å­˜å›æ”¶ä¼šå¯¼è‡´ç¨‹åºæˆ–ç³»ç»Ÿçš„ä¸ç¨³å®šç”šè‡³å´©æºƒï¼ŒJava æä¾›çš„ GC åŠŸèƒ½å¯ä»¥è‡ªåŠ¨ç›‘æµ‹å¯¹è±¡æ˜¯å¦è¶…è¿‡ä½œç”¨åŸŸä»è€Œè¾¾åˆ°è‡ªåŠ¨å›æ”¶å†…å­˜çš„ç›®çš„ï¼ŒJava è¯­è¨€æ²¡æœ‰æä¾›é‡Šæ”¾å·²åˆ†é…å†…å­˜çš„æ˜¾ç¤ºæ“ä½œæ–¹æ³•ã€‚Java ç¨‹åºå‘˜ä¸ç”¨æ‹…å¿ƒå†…å­˜ç®¡ç†ï¼Œå› ä¸ºåƒåœ¾æ”¶é›†å™¨ä¼šè‡ªåŠ¨è¿›è¡Œç®¡ç†ã€‚è¦è¯·æ±‚åƒåœ¾æ”¶é›†ï¼Œå¯ä»¥è°ƒç”¨ä¸‹é¢çš„æ–¹æ³•ä¹‹ä¸€ï¼š<code>System.gc()</code> æˆ– <code>Runtime.getRuntime().gc()</code> ï¼Œä½† JVM å¯ä»¥å±è”½æ‰æ˜¾ç¤ºçš„åƒåœ¾å›æ”¶è°ƒç”¨ã€‚</p><p>åƒåœ¾å›æ”¶å¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢å†…å­˜æ³„éœ²ï¼Œæœ‰æ•ˆçš„ä½¿ç”¨å¯ä»¥ä½¿ç”¨çš„å†…å­˜ã€‚åƒåœ¾å›æ”¶å™¨é€šå¸¸æ˜¯ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹è¿è¡Œï¼Œä¸å¯é¢„çŸ¥çš„æƒ…å†µä¸‹å¯¹å†…å­˜å †ä¸­å·²ç»æ­»äº¡çš„æˆ–è€…é•¿æ—¶é—´æ²¡æœ‰ä½¿ç”¨çš„å¯¹è±¡è¿›è¡Œæ¸…é™¤å’Œå›æ”¶ï¼Œç¨‹åºå‘˜ä¸èƒ½å®æ—¶çš„è°ƒç”¨åƒåœ¾å›æ”¶å™¨å¯¹æŸä¸ªå¯¹è±¡æˆ–æ‰€æœ‰å¯¹è±¡è¿›è¡Œåƒåœ¾å›æ”¶ã€‚åœ¨ Java è¯ç”ŸåˆæœŸï¼Œåƒåœ¾å›æ”¶æ˜¯ Java æœ€å¤§çš„äº®ç‚¹ä¹‹ä¸€ï¼Œå› ä¸ºæœåŠ¡å™¨ç«¯çš„ç¼–ç¨‹éœ€è¦æœ‰æ•ˆçš„é˜²æ­¢å†…å­˜æ³„éœ²é—®é¢˜ï¼Œç„¶è€Œæ—¶è¿‡å¢ƒè¿ï¼Œå¦‚ä»Š Java çš„åƒåœ¾å›æ”¶æœºåˆ¶å·²ç»æˆä¸ºè¢«è¯Ÿç—…çš„ä¸œè¥¿ã€‚ç§»åŠ¨æ™ºèƒ½ç»ˆç«¯ç”¨æˆ·é€šå¸¸è§‰å¾— iOS çš„ç³»ç»Ÿæ¯” Android ç³»ç»Ÿæœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œå…¶ä¸­ä¸€ä¸ªæ·±å±‚æ¬¡çš„åŸå› å°±åœ¨äº Android ç³»ç»Ÿä¸­åƒåœ¾å›æ”¶çš„ä¸å¯é¢„çŸ¥æ€§ã€‚</p><p><strong>è¡¥å……ï¼š</strong>åƒåœ¾å›æ”¶æœºåˆ¶æœ‰å¾ˆå¤šç§ï¼ŒåŒ…æ‹¬ï¼šåˆ†ä»£å¤åˆ¶åƒåœ¾å›æ”¶ã€æ ‡è®°åƒåœ¾å›æ”¶ã€å¢é‡åƒåœ¾å›æ”¶ç­‰æ–¹å¼ã€‚æ ‡å‡†çš„ Java è¿›ç¨‹æ—¢æœ‰æ ˆåˆæœ‰å †ã€‚æ ˆä¿å­˜äº†åŸå§‹å‹å±€éƒ¨å˜é‡ï¼Œå †ä¿å­˜äº†è¦åˆ›å»ºçš„å¯¹è±¡ã€‚Java å¹³å°å¯¹å †å†…å­˜å›æ”¶å’Œå†åˆ©ç”¨çš„åŸºæœ¬ç®—æ³•è¢«ç§°ä¸ºæ ‡è®°å’Œæ¸…é™¤ï¼Œä½†æ˜¯ Java å¯¹å…¶è¿›è¡Œäº†æ”¹è¿›ï¼Œé‡‡ç”¨â€œåˆ†ä»£å¼åƒåœ¾æ”¶é›†â€ã€‚è¿™ç§æ–¹æ³•ä¼šè·Ÿ Java å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå°†å †å†…å­˜åˆ’åˆ†ä¸ºä¸åŒçš„åŒºåŸŸï¼Œåœ¨åƒåœ¾æ”¶é›†è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå°†å¯¹è±¡ç§»åŠ¨åˆ°ä¸åŒåŒºåŸŸï¼š</p><ul><li>ä¼Šç”¸å›­ï¼ˆEdenï¼‰ï¼šè¿™æ˜¯å¯¹è±¡æœ€åˆè¯ç”Ÿçš„åŒºåŸŸï¼Œå¹¶ä¸”å¯¹å¤§å¤šæ•°å¯¹è±¡æ¥è¯´ï¼Œè¿™é‡Œæ˜¯å®ƒä»¬å”¯ä¸€å­˜åœ¨è¿‡çš„åŒºåŸŸã€‚</li><li>å¹¸å­˜è€…ä¹å›­ï¼ˆSurvivorï¼‰ï¼šä»ä¼Šç”¸å›­å¹¸å­˜ä¸‹æ¥çš„å¯¹è±¡ä¼šè¢«æŒªåˆ°è¿™é‡Œã€‚</li><li>ç»ˆèº«é¢å…»å›­ï¼ˆTenuredï¼‰ï¼šè¿™æ˜¯è¶³å¤Ÿè€çš„å¹¸å­˜å¯¹è±¡çš„å½’å®¿ã€‚å¹´è½»ä»£æ”¶é›†ï¼ˆMinor-GCï¼‰è¿‡ç¨‹æ˜¯ä¸ä¼šè§¦åŠè¿™ä¸ªåœ°æ–¹çš„ã€‚å½“å¹´è½»ä»£æ”¶é›†ä¸èƒ½æŠŠå¯¹è±¡æ”¾è¿›ç»ˆèº«é¢å…»å›­æ—¶ï¼Œå°±ä¼šè§¦å‘ä¸€æ¬¡å®Œå…¨æ”¶é›†ï¼ˆMajor-GCï¼‰ï¼Œè¿™é‡Œå¯èƒ½è¿˜ä¼šç‰µæ‰¯åˆ°å‹ç¼©ï¼Œä»¥ä¾¿ä¸ºå¤§å¯¹è±¡è…¾å‡ºè¶³å¤Ÿçš„ç©ºé—´ã€‚</li></ul><p>ä¸åƒåœ¾å›æ”¶ç›¸å…³çš„ JVM å‚æ•°ï¼š</p><ul><li><code>-Xms / -Xmx</code>ï¼šå †çš„åˆå§‹å¤§å° / å †çš„æœ€å¤§å¤§å°</li><li><code>-Xmn</code>ï¼šå †ä¸­å¹´è½»ä»£çš„å¤§å°</li><li><code>-XX:-DisableExplicitGC</code>ï¼šè®©System.gc()ä¸äº§ç”Ÿä»»ä½•ä½œç”¨</li><li><code>-XX:+PrintGCDetails</code>ï¼šæ‰“å°GCçš„ç»†èŠ‚</li><li><code>-XX:+PrintGCDateStamps</code>ï¼šæ‰“å°GCæ“ä½œçš„æ—¶é—´æˆ³</li><li><code>-XX:NewSize / XX:MaxNewSize</code>ï¼šè®¾ç½®æ–°ç”Ÿä»£å¤§å°/æ–°ç”Ÿä»£æœ€å¤§å¤§å°</li><li><code>-XX:NewRatio</code>ï¼šå¯ä»¥è®¾ç½®è€ç”Ÿä»£å’Œæ–°ç”Ÿä»£çš„æ¯”ä¾‹</li><li><code>-XX:PrintTenuringDistribution</code>ï¼šè®¾ç½®æ¯æ¬¡æ–°ç”Ÿä»£GCåè¾“å‡ºå¹¸å­˜è€…ä¹å›­ä¸­å¯¹è±¡å¹´é¾„çš„åˆ†å¸ƒ</li><li><code>-XX:InitialTenuringThreshold / -XX:MaxTenuringThreshold</code>ï¼šè®¾ç½®è€å¹´ä»£é˜€å€¼çš„åˆå§‹å€¼å’Œæœ€å¤§å€¼</li><li><code>-XX:TargetSurvivorRatio</code>ï¼šè®¾ç½®å¹¸å­˜åŒºçš„ç›®æ ‡ä½¿ç”¨ç‡</li></ul><blockquote><h3 id="String-s-new-String-quot-xyz-quot-åˆ›å»ºäº†å‡ ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Ÿ"><a href="#String-s-new-String-quot-xyz-quot-åˆ›å»ºäº†å‡ ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Ÿ" class="headerlink" title="String s = new String(&quot;xyz&quot;); åˆ›å»ºäº†å‡ ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Ÿ"></a><code>String s = new String(&quot;xyz&quot;);</code> åˆ›å»ºäº†å‡ ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Ÿ</h3></blockquote><p>ç­”ï¼šä¸¤ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯é™æ€åŒºçš„ <code>&quot;xyz&quot;</code>ï¼Œä¸€ä¸ªæ˜¯ç”¨ <code>new</code> åˆ›å»ºåœ¨å †ä¸Šçš„å¯¹è±¡ã€‚</p><blockquote><h3 id="æ¥å£æ˜¯å¦å¯ç»§æ‰¿ï¼ˆextendsï¼‰æ¥å£ï¼ŸæŠ½è±¡ç±»æ˜¯å¦å¯å®ç°ï¼ˆimplementsï¼‰æ¥å£ï¼ŸæŠ½è±¡ç±»æ˜¯å¦å¯ç»§æ‰¿å…·ä½“ç±»ï¼ˆconcrete-classï¼‰ï¼Ÿ"><a href="#æ¥å£æ˜¯å¦å¯ç»§æ‰¿ï¼ˆextendsï¼‰æ¥å£ï¼ŸæŠ½è±¡ç±»æ˜¯å¦å¯å®ç°ï¼ˆimplementsï¼‰æ¥å£ï¼ŸæŠ½è±¡ç±»æ˜¯å¦å¯ç»§æ‰¿å…·ä½“ç±»ï¼ˆconcrete-classï¼‰ï¼Ÿ" class="headerlink" title="æ¥å£æ˜¯å¦å¯ç»§æ‰¿ï¼ˆextendsï¼‰æ¥å£ï¼ŸæŠ½è±¡ç±»æ˜¯å¦å¯å®ç°ï¼ˆimplementsï¼‰æ¥å£ï¼ŸæŠ½è±¡ç±»æ˜¯å¦å¯ç»§æ‰¿å…·ä½“ç±»ï¼ˆconcrete classï¼‰ï¼Ÿ"></a>æ¥å£æ˜¯å¦å¯ç»§æ‰¿ï¼ˆextendsï¼‰æ¥å£ï¼ŸæŠ½è±¡ç±»æ˜¯å¦å¯å®ç°ï¼ˆimplementsï¼‰æ¥å£ï¼ŸæŠ½è±¡ç±»æ˜¯å¦å¯ç»§æ‰¿å…·ä½“ç±»ï¼ˆconcrete classï¼‰ï¼Ÿ</h3></blockquote><p>ç­”ï¼šæ¥å£å¯ä»¥ç»§æ‰¿æ¥å£ï¼Œè€Œä¸”æ”¯æŒå¤šé‡ç»§æ‰¿ã€‚æŠ½è±¡ç±»å¯ä»¥å®ç°ï¼ˆimplementsï¼‰æ¥å£ï¼ŒæŠ½è±¡ç±»å¯ç»§æ‰¿å…·ä½“ç±»ä¹Ÿå¯ä»¥ç»§æ‰¿æŠ½è±¡ç±»ã€‚</p><blockquote><h3 id="ä¸€ä¸ª-java-æºæ–‡ä»¶ä¸­æ˜¯å¦å¯ä»¥åŒ…å«å¤šä¸ªç±»ï¼ˆä¸æ˜¯å†…éƒ¨ç±»ï¼‰ï¼Ÿæœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ"><a href="#ä¸€ä¸ª-java-æºæ–‡ä»¶ä¸­æ˜¯å¦å¯ä»¥åŒ…å«å¤šä¸ªç±»ï¼ˆä¸æ˜¯å†…éƒ¨ç±»ï¼‰ï¼Ÿæœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ" class="headerlink" title="ä¸€ä¸ª .java æºæ–‡ä»¶ä¸­æ˜¯å¦å¯ä»¥åŒ…å«å¤šä¸ªç±»ï¼ˆä¸æ˜¯å†…éƒ¨ç±»ï¼‰ï¼Ÿæœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ"></a>ä¸€ä¸ª <code>.java</code> æºæ–‡ä»¶ä¸­æ˜¯å¦å¯ä»¥åŒ…å«å¤šä¸ªç±»ï¼ˆä¸æ˜¯å†…éƒ¨ç±»ï¼‰ï¼Ÿæœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¯ä»¥ï¼Œä½†ä¸€ä¸ªæºæ–‡ä»¶ä¸­æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªå…¬å¼€ç±»ï¼ˆpublic classï¼‰è€Œä¸”æ–‡ä»¶åå¿…é¡»å’Œå…¬å¼€ç±»çš„ç±»åå®Œå…¨ä¿æŒä¸€è‡´ã€‚</p><blockquote><h3 id="Anonymous-Inner-Classï¼ˆåŒ¿åå†…éƒ¨ç±»ï¼‰æ˜¯å¦å¯ä»¥ç»§æ‰¿å…¶å®ƒç±»ï¼Ÿæ˜¯å¦å¯ä»¥å®ç°æ¥å£ï¼Ÿ"><a href="#Anonymous-Inner-Classï¼ˆåŒ¿åå†…éƒ¨ç±»ï¼‰æ˜¯å¦å¯ä»¥ç»§æ‰¿å…¶å®ƒç±»ï¼Ÿæ˜¯å¦å¯ä»¥å®ç°æ¥å£ï¼Ÿ" class="headerlink" title="Anonymous Inner Classï¼ˆåŒ¿åå†…éƒ¨ç±»ï¼‰æ˜¯å¦å¯ä»¥ç»§æ‰¿å…¶å®ƒç±»ï¼Ÿæ˜¯å¦å¯ä»¥å®ç°æ¥å£ï¼Ÿ"></a>Anonymous Inner Classï¼ˆåŒ¿åå†…éƒ¨ç±»ï¼‰æ˜¯å¦å¯ä»¥ç»§æ‰¿å…¶å®ƒç±»ï¼Ÿæ˜¯å¦å¯ä»¥å®ç°æ¥å£ï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¯ä»¥ç»§æ‰¿å…¶ä»–ç±»æˆ–å®ç°å…¶ä»–æ¥å£ï¼Œåœ¨ Swing ç¼–ç¨‹å’Œ Android å¼€å‘ä¸­å¸¸ç”¨æ­¤æ–¹å¼æ¥å®ç°äº‹ä»¶ç›‘å¬å’Œå›è°ƒã€‚</p><blockquote><h3 id="å†…éƒ¨ç±»å¯ä»¥å¼•ç”¨å®ƒçš„åŒ…å«ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰çš„æˆå‘˜å—ï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ"><a href="#å†…éƒ¨ç±»å¯ä»¥å¼•ç”¨å®ƒçš„åŒ…å«ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰çš„æˆå‘˜å—ï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ" class="headerlink" title="å†…éƒ¨ç±»å¯ä»¥å¼•ç”¨å®ƒçš„åŒ…å«ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰çš„æˆå‘˜å—ï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ"></a>å†…éƒ¨ç±»å¯ä»¥å¼•ç”¨å®ƒçš„åŒ…å«ç±»ï¼ˆå¤–éƒ¨ç±»ï¼‰çš„æˆå‘˜å—ï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿ</h3></blockquote><p>ç­”ï¼šä¸€ä¸ªå†…éƒ¨ç±»å¯¹è±¡å¯ä»¥è®¿é—®åˆ›å»ºå®ƒçš„å¤–éƒ¨ç±»å¯¹è±¡çš„æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰æˆå‘˜ã€‚</p><blockquote><h3 id="Java-ä¸­çš„-final-å…³é”®å­—æœ‰å“ªäº›ç”¨æ³•ï¼Ÿ"><a href="#Java-ä¸­çš„-final-å…³é”®å­—æœ‰å“ªäº›ç”¨æ³•ï¼Ÿ" class="headerlink" title="Java ä¸­çš„ final å…³é”®å­—æœ‰å“ªäº›ç”¨æ³•ï¼Ÿ"></a>Java ä¸­çš„ <code>final</code> å…³é”®å­—æœ‰å“ªäº›ç”¨æ³•ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li>ä¿®é¥°ç±»ï¼šè¡¨ç¤ºè¯¥ç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼›</li><li>ä¿®é¥°æ–¹æ³•ï¼šè¡¨ç¤ºæ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼›</li><li>ä¿®é¥°å˜é‡ï¼šè¡¨ç¤ºå˜é‡åªèƒ½ä¸€æ¬¡èµ‹å€¼ä»¥åå€¼ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆå¸¸é‡ï¼‰ã€‚</li></ul><blockquote><h3 id="æŒ‡å‡ºä¸‹é¢ç¨‹åºçš„è¿è¡Œç»“æœã€‚"><a href="#æŒ‡å‡ºä¸‹é¢ç¨‹åºçš„è¿è¡Œç»“æœã€‚" class="headerlink" title="æŒ‡å‡ºä¸‹é¢ç¨‹åºçš„è¿è¡Œç»“æœã€‚"></a>æŒ‡å‡ºä¸‹é¢ç¨‹åºçš„è¿è¡Œç»“æœã€‚</h3></blockquote><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">&#123;</span>    <span class="token keyword">static</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">public</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">A</span> ab <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ab <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ç­”ï¼šæ‰§è¡Œç»“æœï¼š<code>1a2b2b</code>ã€‚åˆ›å»ºå¯¹è±¡æ—¶æ„é€ å™¨çš„è°ƒç”¨é¡ºåºæ˜¯ï¼šå…ˆåˆå§‹åŒ–é™æ€æˆå‘˜ï¼Œç„¶åè°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œå†åˆå§‹åŒ–éé™æ€æˆå‘˜ï¼Œæœ€åè°ƒç”¨è‡ªèº«æ„é€ å™¨ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>å¦‚æœä¸èƒ½ç»™å‡ºæ­¤é¢˜çš„æ­£ç¡®ç­”æ¡ˆï¼Œè¯´æ˜ä¹‹å‰ç¬¬ 21 é¢˜ Java ç±»åŠ è½½æœºåˆ¶è¿˜æ²¡æœ‰å®Œå…¨ç†è§£ï¼Œèµ¶ç´§å†çœ‹çœ‹å§ã€‚</p><blockquote><h3 id="æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼š"><a href="#æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼š" class="headerlink" title="æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼š"></a>æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼š</h3><ul><li>å¦‚ä½•å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Ÿ</li><li>å¦‚ä½•å°†åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Ÿ</li></ul></blockquote><p>ç­”ï¼š</p><ul><li>è°ƒç”¨åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»ä¸­çš„æ–¹æ³• <code>parseXXX(String)</code> æˆ– <code>valueOf(String)</code> å³å¯è¿”å›ç›¸åº”åŸºæœ¬ç±»å‹ï¼›</li><li>ä¸€ç§æ–¹æ³•æ˜¯å°†åŸºæœ¬æ•°æ®ç±»å‹ä¸ç©ºå­—ç¬¦ä¸²ï¼ˆ<code>&quot;&quot;</code>ï¼‰è¿æ¥ï¼ˆ<code>+</code>ï¼‰å³å¯è·å¾—å…¶æ‰€å¯¹åº”çš„å­—ç¬¦ä¸²ï¼›å¦ä¸€ç§æ–¹æ³•æ˜¯è°ƒç”¨ <code>String</code> ç±»ä¸­çš„ <code>valueOf()</code> æ–¹æ³•è¿”å›ç›¸åº”å­—ç¬¦ä¸²</li></ul><blockquote><h3 id="å¦‚ä½•å®ç°å­—ç¬¦ä¸²çš„åè½¬åŠæ›¿æ¢ï¼Ÿ"><a href="#å¦‚ä½•å®ç°å­—ç¬¦ä¸²çš„åè½¬åŠæ›¿æ¢ï¼Ÿ" class="headerlink" title="å¦‚ä½•å®ç°å­—ç¬¦ä¸²çš„åè½¬åŠæ›¿æ¢ï¼Ÿ"></a>å¦‚ä½•å®ç°å­—ç¬¦ä¸²çš„åè½¬åŠæ›¿æ¢ï¼Ÿ</h3></blockquote><p>ç­”ï¼šæ–¹æ³•å¾ˆå¤šï¼Œå¯ä»¥è‡ªå·±å†™å®ç°ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>String</code> æˆ– <code>StringBuffer/StringBuilder</code> ä¸­çš„æ–¹æ³•ã€‚æœ‰ä¸€é“å¾ˆå¸¸è§çš„é¢è¯•é¢˜æ˜¯ç”¨é€’å½’å®ç°å­—ç¬¦ä¸²åè½¬ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token class-name">String</span> originStr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>originStr <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> originStr<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>         <span class="token keyword">return</span> originStr<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">reverse</span><span class="token punctuation">(</span>originStr<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> originStr<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="æ€æ ·å°†-GB2312-ç¼–ç çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º-ISO-8859-1-ç¼–ç çš„å­—ç¬¦ä¸²ï¼Ÿ"><a href="#æ€æ ·å°†-GB2312-ç¼–ç çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º-ISO-8859-1-ç¼–ç çš„å­—ç¬¦ä¸²ï¼Ÿ" class="headerlink" title="æ€æ ·å°† GB2312 ç¼–ç çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º ISO-8859-1 ç¼–ç çš„å­—ç¬¦ä¸²ï¼Ÿ"></a>æ€æ ·å°† GB2312 ç¼–ç çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º ISO-8859-1 ç¼–ç çš„å­—ç¬¦ä¸²ï¼Ÿ</h3></blockquote><p>ç­”ï¼šä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">"ä½ å¥½"</span><span class="token punctuation">;</span><span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>s1<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"GB2312"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"ISO-8859-1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><blockquote><h3 id="æ—¥æœŸå’Œæ—¶é—´ï¼š"><a href="#æ—¥æœŸå’Œæ—¶é—´ï¼š" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´ï¼š"></a>æ—¥æœŸå’Œæ—¶é—´ï¼š</h3><p>é—®é¢˜1ï¼šå¦‚ä½•å–å¾—å¹´æœˆæ—¥ã€å°æ—¶åˆ†é’Ÿç§’ï¼Ÿ</p></blockquote><p>åˆ›å»º <code>java.util.Calendar</code> å®ä¾‹ï¼Œè°ƒç”¨å…¶ <code>get()</code> æ–¹æ³•ä¼ å…¥ä¸åŒçš„å‚æ•°å³å¯è·å¾—å‚æ•°æ‰€å¯¹åº”çš„å€¼ã€‚Java 8ä¸­å¯ä»¥ä½¿ç”¨ <code>java.time.LocalDateTime</code> æ¥è·å–ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DateTimeTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Calendar</span> cal <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>YEAR<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>MONTH<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 0 - 11</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DATE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>HOUR_OF_DAY<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>MINUTE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cal<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>SECOND<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Java 8</span>        <span class="token class-name">LocalDateTime</span> dt <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span><span class="token function">getMonthValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 1 - 12</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span><span class="token function">getDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span><span class="token function">getHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span><span class="token function">getMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span><span class="token function">getSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><p>é—®é¢˜2ï¼šå¦‚ä½•å–å¾—ä» 1970 å¹´ 1 æœˆ 1 æ—¥ 0 æ—¶ 0 åˆ† 0 ç§’åˆ°ç°åœ¨çš„æ¯«ç§’æ•°ï¼Ÿ</p></blockquote><p>ä»¥ä¸‹æ–¹æ³•å‡å¯è·å¾—è¯¥æ¯«ç§’æ•°ã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTimeInMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Clock</span><span class="token punctuation">.</span><span class="token function">systemDefaultZone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">millis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Java 8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><blockquote><p>é—®é¢˜3ï¼šå¦‚ä½•å–å¾—æŸæœˆçš„æœ€åä¸€å¤©ï¼Ÿ</p></blockquote><p>ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Calendar</span> time <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>time<span class="token punctuation">.</span><span class="token function">getActualMaximum</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><blockquote><p>é—®é¢˜4ï¼šå¦‚ä½•æ ¼å¼åŒ–æ—¥æœŸï¼Ÿ</p></blockquote><p>åˆ©ç”¨ <code>java.text.DataFormat</code> çš„å­ç±»ï¼ˆå¦‚ <code>SimpleDateFormat</code> ç±»ï¼‰ä¸­çš„ <code>format(Date)</code> æ–¹æ³•å¯å°†æ—¥æœŸæ ¼å¼åŒ–ã€‚Java 8 ä¸­å¯ä»¥ç”¨ <code>java.time.format.DateTimeFormatter</code> æ¥æ ¼å¼åŒ–æ—¶é—´æ—¥æœŸï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDate</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span>format<span class="token punctuation">.</span></span><span class="token class-name">DateTimeFormatter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">DateFormatTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">SimpleDateFormat</span> oldFormatter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy/MM/dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Date</span> date1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>oldFormatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Java 8</span>        <span class="token class-name">DateTimeFormatter</span> newFormatter <span class="token operator">=</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy/MM/dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">LocalDate</span> date2 <span class="token operator">=</span> <span class="token class-name">LocalDate</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>date2<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>newFormatter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è¡¥å……ï¼š</strong>Java çš„æ—¶é—´æ—¥æœŸ API ä¸€ç›´ä»¥æ¥éƒ½æ˜¯è¢«è¯Ÿç—…çš„ä¸œè¥¿ï¼Œä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒJava 8 ä¸­å¼•å…¥äº†æ–°çš„æ—¶é—´æ—¥æœŸ APIï¼Œå…¶ä¸­åŒ…æ‹¬ <code>LocalDate</code>ã€<code>LocalTime</code>ã€<code>LocalDateTime</code>ã€<code>Clock</code>ã€<code>Instant</code> ç­‰ç±»ï¼Œè¿™äº›çš„ç±»çš„è®¾è®¡éƒ½ä½¿ç”¨äº†ä¸å˜æ¨¡å¼ï¼Œå› æ­¤æ˜¯çº¿ç¨‹å®‰å…¨çš„è®¾è®¡ã€‚å¦‚æœä¸ç†è§£è¿™äº›å†…å®¹ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« <a href="https://blog.csdn.net/jackfrued/article/details/44499227">ã€Šå…³äº Java å¹¶å‘ç¼–ç¨‹çš„æ€»ç»“å’Œæ€è€ƒã€‹</a>ã€‚</p><blockquote><h3 id="æ‰“å°æ˜¨å¤©çš„å½“å‰æ—¶åˆ»ã€‚"><a href="#æ‰“å°æ˜¨å¤©çš„å½“å‰æ—¶åˆ»ã€‚" class="headerlink" title="æ‰“å°æ˜¨å¤©çš„å½“å‰æ—¶åˆ»ã€‚"></a>æ‰“å°æ˜¨å¤©çš„å½“å‰æ—¶åˆ»ã€‚</h3></blockquote><p>ç­”ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Calendar</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">YesterdayCurrent</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token class-name">Calendar</span> cal <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cal<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DATE<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cal<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>åœ¨Java 8ä¸­ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">LocalDateTime</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">YesterdayCurrent</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">LocalDateTime</span> today <span class="token operator">=</span> <span class="token class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">LocalDateTime</span> yesterday <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">minusDays</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>yesterday<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><blockquote><h3 id="æ¯”è¾ƒä¸€ä¸‹-Java-å’Œ-JavaSciprtã€‚"><a href="#æ¯”è¾ƒä¸€ä¸‹-Java-å’Œ-JavaSciprtã€‚" class="headerlink" title="æ¯”è¾ƒä¸€ä¸‹ Java å’Œ JavaSciprtã€‚"></a>æ¯”è¾ƒä¸€ä¸‹ Java å’Œ JavaSciprtã€‚</h3></blockquote><p>ç­”ï¼šJavaScript ä¸ Java æ˜¯ä¸¤ä¸ªå…¬å¸å¼€å‘çš„ä¸åŒçš„ä¸¤ä¸ªäº§å“ã€‚Java æ˜¯åŸ Sun Microsystems å…¬å¸æ¨å‡ºçš„é¢å‘å¯¹è±¡çš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œç‰¹åˆ«é€‚åˆäºäº’è”ç½‘åº”ç”¨ç¨‹åºå¼€å‘ï¼›è€Œ JavaScript æ˜¯ Netscape å…¬å¸çš„äº§å“ï¼Œä¸ºäº†æ‰©å±• Netscape æµè§ˆå™¨çš„åŠŸèƒ½è€Œå¼€å‘çš„ä¸€ç§å¯ä»¥åµŒå…¥ Web é¡µé¢ä¸­è¿è¡Œçš„åŸºäºå¯¹è±¡å’Œäº‹ä»¶é©±åŠ¨çš„è§£é‡Šæ€§è¯­è¨€ã€‚JavaScript çš„å‰èº«æ˜¯ LiveScriptï¼›è€Œ Java çš„å‰èº«æ˜¯ Oak è¯­è¨€ã€‚</p><p>ä¸‹é¢å¯¹ä¸¤ç§è¯­è¨€é—´çš„å¼‚åŒä½œå¦‚ä¸‹æ¯”è¾ƒï¼š</p><ul><li>åŸºäºå¯¹è±¡å’Œé¢å‘å¯¹è±¡ï¼šJava æ˜¯ä¸€ç§çœŸæ­£çš„é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå³ä½¿æ˜¯å¼€å‘ç®€å•çš„ç¨‹åºï¼Œå¿…é¡»è®¾è®¡å¯¹è±¡ï¼› JavaScript æ˜¯ç§è„šæœ¬è¯­è¨€ï¼Œå®ƒå¯ä»¥ç”¨æ¥åˆ¶ä½œä¸ç½‘ç»œæ— å…³çš„ï¼Œä¸ç”¨æˆ·äº¤äº’ä½œç”¨çš„å¤æ‚è½¯ä»¶ã€‚å®ƒæ˜¯ä¸€ç§åŸºäºå¯¹è±¡ï¼ˆObject-Basedï¼‰å’Œäº‹ä»¶é©±åŠ¨ï¼ˆEvent-Drivenï¼‰çš„ç¼–ç¨‹è¯­è¨€ï¼Œå› è€Œå®ƒæœ¬èº«æä¾›äº†éå¸¸ä¸°å¯Œçš„å†…éƒ¨å¯¹è±¡ä¾›è®¾è®¡äººå‘˜ä½¿ç”¨ã€‚</li><li>è§£é‡Šå’Œç¼–è¯‘ï¼šJava çš„æºä»£ç åœ¨æ‰§è¡Œä¹‹å‰ï¼Œå¿…é¡»ç»è¿‡ç¼–è¯‘ã€‚JavaScript æ˜¯ä¸€ç§è§£é‡Šæ€§ç¼–ç¨‹è¯­è¨€ï¼Œå…¶æºä»£ç ä¸éœ€ç»è¿‡ç¼–è¯‘ï¼Œç”±æµè§ˆå™¨è§£é‡Šæ‰§è¡Œã€‚ï¼ˆç›®å‰çš„æµè§ˆå™¨å‡ ä¹éƒ½ä½¿ç”¨äº† JITï¼ˆå³æ—¶ç¼–è¯‘ï¼‰æŠ€æœ¯æ¥æå‡ JavaScript çš„è¿è¡Œæ•ˆç‡ï¼‰</li><li>å¼ºç±»å‹å˜é‡å’Œç±»å‹å¼±å˜é‡ï¼šJava é‡‡ç”¨å¼ºç±»å‹å˜é‡æ£€æŸ¥ï¼Œå³æ‰€æœ‰å˜é‡åœ¨ç¼–è¯‘ä¹‹å‰å¿…é¡»ä½œå£°æ˜ï¼›JavaScript ä¸­å˜é‡æ˜¯å¼±ç±»å‹çš„ï¼Œç”šè‡³åœ¨ä½¿ç”¨å˜é‡å‰å¯ä»¥ä¸ä½œå£°æ˜ï¼ŒJavaScript çš„è§£é‡Šå™¨åœ¨è¿è¡Œæ—¶æ£€æŸ¥æ¨æ–­å…¶æ•°æ®ç±»å‹ã€‚</li><li>ä»£ç æ ¼å¼ä¸ä¸€æ ·ã€‚</li></ul><p><strong>è¡¥å……ï¼š</strong>ä¸Šé¢åˆ—å‡ºçš„å››ç‚¹æ˜¯ç½‘ä¸Šæµä¼ çš„æ‰€è°“çš„æ ‡å‡†ç­”æ¡ˆã€‚å…¶å® Java å’Œ JavaScript æœ€é‡è¦çš„åŒºåˆ«æ˜¯ä¸€ä¸ªæ˜¯é™æ€è¯­è¨€ï¼Œä¸€ä¸ªæ˜¯åŠ¨æ€è¯­è¨€ã€‚ç›®å‰çš„ç¼–ç¨‹è¯­è¨€çš„å‘å±•è¶‹åŠ¿æ˜¯å‡½æ•°å¼è¯­è¨€å’ŒåŠ¨æ€è¯­è¨€ã€‚åœ¨ Java ä¸­ç±»ï¼ˆclassï¼‰æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œè€Œ JavaScript ä¸­å‡½æ•°ï¼ˆfunctionï¼‰æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå› æ­¤ JavaScript æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ Lambda å‡½æ•°å’Œé—­åŒ…ï¼ˆclosureï¼‰ï¼Œå½“ç„¶ Java 8 ä¹Ÿå¼€å§‹æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼Œæä¾›äº†å¯¹ Lambda è¡¨è¾¾å¼ä»¥åŠå‡½æ•°å¼æ¥å£çš„æ”¯æŒã€‚å¯¹äºè¿™ç±»é—®é¢˜ï¼Œåœ¨é¢è¯•çš„æ—¶å€™æœ€å¥½è¿˜æ˜¯ç”¨è‡ªå·±çš„è¯­è¨€å›ç­”ä¼šæ›´åŠ é è°±ï¼Œä¸è¦èƒŒç½‘ä¸Šæ‰€è°“çš„æ ‡å‡†ç­”æ¡ˆã€‚</p><blockquote><h3 id="ä»€ä¹ˆæ—¶å€™ç”¨æ–­è¨€ï¼ˆassertï¼‰ï¼Ÿ"><a href="#ä»€ä¹ˆæ—¶å€™ç”¨æ–­è¨€ï¼ˆassertï¼‰ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ç”¨æ–­è¨€ï¼ˆassertï¼‰ï¼Ÿ"></a>ä»€ä¹ˆæ—¶å€™ç”¨æ–­è¨€ï¼ˆassertï¼‰ï¼Ÿ</h3></blockquote><p>ç­”ï¼šæ–­è¨€åœ¨è½¯ä»¶å¼€å‘ä¸­æ˜¯ä¸€ç§å¸¸ç”¨çš„è°ƒè¯•æ–¹å¼ï¼Œå¾ˆå¤šå¼€å‘è¯­è¨€ä¸­éƒ½æ”¯æŒè¿™ç§æœºåˆ¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ–­è¨€ç”¨äºä¿è¯ç¨‹åºæœ€åŸºæœ¬ã€å…³é”®çš„æ­£ç¡®æ€§ã€‚æ–­è¨€æ£€æŸ¥é€šå¸¸åœ¨å¼€å‘å’Œæµ‹è¯•æ—¶å¼€å¯ã€‚ä¸ºäº†ä¿è¯ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œåœ¨è½¯ä»¶å‘å¸ƒåæ–­è¨€æ£€æŸ¥é€šå¸¸æ˜¯å…³é—­çš„ã€‚æ–­è¨€æ˜¯ä¸€ä¸ªåŒ…å«å¸ƒå°”è¡¨è¾¾å¼çš„è¯­å¥ï¼Œåœ¨æ‰§è¡Œè¿™ä¸ªè¯­å¥æ—¶å‡å®šè¯¥è¡¨è¾¾å¼ä¸º <code>true</code>ï¼›å¦‚æœè¡¨è¾¾å¼çš„å€¼ä¸º <code>false</code>ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šæŠ¥å‘Šä¸€ä¸ª AssertionErrorã€‚æ–­è¨€çš„ä½¿ç”¨å¦‚ä¸‹é¢çš„ä»£ç æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">assert</span><span class="token punctuation">(</span>a <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// throws an AssertionError if a &lt;= 0</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>æ–­è¨€å¯ä»¥æœ‰ä¸¤ç§å½¢å¼ï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">assert</span> <span class="token class-name">Expression1</span><span class="token punctuation">;</span><span class="token keyword">assert</span> <span class="token class-name">Expression1</span> <span class="token operator">:</span> <span class="token class-name">Expression2</span> <span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>Expression1 åº”è¯¥æ€»æ˜¯äº§ç”Ÿä¸€ä¸ªå¸ƒå°”å€¼ã€‚Expression2 å¯ä»¥æ˜¯å¾—å‡ºä¸€ä¸ªå€¼çš„ä»»æ„è¡¨è¾¾å¼ï¼›è¿™ä¸ªå€¼ç”¨äºç”Ÿæˆæ˜¾ç¤ºæ›´å¤šè°ƒè¯•ä¿¡æ¯çš„å­—ç¬¦ä¸²æ¶ˆæ¯ã€‚</p><p>è¦åœ¨è¿è¡Œæ—¶å¯ç”¨æ–­è¨€ï¼Œå¯ä»¥åœ¨å¯åŠ¨ JVM æ—¶ä½¿ç”¨ <code>-enableassertions</code> æˆ–è€… <code>-ea</code> æ ‡è®°ã€‚è¦åœ¨è¿è¡Œæ—¶é€‰æ‹©ç¦ç”¨æ–­è¨€ï¼Œå¯ä»¥åœ¨å¯åŠ¨ JVM æ—¶ä½¿ç”¨ <code>-da</code> æˆ–è€… <code>-disableassertions</code> æ ‡è®°ã€‚è¦åœ¨ç³»ç»Ÿç±»ä¸­å¯ç”¨æˆ–ç¦ç”¨æ–­è¨€ï¼Œå¯ä½¿ç”¨ <code>-esa</code> æˆ– <code>-dsa</code> æ ‡è®°ã€‚è¿˜å¯ä»¥åœ¨åŒ…çš„åŸºç¡€ä¸Šå¯ç”¨æˆ–è€…ç¦ç”¨æ–­è¨€ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>æ–­è¨€ä¸åº”è¯¥ä»¥ä»»ä½•æ–¹å¼æ”¹å˜ç¨‹åºçš„çŠ¶æ€ã€‚ç®€å•çš„è¯´ï¼Œå¦‚æœå¸Œæœ›åœ¨ä¸æ»¡è¶³æŸäº›æ¡ä»¶æ—¶é˜»æ­¢ä»£ç çš„æ‰§è¡Œï¼Œå°±å¯ä»¥è€ƒè™‘ç”¨æ–­è¨€æ¥é˜»æ­¢å®ƒã€‚</p><blockquote><h3 id="Error-å’Œ-Exceptionæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Error-å’Œ-Exceptionæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Error å’Œ Exceptionæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Error å’Œ Exceptionæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li>Error è¡¨ç¤ºç³»ç»Ÿçº§çš„é”™è¯¯å’Œç¨‹åºä¸å¿…å¤„ç†çš„å¼‚å¸¸ï¼Œæ˜¯æ¢å¤ä¸æ˜¯ä¸å¯èƒ½ä½†å¾ˆå›°éš¾çš„æƒ…å†µä¸‹çš„ä¸€ç§ä¸¥é‡é—®é¢˜ï¼›æ¯”å¦‚å†…å­˜æº¢å‡ºï¼Œä¸å¯èƒ½æŒ‡æœ›ç¨‹åºèƒ½å¤„ç†è¿™æ ·çš„æƒ…å†µï¼›</li><li>Exception è¡¨ç¤ºéœ€è¦æ•æ‰æˆ–è€…éœ€è¦ç¨‹åºè¿›è¡Œå¤„ç†çš„å¼‚å¸¸ï¼Œæ˜¯ä¸€ç§è®¾è®¡æˆ–å®ç°é—®é¢˜ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒè¡¨ç¤ºå¦‚æœç¨‹åºè¿è¡Œæ­£å¸¸ï¼Œä»ä¸ä¼šå‘ç”Ÿçš„æƒ…å†µã€‚</li></ul><p>é¢è¯•é¢˜ï¼š2005 å¹´æ‘©æ‰˜ç½—æ‹‰çš„é¢è¯•ä¸­æ›¾ç»é—®è¿‡è¿™ä¹ˆä¸€ä¸ªé—®é¢˜â€œIf a process reports a stack overflow run-time error, whatâ€™s the most possible cause?â€ï¼Œç»™äº†å››ä¸ªé€‰é¡¹ a. lack of memory; b. write on an invalid memory space; c. recursive function calling; d. array index out of boundary. Java ç¨‹åºåœ¨è¿è¡Œæ—¶ä¹Ÿå¯èƒ½ä¼šé­é‡ StackOverflowErrorï¼Œè¿™æ˜¯ä¸€ä¸ªæ— æ³•æ¢å¤çš„é”™è¯¯ï¼Œåªèƒ½é‡æ–°ä¿®æ”¹ä»£ç äº†ï¼Œè¿™ä¸ªé¢è¯•é¢˜çš„ç­”æ¡ˆæ˜¯ cã€‚å¦‚æœå†™äº†ä¸èƒ½è¿…é€Ÿæ”¶æ•›çš„é€’å½’ï¼Œåˆ™å¾ˆæœ‰å¯èƒ½å¼•å‘æ ˆæº¢å‡ºçš„é”™è¯¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">StackOverflowErrorTest</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼š</strong>ç”¨é€’å½’ç¼–å†™ç¨‹åºæ—¶ä¸€å®šè¦ç‰¢è®°ä¸¤ç‚¹ï¼š1. é€’å½’å…¬å¼ï¼›2. æ”¶æ•›æ¡ä»¶ï¼ˆä»€ä¹ˆæ—¶å€™å°±ä¸å†ç»§ç»­é€’å½’ï¼‰ã€‚</p><blockquote><h3 id="try-é‡Œæœ‰ä¸€ä¸ª-return-è¯­å¥ï¼Œé‚£ä¹ˆç´§è·Ÿåœ¨è¿™ä¸ª-try-åçš„-finally-é‡Œçš„ä»£ç ä¼šä¸ä¼šè¢«æ‰§è¡Œï¼Œä»€ä¹ˆæ—¶å€™è¢«æ‰§è¡Œï¼Œåœ¨-return-å‰è¿˜æ˜¯å"><a href="#try-é‡Œæœ‰ä¸€ä¸ª-return-è¯­å¥ï¼Œé‚£ä¹ˆç´§è·Ÿåœ¨è¿™ä¸ª-try-åçš„-finally-é‡Œçš„ä»£ç ä¼šä¸ä¼šè¢«æ‰§è¡Œï¼Œä»€ä¹ˆæ—¶å€™è¢«æ‰§è¡Œï¼Œåœ¨-return-å‰è¿˜æ˜¯å" class="headerlink" title="try{} é‡Œæœ‰ä¸€ä¸ª return è¯­å¥ï¼Œé‚£ä¹ˆç´§è·Ÿåœ¨è¿™ä¸ª try åçš„ finally{} é‡Œçš„ä»£ç ä¼šä¸ä¼šè¢«æ‰§è¡Œï¼Œä»€ä¹ˆæ—¶å€™è¢«æ‰§è¡Œï¼Œåœ¨ return å‰è¿˜æ˜¯å?"></a><code>try&#123;&#125;</code> é‡Œæœ‰ä¸€ä¸ª <code>return</code> è¯­å¥ï¼Œé‚£ä¹ˆç´§è·Ÿåœ¨è¿™ä¸ª <code>try</code> åçš„ <code>finally&#123;&#125;</code> é‡Œçš„ä»£ç ä¼šä¸ä¼šè¢«æ‰§è¡Œï¼Œä»€ä¹ˆæ—¶å€™è¢«æ‰§è¡Œï¼Œåœ¨ <code>return</code> å‰è¿˜æ˜¯å?</h3></blockquote><p>ç­”ï¼šä¼šæ‰§è¡Œï¼Œåœ¨æ–¹æ³•è¿”å›è°ƒç”¨è€…å‰æ‰§è¡Œã€‚</p><p><strong>æ³¨æ„ï¼š</strong>åœ¨ <code>finally</code> ä¸­æ”¹å˜è¿”å›å€¼çš„åšæ³•æ˜¯ä¸å¥½çš„ï¼Œå› ä¸ºå¦‚æœå­˜åœ¨ <code>finally</code> ä»£ç å—ï¼Œ<code>try</code> ä¸­çš„ <code>return</code> è¯­å¥ä¸ä¼šç«‹é©¬è¿”å›è°ƒç”¨è€…ï¼Œè€Œæ˜¯è®°å½•ä¸‹è¿”å›å€¼å¾… <code>finally</code> ä»£ç å—æ‰§è¡Œå®Œæ¯•ä¹‹åå†å‘è°ƒç”¨è€…è¿”å›å…¶å€¼ï¼Œç„¶åå¦‚æœåœ¨ <code>finally</code> ä¸­ä¿®æ”¹äº†è¿”å›å€¼ï¼Œå°±ä¼šè¿”å›ä¿®æ”¹åçš„å€¼ã€‚æ˜¾ç„¶ï¼Œåœ¨ <code>finally</code> ä¸­è¿”å›æˆ–è€…ä¿®æ”¹è¿”å›å€¼ä¼šå¯¹ç¨‹åºé€ æˆå¾ˆå¤§çš„å›°æ‰°ï¼ŒC# ä¸­ç›´æ¥ç”¨ç¼–è¯‘é”™è¯¯çš„æ–¹å¼æ¥é˜»æ­¢ç¨‹åºå‘˜å¹²è¿™ç§é¾Œé¾Šçš„äº‹æƒ…ï¼ŒJava ä¸­ä¹Ÿå¯ä»¥é€šè¿‡æå‡ç¼–è¯‘å™¨çš„è¯­æ³•æ£€æŸ¥çº§åˆ«æ¥äº§ç”Ÿè­¦å‘Šæˆ–é”™è¯¯ï¼ŒEclipse ä¸­å¯ä»¥åœ¨å¦‚å›¾æ‰€ç¤ºçš„åœ°æ–¹è¿›è¡Œè®¾ç½®ï¼Œå¼ºçƒˆå»ºè®®å°†æ­¤é¡¹è®¾ç½®ä¸ºç¼–è¯‘é”™è¯¯ã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/java_interview/46.png" alt></p><blockquote><h3 id="Java-è¯­è¨€å¦‚ä½•è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œå…³é”®å­—ï¼šthrowsã€throwã€tryã€catchã€finally-åˆ†åˆ«å¦‚ä½•ä½¿ç”¨ï¼Ÿ"><a href="#Java-è¯­è¨€å¦‚ä½•è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œå…³é”®å­—ï¼šthrowsã€throwã€tryã€catchã€finally-åˆ†åˆ«å¦‚ä½•ä½¿ç”¨ï¼Ÿ" class="headerlink" title="Java è¯­è¨€å¦‚ä½•è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œå…³é”®å­—ï¼šthrowsã€throwã€tryã€catchã€finally åˆ†åˆ«å¦‚ä½•ä½¿ç”¨ï¼Ÿ"></a>Java è¯­è¨€å¦‚ä½•è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œå…³é”®å­—ï¼š<code>throws</code>ã€<code>throw</code>ã€<code>try</code>ã€<code>catch</code>ã€<code>finally</code> åˆ†åˆ«å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h3></blockquote><p>ç­”ï¼šJava é€šè¿‡é¢å‘å¯¹è±¡çš„æ–¹æ³•è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼ŒæŠŠå„ç§ä¸åŒçš„å¼‚å¸¸è¿›è¡Œåˆ†ç±»ï¼Œå¹¶æä¾›äº†è‰¯å¥½çš„æ¥å£ã€‚åœ¨ Java ä¸­ï¼Œæ¯ä¸ªå¼‚å¸¸éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒæ˜¯ <code>Throwable</code> ç±»æˆ–å…¶å­ç±»çš„å®ä¾‹ã€‚å½“ä¸€ä¸ªæ–¹æ³•å‡ºç°å¼‚å¸¸åä¾¿æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­åŒ…å«æœ‰å¼‚å¸¸ä¿¡æ¯ï¼Œè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•å¯ä»¥æ•è·åˆ°è¿™ä¸ªå¼‚å¸¸å¹¶å¯ä»¥å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚</p><p>Java çš„å¼‚å¸¸å¤„ç†æ˜¯é€šè¿‡5ä¸ªå…³é”®è¯æ¥å®ç°çš„ï¼š<code>try</code>ã€<code>catch</code>ã€<code>throw</code>ã€<code>throws</code> å’Œ <code>finally</code>ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç”¨ <code>try</code> æ¥æ‰§è¡Œä¸€æ®µç¨‹åºï¼Œå¦‚æœç³»ç»Ÿä¼šæŠ›å‡ºï¼ˆthrowï¼‰ä¸€ä¸ªå¼‚å¸¸å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡å®ƒçš„ç±»å‹æ¥æ•è·ï¼ˆcatchï¼‰å®ƒï¼Œæˆ–é€šè¿‡æ€»æ˜¯æ‰§è¡Œä»£ç å—ï¼ˆfinallyï¼‰æ¥å¤„ç†ï¼›<code>try</code> ç”¨æ¥æŒ‡å®šä¸€å—é¢„é˜²æ‰€æœ‰å¼‚å¸¸çš„ç¨‹åºï¼›<code>catch</code> å­å¥ç´§è·Ÿåœ¨ <code>try</code> å—åé¢ï¼Œç”¨æ¥æŒ‡å®šä½ æƒ³è¦æ•è·çš„å¼‚å¸¸çš„ç±»å‹ï¼›<code>throw</code> è¯­å¥ç”¨æ¥æ˜ç¡®åœ°æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼›<code>throws</code> ç”¨æ¥å£°æ˜ä¸€ä¸ªæ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å„ç§å¼‚å¸¸ï¼ˆå½“ç„¶å£°æ˜å¼‚å¸¸æ—¶å…è®¸æ— ç—…å‘»åŸï¼‰ï¼›<code>finally</code> ä¸ºç¡®ä¿ä¸€æ®µä»£ç ä¸ç®¡å‘ç”Ÿä»€ä¹ˆå¼‚å¸¸çŠ¶å†µéƒ½è¦è¢«æ‰§è¡Œï¼›<code>try</code> è¯­å¥å¯ä»¥åµŒå¥—ï¼Œæ¯å½“é‡åˆ°ä¸€ä¸ª <code>try</code> è¯­å¥ï¼Œå¼‚å¸¸çš„ç»“æ„å°±ä¼šè¢«æ”¾å…¥å¼‚å¸¸æ ˆä¸­ï¼Œç›´åˆ°æ‰€æœ‰çš„ <code>try</code> è¯­å¥éƒ½å®Œæˆã€‚å¦‚æœä¸‹ä¸€çº§çš„ <code>try</code> è¯­å¥æ²¡æœ‰å¯¹æŸç§å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œå¼‚å¸¸æ ˆå°±ä¼šæ‰§è¡Œå‡ºæ ˆæ“ä½œï¼Œç›´åˆ°é‡åˆ°æœ‰å¤„ç†è¿™ç§å¼‚å¸¸çš„ <code>try</code> è¯­å¥æˆ–è€…æœ€ç»ˆå°†å¼‚å¸¸æŠ›ç»™ JVMã€‚</p><blockquote><h3 id="è¿è¡Œæ—¶å¼‚å¸¸ä¸å—æ£€å¼‚å¸¸æœ‰ä½•å¼‚åŒï¼Ÿ"><a href="#è¿è¡Œæ—¶å¼‚å¸¸ä¸å—æ£€å¼‚å¸¸æœ‰ä½•å¼‚åŒï¼Ÿ" class="headerlink" title="è¿è¡Œæ—¶å¼‚å¸¸ä¸å—æ£€å¼‚å¸¸æœ‰ä½•å¼‚åŒï¼Ÿ"></a>è¿è¡Œæ—¶å¼‚å¸¸ä¸å—æ£€å¼‚å¸¸æœ‰ä½•å¼‚åŒï¼Ÿ</h3></blockquote><p>ç­”ï¼šå¼‚å¸¸è¡¨ç¤ºç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„éæ­£å¸¸çŠ¶æ€ï¼Œè¿è¡Œæ—¶å¼‚å¸¸è¡¨ç¤ºè™šæ‹Ÿæœºçš„é€šå¸¸æ“ä½œä¸­å¯èƒ½é‡åˆ°çš„å¼‚å¸¸ï¼Œæ˜¯ä¸€ç§å¸¸è§è¿è¡Œé”™è¯¯ï¼Œåªè¦ç¨‹åºè®¾è®¡å¾—æ²¡æœ‰é—®é¢˜é€šå¸¸å°±ä¸ä¼šå‘ç”Ÿã€‚å—æ£€å¼‚å¸¸è·Ÿç¨‹åºè¿è¡Œçš„ä¸Šä¸‹æ–‡ç¯å¢ƒæœ‰å…³ï¼Œå³ä½¿ç¨‹åºè®¾è®¡æ— è¯¯ï¼Œä»ç„¶å¯èƒ½å› ä½¿ç”¨çš„é—®é¢˜è€Œå¼•å‘ã€‚Java ç¼–è¯‘å™¨è¦æ±‚æ–¹æ³•å¿…é¡»å£°æ˜æŠ›å‡ºå¯èƒ½å‘ç”Ÿçš„å—æ£€å¼‚å¸¸ï¼Œä½†æ˜¯å¹¶ä¸è¦æ±‚å¿…é¡»å£°æ˜æŠ›å‡ºæœªè¢«æ•è·çš„è¿è¡Œæ—¶å¼‚å¸¸ã€‚å¼‚å¸¸å’Œç»§æ‰¿ä¸€æ ·ï¼Œæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­ç»å¸¸è¢«æ»¥ç”¨çš„ä¸œè¥¿ï¼Œåœ¨ã€ŠEffective Javaã€‹ä¸­å¯¹å¼‚å¸¸çš„ä½¿ç”¨ç»™å‡ºäº†ä»¥ä¸‹æŒ‡å¯¼åŸåˆ™ï¼š</p><ul><li>ä¸è¦å°†å¼‚å¸¸å¤„ç†ç”¨äºæ­£å¸¸çš„æ§åˆ¶æµï¼ˆè®¾è®¡è‰¯å¥½çš„ API ä¸åº”è¯¥å¼ºè¿«å®ƒçš„è°ƒç”¨è€…ä¸ºäº†æ­£å¸¸çš„æ§åˆ¶æµè€Œä½¿ç”¨å¼‚å¸¸ï¼‰</li><li>å¯¹å¯ä»¥æ¢å¤çš„æƒ…å†µä½¿ç”¨å—æ£€å¼‚å¸¸ï¼Œå¯¹ç¼–ç¨‹é”™è¯¯ä½¿ç”¨è¿è¡Œæ—¶å¼‚å¸¸</li><li>é¿å…ä¸å¿…è¦çš„ä½¿ç”¨å—æ£€å¼‚å¸¸ï¼ˆå¯ä»¥é€šè¿‡ä¸€äº›çŠ¶æ€æ£€æµ‹æ‰‹æ®µæ¥é¿å…å¼‚å¸¸çš„å‘ç”Ÿï¼‰</li><li>ä¼˜å…ˆä½¿ç”¨æ ‡å‡†çš„å¼‚å¸¸</li><li>æ¯ä¸ªæ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸éƒ½è¦æœ‰æ–‡æ¡£</li><li>ä¿æŒå¼‚å¸¸çš„åŸå­æ€§</li><li>ä¸è¦åœ¨ <code>catch</code> ä¸­å¿½ç•¥æ‰æ•è·åˆ°çš„å¼‚å¸¸</li></ul><blockquote><h3 id="åˆ—å‡ºä¸€äº›ä½ å¸¸è§çš„è¿è¡Œæ—¶å¼‚å¸¸ï¼Ÿ"><a href="#åˆ—å‡ºä¸€äº›ä½ å¸¸è§çš„è¿è¡Œæ—¶å¼‚å¸¸ï¼Ÿ" class="headerlink" title="åˆ—å‡ºä¸€äº›ä½ å¸¸è§çš„è¿è¡Œæ—¶å¼‚å¸¸ï¼Ÿ"></a>åˆ—å‡ºä¸€äº›ä½ å¸¸è§çš„è¿è¡Œæ—¶å¼‚å¸¸ï¼Ÿ</h3></blockquote><p>ç­”ï¼š</p><ul><li><code>ArithmeticException</code>ï¼šç®—æœ¯å¼‚å¸¸</li><li><code>ClassCastException</code>ï¼šç±»è½¬æ¢å¼‚å¸¸</li><li><code>IllegalArgumentException</code>ï¼šéæ³•å‚æ•°å¼‚å¸¸</li><li><code>IndexOutOfBoundsException</code>ï¼šä¸‹æ ‡è¶Šç•Œå¼‚å¸¸</li><li><code>NullPointerException</code>ï¼šç©ºæŒ‡é’ˆå¼‚å¸¸</li><li><code>SecurityException</code>ï¼šå®‰å…¨å¼‚å¸¸</li></ul><blockquote><h3 id="é˜è¿°-finalã€finallyã€finalize-çš„åŒºåˆ«ã€‚"><a href="#é˜è¿°-finalã€finallyã€finalize-çš„åŒºåˆ«ã€‚" class="headerlink" title="é˜è¿° finalã€finallyã€finalize çš„åŒºåˆ«ã€‚"></a>é˜è¿° <code>final</code>ã€<code>finally</code>ã€<code>finalize</code> çš„åŒºåˆ«ã€‚</h3></blockquote><p>ç­”ï¼š</p><ul><li><code>final</code>ï¼šä¿®é¥°ç¬¦ï¼ˆå…³é”®å­—ï¼‰æœ‰ä¸‰ç§ç”¨æ³•ï¼šå¦‚æœä¸€ä¸ªç±»è¢«å£°æ˜ä¸º <code>final</code>ï¼Œæ„å‘³ç€å®ƒä¸èƒ½å†æ´¾ç”Ÿå‡ºæ–°çš„å­ç±»ï¼Œå³ä¸èƒ½è¢«ç»§æ‰¿ï¼Œå› æ­¤å®ƒå’Œ <code>abstract</code> æ˜¯åä¹‰è¯ã€‚å°†å˜é‡å£°æ˜ä¸º <code>final</code>ï¼Œå¯ä»¥ä¿è¯å®ƒä»¬åœ¨ä½¿ç”¨ä¸­ä¸è¢«æ”¹å˜ï¼Œè¢«å£°æ˜ä¸º <code>final</code> çš„å˜é‡å¿…é¡»åœ¨å£°æ˜æ—¶ç»™å®šåˆå€¼ï¼Œè€Œåœ¨ä»¥åçš„å¼•ç”¨ä¸­åªèƒ½è¯»å–ä¸å¯ä¿®æ”¹ã€‚è¢«å£°æ˜ä¸º <code>final</code> çš„æ–¹æ³•ä¹ŸåŒæ ·åªèƒ½ä½¿ç”¨ï¼Œä¸èƒ½åœ¨å­ç±»ä¸­è¢«é‡å†™ã€‚</li><li><code>finally</code>ï¼šé€šå¸¸æ”¾åœ¨ <code>tryâ€¦catchâ€¦</code> çš„åé¢æ„é€ æ€»æ˜¯æ‰§è¡Œä»£ç å—ï¼Œè¿™å°±æ„å‘³ç€ç¨‹åºæ— è®ºæ­£å¸¸æ‰§è¡Œè¿˜æ˜¯å‘ç”Ÿå¼‚å¸¸ï¼Œè¿™é‡Œçš„ä»£ç åªè¦ JVM ä¸å…³é—­éƒ½èƒ½æ‰§è¡Œï¼Œå¯ä»¥å°†é‡Šæ”¾å¤–éƒ¨èµ„æºçš„ä»£ç å†™åœ¨ <code>finally</code> å—ä¸­ã€‚</li><li><code>finalize</code>ï¼š<code>Object</code> ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ï¼ŒJava ä¸­å…è®¸ä½¿ç”¨ <code>finalize()</code> æ–¹æ³•åœ¨åƒåœ¾æ”¶é›†å™¨å°†å¯¹è±¡ä»å†…å­˜ä¸­æ¸…é™¤å‡ºå»ä¹‹å‰åšå¿…è¦çš„æ¸…ç†å·¥ä½œã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ç”±åƒåœ¾æ”¶é›†å™¨åœ¨é”€æ¯å¯¹è±¡æ—¶è°ƒç”¨çš„ï¼Œé€šè¿‡é‡å†™ <code>finalize()</code> æ–¹æ³•å¯ä»¥æ•´ç†ç³»ç»Ÿèµ„æºæˆ–è€…æ‰§è¡Œå…¶ä»–æ¸…ç†å·¥ä½œã€‚</li></ul><blockquote><h3 id="ç±»-ExampleA-ç»§æ‰¿-Exceptionï¼Œç±»-ExampleB-ç»§æ‰¿-ExampleAã€‚æœ‰å¦‚ä¸‹ä»£ç ç‰‡æ®µï¼š"><a href="#ç±»-ExampleA-ç»§æ‰¿-Exceptionï¼Œç±»-ExampleB-ç»§æ‰¿-ExampleAã€‚æœ‰å¦‚ä¸‹ä»£ç ç‰‡æ®µï¼š" class="headerlink" title="ç±» ExampleA ç»§æ‰¿ Exceptionï¼Œç±» ExampleB ç»§æ‰¿ ExampleAã€‚æœ‰å¦‚ä¸‹ä»£ç ç‰‡æ®µï¼š"></a>ç±» <code>ExampleA</code> ç»§æ‰¿ <code>Exception</code>ï¼Œç±» <code>ExampleB</code> ç»§æ‰¿ <code>ExampleA</code>ã€‚æœ‰å¦‚ä¸‹ä»£ç ç‰‡æ®µï¼š</h3><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ExampleB</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">ExampleA</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ExampleA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Exception"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>è¯·é—®æ‰§è¡Œæ­¤æ®µä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><p>ç­”ï¼šè¾“å‡ºï¼š<code>ExampleA</code>ã€‚æ ¹æ®é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆèƒ½ä½¿ç”¨çˆ¶ç±»å‹çš„åœ°æ–¹ä¸€å®šèƒ½ä½¿ç”¨å­ç±»å‹ï¼‰ï¼ŒæŠ“å–<code>ExampleA</code> ç±»å‹å¼‚å¸¸çš„ <code>catch</code> å—èƒ½å¤ŸæŠ“ä½ <code>try</code> å—ä¸­æŠ›å‡ºçš„ <code>ExampleB</code> ç±»å‹çš„å¼‚å¸¸ã€‚</p><p>é¢è¯•é¢˜ - è¯´å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœã€‚ï¼ˆæ­¤é¢˜çš„å‡ºå¤„æ˜¯ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹ä¸€ä¹¦ï¼‰</p><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Annoyance</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Sneeze</span> <span class="token keyword">extends</span> <span class="token class-name">Annoyance</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token keyword">class</span> <span class="token class-name">Human</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>         <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Sneeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>             <span class="token keyword">catch</span> <span class="token punctuation">(</span> <span class="token class-name">Annoyance</span> a <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Caught Annoyance"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">throw</span> a<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>         <span class="token keyword">catch</span> <span class="token punctuation">(</span> <span class="token class-name">Sneeze</span> s <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Caught Sneeze"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">finally</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token comment">//       è¾“å‡ºç»“æœï¼š</span><span class="token comment">//       Caught Annoyance</span><span class="token comment">//       Caught Sneeze</span><span class="token comment">//       Hello World!</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> â˜•Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java é¢è¯•é¢˜è§£æ</title>
      <link href="post/d2aef718.html"/>
      <url>post/d2aef718.html</url>
      
        <content type="html"><![CDATA[<h2 id="Java-åŸºç¡€"><a href="#Java-åŸºç¡€" class="headerlink" title="Java åŸºç¡€"></a><a href="/post/11ea51ea.html">Java åŸºç¡€</a></h2><h2 id="Java-å®¹å™¨"><a href="#Java-å®¹å™¨" class="headerlink" title="Java å®¹å™¨"></a><a href="/post/d07acd09.html">Java å®¹å™¨</a></h2><h2 id="Java-å¹¶å‘"><a href="#Java-å¹¶å‘" class="headerlink" title="Java å¹¶å‘"></a><a href="/post/32cf50db.html">Java å¹¶å‘</a></h2><h2 id="Java-IOæµ"><a href="#Java-IOæµ" class="headerlink" title="Java IOæµ"></a><a href="/post/af128a42.html">Java IOæµ</a></h2><h2 id="Java-æ•°æ®åº“"><a href="#Java-æ•°æ®åº“" class="headerlink" title="Java æ•°æ®åº“"></a><a href="/post/73adfcb0.html">Java æ•°æ®åº“</a></h2><h2 id="Java-åå°„"><a href="#Java-åå°„" class="headerlink" title="Java åå°„"></a><a href="/post/9fbf7373.html">Java åå°„</a></h2><h2 id="Java-è®¾è®¡æ¨¡å¼"><a href="#Java-è®¾è®¡æ¨¡å¼" class="headerlink" title="Java è®¾è®¡æ¨¡å¼"></a><a href="/post/1cfbd3b3.html">Java è®¾è®¡æ¨¡å¼</a></h2><h2 id="Java-Web"><a href="#Java-Web" class="headerlink" title="Java Web"></a><a href="/post/d24a315e.html">Java Web</a></h2><h2 id="Java-EE"><a href="#Java-EE" class="headerlink" title="Java EE"></a><a href="/post/dc04fa32.html">Java EE</a></h2>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> â˜•Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ’åºç®—æ³•</title>
      <link href="post/735e5788.html"/>
      <url>post/735e5788.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="headerlink" title="æ’åºç®—æ³•"></a>æ’åºç®—æ³•</h1><p>æ’åºæ˜¯è®¡ç®—æœºç¨‹åºè®¾è®¡ä¸­çš„ä¸€ç§é‡è¦æ“ä½œï¼Œå®ƒçš„åŠŸèƒ½æ˜¯å°†ä¸€ä¸ªæ•°æ®å…ƒç´ ï¼ˆæˆ–è®°å½•ï¼‰çš„ä»»æ„åºåˆ—ï¼Œé‡æ–°æ’åˆ—æˆä¸€ä¸ªå…³é”®å­—æœ‰åºçš„åºåˆ—ï¼Œæ’åºå°±æ˜¯æŠŠé›†åˆä¸­çš„å…ƒç´ æŒ‰ç…§ä¸€å®šçš„æ¬¡åºæ’åºåœ¨ä¸€èµ·ã€‚</p><p>æ’åºç®—æ³•å¯ä»¥åˆ†ä¸ºå†…éƒ¨æ’åºå’Œå¤–éƒ¨æ’åºï¼Œå†…éƒ¨æ’åºæ˜¯æ•°æ®è®°å½•åœ¨å†…å­˜ä¸­è¿›è¡Œæ’åºï¼Œè€Œå¤–éƒ¨æ’åºæ˜¯å› æ’åºçš„æ•°æ®å¾ˆå¤§ï¼Œä¸€æ¬¡ä¸èƒ½å®¹çº³å…¨éƒ¨çš„æ’åºè®°å½•ï¼Œåœ¨æ’åºè¿‡ç¨‹ä¸­éœ€è¦è®¿é—®å¤–å­˜ã€‚å¸¸è§çš„å†…éƒ¨æ’åºç®—æ³•æœ‰ï¼šæ’å…¥æ’åºã€å¸Œå°”æ’åºã€é€‰æ‹©æ’åºã€å†’æ³¡æ’åºã€å½’å¹¶æ’åºã€å¿«é€Ÿæ’åºã€å †æ’åºã€åŸºæ•°æ’åºç­‰ã€‚</p><h2 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h2><ul><li>ç¨³å®šæ’åºï¼šå¦‚æœ a åŸæœ¬åœ¨ b çš„å‰é¢ï¼Œä¸” a == bï¼Œæ’åºä¹‹å a ä»ç„¶åœ¨ b çš„å‰é¢ï¼Œåˆ™ä¸ºç¨³å®šæ’åºã€‚</li><li>éç¨³å®šæ’åºï¼šå¦‚æœ a åŸæœ¬åœ¨ b çš„å‰é¢ï¼Œä¸” a == bï¼Œæ’åºä¹‹å a å¯èƒ½ä¸åœ¨ b çš„å‰é¢ï¼Œåˆ™ä¸ºéç¨³å®šæ’åºã€‚</li><li>åŸåœ°æ’åºï¼šåŸåœ°æ’åºå°±æ˜¯æŒ‡åœ¨æ’åºè¿‡ç¨‹ä¸­ä¸ç”³è¯·å¤šä½™çš„å­˜å‚¨ç©ºé—´ï¼Œåªåˆ©ç”¨åŸæ¥å­˜å‚¨å¾…æ’æ•°æ®çš„å­˜å‚¨ç©ºé—´è¿›è¡Œæ¯”è¾ƒå’Œäº¤æ¢çš„æ•°æ®æ’åºã€‚</li><li>éåŸåœ°æ’åºï¼šéœ€è¦åˆ©ç”¨é¢å¤–çš„æ•°ç»„æ¥è¾…åŠ©æ’åºã€‚</li><li>æ—¶é—´å¤æ‚åº¦ï¼šä¸€ä¸ªç®—æ³•æ‰§è¡Œæ‰€æ¶ˆè€—çš„æ—¶é—´ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šè¿è¡Œå®Œä¸€ä¸ªç®—æ³•æ‰€éœ€çš„å†…å­˜å¤§å°ã€‚</li></ul><h2 id="æ—¶é—´å¤æ‚åº¦å¯¹æ¯”"><a href="#æ—¶é—´å¤æ‚åº¦å¯¹æ¯”" class="headerlink" title="æ—¶é—´å¤æ‚åº¦å¯¹æ¯”"></a>æ—¶é—´å¤æ‚åº¦å¯¹æ¯”</h2><div class="table-container"><table><thead><tr><th>æ’åºç®—æ³•</th><th>å¹³å‡æ—¶é—´å¤æ‚åº¦</th><th>æœ€åæ—¶é—´å¤æ‚åº¦</th><th>æœ€ä¼˜æ—¶é—´å¤æ‚åº¦</th><th>ç©ºé—´å¤æ‚åº¦</th><th>æ’åºæ–¹å¼</th><th>ç¨³å®šæ€§</th></tr></thead><tbody><tr><td><a href="#å†’æ³¡æ’åº">å†’æ³¡æ’åº</a></td><td>O(nÂ²)</td><td>O(nÂ²)</td><td>O(n)</td><td>O(1)</td><td>In-Place</td><td>ç¨³å®š</td></tr><tr><td><a href="#é€‰æ‹©æ’åº">é€‰æ‹©æ’åº</a></td><td>O(nÂ²)</td><td>O(nÂ²)</td><td>O(nÂ²)</td><td>O(1)</td><td>In-Place</td><td>ä¸ç¨³å®š</td></tr><tr><td><a href="#æ’å…¥æ’åº">æ’å…¥æ’åº</a></td><td>O(nÂ²)</td><td>O(nÂ²)</td><td>O(n)</td><td>O(1)</td><td>In-Place</td><td>ç¨³å®š</td></tr><tr><td><a href="#å¸Œå°”æ’åº">å¸Œå°”æ’åº</a></td><td>O(nÂ¹Ë™Â³)</td><td>O(nÂ²)</td><td>O(n)</td><td>O(1)</td><td>In-Place</td><td>ä¸ç¨³å®š</td></tr><tr><td><a href="#å½’å¹¶æ’åº">å½’å¹¶æ’åº</a></td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(n)</td><td>Out-Place</td><td>ç¨³å®š</td></tr><tr><td><a href="#å¿«é€Ÿæ’åº">å¿«é€Ÿæ’åº</a></td><td>O(nlogn)</td><td>O(nÂ²)</td><td>O(nlogn)</td><td>O(logn)</td><td>In-Place</td><td>ä¸ç¨³å®š</td></tr><tr><td><a href="#å †æ’åº">å †æ’åº</a></td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(1)</td><td>In-Place</td><td>ä¸ç¨³å®š</td></tr><tr><td><a href="#è®¡æ•°æ’åº">è®¡æ•°æ’åº</a></td><td>O(n+k)</td><td>O(n+k)</td><td>O(n+k)</td><td>O(k)</td><td>Out-Place</td><td>ç¨³å®š</td></tr><tr><td><a href="#æ¡¶æ’åº">æ¡¶æ’åº</a></td><td>O(n+k)</td><td>O(nÂ²)</td><td>O(n)</td><td>O(n+k)</td><td>Out-Place</td><td>ç¨³å®š</td></tr><tr><td><a href="#åŸºæ•°æ’åº">åŸºæ•°æ’åº</a></td><td>O(nÃ—k)</td><td>O(nÃ—k)</td><td>O(nÃ—k)</td><td>O(n+k)</td><td>Out-Place</td><td>ç¨³å®š</td></tr></tbody></table></div><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>nï¼šæ•°æ®è§„æ¨¡</li><li>kï¼š&quot;æ¡¶&quot;çš„ä¸ªæ•°</li><li>In-placeï¼šå ç”¨å¸¸æ•°å†…å­˜ï¼Œä¸å ç”¨é¢å¤–å†…å­˜</li><li>Out-placeï¼šå ç”¨é¢å¤–å†…å­˜</li><li>ç¨³å®šæ€§ï¼šæ’åºå 2 ä¸ªç›¸ç­‰é”®å€¼çš„é¡ºåºå’Œæ’åºä¹‹å‰å®ƒä»¬çš„é¡ºåºç›¸åŒ</li></ul><h1 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h1><p>å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰åˆç§°ä¸ºæ³¡å¼æ’åºï¼Œæ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ã€‚å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿æ•°åˆ—çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°åˆ—å·²ç»æ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚</p><p>å†’æ³¡æ’åºå¯¹ n ä¸ªé¡¹ç›®éœ€è¦ O(nÂ²) çš„æ¯”è¾ƒæ¬¡æ•°ï¼Œä¸”å¯ä»¥åŸåœ°æ’åºã€‚å°½ç®¡è¿™ä¸ªç®—æ³•æ˜¯æœ€ç®€å•äº†è§£å’Œå®ç°çš„æ’åºç®—æ³•ä¹‹ä¸€ï¼Œä½†å®ƒå¯¹äºåŒ…å«å¤§é‡çš„å…ƒç´ çš„æ•°åˆ—æ’åºæ˜¯å¾ˆæ²¡æœ‰æ•ˆç‡çš„ã€‚</p><h2 id="ç®—æ³•æ­¥éª¤"><a href="#ç®—æ³•æ­¥éª¤" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h2><ol><li>æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªï¼›</li><li>å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚è¿™æ­¥åšå®Œåï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„ï¼›</li><li>é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªï¼›</li><li>æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚</li></ol><h2 id="åŠ¨å›¾å±•ç¤º"><a href="#åŠ¨å›¾å±•ç¤º" class="headerlink" title="åŠ¨å›¾å±•ç¤º"></a>åŠ¨å›¾å±•ç¤º</h2><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/sort_algorithm/bubble_sort.gif" alt></p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> temp<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">boolean</span> <span class="token class-name">Flag</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// æ˜¯å¦å‘ç”Ÿäº¤æ¢ã€‚æ²¡æœ‰äº¤æ¢ï¼Œæå‰è·³å‡ºå¤–å±‚å¾ªç¯</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>array<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> array<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                temp <span class="token operator">=</span> array<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                array<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                array<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>                <span class="token class-name">Flag</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Flag</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> array<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">bubble_sort</span><span class="token punctuation">(</span>iterable<span class="token punctuation">)</span><span class="token punctuation">:</span>    new_arr <span class="token operator">=</span> arr<span class="token punctuation">(</span>iterable<span class="token punctuation">)</span>    arr_len <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>new_arr<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>arr_len<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>arr_len <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> new_arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> new_arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                new_arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> new_arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> new_arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> new_arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span>    <span class="token keyword">return</span> new_arr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h1><p>é€‰æ‹©æ’åºï¼ˆSelection sortï¼‰æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†å¦‚ä¸‹ã€‚é¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç„¶åï¼Œå†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚</p><p>é€‰æ‹©æ’åºçš„ä¸»è¦ä¼˜ç‚¹ä¸æ•°æ®ç§»åŠ¨æœ‰å…³ã€‚å¦‚æœæŸä¸ªå…ƒç´ ä½äºæ­£ç¡®çš„æœ€ç»ˆä½ç½®ä¸Šï¼Œåˆ™å®ƒä¸ä¼šè¢«ç§»åŠ¨ã€‚é€‰æ‹©æ’åºæ¯æ¬¡äº¤æ¢ä¸€å¯¹å…ƒç´ ï¼Œå®ƒä»¬å½“ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå°†è¢«ç§»åˆ°å…¶æœ€ç»ˆä½ç½®ä¸Šï¼Œå› æ­¤å¯¹ n ä¸ªå…ƒç´ çš„è¡¨è¿›è¡Œæ’åºæ€»å…±è¿›è¡Œè‡³å¤š (n-1) æ¬¡äº¤æ¢ã€‚åœ¨æ‰€æœ‰çš„å®Œå…¨ä¾é äº¤æ¢å»ç§»åŠ¨å…ƒç´ çš„æ’åºæ–¹æ³•ä¸­ï¼Œé€‰æ‹©æ’åºå±äºéå¸¸å¥½çš„ä¸€ç§ã€‚</p><h2 id="ç®—æ³•æ­¥éª¤-1"><a href="#ç®—æ³•æ­¥éª¤-1" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h2><ol><li>é¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼›</li><li>å†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ï¼›</li><li>é‡å¤ç¬¬äºŒæ­¥ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚</li></ol><h2 id="åŠ¨å›¾å±•ç¤º-1"><a href="#åŠ¨å›¾å±•ç¤º-1" class="headerlink" title="åŠ¨å›¾å±•ç¤º"></a>åŠ¨å›¾å±•ç¤º</h2><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/sort_algorithm/selection_sort.gif" alt></p><h2 id="ä»£ç å®ç°-1"><a href="#ä»£ç å®ç°-1" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="Java-1"><a href="#Java-1" class="headerlink" title="Java"></a>Java</h3><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectionSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// æ€»å…±è¦ç»è¿‡ n-1 è½®æ¯”è¾ƒ</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> min <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token comment">// æ¯è½®éœ€è¦æ¯”è¾ƒçš„æ¬¡æ•° N-i</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// è®°å½•ç›®å‰èƒ½æ‰¾åˆ°çš„æœ€å°å€¼å…ƒç´ çš„ä¸‹æ ‡</span>                min <span class="token operator">=</span> j<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// å°†æ‰¾åˆ°çš„æœ€å°å€¼å’Œiä½ç½®æ‰€åœ¨çš„å€¼è¿›è¡Œäº¤æ¢</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> min<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> tmp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">;</span>            arr<span class="token punctuation">[</span>min<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> arr<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="Python-1"><a href="#Python-1" class="headerlink" title="Python"></a>Python</h3><p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">selection_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        minIndex <span class="token operator">=</span> i        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> arr<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">:</span>                minIndex <span class="token operator">=</span> j        <span class="token keyword">if</span> i <span class="token operator">==</span> minIndex<span class="token punctuation">:</span>            <span class="token keyword">pass</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token keyword">return</span> arr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h1><p>æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚æ’å…¥æ’åºåœ¨å®ç°ä¸Šï¼Œé€šå¸¸é‡‡ç”¨ In-Place æ’åºï¼ˆå³åªéœ€ç”¨åˆ° O(1) çš„é¢å¤–ç©ºé—´çš„æ’åºï¼‰ï¼Œå› è€Œåœ¨ä»åå‘å‰æ‰«æè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åå¤æŠŠå·²æ’åºå…ƒç´ é€æ­¥å‘åæŒªä½ï¼Œä¸ºæœ€æ–°å…ƒç´ æä¾›æ’å…¥ç©ºé—´ã€‚</p><h2 id="ç®—æ³•æ­¥éª¤-2"><a href="#ç®—æ³•æ­¥éª¤-2" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h2><ol><li>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºï¼›</li><li>å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼›</li><li>å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼›</li><li>é‡å¤æ­¥éª¤ 3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®ï¼›</li><li>å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®åï¼›</li><li>é‡å¤æ­¥éª¤ 2~5ã€‚</li></ol><h2 id="åŠ¨å›¾å±•ç¤º-2"><a href="#åŠ¨å›¾å±•ç¤º-2" class="headerlink" title="åŠ¨å›¾å±•ç¤º"></a>åŠ¨å›¾å±•ç¤º</h2><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/sort_algorithm/insertion_sort.gif" alt></p><h2 id="ä»£ç å®ç°-2"><a href="#ä»£ç å®ç°-2" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="Java-2"><a href="#Java-2" class="headerlink" title="Java"></a>Java</h3><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">insertionSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// ä»ä¸‹æ ‡ä¸º 1 çš„å…ƒç´ å¼€å§‹é€‰æ‹©åˆé€‚çš„ä½ç½®æ’å…¥ï¼Œå› ä¸ºä¸‹æ ‡ä¸º 0 çš„å…ƒç´ ï¼Œé»˜è®¤æ˜¯æœ‰åºçš„</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// è®°å½•è¦æ’å…¥çš„æ•°æ®</span>        <span class="token keyword">int</span> tmp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// ä»å·²ç»æ’åºçš„åºåˆ—æœ€å³è¾¹çš„å¼€å§‹æ¯”è¾ƒï¼Œæ‰¾åˆ°æ¯”å…¶å°çš„æ•°</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> tmp <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            j<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// å­˜åœ¨æ¯”å…¶å°çš„æ•°ï¼Œæ’å…¥</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">!=</span> i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> arr<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="Python-2"><a href="#Python-2" class="headerlink" title="Python"></a>Python</h3><p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">insertion_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        preIndex <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span>        current <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token keyword">while</span> preIndex <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> arr<span class="token punctuation">[</span>preIndex<span class="token punctuation">]</span> <span class="token operator">></span> current<span class="token punctuation">:</span>            arr<span class="token punctuation">[</span>preIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>preIndex<span class="token punctuation">]</span>            preIndex <span class="token operator">-=</span> <span class="token number">1</span>        arr<span class="token punctuation">[</span>preIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> current    <span class="token keyword">return</span> arr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h1><p>å¸Œå°”æ’åºï¼ˆShellsortï¼‰ï¼Œä¹Ÿç§°é€’å‡å¢é‡æ’åºç®—æ³•ï¼Œæ˜¯æ’å…¥æ’åºçš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ã€‚å¸Œå°”æ’åºæ˜¯éç¨³å®šæ’åºç®—æ³•ã€‚</p><p>å¸Œå°”æ’åºæ˜¯åŸºäºæ’å…¥æ’åºçš„ä»¥ä¸‹ä¸¤ç‚¹æ€§è´¨è€Œæå‡ºæ”¹è¿›æ–¹æ³•çš„ï¼š</p><ul><li>æ’å…¥æ’åºåœ¨å¯¹å‡ ä¹å·²ç»æ’å¥½åºçš„æ•°æ®æ“ä½œæ—¶ï¼Œæ•ˆç‡é«˜ï¼Œå³å¯ä»¥è¾¾åˆ°çº¿æ€§æ’åºçš„æ•ˆç‡</li><li>ä½†æ’å…¥æ’åºä¸€èˆ¬æ¥è¯´æ˜¯ä½æ•ˆçš„ï¼Œå› ä¸ºæ’å…¥æ’åºæ¯æ¬¡åªèƒ½å°†æ•°æ®ç§»åŠ¨ä¸€ä½</li></ul><p>å¸Œå°”æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå…ˆå°†æ•´ä¸ªå¾…æ’åºçš„è®°å½•åºåˆ—åˆ†å‰²æˆä¸ºè‹¥å¹²å­åºåˆ—åˆ†åˆ«è¿›è¡Œç›´æ¥æ’å…¥æ’åºï¼Œå¾…æ•´ä¸ªåºåˆ—ä¸­çš„è®°å½•&quot;åŸºæœ¬æœ‰åº&quot;æ—¶ï¼Œå†å¯¹å…¨ä½“è®°å½•è¿›è¡Œä¾æ¬¡ç›´æ¥æ’å…¥æ’åºã€‚</p><h2 id="ç®—æ³•æ­¥éª¤-3"><a href="#ç®—æ³•æ­¥éª¤-3" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h2><ol><li>é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ— tâ‚, tâ‚‚, ..., tâ‚–ï¼Œå…¶ä¸­ táµ¢ &gt; tâ±¼, tâ‚– = 1ï¼›</li><li>æŒ‰å¢é‡åºåˆ—ä¸ªæ•° kï¼Œå¯¹åºåˆ—è¿›è¡Œ k è¶Ÿæ’åºï¼›</li><li>æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡ táµ¢ï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸º m çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ä»…å¢é‡å› å­ä¸º 1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚</li></ol><h2 id="åŠ¨å›¾å±•ç¤º-3"><a href="#åŠ¨å›¾å±•ç¤º-3" class="headerlink" title="åŠ¨å›¾å±•ç¤º"></a>åŠ¨å›¾å±•ç¤º</h2><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/sort_algorithm/_sort.gif" alt></p><h2 id="ä»£ç å®ç°-3"><a href="#ä»£ç å®ç°-3" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="Java-3"><a href="#Java-3" class="headerlink" title="Java"></a>Java</h3><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">shellSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> length <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span> temp<span class="token punctuation">;</span>    <span class="token comment">// åŠ¨æ€å®šä¹‰é—´éš”åºåˆ—</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> step <span class="token operator">=</span> length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> step <span class="token operator">>=</span> <span class="token number">1</span><span class="token punctuation">;</span> step <span class="token operator">/=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// æ’å…¥æ’åº</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> step<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">-</span> step<span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> temp<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                arr<span class="token punctuation">[</span>j <span class="token operator">+</span> step<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                j <span class="token operator">-=</span> step<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            arr<span class="token punctuation">[</span>j <span class="token operator">+</span> step<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="Python-3"><a href="#Python-3" class="headerlink" title="Python"></a>Python</h3><p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">shell_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>    <span class="token comment"># åˆå§‹æ­¥é•·</span>    gap <span class="token operator">=</span> n <span class="token operator">//</span> <span class="token number">2</span>    <span class="token keyword">while</span> gap <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>gap<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token comment"># æ¯ä¸ªæ­¥é•·é€²è¡Œæ’å…¥æ’åº</span>            temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            j <span class="token operator">=</span> i            <span class="token comment"># æ’å…¥æ’åº</span>            <span class="token keyword">while</span> j <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> j<span class="token operator">-</span>gap <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> gap<span class="token punctuation">]</span> <span class="token operator">></span> temp<span class="token punctuation">:</span>                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> gap<span class="token punctuation">]</span>                j <span class="token operator">-=</span> gap            arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp        <span class="token comment"># å¾—åˆ°æ–°çš„æ­¥é•·</span>        gap <span class="token operator">=</span> gap <span class="token operator">//</span> <span class="token number">2</span>    <span class="token keyword">return</span> arr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h1><p>å½’å¹¶æ’åºï¼ˆMerge sortï¼‰æ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•ã€‚è¯¥ç®—æ³•æ˜¯é‡‡ç”¨åˆ†æ²»æ³•ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ã€‚</p><p>ä½œä¸ºä¸€ç§å…¸å‹çš„åˆ†è€Œæ²»ä¹‹æ€æƒ³çš„ç®—æ³•åº”ç”¨ï¼Œå½’å¹¶æ’åºçš„å®ç°ç”±ä¸¤ç§æ–¹æ³•ï¼š</p><p>è‡ªä¸Šè€Œä¸‹çš„é€’å½’ï¼ˆæ‰€æœ‰é€’å½’çš„æ–¹æ³•éƒ½å¯ä»¥ç”¨è¿­ä»£é‡å†™ï¼Œæ‰€ä»¥å°±æœ‰äº†ç¬¬ 2 ç§æ–¹æ³•ï¼‰ï¼›è‡ªä¸‹è€Œä¸Šçš„è¿­ä»£ï¼›</p><h2 id="ç®—æ³•æ­¥éª¤-4"><a href="#ç®—æ³•æ­¥éª¤-4" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h2><p><strong>é€’å½’æ³•ï¼ˆTop-downï¼‰</strong></p><ol><li>ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—ï¼›</li><li>è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼›</li><li>æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®ï¼›</li><li>é‡å¤æ­¥éª¤3ç›´åˆ°æŸä¸€æŒ‡é’ˆåˆ°è¾¾åºåˆ—å°¾ï¼›</li><li>å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ã€‚</li></ol><p><strong>è¿­ä»£æ³•ï¼ˆBottom-upï¼‰</strong></p><p>åŸç†å¦‚ä¸‹ï¼ˆå‡è®¾åºåˆ—å…±æœ‰ n ä¸ªå…ƒç´ ï¼‰ï¼š</p><ol><li>å°†åºåˆ—æ¯ç›¸é‚»ä¸¤ä¸ªæ•°å­—è¿›è¡Œå½’å¹¶æ“ä½œï¼Œå½¢æˆ ceil(n/2) ä¸ªåºåˆ—ï¼Œæ’åºåæ¯ä¸ªåºåˆ—åŒ…å«ä¸¤/ä¸€ä¸ªå…ƒç´ ï¼›</li><li>è‹¥æ­¤æ—¶åºåˆ—æ•°ä¸æ˜¯1ä¸ªåˆ™å°†ä¸Šè¿°åºåˆ—å†æ¬¡å½’å¹¶ï¼Œå½¢æˆ ceil(n/4) ä¸ªåºåˆ—ï¼Œæ¯ä¸ªåºåˆ—åŒ…å«å››/ä¸‰ä¸ªå…ƒç´ ï¼›</li><li>é‡å¤æ­¥éª¤ 2ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ æ’åºå®Œæ¯•ï¼Œå³åºåˆ—æ•°ä¸º 1ã€‚</li></ol><h2 id="åŠ¨å›¾å±•ç¤º-4"><a href="#åŠ¨å›¾å±•ç¤º-4" class="headerlink" title="åŠ¨å›¾å±•ç¤º"></a>åŠ¨å›¾å±•ç¤º</h2><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/sort_algorithm/merge_sort.gif" alt></p><h2 id="ä»£ç å®ç°-4"><a href="#ä»£ç å®ç°-4" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="Java-4"><a href="#Java-4" class="headerlink" title="Java"></a>Java</h3><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// é€’å½’ç‰ˆï¼š</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">merge_sort_recursive</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> result<span class="token punctuation">,</span> <span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">>=</span> end<span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> len <span class="token operator">=</span> end <span class="token operator">-</span> start<span class="token punctuation">,</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>len <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> start<span class="token punctuation">;</span>    <span class="token keyword">int</span> start1 <span class="token operator">=</span> start<span class="token punctuation">,</span> end1 <span class="token operator">=</span> mid<span class="token punctuation">;</span>    <span class="token keyword">int</span> start2 <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> end2 <span class="token operator">=</span> end<span class="token punctuation">;</span>    <span class="token function">merge_sort_recursive</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> result<span class="token punctuation">,</span> start1<span class="token punctuation">,</span> end1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å·¦è¾¹å½’å¹¶æ’åºï¼Œä½¿å¾—å·¦å­åºåˆ—æœ‰åº</span>    <span class="token function">merge_sort_recursive</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> result<span class="token punctuation">,</span> start2<span class="token punctuation">,</span> end2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å³è¾¹å½’å¹¶æ’åºï¼Œä½¿å¾—å³å­åºåˆ—æœ‰åº</span>    <span class="token keyword">int</span> k <span class="token operator">=</span> start<span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>start1 <span class="token operator">&lt;=</span> end1 <span class="token operator">&amp;&amp;</span> start2 <span class="token operator">&lt;=</span> end2<span class="token punctuation">)</span>        result<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>start1<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>start2<span class="token punctuation">]</span> <span class="token operator">?</span> arr<span class="token punctuation">[</span>start1<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">:</span> arr<span class="token punctuation">[</span>start2<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>start1 <span class="token operator">&lt;=</span> end1<span class="token punctuation">)</span>        result<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>start1<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>start2 <span class="token operator">&lt;=</span> end2<span class="token punctuation">)</span>        result<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>start2<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> start<span class="token punctuation">;</span> k <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>        arr<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> result<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">merge_sort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">merge_sort_recursive</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> result<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">// è¿­ä»£ç‰ˆï¼š</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">merge_sort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> orderedArr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">+</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> left <span class="token operator">=</span> i <span class="token operator">*</span> j<span class="token punctuation">;</span>            <span class="token keyword">int</span> mid <span class="token operator">=</span> left <span class="token operator">+</span> i <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">>=</span> arr<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>left <span class="token operator">+</span> i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> right <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">>=</span> arr<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> start <span class="token operator">=</span> left<span class="token punctuation">,</span> l <span class="token operator">=</span> left<span class="token punctuation">,</span> m <span class="token operator">=</span> mid<span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;</span> mid <span class="token operator">&amp;&amp;</span> m <span class="token operator">&lt;=</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    orderedArr<span class="token punctuation">[</span>start<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>l<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    orderedArr<span class="token punctuation">[</span>start<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>m<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>l <span class="token operator">&lt;</span> mid<span class="token punctuation">)</span>                orderedArr<span class="token punctuation">[</span>start<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>l<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>m <span class="token operator">&lt;=</span> right<span class="token punctuation">)</span>                orderedArr<span class="token punctuation">[</span>start<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>m<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>orderedArr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> arr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="Python-4"><a href="#Python-4" class="headerlink" title="Python"></a>Python</h3><p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> nums    mid <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span>    left <span class="token operator">=</span> mergeSort<span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token punctuation">:</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span>    right <span class="token operator">=</span> mergeSort<span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">while</span> left <span class="token keyword">and</span> right<span class="token punctuation">:</span>        <span class="token keyword">if</span> left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>left<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            result<span class="token punctuation">.</span>append<span class="token punctuation">(</span>right<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> left<span class="token punctuation">:</span>        result <span class="token operator">+=</span> left    <span class="token keyword">if</span> right<span class="token punctuation">:</span>        result <span class="token operator">+=</span> right    <span class="token keyword">return</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h1><p>å¿«é€Ÿæ’åºï¼ˆQuicksortï¼‰ï¼Œåˆç§°åˆ†åŒºäº¤æ¢æ’åºï¼ˆpartition-exchange sortï¼‰ï¼Œç®€ç§°å¿«æ’ï¼Œä¸€ç§æ’åºç®—æ³•ï¼Œæœ€æ—©ç”±ä¸œå°¼Â·éœå°”æå‡ºã€‚åœ¨å¹³å‡çŠ¶å†µä¸‹ï¼Œæ’åº n ä¸ªé¡¹ç›®è¦ O(nlogn) æ¬¡æ¯”è¾ƒã€‚åœ¨æœ€åçŠ¶å†µä¸‹åˆ™éœ€è¦ O(nÂ²)æ¬¡æ¯”è¾ƒï¼Œä½†è¿™ç§çŠ¶å†µå¹¶ä¸å¸¸è§ã€‚äº‹å®ä¸Šï¼Œå¿«é€Ÿæ’åº(nlogn)é€šå¸¸æ˜æ˜¾æ¯”å…¶ä»–ç®—æ³•æ›´å¿«ï¼Œå› ä¸ºå®ƒçš„å†…éƒ¨å¾ªç¯ï¼ˆinner loopï¼‰å¯ä»¥åœ¨å¤§éƒ¨åˆ†çš„æ¶æ„ä¸Šå¾ˆæœ‰æ•ˆç‡åœ°è¾¾æˆã€‚</p><h2 id="ç®—æ³•æ­¥éª¤-5"><a href="#ç®—æ³•æ­¥éª¤-5" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h2><ol><li>æŒ‘é€‰åŸºå‡†å€¼ï¼šä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸ºâ€œåŸºå‡†â€ï¼ˆpivotï¼‰ï¼›</li><li>åˆ†å‰²ï¼šé‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†åé¢ï¼ˆä¸åŸºå‡†å€¼ç›¸ç­‰çš„æ•°å¯ä»¥åˆ°ä»»ä½•ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†å‰²ç»“æŸä¹‹åï¼Œå¯¹åŸºå‡†å€¼çš„æ’åºå°±å·²ç»å®Œæˆï¼›</li><li>é€’å½’æ’åºå­åºåˆ—ï¼šé€’å½’åœ°å°†å°äºåŸºå‡†å€¼å…ƒç´ çš„å­åºåˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­åºåˆ—æ’åºã€‚</li></ol><h2 id="åŠ¨å›¾å±•ç¤º-5"><a href="#åŠ¨å›¾å±•ç¤º-5" class="headerlink" title="åŠ¨å›¾å±•ç¤º"></a>åŠ¨å›¾å±•ç¤º</h2><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/sort_algorithm/quick_sort.gif" alt></p><h2 id="ä»£ç å®ç°-5"><a href="#ä»£ç å®ç°-5" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="Java-5"><a href="#Java-5" class="headerlink" title="Java"></a>Java</h3><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">quickSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> right <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>    <span class="token comment">// å½“ä¼ é€’çš„ç›®æ ‡æ•°ç»„å«æœ‰ä¸¤ä¸ªä»¥ä¸Šçš„å…ƒç´ æ—¶ï¼Œè¿›è¡Œé€’å½’è°ƒç”¨ã€‚ï¼ˆå³ï¼šå½“ä¼ é€’çš„ç›®æ ‡æ•°ç»„åªå«æœ‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ­¤è¶Ÿæ’åºç»“æŸï¼‰</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> partitionIndex <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è·å–å…³é”®å€¼çš„ä¸‹æ ‡ï¼ˆå¿«æ’çš„æ ¸å¿ƒï¼‰</span>        <span class="token function">quickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> partitionIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//é€’å½’è°ƒç”¨ï¼Œå¿«æ’åˆ’åˆ†å‡ºæ¥çš„å·¦åŒºé—´</span>        <span class="token function">quickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> partitionIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//é€’å½’è°ƒç”¨ï¼Œå¿«æ’åˆ’åˆ†å‡ºæ¥çš„å³åŒºé—´</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> arr<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">// è®¾å®šåŸºå‡†å€¼ï¼ˆpivotï¼‰</span>    <span class="token keyword">int</span> pivot <span class="token operator">=</span> left<span class="token punctuation">;</span>    <span class="token keyword">int</span> index <span class="token operator">=</span> pivot <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> index<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> right<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>pivot<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>            index<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> pivot<span class="token punctuation">,</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="Python-5"><a href="#Python-5" class="headerlink" title="Python"></a>Python</h3><p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">quickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> right<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    left <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">else</span> left    right <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>right<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">else</span> right    <span class="token keyword">if</span> left <span class="token operator">&lt;</span> right<span class="token punctuation">:</span>        partitionIndex <span class="token operator">=</span> partition<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span>        quickSort<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> partitionIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>        quickSort<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> partitionIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">)</span>    <span class="token keyword">return</span> arr<span class="token keyword">def</span> <span class="token function">partition</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">:</span>    pivot <span class="token operator">=</span> left    index <span class="token operator">=</span> pivot <span class="token operator">+</span> <span class="token number">1</span>    i <span class="token operator">=</span> index    <span class="token keyword">while</span> i <span class="token operator">&lt;=</span> right<span class="token punctuation">:</span>        <span class="token keyword">if</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>pivot<span class="token punctuation">]</span><span class="token punctuation">:</span>            swap<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> index<span class="token punctuation">)</span>            index <span class="token operator">+=</span> <span class="token number">1</span>        i <span class="token operator">+=</span> <span class="token number">1</span>    swap<span class="token punctuation">(</span>arr<span class="token punctuation">,</span> pivot<span class="token punctuation">,</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token keyword">def</span> <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">:</span>    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h1><p>å †æ’åºï¼ˆHeapsortï¼‰æ˜¯æŒ‡åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„æ‰€è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ã€‚å †æ˜¯ä¸€ä¸ªè¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œå¹¶åŒæ—¶æ»¡è¶³å †çš„æ€§è´¨ï¼šå³å­èŠ‚ç‚¹çš„é”®å€¼æˆ–ç´¢å¼•æ€»æ˜¯å°äºï¼ˆæˆ–è€…å¤§äºï¼‰å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚å †æ’åºå¯ä»¥è¯´æ˜¯ä¸€ç§åˆ©ç”¨å †çš„æ¦‚å¿µæ¥æ’åºçš„é€‰æ‹©æ’åºã€‚åˆ†ä¸ºä¸¤ç§æ–¹æ³•ï¼š</p><ul><li>å¤§é¡¶å †ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å¤§äºæˆ–ç­‰äºå…¶å­èŠ‚ç‚¹çš„å€¼ï¼Œåœ¨å †æ’åºç®—æ³•ä¸­ç”¨äºå‡åºæ’åˆ—ã€‚</li><li>å°é¡¶å †ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½å°äºæˆ–ç­‰äºå…¶å­èŠ‚ç‚¹çš„å€¼ï¼Œåœ¨å †æ’åºç®—æ³•ä¸­ç”¨äºé™åºæ’åˆ—ã€‚</li></ul><p>åœ¨å †çš„æ•°æ®ç»“æ„ä¸­ï¼Œå †ä¸­çš„æœ€å¤§å€¼æ€»æ˜¯ä½äºæ ¹èŠ‚ç‚¹ï¼ˆåœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­ä½¿ç”¨å †çš„è¯å †ä¸­çš„æœ€å°å€¼ä½äºæ ¹èŠ‚ç‚¹ï¼‰ã€‚å †ä¸­å®šä¹‰ä»¥ä¸‹å‡ ç§æ“ä½œï¼š</p><ul><li>æœ€å¤§å †è°ƒæ•´ï¼ˆMax Heapifyï¼‰ï¼šå°†å †çš„æœ«ç«¯å­èŠ‚ç‚¹ä½œè°ƒæ•´ï¼Œä½¿å¾—å­èŠ‚ç‚¹æ°¸è¿œå°äºçˆ¶èŠ‚ç‚¹ã€‚</li><li>åˆ›å»ºæœ€å¤§å †ï¼ˆBuild Max Heapï¼‰ï¼šå°†å †ä¸­çš„æ‰€æœ‰æ•°æ®é‡æ–°æ’åºã€‚</li><li>å †æ’åºï¼ˆHeapSortï¼‰ï¼šç§»é™¤ä½åœ¨ç¬¬ä¸€ä¸ªæ•°æ®çš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶åšæœ€å¤§å †è°ƒæ•´çš„é€’å½’è¿ç®—ã€‚</li></ul><h2 id="ç®—æ³•æ­¥éª¤-6"><a href="#ç®—æ³•æ­¥éª¤-6" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h2><ol><li>åˆ›å»ºä¸€ä¸ªå † H[0 ... n-1]ï¼›</li><li>æŠŠå †é¦–ï¼ˆæœ€å¤§å€¼ï¼‰å’Œå †å°¾äº’æ¢ï¼›</li><li>æŠŠå †çš„å°ºå¯¸ç¼©å° 1ï¼Œå¹¶è°ƒç”¨ shift_down(0)ï¼Œç›®çš„æ˜¯æŠŠæ–°çš„æ•°ç»„é¡¶ç«¯æ•°æ®è°ƒæ•´åˆ°ç›¸åº”ä½ç½®ï¼›</li><li>é‡å¤æ­¥éª¤ 2ï¼Œç›´åˆ°å †çš„å°ºå¯¸ä¸º 1ã€‚</li></ol><h2 id="åŠ¨å›¾å±•ç¤º-6"><a href="#åŠ¨å›¾å±•ç¤º-6" class="headerlink" title="åŠ¨å›¾å±•ç¤º"></a>åŠ¨å›¾å±•ç¤º</h2><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/sort_algorithm/heap_sort.gif" alt></p><h2 id="ä»£ç å®ç°-6"><a href="#ä»£ç å®ç°-6" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="Java-6"><a href="#Java-6" class="headerlink" title="Java"></a>Java</h3><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**  * å †æ’åºçš„ä¸»è¦å…¥å£æ–¹æ³•ï¼Œå…±ä¸¤æ­¥ã€‚  */</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">heapSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token comment">/*      *  ç¬¬ä¸€æ­¥ï¼šå°†æ•°ç»„å †åŒ–      *  beginIndex = ç¬¬ä¸€ä¸ªéå¶å­èŠ‚ç‚¹ã€‚      *  ä»ç¬¬ä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹å³å¯ã€‚æ— éœ€ä»æœ€åä¸€ä¸ªå¶å­èŠ‚ç‚¹å¼€å§‹ã€‚      *  å¶å­èŠ‚ç‚¹å¯ä»¥çœ‹ä½œå·²ç¬¦åˆå †è¦æ±‚çš„èŠ‚ç‚¹ï¼Œæ ¹èŠ‚ç‚¹å°±æ˜¯å®ƒè‡ªå·±ä¸”è‡ªå·±ä»¥ä¸‹å€¼ä¸ºæœ€å¤§ã€‚      */</span>    <span class="token keyword">int</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> beginIndex <span class="token operator">=</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> beginIndex<span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token function">maxHeapify</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/*      * ç¬¬äºŒæ­¥ï¼šå¯¹å †åŒ–æ•°æ®æ’åº      * æ¯æ¬¡éƒ½æ˜¯ç§»å‡ºæœ€é¡¶å±‚çš„æ ¹èŠ‚ç‚¹A[0]ï¼Œä¸æœ€å°¾éƒ¨èŠ‚ç‚¹ä½ç½®è°ƒæ¢ï¼ŒåŒæ—¶éå†é•¿åº¦ - 1ã€‚      * ç„¶åä»æ–°æ•´ç†è¢«æ¢åˆ°æ ¹èŠ‚ç‚¹çš„æœ«å°¾å…ƒç´ ï¼Œä½¿å…¶ç¬¦åˆå †çš„ç‰¹æ€§ã€‚      * ç›´è‡³æœªæ’åºçš„å †é•¿åº¦ä¸º 0ã€‚      */</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> len<span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">swap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">maxHeapify</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/**  * è°ƒæ•´ç´¢å¼•ä¸º index å¤„çš„æ•°æ®ï¼Œä½¿å…¶ç¬¦åˆå †çš„ç‰¹æ€§ã€‚  *  * @param index éœ€è¦å †åŒ–å¤„ç†çš„æ•°æ®çš„ç´¢å¼•  * @param len æœªæ’åºçš„å †ï¼ˆæ•°ç»„ï¼‰çš„é•¿åº¦  */</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">maxHeapify</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> li <span class="token operator">=</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// å·¦å­èŠ‚ç‚¹ç´¢å¼•</span>    <span class="token keyword">int</span> ri <span class="token operator">=</span> li <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>           <span class="token comment">// å³å­èŠ‚ç‚¹ç´¢å¼•</span>    <span class="token keyword">int</span> cMax <span class="token operator">=</span> li<span class="token punctuation">;</span>             <span class="token comment">// å­èŠ‚ç‚¹å€¼æœ€å¤§ç´¢å¼•ï¼Œé»˜è®¤å·¦å­èŠ‚ç‚¹ã€‚</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>li <span class="token operator">></span> len<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>      <span class="token comment">// å·¦å­èŠ‚ç‚¹ç´¢å¼•è¶…å‡ºè®¡ç®—èŒƒå›´ï¼Œç›´æ¥è¿”å›ã€‚</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>ri <span class="token operator">&lt;=</span> len <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>ri<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>li<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// å…ˆåˆ¤æ–­å·¦å³å­èŠ‚ç‚¹ï¼Œå“ªä¸ªè¾ƒå¤§ã€‚</span>        cMax <span class="token operator">=</span> ri<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>cMax<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">swap</span><span class="token punctuation">(</span>cMax<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// å¦‚æœçˆ¶èŠ‚ç‚¹è¢«å­èŠ‚ç‚¹è°ƒæ¢ï¼Œ</span>        <span class="token function">maxHeapify</span><span class="token punctuation">(</span>cMax<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// åˆ™éœ€è¦ç»§ç»­åˆ¤æ–­æ¢ä¸‹åçš„çˆ¶èŠ‚ç‚¹æ˜¯å¦ç¬¦åˆå †çš„ç‰¹æ€§ã€‚</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="Python-6"><a href="#Python-6" class="headerlink" title="Python"></a>Python</h3><p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">heap_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">sift_down</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""æœ€å¤§å †è°ƒæ•´"""</span>        root <span class="token operator">=</span> start        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            child <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> root <span class="token operator">+</span> <span class="token number">1</span>            <span class="token keyword">if</span> child <span class="token operator">></span> end<span class="token punctuation">:</span>                <span class="token keyword">break</span>            <span class="token keyword">if</span> child <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;=</span> end <span class="token keyword">and</span> arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>child <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>                child <span class="token operator">+=</span> <span class="token number">1</span>            <span class="token keyword">if</span> arr<span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">:</span>                arr<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>root<span class="token punctuation">]</span>                root <span class="token operator">=</span> child            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">break</span>    <span class="token comment"># åˆ›å»ºæœ€å¤§å †</span>    <span class="token keyword">for</span> start <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        sift_down<span class="token punctuation">(</span>start<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment"># å †æ’åº</span>    <span class="token keyword">for</span> end <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>end<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        sift_down<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> end <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> arr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="è®¡æ•°æ’åº"><a href="#è®¡æ•°æ’åº" class="headerlink" title="è®¡æ•°æ’åº"></a>è®¡æ•°æ’åº</h1><p>è®¡æ•°æ’åºï¼ˆCounting sortï¼‰æ˜¯ä¸€ç§ç¨³å®šçš„çº¿æ€§æ—¶é—´æ’åºç®—æ³•ã€‚è®¡æ•°æ’åºä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„æ•°ç»„ Cï¼Œå…¶ä¸­ç¬¬ i ä¸ªå…ƒç´ æ˜¯å¾…æ’åºæ•°ç»„ A ä¸­å€¼ç­‰äº i çš„å…ƒç´ çš„ä¸ªæ•°ã€‚ç„¶åæ ¹æ®æ•°ç»„ C æ¥å°† A ä¸­çš„å…ƒç´ æ’åˆ°æ­£ç¡®çš„ä½ç½®ã€‚</p><h2 id="ç®—æ³•æ­¥éª¤-7"><a href="#ç®—æ³•æ­¥éª¤-7" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h2><p>é€šä¿—åœ°ç†è§£ï¼Œä¾‹å¦‚æœ‰ 10 ä¸ªå¹´é¾„ä¸åŒçš„äººï¼Œç»Ÿè®¡å‡ºæœ‰ 8 ä¸ªäººçš„å¹´é¾„æ¯” A å°ï¼Œé‚£ A çš„å¹´é¾„å°±æ’åœ¨ç¬¬9ä½ï¼Œç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥å¾—åˆ°å…¶ä»–æ¯ä¸ªäººçš„ä½ç½®ï¼Œä¹Ÿå°±æ’å¥½äº†åºã€‚å½“ç„¶ï¼Œå¹´é¾„æœ‰é‡å¤æ—¶éœ€è¦ç‰¹æ®Šå¤„ç†ï¼ˆä¿è¯ç¨³å®šæ€§ï¼‰ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ€åè¦åå‘å¡«å……ç›®æ ‡æ•°ç»„ï¼Œä»¥åŠå°†æ¯ä¸ªæ•°å­—çš„ç»Ÿè®¡å‡å» 1ã€‚</p><ol><li>æ‰¾å‡ºå¾…æ’åºçš„æ•°ç»„ä¸­æœ€å¤§å’Œæœ€å°çš„å…ƒç´ </li><li>ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå€¼ä¸º i çš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå­˜å…¥æ•°ç»„ C çš„ç¬¬ i é¡¹</li><li>å¯¹æ‰€æœ‰çš„è®¡æ•°ç´¯åŠ ï¼ˆä» C ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œæ¯ä¸€é¡¹å’Œå‰ä¸€é¡¹ç›¸åŠ ï¼‰</li><li>åå‘å¡«å……ç›®æ ‡æ•°ç»„ï¼šå°†æ¯ä¸ªå…ƒç´  i æ”¾åœ¨æ–°æ•°ç»„çš„ç¬¬ C[i] é¡¹ï¼Œæ¯æ”¾ä¸€ä¸ªå…ƒç´ å°±å°† C[i] å‡å»1</li></ol><h2 id="åŠ¨å›¾å±•ç¤º-7"><a href="#åŠ¨å›¾å±•ç¤º-7" class="headerlink" title="åŠ¨å›¾å±•ç¤º"></a>åŠ¨å›¾å±•ç¤º</h2><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/sort_algorithm/counting_sort.gif" alt></p><h2 id="ä»£ç å®ç°-7"><a href="#ä»£ç å®ç°-7" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="Java-7"><a href="#Java-7" class="headerlink" title="Java"></a>Java</h3><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">countingSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> maxValue <span class="token operator">=</span> <span class="token function">getMaxValue</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>    <span class="token keyword">int</span> bucketLen <span class="token operator">=</span> maxValue <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bucket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>bucketLen<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> value <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        bucket<span class="token punctuation">[</span>value<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> sortedIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> bucketLen<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>bucket<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            arr<span class="token punctuation">[</span>sortedIndex<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> j<span class="token punctuation">;</span>            bucket<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> arr<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getMaxValue</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> maxValue <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> value <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>maxValue <span class="token operator">&lt;</span> value<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            maxValue <span class="token operator">=</span> value<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> maxValue<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="Python-7"><a href="#Python-7" class="headerlink" title="Python"></a>Python</h3><p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">countingSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>    maxValue <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> value <span class="token keyword">in</span> arr<span class="token punctuation">:</span>        <span class="token keyword">if</span> maxValue <span class="token operator">&lt;</span> value<span class="token punctuation">:</span>            maxValue <span class="token operator">=</span> value    bucketLen <span class="token operator">=</span> maxValue <span class="token operator">+</span> <span class="token number">1</span>    bucket <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> bucketLen    sortedIndex <span class="token operator">=</span> <span class="token number">0</span>    arrLen <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>arrLen<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> bucket<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            bucket<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>        bucket<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>bucketLen<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> bucket<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>            arr<span class="token punctuation">[</span>sortedIndex<span class="token punctuation">]</span> <span class="token operator">=</span> j            sortedIndex <span class="token operator">+=</span> <span class="token number">1</span>            bucket<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-=</span> <span class="token number">1</span>    <span class="token keyword">return</span> arr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="æ¡¶æ’åº"><a href="#æ¡¶æ’åº" class="headerlink" title="æ¡¶æ’åº"></a>æ¡¶æ’åº</h1><p>æ¡¶æ’åºï¼ˆBucket sortï¼‰æˆ–æ‰€è°“çš„ç®±æ’åºï¼Œæ˜¯ä¸€ä¸ªæ’åºç®—æ³•ï¼Œå·¥ä½œçš„åŸç†æ˜¯å°†æ•°ç»„åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶é‡Œã€‚æ¯ä¸ªæ¡¶å†ä¸ªåˆ«æ’åºï¼ˆæœ‰å¯èƒ½å†ä½¿ç”¨åˆ«çš„æ’åºç®—æ³•æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’åºï¼‰ã€‚</p><p>æ¡¶æ’åºæ˜¯è®¡æ•°æ’åºçš„å‡çº§ç‰ˆã€‚å®ƒåˆ©ç”¨äº†å‡½æ•°çš„æ˜ å°„å…³ç³»ï¼Œé«˜æ•ˆä¸å¦çš„å…³é”®å°±åœ¨äºè¿™ä¸ªæ˜ å°„å‡½æ•°çš„ç¡®å®šã€‚ä¸ºäº†ä½¿æ¡¶æ’åºæ›´åŠ é«˜æ•ˆï¼Œæˆ‘ä»¬éœ€è¦åšåˆ°è¿™ä¸¤ç‚¹ï¼š</p><p>åœ¨é¢å¤–ç©ºé—´å……è¶³çš„æƒ…å†µä¸‹ï¼Œå°½é‡å¢å¤§æ¡¶çš„æ•°é‡ä½¿ç”¨çš„æ˜ å°„å‡½æ•°èƒ½å¤Ÿå°†è¾“å…¥çš„ N ä¸ªæ•°æ®å‡åŒ€çš„åˆ†é…åˆ° K ä¸ªæ¡¶ä¸­</p><h2 id="ç®—æ³•æ­¥éª¤-8"><a href="#ç®—æ³•æ­¥éª¤-8" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h2><ol><li>è®¾ç½®ä¸€ä¸ªå®šé‡çš„æ•°ç»„å½“ä½œç©ºæ¡¶å­ã€‚</li><li>å¯»è®¿åºåˆ—ï¼Œå¹¶ä¸”æŠŠé¡¹ç›®ä¸€ä¸ªä¸€ä¸ªæ”¾åˆ°å¯¹åº”çš„æ¡¶å­å»ã€‚</li><li>å¯¹æ¯ä¸ªä¸æ˜¯ç©ºçš„æ¡¶å­è¿›è¡Œæ’åºã€‚</li><li>ä»ä¸æ˜¯ç©ºçš„æ¡¶å­é‡ŒæŠŠé¡¹ç›®å†æ”¾å›åŸæ¥çš„åºåˆ—ä¸­ã€‚</li></ol><h2 id="åŠ¨å›¾å±•ç¤º-8"><a href="#åŠ¨å›¾å±•ç¤º-8" class="headerlink" title="åŠ¨å›¾å±•ç¤º"></a>åŠ¨å›¾å±•ç¤º</h2><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/sort_algorithm/bucket_sort.gif" alt></p><h2 id="ä»£ç å®ç°-8"><a href="#ä»£ç å®ç°-8" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="Java-8"><a href="#Java-8" class="headerlink" title="Java"></a>Java</h3><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">indexFor</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> min<span class="token punctuation">,</span> <span class="token keyword">int</span> step<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>a <span class="token operator">-</span> min<span class="token punctuation">)</span> <span class="token operator">/</span> step<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">bucketSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> max <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> min <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> a <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>max <span class="token operator">&lt;</span> a<span class="token punctuation">)</span>            max <span class="token operator">=</span> a<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>min <span class="token operator">></span> a<span class="token punctuation">)</span>            min <span class="token operator">=</span> a<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// è¯¥å€¼ä¹Ÿå¯æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©</span>    <span class="token keyword">int</span> bucketNum <span class="token operator">=</span> max <span class="token operator">/</span> <span class="token number">10</span> <span class="token operator">-</span> min <span class="token operator">/</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token class-name">List</span> buckList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ›å»ºæ¡¶</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> bucketNum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        buckList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// å°†æ•°æ®åˆ†é…åˆ°å„ä¸ªæ¡¶ä¸­</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token function">indexFor</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> min<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> buckList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> bucket <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> bucketNum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        bucket <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span><span class="token punctuation">)</span> buckList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å¯¹æ¯ä¸ªæ¡¶è¿›è¡Œæ’åºï¼Œè¿™é‡Œä½¿ç”¨äº†æ’å…¥æ’åº</span>        <span class="token function">insertSort</span><span class="token punctuation">(</span>bucket<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">:</span> bucket<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            arr<span class="token punctuation">[</span>index<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment">// æŠŠæ¡¶å…§å…ƒç´ ä½¿ç”¨æ’å…¥æ’åº</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertSort</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">></span></span> bucket<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> bucket<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> temp <span class="token operator">=</span> bucket<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> bucket<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span> <span class="token operator">></span> temp<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            bucket<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> bucket<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        bucket<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> temp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="Python-8"><a href="#Python-8" class="headerlink" title="Python"></a>Python</h3><p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">bucket_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>    max_num <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>    <span class="token comment"># ä¸èƒ½ä½¿ç”¨[[]]*(max+1)ï¼Œè¿™æ ·æ–°å»ºçš„ç©ºé—´ä¸­å„ä¸ª[]æ˜¯å…±äº«å†…å­˜çš„</span>    buf <span class="token operator">=</span> <span class="token punctuation">&#123;</span>i<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>max_num<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span>    arr_len <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>arr_len<span class="token punctuation">)</span><span class="token punctuation">:</span>        num <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token comment"># å°†ç›¸åº”èŒƒå›´å†…çš„æ•°æ®åŠ å…¥åˆ°[]ä¸­</span>        buf<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>num<span class="token punctuation">)</span>    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> buf<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">:</span>            <span class="token comment"># è¿™é‡Œè¿˜éœ€è¦å¯¹ä¸€ä¸ªèŒƒå›´å†…çš„æ•°æ®è¿›è¡Œæ’åºï¼Œç„¶åå†è¿›è¡Œè¾“å‡º</span>            arr<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token builtin">sorted</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> arr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="åŸºæ•°æ’åº"><a href="#åŸºæ•°æ’åº" class="headerlink" title="åŸºæ•°æ’åº"></a>åŸºæ•°æ’åº</h1><p>åŸºæ•°æ’åºï¼ˆRadix sortï¼‰æ˜¯ä¸€ç§éæ¯”è¾ƒå‹æ•´æ•°æ’åºç®—æ³•ï¼Œå…¶åŸç†æ˜¯å°†æ•´æ•°æŒ‰ä½æ•°åˆ‡å‰²æˆä¸åŒçš„æ•°å­—ï¼Œç„¶åæŒ‰æ¯ä¸ªä½æ•°åˆ†åˆ«æ¯”è¾ƒã€‚ç”±äºæ•´æ•°ä¹Ÿå¯ä»¥è¡¨è¾¾å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚åå­—æˆ–æ—¥æœŸï¼‰å’Œç‰¹å®šæ ¼å¼çš„æµ®ç‚¹æ•°ï¼Œæ‰€ä»¥åŸºæ•°æ’åºä¹Ÿä¸æ˜¯åªèƒ½ä½¿ç”¨äºæ•´æ•°ã€‚</p><p>åŸºæ•°æ’åºæœ‰ä¸¤ç§æ–¹æ³•ï¼šåŸºæ•°æ’åºçš„æ–¹å¼å¯ä»¥é‡‡ç”¨LSDï¼ˆLeast significant digitalï¼‰æˆ–MSDï¼ˆMost significant digitalï¼‰ï¼ŒLSDçš„æ’åºæ–¹å¼ç”±é”®å€¼çš„æœ€å³è¾¹å¼€å§‹ï¼Œè€ŒMSDåˆ™ç›¸åï¼Œç”±é”®å€¼çš„æœ€å·¦è¾¹å¼€å§‹ã€‚</p><h2 id="ç®—æ³•æ­¥éª¤-9"><a href="#ç®—æ³•æ­¥éª¤-9" class="headerlink" title="ç®—æ³•æ­¥éª¤"></a>ç®—æ³•æ­¥éª¤</h2><ol><li>å°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ï¼ˆæ­£æ•´æ•°ï¼‰ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œæ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶ï¼›</li><li>ä»æœ€ä½ä½å¼€å§‹ï¼Œä¾æ¬¡è¿›è¡Œä¸€æ¬¡æ’åºï¼›</li><li>è¿™æ ·ä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½æ’åºå®Œæˆä»¥åï¼Œæ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—ã€‚</li></ol><h2 id="åŠ¨å›¾å±•ç¤º-9"><a href="#åŠ¨å›¾å±•ç¤º-9" class="headerlink" title="åŠ¨å›¾å±•ç¤º"></a>åŠ¨å›¾å±•ç¤º</h2><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/sort_algorithm/radix_sort.gif" alt></p><h2 id="ä»£ç å®ç°-9"><a href="#ä»£ç å®ç°-9" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="Java-9"><a href="#Java-9" class="headerlink" title="Java"></a>Java</h3><p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">radixSort</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token function">getMax</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> bit <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>max <span class="token operator">/</span> bit <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token function">radix</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> bit<span class="token punctuation">)</span><span class="token punctuation">;</span>        bit <span class="token operator">*=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">radix</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">,</span> <span class="token keyword">int</span> bit<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>array<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bucket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        bucket<span class="token punctuation">[</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span> bit<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> bucket<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        bucket<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> bucket<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> array<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        temp<span class="token punctuation">[</span>bucket<span class="token punctuation">[</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span> bit<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        bucket<span class="token punctuation">[</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span> bit<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token operator">--</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> temp<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getMax</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> array<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> max <span class="token operator">=</span> array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> max<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            max <span class="token operator">=</span> array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> max<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="Python-9"><a href="#Python-9" class="headerlink" title="Python"></a>Python</h3><p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">radix_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">:</span>    n <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">max</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># è®°å½•æœ€å¤§å€¼çš„ä½æ•°</span>    <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># nè½®æ’åº</span>        <span class="token comment"># æ¯ä¸€è½®ç”Ÿæˆ10ä¸ªåˆ—è¡¨</span>        bucket_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment"># å› ä¸ºæ¯ä¸€ä½æ•°å­—éƒ½æ˜¯0~9ï¼Œæ•…å»ºç«‹10ä¸ªæ¡¶</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> arr<span class="token punctuation">:</span>            <span class="token comment"># æŒ‰ç¬¬kä½æ”¾å…¥åˆ°æ¡¶ä¸­</span>            bucket_list<span class="token punctuation">[</span>i <span class="token operator">//</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">**</span> k<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>i<span class="token punctuation">)</span>        <span class="token comment"># æŒ‰å½“å‰æ¡¶çš„é¡ºåºé‡æ’åˆ—è¡¨</span>        arr <span class="token operator">=</span> <span class="token punctuation">[</span>j <span class="token keyword">for</span> i <span class="token keyword">in</span> bucket_list <span class="token keyword">for</span> j <span class="token keyword">in</span> i<span class="token punctuation">]</span>    <span class="token keyword">return</span> arr<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ’¡ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML ç‰¹æ®Šç¬¦å·ç¼–ç å¯¹ç…§è¡¨</title>
      <link href="post/65795b97.html"/>
      <url>post/65795b97.html</url>
      
        <content type="html"><![CDATA[<div class="table-container"><table><thead><tr><th>ç¬¦å·</th><th>å‘½åå®ä½“</th><th>åè¿›åˆ¶ç¼–ç </th><th>ç¬¦å·</th><th>å‘½åå®ä½“</th><th>åè¿›åˆ¶ç¼–ç </th><th>ç¬¦å·</th><th>å‘½åå®ä½“</th><th>åè¿›åˆ¶ç¼–ç </th></tr></thead><tbody><tr><td><code>Î‘</code></td><td><code>&amp;Alpha;</code></td><td><code>&amp;#913;</code></td><td><code>Î’</code></td><td><code>&amp;Beta;</code></td><td><code>&amp;#914;</code></td><td><code>Î“</code></td><td><code>&amp;Gamma;</code></td><td><code>&amp;#915;</code></td></tr><tr><td><code>Î”</code></td><td><code>&amp;Delta;</code></td><td><code>&amp;#916;</code></td><td><code>Î•</code></td><td><code>&amp;Epsilon;</code></td><td><code>&amp;#917;</code></td><td><code>Î–</code></td><td><code>&amp;Zeta;</code></td><td><code>&amp;#918;</code></td></tr><tr><td><code>Î—</code></td><td><code>&amp;Eta;</code></td><td><code>&amp;#919;</code></td><td><code>Î˜</code></td><td><code>&amp;Theta;</code></td><td><code>&amp;#920;</code></td><td><code>Î™</code></td><td><code>&amp;Iota;</code></td><td><code>&amp;#921;</code></td></tr><tr><td><code>Îš</code></td><td><code>&amp;Kappa;</code></td><td><code>&amp;#922;</code></td><td><code>Î›</code></td><td><code>&amp;Lambda;</code></td><td><code>&amp;#923;</code></td><td><code>Îœ</code></td><td><code>&amp;Mu;</code></td><td><code>&amp;#924;</code></td></tr><tr><td><code>Î</code></td><td><code>&amp;Nu;</code></td><td><code>&amp;#925;</code></td><td><code>Î</code></td><td><code>&amp;Xi;</code></td><td><code>&amp;#926;</code></td><td><code>ÎŸ</code></td><td><code>&amp;Omicron;</code></td><td><code>&amp;#927;</code></td></tr><tr><td><code>Î </code></td><td><code>&amp;Pi;</code></td><td><code>&amp;#928;</code></td><td><code>Î¡</code></td><td><code>&amp;Rho;</code></td><td><code>&amp;#929;</code></td><td><code>Î£</code></td><td><code>&amp;Sigma;</code></td><td><code>&amp;#931;</code></td></tr><tr><td><code>Î¤</code></td><td><code>&amp;Tau;</code></td><td><code>&amp;#932;</code></td><td><code>Î¥</code></td><td><code>&amp;Upsilon;</code></td><td><code>&amp;#933;</code></td><td><code>Î¦</code></td><td><code>&amp;Phi;</code></td><td><code>&amp;#934;</code></td></tr><tr><td><code>Î§</code></td><td><code>&amp;Chi;</code></td><td><code>&amp;#935;</code></td><td><code>Î¨</code></td><td><code>&amp;Psi;</code></td><td><code>&amp;#936;</code></td><td><code>Î©</code></td><td><code>&amp;Omega;</code></td><td><code>&amp;#937;</code></td></tr><tr><td><code>Î±</code></td><td><code>&amp;alpha;</code></td><td><code>&amp;#945;</code></td><td><code>Î²</code></td><td><code>&amp;beta;</code></td><td><code>&amp;#946;</code></td><td><code>Î³</code></td><td><code>&amp;gamma;</code></td><td><code>&amp;#947;</code></td></tr><tr><td><code>Î´</code></td><td><code>&amp;delta;</code></td><td><code>&amp;#948;</code></td><td><code>Îµ</code></td><td><code>&amp;epsilon;</code></td><td><code>&amp;#949;</code></td><td><code>Î¶</code></td><td><code>&amp;zeta;</code></td><td><code>&amp;#950;</code></td></tr><tr><td><code>Î·</code></td><td><code>&amp;eta;</code></td><td><code>&amp;#951;</code></td><td><code>Î¸</code></td><td><code>&amp;theta;</code></td><td><code>&amp;#952;</code></td><td><code>Î¹</code></td><td><code>&amp;iota;</code></td><td><code>&amp;#953;</code></td></tr><tr><td><code>Îº</code></td><td><code>&amp;kappa;</code></td><td><code>&amp;#954;</code></td><td><code>Î»</code></td><td><code>&amp;lambda;</code></td><td><code>&amp;#955;</code></td><td><code>Î¼</code></td><td><code>&amp;mu;</code></td><td><code>&amp;#956;</code></td></tr><tr><td><code>Î½</code></td><td><code>&amp;nu;</code></td><td><code>&amp;#957;</code></td><td><code>Î¾</code></td><td><code>&amp;xi;</code></td><td><code>&amp;#958;</code></td><td><code>Î¿</code></td><td><code>&amp;omicron;</code></td><td><code>&amp;#959;</code></td></tr><tr><td><code>Ï€</code></td><td><code>&amp;pi;</code></td><td><code>&amp;#960;</code></td><td><code>Ï</code></td><td><code>&amp;rho;</code></td><td><code>&amp;#961;</code></td><td><code>Ï‚</code></td><td><code>&amp;sigmaf;</code></td><td><code>&amp;#962;</code></td></tr><tr><td><code>Ïƒ</code></td><td><code>&amp;sigma;</code></td><td><code>&amp;#963;</code></td><td><code>Ï„</code></td><td><code>&amp;tau;</code></td><td><code>&amp;#964;</code></td><td><code>Ï…</code></td><td><code>&amp;upsilon;</code></td><td><code>&amp;#965;</code></td></tr><tr><td><code>Ï†</code></td><td><code>&amp;phi;</code></td><td><code>&amp;#966;</code></td><td><code>Ï‡</code></td><td><code>&amp;chi;</code></td><td><code>&amp;#967;</code></td><td><code>Ïˆ</code></td><td><code>&amp;psi;</code></td><td><code>&amp;#968;</code></td></tr><tr><td><code>Ï‰</code></td><td><code>&amp;omega;</code></td><td><code>&amp;#969;</code></td><td><code>Ï‘</code></td><td><code>&amp;thetasym;</code></td><td><code>&amp;#977;</code></td><td><code>Ï’</code></td><td><code>&amp;upsih;</code></td><td><code>&amp;#978;</code></td></tr><tr><td><code>Ï–</code></td><td><code>&amp;piv;</code></td><td><code>&amp;#982;</code></td><td><code>â€¢</code></td><td><code>&amp;bull;</code></td><td><code>&amp;#8226;</code></td><td><code>â€¦</code></td><td><code>&amp;hellip;</code></td><td><code>&amp;#8230;</code></td></tr><tr><td><code>â€²</code></td><td><code>&amp;prime;</code></td><td><code>&amp;#8242;</code></td><td><code>â€³</code></td><td><code>&amp;Prime;</code></td><td><code>&amp;#8243;</code></td><td><code>â€¾</code></td><td><code>&amp;oline;</code></td><td><code>&amp;#8254;</code></td></tr><tr><td><code>â„</code></td><td><code>&amp;frasl;</code></td><td><code>&amp;#8260;</code></td><td><code>â„˜</code></td><td><code>&amp;weierp;</code></td><td><code>&amp;#8472;</code></td><td><code>â„‘</code></td><td><code>&amp;image;</code></td><td><code>&amp;#8465;</code></td></tr><tr><td><code>â„œ</code></td><td><code>&amp;real;</code></td><td><code>&amp;#8476;</code></td><td><code>â„¢</code></td><td><code>&amp;trade;</code></td><td><code>&amp;#8482;</code></td><td><code>â„µ</code></td><td><code>&amp;alefsym;</code></td><td><code>&amp;#8501;</code></td></tr><tr><td><code>â†</code></td><td><code>&amp;larr;</code></td><td><code>&amp;#8592;</code></td><td><code>â†‘</code></td><td><code>&amp;uarr;</code></td><td><code>&amp;#8593;</code></td><td><code>â†’</code></td><td><code>&amp;rarr;</code></td><td><code>&amp;#8594;</code></td></tr><tr><td><code>â†“</code></td><td><code>&amp;darr;</code></td><td><code>&amp;#8595;</code></td><td><code>â†”</code></td><td><code>&amp;harr;</code></td><td><code>&amp;#8596;</code></td><td><code>â†µ</code></td><td><code>&amp;crarr;</code></td><td><code>&amp;#8629;</code></td></tr><tr><td><code>â‡</code></td><td><code>&amp;lArr;</code></td><td><code>&amp;#8656;</code></td><td><code>â‡‘</code></td><td><code>&amp;uArr;</code></td><td><code>&amp;#8657;</code></td><td><code>â‡’</code></td><td><code>&amp;rArr;</code></td><td><code>&amp;#8658;</code></td></tr><tr><td><code>â‡“</code></td><td><code>&amp;dArr;</code></td><td><code>&amp;#8659;</code></td><td><code>â‡”</code></td><td><code>&amp;hArr;</code></td><td><code>&amp;#8660;</code></td><td><code>âˆ€</code></td><td><code>&amp;forall;</code></td><td><code>&amp;#8704;</code></td></tr><tr><td><code>âˆ‚</code></td><td><code>&amp;part;</code></td><td><code>&amp;#8706;</code></td><td><code>âˆƒ</code></td><td><code>&amp;exist;</code></td><td><code>&amp;#8707;</code></td><td><code>âˆ…</code></td><td><code>&amp;empty;</code></td><td><code>&amp;#8709;</code></td></tr><tr><td><code>âˆ‡</code></td><td><code>&amp;nabla;</code></td><td><code>&amp;#8711;</code></td><td><code>âˆˆ</code></td><td><code>&amp;isin;</code></td><td><code>&amp;#8712;</code></td><td><code>âˆ‰</code></td><td><code>&amp;notin;</code></td><td><code>&amp;#8713;</code></td></tr><tr><td><code>âˆ‹</code></td><td><code>&amp;ni;</code></td><td><code>&amp;#8715;</code></td><td><code>âˆ</code></td><td><code>&amp;prod;</code></td><td><code>&amp;#8719;</code></td><td><code>âˆ‘</code></td><td><code>&amp;sum;</code></td><td><code>&amp;#8722;</code></td></tr><tr><td><code>âˆ’</code></td><td><code>&amp;minus;</code></td><td><code>&amp;#8722;</code></td><td><code>âˆ—</code></td><td><code>&amp;lowast;</code></td><td><code>&amp;#8727;</code></td><td><code>âˆš</code></td><td><code>&amp;radic;</code></td><td><code>&amp;#8730;</code></td></tr><tr><td><code>âˆ</code></td><td><code>&amp;prop;</code></td><td><code>&amp;#8733;</code></td><td><code>âˆ</code></td><td><code>&amp;infin;</code></td><td><code>&amp;#8734;</code></td><td><code>âˆ </code></td><td><code>&amp;ang;</code></td><td><code>&amp;#8736;</code></td></tr><tr><td><code>âˆ§</code></td><td><code>&amp;and;</code></td><td><code>&amp;#8869;</code></td><td><code>âˆ¨</code></td><td><code>&amp;or;</code></td><td><code>&amp;#8870;</code></td><td><code>âˆ©</code></td><td><code>&amp;cap;</code></td><td><code>&amp;#8745;</code></td></tr><tr><td><code>âˆª</code></td><td><code>&amp;cup;</code></td><td><code>&amp;#8746;</code></td><td><code>âˆ«</code></td><td><code>&amp;int;</code></td><td><code>&amp;#8747;</code></td><td><code>âˆ´</code></td><td><code>&amp;there4;</code></td><td><code>&amp;#8756;</code></td></tr><tr><td><code>âˆ¼</code></td><td><code>&amp;sim;</code></td><td><code>&amp;#8764;</code></td><td><code>â‰…</code></td><td><code>&amp;cong;</code></td><td><code>&amp;#8773;</code></td><td><code>â‰ˆ</code></td><td><code>&amp;asymp;</code></td><td><code>&amp;#8773;</code></td></tr><tr><td><code>â‰ </code></td><td><code>&amp;ne;</code></td><td><code>&amp;#8800;</code></td><td><code>â‰¡</code></td><td><code>&amp;equiv;</code></td><td><code>&amp;#8801;</code></td><td><code>â‰¤</code></td><td><code>&amp;le;</code></td><td><code>&amp;#8804;</code></td></tr><tr><td><code>â‰¥</code></td><td><code>&amp;ge;</code></td><td><code>&amp;#8805;</code></td><td><code>âŠ‚</code></td><td><code>&amp;sub;</code></td><td><code>&amp;#8834;</code></td><td><code>âŠƒ</code></td><td><code>&amp;sup;</code></td><td><code>&amp;#8835;</code></td></tr><tr><td><code>âŠ„</code></td><td><code>&amp;nsub;</code></td><td><code>&amp;#8836;</code></td><td><code>âŠ†</code></td><td><code>&amp;sube;</code></td><td><code>&amp;#8838;</code></td><td><code>âŠ‡</code></td><td><code>&amp;supe;</code></td><td><code>&amp;#8839;</code></td></tr><tr><td><code>âŠ•</code></td><td><code>&amp;oplus;</code></td><td><code>&amp;#8853;</code></td><td><code>âŠ—</code></td><td><code>&amp;otimes;</code></td><td><code>&amp;#8855;</code></td><td><code>âŠ¥</code></td><td><code>&amp;perp;</code></td><td><code>&amp;#8869;</code></td></tr><tr><td><code>â‹…</code></td><td><code>&amp;sdot;</code></td><td><code>&amp;#8901;</code></td><td><code>âŒˆ</code></td><td><code>&amp;lceil;</code></td><td><code>&amp;#8968;</code></td><td><code>âŒ‰</code></td><td><code>&amp;rceil;</code></td><td><code>&amp;#8969;</code></td></tr><tr><td><code>âŒŠ</code></td><td><code>&amp;lfloor;</code></td><td><code>&amp;#8970;</code></td><td><code>âŒ‹</code></td><td><code>&amp;rfloor;</code></td><td><code>&amp;#8971;</code></td><td><code>â—Š</code></td><td><code>&amp;loz;</code></td><td><code>&amp;#9674;</code></td></tr><tr><td><code>â™ </code></td><td><code>&amp;spades;</code></td><td><code>&amp;#9824;</code></td><td><code>â™£</code></td><td><code>&amp;clubs;</code></td><td><code>&amp;#9827;</code></td><td><code>â™¥</code></td><td><code>&amp;hearts;</code></td><td><code>&amp;#9829;</code></td></tr><tr><td><code>â™¦</code></td><td><code>&amp;diams;</code></td><td><code>&amp;#9830;</code></td><td><code> </code></td><td><code>&amp;nbsp;</code></td><td><code>&amp;#160;</code></td><td><code>Â¡</code></td><td><code>&amp;iexcl;</code></td><td><code>&amp;#161;</code></td></tr><tr><td><code>Â¢</code></td><td><code>&amp;cent;</code></td><td><code>&amp;#162;</code></td><td><code>Â£</code></td><td><code>&amp;pound;</code></td><td><code>&amp;#163;</code></td><td><code>Â¤</code></td><td><code>&amp;curren;</code></td><td><code>&amp;#164;</code></td></tr><tr><td><code>Â¥</code></td><td><code>&amp;yen;</code></td><td><code>&amp;#165;</code></td><td><code>Â¦</code></td><td><code>&amp;brvbar;</code></td><td><code>&amp;#166;</code></td><td><code>Â§</code></td><td><code>&amp;sect;</code></td><td><code>&amp;#167;</code></td></tr><tr><td><code>Â¨</code></td><td><code>&amp;uml;</code></td><td><code>&amp;#168;</code></td><td><code>Â©</code></td><td><code>&amp;copy;</code></td><td><code>&amp;#169;</code></td><td><code>Âª</code></td><td><code>&amp;ordf;</code></td><td><code>&amp;#170;</code></td></tr><tr><td><code>Â«</code></td><td><code>&amp;laquo;</code></td><td><code>&amp;#171;</code></td><td><code>Â¬</code></td><td><code>&amp;not;</code></td><td><code>&amp;#172;</code></td><td><code>Â­</code></td><td><code>&amp;shy;</code></td><td><code>&amp;#173;</code></td></tr><tr><td><code>Â®</code></td><td><code>&amp;reg;</code></td><td><code>&amp;#174;</code></td><td><code>Â¯</code></td><td><code>&amp;macr;</code></td><td><code>&amp;#175;</code></td><td><code>Â°</code></td><td><code>&amp;deg;</code></td><td><code>&amp;#176;</code></td></tr><tr><td><code>Â±</code></td><td><code>&amp;plusmn;</code></td><td><code>&amp;#177;</code></td><td><code>Â²</code></td><td><code>&amp;sup2;</code></td><td><code>&amp;#178;</code></td><td><code>Â³</code></td><td><code>&amp;sup3;</code></td><td><code>&amp;#179;</code></td></tr><tr><td><code>Â´</code></td><td><code>&amp;acute;</code></td><td><code>&amp;#180;</code></td><td><code>Âµ</code></td><td><code>&amp;micro;</code></td><td><code>&amp;#181;</code></td><td><code>&quot;</code></td><td><code>&amp;quot;</code></td><td><code>&amp;#34;</code></td></tr><tr><td><code>&lt;</code></td><td><code>&amp;lt;</code></td><td><code>&amp;#60;</code></td><td><code>&gt;</code></td><td><code>&amp;gt;</code></td><td><code>&amp;#62;</code></td><td><code>&#39;</code></td><td><code>&amp;apos;</code></td><td><code>&amp;#39;</code></td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ“‘æ–‡æ¡£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç‰¹æ®Šç¬¦å·</title>
      <link href="post/73bb9016.html"/>
      <url>post/73bb9016.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç¼–å·åºå·"><a href="#ç¼–å·åºå·" class="headerlink" title="ç¼–å·åºå·"></a>ç¼–å·åºå·</h1><p>â‘ â‘¡â‘¢â‘£â‘¤â‘¥â‘¦â‘§â‘¨â‘©â‘ªâ‘«â‘¬â‘­â‘®â‘¯â‘°â‘±â‘²â‘³â“ª</p><p>â¶â·â¸â¹âºâ»â¼â½â¾â¿â“«â“¬â“­â“®â“¯â“°â“±â“²â“³â“´</p><p>ãŠ€ãŠãŠ‚ãŠƒãŠ„ãŠ…ãŠ†ãŠ‡ãŠˆãŠ‰</p><p>ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å</p><p>â‘´â‘µâ‘¶â‘·â‘¸â‘¹â‘ºâ‘»â‘¼â‘½â‘¾â‘¿â’€â’â’‚â’ƒâ’„â’…â’†â’‡</p><p>â’ˆâ’‰â’Šâ’‹â’Œâ’â’â’â’â’‘â’’â’“â’”â’•â’–â’—â’˜â’™â’šâ’›</p><p>â… â…¡â…¢â…£â…¤â…¥â…¦â…§â…¨â…©â…ªâ…«</p><p>â’¶â’·â’¸â’¹â’ºâ’»â’¼â’½â’¾â’¿â“€â“â“‚â“ƒâ“„â“…â“†â“‡â“ˆâ“‰â“Šâ“‹â“Œâ“â“â“</p><p>â“â“‘â“’â““â“”â“•â“–â“—â“˜â“™â“šâ“›â“œâ“â“â“Ÿâ“ â“¡â“¢â“£â“¤â“¥â“¦â“§â“¨â“©</p><p>â’œâ’â’â’Ÿâ’ â’¡â’¢â’£â’¤â’¥â’¦â’§â’¨â’©â’ªâ’«â’¬â’­â’®â’¯â’°â’±â’²â’³â’´â’µ</p><p>â°Â¹Â²Â³â´âµâ¶â·â¸â¹â‚€â‚â‚‚â‚ƒâ‚„â‚…â‚†â‚‡â‚ˆâ‚‰</p><h1 id="æ•°å­¦ç¬¦å·"><a href="#æ•°å­¦ç¬¦å·" class="headerlink" title="æ•°å­¦ç¬¦å·"></a>æ•°å­¦ç¬¦å·</h1><p>ï¹¢ï¹£Ã—Ã·Â±/â‰Œâˆ½â‰¦â‰§â‰’ï¹¤ï¹¥â‰ˆâ‰¡â‰ =â‰¤â‰¥&lt;&gt;â‰®â‰¯â‰‚â‰ƒâ‰„â‰…â‰†â‰‡â‰ˆâ‰‰â‰Šâ‰‹â‰â‰â‰â‰â‰‘â‰’â‰“â‰”â‰•â‰–â‰—â‰˜â‰™â‰šâ‰›â‰œâ‰â‰â‰Ÿâ‰¢â‰£â‰¨â‰©âŠ°âŠ±â‹›â‹šâˆ·âˆ¶âˆâˆâˆ§âˆ¨âˆ‘âˆâˆªâˆ©âˆˆâˆµâˆ´âŠ¥âˆ¥âˆ âŒ’âŠ™âˆšâˆŸâŠ¿ã’ã‘â…ŸÂ½â…“â…•â…™â…›â…”â…–â…šâ…œÂ¾â…—â…â…â…˜âˆ«âˆ¬âˆ­âˆ®âˆ¯âˆ°âˆ±âˆ²âˆ³%â„…â€°â€±Ã¸Ã˜Ï€</p><h1 id="æ ‡ç‚¹ç¬¦å·"><a href="#æ ‡ç‚¹ç¬¦å·" class="headerlink" title="æ ‡ç‚¹ç¬¦å·"></a>æ ‡ç‚¹ç¬¦å·</h1><p>ã€‚ï¼Œã€&#39;ï¼šâˆ¶ï¼›?â€˜â€™â€œâ€ã€ã€Ë†Ë‡ï¹•ï¸°ï¹”ï¹–ï¹‘Â·Â¨â€¦.Â¸;ï¼Â´ï¼Ÿï¼ï½â€”Ë‰|â€–&quot;ã€ƒ`@ï¹«Â¡Â¿ï¹ï¹‹ï¹Œï¸´ã€…ï¹Ÿ#ï¹©$ï¹ &amp;ï¹ª%*ï¹¡ï¹¢ï¹¦ï¹¤â€ï¿£Â¯â€•ï¹¨Ë†Ëœï¹ï¹+=&lt;<em>_-\Ë‡~ï¹‰ï¹Šï¼ˆï¼‰ã€ˆã€‰â€¹â€ºï¹›ï¹œã€ã€ã€–ã€—[]ã€Šã€‹ã€”ã€•{}ã€Œã€ã€ã€‘ï¸µï¸·^ï¸¹ï¸½</em>ï¹ï¹ƒï¸»ï¸¶ï¸¸ï¹€ï¸ºï¸¾Ë‰ï¹‚ï¹„ï¸¼ââ</p><h1 id="ä¸Šæ ‡ç¬¦å·"><a href="#ä¸Šæ ‡ç¬¦å·" class="headerlink" title="ä¸Šæ ‡ç¬¦å·"></a>ä¸Šæ ‡ç¬¦å·</h1><p>áµƒ áµ‡ á¶œ áµˆ áµ‰ áµ Ê° â± Ê² áµ Ë¡ áµ â¿ áµ’ áµ– áµ’âƒ’ Ê³ Ë¢ áµ— áµ˜ áµ› Ê· Ë£ Ê¸ á™† á´¬ á´® á’¼ á´° á´± á´³ á´´ á´µ á´¶ á´· á´¸ á´¹ á´º á´¼ á´¾ á´¼Ì´ á´¿ Ë¢ áµ€ áµ áµ‚ Ë£ áµ á™† ê° Ë€ Ë Ë¤ êŸ¸ ê­œ Ê± ê­ ê­ Ê´ Êµ Ê¶ ê­Ÿ Ë  êŸ¹ á´­ á´¯ á´² á´» á´½ áµ„ áµ… áµ† áµŠ áµ‹ áµŒ áµ‘ áµ“ áµš áµ áµ áµŸ áµ  áµ¡ áµ áµ” áµ• áµ™ áµœ á¶› á¶œ á¶ á¶ á¶Ÿ á¶¡ á¶£ á¶¤ á¶¥ á¶¦ á¶§ á¶¨ á¶© á¶ª á¶« á¶¬ á¶­ á¶® á¶¯ á¶° á¶± á¶² á¶³ á¶´ á¶µ á¶¶ á¶· á¶¸ á¶¹ á¶º á¶¼ á¶½ á¶¾ á¶¿ êšœ êš áƒ¼ á’ƒ á•» á‘¦ á’„ á•ª á‘‹ á‘Š á”¿ á¢ á£• á¤ á£– á£´ á£— á”† á™š á¡ á˜ áœ á•½ á™† á™‡ á’¼ á£³ á’¢ á’» á”¿ á¤ á£– á£µ á™š áª á“‘ á˜ áœ á•½ á™† á™‡ â° Â¹ Â² Â³ â´ âµ â¶ â· â¸ â¹ âº â» â¼ Ë‚ Ëƒ â½ â¾ Ë™ * Âº ã†’ã†“ã†”ã†•ã†–ã†—ã†˜ã†™ã†šã†›ã†œã†ã†</p><h1 id="ä¸‹æ ‡ç¬¦å·"><a href="#ä¸‹æ ‡ç¬¦å·" class="headerlink" title="ä¸‹æ ‡ç¬¦å·"></a>ä¸‹æ ‡ç¬¦å·</h1><p>â‚€ â‚ â‚‚ â‚ƒ â‚„ â‚… â‚† â‚‡ â‚ˆ â‚‰ â‚Š â‚‹ â‚Œ â‚ â‚ â‚ â‚‘ â‚’ â‚“ â‚” â‚• â‚– â‚— â‚˜ â‚™ â‚š â‚› â‚œ áµ¤ áµ¥ â‚“ á™® áµ¤ áµ© áµ¦ â‚— Ëª áŸ³ áŸ· â‚’ áµ¨ â‚› áŸ´ áµ¤ áµª áµ§</p><h1 id="å•ä½ç¬¦å·"><a href="#å•ä½ç¬¦å·" class="headerlink" title="å•ä½ç¬¦å·"></a>å•ä½ç¬¦å·</h1><p>Â°â€²â€³%â„ƒâ„‰Ã…ï¹ªâ€°ã¡ã•ãœãããmÂ³ããã„Âºâ—‹Â¤%ÂºÂ¹Â²Â³â´âµâ¶â·â¸â¹â°âºâ»â¼â½â¾Ê²Ê°Ê³Ê·Ê¸â¿</p><h1 id="ç®­å¤´ç¬¦å·"><a href="#ç®­å¤´ç¬¦å·" class="headerlink" title="ç®­å¤´ç¬¦å·"></a>ç®­å¤´ç¬¦å·</h1><p>â†‘â†“â†â†’â†–â†—â†˜â†™â†”â†•â»â¼â½â¸â³âºâ»â´âµâ¶â·â¹â–¶â–ºâ–·â—â—€â—„Â«Â»â©âªâ«â¬â­â®â¯â±ââ²â¾â”â˜â™âšâ›âœâââŸâ â¡â¢â£â¤â¥â¦â§â¨â†šâ†›â†œâ†â†â†Ÿâ† â† â†¡â†¢â†£â†¤â†¤â†¥â†¦â†§â†¨â‡„â‡…â‡†â‡‡â‡ˆâ‡‰â‡Šâ‡‹â‡Œâ‡â‡â‡â‡â‡‘â‡’â‡“â‡”â‡–â‡—â‡˜â‡™â‡œâ†©â†ªâ†«â†¬â†­â†®â†¯â†°â†±â†²â†³â†´â†µâ†¶â†·â†¸â†¹â˜‡â˜ˆâ†¼â†½â†¾â†¿â‡€â‡â‡‚â‡ƒâ‡â‡Ÿâ‡ â‡¡â‡¢â‡£â‡¤â‡¥â‡¦â‡§â‡¨â‡©â‡ªâ†ºâ†»â‡šâ‡›</p><h1 id="ç¬¦å·å›¾æ¡ˆ"><a href="#ç¬¦å·å›¾æ¡ˆ" class="headerlink" title="ç¬¦å·å›¾æ¡ˆ"></a>ç¬¦å·å›¾æ¡ˆ</h1><p>âœâœâœâœ‘âœ’âœ‰âœâœ‚âœƒâœ„âœ†âœ‰â˜â˜â˜‘âˆšâ˜â˜’âœ—ã„¨âœ˜âœ•âœ–âœ–â˜¢â˜ â˜£âœˆâ˜…â˜†âœ¡å›ã¿â˜¯â˜°â˜²â˜±â˜´â˜µâ˜¶â˜³â˜·â˜œâ˜â˜šâ˜›â˜Ÿâ™¤â™§â™¡â™¢â™ â™£â™¥â™¦ì›ƒìœ â–â˜ªâœ¿â™‚â™€âœªâœ¯â˜­â³ååâˆšÃ—â– â–¡â—†â—â—‹âœ™â˜ºâ˜»â€âš˜â™”â™•â™–â™—â™™â™šâ™›â™œâ™â™â™Ÿâ™‚â™€â™ â™£â¤â˜œâ˜âŠ™â˜¼â–§â–¨â™¨â–ªâ—Šâ—¦â–£â–¤â–¥â–¦â–©â—˜â—ˆâ—‡â™¬â™ªâ™©â™­â™ªã®â†’ã‚ãƒï¿¡Ğ®ã€“Â§â™¤Â¤âœ²âˆâœ¿âœ²âˆâ¹â˜€â˜‚â˜ã€ã€‘â”±â”²â£âœšâœªâœ£âœ¤âœ¥âœ¦â€»â‰â¥â¦â§âƒâ‚ââœ„â˜ªâ˜£â˜¢â˜ â˜­áƒ¦â˜€â˜â˜‚â˜ƒâ˜„â˜‡â˜ˆâŠ™â˜Šâ˜‹â˜Œâ˜â“›â“â“¥â“”â•¬ã€ã€âˆ´â˜€â™«â™¬â™©â™­â™ªï¹Œã®â–ºâ—„â™¨â†˜â–€â–„â–ˆâ–Œâ—¦â˜¼â™ªã®â†’â–¬â™¦â—Šâ—¦â™ â™£â–£Û°Â·Â·Û°â–ºâ—„â™¨â–ªâ–«â˜¼â™¦âŠ™â—â—‹â‘ âŠ•Î˜Â¤ãŠ£â™€â—†â—‡â—£â—¢â—¥â–²â–¼â–³â–½âŠ¿â—¤â—¥âœ¡âœ“âœ”âœ•âœ–â™‚â™€â˜œâ˜âŠ™â—â–ºâ—„â™¨â—â—‘â–ªâ–«â˜¼â™¦â–â–‘â–’â–¬â™¦â—Šâ—˜â—™â—¦â˜¼â–£â–¤â–¥â–¦â–©â—˜â—™â—ˆâ™«â™¬â™ªâ™©â™­â™ªâœ„â˜ªâ˜£â˜¢â˜ â™¯â™©â™ªâ™«â™¬â™­â™®â˜ªÂºÂºâ‚ªÂ¤íÂ«Â»â„¢â™‚âœ¿ï½¡â—•â€¿â—•ï½¡â˜¹î¨âŠ°âŠ±â€Ò‰à¦à±ƒØ©Ù…ÊšÎÉÊšÉï»¬à¹‘Ùà¹“Ù‚Íœâœ¿Ò‰Íœáƒ¦Ò‰â„˜à³„Î¶à¸±Í¡à¸•Ô…ï¸âœ¾à³„à³¨Ï¿Ò‰âœ¿à³ƒâœ¿Ò‰Íœâœ¿Û£Î¶à¸±Í¡âœ¿ÙŠâ„³â€ÍœÒ‰ã€€Ò‰Ò‰Í¡ê§à¼ºà¹‘à¹‘à¼»ê§‚áƒ“ï¹âƒ£ãƒï¿¡</p><h1 id="å¸Œè…Šå­—æ¯"><a href="#å¸Œè…Šå­—æ¯" class="headerlink" title="å¸Œè…Šå­—æ¯"></a>å¸Œè…Šå­—æ¯</h1><p>Î‘Î’Î“Î”Î•Î–Î—Î˜Î™ÎšÎ›ÎœÎÎÎŸÎ Î¡Î£Î¤Î¥Î¦Î§Î¨Î©Î±Î²Î³Î´ÎµÎ¶Î½Î¾Î¿Ï€ÏÏƒÎ·Î¸Î¹ÎºÎ»Î¼Ï„Ï…Ï†Ï‡ÏˆÏ‰</p><h1 id="ä¿„è¯­å­—æ¯"><a href="#ä¿„è¯­å­—æ¯" class="headerlink" title="ä¿„è¯­å­—æ¯"></a>ä¿„è¯­å­—æ¯</h1><p>ĞĞ‘Ğ’Ğ“Ğ”Ğ•ĞĞ–Ğ—Ğ˜Ğ™ĞšĞ›ĞœĞĞĞŸĞ Ğ¡Ğ¢Ğ£Ğ¤Ğ¥Ğ¦Ğ§Ğ¨Ğ©ĞªĞ«Ğ¬Ğ­Ğ®Ğ¯Ğ°Ğ±Ğ²Ğ³Ğ´ĞµÑ‘Ğ¶Ğ·Ğ¸Ğ¹ĞºĞ»Ğ¼Ğ½Ğ¾Ğ¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŠÑ‹ÑŒÑÑÑ</p><h1 id="æ±‰è¯­æ‹¼éŸ³"><a href="#æ±‰è¯­æ‹¼éŸ³" class="headerlink" title="æ±‰è¯­æ‹¼éŸ³"></a>æ±‰è¯­æ‹¼éŸ³</h1><p>ÄÃ¡ÇÃ ÅÃ³Ç’Ã²Ä“Ã©Ä›Ã¨Ä«Ã­ÇÃ¬Å«ÃºÇ”Ã¹Ç–Ç˜ÇšÇœÃ¼ÃªÉ‘îŸ‡Å„ÅˆîŸˆÉ¡ã„…ã„†ã„‡ã„ˆã„‰ã„Šã„‹ã„Œã„ã„ã„ã„ã„‘ã„’ã„“ã„”ã„•ã„–ã„—ã„˜ã„™ã„šã„›ã„œã„ã„ã„Ÿã„ ã„¡ã„¢ã„£ã„¤ã„¥ã„¦ã„§ã„¨ã„©</p><h1 id="ä¸­æ–‡å­—ç¬¦"><a href="#ä¸­æ–‡å­—ç¬¦" class="headerlink" title="ä¸­æ–‡å­—ç¬¦"></a>ä¸­æ–‡å­—ç¬¦</h1><p>ååå„å·œæœ¤æ°ºæ›±ç”´å›å…€ã€…ã€†ã®ãã€¡ã€¢ã€£ã€¤ã€¥ã€¦ã€§ã€¨ã€©ãŠãŠãŠŒãŠ‹ãŠãŠšãŠ›ãŠãŠŠãŠ£ãŠ¤ãŠ¥ãŠ¦ãŠ§ãŠ¨ãŠ’ãŠ«ãŠ‘ãŠ“ãŠ”ãŠ•ãŠ–ãŠ—ãŠ˜ãŠœãŠãŠãŠŸãŠ ãŠ¡ãŠ¢ãŠ©ãŠªãŠ¬ãŠ­ãŠ®ãŠ¯ãŠ°ãŠ€ãŠãŠ‚ãŠƒãŠ„ãŠ…ãŠ†ãŠ‡ãŠˆãŠ‰</p><h1 id="éŸ©å›½ç¬¦å·"><a href="#éŸ©å›½ç¬¦å·" class="headerlink" title="éŸ©å›½ç¬¦å·"></a>éŸ©å›½ç¬¦å·</h1><p>ã„±ã„²ã„³ã„´ã„µã„¶ã„·ã„¸ã„¹ã„ºã„»ã„¼ã„½ã„¾ã„¿ã…€ã…ã…‚ã…ƒã…„ã……ã…†ã…‡ã…ˆã…‰ã…Šã…‹ã…Œã…ã…ã…ã…ã…‘ã…’ã…“ã…”ã…—ã…˜ã…™ã…šã…›ã…œã…ã…ã…Ÿã… ã…¡ã…¢ã…¥ã…¦ã…§ã…¨ã…©ã…ªã…«ã…¬ã…­ã…®ã…¯ã…°ã…±ã…²ã…³ã…´ã…µã…¶ã…·ã…¸ã…¹ã…ºã…»ã…¼ã…½ã…¾ã…¿ã†€ã†ã†‚ã†ƒã†„ã†…ã††ã†‡ã†ˆã†‰ã†Š</p><h1 id="å¤©æ°”ç¬¦"><a href="#å¤©æ°”ç¬¦" class="headerlink" title="å¤©æ°”ç¬¦"></a>å¤©æ°”ç¬¦</h1><p>ÏŸâ˜€â˜â˜‚â˜ƒâ˜„â˜‰â˜¼â˜½â˜¾â™â™¨â„â…â†</p><h1 id="åˆ¶è¡¨ç¬¦"><a href="#åˆ¶è¡¨ç¬¦" class="headerlink" title="åˆ¶è¡¨ç¬¦"></a>åˆ¶è¡¨ç¬¦</h1><p>â”€â”â”‚â”ƒâ•Œâ•â•â•â”„â”…â”†â”‡â”ˆâ”‰â”Šâ”‹â”Œâ”â”â”â”â”‘â”’â”“â””â”•â”–â”—â”˜â”™â”šâ”›â”œâ”â”â”Ÿâ” â”¡â”¢â”£â”¤â”¥â”¦â”§â”¨â”©â”ªâ”«â”¬â”­â”®â”¯â”°â”±â”²â”³â”´â”µâ”¶â”·â”¸â”¹â”ºâ”»â”¼â”½â”¾â”¿â•€â•â•‚â•ƒâ•„â•…â•†â•‡â•ˆâ•‰â•Šâ•‹â•ªâ•«â•¬â•â•‘â•’â•“â•”â••â•–â•—â•˜â•™â•šâ•›â•œâ•â•â•Ÿâ• â•¡â•¢â•£â•¤â•¥â•¦â•§â•¨â•©â•³â•”â•—â•â•šâ•¬â•â•“â•©â” â”¨â”¯â”·â”â”“â”—â”›â”³âŠ¥ï¹ƒï¹„â”Œâ•®â•­â•¯â•°</p><h1 id="å›½é™…è±¡æ£‹ç¬¦å·"><a href="#å›½é™…è±¡æ£‹ç¬¦å·" class="headerlink" title="å›½é™…è±¡æ£‹ç¬¦å·"></a>å›½é™…è±¡æ£‹ç¬¦å·</h1><p>â™šã€€â™›ã€€â™ã€€â™ã€€â™œã€€â™Ÿã€€â™”ã€€â™•ã€€â™—ã€€â™˜ã€€â™–ã€€â™Ÿ</p><h1 id="è´§å¸ç¬¦å·"><a href="#è´§å¸ç¬¦å·" class="headerlink" title="è´§å¸ç¬¦å·"></a>è´§å¸ç¬¦å·</h1><p>Â¥ï¼šäººæ°‘å¸ç¬¦å·ã€‚</p><p>à¸¿ï¼šæ³°é“¢æ ‡å¿—ï¼ˆè¢«ä½¿ç”¨åœ¨æ³°å›½ï¼‰ï¼Œåˆ†æ ‡å¿—ï¼ˆç¾å…ƒã€æ¬§å…ƒå’Œå…¶å®ƒè´§å¸ç»†åˆ†ï¼‰ã€‚</p><p>â‚¡ï¼šcol3onæ ‡å¿—ï¼ˆè¢«ä½¿ç”¨åœ¨å“¥æ–¯è¾¾é»åŠ å’Œåœ¨è¨å°”ç“¦å¤šï¼‰ã€‚</p><p>â‚ ï¼šECU æ ‡å¿—ï¼ˆä¸å¹¿æ³›è¢«åº”ç”¨, å’Œå†å²; ç”±æ¬§æ´²æ›¿æ¢ï¼‰ã€‚</p><p>â‚¢ï¼šå…‹é²èµ›ç½—æ ‡å¿—ï¼ˆä»¥å‰è¢«ä½¿ç”¨åœ¨å·´è¥¿ï¼‰ã€‚</p><p>â‚¬ï¼šæ¬§å…ƒæ ‡å¿—ã€‚</p><p>â‚©ï¼šéŸ©å…ƒã€æœé²œå…ƒæ ‡å¿—ã€‚</p><p>$ï¼šç¾å…ƒæ ‡å¿—ï¼ˆå¹¶ä¸”è¢«ä½¿ç”¨ä¸ºè®¸å¤šå…¶å®ƒè´§å¸åœ¨ç¾æ´², è­¬å¦‚ä¸åŒçš„æ¯”ç´¢, å’Œä»¥å‰ä¸ºè‘¡è„ç‰™åŸƒæ–¯åº“å¤šä½œä¸º cifr6aoï¼‰ã€‚</p><p>ï¿¡ï¼šè‹±ç£…æ ‡å¿—ï¼ˆå¤§ä¸åˆ—é¢ åŠåŒ—çˆ±å°”å…°è”åˆç‹å›½/è‹±å›½ è´§å¸ç¬¦å·ï¼‰ã€‚</p><p>â‚¯ï¼šå¾·æ‹‰å…‹é©¬æ ‡å¿—ï¼ˆä»¥å‰è¢«ä½¿ç”¨åœ¨å¸Œè…Šï¼‰ã€‚</p><p>â‚«ï¼šoong æ ‡å¿—ï¼ˆè¢«ä½¿ç”¨åœ¨è¶Šå—ï¼‰ã€‚</p><p>å††ï¼šæ—¥å…ƒçš„è´§å¸ç¬¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ“‘æ–‡æ¡£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDFS Shell å‘½ä»¤</title>
      <link href="post/d1e7dfd3.html"/>
      <url>post/d1e7dfd3.html</url>
      
        <content type="html"><![CDATA[<h1 id="FS-Shell"><a href="#FS-Shell" class="headerlink" title="FS Shell"></a>FS Shell</h1><ul><li><p>è°ƒç”¨æ–‡ä»¶ç³»ç»Ÿï¼ˆFSï¼‰çš„ Shell å‘½ä»¤åº”ä½¿ç”¨ <code>bin/hadoop fs &lt;args&gt;</code> çš„å½¢å¼ã€‚</p></li><li><p>æ‰€æœ‰çš„ FS shell å‘½ä»¤ä½¿ç”¨ URI è·¯å¾„ä½œä¸ºå‚æ•°ã€‚</p></li><li><p>URI æ ¼å¼æ˜¯ <code>scheme://authority/path</code>ã€‚å¯¹ HDFS æ–‡ä»¶ç³»ç»Ÿï¼Œ<code>scheme</code> æ˜¯ <code>hdfs</code>ï¼Œå¯¹æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼Œ<code>scheme</code> æ˜¯ <code>file</code>ã€‚å…¶ä¸­ <code>scheme</code> å’Œ <code>authority</code> å‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæœªåŠ æŒ‡å®šï¼Œå°±ä¼šä½¿ç”¨é…ç½®ä¸­æŒ‡å®šçš„é»˜è®¤ <code>scheme</code>ã€‚</p></li><li><p>ä¸€ä¸ª HDFS æ–‡ä»¶æˆ–ç›®å½•æ¯”å¦‚ <code>/parent/child</code> å¯ä»¥è¡¨ç¤ºæˆ <code>hdfs://namenode:namenodeport/parent/child</code>ï¼Œæˆ–è€…æ›´ç®€å•çš„ <code>/parent/child</code>ï¼ˆå‡è®¾ä½ é…ç½®æ–‡ä»¶ä¸­çš„é»˜è®¤å€¼æ˜¯ <code>namenode:namenodeport</code>ï¼‰ã€‚</p></li><li><p>å¤§å¤šæ•° FS Shell å‘½ä»¤çš„è¡Œä¸ºå’Œå¯¹åº”çš„ Unix Shell å‘½ä»¤ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„ä¼šåœ¨ä¸‹é¢ä»‹ç»å„å‘½ä»¤ä½¿ç”¨è¯¦æƒ…æ—¶æŒ‡å‡ºã€‚å‡ºé”™ä¿¡æ¯ä¼šè¾“å‡ºåˆ° <code>stderr</code>ï¼Œå…¶ä»–ä¿¡æ¯è¾“å‡ºåˆ° <code>stdout</code>ã€‚</p></li></ul><h1 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -cat URI [URI â€¦]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼šå°†è·¯å¾„æŒ‡å®šæ–‡ä»¶çš„å†…å®¹è¾“å‡ºåˆ° <code>stdout</code>ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -cat hdfs:&#x2F;&#x2F;host1:port1&#x2F;file1 hdfs:&#x2F;&#x2F;host2:port2&#x2F;file2hadoop fs -cat file:&#x2F;&#x2F;&#x2F;file3 &#x2F;user&#x2F;hadoop&#x2F;file4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="chgrp"><a href="#chgrp" class="headerlink" title="chgrp"></a>chgrp</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -chgrp [-R] GROUP URI [URI â€¦]&#96;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¯´æ˜</strong>ï¼šæ”¹å˜æ–‡ä»¶æ‰€å±çš„ç»„ã€‚ä½¿ç”¨ <code>-R</code> å°†ä½¿æ”¹å˜åœ¨ç›®å½•ç»“æ„ä¸‹é€’å½’è¿›è¡Œã€‚å‘½ä»¤çš„ä½¿ç”¨è€…å¿…é¡»æ˜¯æ–‡ä»¶çš„æ‰€æœ‰è€…æˆ–è€…è¶…çº§ç”¨æˆ·ã€‚</li></ul><h1 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -chmod [-R] &lt;MODE[,MODE]... | OCTALMODE&gt; URI [URI â€¦]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¯´æ˜</strong>ï¼šæ”¹å˜æ–‡ä»¶çš„æƒé™ã€‚ä½¿ç”¨ <code>-R</code> å°†ä½¿æ”¹å˜åœ¨ç›®å½•ç»“æ„ä¸‹é€’å½’è¿›è¡Œã€‚å‘½ä»¤çš„ä½¿ç”¨è€…å¿…é¡»æ˜¯æ–‡ä»¶çš„æ‰€æœ‰è€…æˆ–è€…è¶…çº§ç”¨æˆ·ã€‚</li></ul><h1 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -chown [-R] [OWNER][:[GROUP]] URI [URI ]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¯´æ˜</strong>ï¼šæ”¹å˜æ–‡ä»¶çš„æ‹¥æœ‰è€…ã€‚ä½¿ç”¨ <code>-R</code> å°†ä½¿æ”¹å˜åœ¨ç›®å½•ç»“æ„ä¸‹é€’å½’è¿›è¡Œã€‚å‘½ä»¤çš„ä½¿ç”¨è€…å¿…é¡»æ˜¯è¶…çº§ç”¨æˆ·ã€‚</li></ul><h1 id="copyFromLocal"><a href="#copyFromLocal" class="headerlink" title="copyFromLocal"></a>copyFromLocal</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -copyFromLocal &lt;localsrc&gt; URI<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¯´æ˜</strong>ï¼šé™¤äº†é™å®šæºè·¯å¾„æ˜¯ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤–ï¼Œå’Œ <a href="#put">put</a> å‘½ä»¤ç›¸ä¼¼ã€‚</li></ul><h1 id="copyToLocal"><a href="#copyToLocal" class="headerlink" title="copyToLocal"></a>copyToLocal</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -copyToLocal [-ignorecrc] [-crc] URI &lt;localdst&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¯´æ˜</strong>ï¼šé™¤äº†é™å®šç›®æ ‡è·¯å¾„æ˜¯ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤–ï¼Œå’Œ <a href="#get">get</a> å‘½ä»¤ç±»ä¼¼ã€‚</li></ul><h1 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -cp URI [URI â€¦] &lt;dest&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼šå°†æ–‡ä»¶ä»æºè·¯å¾„å¤åˆ¶åˆ°ç›®æ ‡è·¯å¾„ã€‚è¿™ä¸ªå‘½ä»¤å…è®¸æœ‰å¤šä¸ªæºè·¯å¾„ï¼Œæ­¤æ—¶ç›®æ ‡è·¯å¾„å¿…é¡»æ˜¯ä¸€ä¸ªç›®å½•ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -cp &#x2F;user&#x2F;hadoop&#x2F;file1 &#x2F;user&#x2F;hadoop&#x2F;file2hadoop fs -cp &#x2F;user&#x2F;hadoop&#x2F;file1 &#x2F;user&#x2F;hadoop&#x2F;file2 &#x2F;user&#x2F;hadoop&#x2F;dir<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="du"><a href="#du" class="headerlink" title="du"></a>du</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -du URI [URI â€¦]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼šæ˜¾ç¤ºç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶çš„å¤§å°ï¼Œæˆ–è€…å½“åªæŒ‡å®šä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œæ˜¾ç¤ºæ­¤æ–‡ä»¶çš„å¤§å°ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -du &#x2F;user&#x2F;hadoop&#x2F;dir1 &#x2F;user&#x2F;hadoop&#x2F;file1 hdfs:&#x2F;&#x2F;host:port&#x2F;user&#x2F;hadoop&#x2F;dir1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="dus"><a href="#dus" class="headerlink" title="dus"></a>dus</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -dus &lt;args&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¯´æ˜</strong>ï¼šæ˜¾ç¤ºæ–‡ä»¶çš„å¤§å°ã€‚</li></ul><h1 id="expunge"><a href="#expunge" class="headerlink" title="expunge"></a>expunge</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -expunge<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¯´æ˜</strong>ï¼šæ¸…ç©ºå›æ”¶ç«™ã€‚è¯·å‚è€ƒ <a href="http://hadoop.apache.org/docs/r1.0.4/cn/hdfs_design.html">HDFS è®¾è®¡æ–‡æ¡£</a> ä»¥è·å–æ›´å¤šå…³äºå›æ”¶ç«™ç‰¹æ€§çš„ä¿¡æ¯ã€‚</li></ul><h1 id="get"><a href="#get" class="headerlink" title="get"></a>get</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -get [-ignorecrc] [-crc] &lt;src&gt; &lt;localdst&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼šå¤åˆ¶æ–‡ä»¶åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚å¯ç”¨ <code>-ignorecrc</code> é€‰é¡¹å¤åˆ¶ CRC æ ¡éªŒå¤±è´¥çš„æ–‡ä»¶ã€‚ä½¿ç”¨ <code>-crc</code> é€‰é¡¹å¤åˆ¶æ–‡ä»¶ä»¥åŠ CRC ä¿¡æ¯ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -get &#x2F;user&#x2F;hadoop&#x2F;file localfilehadoop fs -get hdfs:&#x2F;&#x2F;host:port&#x2F;user&#x2F;hadoop&#x2F;file localfile<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="getmerge"><a href="#getmerge" class="headerlink" title="getmerge"></a>getmerge</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -getmerge &lt;src&gt; &lt;localdst&gt; [addnl]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¯´æ˜</strong>ï¼šæ¥å—ä¸€ä¸ªæºç›®å½•å’Œä¸€ä¸ªç›®æ ‡æ–‡ä»¶ä½œä¸ºè¾“å…¥ï¼Œå¹¶ä¸”å°†æºç›®å½•ä¸­æ‰€æœ‰çš„æ–‡ä»¶è¿æ¥æˆæœ¬åœ°ç›®æ ‡æ–‡ä»¶ã€‚<code>addnl</code> æ˜¯å¯é€‰çš„ï¼Œç”¨äºæŒ‡å®šåœ¨æ¯ä¸ªæ–‡ä»¶ç»“å°¾æ·»åŠ ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚</li></ul><h1 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -ls &lt;args&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼š</p><ul><li><p>å¦‚æœæ˜¯æ–‡ä»¶ï¼Œåˆ™æŒ‰ç…§å¦‚ä¸‹æ ¼å¼è¿”å›æ–‡ä»¶ä¿¡æ¯ï¼š</p><p>  æ–‡ä»¶å | &lt;å‰¯æœ¬æ•°&gt; | æ–‡ä»¶å¤§å° | ä¿®æ”¹æ—¥æœŸ | ä¿®æ”¹æ—¶é—´ | æƒé™ | ç”¨æˆ·ID | ç»„ID</p></li><li><p>å¦‚æœæ˜¯ç›®å½•ï¼Œåˆ™è¿”å›å®ƒç›´æ¥å­æ–‡ä»¶çš„ä¸€ä¸ªåˆ—è¡¨ï¼Œå°±åƒåœ¨ Unix ä¸­ä¸€æ ·ã€‚ç›®å½•è¿”å›åˆ—è¡¨çš„ä¿¡æ¯ï¼š</p><p>  ç›®å½•å | <code>&lt;dir&gt;</code> | ä¿®æ”¹æ—¥æœŸ | ä¿®æ”¹æ—¶é—´ | æƒé™ | ç”¨æˆ·ID | ç»„ID</p></li></ul></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -ls &#x2F;user&#x2F;hadoop&#x2F;file1 &#x2F;user&#x2F;hadoop&#x2F;file2 hdfs:&#x2F;&#x2F;host:port&#x2F;user&#x2F;hadoop&#x2F;dir1 &#x2F;nonexistentfile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="lsr"><a href="#lsr" class="headerlink" title="lsr"></a>lsr</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -lsr &lt;args&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¯´æ˜</strong>ï¼š<a href="#ls">ls</a> å‘½ä»¤çš„é€’å½’ç‰ˆæœ¬ã€‚ç±»ä¼¼äº Unix ä¸­çš„ <code>ls -R</code>ã€‚</li></ul><h1 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -mkdir &lt;paths&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼šæ¥å—è·¯å¾„æŒ‡å®šçš„ <code>URI</code> ä½œä¸ºå‚æ•°ï¼Œåˆ›å»ºè¿™äº›ç›®å½•ã€‚å…¶è¡Œä¸ºç±»ä¼¼äº Unix çš„ <code>mkdir -p</code>ï¼Œå®ƒä¼šåˆ›å»ºè·¯å¾„ä¸­çš„å„çº§çˆ¶ç›®å½•ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -mkdir &#x2F;user&#x2F;hadoop&#x2F;dir1 &#x2F;user&#x2F;hadoop&#x2F;dir2hadoop fs -mkdir hdfs:&#x2F;&#x2F;host1:port1&#x2F;user&#x2F;hadoop&#x2F;dir hdfs:&#x2F;&#x2F;host2:port2&#x2F;user&#x2F;hadoop&#x2F;dir<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="movefromLocal"><a href="#movefromLocal" class="headerlink" title="movefromLocal"></a>movefromLocal</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">dfs -moveFromLocal &lt;src&gt; &lt;dst&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¯´æ˜</strong>ï¼šè¾“å‡ºä¸€ä¸ª <code>not implemented</code> ä¿¡æ¯ã€‚</li></ul><h1 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -mv URI [URI â€¦] &lt;dest&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼šå°†æ–‡ä»¶ä»æºè·¯å¾„ç§»åŠ¨åˆ°ç›®æ ‡è·¯å¾„ã€‚è¿™ä¸ªå‘½ä»¤å…è®¸æœ‰å¤šä¸ªæºè·¯å¾„ï¼Œæ­¤æ—¶ç›®æ ‡è·¯å¾„å¿…é¡»æ˜¯ä¸€ä¸ªç›®å½•ã€‚ä¸å…è®¸åœ¨ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿé—´ç§»åŠ¨æ–‡ä»¶ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -mv &#x2F;user&#x2F;hadoop&#x2F;file1 &#x2F;user&#x2F;hadoop&#x2F;file2hadoop fs -mv hdfs:&#x2F;&#x2F;host:port&#x2F;file1 hdfs:&#x2F;&#x2F;host:port&#x2F;file2 hdfs:&#x2F;&#x2F;host:port&#x2F;file3 hdfs:&#x2F;&#x2F;host:port&#x2F;dir1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="put"><a href="#put" class="headerlink" title="put"></a>put</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -put &lt;localsrc&gt; ... &lt;dst&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼šä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­å¤åˆ¶å•ä¸ªæˆ–å¤šä¸ªæºè·¯å¾„åˆ°ç›®æ ‡æ–‡ä»¶ç³»ç»Ÿã€‚ä¹Ÿæ”¯æŒä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–è¾“å…¥å†™å…¥ç›®æ ‡æ–‡ä»¶ç³»ç»Ÿã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -put localfile &#x2F;user&#x2F;hadoop&#x2F;hadoopfilehadoop fs -put localfile1 localfile2 &#x2F;user&#x2F;hadoop&#x2F;hadoopdirhadoop fs -put localfile hdfs:&#x2F;&#x2F;host:port&#x2F;hadoop&#x2F;hadoopfilehadoop fs -put - hdfs:&#x2F;&#x2F;host:port&#x2F;hadoop&#x2F;hadoopfile<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -rm URI [URI â€¦]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼šåˆ é™¤æŒ‡å®šçš„æ–‡ä»¶ã€‚åªåˆ é™¤éç©ºç›®å½•å’Œæ–‡ä»¶ã€‚è¯·å‚è€ƒ <a href="#rmr">rmr</a> å‘½ä»¤äº†è§£é€’å½’åˆ é™¤ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -rm hdfs:&#x2F;&#x2F;host:port&#x2F;file &#x2F;user&#x2F;hadoop&#x2F;emptydir<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="rmr"><a href="#rmr" class="headerlink" title="rmr"></a>rmr</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -rmr URI [URI â€¦]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼š<a href="#rm">rm</a> å‘½ä»¤çš„é€’å½’ç‰ˆæœ¬ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -rmr &#x2F;user&#x2F;hadoop&#x2F;dirhadoop fs -rmr hdfs:&#x2F;&#x2F;host:port&#x2F;user&#x2F;hadoop&#x2F;dir<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="setrep"><a href="#setrep" class="headerlink" title="setrep"></a>setrep</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -setrep [-R] &lt;path&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼šæ”¹å˜ä¸€ä¸ªæ–‡ä»¶çš„å‰¯æœ¬ç³»æ•°ã€‚<code>-R</code> é€‰é¡¹ç”¨äºé€’å½’æ”¹å˜ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„å‰¯æœ¬ç³»æ•°ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -setrep -w 3 -R &#x2F;user&#x2F;hadoop&#x2F;dir1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="stat"><a href="#stat" class="headerlink" title="stat"></a>stat</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -stat URI [URI â€¦]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼šè¿”å›æŒ‡å®šè·¯å¾„çš„ç»Ÿè®¡ä¿¡æ¯ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -stat path<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -tail [-f] URI<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼šå°†æ–‡ä»¶å°¾éƒ¨ 1K å­—èŠ‚çš„å†…å®¹è¾“å‡ºåˆ° <code>stdout</code>ã€‚æ”¯æŒ <code>-f</code> é€‰é¡¹ï¼Œè¡Œä¸ºå’Œ Unix ä¸­ä¸€è‡´ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -tail pathname<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul><h1 id="test"><a href="#test" class="headerlink" title="test"></a>test</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -test -[ezd] URI<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼š</p><ul><li><code>e</code> æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœå­˜åœ¨åˆ™è¿”å› <code>0</code>ã€‚</li><li><code>z</code> æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æ˜¯ 0 å­—èŠ‚ã€‚å¦‚æœæ˜¯åˆ™è¿”å› <code>0</code>ã€‚</li><li><code>d</code> å¦‚æœè·¯å¾„æ˜¯ä¸ªç›®å½•ï¼Œåˆ™è¿”å› <code>1</code>ï¼Œå¦åˆ™è¿”å› <code>0</code>ã€‚</li></ul></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -test -e filename<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li></ul><h1 id="text"><a href="#text" class="headerlink" title="text"></a>text</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -text &lt;src&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¯´æ˜</strong>ï¼šå°†æºæ–‡ä»¶è¾“å‡ºä¸ºæ–‡æœ¬æ ¼å¼ã€‚å…è®¸çš„æ ¼å¼æ˜¯ <code>zip</code> å’Œ <code>TextRecordInputStream</code>ã€‚</li></ul><h1 id="touchz"><a href="#touchz" class="headerlink" title="touchz"></a>touchz</h1><ul><li><p><strong>ä½¿ç”¨æ–¹æ³•</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop fs -touchz URI [URI â€¦]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p><strong>è¯´æ˜</strong>ï¼šåˆ›å»ºä¸€ä¸ª 0 å­—èŠ‚çš„ç©ºæ–‡ä»¶ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">hadoop -touchz pathname<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å› <code>0</code>ï¼Œå¤±è´¥è¿”å› <code>-1</code>ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ˜Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git ä½¿ç”¨æ•™ç¨‹</title>
      <link href="post/c3cf24c7.html"/>
      <url>post/c3cf24c7.html</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯-Git"><a href="#ä»€ä¹ˆæ˜¯-Git" class="headerlink" title="ä»€ä¹ˆæ˜¯ Git"></a>ä»€ä¹ˆæ˜¯ Git</h1><p>Git æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºæ•æ·é«˜æ•ˆåœ°å¤„ç†ä»»ä½•æˆ–å°æˆ–å¤§çš„é¡¹ç›®ã€‚</p><p>Git æ˜¯ Linus Torvalds ä¸ºäº†å¸®åŠ©ç®¡ç† Linux å†…æ ¸å¼€å‘è€Œå¼€å‘çš„ä¸€ä¸ªå¼€æ”¾æºç çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ã€‚</p><p>Git ä¸å¸¸ç”¨çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…· CVSï¼ŒSubversion ç­‰ä¸åŒï¼Œå®ƒé‡‡ç”¨äº†åˆ†å¸ƒå¼ç‰ˆæœ¬åº“çš„æ–¹å¼ï¼Œä¸å¿…æœåŠ¡å™¨ç«¯è½¯ä»¶æ”¯æŒã€‚</p><h1 id="Git-ä¸-SVN-åŒºåˆ«"><a href="#Git-ä¸-SVN-åŒºåˆ«" class="headerlink" title="Git ä¸ SVN åŒºåˆ«"></a>Git ä¸ SVN åŒºåˆ«</h1><p>Git ä¸ä»…ä»…æ˜¯ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå®ƒä¹Ÿæ˜¯ä¸ªå†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰ï¼Œå·¥ä½œç®¡ç†ç³»ç»Ÿç­‰ã€‚</p><p>å¦‚æœä½ æ˜¯ä¸€ä¸ªå…·æœ‰ä½¿ç”¨ SVN èƒŒæ™¯çš„äººï¼Œä½ éœ€è¦åšä¸€å®šçš„æ€æƒ³è½¬æ¢ï¼Œæ¥é€‚åº” Git æä¾›çš„ä¸€äº›æ¦‚å¿µå’Œç‰¹å¾ã€‚</p><p>Git ä¸ SVN åŒºåˆ«ç‚¹ï¼š</p><ol><li>Git æ˜¯åˆ†å¸ƒå¼çš„ï¼ŒSVN æ˜¯é›†ä¸­å¼çš„ï¼šè¿™æ˜¯ Git å’Œå…¶å®ƒéåˆ†å¸ƒå¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä¾‹å¦‚ SVNï¼ŒCVS ç­‰ï¼Œæœ€æ ¸å¿ƒçš„åŒºåˆ«ã€‚</li><li>Git æŠŠå†…å®¹æŒ‰å…ƒæ•°æ®æ–¹å¼å­˜å‚¨ï¼Œè€Œ SVN æ˜¯æŒ‰æ–‡ä»¶ï¼šæ‰€æœ‰çš„èµ„æºæ§åˆ¶ç³»ç»Ÿéƒ½æ˜¯æŠŠæ–‡ä»¶çš„å…ƒä¿¡æ¯éšè—åœ¨ä¸€ä¸ªç±»ä¼¼ .svnã€.cvs ç­‰çš„æ–‡ä»¶å¤¹é‡Œã€‚</li><li>Git åˆ†æ”¯å’Œ SVN çš„åˆ†æ”¯ä¸åŒï¼šåˆ†æ”¯åœ¨ SVN ä¸­ä¸€ç‚¹éƒ½ä¸ç‰¹åˆ«ï¼Œå…¶å®å®ƒå°±æ˜¯ç‰ˆæœ¬åº“ä¸­çš„å¦å¤–ä¸€ä¸ªç›®å½•ã€‚</li><li>Git æ²¡æœ‰ä¸€ä¸ªå…¨å±€çš„ç‰ˆæœ¬å·ï¼Œè€Œ SVN æœ‰ï¼šç›®å‰ä¸ºæ­¢è¿™æ˜¯è·Ÿ SVN ç›¸æ¯” Git ç¼ºå°‘çš„æœ€å¤§çš„ä¸€ä¸ªç‰¹å¾ã€‚</li><li>Git çš„å†…å®¹å®Œæ•´æ€§è¦ä¼˜äº SVNï¼šGit çš„å†…å®¹å­˜å‚¨ä½¿ç”¨çš„æ˜¯ SHA-1 å“ˆå¸Œç®—æ³•ã€‚è¿™èƒ½ç¡®ä¿ä»£ç å†…å®¹çš„å®Œæ•´æ€§ï¼Œç¡®ä¿åœ¨é‡åˆ°ç£ç›˜æ•…éšœå’Œç½‘ç»œé—®é¢˜æ—¶é™ä½å¯¹ç‰ˆæœ¬åº“çš„ç ´åã€‚</li></ol><h1 id="Git-çš„å®‰è£…å’Œé…ç½®"><a href="#Git-çš„å®‰è£…å’Œé…ç½®" class="headerlink" title="Git çš„å®‰è£…å’Œé…ç½®"></a>Git çš„å®‰è£…å’Œé…ç½®</h1><p><a href="https://git-scm.com/downloads">Git ä¸‹è½½åœ°å€ï¼ˆLinux/Unixï¼ŒMacï¼ŒWindows ç­‰ç›¸å…³å¹³å°ï¼‰</a></p><p><a href="http://git-scm.com/docs">Git å®Œæ•´å‘½ä»¤æ‰‹å†Œåœ°å€</a></p><p><a href="github-git-cheat-sheet.pdf">Git PDF ç‰ˆå‘½ä»¤æ‰‹å†Œ</a></p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">### é…ç½®æ‰€æœ‰ Git ä»“åº“çš„ ç”¨æˆ·å å’Œ email $ git config --global user.name &quot;Your Name&quot;$ git config --global user.email &quot;youremail@example.com&quot;### é…ç½®å½“å‰ Git ä»“åº“çš„ ç”¨æˆ·å å’Œ email$ git config user.name &quot;Your Name&quot;$ git config user.email &quot;youremail@example.com&quot;### æŸ¥çœ‹å…¨å±€é…ç½®çš„ ç”¨æˆ·å å’Œ email $ git config --global user.name      æŸ¥çœ‹ç”¨æˆ·å$ git config --global user.email     æŸ¥çœ‹é‚®ç®±åœ°å€### æŸ¥çœ‹å½“å‰ä»“åº“é…ç½®çš„ ç”¨æˆ·å å’Œ email $ git config user.name      æŸ¥çœ‹ç”¨æˆ·å$ git config user.email     æŸ¥çœ‹é‚®ç®±åœ°å€# Git æ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ‰€ä»¥ï¼Œæ¯ä¸ªæœºå™¨éƒ½é…ç½®ä½ çš„åå­—å’Œ Email åœ°å€# git config å‘½ä»¤çš„ --global å‚æ•°ï¼Œç”¨äº†è¿™ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä½ è¿™å°æœºå™¨ä¸Šæ‰€æœ‰çš„ Git ä»“åº“éƒ½ä¼šä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æŸä¸ªä»“åº“æŒ‡å®šä¸åŒçš„ç”¨æˆ·åå’Œ Email åœ°å€ï¼ˆä¸åŠ  --globalï¼‰ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="Git-å·¥ä½œæµç¨‹"><a href="#Git-å·¥ä½œæµç¨‹" class="headerlink" title="Git å·¥ä½œæµç¨‹"></a>Git å·¥ä½œæµç¨‹</h1><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/git/workflow.png" alt></p><p>ä»¥ä¸ŠåŒ…æ‹¬ä¸€äº›ç®€å•è€Œå¸¸ç”¨çš„å‘½ä»¤ï¼Œä½†æ˜¯å…ˆä¸å…³å¿ƒè¿™äº›ï¼Œå…ˆæ¥äº†è§£ä¸‹é¢è¿™ 4 ä¸ªä¸“æœ‰åè¯ã€‚</p><ul><li>Workspaceï¼š<a href="#å·¥ä½œåŒº">å·¥ä½œåŒº</a></li><li>Index/Stageï¼š<a href="#æš‚å­˜åŒº">æš‚å­˜åŒº</a></li><li>Repositoryï¼š<a href="#æœ¬åœ°ä»“åº“">ä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰</a></li><li>Remoteï¼š<a href="#è¿œç¨‹ä»“åº“">è¿œç¨‹ä»“åº“</a></li></ul><h2 id="å·¥ä½œåŒº"><a href="#å·¥ä½œåŒº" class="headerlink" title="å·¥ä½œåŒº"></a>å·¥ä½œåŒº</h2><p>ç¨‹åºå‘˜è¿›è¡Œå¼€å‘æ”¹åŠ¨çš„åœ°æ–¹ï¼Œæ˜¯ä½ å½“å‰çœ‹åˆ°çš„ï¼Œä¹Ÿæ˜¯æœ€æ–°çš„ã€‚</p><p>å¹³å¸¸æˆ‘ä»¬å¼€å‘å°±æ˜¯æ‹·è´è¿œç¨‹ä»“åº“ä¸­çš„ä¸€ä¸ªåˆ†æ”¯ï¼ŒåŸºäºè¯¥åˆ†æ”¯è¿›è¡Œå¼€å‘ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­å°±æ˜¯å¯¹å·¥ä½œåŒºçš„æ“ä½œã€‚</p><h2 id="æš‚å­˜åŒº"><a href="#æš‚å­˜åŒº" class="headerlink" title="æš‚å­˜åŒº"></a>æš‚å­˜åŒº</h2><p>.git ç›®å½•ä¸‹çš„ index æ–‡ä»¶ï¼Œæš‚å­˜åŒºä¼šè®°å½• <code>git add</code> æ·»åŠ æ–‡ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼ˆæ–‡ä»¶åã€å¤§å°ã€timestamp...ï¼‰ï¼Œä¸ä¿å­˜æ–‡ä»¶å®ä½“ï¼Œé€šè¿‡ id æŒ‡å‘æ¯ä¸ªæ–‡ä»¶å®ä½“ã€‚å¯ä»¥ä½¿ç”¨ <code>git status</code> æŸ¥çœ‹æš‚å­˜åŒºçš„çŠ¶æ€ã€‚æš‚å­˜åŒºæ ‡è®°äº†ä½ å½“å‰å·¥ä½œåŒºä¸­ï¼Œå“ªäº›å†…å®¹æ˜¯è¢« git ç®¡ç†çš„ã€‚</p><p>å½“ä½ å®ŒæˆæŸä¸ªéœ€æ±‚æˆ–åŠŸèƒ½åéœ€è¦æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œé‚£ä¹ˆç¬¬ä¸€æ­¥å°±æ˜¯é€šè¿‡ <code>git add</code> å…ˆæäº¤åˆ°æš‚å­˜åŒºï¼Œè¢« git ç®¡ç†ã€‚</p><h2 id="æœ¬åœ°ä»“åº“"><a href="#æœ¬åœ°ä»“åº“" class="headerlink" title="æœ¬åœ°ä»“åº“"></a>æœ¬åœ°ä»“åº“</h2><p>ä¿å­˜äº†å¯¹è±¡è¢«æäº¤è¿‡çš„å„ä¸ªç‰ˆæœ¬ï¼Œæ¯”èµ·å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å†…å®¹ï¼Œå®ƒè¦æ›´æ—§ä¸€äº›ã€‚</p><p><code>git commit</code> ååŒæ­¥ index çš„ç›®å½•æ ‘åˆ°æœ¬åœ°ä»“åº“ï¼Œæ–¹ä¾¿ä»ä¸‹ä¸€æ­¥é€šè¿‡ <code>git push</code> åŒæ­¥æœ¬åœ°ä»“åº“ä¸è¿œç¨‹ä»“åº“çš„åŒæ­¥ã€‚</p><h2 id="è¿œç¨‹ä»“åº“"><a href="#è¿œç¨‹ä»“åº“" class="headerlink" title="è¿œç¨‹ä»“åº“"></a>è¿œç¨‹ä»“åº“</h2><p>è¿œç¨‹ä»“åº“çš„å†…å®¹å¯èƒ½è¢«åˆ†å¸ƒåœ¨å¤šä¸ªåœ°ç‚¹çš„å¤„äºåä½œå…³ç³»çš„æœ¬åœ°ä»“åº“ä¿®æ”¹ï¼Œå› æ­¤å®ƒå¯èƒ½ä¸æœ¬åœ°ä»“åº“åŒæ­¥ï¼Œä¹Ÿå¯èƒ½ä¸åŒæ­¥ï¼Œä½†æ˜¯å®ƒçš„å†…å®¹æ˜¯æœ€æ—§çš„ã€‚</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li>ä»»ä½•å¯¹è±¡éƒ½æ˜¯åœ¨å·¥ä½œåŒºä¸­è¯ç”Ÿå’Œè¢«ä¿®æ”¹ï¼›</li><li>ä»»ä½•ä¿®æ”¹éƒ½æ˜¯ä»è¿›å…¥ <code>index</code> åŒºæ‰å¼€å§‹è¢«ç‰ˆæœ¬æ§åˆ¶ï¼›</li><li>åªæœ‰æŠŠä¿®æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œè¯¥ä¿®æ”¹æ‰èƒ½åœ¨ä»“åº“ä¸­ç•™ä¸‹ç—•è¿¹ï¼›</li><li>ä¸åä½œè€…åˆ†äº«æœ¬åœ°çš„ä¿®æ”¹ï¼Œå¯ä»¥æŠŠå®ƒä»¬ <code>push</code> åˆ°è¿œç¨‹ä»“åº“æ¥å…±äº«ã€‚</li></ul><p>ä¸‹é¢è¿™å¹…å›¾æ›´åŠ ç›´æ¥é˜è¿°äº†å››ä¸ªåŒºåŸŸä¹‹é—´çš„å…³ç³»ï¼Œå¯èƒ½æœ‰äº›å‘½ä»¤ä¸å¤ªæ¸…æ¥šï¼Œä¸‹é¢å°†ä¼šè¯¦ç»†ä»‹ç»ã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/git/workflow2.png" alt></p><h1 id="Git-å¸¸ç”¨å‘½ä»¤"><a href="#Git-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Git å¸¸ç”¨å‘½ä»¤"></a>Git å¸¸ç”¨å‘½ä»¤</h1><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/git/command.png" alt></p><h2 id="ç‰ˆæœ¬ä¸é…ç½®"><a href="#ç‰ˆæœ¬ä¸é…ç½®" class="headerlink" title="ç‰ˆæœ¬ä¸é…ç½®"></a>ç‰ˆæœ¬ä¸é…ç½®</h2><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git                         æŸ¥çœ‹ git çš„ç›¸å…³å‘½ä»¤ï¼ˆgit --helpï¼‰$ git --version               æŸ¥çœ‹ git çš„ç‰ˆæœ¬$ git config                  æŸ¥çœ‹ git config çš„ç›¸å…³å‘½ä»¤<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆå§‹åŒ–æœ¬åœ°ä»“åº“"><a href="#åˆå§‹åŒ–æœ¬åœ°ä»“åº“" class="headerlink" title="åˆå§‹åŒ–æœ¬åœ°ä»“åº“"></a>åˆå§‹åŒ–æœ¬åœ°ä»“åº“</h2><p>Git ä½¿ç”¨ <code>git init</code> å‘½ä»¤æ¥åˆå§‹åŒ–ä¸€ä¸ª Git ä»“åº“ï¼ŒGit çš„å¾ˆå¤šå‘½ä»¤éƒ½éœ€è¦åœ¨ Git çš„ä»“åº“ä¸­è¿è¡Œï¼Œæ‰€ä»¥ <code>git init</code> æ˜¯ä½¿ç”¨ Git çš„ç¬¬ä¸€ä¸ªå‘½ä»¤ã€‚</p><p>åœ¨æ‰§è¡Œå®Œæˆ <code>git init</code> å‘½ä»¤åï¼ŒGit ä»“åº“ä¼šç”Ÿæˆä¸€ä¸ª .git ç›®å½•ï¼Œè¯¥ç›®å½•åŒ…å«äº†èµ„æºçš„æ‰€æœ‰å…ƒæ•°æ®ï¼Œå…¶ä»–çš„é¡¹ç›®ç›®å½•ä¿æŒä¸å˜ã€‚</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git init                    åˆ›å»ºæœ¬åœ°ä»“åº“$ git clone                   å…‹éš†è¿œç¨‹ä»“åº“<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h2 id="æ·»åŠ æ–‡ä»¶åˆ°ä»“åº“"><a href="#æ·»åŠ æ–‡ä»¶åˆ°ä»“åº“" class="headerlink" title="æ·»åŠ æ–‡ä»¶åˆ°ä»“åº“"></a>æ·»åŠ æ–‡ä»¶åˆ°ä»“åº“</h2><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git add &lt;file&gt;                 å¦‚: git add readme.txt$ git commit -m &quot;description&quot;    å¦‚: git commit -m &quot;add readme.txt&quot;# æ·»åŠ æ–‡ä»¶åˆ°ä»“åº“åˆ†ä¸¤æ­¥:# 1. add æ·»åŠ è¯¥æ–‡ä»¶åˆ°ä»“åº“# æ·»åŠ è®¸å¤šåŒç§ç±»å‹çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ *ï¼ˆè®°å¾—åŠ å¼•å·ï¼‰ï¼Œå¦‚: git add &quot;*.txt&quot; å‘½ä»¤å°±æ˜¯æ·»åŠ æ‰€æœ‰ .txt æ–‡ä»¶# 2. commit æäº¤è¯¥æ–‡ä»¶åˆ°ä»“åº“ï¼Œdescription ä¸ºä½ å¯¹è¯¥æ¬¡æäº¤çš„æè¿°è¯´æ˜# æ³¨æ„: å¯ä»¥å¤šæ¬¡ add ä¸åŒçš„æ–‡ä»¶ï¼Œcommit å¯ä»¥ä¸€æ¬¡æäº¤å¤šä¸ªæ–‡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="æŸ¥çœ‹ä»“åº“ç›®å‰çŠ¶æ€"><a href="#æŸ¥çœ‹ä»“åº“ç›®å‰çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹ä»“åº“ç›®å‰çŠ¶æ€"></a>æŸ¥çœ‹ä»“åº“ç›®å‰çŠ¶æ€</h2><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git status                 æŸ¥çœ‹é¡¹ç›®æ˜¯å¦æœ‰ä¿®æ”¹ã€æ·»åŠ ã€æœªè¿½è¸ªçš„æ–‡ä»¶ç­‰<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="æŸ¥çœ‹ä¿®æ”¹"><a href="#æŸ¥çœ‹ä¿®æ”¹" class="headerlink" title="æŸ¥çœ‹ä¿®æ”¹"></a>æŸ¥çœ‹ä¿®æ”¹</h2><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git diff                   æŸ¥çœ‹å·¥ä½œåŒºï¼ˆwork dictï¼‰å’Œæš‚å­˜åŒºï¼ˆstageï¼‰çš„åŒºåˆ«$ git diff &lt;file&gt;$ git diff --cached          æŸ¥çœ‹æš‚å­˜åŒºï¼ˆstageï¼‰å’Œåˆ†æ”¯ï¼ˆmasterï¼‰çš„åŒºåˆ«$ git diff HEAD -- &lt;file&gt;    æŸ¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“é‡Œé¢æœ€æ–°ç‰ˆæœ¬çš„åŒºåˆ«#å¦‚: git diff readme.txt     æŸ¥çœ‹ readme.txt ä¿®æ”¹äº†ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆä¸åŒ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="æŸ¥çœ‹æäº¤æ—¥å¿—"><a href="#æŸ¥çœ‹æäº¤æ—¥å¿—" class="headerlink" title="æŸ¥çœ‹æäº¤æ—¥å¿—"></a>æŸ¥çœ‹æäº¤æ—¥å¿—</h2><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git log$ git log --oneline           ç¾åŒ–è¾“å‡ºä¿¡æ¯ï¼Œæ¯ä¸ªè®°å½•æ˜¾ç¤ºä¸ºä¸€è¡Œï¼Œæ˜¾ç¤º commit_id å‰å‡ ä½æ•°$ git log --pretty&#x3D;oneline    ç¾åŒ–è¾“å‡ºä¿¡æ¯ï¼Œæ¯ä¸ªè®°å½•æ˜¾ç¤ºä¸ºä¸€è¡Œï¼Œæ˜¾ç¤ºå®Œæ•´çš„ commit_id$ git log --graph --pretty&#x3D;format:&#39;%h -%d %s (%cr)&#39; --abbrev-commit --$ git log --graph --pretty&#x3D;oneline --abbrev-commit# æ˜¾ç¤ºä»æœ€è¿‘åˆ°æœ€è¿œçš„æäº¤æ—¥å¿—# æ—¥å¿—è¾“å‡ºä¸€å¤§ä¸²ç±»ä¼¼ 3628164...882e1e0 çš„æ˜¯ commit_idï¼ˆç‰ˆæœ¬å·ï¼‰ï¼Œå’Œ SVN ä¸ä¸€æ ·ï¼ŒGit çš„ commit_id ä¸æ˜¯ 1ï¼Œ2ï¼Œ3... é€’å¢çš„æ•°å­—ï¼Œè€Œæ˜¯ä¸€ä¸ª SHA1 è®¡ç®—å‡ºæ¥çš„ä¸€ä¸ªéå¸¸å¤§çš„æ•°å­—ï¼Œç”¨åå…­è¿›åˆ¶è¡¨ç¤ºï¼Œå› ä¸º Git æ˜¯åˆ†å¸ƒå¼çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå½“å¤šäººåœ¨åŒä¸€ä¸ªç‰ˆæœ¬åº“é‡Œå·¥ä½œï¼Œå¦‚æœå¤§å®¶éƒ½ç”¨ 1ï¼Œ2ï¼Œ3... ä½œä¸ºç‰ˆæœ¬å·ï¼Œé‚£è‚¯å®šå°±å†²çªäº†# æœ€åä¸€ä¸ªä¼šæ‰“å°å‡ºæäº¤çš„æ—¶é—´ç­‰ï¼Œï¼ˆHEAD -&gt; masterï¼‰æŒ‡å‘çš„æ˜¯å½“å‰çš„ç‰ˆæœ¬# é€€å‡ºæŸ¥çœ‹ log æ—¥å¿—ï¼Œè¾“å…¥å­—æ¯ qï¼ˆè‹±æ–‡çŠ¶æ€ï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="ç‰ˆæœ¬å›é€€"><a href="#ç‰ˆæœ¬å›é€€" class="headerlink" title="ç‰ˆæœ¬å›é€€"></a>ç‰ˆæœ¬å›é€€</h2><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git reset --hard HEAD^$ git reset --hard &lt;commit_id&gt;# HEAD        è¡¨ç¤ºå½“å‰ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯æœ€æ–°çš„æäº¤# HEAD^       ä¸Šä¸€ä¸ªç‰ˆæœ¬# HEAD^^      ä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬# HEAD~100    å¾€ä¸Š100ä¸ªç‰ˆæœ¬# å›é€€åˆ° commit_id å¯¹åº”çš„é‚£ä¸ªç‰ˆæœ¬ï¼Œcommit_id ä¸ºç‰ˆæœ¬å·ï¼Œåªéœ€è¦å‰å‡ ä½å°±è¡Œ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="æŸ¥çœ‹å‘½ä»¤å†å²"><a href="#æŸ¥çœ‹å‘½ä»¤å†å²" class="headerlink" title="æŸ¥çœ‹å‘½ä»¤å†å²"></a>æŸ¥çœ‹å‘½ä»¤å†å²</h2><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git reflog# å‡å¦‚æˆ‘ä»¬ä¾æ¬¡æäº¤äº†ä¸‰ä¸ªç‰ˆæœ¬ a-&gt;b-&gt;cï¼Œç„¶åæ˜¨å¤©æˆ‘ä»¬ä»ç‰ˆæœ¬ c å›é€€åˆ°äº†ç‰ˆæœ¬ bï¼Œä»Šå¤©æˆ‘ä»¬åˆæƒ³è¦å›åˆ°ç‰ˆæœ¬ cï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨ reflog å‘½ä»¤æ¥æŸ¥æ‰¾ c ç‰ˆæœ¬çš„ commit_idï¼Œç„¶åä½¿ç”¨ reset å‘½ä»¤æ¥è¿›è¡Œç‰ˆæœ¬å›é€€<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h2 id="æ’¤é”€ä¿®æ”¹"><a href="#æ’¤é”€ä¿®æ”¹" class="headerlink" title="æ’¤é”€ä¿®æ”¹"></a>æ’¤é”€ä¿®æ”¹</h2><p><strong>ä¸¢å¼ƒå·¥ä½œåŒºï¼ˆWorking Directoryï¼‰çš„ä¿®æ”¹</strong></p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git restore &lt;file&gt;        ï¼ˆå»ºè®®ä½¿ç”¨ï¼Œå¦‚: git restore readme.txtï¼‰$ git checkout -- &lt;file&gt;# å‘½ä»¤ä¸­ -- å¾ˆé‡è¦ï¼Œæ²¡æœ‰å°±å˜æˆ â€œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯â€ çš„å‘½ä»¤<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><strong>ä¸¢å¼ƒæš‚å­˜åŒºï¼ˆstage/indexï¼‰çš„ä¿®æ”¹</strong></p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># ç¬¬ä¸€æ­¥: æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€æ‰ï¼ˆunstageï¼‰ï¼Œé‡æ–°æ”¾å›å·¥ä½œåŒº$ git restore --staged &lt;file&gt;# ç¬¬äºŒæ­¥: æ’¤é”€å·¥ä½œåŒºçš„ä¿®æ”¹$ git restore &lt;file&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>å°ç»“</strong></p><ul><li><p>å½“ä½ æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæƒ³ç›´æ¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹æ—¶ï¼Œç”¨å‘½ä»¤ <code>git restore &lt;file&gt;</code>ã€‚</p></li><li><p>å½“ä½ ä¸ä½†æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œè¿˜æ·»åŠ åˆ°äº†æš‚å­˜åŒºæ—¶ï¼Œæƒ³ä¸¢å¼ƒä¿®æ”¹ï¼Œåˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥ç”¨å‘½ä»¤ <code>git restore --staged &lt;file&gt;</code>ï¼Œå°±å›åˆ°äº†åœºæ™¯ 1ï¼Œç¬¬äºŒæ­¥æŒ‰åœºæ™¯ 1 æ“ä½œã€‚</p></li><li><p>å·²ç»æäº¤äº†ä¸åˆé€‚çš„ä¿®æ”¹åˆ°ç‰ˆæœ¬åº“æ—¶ï¼Œæƒ³è¦æ’¤é”€æœ¬æ¬¡æäº¤ï¼Œå‚è€ƒ<a href="#ç‰ˆæœ¬å›é€€">ç‰ˆæœ¬å›é€€</a>ä¸€èŠ‚ï¼Œä¸è¿‡å‰ææ˜¯æ²¡æœ‰æ¨é€åˆ°è¿œç¨‹åº“ã€‚</p></li></ul><h2 id="åˆ é™¤æ–‡ä»¶"><a href="#åˆ é™¤æ–‡ä»¶" class="headerlink" title="åˆ é™¤æ–‡ä»¶"></a>åˆ é™¤æ–‡ä»¶</h2><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git rm &lt;file&gt;# git rm &lt;file&gt; ç›¸å½“äºæ‰§è¡Œ- rm &lt;file&gt;- git add &lt;file&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="è¿œç¨‹ä»“åº“-1"><a href="#è¿œç¨‹ä»“åº“-1" class="headerlink" title="è¿œç¨‹ä»“åº“"></a>è¿œç¨‹ä»“åº“</h1><ol><li><p>åˆ›å»º SSH Key</p><p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ ssh-keygen -t rsa -C &quot;youremail@example.com&quot;# é‚®ä»¶åœ°å€æ¢æˆä½ è‡ªå·±çš„é‚®ä»¶åœ°å€ï¼Œç„¶åä¸€ç›´å›è½¦ï¼Œä½¿ç”¨é»˜è®¤å€¼å³å¯ï¼Œæ— éœ€è®¾ç½®å¯†ç ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p> åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ .ssh ç›®å½•ï¼Œå¦‚æœæœ‰ï¼Œå†çœ‹çœ‹è¿™ä¸ªç›®å½•ä¸‹æœ‰æ²¡æœ‰ id_rsa å’Œ id_rsa.pub è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå·²ç»æœ‰äº†ï¼Œå¯ç›´æ¥è·³åˆ°ä¸‹ä¸€æ­¥ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»º SSH Key</p><p> å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•é‡Œæ‰¾åˆ° .ssh ç›®å½•ï¼Œé‡Œé¢æœ‰ id_rsa å’Œ id_rsa.pub ä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªå°±æ˜¯ SSH Key çš„ç§˜é’¥å¯¹ï¼Œid_rsa æ˜¯ç§é’¥ï¼Œä¸èƒ½æ³„éœ²å‡ºå»ï¼Œid_rsa.pub æ˜¯å…¬é’¥ï¼Œå¯ä»¥æ”¾å¿ƒåœ°å‘Šè¯‰ä»»ä½•äººã€‚</p></li><li><p>ç™»å½• GitHubï¼Œåœ¨ Settings ä¸­æ‰¾åˆ° SSH è®¾ç½®é¡¹ä¸­æ·»åŠ æ–°çš„ SSH Keyï¼Œè®¾ç½®ä»»æ„ titleï¼Œåœ¨ Key æ–‡æœ¬æ¡†é‡Œç²˜è´´ id_rsa.pub æ–‡ä»¶çš„å†…å®¹</p></li><li><p>å…³è”è¿œç¨‹ä»“åº“ï¼ˆå…ˆæœ‰æœ¬åœ°ä»“åº“ï¼‰</p><p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git remote add origin git@github.com:username&#x2F;repo.git# åé¢çš„åœ°å€æ¢æˆè‡ªå·±çš„ GitHub ä»“åº“åœ°å€<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li><li><p>æ¨é€åˆ°è¿œç¨‹ä»“åº“</p><p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git remote       æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯$ git remote -v    æŸ¥çœ‹è¿œç¨‹åº“è¯¦ç»†ä¿¡æ¯$ git remote rm origin  åˆ é™¤å·²å…³è”çš„è¿œç¨‹åº“ origin$ git push -u origin master    #ç¬¬ä¸€æ¬¡æ¨é€$ git push origin master      æ¨é€æœ¬åœ° master åˆ†æ”¯åˆ°è¿œç¨‹åº“$ git push origin dev         æ¨é€æœ¬åœ° dev åˆ†æ”¯åˆ°è¿œç¨‹åº“#  é™¤äº†ç¬¬ä¸€æ¬¡æ¨é€ï¼Œä¸éœ€è¦æ·»åŠ  -u å‚æ•°# ä¸€ä¸ªæœ¬åœ°åº“å…³è”å¤šä¸ªè¿œç¨‹åº“ï¼Œä¾‹å¦‚åŒæ—¶å…³è” GitHub å’Œ Gitee:# 1. å…ˆå…³è”GitHubçš„è¿œç¨‹åº“ï¼šï¼ˆæ³¨æ„:è¿œç¨‹åº“çš„åç§°å« githubï¼Œä¸å« originï¼‰$ git remote add github git@github.com:username&#x2F;repo.git# 2. å†å…³è”Giteeçš„è¿œç¨‹åº“ï¼šï¼ˆæ³¨æ„:è¿œç¨‹åº“çš„åç§°å« giteeï¼Œä¸å« originï¼‰$ git remote add gitee git@gitee.com:username&#x2F;repo.git# 3. æ¨é€åˆ°è¿œç¨‹åº“$ git push github master$ git push gitee master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p> åŠ ä¸Šäº† <code>-u</code> å‚æ•°ï¼ŒGit ä¸ä½†ä¼šæŠŠæœ¬åœ°çš„ master åˆ†æ”¯å†…å®¹æ¨é€çš„è¿œç¨‹æ–°çš„ master åˆ†æ”¯ï¼Œè¿˜ä¼šæŠŠæœ¬åœ°çš„ master åˆ†æ”¯å’Œè¿œç¨‹çš„ master åˆ†æ”¯å…³è”èµ·æ¥</p></li><li><p>ä»è¿œç¨‹ä»“åº“å…‹éš†ï¼ˆå…ˆæœ‰è¿œç¨‹åº“ï¼‰</p><p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git clone git@github.com:username&#x2F;repo.git# GitHub æ”¯æŒå¤šç§åè®®ï¼Œä¸Šé¢æ˜¯ ssh åè®®ï¼Œè¿˜æœ‰ https åè®®<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li></ol><h1 id="Git-åˆ†æ”¯"><a href="#Git-åˆ†æ”¯" class="headerlink" title="Git åˆ†æ”¯"></a>Git åˆ†æ”¯</h1><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git branch           æŸ¥çœ‹åˆ†æ”¯åˆ—è¡¨åŠå½“å‰åˆ†æ”¯$ git branch dev       åˆ›å»º dev åˆ†æ”¯$ git switch dev       åˆ‡æ¢åˆ° dev åˆ†æ”¯ï¼ˆgit checkout devï¼‰$ git switch -c dev    åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°çš„ dev åˆ†æ”¯ï¼ˆgit checkout -b devï¼‰$ git switch -c dev origin&#x2F;dev  åˆ›å»ºè¿œç¨‹ origin çš„ dev åˆ†æ”¯åˆ°æœ¬åœ°å¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯$ git branch -d dev    åˆ é™¤ dev åˆ†æ”¯$ git branch -D dev    å¼ºåˆ¶åˆ é™¤ dev åˆ†æ”¯$ git merge dev        åˆå¹¶ dev åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼ˆå½“æœ‰å†²çªçš„æ—¶å€™ï¼Œéœ€è¦å…ˆè§£å†³å†²çªï¼‰$ git merge --no-ff -m &quot;merge with no-ff&quot; dev    åˆå¹¶ dev åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼ˆç¦ç”¨ Fast forward åˆå¹¶ç­–ç•¥ï¼‰$ git pull  æ‹‰å–è¿œç¨‹åˆ†æ”¯æœ€æ–°çš„å†…å®¹$ git branch --set-upstream-to&#x3D;origin&#x2F;dev dev    æŒ‡å®šæœ¬åœ° dev åˆ†æ”¯ä¸è¿œç¨‹ origin&#x2F;dev åˆ†æ”¯çš„é“¾æ¥# ä¸ºæœ¬æ¬¡åˆå¹¶è¦åˆ›å»ºä¸€ä¸ªæ–°çš„commitï¼Œæ‰€ä»¥åŠ ä¸Š -m å‚æ•°ï¼ŒæŠŠ commit æè¿°å†™è¿›å»# åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Š --no-ff å‚æ•°å°±å¯ä»¥ç”¨æ™®é€šæ¨¡å¼åˆå¹¶ï¼Œåˆå¹¶åçš„å†å²æœ‰åˆ†æ”¯ï¼Œèƒ½çœ‹å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ï¼Œè€Œ fast forward åˆå¹¶å°±çœ‹ä¸å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ git log --graph    æŸ¥çœ‹åˆ†æ”¯åˆå¹¶å›¾$ git log --graph --pretty&#x3D;oneline --abbrev-commit$ git stash          ä¿å­˜å½“å‰å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¿®æ”¹çŠ¶æ€ï¼Œåˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯ä¿®å¤ bug ç­‰å·¥ä½œï¼Œç„¶ååœ¨å›æ¥ç»§ç»­å·¥ä½œ$ git stash list     æŸ¥çœ‹ä¿å­˜ç°åœºçš„åˆ—è¡¨$ git stash pop      æ¢å¤çš„åŒæ—¶æŠŠ stash å†…å®¹ä¹Ÿåˆ é™¤$ git stash apply    æ¢å¤ç°åœºï¼Œstashå†…å®¹å¹¶ä¸åˆ é™¤$ git stash drop     åˆ é™¤ stash å†…å®¹$ git stash apply stash@&#123;0&#125;    å¤šæ¬¡ stashï¼Œæ¢å¤çš„æ—¶å€™ï¼Œå…ˆç”¨ git stash list æŸ¥çœ‹ï¼Œç„¶åæ¢å¤æŒ‡å®šçš„ stash# é€šå¸¸åœ¨ dev åˆ†æ”¯å¼€å‘æ—¶ï¼Œéœ€è¦æœ‰ç´§æ€¥ bug éœ€è¦é©¬ä¸Šå¤„ç†ï¼Œä¿å­˜ç°åœ¨ä¿®æ”¹çš„æ–‡ä»¶ç­‰ï¼Œå…ˆä¿®å¤ bug åå†å›æ¥ç»§ç»­å·¥ä½œçš„æƒ…å†µ$ git cherry-pick &lt;commit&gt;    å¤åˆ¶ä¸€ä¸ªç‰¹å®šçš„æäº¤åˆ°å½“å‰åˆ†æ”¯ï¼ˆå½“å‰åˆ†æ”¯çš„å†…å®¹éœ€è¦å…ˆ commitï¼Œç„¶åå†²çªçš„æ–‡ä»¶éœ€è¦è§£å†³å†²çªï¼Œç„¶å commitï¼‰$ git rebase    æŠŠæœ¬åœ°æœª push çš„åˆ†å‰æäº¤å†å²æ•´ç†æˆç›´çº¿ï¼ˆä½¿å¾—æˆ‘ä»¬åœ¨æŸ¥çœ‹å†å²æäº¤çš„å˜åŒ–æ—¶æ›´å®¹æ˜“ï¼Œå› ä¸ºåˆ†å‰çš„æäº¤éœ€è¦ä¸‰æ–¹å¯¹æ¯”ï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="Git-æ ‡ç­¾"><a href="#Git-æ ‡ç­¾" class="headerlink" title="Git æ ‡ç­¾"></a>Git æ ‡ç­¾</h1><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># åˆ‡æ¢åˆ°å¯¹åº”çš„åˆ†æ”¯ branch ä¸Šï¼ŒæŸ¥çœ‹æˆ–è€…æ“ä½œå¯¹åº”çš„æ ‡ç­¾ tag $ git tag                                 æŸ¥çœ‹æ‰€æœ‰çš„æ ‡ç­¾$ git tag &lt;tagname&gt;                       æ‰“æ ‡ç­¾ï¼ˆé»˜è®¤æ ‡ç­¾æ˜¯æ‰“åœ¨æœ€æ–°æäº¤çš„commitä¸Šï¼‰ï¼Œå¦‚: git tag v1.0$ git tag &lt;tagname&gt; &lt;commit_id&gt;           ç»™å¯¹åº”çš„ commit_id æ‰“æ ‡ç­¾$ git tag -a &lt;tagname&gt; -m &quot;æ ‡ç­¾è¯´æ˜ä¿¡æ¯&quot; &lt;commit_id&gt;    åˆ›å»ºå¸¦æœ‰è¯´æ˜çš„æ ‡ç­¾ï¼Œç”¨ -a æŒ‡å®šæ ‡ç­¾åï¼Œ-m æŒ‡å®šè¯´æ˜æ–‡å­—$ git tag -d &lt;tagname&gt;                    åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾$ git push origin :refs&#x2F;tags&#x2F;&lt;tagname&gt;    å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾$ git show &lt;tagname&gt;                      æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯$ git push origin &lt;tagname&gt;               æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾åˆ°è¿œç¨‹$ git push origin --tags                  ä¸€æ¬¡æ€§æ¨é€å…¨éƒ¨å°šæœªæ¨é€åˆ°è¿œç¨‹çš„æœ¬åœ°æ ‡ç­¾# åˆ é™¤è¿œç¨‹æ ‡ç­¾ï¼Œéœ€è¦å…ˆåˆ é™¤æœ¬åœ°æ ‡ç­¾ï¼Œç„¶ååœ¨åˆ é™¤è¿œç¨‹æ ‡ç­¾ï¼Œå¦‚:åˆ é™¤æ ‡ç­¾ v0.9$ git tag -d v0.9$ git push origin :refs&#x2F;tags&#x2F;v0.9<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="Commit-message-æ ¼å¼"><a href="#Commit-message-æ ¼å¼" class="headerlink" title="Commit message æ ¼å¼"></a>Commit message æ ¼å¼</h1><p>Git æ¯æ¬¡æäº¤ä»£ç ï¼Œéƒ½è¦å†™ Commit messageï¼ˆæäº¤è¯´æ˜ï¼‰ï¼Œå¦åˆ™å°±ä¸å…è®¸æäº¤ã€‚ä½†æ˜¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒCommit message åº”è¯¥æ¸…æ™°æ˜äº†ï¼Œè¯´æ˜æœ¬æ¬¡æäº¤çš„ç›®çš„ã€‚</p><p>æ¯æ¬¡æäº¤ï¼ŒCommit message éƒ½åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼šheaderï¼Œbody å’Œ footerã€‚</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">></span></span>(<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>): <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>subject</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BLANK</span> <span class="token attr-name">LINE</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BLANK</span> <span class="token attr-name">LINE</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å…¶ä¸­ï¼Œheader æ˜¯å¿…éœ€çš„ï¼Œbody å’Œ footer å¯ä»¥çœç•¥ã€‚</p><p>ä¸ç®¡æ˜¯å“ªä¸€ä¸ªéƒ¨åˆ†ï¼Œä»»ä½•ä¸€è¡Œéƒ½ä¸å¾—è¶…è¿‡ 72 ä¸ªå­—ç¬¦ï¼ˆæˆ– 100 ä¸ªå­—ç¬¦ï¼‰ã€‚è¿™æ˜¯ä¸ºäº†é¿å…è‡ªåŠ¨æ¢è¡Œå½±å“ç¾è§‚ã€‚</p><h2 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h2><p>Header éƒ¨åˆ†åªæœ‰ä¸€è¡Œï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼š<code>type</code>ï¼ˆå¿…éœ€ï¼‰ã€<code>scope</code>ï¼ˆå¯é€‰ï¼‰å’Œ<code>subject</code>ï¼ˆå¿…éœ€ï¼‰ã€‚</p><h3 id="type"><a href="#type" class="headerlink" title="type"></a>type</h3><p>ç”¨äºè¯´æ˜ commit çš„ç±»åˆ«ï¼Œåªå…è®¸ä½¿ç”¨ä¸‹é¢7ä¸ªæ ‡è¯†ã€‚</p><ul><li><code>feat</code>ï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰</li><li><code>fix</code>ï¼šä¿®è¡¥ bug</li><li><code>docs</code>ï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰</li><li><code>style</code>ï¼šæ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰</li><li><code>refactor</code>ï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰</li><li><code>test</code>ï¼šå¢åŠ æµ‹è¯•</li><li><code>chore</code>ï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨</li></ul><p>å¦‚æœ type ä¸º <code>feat</code> å’Œ <code>fix</code>ï¼Œåˆ™è¯¥ commit å°†è‚¯å®šå‡ºç°åœ¨ Change log ä¹‹ä¸­ã€‚å…¶ä»–æƒ…å†µï¼ˆdocsã€choreã€styleã€refactorã€testï¼‰ç”±ä½ å†³å®šï¼Œè¦ä¸è¦æ”¾å…¥ Change logï¼Œå»ºè®®æ˜¯ä¸è¦ã€‚</p><h3 id="scope"><a href="#scope" class="headerlink" title="scope"></a>scope</h3><p>scope ç”¨äºè¯´æ˜ commit å½±å“çš„èŒƒå›´ï¼Œæ¯”å¦‚æ•°æ®å±‚ã€æ§åˆ¶å±‚ã€è§†å›¾å±‚ç­‰ç­‰ï¼Œè§†é¡¹ç›®ä¸åŒè€Œä¸åŒã€‚</p><p>ä¾‹å¦‚åœ¨ Angularï¼Œå¯ä»¥æ˜¯ <code>$location</code>, <code>$browser</code>, <code>$compile</code>, <code>$rootScope</code>, <code>ngHref</code>, <code>ngClick</code>, <code>ngView</code> ç­‰ã€‚</p><p>å¦‚æœä½ çš„ä¿®æ”¹å½±å“äº†ä¸æ­¢ä¸€ä¸ª <code>scope</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>*</code> ä»£æ›¿ã€‚</p><h3 id="subject"><a href="#subject" class="headerlink" title="subject"></a>subject</h3><p>subject æ˜¯ commit ç›®çš„çš„ç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡ 50 ä¸ªå­—ç¬¦ã€‚</p><p>å…¶ä»–æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>ä»¥åŠ¨è¯å¼€å¤´ï¼Œä½¿ç”¨ç¬¬ä¸€äººç§°ç°åœ¨æ—¶ï¼Œæ¯”å¦‚ changeï¼Œè€Œä¸æ˜¯ changed æˆ– changes</li><li>ç¬¬ä¸€ä¸ªå­—æ¯å°å†™</li><li>ç»“å°¾ä¸åŠ å¥å·ï¼ˆ.ï¼‰</li></ul><h2 id="Body"><a href="#Body" class="headerlink" title="Body"></a>Body</h2><p>Body éƒ¨åˆ†æ˜¯å¯¹æœ¬æ¬¡ commit çš„è¯¦ç»†æè¿°ï¼Œå¯ä»¥åˆ†æˆå¤šè¡Œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªèŒƒä¾‹ã€‚</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">More detailed explanatory text, if necessary.  Wrap it to about 72 characters or so. Further paragraphs come after blank lines.<span class="token list punctuation">-</span> Bullet points are okay, too<span class="token list punctuation">-</span> Use a hanging indent<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æœ‰ä¸‰ä¸ªæ³¨æ„ç‚¹:</p><ul><li>ä½¿ç”¨ç¬¬ä¸€äººç§°ç°åœ¨æ—¶ï¼Œæ¯”å¦‚ä½¿ç”¨ change è€Œä¸æ˜¯ changed æˆ– changesã€‚</li><li>æ°¸è¿œåˆ«å¿˜äº†ç¬¬ 2 è¡Œæ˜¯ç©ºè¡Œ</li><li>åº”è¯¥è¯´æ˜ä»£ç å˜åŠ¨çš„åŠ¨æœºï¼Œä»¥åŠä¸ä»¥å‰è¡Œä¸ºçš„å¯¹æ¯”ã€‚</li></ul><h2 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a>Footer</h2><p>Footer éƒ¨åˆ†åªç”¨äºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><h3 id="ä¸å…¼å®¹å˜åŠ¨"><a href="#ä¸å…¼å®¹å˜åŠ¨" class="headerlink" title="ä¸å…¼å®¹å˜åŠ¨"></a>ä¸å…¼å®¹å˜åŠ¨</h3><p>å¦‚æœå½“å‰ä»£ç ä¸ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸å…¼å®¹ï¼Œåˆ™ Footer éƒ¨åˆ†ä»¥ <code>BREAKING CHANGE</code> å¼€å¤´ï¼Œåé¢æ˜¯å¯¹å˜åŠ¨çš„æè¿°ã€ä»¥åŠå˜åŠ¨ç†ç”±å’Œè¿ç§»æ–¹æ³•ã€‚</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">BREAKING CHANGE: isolate scope bindings definition has changed.<span class="token code keyword">    To migrate the code follow the example below:</span><span class="token code keyword">    Before:</span><span class="token code keyword">    scope: &#123;      myAttr: 'attribute',    &#125;</span><span class="token code keyword">    After:</span><span class="token code keyword">    scope: &#123;      myAttr: '@',    &#125;</span><span class="token code keyword">    The removed `inject` wasn't generaly useful for directives so there should be no code using it.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="å…³é—­-Issue"><a href="#å…³é—­-Issue" class="headerlink" title="å…³é—­ Issue"></a>å…³é—­ Issue</h3><p>å¦‚æœå½“å‰ commit é’ˆå¯¹æŸä¸ª issueï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ Footer éƒ¨åˆ†å…³é—­è¿™ä¸ª issue ã€‚</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">Closes #234<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="Revert"><a href="#Revert" class="headerlink" title="Revert"></a>Revert</h2><p>è¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå¦‚æœå½“å‰ commit ç”¨äºæ’¤é”€ä»¥å‰çš„ commitï¼Œåˆ™å¿…é¡»ä»¥ <code>revert:</code> å¼€å¤´ï¼Œåé¢è·Ÿç€è¢«æ’¤é”€ Commit çš„ Headerã€‚</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">revert: feat(pencil): add 'graphiteWidth' optionThis reverts commit 667ecc1654a317a13331b17617d973392f415f02.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>Body éƒ¨åˆ†çš„æ ¼å¼æ˜¯å›ºå®šçš„ï¼Œå¿…é¡»å†™æˆ <code>This reverts commit &amp;lt;hash&gt;.</code>ï¼Œå…¶ä¸­çš„ hash æ˜¯è¢«æ’¤é”€ commit çš„ SHA æ ‡è¯†ç¬¦ã€‚</p><p>å¦‚æœå½“å‰ commit ä¸è¢«æ’¤é”€çš„ commitï¼Œåœ¨åŒä¸€ä¸ªå‘å¸ƒï¼ˆreleaseï¼‰é‡Œé¢ï¼Œé‚£ä¹ˆå®ƒä»¬éƒ½ä¸ä¼šå‡ºç°åœ¨ Change log é‡Œé¢ã€‚å¦‚æœä¸¤è€…åœ¨ä¸åŒçš„å‘å¸ƒï¼Œé‚£ä¹ˆå½“å‰ commitï¼Œä¼šå‡ºç°åœ¨ Change log çš„ Reverts å°æ ‡é¢˜ä¸‹é¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ’ git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>26 ä¸ªå­—æ¯ 26 å¥è¯</title>
      <link href="post/32c40e7c.html"/>
      <url>post/32c40e7c.html</url>
      
        <content type="html"><![CDATA[<p><style>#article-container img {width: 50%}</style></p><p>ä¸€ä¸ªå­—æ¯ä¸€å¼ å›¾ï¼Œä¸€å¼ å›¾ä¸€ä¸ªæ„Ÿæ‚Ÿï¼Œä¸€ä¸ªæ„Ÿæ‚Ÿä¸€ä»½æ€è€ƒï¼Œä¸€ä»½æ€è€ƒä¸€ä¸ªè¡ŒåŠ¨ã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/a_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/b_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/c_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/d_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/e_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/f_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/g_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/h_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/i_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/j_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/k_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/l_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/m_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/n_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/o_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/p_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/q_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/r_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/s_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/t_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/u_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/v_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/w_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/x_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/y_proverb.png" alt><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/letter/z_proverb.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ’¬ç”Ÿæ´»éšè®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ’¬ç”Ÿæ´»éšè®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½œå“æ¡ˆä¾‹</title>
      <link href="post/8b714264.html"/>
      <url>post/8b714264.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> ğŸ–¥ï¸ä½œå“æ¡ˆä¾‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ–¥ï¸ä½œå“æ¡ˆä¾‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R è¯­è¨€ç»Ÿè®¡åˆ†æ</title>
      <link href="post/741c153c.html"/>
      <url>post/741c153c.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>R ä¸­çš„ç»Ÿè®¡åˆ†æé€šè¿‡ä½¿ç”¨è®¸å¤šå†…ç½®å‡½æ•°æ¥æ‰§è¡Œã€‚è¿™äº›å‡½æ•°å¤§å¤šæ•°æ˜¯ R åŸºç¡€åŒ…çš„ä¸€éƒ¨åˆ†ã€‚è¿™äº›å‡½æ•°å°† R å‘é‡ä½œä¸ºè¾“å…¥å’Œå‚æ•°ï¼Œå¹¶ç»™å‡ºç»“æœã€‚</p><h1 id="å¹³å‡å€¼"><a href="#å¹³å‡å€¼" class="headerlink" title="å¹³å‡å€¼"></a>å¹³å‡å€¼</h1><p>é€šè¿‡æ±‚å‡ºæ•°æ®é›†çš„å’Œå†é™¤ä»¥æ±‚å’Œæ•°çš„æ€»é‡å¾—åˆ°å¹³å‡å€¼</p><p>å‡½æ•° <code>mean()</code> ç”¨äºåœ¨ R è¯­è¨€ä¸­è®¡ç®—å¹³å‡å€¼ã€‚</p><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>ç”¨äºè®¡ç®— R ä¸­çš„å¹³å‡å€¼çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">mean<span class="token punctuation">(</span>x<span class="token punctuation">,</span> trim <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> na.rm <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code> æ˜¯è¾“å…¥å‘é‡ã€‚</li><li><code>trim</code> ç”¨äºä»æ’åºå‘é‡çš„ä¸¤ç«¯ä¸¢å¼ƒä¸€äº›è§‚å¯Ÿç»“æœã€‚</li><li><code>na.rm</code> ç”¨äºä»è¾“å…¥å‘é‡ä¸­åˆ é™¤ç¼ºå¤±å€¼ã€‚</li></ul><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a vector. </span>x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4.2</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">54</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment"># Find Mean.</span>result.mean <span class="token operator">&lt;-</span> mean<span class="token punctuation">(</span>x<span class="token punctuation">)</span>print<span class="token punctuation">(</span>result.mean<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">8.22</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åº”ç”¨-trim-é€‰é¡¹"><a href="#åº”ç”¨-trim-é€‰é¡¹" class="headerlink" title="åº”ç”¨ trim é€‰é¡¹"></a>åº”ç”¨ trim é€‰é¡¹</h2><p>å½“æä¾› <code>trim</code> å‚æ•°æ—¶ï¼Œå‘é‡ä¸­çš„å€¼è¢«æ’åºï¼Œç„¶åä»è®¡ç®—å¹³å‡å€¼ä¸­å‡å»æ‰€éœ€çš„è§‚å¯Ÿå€¼ã€‚</p><p>å½“ <code>trim = 0.3</code> æ—¶ï¼Œæ¥è‡ªæ¯ç«¯çš„ 3 ä¸ªå€¼å°†ä»è®¡ç®—ä¸­å‡å»ä»¥æ‰¾åˆ°å‡å€¼ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ’åºçš„å‘é‡æ˜¯ <code>(-21, -5, 2, 3, 4.2, 7, 8, 12, 18, 54)</code>ï¼Œå¹¶ä¸”ä»ç”¨äºè®¡ç®—å¹³å‡å€¼çš„å‘é‡ä¸­ç§»é™¤çš„å€¼æ˜¯å·¦è¾¹çš„ <code>(-21, -5, 2)</code> ä»å’Œå³è¾¹çš„ <code>(12, 18, 54)</code>ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a vector.</span>x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4.2</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">54</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment"># Find Mean.</span>result.mean <span class="token operator">&lt;-</span> mean<span class="token punctuation">(</span>x<span class="token punctuation">,</span> trim <span class="token operator">=</span> <span class="token number">0.3</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result.mean<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">5.55</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åº”ç”¨-NA-é€‰é¡¹"><a href="#åº”ç”¨-NA-é€‰é¡¹" class="headerlink" title="åº”ç”¨ NA é€‰é¡¹"></a>åº”ç”¨ NA é€‰é¡¹</h2><p>å¦‚æœæœ‰ç¼ºå¤±å€¼ï¼Œåˆ™å¹³å‡å‡½æ•°è¿”å› <code>NA</code>ã€‚</p><p>è¦ä»è®¡ç®—ä¸­åˆ é™¤ç¼ºå°‘çš„å€¼ï¼Œè¯·ä½¿ç”¨ <code>na.rm = TRUE</code>ã€‚è¿™æ„å‘³ç€å»é™¤ <code>NA</code> å€¼ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a vector. </span>x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4.2</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">54</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">NA</span><span class="token punctuation">)</span><span class="token comment"># Find mean.</span>result.mean <span class="token operator">&lt;-</span> mean<span class="token punctuation">(</span>x<span class="token punctuation">)</span>print<span class="token punctuation">(</span>result.mean<span class="token punctuation">)</span><span class="token comment"># Find mean dropping NA values.</span>result.mean <span class="token operator">&lt;-</span> mean<span class="token punctuation">(</span>x<span class="token punctuation">,</span> na.rm <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result.mean<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">NA</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">8.22</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="ä¸­ä½æ•°"><a href="#ä¸­ä½æ•°" class="headerlink" title="ä¸­ä½æ•°"></a>ä¸­ä½æ•°</h1><p>æ•°æ®ç³»åˆ—ä¸­çš„æœ€ä¸­é—´å€¼ç§°ä¸ºä¸­ä½æ•°ã€‚åœ¨ R è¯­è¨€ä¸­ä½¿ç”¨ <code>median()</code> å‡½æ•°æ¥è®¡ç®—æ­¤å€¼ã€‚</p><h2 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>è®¡ç®— R è¯­è¨€ä¸­ä½æ•°çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">median<span class="token punctuation">(</span>x<span class="token punctuation">,</span> na.rm <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code> æ˜¯è¾“å…¥å‘é‡ã€‚</li><li><code>na.rm</code> ç”¨äºä»è¾“å…¥å‘é‡ä¸­åˆ é™¤ç¼ºå¤±å€¼ã€‚</li></ul><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the vector.</span>x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4.2</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">54</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token comment"># Find the median.</span>median.result <span class="token operator">&lt;-</span> median<span class="token punctuation">(</span>x<span class="token punctuation">)</span>print<span class="token punctuation">(</span>median.result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">5.6</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="ä¼—æ•°"><a href="#ä¼—æ•°" class="headerlink" title="ä¼—æ•°"></a>ä¼—æ•°</h1><p>ä¼—æ•°æ˜¯ä¸€ç»„æ•°æ®ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„å€¼ï¼Œä¸åŒäºå¹³å‡å€¼å’Œä¸­ä½æ•°ï¼Œä¼—æ•°å¯ä»¥åŒæ—¶åŒ…å«æ•°å­—å’Œå­—ç¬¦æ•°æ®ã€‚R æ²¡æœ‰æ ‡å‡†çš„å†…ç½®å‡½æ•°æ¥è®¡ç®—ä¼—æ•°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°æ¥è®¡ç®— R è¯­è¨€ä¸­çš„æ•°æ®é›†çš„ä¼—æ•°ã€‚è¯¥å‡½æ•°å°†å‘é‡ä½œä¸ºè¾“å…¥ï¼Œå¹¶å°†ä¼—æ•°å€¼ä½œä¸ºè¾“å‡ºã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the function.</span>getmode <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   uniqv <span class="token operator">&lt;-</span> unique<span class="token punctuation">(</span>v<span class="token punctuation">)</span>   uniqv<span class="token punctuation">[</span>which.max<span class="token punctuation">(</span>tabulate<span class="token punctuation">(</span>match<span class="token punctuation">(</span>v<span class="token punctuation">,</span> uniqv<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token comment"># Create the vector with numbers.</span>v <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token comment"># Calculate the mode using the user function.</span>result <span class="token operator">&lt;-</span> getmode<span class="token punctuation">(</span>v<span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># Create the vector with characters.</span>charv <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"o"</span><span class="token punctuation">,</span> <span class="token string">"it"</span><span class="token punctuation">,</span> <span class="token string">"the"</span><span class="token punctuation">,</span> <span class="token string">"it"</span><span class="token punctuation">,</span> <span class="token string">"it"</span><span class="token punctuation">)</span><span class="token comment"># Calculate the mode using the user function.</span>result <span class="token operator">&lt;-</span> getmode<span class="token punctuation">(</span>charv<span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">2</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"it"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="çº¿æ€§å›å½’"><a href="#çº¿æ€§å›å½’" class="headerlink" title="çº¿æ€§å›å½’"></a>çº¿æ€§å›å½’</h1><p>å›å½’åˆ†ææ˜¯ä¸€ç§éå¸¸å¹¿æ³›ä½¿ç”¨çš„ç»Ÿè®¡å·¥å…·ï¼Œç”¨äºå»ºç«‹ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„å…³ç³»æ¨¡å‹ã€‚è¿™äº›å˜é‡ä¹‹ä¸€ç§°ä¸ºé¢„æµ‹å˜é‡ï¼Œå…¶å€¼é€šè¿‡å®éªŒæ”¶é›†ã€‚å¦ä¸€ä¸ªå˜é‡ç§°ä¸ºå“åº”å˜é‡ï¼Œå…¶å€¼ä»é¢„æµ‹å˜é‡æ´¾ç”Ÿã€‚</p><p>åœ¨çº¿æ€§å›å½’ä¸­ï¼Œè¿™ä¸¤ä¸ªå˜é‡é€šè¿‡æ–¹ç¨‹ç›¸å…³ï¼Œå…¶ä¸­è¿™ä¸¤ä¸ªå˜é‡çš„æŒ‡æ•°ï¼ˆå¹‚ï¼‰ä¸º 1ï¼Œæ•°å­¦ä¸Šï¼Œçº¿æ€§å…³ç³»è¡¨ç¤ºå½“ç»˜åˆ¶ä¸ºæ›²çº¿å›¾æ—¶çš„ç›´çº¿ã€‚ä»»ä½•å˜é‡çš„æŒ‡æ•°ä¸ç­‰äº1çš„éçº¿æ€§å…³ç³»å°†åˆ›å»ºä¸€æ¡æ›²çº¿ã€‚</p><p>çº¿æ€§å›å½’çš„ä¸€èˆ¬æ•°å­¦æ–¹ç¨‹ä¸ºï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">y <span class="token operator">=</span> ax <span class="token operator">+</span> b<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>y</code> æ˜¯å“åº”å˜é‡ã€‚</li><li><code>x</code> æ˜¯é¢„æµ‹å˜é‡ã€‚</li><li><code>aï¼Œb</code> è¢«ç§°ä¸ºç³»æ•°å¸¸æ•°ã€‚</li></ul><p><strong>å»ºç«‹å›å½’çš„æ­¥éª¤</strong></p><p>å›å½’çš„ç®€å•ä¾‹å­æ˜¯å½“äººçš„èº«é«˜å·²çŸ¥æ—¶é¢„æµ‹äººçš„ä½“é‡ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªäººçš„èº«é«˜å’Œä½“é‡ä¹‹é—´çš„å…³ç³»ã€‚</p><p>åˆ›å»ºå…³ç³»çš„æ­¥éª¤æ˜¯ï¼š</p><ol><li>è¿›è¡Œæ”¶é›†é«˜åº¦å’Œç›¸åº”é‡é‡çš„è§‚æµ‹å€¼çš„æ ·æœ¬çš„å®éªŒã€‚</li><li>ä½¿ç”¨ R è¯­è¨€ä¸­çš„ <code>lm()</code> å‡½æ•°åˆ›å»ºå…³ç³»æ¨¡å‹ã€‚</li><li>ä»åˆ›å»ºçš„æ¨¡å‹ä¸­æ‰¾åˆ°ç³»æ•°ï¼Œå¹¶ä½¿ç”¨è¿™äº›åˆ›å»ºæ•°å­¦æ–¹ç¨‹</li><li>è·å¾—å…³ç³»æ¨¡å‹çš„æ‘˜è¦ä»¥äº†è§£é¢„æµ‹ä¸­çš„å¹³å‡è¯¯å·®ã€‚ä¹Ÿç§°ä¸ºæ®‹å·®ã€‚</li><li>ä¸ºäº†é¢„æµ‹æ–°äººçš„ä½“é‡ï¼Œä½¿ç”¨ R ä¸­çš„ <code>predict()</code> å‡½æ•°ã€‚</li></ol><p><strong>è¾“å…¥æ•°æ®</strong></p><p>ä¸‹é¢æ˜¯ä»£è¡¨è§‚å¯Ÿçš„æ ·æœ¬æ•°æ®ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Values of height</span><span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">174</span><span class="token punctuation">,</span> <span class="token number">138</span><span class="token punctuation">,</span> <span class="token number">186</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">136</span><span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">,</span> <span class="token number">163</span><span class="token punctuation">,</span> <span class="token number">152</span><span class="token punctuation">,</span> <span class="token number">131</span><span class="token comment"># Values of weight.</span><span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">48</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="lm-å‡½æ•°"><a href="#lm-å‡½æ•°" class="headerlink" title="lm()å‡½æ•°"></a>lm()å‡½æ•°</h2><p>æ­¤å‡½æ•°åˆ›å»ºé¢„æµ‹å˜é‡å’Œå“åº”å˜é‡ä¹‹é—´çš„å…³ç³»æ¨¡å‹ã€‚</p><p><strong>è¯­æ³•</strong></p><p>çº¿æ€§å›å½’ä¸­ <code>lm()</code> å‡½æ•°çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">lm<span class="token punctuation">(</span>formula<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>formula</code> æ˜¯è¡¨ç¤º <code>x</code> å’Œ <code>y</code> ä¹‹é—´çš„å…³ç³»çš„ç¬¦å·ã€‚</li><li><code>data</code> æ˜¯åº”ç”¨å…¬å¼çš„å‘é‡ã€‚</li></ul><p><strong>åˆ›å»ºå…³ç³»æ¨¡å‹å¹¶è·å–ç³»æ•°</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">174</span><span class="token punctuation">,</span> <span class="token number">138</span><span class="token punctuation">,</span> <span class="token number">186</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">136</span><span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">,</span> <span class="token number">163</span><span class="token punctuation">,</span> <span class="token number">152</span><span class="token punctuation">,</span> <span class="token number">131</span><span class="token punctuation">)</span>y <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">)</span><span class="token comment"># Apply the lm() function.</span>relation <span class="token operator">&lt;-</span> lm<span class="token punctuation">(</span>y <span class="token operator">~</span> x<span class="token punctuation">)</span>print<span class="token punctuation">(</span>relation<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>Call<span class="token operator">:</span>lm<span class="token punctuation">(</span>formula <span class="token operator">=</span> y <span class="token operator">~</span> x<span class="token punctuation">)</span>Coefficients<span class="token operator">:</span><span class="token punctuation">(</span>Intercept<span class="token punctuation">)</span>            x   <span class="token operator">-</span><span class="token number">38.4551</span>       <span class="token number">0.6746</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è·å–ç›¸å…³çš„æ‘˜è¦</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">174</span><span class="token punctuation">,</span> <span class="token number">138</span><span class="token punctuation">,</span> <span class="token number">186</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">136</span><span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">,</span> <span class="token number">163</span><span class="token punctuation">,</span> <span class="token number">152</span><span class="token punctuation">,</span> <span class="token number">131</span><span class="token punctuation">)</span>y <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">)</span><span class="token comment"># Apply the lm() function.</span>relation <span class="token operator">&lt;-</span> lm<span class="token punctuation">(</span>y <span class="token operator">~</span> x<span class="token punctuation">)</span>print<span class="token punctuation">(</span>summary<span class="token punctuation">(</span>relation<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>Call<span class="token operator">:</span>lm<span class="token punctuation">(</span>formula <span class="token operator">=</span> y <span class="token operator">~</span> x<span class="token punctuation">)</span>Residuals<span class="token operator">:</span>    Min      <span class="token number">1</span>Q  Median      <span class="token number">3</span>Q     Max <span class="token operator">-</span><span class="token number">6.3002</span> <span class="token operator">-</span><span class="token number">1.6629</span>  <span class="token number">0.0412</span>  <span class="token number">1.8944</span>  <span class="token number">3.9775</span> Coefficients<span class="token operator">:</span>             Estimate Std. Error t value Pr<span class="token punctuation">(</span><span class="token operator">></span><span class="token operator">|</span>t<span class="token operator">|</span><span class="token punctuation">)</span>    <span class="token punctuation">(</span>Intercept<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">38.45509</span>    <span class="token number">8.04901</span>  <span class="token operator">-</span><span class="token number">4.778</span>  <span class="token number">0.00139</span> <span class="token operator">*</span><span class="token operator">*</span> x             <span class="token number">0.67461</span>    <span class="token number">0.05191</span>  <span class="token number">12.997</span> <span class="token number">1.16e-06</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>Signif. codes<span class="token operator">:</span>  <span class="token number">0</span> â€˜<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>â€™ <span class="token number">0.001</span> â€˜<span class="token operator">*</span><span class="token operator">*</span>â€™ <span class="token number">0.01</span> â€˜<span class="token operator">*</span>â€™ <span class="token number">0.05</span> â€˜.â€™ <span class="token number">0.1</span> â€˜ â€™ <span class="token number">1</span>Residual standard error<span class="token operator">:</span> <span class="token number">3.253</span> on <span class="token number">8</span> degrees of freedomMultiple R<span class="token operator">-</span>squared<span class="token operator">:</span>  <span class="token number">0.9548</span><span class="token punctuation">,</span>Adjusted R<span class="token operator">-</span>squared<span class="token operator">:</span>  <span class="token number">0.9491</span> F<span class="token operator">-</span>statistic<span class="token operator">:</span> <span class="token number">168.9</span> on <span class="token number">1</span> and <span class="token number">8</span> DF<span class="token punctuation">,</span>  p<span class="token operator">-</span>value<span class="token operator">:</span> <span class="token number">1.164e-06</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="predict-å‡½æ•°"><a href="#predict-å‡½æ•°" class="headerlink" title="predict() å‡½æ•°"></a>predict() å‡½æ•°</h2><p><strong>è¯­æ³•</strong></p><p>çº¿æ€§å›å½’ä¸­çš„ <code>predict()</code> çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">predict<span class="token punctuation">(</span>object<span class="token punctuation">,</span> newdata<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>object</code> æ˜¯å·²ä½¿ç”¨ <code>lm()</code> å‡½æ•°åˆ›å»ºçš„å…¬å¼ã€‚</li><li><code>newdata</code> æ˜¯åŒ…å«é¢„æµ‹å˜é‡çš„æ–°å€¼çš„å‘é‡ã€‚</li></ul><p><strong>é¢„æµ‹æ–°äººçš„ä½“é‡</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># The predictor vector.</span>x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">174</span><span class="token punctuation">,</span> <span class="token number">138</span><span class="token punctuation">,</span> <span class="token number">186</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">136</span><span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">,</span> <span class="token number">163</span><span class="token punctuation">,</span> <span class="token number">152</span><span class="token punctuation">,</span> <span class="token number">131</span><span class="token punctuation">)</span><span class="token comment"># The resposne vector.</span>y <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">)</span><span class="token comment"># Apply the lm() function.</span>relation <span class="token operator">&lt;-</span> lm<span class="token punctuation">(</span>y <span class="token operator">~</span> x<span class="token punctuation">)</span><span class="token comment"># Find weight of a person with height 170.</span>a <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token number">170</span><span class="token punctuation">)</span>result <span class="token operator">&lt;-</span> predict<span class="token punctuation">(</span>relation<span class="token punctuation">,</span> a<span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>       <span class="token number">1</span> <span class="token number">76.22869</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>ä»¥å›¾å½¢æ–¹å¼å¯è§†åŒ–å›å½’</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the predictor and response variable.</span>x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">174</span><span class="token punctuation">,</span> <span class="token number">138</span><span class="token punctuation">,</span> <span class="token number">186</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">136</span><span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">,</span> <span class="token number">163</span><span class="token punctuation">,</span> <span class="token number">152</span><span class="token punctuation">,</span> <span class="token number">131</span><span class="token punctuation">)</span>y <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">)</span>relation <span class="token operator">&lt;-</span> lm<span class="token punctuation">(</span>y <span class="token operator">~</span> x<span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"linear_regression.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the chart.</span>plot<span class="token punctuation">(</span>y<span class="token punctuation">,</span> x<span class="token punctuation">,</span> col <span class="token operator">=</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"Height &amp; Weight Regression"</span><span class="token punctuation">,</span> abline<span class="token punctuation">(</span>lm<span class="token punctuation">(</span>x <span class="token operator">~</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cex <span class="token operator">=</span> <span class="token number">1.3</span><span class="token punctuation">,</span> pch <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">,</span> xlab <span class="token operator">=</span> <span class="token string">"Weight in Kg"</span><span class="token punctuation">,</span> ylab <span class="token operator">=</span> <span class="token string">"Height in cm"</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_statistics/linear_regression.png" alt></p><h1 id="å¤šå…ƒå›å½’"><a href="#å¤šå…ƒå›å½’" class="headerlink" title="å¤šå…ƒå›å½’"></a>å¤šå…ƒå›å½’</h1><p>å¤šå…ƒå›å½’æ˜¯çº¿æ€§å›å½’åˆ°ä¸¤ä¸ªä»¥ä¸Šå˜é‡ä¹‹é—´çš„å…³ç³»çš„å»¶ä¼¸ã€‚åœ¨ç®€å•çº¿æ€§å…³ç³»ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé¢„æµ‹å˜é‡å’Œä¸€ä¸ªå“åº”å˜é‡ï¼Œä½†åœ¨å¤šå…ƒå›å½’ä¸­ï¼Œæˆ‘ä»¬æœ‰å¤šä¸ªé¢„æµ‹å˜é‡å’Œä¸€ä¸ªå“åº”å˜é‡ã€‚</p><p>å¤šå…ƒå›å½’çš„ä¸€èˆ¬æ•°å­¦æ–¹ç¨‹ä¸ºï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">y <span class="token operator">=</span> a <span class="token operator">+</span> b1x1 <span class="token operator">+</span> b2x2 <span class="token operator">+</span> <span class="token ellipsis">...</span> <span class="token operator">+</span> bnxn<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>y</code> æ˜¯å“åº”å˜é‡ã€‚</li><li><code>a, b1, b2, ..., bn</code> æ˜¯ç³»æ•°ã€‚</li><li><code>x1, x2, ..., xn</code> æ˜¯é¢„æµ‹å˜é‡ã€‚</li></ul><p>æˆ‘ä»¬ä½¿ç”¨ R è¯­è¨€ä¸­çš„ <code>lm()</code> å‡½æ•°åˆ›å»ºå›å½’æ¨¡å‹ã€‚æ¨¡å‹ä½¿ç”¨è¾“å…¥æ•°æ®ç¡®å®šç³»æ•°çš„å€¼ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›ç³»æ•°æ¥é¢„æµ‹ç»™å®šçš„ä¸€ç»„é¢„æµ‹å˜é‡çš„å“åº”å˜é‡çš„å€¼ã€‚</p><p><code>lm()</code> å‡½æ•°å‡½æ•°åˆ›å»ºé¢„æµ‹å˜é‡å’Œå“åº”å˜é‡ä¹‹é—´çš„å…³ç³»æ¨¡å‹ã€‚</p><p><strong>è¯­æ³•</strong></p><p><code>lm()</code> å‡½æ•°åœ¨å¤šå…ƒå›å½’ä¸­çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">lm<span class="token punctuation">(</span>y <span class="token operator">~</span> x1 <span class="token operator">+</span> x2 <span class="token operator">+</span> x3 <span class="token operator">+</span> <span class="token ellipsis">...</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>y ~ x1 + x2 + x3...</code> æ˜¯è¡¨ç¤ºå“åº”å˜é‡å’Œé¢„æµ‹å˜é‡ä¹‹é—´çš„å…³ç³»çš„ç¬¦å·ã€‚</li><li><code>data</code> æ˜¯åº”ç”¨å…¬å¼çš„å‘é‡ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p><strong>è¾“å…¥æ•°æ®</strong></p><p>è€ƒè™‘åœ¨R è¯­è¨€ç¯å¢ƒä¸­å¯ç”¨çš„æ•°æ®é›† <code>mtcars</code> ã€‚å®ƒç»™å‡ºäº†æ¯åŠ ä»‘é‡Œç¨‹ <code>mpg</code>ï¼Œæ°”ç¼¸æ’é‡ <code>disp</code>ï¼Œé©¬åŠ› <code>hp</code>ï¼Œæ±½è½¦é‡é‡ <code>wt</code> å’Œä¸€äº›å…¶ä»–å‚æ•°çš„ä¸åŒæ±½è½¦æ¨¡å‹ä¹‹é—´çš„æ¯”è¾ƒã€‚</p><p>æ¨¡å‹çš„ç›®æ ‡æ˜¯å»ºç«‹ <code>mpg</code> ä½œä¸ºå“åº”å˜é‡ä¸ <code>disp</code>ï¼Œ<code>hp</code> å’Œ <code>wt</code> ä½œä¸ºé¢„æµ‹å˜é‡ä¹‹é—´çš„å…³ç³»ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä» <code>mtcars</code> æ•°æ®é›†ä¸­åˆ›å»ºè¿™äº›å˜é‡çš„å­é›†ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">input <span class="token operator">&lt;-</span> mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">"mpg"</span><span class="token punctuation">,</span> <span class="token string">"disp"</span><span class="token punctuation">,</span> <span class="token string">"hp"</span><span class="token punctuation">,</span> <span class="token string">"wt"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>head<span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>                   mpg disp  hp    wtMazda RX4         <span class="token number">21.0</span>  <span class="token number">160</span> <span class="token number">110</span> <span class="token number">2.620</span>Mazda RX4 Wag     <span class="token number">21.0</span>  <span class="token number">160</span> <span class="token number">110</span> <span class="token number">2.875</span>Datsun <span class="token number">710</span>        <span class="token number">22.8</span>  <span class="token number">108</span>  <span class="token number">93</span> <span class="token number">2.320</span>Hornet <span class="token number">4</span> Drive    <span class="token number">21.4</span>  <span class="token number">258</span> <span class="token number">110</span> <span class="token number">3.215</span>Hornet Sportabout <span class="token number">18.7</span>  <span class="token number">360</span> <span class="token number">175</span> <span class="token number">3.440</span>Valiant           <span class="token number">18.1</span>  <span class="token number">225</span> <span class="token number">105</span> <span class="token number">3.460</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>åˆ›å»ºå…³ç³»æ¨¡å‹å¹¶è·å–ç³»æ•°</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">input <span class="token operator">&lt;-</span> mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">"mpg"</span><span class="token punctuation">,</span> <span class="token string">"disp"</span><span class="token punctuation">,</span> <span class="token string">"hp"</span><span class="token punctuation">,</span> <span class="token string">"wt"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment"># Create the relationship model.</span>model <span class="token operator">&lt;-</span> lm<span class="token punctuation">(</span>mpg <span class="token operator">~</span> disp <span class="token operator">+</span> hp <span class="token operator">+</span> wt<span class="token punctuation">,</span> data <span class="token operator">=</span> input<span class="token punctuation">)</span><span class="token comment"># Show the model.</span>print<span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token comment"># Get the Intercept and coefficients as vector elements.</span>cat<span class="token punctuation">(</span><span class="token string">"# # # # The Coefficient Values # # # #"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>a <span class="token operator">&lt;-</span> coef<span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>a<span class="token punctuation">)</span>Xdisp <span class="token operator">&lt;-</span> coef<span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>Xhp <span class="token operator">&lt;-</span> coef<span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>Xwt <span class="token operator">&lt;-</span> coef<span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>Xdisp<span class="token punctuation">)</span>print<span class="token punctuation">(</span>Xhp<span class="token punctuation">)</span>print<span class="token punctuation">(</span>Xwt<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>Call<span class="token operator">:</span>lm<span class="token punctuation">(</span>formula <span class="token operator">=</span> mpg <span class="token operator">~</span> disp <span class="token operator">+</span> hp <span class="token operator">+</span> wt<span class="token punctuation">,</span> data <span class="token operator">=</span> input<span class="token punctuation">)</span>Coefficients<span class="token operator">:</span><span class="token punctuation">(</span>Intercept<span class="token punctuation">)</span>         disp           hp           wt    <span class="token number">37.105505</span>    <span class="token operator">-</span><span class="token number">0.000937</span>    <span class="token operator">-</span><span class="token number">0.031157</span>    <span class="token operator">-</span><span class="token number">3.800891</span> <span class="token comment"># # # # The Coefficient Values # # # #</span><span class="token punctuation">(</span>Intercept<span class="token punctuation">)</span>    <span class="token number">37.10551</span>          disp <span class="token operator">-</span><span class="token number">0.0009370091</span>         hp <span class="token operator">-</span><span class="token number">0.03115655</span>        wt <span class="token operator">-</span><span class="token number">3.800891</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>åˆ›å»ºå›å½’æ¨¡å‹çš„æ–¹ç¨‹</strong></p><p>åŸºäºä¸Šè¿°æˆªè·å’Œç³»æ•°å€¼ï¼Œæˆ‘ä»¬åˆ›å»ºäº†æ•°å­¦æ–¹ç¨‹ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">Y <span class="token operator">=</span> a <span class="token operator">+</span> Xdisp<span class="token operator">*</span>x1 <span class="token operator">+</span> Xhp<span class="token operator">*</span>x2 <span class="token operator">+</span> Xwt<span class="token operator">*</span>x3orY <span class="token operator">=</span> <span class="token number">37.105505</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.000937</span><span class="token punctuation">)</span><span class="token operator">*</span>x1 <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.031157</span><span class="token punctuation">)</span><span class="token operator">*</span>x2 <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3.800891</span><span class="token punctuation">)</span><span class="token operator">*</span>x3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><strong>åº”ç”¨æ–¹ç¨‹é¢„æµ‹æ–°å€¼</strong></p><p>å½“æä¾›ä¸€ç»„æ–°çš„ä½ç§»ï¼Œé©¬åŠ›å’Œé‡é‡å€¼æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„å›å½’æ–¹ç¨‹æ¥é¢„æµ‹é‡Œç¨‹æ•°ã€‚å¯¹äº <code>disp = 221</code>ï¼Œ<code>hp = 102</code> å’Œ <code>wt = 2.91</code> çš„æ±½è½¦ï¼Œé¢„æµ‹é‡Œç¨‹ä¸ºï¼š</p><p><code>Y = 37.105505 + (-0.000937)*221 + (-0.031157)*102 + (-3.800891)*2.91 = 22.65982</code></p><p><strong>ä½¿ç”¨ <code>predict()</code> å‡½æ•°é¢„æµ‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">x <span class="token operator">=</span> data.frame<span class="token punctuation">(</span>disp <span class="token operator">=</span> <span class="token number">221</span><span class="token punctuation">,</span> hp <span class="token operator">=</span> <span class="token number">102</span><span class="token punctuation">,</span> wt <span class="token operator">=</span> <span class="token number">2.91</span><span class="token punctuation">)</span>result <span class="token operator">=</span> predict<span class="token punctuation">(</span>model<span class="token punctuation">,</span> x<span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>       <span class="token number">1</span> <span class="token number">22.65987</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="é€»è¾‘å›å½’"><a href="#é€»è¾‘å›å½’" class="headerlink" title="é€»è¾‘å›å½’"></a>é€»è¾‘å›å½’</h1><p>é€»è¾‘å›å½’æ˜¯å›å½’æ¨¡å‹ï¼Œå…¶ä¸­å“åº”å˜é‡ï¼ˆå› å˜é‡ï¼‰å…·æœ‰è¯¸å¦‚ <code>True/False</code> æˆ– <code>0/1</code> çš„åˆ†ç±»å€¼ã€‚å®ƒå®é™…ä¸ŠåŸºäºå°†å…¶ä¸é¢„æµ‹å˜é‡ç›¸å…³çš„æ•°å­¦æ–¹ç¨‹æµ‹é‡äºŒå…ƒå“åº”çš„æ¦‚ç‡ä½œä¸ºå“åº”å˜é‡çš„å€¼ã€‚</p><p>é€»è¾‘å›å½’çš„ä¸€èˆ¬æ•°å­¦æ–¹ç¨‹ä¸ºï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">y <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> e<span class="token operator">^</span><span class="token operator">-</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b1x1 <span class="token operator">+</span> b2x2 <span class="token operator">+</span> b3x3 <span class="token operator">+</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>y</code> æ˜¯å“åº”å˜é‡ã€‚</li><li><code>x</code> æ˜¯é¢„æµ‹å˜é‡ã€‚</li><li><code>a</code> å’Œ <code>b</code> æ˜¯ä½œä¸ºæ•°å­—å¸¸æ•°çš„ç³»æ•°ã€‚</li></ul><p>ç”¨äºåˆ›å»ºå›å½’æ¨¡å‹çš„å‡½æ•°æ˜¯ <code>glm()</code> å‡½æ•°ã€‚</p><p><strong>è¯­æ³•</strong></p><p>é€»è¾‘å›å½’ä¸­ <code>glm()</code> å‡½æ•°çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">glm<span class="token punctuation">(</span>formula<span class="token punctuation">,</span> data<span class="token punctuation">,</span> family<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>formula</code> æ˜¯è¡¨ç¤ºå˜é‡ä¹‹é—´çš„å…³ç³»çš„ç¬¦å·ã€‚</li><li><code>data</code> æ˜¯ç»™å‡ºè¿™äº›å˜é‡çš„å€¼çš„æ•°æ®é›†ã€‚</li><li><code>family</code> æ˜¯ R è¯­è¨€å¯¹è±¡æ¥æŒ‡å®šæ¨¡å‹çš„ç»†èŠ‚ã€‚å®ƒçš„å€¼æ˜¯äºŒé¡¹é€»è¾‘å›å½’ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p>å†…ç½®æ•°æ®é›† <code>mtcars</code> æè¿°å…·æœ‰å„ç§å‘åŠ¨æœºè§„æ ¼çš„ã€ä¸åŒå‹å·çš„æ±½è½¦ã€‚åœ¨ <code>mtcars</code> æ•°æ®é›†ä¸­ï¼Œä¼ è¾“æ¨¡å¼ï¼ˆè‡ªåŠ¨æˆ–æ‰‹åŠ¨ï¼‰ç”± <code>am</code> åˆ—æè¿°ï¼Œå®ƒæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å€¼ <code>0</code> æˆ– <code>1</code>ã€‚æˆ‘ä»¬å¯ä»¥åœ¨åˆ— <code>am</code> å’Œå…¶ä»– 3 åˆ—ï¼ˆ<code>hp</code>ï¼Œ<code>wt</code> å’Œ <code>cyl</code>ï¼‰ä¹‹é—´åˆ›å»ºé€»è¾‘å›å½’æ¨¡å‹ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Select some columns form mtcars.</span>input <span class="token operator">&lt;-</span> mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">"am"</span><span class="token punctuation">,</span> <span class="token string">"cyl"</span><span class="token punctuation">,</span> <span class="token string">"hp"</span><span class="token punctuation">,</span> <span class="token string">"wt"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>head<span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>                  am   cyl  hp    wtMazda RX4          <span class="token number">1</span>   <span class="token number">6</span>    <span class="token number">110</span>   <span class="token number">2.620</span>Mazda RX4 Wag      <span class="token number">1</span>   <span class="token number">6</span>    <span class="token number">110</span>   <span class="token number">2.875</span>Datsun <span class="token number">710</span>         <span class="token number">1</span>   <span class="token number">4</span>     <span class="token number">93</span>   <span class="token number">2.320</span>Hornet <span class="token number">4</span> Drive     <span class="token number">0</span>   <span class="token number">6</span>    <span class="token number">110</span>   <span class="token number">3.215</span>Hornet Sportabout  <span class="token number">0</span>   <span class="token number">8</span>    <span class="token number">175</span>   <span class="token number">3.440</span>Valiant            <span class="token number">0</span>   <span class="token number">6</span>    <span class="token number">105</span>   <span class="token number">3.460</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>åˆ›å»ºå›å½’æ¨¡å‹</strong></p><p>æˆ‘ä»¬ä½¿ç”¨ <code>glm()</code> å‡½æ•°åˆ›å»ºå›å½’æ¨¡å‹ï¼Œå¹¶å¾—åˆ°å…¶æ‘˜è¦è¿›è¡Œåˆ†æã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">input <span class="token operator">&lt;-</span> mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">"am"</span><span class="token punctuation">,</span> <span class="token string">"cyl"</span><span class="token punctuation">,</span> <span class="token string">"hp"</span><span class="token punctuation">,</span> <span class="token string">"wt"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>am.data <span class="token operator">=</span> glm<span class="token punctuation">(</span>formula <span class="token operator">=</span> am <span class="token operator">~</span> cyl <span class="token operator">+</span> hp <span class="token operator">+</span> wt<span class="token punctuation">,</span> data <span class="token operator">=</span> input<span class="token punctuation">,</span> family <span class="token operator">=</span> binomial<span class="token punctuation">)</span>print<span class="token punctuation">(</span>summary<span class="token punctuation">(</span>am.data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>Call<span class="token operator">:</span>glm<span class="token punctuation">(</span>formula <span class="token operator">=</span> am <span class="token operator">~</span> cyl <span class="token operator">+</span> hp <span class="token operator">+</span> wt<span class="token punctuation">,</span> family <span class="token operator">=</span> binomial<span class="token punctuation">,</span> data <span class="token operator">=</span> input<span class="token punctuation">)</span>Deviance Residuals<span class="token operator">:</span>      Min        <span class="token number">1</span>Q    Median        <span class="token number">3</span>Q       Max  <span class="token operator">-</span><span class="token number">2.17272</span>  <span class="token operator">-</span><span class="token number">0.14907</span>  <span class="token operator">-</span><span class="token number">0.01464</span>   <span class="token number">0.14116</span>   <span class="token number">1.27641</span>  Coefficients<span class="token operator">:</span>            Estimate Std. Error z value Pr<span class="token punctuation">(</span><span class="token operator">></span><span class="token operator">|</span>z<span class="token operator">|</span><span class="token punctuation">)</span>  <span class="token punctuation">(</span>Intercept<span class="token punctuation">)</span> <span class="token number">19.70288</span>    <span class="token number">8.11637</span>   <span class="token number">2.428</span>   <span class="token number">0.0152</span> <span class="token operator">*</span>cyl          <span class="token number">0.48760</span>    <span class="token number">1.07162</span>   <span class="token number">0.455</span>   <span class="token number">0.6491</span>  hp           <span class="token number">0.03259</span>    <span class="token number">0.01886</span>   <span class="token number">1.728</span>   <span class="token number">0.0840</span> .wt          <span class="token operator">-</span><span class="token number">9.14947</span>    <span class="token number">4.15332</span>  <span class="token operator">-</span><span class="token number">2.203</span>   <span class="token number">0.0276</span> <span class="token operator">*</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>Signif. codes<span class="token operator">:</span>  <span class="token number">0</span> â€˜<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>â€™ <span class="token number">0.001</span> â€˜<span class="token operator">*</span><span class="token operator">*</span>â€™ <span class="token number">0.01</span> â€˜<span class="token operator">*</span>â€™ <span class="token number">0.05</span> â€˜.â€™ <span class="token number">0.1</span> â€˜ â€™ <span class="token number">1</span><span class="token punctuation">(</span>Dispersion parameter <span class="token keyword">for</span> binomial family taken to be <span class="token number">1</span><span class="token punctuation">)</span>    Null deviance<span class="token operator">:</span> <span class="token number">43.2297</span>  on <span class="token number">31</span>  degrees of freedomResidual deviance<span class="token operator">:</span>  <span class="token number">9.8415</span>  on <span class="token number">28</span>  degrees of freedomAIC<span class="token operator">:</span> <span class="token number">17.841</span>Number of Fisher Scoring iterations<span class="token operator">:</span> <span class="token number">8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>ç»“è®º</strong></p><p>åœ¨ <code>summary</code> ä¸­ï¼Œå¯¹äºå˜é‡ <code>cyl</code> å’Œ <code>hp</code> ï¼Œæœ€åä¸€åˆ—ä¸­çš„ <code>P</code> å€¼å¤§äº <code>0.05</code>ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒä»¬å¯¹å˜é‡ <code>am</code> çš„å€¼æœ‰è´¡çŒ®æ˜¯æ— å…³ç´§è¦çš„ã€‚åªæœ‰é‡é‡ <code>wt</code> å½±å“è¯¥å›å½’æ¨¡å‹ä¸­çš„ <code>am</code> å€¼ã€‚</p><h1 id="æ ‡å‡†åˆ†å¸ƒ"><a href="#æ ‡å‡†åˆ†å¸ƒ" class="headerlink" title="æ ‡å‡†åˆ†å¸ƒ"></a>æ ‡å‡†åˆ†å¸ƒ</h1><p>åœ¨æ¥è‡ªç‹¬ç«‹æºçš„æ•°æ®çš„éšæœºé›†åˆä¸­ï¼Œé€šå¸¸è§‚å¯Ÿåˆ°æ•°æ®çš„åˆ†å¸ƒæ˜¯æ­£å¸¸çš„ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨ç»˜åˆ¶æ°´å¹³è½´ä¸Šçš„å˜é‡å€¼å’Œå‚ç›´è½´ä¸Šçš„å€¼çš„è®¡æ•°çš„å›¾å½¢æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°é’Ÿå½¢æ›²çº¿ã€‚æ›²çº¿çš„ä¸­å¿ƒè¡¨ç¤ºæ•°æ®é›†çš„å¹³å‡å€¼ã€‚åœ¨å›¾ä¸­ï¼Œ<code>50%</code> çš„å€¼ä½äºå¹³å‡å€¼çš„å·¦ä¾§ï¼Œå¦å¤– <code>50%</code> ä½äºå›¾è¡¨çš„å³ä¾§ã€‚è¿™åœ¨ç»Ÿè®¡å­¦ä¸­è¢«ç§°ä¸ºæ­£æ€åˆ†å¸ƒã€‚</p><p>R è¯­è¨€æœ‰å››ä¸ªå†…ç½®å‡½æ•°æ¥äº§ç”Ÿæ­£æ€åˆ†å¸ƒã€‚å®ƒä»¬æè¿°å¦‚ä¸‹ï¼š</p><p><strong>è¯­æ³•</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">dnorm<span class="token punctuation">(</span>x<span class="token punctuation">,</span> mean<span class="token punctuation">,</span> sd<span class="token punctuation">)</span>pnorm<span class="token punctuation">(</span>x<span class="token punctuation">,</span> mean<span class="token punctuation">,</span> sd<span class="token punctuation">)</span>qnorm<span class="token punctuation">(</span>p<span class="token punctuation">,</span> mean<span class="token punctuation">,</span> sd<span class="token punctuation">)</span>rnorm<span class="token punctuation">(</span>n<span class="token punctuation">,</span> mean<span class="token punctuation">,</span> sd<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code> æ˜¯æ•°å­—çš„å‘é‡ã€‚</li><li><code>P</code> æ˜¯æ¦‚ç‡çš„å‘é‡ã€‚</li><li><code>n</code> æ˜¯è§‚å¯Ÿçš„æ•°é‡ï¼ˆæ ·æœ¬å¤§å°ï¼‰ã€‚</li><li><code>mean</code> æ˜¯æ ·æœ¬æ•°æ®çš„å¹³å‡å€¼ã€‚å®ƒçš„é»˜è®¤å€¼ä¸º <code>0</code>ã€‚</li><li><code>sd</code> æ˜¯æ ‡å‡†åå·®ã€‚å®ƒçš„é»˜è®¤å€¼ä¸º <code>1</code>ã€‚</li></ul><h2 id="dnorm"><a href="#dnorm" class="headerlink" title="dnorm()"></a>dnorm()</h2><p>è¯¥å‡½æ•°ç»™å‡ºç»™å®šå¹³å‡å€¼å’Œæ ‡å‡†åå·®åœ¨æ¯ä¸ªç‚¹çš„æ¦‚ç‡åˆ†å¸ƒçš„é«˜åº¦ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a sequence of numbers between -10 and 10 incrementing by 0.1.</span>x <span class="token operator">&lt;-</span> seq<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> by <span class="token operator">=</span> <span class="token number">.1</span><span class="token punctuation">)</span><span class="token comment"># Choose the mean as 2.5 and standard deviation as 0.5.</span>y <span class="token operator">&lt;-</span> dnorm<span class="token punctuation">(</span>x<span class="token punctuation">,</span> mean <span class="token operator">=</span> <span class="token number">2.5</span><span class="token punctuation">,</span> sd <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"dnorm.png"</span><span class="token punctuation">)</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_statistics/dnorm.png" alt></p><h2 id="pnorm"><a href="#pnorm" class="headerlink" title="pnorm()"></a>pnorm()</h2><p>è¯¥å‡½æ•°ç»™å‡ºæ­£æ€åˆ†å¸ƒéšæœºæ•°çš„æ¦‚ç‡å°äºç»™å®šæ•°çš„å€¼ã€‚å®ƒä¹Ÿè¢«ç§°ä¸ºâ€œç´¯ç§¯åˆ†å¸ƒå‡½æ•°â€ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a sequence of numbers between -10 and 10 incrementing by 0.2.</span>x <span class="token operator">&lt;-</span> seq<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> by <span class="token operator">=</span> <span class="token number">.2</span><span class="token punctuation">)</span> <span class="token comment"># Choose the mean as 2.5 and standard deviation as 2. </span>y <span class="token operator">&lt;-</span> pnorm<span class="token punctuation">(</span>x<span class="token punctuation">,</span> mean <span class="token operator">=</span> <span class="token number">2.5</span><span class="token punctuation">,</span> sd <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"pnorm.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the graph.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_statistics/pnorm.png" alt></p><h2 id="qnorm"><a href="#qnorm" class="headerlink" title="qnorm()"></a>qnorm()</h2><p>è¯¥å‡½æ•°é‡‡ç”¨æ¦‚ç‡å€¼ï¼Œå¹¶ç»™å‡ºç´¯ç§¯å€¼ä¸æ¦‚ç‡å€¼åŒ¹é…çš„æ•°å­—ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a sequence of probability values incrementing by 0.02.</span>x <span class="token operator">&lt;-</span> seq<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> by <span class="token operator">=</span> <span class="token number">0.02</span><span class="token punctuation">)</span><span class="token comment"># Choose the mean as 2 and standard deviation as 3.</span>y <span class="token operator">&lt;-</span> qnorm<span class="token punctuation">(</span>x<span class="token punctuation">,</span> mean <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> sd <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"qnorm.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the graph.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_statistics/qnorm.png" alt></p><h2 id="rnorm"><a href="#rnorm" class="headerlink" title="rnorm()"></a>rnorm()</h2><p>æ­¤å‡½æ•°ç”¨äºç”Ÿæˆåˆ†å¸ƒæ­£å¸¸çš„éšæœºæ•°ã€‚å®ƒå°†æ ·æœ¬å¤§å°ä½œä¸ºè¾“å…¥ï¼Œå¹¶ç”Ÿæˆè®¸å¤šéšæœºæ•°ã€‚æˆ‘ä»¬ç»˜åˆ¶ä¸€ä¸ªç›´æ–¹å›¾æ¥æ˜¾ç¤ºç”Ÿæˆçš„æ•°å­—çš„åˆ†å¸ƒã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a sample of 50 numbers which are normally distributed.</span>y <span class="token operator">&lt;-</span> rnorm<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"rnorm.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the histogram for this sample.</span>hist<span class="token punctuation">(</span>y<span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"Normal DIstribution"</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_statistics/rnorm.png" alt></p><h1 id="äºŒé¡¹åˆ†å¸ƒ"><a href="#äºŒé¡¹åˆ†å¸ƒ" class="headerlink" title="äºŒé¡¹åˆ†å¸ƒ"></a>äºŒé¡¹åˆ†å¸ƒ</h1><p>äºŒé¡¹åˆ†å¸ƒæ¨¡å‹å¤„ç†åœ¨ä¸€ç³»åˆ—å®éªŒä¸­ä»…å‘ç°ä¸¤ä¸ªå¯èƒ½ç»“æœçš„äº‹ä»¶çš„æˆåŠŸæ¦‚ç‡ã€‚ä¾‹å¦‚ï¼Œæ·ç¡¬å¸æ€»æ˜¯ç»™å‡ºæ­£æˆ–åã€‚åœ¨äºŒé¡¹åˆ†å¸ƒæœŸé—´ä¼°è®¡åœ¨ <code>10</code> æ¬¡é‡å¤æŠ›æ·ç¡¬å¸ä¸­ç²¾ç¡®æ‰¾åˆ° <code>3</code> ä¸ªæ­£çš„æ¦‚ç‡ã€‚</p><p>R è¯­è¨€æœ‰å››ä¸ªå†…ç½®å‡½æ•°æ¥ç”ŸæˆäºŒé¡¹åˆ†å¸ƒã€‚å®ƒä»¬æè¿°å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">dbinom<span class="token punctuation">(</span>x<span class="token punctuation">,</span> size<span class="token punctuation">,</span> prob<span class="token punctuation">)</span>pbinom<span class="token punctuation">(</span>x<span class="token punctuation">,</span> size<span class="token punctuation">,</span> prob<span class="token punctuation">)</span>qbinom<span class="token punctuation">(</span>p<span class="token punctuation">,</span> size<span class="token punctuation">,</span> prob<span class="token punctuation">)</span>rbinom<span class="token punctuation">(</span>n<span class="token punctuation">,</span> size<span class="token punctuation">,</span> prob<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code> æ˜¯æ•°å­—çš„å‘é‡ã€‚</li><li><code>P</code> æ˜¯æ¦‚ç‡å‘é‡ã€‚</li><li><code>n</code> æ˜¯è§‚å¯Ÿçš„æ•°é‡ã€‚</li><li><code>size</code> æ˜¯è¯•éªŒçš„æ•°é‡ã€‚</li><li><code>prob</code> æ˜¯æ¯ä¸ªè¯•éªŒæˆåŠŸçš„æ¦‚ç‡ã€‚</li></ul><h2 id="dbinom"><a href="#dbinom" class="headerlink" title="dbinom()"></a>dbinom()</h2><p>è¯¥å‡½æ•°ç»™å‡ºæ¯ä¸ªç‚¹çš„æ¦‚ç‡å¯†åº¦åˆ†å¸ƒã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a sample of 50 numbers which are incremented by 1.</span>x <span class="token operator">&lt;-</span> seq<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> by <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># Create the binomial distribution.</span>y <span class="token operator">&lt;-</span> dbinom<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"dbinom.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the graph for this sample.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_statistics/dbinom.png" alt></p><h2 id="pbinom"><a href="#pbinom" class="headerlink" title="pbinom()"></a>pbinom()</h2><p>æ­¤å‡½æ•°ç»™å‡ºäº‹ä»¶çš„ç´¯ç§¯æ¦‚ç‡ã€‚å®ƒæ˜¯è¡¨ç¤ºæ¦‚ç‡çš„å•ä¸ªå€¼ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Probability of getting 26 or less heads from a 51 tosses of a coin.</span>x <span class="token operator">&lt;-</span> pbinom<span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">51</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">0.610116</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="qbinom"><a href="#qbinom" class="headerlink" title="qbinom()"></a>qbinom()</h2><p>è¯¥å‡½æ•°é‡‡ç”¨æ¦‚ç‡å€¼ï¼Œå¹¶ç»™å‡ºç´¯ç§¯å€¼ä¸æ¦‚ç‡å€¼åŒ¹é…çš„æ•°å­—ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># How many heads will have a probability of 0.25 will come out when a coin is tossed 51 times.</span>x <span class="token operator">&lt;-</span> qbinom<span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token number">51</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">23</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="rbinom"><a href="#rbinom" class="headerlink" title="rbinom()"></a>rbinom()</h2><p>è¯¥å‡½æ•°ä»ç»™å®šæ ·æœ¬äº§ç”Ÿç»™å®šæ¦‚ç‡çš„æ‰€éœ€æ•°é‡çš„éšæœºå€¼ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Find 8 random values from a sample of 150 with probability of 0.4.</span>x <span class="token operator">&lt;-</span> rbinom<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">.4</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">63</span> <span class="token number">62</span> <span class="token number">64</span> <span class="token number">54</span> <span class="token number">54</span> <span class="token number">47</span> <span class="token number">57</span> <span class="token number">59</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="æ³Šæ¾å›å½’"><a href="#æ³Šæ¾å›å½’" class="headerlink" title="æ³Šæ¾å›å½’"></a>æ³Šæ¾å›å½’</h1><p>æ³Šæ¾å›å½’ï¼ˆPoisson regressionï¼‰æ˜¯ç”¨æ¥ä¸ºè®¡æ•°èµ„æ–™å’Œåˆ—è”è¡¨å»ºæ¨¡çš„ä¸€ç§å›å½’åˆ†æï¼Œå…¶ä¸­å“åº”å˜é‡æ˜¯è®¡æ•°è€Œä¸æ˜¯åˆ†æ•°çš„å½¢å¼ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªè¶³çƒç³»åˆ—èµ›ä¸­å‡ºçº¿æˆ–è·èƒœçš„æ¬¡æ•°ã€‚æ­¤å¤–ï¼Œå“åº”å˜é‡çš„å€¼éµå¾ªæ³Šæ¾åˆ†å¸ƒã€‚</p><p>æ³Šæ¾å›å½’çš„ä¸€èˆ¬æ•°å­¦æ–¹ç¨‹ä¸ºï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">log<span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token operator">=</span> a <span class="token operator">+</span> b1x1 <span class="token operator">+</span> b2x2 <span class="token operator">+</span> bnxn <span class="token ellipsis">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code>â€‹ æ˜¯é¢„æµ‹å˜é‡ã€‚</li><li><code>y</code> â€‹æ˜¯å“åº”å˜é‡ã€‚</li><li>â€‹<code>a</code> â€‹å’Œ â€‹<code>b</code> â€‹æ˜¯æ•°å­—ç³»æ•°ã€‚</li></ul><p>ç”¨äºåˆ›å»ºæ³Šæ¾å›å½’æ¨¡å‹çš„å‡½æ•°æ˜¯â€‹ <code>glm()â€‹</code> å‡½æ•°ã€‚</p><p><strong>è¯­æ³•</strong></p><p>åœ¨æ³Šæ¾å›å½’ä¸­ â€‹<code>glm()</code>â€‹ å‡½æ•°çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">glm<span class="token punctuation">(</span>formula<span class="token punctuation">,</span> data<span class="token punctuation">,</span> family<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>formula</code> â€‹æ˜¯è¡¨ç¤ºå˜é‡ä¹‹é—´çš„å…³ç³»çš„ç¬¦å·ã€‚</li><li><code>â€‹dataâ€‹</code> æ˜¯ç»™å‡ºè¿™äº›å˜é‡çš„å€¼çš„æ•°æ®é›†ã€‚</li><li><code>â€‹familyâ€‹</code> æ˜¯ R è¯­è¨€å¯¹è±¡æ¥æŒ‡å®šæ¨¡å‹çš„ç»†èŠ‚ã€‚å®ƒçš„å€¼æ˜¯â€œæ³Šæ¾â€çš„é€»è¾‘å›å½’ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p>æˆ‘ä»¬æœ‰å†…ç½®çš„æ•°æ®é›† <code>â€‹warpbreaks</code>ï¼Œå…¶æè¿°äº†ç¾Šæ¯›ç±»å‹ <code>wool</code>ï¼ˆâ€‹Aâ€‹ æˆ– â€‹Bâ€‹ï¼‰å’Œå¼ åŠ› <code>tension</code>ï¼ˆä½ï¼Œä¸­æˆ–é«˜ï¼‰å¯¹æ¯ä¸ªç»‡æœºçš„ç»çº±æ–­è£‚æ•°é‡ <code>breaks</code> çš„å½±å“ã€‚è®©æˆ‘ä»¬è€ƒè™‘â€œæ–­è£‚â€ä½œä¸ºå“åº”å˜é‡ï¼Œå®ƒæ˜¯æ–­è£‚æ¬¡æ•°çš„è®¡æ•°ã€‚ç¾Šæ¯›â€œç±»å‹â€å’Œâ€œå¼ åŠ›â€ä½œä¸ºé¢„æµ‹å˜é‡ã€‚</p><p><strong>è¾“å…¥æ•°æ®</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">input <span class="token operator">&lt;-</span> warpbreaksprint<span class="token punctuation">(</span>head<span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  breaks wool tension<span class="token number">1</span>     <span class="token number">26</span>    A       L<span class="token number">2</span>     <span class="token number">30</span>    A       L<span class="token number">3</span>     <span class="token number">54</span>    A       L<span class="token number">4</span>     <span class="token number">25</span>    A       L<span class="token number">5</span>     <span class="token number">70</span>    A       L<span class="token number">6</span>     <span class="token number">52</span>    A       L<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>åˆ›å»ºå›å½’æ¨¡å‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">output <span class="token operator">&lt;-</span>glm<span class="token punctuation">(</span>formula <span class="token operator">=</span> breaks <span class="token operator">~</span> wool <span class="token operator">+</span> tension<span class="token punctuation">,</span> data <span class="token operator">=</span> warpbreaks<span class="token punctuation">,</span> family <span class="token operator">=</span> poisson<span class="token punctuation">)</span>print<span class="token punctuation">(</span>summary<span class="token punctuation">(</span>output<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>Call<span class="token operator">:</span>glm<span class="token punctuation">(</span>formula <span class="token operator">=</span> breaks <span class="token operator">~</span> wool <span class="token operator">+</span> tension<span class="token punctuation">,</span> family <span class="token operator">=</span> poisson<span class="token punctuation">,</span> data <span class="token operator">=</span> warpbreaks<span class="token punctuation">)</span>Deviance Residuals<span class="token operator">:</span>     Min       <span class="token number">1</span>Q   Median       <span class="token number">3</span>Q      Max  <span class="token operator">-</span><span class="token number">3.6871</span>  <span class="token operator">-</span><span class="token number">1.6503</span>  <span class="token operator">-</span><span class="token number">0.4269</span>   <span class="token number">1.1902</span>   <span class="token number">4.2616</span>  Coefficients<span class="token operator">:</span>            Estimate Std. Error z value Pr<span class="token punctuation">(</span><span class="token operator">></span><span class="token operator">|</span>z<span class="token operator">|</span><span class="token punctuation">)</span>    <span class="token punctuation">(</span>Intercept<span class="token punctuation">)</span>  <span class="token number">3.69196</span>    <span class="token number">0.04541</span>  <span class="token number">81.302</span>  <span class="token operator">&lt;</span> <span class="token number">2e-16</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>woolB       <span class="token operator">-</span><span class="token number">0.20599</span>    <span class="token number">0.05157</span>  <span class="token operator">-</span><span class="token number">3.994</span> <span class="token number">6.49e-05</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>tensionM    <span class="token operator">-</span><span class="token number">0.32132</span>    <span class="token number">0.06027</span>  <span class="token operator">-</span><span class="token number">5.332</span> <span class="token number">9.73e-08</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>tensionH    <span class="token operator">-</span><span class="token number">0.51849</span>    <span class="token number">0.06396</span>  <span class="token operator">-</span><span class="token number">8.107</span> <span class="token number">5.21e-16</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>Signif. codes<span class="token operator">:</span>  <span class="token number">0</span> â€˜<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>â€™ <span class="token number">0.001</span> â€˜<span class="token operator">*</span><span class="token operator">*</span>â€™ <span class="token number">0.01</span> â€˜<span class="token operator">*</span>â€™ <span class="token number">0.05</span> â€˜.â€™ <span class="token number">0.1</span> â€˜ â€™ <span class="token number">1</span><span class="token punctuation">(</span>Dispersion parameter <span class="token keyword">for</span> poisson family taken to be <span class="token number">1</span><span class="token punctuation">)</span>    Null deviance<span class="token operator">:</span> <span class="token number">297.37</span>  on <span class="token number">53</span>  degrees of freedomResidual deviance<span class="token operator">:</span> <span class="token number">210.39</span>  on <span class="token number">50</span>  degrees of freedomAIC<span class="token operator">:</span> <span class="token number">493.06</span>Number of Fisher Scoring iterations<span class="token operator">:</span> <span class="token number">4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>åœ¨ <code>summary</code> ä¸­ï¼Œæˆ‘ä»¬æŸ¥æ‰¾æœ€åä¸€åˆ—ä¸­çš„ <code>â€‹p</code> â€‹å€¼å°äºâ€‹ <code>0.05</code>â€‹ï¼Œä»¥è€ƒè™‘é¢„æµ‹å˜é‡å¯¹å“åº”å˜é‡çš„å½±å“ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œå…·æœ‰å¼ åŠ›ç±»å‹ <code>â€‹M</code> â€‹å’Œâ€‹ <code>H</code>â€‹ çš„ç¾Šæ¯›ç±»å‹ â€‹<code>B</code> â€‹å¯¹æ–­è£‚è®¡æ•°æœ‰å½±å“ã€‚</p><h1 id="åæ–¹å·®åˆ†æ"><a href="#åæ–¹å·®åˆ†æ" class="headerlink" title="åæ–¹å·®åˆ†æ"></a>åæ–¹å·®åˆ†æ</h1><p>æˆ‘ä»¬ä½¿ç”¨å›å½’åˆ†æåˆ›å»ºæ¨¡å‹ï¼Œæè¿°å˜é‡åœ¨é¢„æµ‹å˜é‡å¯¹å“åº”å˜é‡çš„å½±å“ã€‚æœ‰æ—¶ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªç±»åˆ«å˜é‡ï¼Œå¦‚ <code>Yes/No</code> æˆ– <code>Male/Female</code> ç­‰ã€‚ç®€å•çš„å›å½’åˆ†æä¸ºåˆ†ç±»å˜é‡çš„æ¯ä¸ªå€¼æä¾›å¤šä¸ªç»“æœã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†åˆ†ç±»å˜é‡ä¸é¢„æµ‹å˜é‡ä¸€èµ·ä½¿ç”¨å¹¶æ¯”è¾ƒåˆ†ç±»å˜é‡çš„æ¯ä¸ªçº§åˆ«çš„å›å½’çº¿æ¥ç ”ç©¶åˆ†ç±»å˜é‡çš„æ•ˆæœã€‚è¿™æ ·çš„åˆ†æè¢«ç§°ä¸ºåæ–¹å·®åˆ†æï¼Œä¹Ÿç§°ä¸º ANCOVAã€‚</p><p><strong>å®ä¾‹</strong></p><p>è€ƒè™‘åœ¨ R è¯­è¨€ä¸­å†…ç½®çš„æ•°æ®é›† <code>mtcars</code> ã€‚åœ¨å…¶ä¸­æˆ‘ä»¬è§‚å¯Ÿåˆ°å­—æ®µ <code>am</code> è¡¨ç¤ºä¼ è¾“çš„ç±»å‹ï¼ˆè‡ªåŠ¨æˆ–æ‰‹åŠ¨ï¼‰ã€‚å®ƒæ˜¯å€¼ä¸º <code>0/1</code> çš„åˆ†ç±»å˜é‡ã€‚æ±½è½¦çš„æ¯åŠ ä»‘è‹±é‡Œæ•° <code>mpg</code> ä¹Ÿå¯ä»¥å–å†³äºé©¬åŠ› <code>hp</code> çš„å€¼ã€‚</p><p>æˆ‘ä»¬ç ”ç©¶ <code>am</code> çš„å€¼å¯¹ <code>mpg</code> å’Œ <code>hp</code> ä¹‹é—´å›å½’çš„å½±å“ã€‚å®ƒæ˜¯é€šè¿‡ä½¿ç”¨ <code>aov()</code> å‡½æ•°ï¼Œç„¶åä½¿ç”¨ <code>anova()</code> å‡½æ•°æ¥æ¯”è¾ƒå¤šä¸ªå›å½’æ¥å®Œæˆçš„ã€‚</p><p><strong>è¾“å…¥æ•°æ®</strong></p><p>ä»æ•°æ®é›† <code>mtcars</code> åˆ›å»ºä¸€ä¸ªåŒ…å«å­—æ®µ <code>mpg</code>ï¼Œ<code>hp</code> å’Œ <code>am</code> çš„æ•°æ®æ¡†ã€‚è¿™é‡Œæˆ‘ä»¬å– <code>mpg</code> ä½œä¸ºå“åº”å˜é‡ï¼Œ<code>hp</code> ä½œä¸ºé¢„æµ‹å˜é‡ï¼Œ<code>am</code> ä½œä¸ºåˆ†ç±»å˜é‡ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">input <span class="token operator">&lt;-</span> mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">"am"</span><span class="token punctuation">,</span> <span class="token string">"mpg"</span><span class="token punctuation">,</span> <span class="token string">"hp"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>head<span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>                  am  mpg  hpMazda RX4          <span class="token number">1</span> <span class="token number">21.0</span> <span class="token number">110</span>Mazda RX4 Wag      <span class="token number">1</span> <span class="token number">21.0</span> <span class="token number">110</span>Datsun <span class="token number">710</span>         <span class="token number">1</span> <span class="token number">22.8</span>  <span class="token number">93</span>Hornet <span class="token number">4</span> Drive     <span class="token number">0</span> <span class="token number">21.4</span> <span class="token number">110</span>Hornet Sportabout  <span class="token number">0</span> <span class="token number">18.7</span> <span class="token number">175</span>Valiant            <span class="token number">0</span> <span class="token number">18.1</span> <span class="token number">105</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>åæ–¹å·®åˆ†æ</strong></p><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå›å½’æ¨¡å‹ï¼Œä»¥ <code>hp</code> ä½œä¸ºé¢„æµ‹å˜é‡ï¼Œ<code>mpg</code> ä½œä¸ºå“åº”å˜é‡ï¼Œè€ƒè™‘ <code>am</code> å’Œ <code>hp</code> ä¹‹é—´çš„ç›¸äº’ä½œç”¨ã€‚</p><p><strong>æ¨¡å‹ä¸åˆ†ç±»å˜é‡å’Œé¢„æµ‹å˜é‡ä¹‹é—´çš„ç›¸äº’ä½œç”¨</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Get the dataset.</span>input <span class="token operator">&lt;-</span> mtcars<span class="token comment"># Create the regression model.</span>result <span class="token operator">&lt;-</span> aov<span class="token punctuation">(</span>mpg <span class="token operator">~</span> hp <span class="token operator">*</span> am<span class="token punctuation">,</span> data <span class="token operator">=</span> input<span class="token punctuation">)</span>print<span class="token punctuation">(</span>summary<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>            Df Sum Sq Mean Sq F value   Pr<span class="token punctuation">(</span><span class="token operator">></span>F<span class="token punctuation">)</span>    hp           <span class="token number">1</span>  <span class="token number">678.4</span>   <span class="token number">678.4</span>  <span class="token number">77.391</span> <span class="token number">1.50e-09</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>am           <span class="token number">1</span>  <span class="token number">202.2</span>   <span class="token number">202.2</span>  <span class="token number">23.072</span> <span class="token number">4.75e-05</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>hp<span class="token operator">:</span>am        <span class="token number">1</span>    <span class="token number">0.0</span>     <span class="token number">0.0</span>   <span class="token number">0.001</span>    <span class="token number">0.981</span>    Residuals   <span class="token number">28</span>  <span class="token number">245.4</span>     <span class="token number">8.8</span>                     <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>Signif. codes<span class="token operator">:</span>  <span class="token number">0</span> â€˜<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>â€™ <span class="token number">0.001</span> â€˜<span class="token operator">*</span><span class="token operator">*</span>â€™ <span class="token number">0.01</span> â€˜<span class="token operator">*</span>â€™ <span class="token number">0.05</span> â€˜.â€™ <span class="token number">0.1</span> â€˜ â€™ <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>è¿™ä¸ªç»“æœè¡¨æ˜ï¼Œé©¬åŠ› <code>hp</code> å’Œä¼ è¾“ç±»å‹ <code>am</code> å¯¹æ¯åŠ ä»‘çš„è‹±é‡Œ <code>mpg</code> æœ‰æ˜¾ç€çš„å½±å“ï¼Œå› ä¸ºä¸¤ç§æƒ…å†µä¸‹çš„ <code>P</code> å€¼éƒ½å°äº <code>0.05</code>ã€‚ä½†æ˜¯è¿™ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„ç›¸äº’ä½œç”¨ä¸æ˜¾ç€ï¼Œå› ä¸º <code>hp:am</code> çš„ <code>P</code> å€¼å¤§äº <code>0.05</code>ã€‚</p><p><strong>æ²¡æœ‰åˆ†ç±»å˜é‡å’Œé¢„æµ‹å˜é‡ä¹‹é—´ç›¸äº’ä½œç”¨çš„æ¨¡å‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Get the dataset.</span>input <span class="token operator">&lt;-</span> mtcars<span class="token comment"># Create the regression model.</span>result <span class="token operator">&lt;-</span> aov<span class="token punctuation">(</span>mpg <span class="token operator">~</span> hp <span class="token operator">+</span> am<span class="token punctuation">,</span> data <span class="token operator">=</span> input<span class="token punctuation">)</span>print<span class="token punctuation">(</span>summary<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>            Df Sum Sq Mean Sq F value   Pr<span class="token punctuation">(</span><span class="token operator">></span>F<span class="token punctuation">)</span>    hp           <span class="token number">1</span>  <span class="token number">678.4</span>   <span class="token number">678.4</span>   <span class="token number">80.15</span> <span class="token number">7.63e-10</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>am           <span class="token number">1</span>  <span class="token number">202.2</span>   <span class="token number">202.2</span>   <span class="token number">23.89</span> <span class="token number">3.46e-05</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>Residuals   <span class="token number">29</span>  <span class="token number">245.4</span>     <span class="token number">8.5</span>                     <span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span>Signif. codes<span class="token operator">:</span>  <span class="token number">0</span> â€˜<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>â€™ <span class="token number">0.001</span> â€˜<span class="token operator">*</span><span class="token operator">*</span>â€™ <span class="token number">0.01</span> â€˜<span class="token operator">*</span>â€™ <span class="token number">0.05</span> â€˜.â€™ <span class="token number">0.1</span> â€˜ â€™ <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>è¿™ä¸ªç»“æœè¡¨æ˜ï¼Œé©¬åŠ› <code>hp</code> å’Œä¼ è¾“ç±»å‹ <code>am</code> å¯¹æ¯åŠ ä»‘çš„è‹±é‡Œ <code>mpg</code> æœ‰æ˜¾ç€çš„å½±å“ï¼Œå› ä¸ºä¸¤ç§æƒ…å†µä¸‹çš„ <code>P</code> å€¼éƒ½å°äº <code>0.05</code>ã€‚</p><p><strong>æ¯”è¾ƒä¸¤ä¸ªæ¨¡å‹</strong></p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æ¯”è¾ƒä¸¤ä¸ªæ¨¡å‹æ¥å¾—å‡ºç»“è®ºï¼Œå˜é‡çš„ç›¸äº’ä½œç”¨æ˜¯å¦çœŸæ­£é‡è¦ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>anova()</code> å‡½æ•°ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Get the dataset.</span>input <span class="token operator">&lt;-</span> mtcars<span class="token comment"># Create the regression models.</span>result1 <span class="token operator">&lt;-</span> aov<span class="token punctuation">(</span>mpg <span class="token operator">~</span> hp <span class="token operator">*</span> am<span class="token punctuation">,</span> data <span class="token operator">=</span> input<span class="token punctuation">)</span>result2 <span class="token operator">&lt;-</span> aov<span class="token punctuation">(</span>mpg <span class="token operator">~</span> hp <span class="token operator">+</span> am<span class="token punctuation">,</span> data <span class="token operator">=</span> input<span class="token punctuation">)</span><span class="token comment"># Compare the two models.</span>print<span class="token punctuation">(</span>anova<span class="token punctuation">(</span>result1<span class="token punctuation">,</span> result2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>Analysis of Variance TableModel <span class="token number">1</span><span class="token operator">:</span> mpg <span class="token operator">~</span> hp <span class="token operator">*</span> amModel <span class="token number">2</span><span class="token operator">:</span> mpg <span class="token operator">~</span> hp <span class="token operator">+</span> am  Res.Df    RSS Df  Sum of Sq     F Pr<span class="token punctuation">(</span><span class="token operator">></span>F<span class="token punctuation">)</span><span class="token number">1</span>     <span class="token number">28</span> <span class="token number">245.43</span>                           <span class="token number">2</span>     <span class="token number">29</span> <span class="token number">245.44</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">-</span><span class="token number">0.0052515</span> <span class="token number">6e-04</span> <span class="token number">0.9806</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ç”±äº <code>P</code> å€¼å¤§äº <code>0.05</code>ï¼Œæˆ‘ä»¬å¾—å‡ºç»“è®ºï¼Œé©¬åŠ› <code>hp</code> å’Œä¼ æ’­ç±»å‹ <code>am</code> ä¹‹é—´çš„ç›¸äº’ä½œç”¨ä¸æ˜¾ç€ã€‚å› æ­¤ï¼Œåœ¨æ±½è½¦å’Œæ‰‹åŠ¨å˜é€Ÿå™¨æ¨¡å¼ä¸‹ï¼Œæ¯åŠ ä»‘çš„é‡Œç¨‹å°†ä»¥ç±»ä¼¼çš„æ–¹å¼å–å†³äºæ±½è½¦çš„é©¬åŠ›ã€‚</p><h1 id="æ—¶é—´åºåˆ—åˆ†æ"><a href="#æ—¶é—´åºåˆ—åˆ†æ" class="headerlink" title="æ—¶é—´åºåˆ—åˆ†æ"></a>æ—¶é—´åºåˆ—åˆ†æ</h1><p>æ—¶é—´åºåˆ—æ˜¯å°†ç»Ÿä¸€ç»Ÿè®¡å€¼æŒ‰ç…§æ—¶é—´å‘ç”Ÿçš„å…ˆåé¡ºåºæ¥è¿›è¡Œæ’åˆ—ï¼Œæ—¶é—´åºåˆ—åˆ†æçš„ä¸»è¦ç›®çš„æ˜¯æ ¹æ®å·²æœ‰æ•°æ®å¯¹æœªæ¥è¿›è¡Œé¢„æµ‹ã€‚</p><p>ä¸€ä¸ªç¨³å®šçš„æ—¶é—´åºåˆ—ä¸­å¸¸å¸¸åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼Œé‚£ä¹ˆå°±æ˜¯ï¼šæœ‰è§„å¾‹çš„æ—¶é—´åºåˆ— + å™ªå£°ã€‚æ‰€ä»¥ï¼Œåœ¨ä»¥ä¸‹çš„æ–¹æ³•ä¸­ï¼Œä¸»è¦çš„ç›®çš„å°±æ˜¯å»è¿‡æ»¤å™ªå£°å€¼ï¼Œè®©æˆ‘ä»¬çš„æ—¶é—´åºåˆ—æ›´åŠ çš„æœ‰åˆ†ææ„ä¹‰ã€‚</p><p><strong>è¯­æ³•</strong></p><p>æ—¶é—´åºåˆ—åˆ†æä¸­ <code>ts()</code> å‡½æ•°çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">timeseries.object.name <span class="token operator">&lt;-</span> ts<span class="token punctuation">(</span>data<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> frequency<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>data</code> æ˜¯åŒ…å«åœ¨æ—¶é—´åºåˆ—ä¸­ä½¿ç”¨çš„å€¼çš„å‘é‡æˆ–çŸ©é˜µã€‚</li><li><code>start</code> ä»¥æ—¶é—´åºåˆ—æŒ‡å®šç¬¬ä¸€æ¬¡è§‚å¯Ÿçš„å¼€å§‹æ—¶é—´ã€‚</li><li><code>end</code> æŒ‡å®šæ—¶é—´åºåˆ—ä¸­æœ€åä¸€æ¬¡è§‚æµ‹çš„ç»“æŸæ—¶é—´ã€‚</li><li><code>frequency</code> æŒ‡å®šæ¯å•ä½æ—¶é—´çš„è§‚æµ‹æ•°ã€‚</li></ul><p>é™¤äº†å‚æ•° <code>data</code>ï¼Œæ‰€æœ‰å…¶ä»–å‚æ•°æ˜¯å¯é€‰çš„ã€‚</p><p><strong>æ—¶é—´åºåˆ—çš„é¢„å¤„ç†</strong></p><ol><li><p>å¹³ç¨³æ€§æ£€éªŒ</p><p> æ‹¿åˆ°ä¸€ä¸ªæ—¶é—´åºåˆ—ä¹‹åï¼Œæˆ‘ä»¬é¦–å…ˆè¦å¯¹å…¶ç¨³å®šæ€§è¿›è¡Œåˆ¤æ–­ï¼Œåªæœ‰éç™½å™ªå£°çš„ç¨³å®šæ€§æ—¶é—´åºåˆ—æ‰æœ‰åˆ†æçš„æ„ä¹‰ä»¥åŠé¢„æµ‹æœªæ¥æ•°æ®çš„ä»·å€¼ã€‚</p><p> æ‰€è°“å¹³ç¨³ï¼Œæ˜¯æŒ‡ç»Ÿè®¡å€¼åœ¨ä¸€ä¸ªå¸¸æ•°ä¸Šä¸‹æ³¢åŠ¨å¹¶ä¸”æ³¢åŠ¨èŒƒå›´æ˜¯æœ‰ç•Œé™çš„ã€‚å¦‚æœæœ‰æ˜æ˜¾çš„è¶‹åŠ¿æˆ–è€…å‘¨æœŸæ€§ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸ç¨³å®šçš„ã€‚ä¸€èˆ¬åˆ¤æ–­æœ‰ä¸‰ç§æ–¹æ³•ï¼š</p><ul><li>ç”»å‡ºæ—¶é—´åºåˆ—çš„è¶‹åŠ¿å›¾ï¼Œçœ‹è¶‹åŠ¿åˆ¤æ–­</li><li>ç”»è‡ªç›¸å…³å›¾å’Œåç›¸å…³å›¾ï¼Œå¹³ç¨³æ—¶é—´åºåˆ—çš„è‡ªç›¸å…³å›¾å’Œåç›¸å…³å›¾ï¼Œè¦ä¹ˆæ‹–å°¾ï¼Œè¦ä¹ˆæˆªå°¾ã€‚</li><li><p>æ£€éªŒåºåˆ—ä¸­æ˜¯å¦å­˜åœ¨å•ä½æ ¹ï¼Œå¦‚æœå­˜åœ¨å•ä½æ ¹ï¼Œå°±æ˜¯éå¹³ç¨³æ—¶é—´åºåˆ—ã€‚</p><p>åœ¨ R è¯­è¨€ä¸­ï¼Œ<code>DF</code> æ£€æµ‹æ˜¯ä¸€ç§æ£€æµ‹ç¨³å®šæ€§çš„æ–¹æ³•ï¼Œå¦‚æœå¾—å‡ºçš„ <code>P</code> å€¼å°äºä¸´ç•Œå€¼ï¼Œåˆ™è®¤ä¸ºæ˜¯æ•°åˆ—æ˜¯ç¨³å®šçš„ã€‚</p></li></ul></li><li><p>ç™½å™ªå£°æ£€éªŒ</p><p> ç™½å™ªå£°åºåˆ—ï¼Œåˆç§°ä¸ºçº¯éšæœºæ€§åºåˆ—ï¼Œåºåˆ—çš„å„ä¸ªå€¼ä¹‹é—´æ²¡æœ‰ä»»ä½•çš„ç›¸å…³å…³ç³»ï¼Œåºåˆ—åœ¨è¿›è¡Œæ— åºçš„éšæœºæ³¢åŠ¨ï¼Œå¯ä»¥ç»ˆæ­¢å¯¹è¯¥åºåˆ—çš„åˆ†æï¼Œå› ä¸ºä»ç™½å™ªå£°åºåˆ—ä¸­æ˜¯æå–ä¸åˆ°ä»»ä½•æœ‰ä»·å€¼çš„ä¿¡æ¯çš„ã€‚</p></li><li><p>å¹³ç¨³æ—¶é—´åºåˆ—çš„å‚æ•°ç‰¹ç‚¹</p><p> å‡å€¼å’Œæ–¹å·®ä¸ºå¸¸æ•°ï¼Œå¹¶ä¸”å…·æœ‰ä¸æ—¶é—´æ— å…³çš„è‡ªåæ–¹å·®ã€‚</p></li></ol><p><strong>æ—¶é—´åºåˆ—å»ºæ¨¡æ­¥éª¤</strong></p><ol><li><p>æ‹¿åˆ°è¢«åˆ†æçš„æ—¶é—´åºåˆ—æ•°æ®é›†ã€‚</p></li><li><p>å¯¹æ•°æ®ç»˜å›¾ï¼Œè§‚æµ‹å…¶å¹³ç¨³æ€§ã€‚è‹¥ä¸ºéå¹³ç¨³æ—¶é—´åºåˆ—è¦å…ˆè¿›è¡Œ <code>d</code> é˜¶å·®åˆ†è¿ç®—ååŒ–ä¸ºå¹³ç¨³æ—¶é—´åºåˆ—ï¼Œæ­¤å¤„çš„ <code>d</code> å³ä¸º <code>ARIMA(p,d,q)</code> æ¨¡å‹ä¸­çš„ <code>d</code>ï¼›è‹¥ä¸ºå¹³ç¨³åºåˆ—ï¼Œåˆ™ç”¨ <code>ARMA(p,q)</code> æ¨¡å‹ã€‚æ‰€ä»¥ <code>ARIMA(p,d,q)</code> æ¨¡å‹åŒºåˆ«äº <code>ARMA(p,q)</code> ä¹‹å¤„å°±åœ¨äºå‰è€…çš„è‡ªå›å½’éƒ¨åˆ†çš„ç‰¹å¾å¤šé¡¹å¼å«æœ‰ <code>d</code> ä¸ªå•ä½æ ¹ã€‚</p></li><li><p>å¯¹å¾—åˆ°çš„å¹³ç¨³æ—¶é—´åºåˆ—åˆ†åˆ«æ±‚å¾—å…¶è‡ªç›¸å…³ç³»æ•° <code>ACF</code> å’Œåè‡ªç›¸å…³ç³»æ•° <code>PACF</code>ï¼Œé€šè¿‡å¯¹è‡ªç›¸å…³å›¾å’Œåè‡ªç›¸å…³å›¾çš„åˆ†æï¼Œå¾—åˆ°æœ€ä½³çš„é˜¶å±‚ <code>p</code> å’Œé˜¶æ•° <code>q</code>ã€‚ç”±ä»¥ä¸Šå¾—åˆ°çš„ <code>d</code>ã€<code>q</code>ã€<code>p</code>ï¼Œå¾—åˆ° <code>ARIMA</code> æ¨¡å‹ã€‚</p></li><li><p>æ¨¡å‹è¯Šæ–­ã€‚è¿›è¡Œè¯Šæ–­åˆ†æï¼Œä»¥è¯å®æ‰€å¾—æ¨¡å‹ç¡®å®ä¸æ‰€è§‚å¯Ÿåˆ°çš„æ•°æ®ç‰¹å¾ç›¸ç¬¦ã€‚è‹¥ä¸ç›¸ç¬¦ï¼Œé‡æ–°å›åˆ°ç¬¬ 3 æ­¥ã€‚</p></li></ol><p><strong>å®ä¾‹</strong></p><p>è€ƒè™‘ä» 2012 å¹´ 1 æœˆå¼€å§‹çš„ä¸€ä¸ªåœ°æ–¹çš„å¹´é™é›¨é‡ç»†èŠ‚ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª R æ—¶é—´åºåˆ—å¯¹è±¡ä¸ºæœŸ 12 ä¸ªæœˆå¹¶ç»˜åˆ¶å®ƒã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Get the data points in form of a R vector.</span>rainfall <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">799</span><span class="token punctuation">,</span> <span class="token number">1174.8</span><span class="token punctuation">,</span> <span class="token number">865.1</span><span class="token punctuation">,</span> <span class="token number">1334.6</span><span class="token punctuation">,</span> <span class="token number">635.4</span><span class="token punctuation">,</span> <span class="token number">918.5</span><span class="token punctuation">,</span> <span class="token number">685.5</span><span class="token punctuation">,</span> <span class="token number">998.6</span><span class="token punctuation">,</span> <span class="token number">784.2</span><span class="token punctuation">,</span> <span class="token number">985</span><span class="token punctuation">,</span> <span class="token number">882.8</span><span class="token punctuation">,</span> <span class="token number">1071</span><span class="token punctuation">)</span><span class="token comment"># Convert it to a time series object.</span>rainfall.timeseries <span class="token operator">&lt;-</span> ts<span class="token punctuation">(</span>rainfall<span class="token punctuation">,</span> start <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">2012</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> frequency <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token comment"># Print the timeseries data.</span>print<span class="token punctuation">(</span>rainfall.timeseries<span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"rainfall.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot a graph of the time series.</span>plot<span class="token punctuation">(</span>rainfall.timeseries<span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœåŠå›¾è¡¨ï¼š</span>        Jan    Feb    Mar    Apr    May    Jun    Jul    Aug    Sep    Oct    Nov    Dec<span class="token number">2012</span>  <span class="token number">799.0</span> <span class="token number">1174.8</span>  <span class="token number">865.1</span> <span class="token number">1334.6</span>  <span class="token number">635.4</span>  <span class="token number">918.5</span>  <span class="token number">685.5</span>  <span class="token number">998.6</span>  <span class="token number">784.2</span>  <span class="token number">985.0</span>  <span class="token number">882.8</span> <span class="token number">1071.0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_statistics/rainfall.png" alt></p><p><strong>ä¸åŒçš„æ—¶é—´é—´éš”</strong></p><p><code>ts()</code> å‡½æ•°ä¸­çš„é¢‘ç‡å‚æ•°å€¼å†³å®šäº†æµ‹é‡æ•°æ®ç‚¹çš„æ—¶é—´é—´éš”ã€‚å€¼ä¸º 12 è¡¨ç¤ºæ—¶é—´åºåˆ—ä¸º 12 ä¸ªæœˆã€‚å…¶ä»–å€¼åŠå…¶å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li><code>frequency = 12</code>ï¼šæŒ‡å®šä¸€å¹´ä¸­æ¯ä¸ªæœˆçš„æ•°æ®ç‚¹ã€‚</li><li><code>frequency = 4</code>ï¼šæ¯å¹´çš„æ¯ä¸ªå­£åº¦çš„æ•°æ®ç‚¹ã€‚</li><li><code>frequency = 6</code>ï¼šæ¯å°æ—¶çš„ 10 åˆ†é’Ÿçš„æ•°æ®ç‚¹ã€‚</li><li><code>frequency = 24 * 6</code>ï¼šå°†ä¸€å¤©çš„æ¯ 10 åˆ†é’Ÿçš„æ•°æ®ç‚¹å›ºå®šã€‚</li></ul><p><strong>å¤šæ—¶é—´åºåˆ—</strong></p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†ä¸¤ä¸ªç³»åˆ—ç»„åˆæˆä¸€ä¸ªçŸ©é˜µï¼Œåœ¨ä¸€ä¸ªå›¾è¡¨ä¸­ç»˜åˆ¶å¤šä¸ªæ—¶é—´åºåˆ—ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Get the data points in form of a R vector.</span>rainfall1 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">799</span><span class="token punctuation">,</span> <span class="token number">1174.8</span><span class="token punctuation">,</span> <span class="token number">865.1</span><span class="token punctuation">,</span> <span class="token number">1334.6</span><span class="token punctuation">,</span> <span class="token number">635.4</span><span class="token punctuation">,</span> <span class="token number">918.5</span><span class="token punctuation">,</span> <span class="token number">685.5</span><span class="token punctuation">,</span> <span class="token number">998.6</span><span class="token punctuation">,</span> <span class="token number">784.2</span><span class="token punctuation">,</span> <span class="token number">985</span><span class="token punctuation">,</span> <span class="token number">882.8</span><span class="token punctuation">,</span> <span class="token number">1071</span><span class="token punctuation">)</span>rainfall2 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">655</span><span class="token punctuation">,</span> <span class="token number">1306.9</span><span class="token punctuation">,</span> <span class="token number">1323.4</span><span class="token punctuation">,</span> <span class="token number">1172.2</span><span class="token punctuation">,</span> <span class="token number">562.2</span><span class="token punctuation">,</span> <span class="token number">824</span><span class="token punctuation">,</span> <span class="token number">822.4</span><span class="token punctuation">,</span> <span class="token number">1265.5</span><span class="token punctuation">,</span> <span class="token number">799.6</span><span class="token punctuation">,</span> <span class="token number">1105.6</span><span class="token punctuation">,</span> <span class="token number">1106.7</span><span class="token punctuation">,</span> <span class="token number">1337.8</span><span class="token punctuation">)</span><span class="token comment"># Convert them to a matrix.</span>combined.rainfall <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span>rainfall1<span class="token punctuation">,</span> rainfall2<span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token comment"># Convert it to a time series object.</span>rainfall.timeseries <span class="token operator">&lt;-</span> ts<span class="token punctuation">(</span>combined.rainfall<span class="token punctuation">,</span> start <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">2012</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> frequency <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token comment"># Print the timeseries data.</span>print<span class="token punctuation">(</span>rainfall.timeseries<span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"rainfall_combined.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot a graph of the time series.</span>plot<span class="token punctuation">(</span>rainfall.timeseries<span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"Multiple Time Series"</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœåŠå›¾è¡¨ï¼š</span>         Series <span class="token number">1</span> Series <span class="token number">2</span>Jan <span class="token number">2012</span>    <span class="token number">799.0</span>    <span class="token number">655.0</span>Feb <span class="token number">2012</span>   <span class="token number">1174.8</span>   <span class="token number">1306.9</span>Mar <span class="token number">2012</span>    <span class="token number">865.1</span>   <span class="token number">1323.4</span>Apr <span class="token number">2012</span>   <span class="token number">1334.6</span>   <span class="token number">1172.2</span>May <span class="token number">2012</span>    <span class="token number">635.4</span>    <span class="token number">562.2</span>Jun <span class="token number">2012</span>    <span class="token number">918.5</span>    <span class="token number">824.0</span>Jul <span class="token number">2012</span>    <span class="token number">685.5</span>    <span class="token number">822.4</span>Aug <span class="token number">2012</span>    <span class="token number">998.6</span>   <span class="token number">1265.5</span>Sep <span class="token number">2012</span>    <span class="token number">784.2</span>    <span class="token number">799.6</span>Oct <span class="token number">2012</span>    <span class="token number">985.0</span>   <span class="token number">1105.6</span>Nov <span class="token number">2012</span>    <span class="token number">882.8</span>   <span class="token number">1106.7</span>Dec <span class="token number">2012</span>   <span class="token number">1071.0</span>   <span class="token number">1337.8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_statistics/rainfall_combined.png" alt></p><h1 id="éçº¿æ€§æœ€å°äºŒä¹˜"><a href="#éçº¿æ€§æœ€å°äºŒä¹˜" class="headerlink" title="éçº¿æ€§æœ€å°äºŒä¹˜"></a>éçº¿æ€§æœ€å°äºŒä¹˜</h1><p>å½“æ¨¡æ‹ŸçœŸå®ä¸–ç•Œæ•°æ®ç”¨äºå›å½’åˆ†ææ—¶ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œå¾ˆå°‘æƒ…å†µä¸‹ï¼Œæ¨¡å‹çš„æ–¹ç¨‹æ˜¯ç»™å‡ºçº¿æ€§å›¾çš„çº¿æ€§æ–¹ç¨‹ã€‚å¤§å¤šæ•°æ—¶å€™ï¼ŒçœŸå®ä¸–ç•Œæ•°æ®æ¨¡å‹çš„æ–¹ç¨‹æ¶‰åŠæ›´é«˜ç¨‹åº¦çš„æ•°å­¦å‡½æ•°ï¼Œå¦‚ <code>3</code> çš„æŒ‡æ•°æˆ– <code>sin</code> å‡½æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¨¡å‹çš„å›¾ç»™å‡ºäº†æ›²çº¿è€Œä¸æ˜¯çº¿ã€‚çº¿æ€§å’Œéçº¿æ€§å›å½’çš„ç›®çš„æ˜¯è°ƒæ•´æ¨¡å‹å‚æ•°çš„å€¼ï¼Œä»¥æ‰¾åˆ°æœ€æ¥è¿‘æ‚¨çš„æ•°æ®çš„çº¿æˆ–æ›²çº¿ã€‚åœ¨æ‰¾åˆ°è¿™äº›å€¼æ—¶ï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿä»¥è‰¯å¥½çš„ç²¾ç¡®åº¦ä¼°è®¡å“åº”å˜é‡ã€‚</p><p>åœ¨æœ€å°äºŒä¹˜å›å½’ä¸­ï¼Œæˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªå›å½’æ¨¡å‹ï¼Œå…¶ä¸­æ¥è‡ªå›å½’æ›²çº¿çš„ä¸åŒç‚¹çš„å‚ç›´è·ç¦»çš„å¹³æ–¹å’Œè¢«æœ€å°åŒ–ã€‚æˆ‘ä»¬é€šå¸¸ä»å®šä¹‰çš„æ¨¡å‹å¼€å§‹ï¼Œå¹¶å‡è®¾ç³»æ•°çš„ä¸€äº›å€¼ã€‚ç„¶åæˆ‘ä»¬åº”ç”¨ R è¯­è¨€çš„ <code>nls()</code> å‡½æ•°è·å¾—æ›´å‡†ç¡®çš„å€¼ä»¥åŠç½®ä¿¡åŒºé—´ã€‚</p><p><strong>è¯­æ³•</strong></p><p>åœ¨ R è¯­è¨€ä¸­åˆ›å»ºéçº¿æ€§æœ€å°äºŒä¹˜æµ‹è¯•çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">nls<span class="token punctuation">(</span>formula<span class="token punctuation">,</span> data<span class="token punctuation">,</span> start<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>formula</code> æ˜¯åŒ…æ‹¬å˜é‡å’Œå‚æ•°çš„éçº¿æ€§æ¨¡å‹å…¬å¼ã€‚</li><li><code>data</code> æ˜¯ç”¨äºè®¡ç®—å…¬å¼ä¸­å˜é‡çš„æ•°æ®æ¡†ã€‚</li><li><code>start</code> æ˜¯èµ·å§‹ä¼°è®¡çš„å‘½ååˆ—è¡¨æˆ–å‘½åæ•°å­—å‘é‡ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p>æˆ‘ä»¬å°†è€ƒè™‘ä¸€ä¸ªå‡è®¾å…¶ç³»æ•°çš„åˆå§‹å€¼çš„éçº¿æ€§æ¨¡å‹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°è¿™äº›å‡è®¾å€¼çš„ç½®ä¿¡åŒºé—´æ˜¯ä»€ä¹ˆï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥åˆ¤æ–­è¿™äº›å€¼åœ¨æ¨¡å‹ä¸­æœ‰å¤šå¥½ã€‚</p><p>æ‰€ä»¥è®©æˆ‘ä»¬è€ƒè™‘ä»¥ä¸‹çš„æ–¹ç¨‹ <code>a = b1*x^2 + b2</code>ã€‚</p><p>è®©æˆ‘ä»¬å‡è®¾åˆå§‹ç³»æ•°ä¸º <code>b1 = 1</code> å’Œ <code>b2 = 3</code>ï¼Œå¹¶å°†è¿™äº›å€¼æ‹Ÿåˆåˆ° <code>nls()</code> å‡½æ•°ä¸­ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">1.6</span><span class="token punctuation">,</span> <span class="token number">2.1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2.23</span><span class="token punctuation">,</span> <span class="token number">3.71</span><span class="token punctuation">,</span> <span class="token number">3.25</span><span class="token punctuation">,</span> <span class="token number">3.4</span><span class="token punctuation">,</span> <span class="token number">3.86</span><span class="token punctuation">,</span> <span class="token number">1.19</span><span class="token punctuation">,</span> <span class="token number">2.21</span><span class="token punctuation">)</span>y <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">5.19</span><span class="token punctuation">,</span> <span class="token number">7.43</span><span class="token punctuation">,</span> <span class="token number">6.94</span><span class="token punctuation">,</span> <span class="token number">8.11</span><span class="token punctuation">,</span> <span class="token number">18.75</span><span class="token punctuation">,</span> <span class="token number">14.88</span><span class="token punctuation">,</span> <span class="token number">16.06</span><span class="token punctuation">,</span> <span class="token number">19.12</span><span class="token punctuation">,</span> <span class="token number">3.21</span><span class="token punctuation">,</span> <span class="token number">7.58</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"nls.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot these values.</span>plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token comment"># Take the assumed values and fit into the model.</span>model <span class="token operator">&lt;-</span> nls<span class="token punctuation">(</span>y <span class="token operator">~</span> b1<span class="token operator">*</span>x<span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> b2<span class="token punctuation">,</span> start <span class="token operator">=</span> list<span class="token punctuation">(</span>b1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b2 <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Plot the chart with new data by fitting it to a prediction from 100 data points.</span>new.data <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>x <span class="token operator">=</span> seq<span class="token punctuation">(</span>min<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> max<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> len <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>lines<span class="token punctuation">(</span>new.data<span class="token operator">$</span>x<span class="token punctuation">,</span> predict<span class="token punctuation">(</span>model<span class="token punctuation">,</span> newdata <span class="token operator">=</span> new.data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># Get the sum of the squared residuals.</span>print<span class="token punctuation">(</span>sum<span class="token punctuation">(</span>resid<span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Get the confidence intervals on the chosen values of the coefficients.</span>print<span class="token punctuation">(</span>confint<span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœåŠå›¾è¡¨ï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1.081935</span>Waiting <span class="token keyword">for</span> profiling to be done<span class="token ellipsis">...</span>       <span class="token number">2.5</span>%    <span class="token number">97.5</span>%b1 <span class="token number">1.137708</span> <span class="token number">1.253135</span>b2 <span class="token number">1.497364</span> <span class="token number">2.496484</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_statistics/nls.png" alt></p><p>æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œ<code>b1</code> çš„å€¼æ›´æ¥è¿‘ <code>1</code>ï¼Œè€Œ <code>b2</code> çš„å€¼æ›´æ¥è¿‘ <code>2</code> è€Œä¸æ˜¯ <code>3</code>ã€‚</p><h1 id="å†³ç­–æ ‘"><a href="#å†³ç­–æ ‘" class="headerlink" title="å†³ç­–æ ‘"></a>å†³ç­–æ ‘</h1><p>å†³ç­–æ ‘æ˜¯ä»¥æ ‘çš„å½¢å¼è¡¨ç¤ºé€‰æ‹©åŠå…¶ç»“æœçš„å›¾ã€‚å›¾ä¸­çš„èŠ‚ç‚¹è¡¨ç¤ºäº‹ä»¶æˆ–é€‰æ‹©ï¼Œå¹¶ä¸”å›¾çš„è¾¹ç¼˜è¡¨ç¤ºå†³ç­–è§„åˆ™æˆ–æ¡ä»¶ã€‚å®ƒä¸»è¦ç”¨äºä½¿ç”¨Rçš„æœºå™¨å­¦ä¹ å’Œæ•°æ®æŒ–æ˜åº”ç”¨ç¨‹åºã€‚</p><p>å†³ç­–æ ‘çš„ä½¿ç”¨çš„ä¾‹å­æ˜¯ï¼šé¢„æµ‹ç”µå­é‚®ä»¶æ˜¯åƒåœ¾é‚®ä»¶æˆ–éåƒåœ¾é‚®ä»¶ï¼Œé¢„æµ‹è‚¿ç˜¤ç™Œå˜ï¼Œæˆ–è€…åŸºäºè¿™äº›å› ç´ é¢„æµ‹è´·æ¬¾çš„ä¿¡ç”¨é£é™©ã€‚é€šå¸¸ï¼Œä½¿ç”¨è§‚æµ‹æ•°æ®ï¼ˆä¹Ÿç§°ä¸ºè®­ç»ƒæ•°æ®ï¼‰æ¥åˆ›å»ºæ¨¡å‹ã€‚ç„¶åä½¿ç”¨ä¸€ç»„éªŒè¯æ•°æ®æ¥éªŒè¯å’Œæ”¹è¿›æ¨¡å‹ã€‚R å…·æœ‰ç”¨äºåˆ›å»ºå’Œå¯è§†åŒ–å†³ç­–æ ‘çš„åŒ…ã€‚å¯¹äºæ–°çš„é¢„æµ‹å˜é‡é›†åˆï¼Œæˆ‘ä»¬ä½¿ç”¨æ­¤æ¨¡å‹æ¥ç¡®å®š R åŒ… <code>party</code> ç”¨äºåˆ›å»ºå†³ç­–æ ‘ã€‚</p><p><strong>å®‰è£… R è¯­è¨€åŒ…</strong></p><p>åœ¨ R è¯­è¨€æ§åˆ¶å°ä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…è½¯ä»¶åŒ…ã€‚æ‚¨è¿˜å¿…é¡»å®‰è£…ç›¸å…³è½¯ä»¶åŒ…ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">install.packages<span class="token punctuation">(</span><span class="token string">"party"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><code>party</code> åŒ…å…·æœ‰ç”¨äºåˆ›å»ºå’Œåˆ†æå†³ç­–æ ‘çš„å‡½æ•° <code>ctree()</code>ã€‚</p><p><strong>è¯­æ³•</strong></p><p>åœ¨ R ä¸­åˆ›å»ºå†³ç­–æ ‘çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">ctree<span class="token punctuation">(</span>formula<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>formula</code> æ˜¯æè¿°é¢„æµ‹å˜é‡å’Œå“åº”å˜é‡çš„å…¬å¼ã€‚</li><li><code>data</code> æ˜¯æ‰€ä½¿ç”¨çš„æ•°æ®é›†çš„åç§°ã€‚</li></ul><p><strong>è¾“å…¥æ•°æ®</strong></p><p>æˆ‘ä»¬å°†ä½¿ç”¨åä¸º <code>readingSkills</code> çš„ R å†…ç½®æ•°æ®é›†æ¥åˆ›å»ºå†³ç­–æ ‘ã€‚å®ƒæè¿°äº†æŸäººçš„ <code>readingSkills</code> çš„åˆ†æ•°ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“å˜é‡ <code>å¹´é¾„</code>ï¼Œ <code>shoesize</code>ï¼Œ<code>åˆ†æ•°</code>ï¼Œä»¥åŠ<code>è¯¥äººæ˜¯å¦ä¸ºæ¯è¯­è€…</code>ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the party package. It will automatically load other dependent packages.</span>library<span class="token punctuation">(</span>party<span class="token punctuation">)</span><span class="token comment"># Print some records from data set readingSkills.</span>print<span class="token punctuation">(</span>head<span class="token punctuation">(</span>readingSkills<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  nativeSpeaker age shoeSize    score<span class="token number">1</span>           yes   <span class="token number">5</span> <span class="token number">24.83189</span> <span class="token number">32.29385</span><span class="token number">2</span>           yes   <span class="token number">6</span> <span class="token number">25.95238</span> <span class="token number">36.63105</span><span class="token number">3</span>            no  <span class="token number">11</span> <span class="token number">30.42170</span> <span class="token number">49.60593</span><span class="token number">4</span>           yes   <span class="token number">7</span> <span class="token number">28.66450</span> <span class="token number">40.28456</span><span class="token number">5</span>           yes  <span class="token number">11</span> <span class="token number">31.88207</span> <span class="token number">55.46085</span><span class="token number">6</span>           yes  <span class="token number">10</span> <span class="token number">30.07843</span> <span class="token number">52.83124</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>å®ä¾‹</strong></p><p>æˆ‘ä»¬å°†ä½¿ç”¨ <code>ctree()</code> å‡½æ•°åˆ›å»ºå†³ç­–æ ‘å¹¶æŸ¥çœ‹å…¶å›¾å½¢ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the party package. It will automatically load other dependent packages.</span>library<span class="token punctuation">(</span>party<span class="token punctuation">)</span><span class="token comment"># Create the input data frame.</span>input.dat <span class="token operator">&lt;-</span> readingSkills<span class="token punctuation">[</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">105</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"decision_tree.png"</span><span class="token punctuation">)</span><span class="token comment"># Create the tree.</span>output.tree <span class="token operator">&lt;-</span> ctree<span class="token punctuation">(</span>nativeSpeaker <span class="token operator">~</span> age <span class="token operator">+</span> shoeSize <span class="token operator">+</span> score<span class="token punctuation">,</span> data <span class="token operator">=</span> input.dat<span class="token punctuation">)</span><span class="token comment"># Plot the tree.</span>plot<span class="token punctuation">(</span>output.tree<span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹å›¾è¡¨ï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_statistics/decision_tree.png" alt></p><p><strong>ç»“è®º</strong></p><p>ä»ä¸Šé¢æ˜¾ç¤ºçš„å†³ç­–æ ‘ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œå…¶ <code>readingSkills</code> åˆ†æ•°ä½äº <code>38.3</code> å’Œå¹´é¾„è¶…è¿‡ <code>6</code> çš„äººä¸æ˜¯ä¸€ä¸ªæ¯è¯­è€…ã€‚</p><h1 id="éšæœºæ£®æ—"><a href="#éšæœºæ£®æ—" class="headerlink" title="éšæœºæ£®æ—"></a>éšæœºæ£®æ—</h1><p>åœ¨éšæœºæ£®æ—æ–¹æ³•ä¸­ï¼Œåˆ›å»ºå¤§é‡çš„å†³ç­–æ ‘ã€‚æ¯ä¸ªè§‚å¯Ÿè¢«é¦ˆå…¥æ¯ä¸ªå†³ç­–æ ‘ã€‚æ¯ä¸ªè§‚å¯Ÿçš„æœ€å¸¸è§çš„ç»“æœè¢«ç”¨ä½œæœ€ç»ˆè¾“å‡ºã€‚æ–°çš„è§‚å¯Ÿç»“æœè¢«é¦ˆå…¥æ‰€æœ‰çš„æ ‘å¹¶ä¸”å¯¹æ¯ä¸ªåˆ†ç±»æ¨¡å‹å–å¤šæ•°æŠ•ç¥¨ã€‚</p><p>å¯¹æ„å»ºæ ‘æ—¶æœªä½¿ç”¨çš„æƒ…å†µè¿›è¡Œé”™è¯¯ä¼°è®¡ã€‚è¿™ç§°ä¸º <code>OOBï¼ˆè¢‹å¤–ï¼‰</code> è¯¯å·®ä¼°è®¡ï¼Œå…¶è¢«æåŠä¸ºç™¾åˆ†æ¯”ã€‚</p><p>R è¯­è¨€åŒ… <code>randomForest</code> ç”¨äºåˆ›å»ºéšæœºæ£®æ—ã€‚</p><p><strong>å®‰è£… R åŒ…</strong></p><p>åœ¨ R è¯­è¨€æ§åˆ¶å°ä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…è½¯ä»¶åŒ…ã€‚æ‚¨è¿˜å¿…é¡»å®‰è£…ç›¸å…³è½¯ä»¶åŒ…ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">install.packages<span class="token punctuation">(</span><span class="token string">"randomForest"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>åŒ… <code>randomForest</code> å…·æœ‰å‡½æ•° <code>randomForest()</code>ï¼Œç”¨äºåˆ›å»ºå’Œåˆ†æéšæœºæ£®æ—ã€‚</p><p><strong>è¯­æ³•</strong></p><p>åœ¨ R è¯­è¨€ä¸­åˆ›å»ºéšæœºæ£®æ—çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">randomForest<span class="token punctuation">(</span>formula<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>formula</code> æ˜¯æè¿°é¢„æµ‹å˜é‡å’Œå“åº”å˜é‡çš„å…¬å¼ã€‚</li><li><code>data</code> æ˜¯æ‰€ä½¿ç”¨çš„æ•°æ®é›†çš„åç§°ã€‚</li></ul><p><strong>è¾“å…¥æ•°æ®</strong></p><p>æˆ‘ä»¬å°†ä½¿ç”¨åä¸º <code>readingSkills</code> çš„ R è¯­è¨€å†…ç½®æ•°æ®é›†æ¥åˆ›å»ºå†³ç­–æ ‘ã€‚å®ƒæè¿°äº†æŸäººçš„ <code>readingSkills</code> çš„åˆ†æ•°ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“å˜é‡ <code>age</code>ï¼Œ<code>shoesize</code>ï¼Œ<code>score</code>ï¼Œä»¥åŠ<code>è¯¥äººæ˜¯å¦æ˜¯æ¯è¯­è€…</code>ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the party package. It will automatically load other required packages.</span>library<span class="token punctuation">(</span>party<span class="token punctuation">)</span><span class="token comment"># Print some records from data set readingSkills.</span>print<span class="token punctuation">(</span>head<span class="token punctuation">(</span>readingSkills<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  nativeSpeaker age shoeSize    score<span class="token number">1</span>           yes   <span class="token number">5</span> <span class="token number">24.83189</span> <span class="token number">32.29385</span><span class="token number">2</span>           yes   <span class="token number">6</span> <span class="token number">25.95238</span> <span class="token number">36.63105</span><span class="token number">3</span>            no  <span class="token number">11</span> <span class="token number">30.42170</span> <span class="token number">49.60593</span><span class="token number">4</span>           yes   <span class="token number">7</span> <span class="token number">28.66450</span> <span class="token number">40.28456</span><span class="token number">5</span>           yes  <span class="token number">11</span> <span class="token number">31.88207</span> <span class="token number">55.46085</span><span class="token number">6</span>           yes  <span class="token number">10</span> <span class="token number">30.07843</span> <span class="token number">52.83124</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>å®ä¾‹</strong></p><p>æˆ‘ä»¬å°†ä½¿ç”¨ <code>randomForest()</code> å‡½æ•°æ¥åˆ›å»ºå†³ç­–æ ‘å¹¶æŸ¥çœ‹å®ƒçš„å›¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the party package. It will automatically load other required packages.</span>library<span class="token punctuation">(</span>party<span class="token punctuation">)</span>library<span class="token punctuation">(</span>randomForest<span class="token punctuation">)</span><span class="token comment"># Create the forest.</span>output.forest <span class="token operator">&lt;-</span> randomForest<span class="token punctuation">(</span>nativeSpeaker <span class="token operator">~</span> age <span class="token operator">+</span> shoeSize <span class="token operator">+</span> score<span class="token punctuation">,</span> data <span class="token operator">=</span> readingSkills<span class="token punctuation">)</span><span class="token comment"># View the forest results.</span>print<span class="token punctuation">(</span>output.forest<span class="token punctuation">)</span><span class="token comment"># Importance of each predictor.</span>print<span class="token punctuation">(</span>importance<span class="token punctuation">(</span>fit<span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>Call<span class="token operator">:</span> randomForest<span class="token punctuation">(</span>formula <span class="token operator">=</span> nativeSpeaker <span class="token operator">~</span> age <span class="token operator">+</span> shoeSize <span class="token operator">+</span> score<span class="token punctuation">,</span> data <span class="token operator">=</span> readingSkills<span class="token punctuation">)</span>                Type of random forest<span class="token operator">:</span> classification                     Number of trees<span class="token operator">:</span> <span class="token number">500</span>No. of variables tried at each split<span class="token operator">:</span> <span class="token number">1</span>        OOB estimate of  error rate<span class="token operator">:</span> <span class="token number">1.5</span>%Confusion matrix<span class="token operator">:</span>    no yes class.errorno  <span class="token number">99</span>   <span class="token number">1</span>        <span class="token number">0.01</span>yes  <span class="token number">2</span>  <span class="token number">98</span>        <span class="token number">0.02</span>         MeanDecreaseGiniage              <span class="token number">13.95406</span>shoeSize         <span class="token number">18.91006</span>score            <span class="token number">56.73051</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ç»“è®ºä»ä¸Šé¢æ˜¾ç¤ºçš„éšæœºæ£®æ—ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œé‹ç  <code>shoeSize</code> å’Œæˆç»© <code>score</code> æ˜¯å†³å®šå¦‚æœæŸäººæ˜¯æ¯è¯­è€…æˆ–ä¸æ˜¯æ¯è¯­çš„é‡è¦å› ç´ ã€‚æ­¤å¤–ï¼Œè¯¥æ¨¡å‹åªæœ‰ <code>1%</code> çš„è¯¯å·®ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥é¢„æµ‹ç²¾åº¦ä¸º <code>99%</code>ã€‚</p><h1 id="ç”Ÿå­˜åˆ†æ"><a href="#ç”Ÿå­˜åˆ†æ" class="headerlink" title="ç”Ÿå­˜åˆ†æ"></a>ç”Ÿå­˜åˆ†æ</h1><p>ç”Ÿå­˜åˆ†æå¤„ç†é¢„æµ‹ç‰¹å®šäº‹ä»¶å°†è¦å‘ç”Ÿçš„æ—¶é—´ã€‚å®ƒä¹Ÿè¢«ç§°ä¸ºæ•…éšœæ—¶é—´åˆ†ææˆ–åˆ†ææ­»äº¡æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œé¢„æµ‹æ‚£æœ‰ç™Œç—‡çš„äººå°†å­˜æ´»çš„å¤©æ•°æˆ–é¢„æµ‹æœºæ¢°ç³»ç»Ÿå°†å¤±è´¥çš„æ—¶é—´ã€‚</p><p>å‘½åä¸º <code>survival</code> çš„ R è¯­è¨€åŒ…ç”¨äºè¿›è¡Œç”Ÿå­˜åˆ†æã€‚æ­¤åŒ…åŒ…å«å‡½æ•° <code>Surv()</code>ï¼Œå®ƒå°†è¾“å…¥æ•°æ®ä½œä¸º R è¯­è¨€å…¬å¼ï¼Œå¹¶åœ¨é€‰æ‹©çš„å˜é‡ä¸­åˆ›å»ºä¸€ä¸ªç”Ÿå­˜å¯¹è±¡ç”¨äºåˆ†æã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨å‡½æ•° <code>survfit()</code> åˆ›å»ºä¸€ä¸ªåˆ†æå›¾ã€‚</p><p><strong>å®‰è£…è½¯ä»¶åŒ…</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">install.packages<span class="token punctuation">(</span><span class="token string">"survival"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>è¯­æ³•</strong></p><p>åœ¨ R è¯­è¨€ä¸­åˆ›å»ºç”Ÿå­˜åˆ†æçš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">Surv<span class="token punctuation">(</span>time<span class="token punctuation">,</span> event<span class="token punctuation">)</span>survfit<span class="token punctuation">(</span>formula<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>time</code> æ˜¯ç›´åˆ°äº‹ä»¶å‘ç”Ÿçš„è·Ÿè¸ªæ—¶é—´ã€‚</li><li><code>event</code> æŒ‡ç¤ºé¢„æœŸäº‹ä»¶çš„å‘ç”Ÿçš„çŠ¶æ€ã€‚</li><li><code>formula</code> æ˜¯é¢„æµ‹å˜é‡ä¹‹é—´çš„å…³ç³»ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p>æˆ‘ä»¬å°†è€ƒè™‘åœ¨ä¸Šé¢å®‰è£…çš„ <code>survival</code> åŒ…ä¸­å­˜åœ¨çš„åä¸º <code>pbc</code> çš„æ•°æ®é›†ã€‚å®ƒæè¿°äº†å…³äºå—è‚åŸå‘æ€§èƒ†æ±æ€§è‚ç¡¬åŒ– <code>PBC</code> å½±å“çš„äººçš„ç”Ÿå­˜æ•°æ®ç‚¹ã€‚åœ¨æ•°æ®é›†ä¸­å­˜åœ¨çš„è®¸å¤šåˆ—ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨å­—æ®µ <code>time</code> å’Œ <code>status</code>ã€‚æ—¶é—´è¡¨ç¤ºåœ¨æ¥å—è‚ç§»æ¤æˆ–æ‚£è€…æ­»äº¡çš„æ‚£è€…çš„ç™»è®°å’Œäº‹ä»¶çš„è¾ƒæ—©ä¹‹é—´çš„å¤©æ•°ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the library.</span>library<span class="token punctuation">(</span><span class="token string">"survival"</span><span class="token punctuation">)</span><span class="token comment"># Print first few rows.</span>print<span class="token punctuation">(</span>head<span class="token punctuation">(</span>pbc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  id time status trt      age sex ascites hepato spiders edema bili chol albumin copper alk.phos    ast trig platelet protime stage<span class="token number">1</span>  <span class="token number">1</span>  <span class="token number">400</span>      <span class="token number">2</span>   <span class="token number">1</span> <span class="token number">58.76523</span>   f       <span class="token number">1</span>      <span class="token number">1</span>       <span class="token number">1</span>   <span class="token number">1.0</span> <span class="token number">14.5</span>  <span class="token number">261</span>    <span class="token number">2.60</span>    <span class="token number">156</span>   <span class="token number">1718.0</span> <span class="token number">137.95</span>  <span class="token number">172</span>      <span class="token number">190</span>    <span class="token number">12.2</span>     <span class="token number">4</span><span class="token number">2</span>  <span class="token number">2</span> <span class="token number">4500</span>      <span class="token number">0</span>   <span class="token number">1</span> <span class="token number">56.44627</span>   f       <span class="token number">0</span>      <span class="token number">1</span>       <span class="token number">1</span>   <span class="token number">0.0</span>  <span class="token number">1.1</span>  <span class="token number">302</span>    <span class="token number">4.14</span>     <span class="token number">54</span>   <span class="token number">7394.8</span> <span class="token number">113.52</span>   <span class="token number">88</span>      <span class="token number">221</span>    <span class="token number">10.6</span>     <span class="token number">3</span><span class="token number">3</span>  <span class="token number">3</span> <span class="token number">1012</span>      <span class="token number">2</span>   <span class="token number">1</span> <span class="token number">70.07255</span>   m       <span class="token number">0</span>      <span class="token number">0</span>       <span class="token number">0</span>   <span class="token number">0.5</span>  <span class="token number">1.4</span>  <span class="token number">176</span>    <span class="token number">3.48</span>    <span class="token number">210</span>    <span class="token number">516.0</span>  <span class="token number">96.10</span>   <span class="token number">55</span>      <span class="token number">151</span>    <span class="token number">12.0</span>     <span class="token number">4</span><span class="token number">4</span>  <span class="token number">4</span> <span class="token number">1925</span>      <span class="token number">2</span>   <span class="token number">1</span> <span class="token number">54.74059</span>   f       <span class="token number">0</span>      <span class="token number">1</span>       <span class="token number">1</span>   <span class="token number">0.5</span>  <span class="token number">1.8</span>  <span class="token number">244</span>    <span class="token number">2.54</span>     <span class="token number">64</span>   <span class="token number">6121.8</span>  <span class="token number">60.63</span>   <span class="token number">92</span>      <span class="token number">183</span>    <span class="token number">10.3</span>     <span class="token number">4</span><span class="token number">5</span>  <span class="token number">5</span> <span class="token number">1504</span>      <span class="token number">1</span>   <span class="token number">2</span> <span class="token number">38.10541</span>   f       <span class="token number">0</span>      <span class="token number">1</span>       <span class="token number">1</span>   <span class="token number">0.0</span>  <span class="token number">3.4</span>  <span class="token number">279</span>    <span class="token number">3.53</span>    <span class="token number">143</span>    <span class="token number">671.0</span> <span class="token number">113.15</span>   <span class="token number">72</span>      <span class="token number">136</span>    <span class="token number">10.9</span>     <span class="token number">3</span><span class="token number">6</span>  <span class="token number">6</span> <span class="token number">2503</span>      <span class="token number">2</span>   <span class="token number">2</span> <span class="token number">66.25873</span>   f       <span class="token number">0</span>      <span class="token number">1</span>       <span class="token number">0</span>   <span class="token number">0.0</span>  <span class="token number">0.8</span>  <span class="token number">248</span>    <span class="token number">3.98</span>     <span class="token number">50</span>    <span class="token number">944.0</span>  <span class="token number">93.00</span>   <span class="token number">63</span>       <span class="token keyword">NA</span>    <span class="token number">11.0</span>     <span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä»ä¸Šè¿°æ•°æ®ï¼Œæˆ‘ä»¬æ­£åœ¨è€ƒè™‘åˆ†æçš„æ—¶é—´å’ŒçŠ¶æ€ã€‚</p><p><strong>åº”ç”¨ <code>Surv()</code> å’Œ <code>survfit()</code> å‡½æ•°</strong></p><p>ç°åœ¨æˆ‘ä»¬ç»§ç»­åº”ç”¨ <code>Surv()</code> å‡½æ•°åˆ°ä¸Šé¢çš„æ•°æ®é›†ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªå°†æ˜¾ç¤ºè¶‹åŠ¿å›¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the library.</span>library<span class="token punctuation">(</span><span class="token string">"survival"</span><span class="token punctuation">)</span><span class="token comment"># Create the survival object. </span>survfit<span class="token punctuation">(</span>Surv<span class="token punctuation">(</span>pbc<span class="token operator">$</span>time<span class="token punctuation">,</span> pbc<span class="token operator">$</span>status <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">~</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"survival.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the graph. </span>plot<span class="token punctuation">(</span>survfit<span class="token punctuation">(</span>Surv<span class="token punctuation">(</span>pbc<span class="token operator">$</span>time<span class="token punctuation">,</span> pbc<span class="token operator">$</span>status <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">~</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœåŠå›¾è¡¨ï¼š</span>Call<span class="token operator">:</span> survfit<span class="token punctuation">(</span>formula <span class="token operator">=</span> Surv<span class="token punctuation">(</span>pbc<span class="token operator">$</span>time<span class="token punctuation">,</span> pbc<span class="token operator">$</span>status <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">~</span> <span class="token number">1</span><span class="token punctuation">)</span>      n  events  median <span class="token number">0.95L</span>CL <span class="token number">0.95</span>UCL     <span class="token number">418</span>     <span class="token number">161</span>    <span class="token number">3395</span>    <span class="token number">3090</span>    <span class="token number">3853</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_statistics/survival.png" alt></p><p>ä¸Šå›¾ä¸­çš„è¶‹åŠ¿æœ‰åŠ©äºæˆ‘ä»¬é¢„æµ‹åœ¨ç‰¹å®šå¤©æ•°ç»“æŸæ—¶çš„ç”Ÿå­˜æ¦‚ç‡ã€‚</p><h1 id="å¡æ–¹æ£€éªŒ"><a href="#å¡æ–¹æ£€éªŒ" class="headerlink" title="å¡æ–¹æ£€éªŒ"></a>å¡æ–¹æ£€éªŒ</h1><p>å¡æ–¹æ£€éªŒæ˜¯ä¸€ç§ç¡®å®šä¸¤ä¸ªåˆ†ç±»å˜é‡ä¹‹é—´æ˜¯å¦å­˜åœ¨æ˜¾ç€ç›¸å…³æ€§çš„ç»Ÿè®¡æ–¹æ³•ã€‚è¿™ä¸¤ä¸ªå˜é‡åº”è¯¥æ¥è‡ªç›¸åŒçš„äººå£ï¼Œä»–ä»¬åº”è¯¥æ˜¯ç±»ä¼¼ï¼š<code>æ˜¯/å¦</code>ï¼Œ<code>ç”·/å¥³</code>ï¼Œ<code>çº¢/ç»¿</code> ç­‰ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹ä¸€ä¸ªè§‚å¯Ÿäººä»¬çš„å†°æ·‡æ·‹è´­ä¹°æ¨¡å¼çš„æ•°æ®é›†ï¼Œå¹¶å°è¯•å°†ä¸€ä¸ªäººçš„æ€§åˆ«ä¸ä»–ä»¬å–œæ¬¢çš„å†°æ·‡æ·‹çš„å‘³é“ç›¸å…³è”ã€‚å¦‚æœå‘ç°ç›¸å…³æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡äº†è§£è®¿é—®çš„äººçš„æ€§åˆ«çš„æ•°é‡æ¥è®¡åˆ’é€‚å½“çš„å‘³é“åº“å­˜ã€‚</p><p><strong>è¯­æ³•</strong></p><p>ç”¨äºæ‰§è¡Œå¡æ–¹æ£€éªŒçš„å‡½æ•°æ˜¯ <code>chisq.test()</code>ã€‚</p><p>åœ¨ R è¯­è¨€ä¸­åˆ›å»ºå¡æ–¹æ£€éªŒçš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">chisq.test<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>data</code> æ˜¯ä»¥åŒ…å«è§‚å¯Ÿä¸­å˜é‡çš„è®¡æ•°å€¼çš„è¡¨çš„å½¢å¼çš„æ•°æ®ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p>æˆ‘ä»¬å°†åœ¨ <code>MASS</code> åŒ…ä¸­è·å– <code>Cars93</code> æ•°æ®ï¼Œä»£è¡¨ 1993 å¹´ä¸åŒå‹å·æ±½è½¦çš„é”€å”®é¢ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">library<span class="token punctuation">(</span><span class="token string">"MASS"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>str<span class="token punctuation">(</span>Cars93<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token string">'data.frame'</span><span class="token operator">:</span><span class="token number">93</span> obs. of  <span class="token number">27</span> variables<span class="token operator">:</span> <span class="token operator">$</span> Manufacturer      <span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">32</span> levels <span class="token string">"Acura"</span><span class="token punctuation">,</span><span class="token string">"Audi"</span><span class="token punctuation">,</span>..<span class="token operator">:</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">4</span> <span class="token number">4</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Model             <span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">93</span> levels <span class="token string">"100"</span><span class="token punctuation">,</span><span class="token string">"190E"</span><span class="token punctuation">,</span><span class="token string">"240"</span><span class="token punctuation">,</span>..<span class="token operator">:</span> <span class="token number">49</span> <span class="token number">56</span> <span class="token number">9</span> <span class="token number">1</span> <span class="token number">6</span> <span class="token number">24</span> <span class="token number">54</span> <span class="token number">74</span> <span class="token number">73</span> <span class="token number">35</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Type              <span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">6</span> levels <span class="token string">"Compact"</span><span class="token punctuation">,</span><span class="token string">"Large"</span><span class="token punctuation">,</span>..<span class="token operator">:</span> <span class="token number">4</span> <span class="token number">3</span> <span class="token number">1</span> <span class="token number">3</span> <span class="token number">3</span> <span class="token number">3</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">2</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Min.Price         <span class="token operator">:</span> num  <span class="token number">12.9</span> <span class="token number">29.2</span> <span class="token number">25.9</span> <span class="token number">30.8</span> <span class="token number">23.7</span> <span class="token number">14.2</span> <span class="token number">19.9</span> <span class="token number">22.6</span> <span class="token number">26.3</span> <span class="token number">33</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Price             <span class="token operator">:</span> num  <span class="token number">15.9</span> <span class="token number">33.9</span> <span class="token number">29.1</span> <span class="token number">37.7</span> <span class="token number">30</span> <span class="token number">15.7</span> <span class="token number">20.8</span> <span class="token number">23.7</span> <span class="token number">26.3</span> <span class="token number">34.7</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Max.Price         <span class="token operator">:</span> num  <span class="token number">18.8</span> <span class="token number">38.7</span> <span class="token number">32.3</span> <span class="token number">44.6</span> <span class="token number">36.2</span> <span class="token number">17.3</span> <span class="token number">21.7</span> <span class="token number">24.9</span> <span class="token number">26.3</span> <span class="token number">36.3</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> MPG.city          <span class="token operator">:</span> int  <span class="token number">25</span> <span class="token number">18</span> <span class="token number">20</span> <span class="token number">19</span> <span class="token number">22</span> <span class="token number">22</span> <span class="token number">19</span> <span class="token number">16</span> <span class="token number">19</span> <span class="token number">16</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> MPG.highway       <span class="token operator">:</span> int  <span class="token number">31</span> <span class="token number">25</span> <span class="token number">26</span> <span class="token number">26</span> <span class="token number">30</span> <span class="token number">31</span> <span class="token number">28</span> <span class="token number">25</span> <span class="token number">27</span> <span class="token number">25</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> AirBags           <span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">3</span> levels <span class="token string">"Driver &amp; Passenger"</span><span class="token punctuation">,</span>..<span class="token operator">:</span> <span class="token number">3</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> DriveTrain        <span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">3</span> levels <span class="token string">"4WD"</span><span class="token punctuation">,</span><span class="token string">"Front"</span><span class="token punctuation">,</span>..<span class="token operator">:</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Cylinders         <span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">6</span> levels <span class="token string">"3"</span><span class="token punctuation">,</span><span class="token string">"4"</span><span class="token punctuation">,</span><span class="token string">"5"</span><span class="token punctuation">,</span><span class="token string">"6"</span><span class="token punctuation">,</span>..<span class="token operator">:</span> <span class="token number">2</span> <span class="token number">4</span> <span class="token number">4</span> <span class="token number">4</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">4</span> <span class="token number">4</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> EngineSize        <span class="token operator">:</span> num  <span class="token number">1.8</span> <span class="token number">3.2</span> <span class="token number">2.8</span> <span class="token number">2.8</span> <span class="token number">3.5</span> <span class="token number">2.2</span> <span class="token number">3.8</span> <span class="token number">5.7</span> <span class="token number">3.8</span> <span class="token number">4.9</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Horsepower        <span class="token operator">:</span> int  <span class="token number">140</span> <span class="token number">200</span> <span class="token number">172</span> <span class="token number">172</span> <span class="token number">208</span> <span class="token number">110</span> <span class="token number">170</span> <span class="token number">180</span> <span class="token number">170</span> <span class="token number">200</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> RPM               <span class="token operator">:</span> int  <span class="token number">6300</span> <span class="token number">5500</span> <span class="token number">5500</span> <span class="token number">5500</span> <span class="token number">5700</span> <span class="token number">5200</span> <span class="token number">4800</span> <span class="token number">4000</span> <span class="token number">4800</span> <span class="token number">4100</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Rev.per.mile      <span class="token operator">:</span> int  <span class="token number">2890</span> <span class="token number">2335</span> <span class="token number">2280</span> <span class="token number">2535</span> <span class="token number">2545</span> <span class="token number">2565</span> <span class="token number">1570</span> <span class="token number">1320</span> <span class="token number">1690</span> <span class="token number">1510</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Man.trans.avail   <span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">2</span> levels <span class="token string">"No"</span><span class="token punctuation">,</span><span class="token string">"Yes"</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Fuel.tank.capacity<span class="token operator">:</span> num  <span class="token number">13.2</span> <span class="token number">18</span> <span class="token number">16.9</span> <span class="token number">21.1</span> <span class="token number">21.1</span> <span class="token number">16.4</span> <span class="token number">18</span> <span class="token number">23</span> <span class="token number">18.8</span> <span class="token number">18</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Passengers        <span class="token operator">:</span> int  <span class="token number">5</span> <span class="token number">5</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">4</span> <span class="token number">6</span> <span class="token number">6</span> <span class="token number">6</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Length            <span class="token operator">:</span> int  <span class="token number">177</span> <span class="token number">195</span> <span class="token number">180</span> <span class="token number">193</span> <span class="token number">186</span> <span class="token number">189</span> <span class="token number">200</span> <span class="token number">216</span> <span class="token number">198</span> <span class="token number">206</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Wheelbase         <span class="token operator">:</span> int  <span class="token number">102</span> <span class="token number">115</span> <span class="token number">102</span> <span class="token number">106</span> <span class="token number">109</span> <span class="token number">105</span> <span class="token number">111</span> <span class="token number">116</span> <span class="token number">108</span> <span class="token number">114</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Width             <span class="token operator">:</span> int  <span class="token number">68</span> <span class="token number">71</span> <span class="token number">67</span> <span class="token number">70</span> <span class="token number">69</span> <span class="token number">69</span> <span class="token number">74</span> <span class="token number">78</span> <span class="token number">73</span> <span class="token number">73</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Turn.circle       <span class="token operator">:</span> int  <span class="token number">37</span> <span class="token number">38</span> <span class="token number">37</span> <span class="token number">37</span> <span class="token number">39</span> <span class="token number">41</span> <span class="token number">42</span> <span class="token number">45</span> <span class="token number">41</span> <span class="token number">43</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Rear.seat.room    <span class="token operator">:</span> num  <span class="token number">26.5</span> <span class="token number">30</span> <span class="token number">28</span> <span class="token number">31</span> <span class="token number">27</span> <span class="token number">28</span> <span class="token number">30.5</span> <span class="token number">30.5</span> <span class="token number">26.5</span> <span class="token number">35</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Luggage.room      <span class="token operator">:</span> int  <span class="token number">11</span> <span class="token number">15</span> <span class="token number">14</span> <span class="token number">17</span> <span class="token number">13</span> <span class="token number">16</span> <span class="token number">17</span> <span class="token number">21</span> <span class="token number">14</span> <span class="token number">18</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Weight            <span class="token operator">:</span> int  <span class="token number">2705</span> <span class="token number">3560</span> <span class="token number">3375</span> <span class="token number">3405</span> <span class="token number">3640</span> <span class="token number">2880</span> <span class="token number">3470</span> <span class="token number">4105</span> <span class="token number">3495</span> <span class="token number">3620</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Origin            <span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">2</span> levels <span class="token string">"USA"</span><span class="token punctuation">,</span><span class="token string">"non-USA"</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> Make              <span class="token operator">:</span> Factor w<span class="token operator">/</span> <span class="token number">93</span> levels <span class="token string">"Acura Integra"</span><span class="token punctuation">,</span>..<span class="token operator">:</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">4</span> <span class="token number">3</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span> <span class="token number">9</span> <span class="token number">8</span> <span class="token number">10</span> <span class="token ellipsis">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä¸Šè¿°ç»“æœè¡¨æ˜æ•°æ®é›†æœ‰å¾ˆå¤šå› ç´ å˜é‡ï¼Œå¯ä»¥è¢«è®¤ä¸ºæ˜¯åˆ†ç±»å˜é‡ã€‚å¯¹äºæˆ‘ä»¬çš„æ¨¡å‹ï¼Œæˆ‘ä»¬å°†è€ƒè™‘å˜é‡ <code>AirBags</code> å’Œ <code>Type</code>ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾å‡ºæ‰€å”®çš„æ±½è½¦ç±»å‹å’Œå®‰å…¨æ°”å›Šç±»å‹ä¹‹é—´çš„ä»»ä½•æ˜¾ç€çš„ç›¸å…³æ€§ã€‚å¦‚æœè§‚å¯Ÿåˆ°ç›¸å…³æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä¼°è®¡å“ªç§ç±»å‹çš„æ±½è½¦å¯ä»¥æ›´å¥½åœ°å–ä»€ä¹ˆç±»å‹çš„æ°”å›Šã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the library.</span>library<span class="token punctuation">(</span><span class="token string">"MASS"</span><span class="token punctuation">)</span><span class="token comment"># Create a data frame from the main data set.</span>car.data <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>Cars93<span class="token operator">$</span>AirBags<span class="token punctuation">,</span> Cars93<span class="token operator">$</span>Type<span class="token punctuation">)</span><span class="token comment"># Create a table with the needed variables.</span>car.data <span class="token operator">=</span> table<span class="token punctuation">(</span>Cars93<span class="token operator">$</span>AirBags<span class="token punctuation">,</span> Cars93<span class="token operator">$</span>Type<span class="token punctuation">)</span> print<span class="token punctuation">(</span>car.data<span class="token punctuation">)</span><span class="token comment"># Perform the Chi-Square test.</span>print<span class="token punctuation">(</span>chisq.test<span class="token punctuation">(</span>car.data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>                     Compact Large Midsize Small Sporty Van  Driver <span class="token operator">&amp;</span> Passenger       <span class="token number">2</span>     <span class="token number">4</span>       <span class="token number">7</span>     <span class="token number">0</span>      <span class="token number">3</span>   <span class="token number">0</span>  Driver only              <span class="token number">9</span>     <span class="token number">7</span>      <span class="token number">11</span>     <span class="token number">5</span>      <span class="token number">8</span>   <span class="token number">3</span>  None                     <span class="token number">5</span>     <span class="token number">0</span>       <span class="token number">4</span>    <span class="token number">16</span>      <span class="token number">3</span>   <span class="token number">6</span>Pearson`s Chi<span class="token operator">-</span>squared testdata<span class="token operator">:</span>  car.dataX<span class="token operator">-</span>squared <span class="token operator">=</span> <span class="token number">33.001</span><span class="token punctuation">,</span> df <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> p<span class="token operator">-</span>value <span class="token operator">=</span> <span class="token number">0.0002723</span>Warning message<span class="token operator">:</span>In chisq.test<span class="token punctuation">(</span>car.data<span class="token punctuation">)</span> <span class="token operator">:</span> Chi<span class="token operator">-</span>squared approximation may be incorrect<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>ç»“è®º</strong>ç»“æœæ˜¾ç¤º <code>P</code> å€¼å°äº <code>0.05</code>ï¼Œè¿™è¡¨æ˜æ±½è½¦ç±»å‹å’Œå®‰å…¨æ°”å›Šç±»å‹ä¹‹é—´å…·æœ‰ç›¸å…³æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ§®R </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R è¯­è¨€æ•°æ®æ¥å£</title>
      <link href="post/996a1090.html"/>
      <url>post/996a1090.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>R è¯­è¨€å¤„ç†çš„æ•°æ®ä¸€èˆ¬ä»å¤–éƒ¨å¯¼å…¥ï¼Œå› æ­¤éœ€è¦æ•°æ®æ¥å£æ¥è¯»å–å„ç§æ ¼å¼åŒ–çš„æ•°æ®ã€‚</p><p>åœ¨ R è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä»å­˜å‚¨åœ¨ R è¯­è¨€ç¯å¢ƒå¤–çš„æ–‡ä»¶ä¸­è¯»å–æ•°æ®ã€‚æˆ‘ä»¬è¿˜å¯ä»¥å°†æ•°æ®å†™å…¥å°†è¢«æ“ä½œç³»ç»Ÿå­˜å‚¨å’Œè®¿é—®çš„æ–‡ä»¶ã€‚R è¯­è¨€å¯ä»¥è¯»å–å’Œå†™å…¥å„ç§æ–‡ä»¶æ ¼å¼ï¼Œå¦‚â€‹ <code>CSV</code>â€‹ï¼Œâ€‹<code>Excel</code>â€‹ï¼Œ<code>XML</code>ï¼Œ<code>JSON</code> â€‹ç­‰ã€‚</p><h1 id="CSV-æ–‡ä»¶"><a href="#CSV-æ–‡ä»¶" class="headerlink" title="CSV æ–‡ä»¶"></a>CSV æ–‡ä»¶</h1><p>æœ¬ç« èŠ‚å­¦ä¹ ä»â€‹ <code>CSV</code> æ–‡ä»¶è¯»å–æ•°æ®ï¼Œç„¶åå°†æ•°æ®å†™å…¥ <code>CSV</code> â€‹æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶åº”è¯¥å­˜åœ¨äºå½“å‰å·¥ä½œç›®å½•ä¸­ï¼Œä»¥ä¾¿ R è¯­è¨€å¯ä»¥è¯»å–å®ƒã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®æˆ‘ä»¬è‡ªå·±çš„ç›®å½•å¹¶ä»é‚£é‡Œè¯»å–æ–‡ä»¶ã€‚</p><h2 id="è·å–å’Œè®¾ç½®å·¥ä½œç›®å½•"><a href="#è·å–å’Œè®¾ç½®å·¥ä½œç›®å½•" class="headerlink" title="è·å–å’Œè®¾ç½®å·¥ä½œç›®å½•"></a>è·å–å’Œè®¾ç½®å·¥ä½œç›®å½•</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨ â€‹<code>getwd()</code>â€‹ å‡½æ•°æ£€æŸ¥R è¯­è¨€å·¥ä½œåŒºæŒ‡å‘çš„ç›®å½•ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ <code>setwd()â€‹</code> å‡½æ•°è®¾ç½®æ–°çš„å·¥ä½œç›®å½•ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Get and print current working directory.</span>print<span class="token punctuation">(</span>getwd<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Set current working directory.</span>setwd<span class="token punctuation">(</span><span class="token string">"E:/data"</span><span class="token punctuation">)</span><span class="token comment"># Get and print current working directory.</span>print<span class="token punctuation">(</span>getwd<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"C:/Users/user/Documents"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"E:/data"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ­¤ç»“æœå–å†³äºæ‚¨çš„æ“ä½œç³»ç»Ÿå’Œæ‚¨å½“å‰å·¥ä½œçš„ç›®å½•ã€‚</p><h2 id="åˆ›å»º-CSV-æ–‡ä»¶"><a href="#åˆ›å»º-CSV-æ–‡ä»¶" class="headerlink" title="åˆ›å»º CSV æ–‡ä»¶"></a>åˆ›å»º CSV æ–‡ä»¶</h2><p><code>CSV</code> æ–‡ä»¶æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åˆ—ä¸­çš„å€¼ç”±é€—å·åˆ†éš”ã€‚</p><p>é€šè¿‡å°†ä»¥ä¸‹æ•°æ®å¤åˆ¶åˆ°æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¦‚è®°äº‹æœ¬ï¼‰ä¸­æ¥åˆ›å»ºæ–‡ä»¶ã€‚ä½¿ç”¨ <code>.csv</code> æ‰©å±•åä¿å­˜ä½¿ç”¨è®°äº‹æœ¬ä¸­çš„ä¿å­˜ä¸ºæ‰€æœ‰æ–‡ä»¶â€‹ï¼ˆ<code>*.*</code>ï¼‰â€‹é€‰é¡¹ï¼Œå°†æ–‡ä»¶ä¿å­˜ä¸º <code>input.csv</code>ã€‚</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">id,name,salary,start_date,dept1,Rick,623.3,2012-01-01,IT2,Dan,515.2,2013-09-23,Operations3,Michelle,611,2014-11-15,IT4,Ryan,729,2014-05-11,HR ,Gary,843.25,2015-03-27,Finance6,Nina,578,2013-05-21,IT7,Simon,632.8,2013-07-30,Operations8,Guru,722.5,2014-06-17,Finance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è¯»å–-CSV-æ–‡ä»¶"><a href="#è¯»å–-CSV-æ–‡ä»¶" class="headerlink" title="è¯»å– CSV æ–‡ä»¶"></a>è¯»å– CSV æ–‡ä»¶</h2><p>ä»¥ä¸‹æ˜¯â€‹ <code>read.csv()</code> â€‹å‡½æ•°çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œç”¨äºè¯»å–å½“å‰å·¥ä½œç›®å½•ä¸­å¯ç”¨çš„ <code>CSV</code> æ–‡ä»¶ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">data <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"input.csv"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  id     name salary start_date       dept<span class="token number">1</span>  <span class="token number">1</span>     Rick <span class="token number">623.30</span> <span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>         IT<span class="token number">2</span>  <span class="token number">2</span>      Dan <span class="token number">515.20</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">23</span> Operations<span class="token number">3</span>  <span class="token number">3</span> Michelle <span class="token number">611.00</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>         IT<span class="token number">4</span>  <span class="token number">4</span>     Ryan <span class="token number">729.00</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>         HR<span class="token number">5</span> <span class="token keyword">NA</span>     Gary <span class="token number">843.25</span> <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span>    Finance<span class="token number">6</span>  <span class="token number">6</span>     Nina <span class="token number">578.00</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">21</span>         IT<span class="token number">7</span>  <span class="token number">7</span>    Simon <span class="token number">632.80</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">30</span> Operations<span class="token number">8</span>  <span class="token number">8</span>     Guru <span class="token number">722.50</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span>    Finance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆ†æ-CSV-æ–‡ä»¶"><a href="#åˆ†æ-CSV-æ–‡ä»¶" class="headerlink" title="åˆ†æ CSV æ–‡ä»¶"></a>åˆ†æ CSV æ–‡ä»¶</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>â€‹read.csv()â€‹</code> å‡½æ•°å°†è¾“å‡ºä½œä¸ºæ•°æ®æ¡†ã€‚è¿™å¯ä»¥å®¹æ˜“åœ°å¦‚ä¸‹æ£€æŸ¥ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥åˆ—å’Œè¡Œçš„æ•°é‡ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">data <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"input.csv"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>is.data.frame<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>ncol<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>nrow<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token boolean">TRUE</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">5</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä¸€æ—¦æˆ‘ä»¬è¯»å–æ•°æ®æ¡†ä¸­çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥åº”ç”¨æ‰€æœ‰é€‚ç”¨äºæ•°æ®æ¡†çš„å‡½æ•°ã€‚</p><p><strong>è·å–æœ€é«˜å·¥èµ„</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a data frame.</span>data <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"input.csv"</span><span class="token punctuation">)</span><span class="token comment"># Get the max salary from data frame.</span>sal <span class="token operator">&lt;-</span> max<span class="token punctuation">(</span>data<span class="token operator">$</span>salary<span class="token punctuation">)</span>print<span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">843.25</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è·å–å…·æœ‰æœ€é«˜å·¥èµ„çš„äººçš„è¯¦ç»†ä¿¡æ¯</strong></p><p>æˆ‘ä»¬å¯ä»¥è·å–æ»¡è¶³ç‰¹å®šè¿‡æ»¤æ¡ä»¶çš„è¡Œï¼Œç±»ä¼¼äº <code>â€‹SQL WHERE</code> å­å¥ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a data frame.</span>data <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"input.csv"</span><span class="token punctuation">)</span><span class="token comment"># Get the person detail having max salary.</span>retval <span class="token operator">&lt;-</span> subset<span class="token punctuation">(</span>data<span class="token punctuation">,</span> salary <span class="token operator">==</span> max<span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>retval<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  id name salary start_date    dept<span class="token number">5</span> <span class="token keyword">NA</span> Gary <span class="token number">843.25</span> <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span> Finance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è·å–æ‰€æœ‰çš„ IT éƒ¨é—¨å‘˜å·¥çš„ä¿¡æ¯</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a data frame.</span>data <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"input.csv"</span><span class="token punctuation">)</span>retval <span class="token operator">&lt;-</span> subset<span class="token punctuation">(</span> data<span class="token punctuation">,</span> dept <span class="token operator">==</span> <span class="token string">"IT"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>retval<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  id     name salary start_date dept<span class="token number">1</span>  <span class="token number">1</span>     Rick  <span class="token number">623.3</span> <span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>   IT<span class="token number">3</span>  <span class="token number">3</span> Michelle  <span class="token number">611.0</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>   IT<span class="token number">6</span>  <span class="token number">6</span>     Nina  <span class="token number">578.0</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">21</span>   IT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è·å–å·¥èµ„å¤§äº 600 çš„ IT éƒ¨é—¨çš„äººå‘˜</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a data frame.</span>data <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"input.csv"</span><span class="token punctuation">)</span>info <span class="token operator">&lt;-</span> subset<span class="token punctuation">(</span>data<span class="token punctuation">,</span> salary <span class="token operator">></span> <span class="token number">600</span> <span class="token operator">&amp;</span> dept <span class="token operator">==</span> <span class="token string">"IT"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  id     name salary start_date dept<span class="token number">1</span>  <span class="token number">1</span>     Rick  <span class="token number">623.3</span> <span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>   IT<span class="token number">3</span>  <span class="token number">3</span> Michelle  <span class="token number">611.0</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>   IT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è·å– 2014 å¹´æˆ–ä¹‹ååŠ å…¥çš„äºº</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a data frame.</span>data <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"input.csv"</span><span class="token punctuation">)</span>retval <span class="token operator">&lt;-</span> subset<span class="token punctuation">(</span>data<span class="token punctuation">,</span> as.Date<span class="token punctuation">(</span>start_date<span class="token punctuation">)</span> <span class="token operator">></span> as.Date<span class="token punctuation">(</span><span class="token string">"2014-01-01"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>retval<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  id     name salary start_date    dept<span class="token number">3</span>  <span class="token number">3</span> Michelle <span class="token number">611.00</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>      IT<span class="token number">4</span>  <span class="token number">4</span>     Ryan <span class="token number">729.00</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>      HR<span class="token number">5</span> <span class="token keyword">NA</span>     Gary <span class="token number">843.25</span> <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span> Finance<span class="token number">8</span>  <span class="token number">8</span>     Guru <span class="token number">722.50</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> Finance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å†™å…¥-CSV-æ–‡ä»¶"><a href="#å†™å…¥-CSV-æ–‡ä»¶" class="headerlink" title="å†™å…¥ CSV æ–‡ä»¶"></a>å†™å…¥ CSV æ–‡ä»¶</h2><p>R è¯­è¨€å¯ä»¥åˆ›å»ºâ€‹ <code>CSV</code> æ–‡ä»¶å½¢å¼çš„ç°æœ‰æ•°æ®æ¡†ã€‚â€‹<code>write.csv()</code> â€‹å‡½æ•°ç”¨äºåˆ›å»ºâ€‹ <code>CSV</code> æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶åœ¨å·¥ä½œç›®å½•ä¸­åˆ›å»ºã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a data frame.</span>data <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"input.csv"</span><span class="token punctuation">)</span>retval <span class="token operator">&lt;-</span> subset<span class="token punctuation">(</span>data<span class="token punctuation">,</span> as.Date<span class="token punctuation">(</span>start_date<span class="token punctuation">)</span> <span class="token operator">></span> as.Date<span class="token punctuation">(</span><span class="token string">"2014-01-01"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Write filtered data into a new file.</span>write.csv<span class="token punctuation">(</span>retval<span class="token punctuation">,</span> <span class="token string">"output.csv"</span><span class="token punctuation">)</span>newdata <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"output.csv"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>newdata<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  X id     name salary start_date    dept<span class="token number">1</span> <span class="token number">3</span>  <span class="token number">3</span> Michelle <span class="token number">611.00</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>      IT<span class="token number">2</span> <span class="token number">4</span>  <span class="token number">4</span>     Ryan <span class="token number">729.00</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>      HR<span class="token number">3</span> <span class="token number">5</span> <span class="token keyword">NA</span>     Gary <span class="token number">843.25</span> <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span> Finance<span class="token number">4</span> <span class="token number">8</span>  <span class="token number">8</span>     Guru <span class="token number">722.50</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> Finance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>è¿™é‡Œåˆ— <code>X</code> æ¥è‡ªæ•°æ®é›† â€‹<code>newper</code>â€‹ã€‚è¿™å¯ä»¥åœ¨å†™å…¥æ–‡ä»¶æ—¶ä½¿ç”¨é™„åŠ å‚æ•° <code>row.names = FALSE</code> åˆ é™¤ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a data frame.</span>data <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"input.csv"</span><span class="token punctuation">)</span>retval <span class="token operator">&lt;-</span> subset<span class="token punctuation">(</span>data<span class="token punctuation">,</span> as.Date<span class="token punctuation">(</span>start_date<span class="token punctuation">)</span> <span class="token operator">></span> as.Date<span class="token punctuation">(</span><span class="token string">"2014-01-01"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Write filtered data into a new file.</span>write.csv<span class="token punctuation">(</span>retval<span class="token punctuation">,</span> <span class="token string">"output.csv"</span><span class="token punctuation">,</span> row.names <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>newdata <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"output.csv"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>newdata<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  id     name salary start_date    dept<span class="token number">1</span>  <span class="token number">3</span> Michelle <span class="token number">611.00</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>      IT<span class="token number">2</span>  <span class="token number">4</span>     Ryan <span class="token number">729.00</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>      HR<span class="token number">3</span> <span class="token keyword">NA</span>     Gary <span class="token number">843.25</span> <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span> Finance<span class="token number">4</span>  <span class="token number">8</span>     Guru <span class="token number">722.50</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> Finance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="Excel-æ–‡ä»¶"><a href="#Excel-æ–‡ä»¶" class="headerlink" title="Excel æ–‡ä»¶"></a>Excel æ–‡ä»¶</h1><p>Microsoft Excel æ˜¯æœ€å¹¿æ³›ä½¿ç”¨çš„ç”µå­è¡¨æ ¼ç¨‹åºï¼Œä»¥ <code>.xls</code> æˆ– <code>.xlsx</code> æ ¼å¼å­˜å‚¨æ•°æ®ã€‚R è¯­è¨€å¯ä»¥ç›´æ¥ä»è¿™äº›æ–‡ä»¶ä½¿ç”¨ä¸€äº› <code>Excel</code> ç‰¹å®šçš„åŒ…è·å–æ•°æ®ï¼Œå¦‚<code>XLConnect</code>ï¼Œ<code>xlsx</code>ï¼Œ<code>gdata</code> ç­‰ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°†ä½¿ç”¨ <code>xlsx</code> åŒ…ã€‚R è¯­è¨€ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªåŒ…å†™å…¥ <code>Excel</code> æ–‡ä»¶ã€‚</p><h2 id="å®‰è£…-xlsx-è½¯ä»¶åŒ…"><a href="#å®‰è£…-xlsx-è½¯ä»¶åŒ…" class="headerlink" title="å®‰è£… xlsx è½¯ä»¶åŒ…"></a>å®‰è£… xlsx è½¯ä»¶åŒ…</h2><p>æ‚¨å¯ä»¥åœ¨Ræ§åˆ¶å°ä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£… <code>xlsx</code> è½¯ä»¶åŒ…ã€‚å®ƒå¯èƒ½ä¼šè¦æ±‚å®‰è£…ä¸€äº›é¢å¤–çš„è½¯ä»¶åŒ…è¿™ä¸ªè½¯ä»¶åŒ…ä¾èµ–ã€‚æŒ‰ç…§å…·æœ‰æ‰€éœ€è½¯ä»¶åŒ…åç§°çš„åŒä¸€å‘½ä»¤å®‰è£…å…¶ä»–è½¯ä»¶åŒ…ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">install.packages<span class="token punctuation">(</span><span class="token string">"xlsx"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="éªŒè¯å¹¶åŠ è½½-xlsx-è½¯ä»¶åŒ…"><a href="#éªŒè¯å¹¶åŠ è½½-xlsx-è½¯ä»¶åŒ…" class="headerlink" title="éªŒè¯å¹¶åŠ è½½ xlsx è½¯ä»¶åŒ…"></a>éªŒè¯å¹¶åŠ è½½ xlsx è½¯ä»¶åŒ…</h2><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯å¹¶åŠ è½½ <code>xlsx</code> è½¯ä»¶åŒ…ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Verify the package is installed.</span>any<span class="token punctuation">(</span>grepl<span class="token punctuation">(</span><span class="token string">"xlsx"</span><span class="token punctuation">,</span> installed.packages<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Load the library into R workspace.</span>library<span class="token punctuation">(</span><span class="token string">"xlsx"</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token boolean">TRUE</span>Loading required package<span class="token operator">:</span> rJavaLoading required package<span class="token operator">:</span> methodsLoading required package<span class="token operator">:</span> xlsxjars<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆ›å»º-xlsx-æ–‡ä»¶"><a href="#åˆ›å»º-xlsx-æ–‡ä»¶" class="headerlink" title="åˆ›å»º xlsx æ–‡ä»¶"></a>åˆ›å»º xlsx æ–‡ä»¶</h2><p>æ‰“å¼€ Microsoft Excelï¼Œå°†ä»¥ä¸‹æ•°æ®å¤åˆ¶å¹¶ç²˜è´´åˆ°åä¸º <code>sheet1</code> çš„å·¥ä½œè¡¨ä¸­ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">id</th><th style="text-align:center">name</th><th style="text-align:center">salary</th><th style="text-align:center">start_date</th><th style="text-align:center">dept</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">Rick</td><td style="text-align:center">623.3</td><td style="text-align:center">2012-01-01</td><td style="text-align:center">IT</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">Dan</td><td style="text-align:center">515.2</td><td style="text-align:center">2013-09-23</td><td style="text-align:center">Operations</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">Michelle</td><td style="text-align:center">611</td><td style="text-align:center">2014-11-15</td><td style="text-align:center">IT</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">Ryan</td><td style="text-align:center">729</td><td style="text-align:center">2014-05-11</td><td style="text-align:center">HR</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">Gary</td><td style="text-align:center">843.25</td><td style="text-align:center">2015-03-27</td><td style="text-align:center">Finance</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">Nina</td><td style="text-align:center">578</td><td style="text-align:center">2013-05-21</td><td style="text-align:center">IT</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">Simon</td><td style="text-align:center">632.8</td><td style="text-align:center">2013-07-30</td><td style="text-align:center">Operations</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">Guru</td><td style="text-align:center">722.5</td><td style="text-align:center">2014-06-17</td><td style="text-align:center">Finance</td></tr></tbody></table></div><p>è¿˜è¦å°†ä»¥ä¸‹æ•°æ®å¤åˆ¶å¹¶ç²˜è´´åˆ°å¦ä¸€ä¸ªå·¥ä½œè¡¨ï¼Œå¹¶å°†æ­¤å·¥ä½œè¡¨é‡å‘½åä¸º <code>city</code>ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">name</th><th style="text-align:center">city</th></tr></thead><tbody><tr><td style="text-align:center">Rick</td><td style="text-align:center">Seattle</td></tr><tr><td style="text-align:center">Dan</td><td style="text-align:center">Tampa</td></tr><tr><td style="text-align:center">Michelle</td><td style="text-align:center">Chicago</td></tr><tr><td style="text-align:center">Ryan</td><td style="text-align:center">Seattle</td></tr><tr><td style="text-align:center">Gary</td><td style="text-align:center">Houston</td></tr><tr><td style="text-align:center">Nina</td><td style="text-align:center">Boston</td></tr><tr><td style="text-align:center">Simon</td><td style="text-align:center">Mumbai</td></tr><tr><td style="text-align:center">Guru</td><td style="text-align:center">Dallas</td></tr></tbody></table></div><p>å°† Excel æ–‡ä»¶å¦å­˜ä¸º <code>input.xlsx</code>ã€‚åº”å°†å…¶ä¿å­˜åœ¨ R å·¥ä½œåŒºçš„å½“å‰å·¥ä½œç›®å½•ä¸­ã€‚</p><h2 id="è¯»å–-Excel-æ–‡ä»¶"><a href="#è¯»å–-Excel-æ–‡ä»¶" class="headerlink" title="è¯»å– Excel æ–‡ä»¶"></a>è¯»å– Excel æ–‡ä»¶</h2><p>é€šè¿‡ä½¿ç”¨ <code>read.xlsx()</code> å‡½æ•°è¯»å– <code>input.xlsx</code>ï¼Œä»¥ä¸‹è„šæœ¬è¯»å–ç¬¬ä¸€ä¸ªå·¥ä½œè¡¨çš„æ•°æ®ã€‚ç»“æœä½œä¸ºæ•°æ®æ¡†å­˜å‚¨åœ¨ R è¯­è¨€ç¯å¢ƒä¸­ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Read the first worksheet in the file input.xlsx.</span>data <span class="token operator">&lt;-</span> read.xlsx<span class="token punctuation">(</span><span class="token string">"input.xlsx"</span><span class="token punctuation">,</span> sheetIndex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  id     name salary start_date       dept<span class="token number">1</span>  <span class="token number">1</span>     Rick <span class="token number">623.30</span> <span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>         IT<span class="token number">2</span>  <span class="token number">2</span>      Dan <span class="token number">515.20</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">23</span> Operations<span class="token number">3</span>  <span class="token number">3</span> Michelle <span class="token number">611.00</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>         IT<span class="token number">4</span>  <span class="token number">4</span>     Ryan <span class="token number">729.00</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>         HR<span class="token number">5</span> <span class="token keyword">NA</span>     Gary <span class="token number">843.25</span> <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span>    Finance<span class="token number">6</span>  <span class="token number">6</span>     Nina <span class="token number">578.00</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">21</span>         IT<span class="token number">7</span>  <span class="token number">7</span>    Simon <span class="token number">632.80</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">30</span> Operations<span class="token number">8</span>  <span class="token number">8</span>     Guru <span class="token number">722.50</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span>    Finance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® <code>sheetIndex</code> å‚æ•°è¯»å–æŒ‡å®šçš„å·¥ä½œè¡¨ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Read the worksheet named by city in the file input.xlsx.</span>data <span class="token operator">&lt;-</span> read.xlsx<span class="token punctuation">(</span><span class="token string">"input.xlsx"</span><span class="token punctuation">,</span> sheetIndex <span class="token operator">=</span> <span class="token string">"city"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>      name    city<span class="token number">1</span>     Rick Seattle<span class="token number">2</span>      Dan   Tampa<span class="token number">3</span> Michelle Chicago<span class="token number">4</span>     Ryan Seattle<span class="token number">5</span>     Gary Houston<span class="token number">6</span>     Nina  Boston<span class="token number">7</span>    Simon  Mumbai<span class="token number">8</span>     Guru  Dallas<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å†™å…¥-Excel-æ–‡ä»¶"><a href="#å†™å…¥-Excel-æ–‡ä»¶" class="headerlink" title="å†™å…¥ Excel æ–‡ä»¶"></a>å†™å…¥ Excel æ–‡ä»¶</h2><p>R è¯­è¨€ä¸­çš„ <code>write.xlsx()</code> å‡½æ•°ç”¨äºåˆ›å»º <code>Excel</code> æ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶åœ¨å·¥ä½œç›®å½•ä¸­åˆ›å»ºã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Read the first worksheet in the file input.xlsx.</span>data <span class="token operator">&lt;-</span> read.xlsx<span class="token punctuation">(</span><span class="token string">"input.xlsx"</span><span class="token punctuation">,</span> sheetIndex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>retval <span class="token operator">&lt;-</span> subset<span class="token punctuation">(</span>data<span class="token punctuation">,</span> as.Date<span class="token punctuation">(</span>start_date<span class="token punctuation">)</span> <span class="token operator">></span> as.Date<span class="token punctuation">(</span><span class="token string">"2014-01-01"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Write the data into a new file.</span>write.xlsx<span class="token punctuation">(</span>retval<span class="token punctuation">,</span> file <span class="token operator">=</span> <span class="token string">"output.xlsx"</span><span class="token punctuation">,</span> row.names <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> sheetName <span class="token operator">=</span> <span class="token string">"salary"</span><span class="token punctuation">)</span>newdata <span class="token operator">&lt;-</span> read.xlsx<span class="token punctuation">(</span><span class="token string">"output.xlsx"</span><span class="token punctuation">,</span> sheetIndex <span class="token operator">=</span> <span class="token string">"salary"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>newdata<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  id     name salary start_date    dept<span class="token number">1</span>  <span class="token number">3</span> Michelle <span class="token number">611.00</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>      IT<span class="token number">2</span>  <span class="token number">4</span>     Ryan <span class="token number">729.00</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>      HR<span class="token number">3</span> <span class="token keyword">NA</span>     Gary <span class="token number">843.25</span> <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span> Finance<span class="token number">4</span>  <span class="token number">8</span>     Guru <span class="token number">722.50</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span> Finance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="äºŒè¿›åˆ¶æ–‡ä»¶"><a href="#äºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="äºŒè¿›åˆ¶æ–‡ä»¶"></a>äºŒè¿›åˆ¶æ–‡ä»¶</h1><p>äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯åŒ…å«ä»…ä»¥ä½å’Œå­—èŠ‚ï¼ˆ<code>0</code> å’Œ <code>1</code>ï¼‰çš„å½¢å¼å­˜å‚¨çš„ä¿¡æ¯çš„æ–‡ä»¶ã€‚å®ƒä»¬ä¸æ˜¯äººç±»å¯è¯»çš„ï¼Œå› ä¸ºå®ƒä¸­çš„å­—èŠ‚è½¬æ¢ä¸ºåŒ…å«è®¸å¤šå…¶ä»–ä¸å¯æ‰“å°å­—ç¬¦çš„å­—ç¬¦å’Œç¬¦å·ã€‚å°è¯•ä½¿ç”¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶å°†æ˜¾ç¤ºå¦‚ <code>Ã˜</code> å’Œ <code>Ã°</code> çš„å­—ç¬¦ã€‚</p><p>äºŒè¿›åˆ¶æ–‡ä»¶å¿…é¡»ç”±ç‰¹å®šç¨‹åºè¯»å–æ‰èƒ½ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼ŒMicrosoft Word ç¨‹åºçš„äºŒè¿›åˆ¶æ–‡ä»¶åªèƒ½é€šè¿‡ Word ç¨‹åºè¯»å–åˆ°äººç±»å¯è¯»çš„å½¢å¼ã€‚è¿™è¡¨ç¤ºï¼Œé™¤äº†äººç±»å¯è¯»çš„æ–‡æœ¬ä¹‹å¤–ï¼Œè¿˜æœ‰æ›´å¤šçš„ä¿¡æ¯ï¼Œä¾‹å¦‚å­—ç¬¦å’Œé¡µç ç­‰çš„æ ¼å¼åŒ–ï¼Œå®ƒä»¬ä¹Ÿä¸å­—æ¯æ•°å­—å­—ç¬¦ä¸€èµ·å­˜å‚¨ã€‚æœ€åä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ä¸€ä¸ªè¿ç»­çš„å­—èŠ‚åºåˆ—ã€‚æˆ‘ä»¬åœ¨æ–‡æœ¬æ–‡ä»¶ä¸­çœ‹åˆ°çš„æ¢è¡Œç¬¦æ˜¯è¿æ¥ç¬¬ä¸€è¡Œåˆ°ä¸‹ä¸€è¡Œçš„å­—ç¬¦ã€‚</p><p>æœ‰æ—¶ï¼Œç”±å…¶ä»–ç¨‹åºç”Ÿæˆçš„æ•°æ®éœ€è¦ç”± R ä½œä¸ºäºŒè¿›åˆ¶æ–‡ä»¶å¤„ç†ã€‚å¦å¤–ï¼ŒR è¯­è¨€æ˜¯åˆ›å»ºå¯ä»¥ä¸å…¶ä»–ç¨‹åºå…±äº«çš„äºŒè¿›åˆ¶æ–‡ä»¶æ‰€å¿…éœ€çš„ã€‚</p><p>R è¯­è¨€æœ‰ä¸¤ä¸ªå‡½æ•° <code>WriteBin()</code> å’Œ <code>readBin()</code> æ¥åˆ›å»ºå’Œè¯»å–äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">writeBin<span class="token punctuation">(</span>object<span class="token punctuation">,</span> con<span class="token punctuation">)</span>readBin<span class="token punctuation">(</span>con<span class="token punctuation">,</span> what<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>con</code> æ˜¯è¯»å–æˆ–å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶çš„è¿æ¥å¯¹è±¡ã€‚</li><li><code>object</code> æ˜¯è¦å†™å…¥çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li><li><code>what</code> æ˜¯åƒå­—ç¬¦ï¼Œæ•´æ•°ç­‰ä»£è¡¨å­—èŠ‚æ¨¡å¼è¢«è¯»å–ã€‚</li><li><code>n</code> æ˜¯ä»äºŒè¿›åˆ¶æ–‡ä»¶è¯»å–çš„å­—èŠ‚æ•°ã€‚</li></ul><h2 id="å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶"><a href="#å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶"></a>å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶</h2><p>æˆ‘ä»¬è€ƒè™‘ R è¯­è¨€å†…ç½®æ•°æ® <code>mtcars</code>ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä»å®ƒåˆ›å»ºä¸€ä¸ª <code>CSV</code> æ–‡ä»¶ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶å°†å…¶å­˜å‚¨ä¸ºæ“ä½œç³»ç»Ÿæ–‡ä»¶ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¯»å–è¿™ä¸ªåˆ›å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Read the "mtcars" data frame as a csv file and store only the columns "cyl", "am" and "gear".</span>write.table<span class="token punctuation">(</span>mtcars<span class="token punctuation">,</span> file <span class="token operator">=</span> <span class="token string">"mtcars.csv"</span><span class="token punctuation">,</span> row.names <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> na <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> col.names <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> sep <span class="token operator">=</span> <span class="token string">","</span><span class="token punctuation">)</span><span class="token comment"># Store 5 records from the csv file as a new data frame.</span>new.mtcars <span class="token operator">&lt;-</span> read.table<span class="token punctuation">(</span><span class="token string">"mtcars.csv"</span><span class="token punctuation">,</span> sep <span class="token operator">=</span> <span class="token string">","</span><span class="token punctuation">,</span> header <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> nrows <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token comment"># Create a connection object to write the binary file using mode "wb".</span>write.filename <span class="token operator">=</span> file<span class="token punctuation">(</span><span class="token string">"binmtcars.dat"</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span><span class="token comment"># Write the column names of the data frame to the connection object.</span>writeBin<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"cyl"</span><span class="token punctuation">,</span> <span class="token string">"am"</span><span class="token punctuation">,</span> <span class="token string">"gear"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> write.filename<span class="token punctuation">)</span><span class="token comment"># Write the records in each of the column to the file.</span>writeBin<span class="token punctuation">(</span>c<span class="token punctuation">(</span>new.mtcars<span class="token operator">$</span>cyl<span class="token punctuation">,</span> new.mtcars<span class="token operator">$</span>am<span class="token punctuation">,</span> new.mtcars<span class="token operator">$</span>gear<span class="token punctuation">)</span><span class="token punctuation">,</span> write.filename<span class="token punctuation">)</span><span class="token comment"># Close the file for writing so that it can be read by other program.</span>close<span class="token punctuation">(</span>write.filename<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶"><a href="#è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶"></a>è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶</h2><p>ä¸Šé¢åˆ›å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶å°†æ‰€æœ‰æ•°æ®å­˜å‚¨ä¸ºè¿ç»­å­—èŠ‚ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†é€šè¿‡é€‰æ‹©é€‚å½“çš„åˆ—åç§°å€¼å’Œåˆ—å€¼æ¥è¯»å–å®ƒã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a connection object to read the file in binary mode using "rb".</span>read.filename <span class="token operator">&lt;-</span> file<span class="token punctuation">(</span><span class="token string">"binmtcars.dat"</span><span class="token punctuation">,</span> <span class="token string">"rb"</span><span class="token punctuation">)</span><span class="token comment"># First read the column names. n = 3 as we have 3 columns.</span>column.names <span class="token operator">&lt;-</span> readBin<span class="token punctuation">(</span>read.filename<span class="token punctuation">,</span> character<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  n <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token comment"># Next read the column values. n = 18 as we have 3 column names and 15 values.</span>read.filename <span class="token operator">&lt;-</span> file<span class="token punctuation">(</span><span class="token string">"binmtcars.dat"</span><span class="token punctuation">,</span> <span class="token string">"rb"</span><span class="token punctuation">)</span>bindata <span class="token operator">&lt;-</span> readBin<span class="token punctuation">(</span>read.filename<span class="token punctuation">,</span> integer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token comment"># Print the data.</span>print<span class="token punctuation">(</span>bindata<span class="token punctuation">)</span><span class="token comment"># Read the values from 4th byte to 8th byte which represents "cyl".</span>cyldata <span class="token operator">=</span> bindata<span class="token punctuation">[</span><span class="token number">4</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>cyldata<span class="token punctuation">)</span><span class="token comment"># Read the values form 9th byte to 13th byte which represents "am".</span>amdata <span class="token operator">=</span> bindata<span class="token punctuation">[</span><span class="token number">9</span><span class="token operator">:</span><span class="token number">13</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>amdata<span class="token punctuation">)</span><span class="token comment"># Read the values form 9th byte to 13th byte which represents "gear".</span>geardata <span class="token operator">=</span> bindata<span class="token punctuation">[</span><span class="token number">14</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>geardata<span class="token punctuation">)</span><span class="token comment"># Combine all the read values to a dat frame.</span>finaldata <span class="token operator">=</span> cbind<span class="token punctuation">(</span>cyldata<span class="token punctuation">,</span> amdata<span class="token punctuation">,</span> geardata<span class="token punctuation">)</span>colnames<span class="token punctuation">(</span>finaldata<span class="token punctuation">)</span> <span class="token operator">=</span> column.namesprint<span class="token punctuation">(</span>finaldata<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœå’Œå›¾è¡¨ -</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token number">7108963</span> <span class="token number">1728081249</span>    <span class="token number">7496037</span>          <span class="token number">6</span>          <span class="token number">6</span>          <span class="token number">4</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span>          <span class="token number">6</span>          <span class="token number">8</span>          <span class="token number">1</span>          <span class="token number">1</span>          <span class="token number">1</span>          <span class="token number">0</span><span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span>         <span class="token number">0</span>          <span class="token number">4</span>          <span class="token number">4</span>          <span class="token number">4</span>          <span class="token number">3</span>          <span class="token number">3</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">6</span> <span class="token number">6</span> <span class="token number">4</span> <span class="token number">6</span> <span class="token number">8</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">4</span> <span class="token number">4</span> <span class="token number">4</span> <span class="token number">3</span> <span class="token number">3</span>     cyl am gear<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>   <span class="token number">6</span>  <span class="token number">1</span>    <span class="token number">4</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>   <span class="token number">6</span>  <span class="token number">1</span>    <span class="token number">4</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">]</span>   <span class="token number">4</span>  <span class="token number">1</span>    <span class="token number">4</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">]</span>   <span class="token number">6</span>  <span class="token number">0</span>    <span class="token number">3</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">]</span>   <span class="token number">8</span>  <span class="token number">0</span>    <span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬é€šè¿‡è¯»å– R ä¸­çš„äºŒè¿›åˆ¶æ–‡ä»¶å¾—åˆ°åŸå§‹æ•°æ®ã€‚</p><h1 id="XMLæ–‡ä»¶"><a href="#XMLæ–‡ä»¶" class="headerlink" title="XMLæ–‡ä»¶"></a>XMLæ–‡ä»¶</h1><p><code>XML</code> æ˜¯ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼Œå®ƒä½¿ç”¨æ ‡å‡† <code>ASCII</code> æ–‡æœ¬å…±äº«ä¸‡ç»´ç½‘ï¼Œå†…éƒ¨ç½‘å’Œå…¶ä»–åœ°æ–¹çš„æ–‡ä»¶æ ¼å¼å’Œæ•°æ®ã€‚å®ƒä»£è¡¨å¯æ‰©å±•æ ‡è®°è¯­è¨€ <code>XML</code>ã€‚ç±»ä¼¼äº <code>HTML</code>ï¼Œå®ƒåŒ…å«æ ‡è®°æ ‡ç­¾ã€‚ä½†æ˜¯ä¸ <code>HTML</code> ä¸­çš„æ ‡è®°æ ‡è®°æè¿°é¡µé¢çš„ç»“æ„ä¸åŒï¼Œåœ¨ <code>XML</code> ä¸­ï¼Œæ ‡è®°æè¿°äº†åŒ…å«åœ¨æ–‡ä»¶ä¸­çš„æ•°æ®çš„å«ä¹‰ã€‚</p><p>æ‚¨å¯ä»¥ä½¿ç”¨ <code>XML</code> åŒ…è¯»å– R è¯­è¨€ä¸­çš„ <code>XML</code> æ–‡ä»¶ã€‚æ­¤è½¯ä»¶åŒ…å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">install.packages<span class="token punctuation">(</span><span class="token string">"XML"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="åˆ›å»º-XML-æ–‡ä»¶"><a href="#åˆ›å»º-XML-æ–‡ä»¶" class="headerlink" title="åˆ›å»º XML æ–‡ä»¶"></a>åˆ›å»º XML æ–‡ä»¶</h2><p>é€šè¿‡å°†ä»¥ä¸‹æ•°æ®å¤åˆ¶åˆ°æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¦‚è®°äº‹æœ¬ï¼‰ä¸­æ¥åˆ›å»ºæ–‡ä»¶ã€‚ä½¿ç”¨ <code>.xml</code> æ‰©å±•åä¿å­˜ä½¿ç”¨è®°äº‹æœ¬ä¸­çš„ä¿å­˜ä¸ºæ‰€æœ‰æ–‡ä»¶â€‹ï¼ˆ<code>*.*</code>ï¼‰â€‹é€‰é¡¹ï¼Œå°†æ–‡ä»¶ä¿å­˜ä¸º <code>input.xml</code>ã€‚</p><p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RECORDS</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EMPLOYEE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ID</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ID</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NAME</span><span class="token punctuation">></span></span>Rick<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NAME</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SALARY</span><span class="token punctuation">></span></span>623.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SALARY</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>STARTDATE</span><span class="token punctuation">></span></span>2012-01-01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>STARTDATE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DEPT</span><span class="token punctuation">></span></span>IT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DEPT</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EMPLOYEE</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EMPLOYEE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ID</span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ID</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NAME</span><span class="token punctuation">></span></span>Dan<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NAME</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SALARY</span><span class="token punctuation">></span></span>515.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SALARY</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>STARTDATE</span><span class="token punctuation">></span></span>2013-09-23<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>STARTDATE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DEPT</span><span class="token punctuation">></span></span>Operations<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DEPT</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EMPLOYEE</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EMPLOYEE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ID</span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ID</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NAME</span><span class="token punctuation">></span></span>Michelle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NAME</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SALARY</span><span class="token punctuation">></span></span>611<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SALARY</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>STARTDATE</span><span class="token punctuation">></span></span>2014-11-15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>STARTDATE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DEPT</span><span class="token punctuation">></span></span>IT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DEPT</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EMPLOYEE</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EMPLOYEE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ID</span><span class="token punctuation">></span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ID</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NAME</span><span class="token punctuation">></span></span>Ryan<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NAME</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SALARY</span><span class="token punctuation">></span></span>729<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SALARY</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>STARTDATE</span><span class="token punctuation">></span></span>2014-05-11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>STARTDATE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DEPT</span><span class="token punctuation">></span></span>HR<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DEPT</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EMPLOYEE</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EMPLOYEE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ID</span><span class="token punctuation">></span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ID</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NAME</span><span class="token punctuation">></span></span>Gary<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NAME</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SALARY</span><span class="token punctuation">></span></span>843.25<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SALARY</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>STARTDATE</span><span class="token punctuation">></span></span>2015-03-27<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>STARTDATE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DEPT</span><span class="token punctuation">></span></span>Finance<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DEPT</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EMPLOYEE</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EMPLOYEE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ID</span><span class="token punctuation">></span></span>6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ID</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NAME</span><span class="token punctuation">></span></span>Nina<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NAME</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SALARY</span><span class="token punctuation">></span></span>578<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SALARY</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>STARTDATE</span><span class="token punctuation">></span></span>2013-05-21<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>STARTDATE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DEPT</span><span class="token punctuation">></span></span>IT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DEPT</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EMPLOYEE</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EMPLOYEE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ID</span><span class="token punctuation">></span></span>7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ID</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NAME</span><span class="token punctuation">></span></span>Simon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NAME</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SALARY</span><span class="token punctuation">></span></span>632.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SALARY</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>STARTDATE</span><span class="token punctuation">></span></span>2013-07-30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>STARTDATE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DEPT</span><span class="token punctuation">></span></span>Operations<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DEPT</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EMPLOYEE</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EMPLOYEE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ID</span><span class="token punctuation">></span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ID</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NAME</span><span class="token punctuation">></span></span>Guru<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NAME</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SALARY</span><span class="token punctuation">></span></span>722.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SALARY</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>STARTDATE</span><span class="token punctuation">></span></span>2014-06-17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>STARTDATE</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DEPT</span><span class="token punctuation">></span></span>Finance<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DEPT</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>EMPLOYEE</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RECORDS</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è¯»å–-XML-æ–‡ä»¶"><a href="#è¯»å–-XML-æ–‡ä»¶" class="headerlink" title="è¯»å– XML æ–‡ä»¶"></a>è¯»å– XML æ–‡ä»¶</h2><p><code>XML</code> æ–‡ä»¶ç”± R è¯­è¨€ä½¿ç”¨å‡½æ•° <code>xmlParse()</code> è¯»å–ã€‚å®ƒä½œä¸ºåˆ—è¡¨å­˜å‚¨åœ¨ R è¯­è¨€ä¸­ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the package required to read XML files.</span>library<span class="token punctuation">(</span><span class="token string">"XML"</span><span class="token punctuation">)</span><span class="token comment"># Also load the other required package.</span>library<span class="token punctuation">(</span><span class="token string">"methods"</span><span class="token punctuation">)</span><span class="token comment"># Give the input file name to the function.</span>result <span class="token operator">&lt;-</span> xmlParse<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"input.xml"</span><span class="token punctuation">)</span><span class="token comment"># Print the result.</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token number">1</span>Rick<span class="token number">623.3</span><span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>IT<span class="token number">2</span>Dan<span class="token number">515.2</span><span class="token number">2013</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">23</span>Operations<span class="token number">3</span>Michelle<span class="token number">611</span><span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>IT<span class="token number">4</span>Ryan<span class="token number">729</span><span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>HR<span class="token number">5</span>Gary<span class="token number">843.25</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span>Finance<span class="token number">6</span>Nina<span class="token number">578</span><span class="token number">2013</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">21</span>IT<span class="token number">7</span>Simon<span class="token number">632.8</span><span class="token number">2013</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">30</span>Operations<span class="token number">8</span>Guru<span class="token number">722.5</span><span class="token number">2014</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span>Finance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è·å– XML æ–‡ä»¶ä¸­å­˜åœ¨çš„èŠ‚ç‚¹æ•°</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the packages required to read XML files.</span>library<span class="token punctuation">(</span><span class="token string">"XML"</span><span class="token punctuation">)</span>library<span class="token punctuation">(</span><span class="token string">"methods"</span><span class="token punctuation">)</span><span class="token comment"># Give the input file name to the function.</span>result <span class="token operator">&lt;-</span> xmlParse<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"input.xml"</span><span class="token punctuation">)</span><span class="token comment"># Exract the root node form the xml file.</span>rootnode <span class="token operator">&lt;-</span> xmlRoot<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># Find number of nodes in the root.</span>rootsize <span class="token operator">&lt;-</span> xmlSize<span class="token punctuation">(</span>rootnode<span class="token punctuation">)</span><span class="token comment"># Print the result.</span>print<span class="token punctuation">(</span>rootsize<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„è¯¦ç»†ä¿¡æ¯</strong></p><p>è®©æˆ‘ä»¬çœ‹çœ‹è§£ææ–‡ä»¶çš„ç¬¬ä¸€æ¡è®°å½•ã€‚å®ƒå°†ç»™æˆ‘ä»¬ä¸€ä¸ªå…³äºå­˜åœ¨äºé¡¶å±‚èŠ‚ç‚¹ä¸­çš„å„ç§å…ƒç´ çš„æƒ³æ³•ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the packages required to read XML files.</span>library<span class="token punctuation">(</span><span class="token string">"XML"</span><span class="token punctuation">)</span>library<span class="token punctuation">(</span><span class="token string">"methods"</span><span class="token punctuation">)</span><span class="token comment"># Give the input file name to the function.</span>result <span class="token operator">&lt;-</span> xmlParse<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"input.xml"</span><span class="token punctuation">)</span><span class="token comment"># Exract the root node form the xml file.</span>rootnode <span class="token operator">&lt;-</span> xmlRoot<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># Print the result.</span>print<span class="token punctuation">(</span>rootnode<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token operator">$</span>EMPLOYEE  <span class="token number">1</span>  Rick  <span class="token number">623.3</span>  <span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>  ITattr<span class="token punctuation">(</span><span class="token punctuation">,</span><span class="token string">"class"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"XMLInternalNodeList"</span> <span class="token string">"XMLNodeList"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>è·å–èŠ‚ç‚¹çš„ä¸åŒå…ƒç´ </strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the packages required to read XML files.</span>library<span class="token punctuation">(</span><span class="token string">"XML"</span><span class="token punctuation">)</span>library<span class="token punctuation">(</span><span class="token string">"methods"</span><span class="token punctuation">)</span><span class="token comment"># Give the input file name to the function.</span>result <span class="token operator">&lt;-</span> xmlParse<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"input.xml"</span><span class="token punctuation">)</span><span class="token comment"># Exract the root node form the xml file.</span>rootnode <span class="token operator">&lt;-</span> xmlRoot<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># Get the first element of the first node.</span>print<span class="token punctuation">(</span>rootnode<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># Get the fifth element of the first node.</span>print<span class="token punctuation">(</span>rootnode<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># Get the second element of the third node.</span>print<span class="token punctuation">(</span>rootnode<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token number">1</span>ITMichelle<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="XML-åˆ°æ•°æ®æ¡†"><a href="#XML-åˆ°æ•°æ®æ¡†" class="headerlink" title="XML åˆ°æ•°æ®æ¡†"></a>XML åˆ°æ•°æ®æ¡†</h2><p>ä¸ºäº†åœ¨å¤§æ–‡ä»¶ä¸­æœ‰æ•ˆåœ°å¤„ç†æ•°æ®ï¼Œæˆ‘ä»¬å°† <code>XML</code> æ–‡ä»¶ä¸­çš„æ•°æ®ä½œä¸ºæ•°æ®æ¡†è¯»å–ã€‚ç„¶åå¤„ç†æ•°æ®æ¡†ä»¥è¿›è¡Œæ•°æ®åˆ†æã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the packages required to read XML files.</span>library<span class="token punctuation">(</span><span class="token string">"XML"</span><span class="token punctuation">)</span>library<span class="token punctuation">(</span><span class="token string">"methods"</span><span class="token punctuation">)</span><span class="token comment"># Convert the input xml file to a data frame.</span>xmldataframe <span class="token operator">&lt;-</span> xmlToDataFrame<span class="token punctuation">(</span><span class="token string">"input.xml"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>xmldataframe<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  ID     NAME SALARY  STARTDATE       DEPT<span class="token number">1</span>  <span class="token number">1</span>     Rick  <span class="token number">623.3</span> <span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>         IT<span class="token number">2</span>  <span class="token number">2</span>      Dan  <span class="token number">515.2</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">23</span> Operations<span class="token number">3</span>  <span class="token number">3</span> Michelle    <span class="token number">611</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>         IT<span class="token number">4</span>  <span class="token number">4</span>     Ryan    <span class="token number">729</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>         HR<span class="token number">5</span>  <span class="token number">5</span>     Gary <span class="token number">843.25</span> <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span>    Finance<span class="token number">6</span>  <span class="token number">6</span>     Nina    <span class="token number">578</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">21</span>         IT<span class="token number">7</span>  <span class="token number">7</span>    Simon  <span class="token number">632.8</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">30</span> Operations<span class="token number">8</span>  <span class="token number">8</span>     Guru  <span class="token number">722.5</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span>    Finance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ç”±äºæ•°æ®ç°åœ¨å¯ä»¥ä½œä¸ºæ•°æ®æ¡†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°æ®æ¡†ç›¸å…³å‡½æ•°æ¥è¯»å–å’Œæ“ä½œæ–‡ä»¶ã€‚</p><h1 id="JSON-æ–‡ä»¶"><a href="#JSON-æ–‡ä»¶" class="headerlink" title="JSON æ–‡ä»¶"></a>JSON æ–‡ä»¶</h1><p><code>JSON</code> æ–‡ä»¶ä»¥äººç±»å¯è¯»æ ¼å¼å°†æ•°æ®å­˜å‚¨ä¸ºæ–‡æœ¬ã€‚<code>JSON</code> ä»£è¡¨ <code>JavaScript Object Notation</code>ã€‚R å¯ä»¥ä½¿ç”¨ <code>rjson</code> åŒ…è¯»å– <code>JSON</code> æ–‡ä»¶ã€‚</p><p>åœ¨ R è¯­è¨€æ§åˆ¶å°ä¸­ï¼Œæ‚¨å¯ä»¥å‘å‡ºä»¥ä¸‹å‘½ä»¤æ¥å®‰è£… <code>rjson</code> åŒ…ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">install.packages<span class="token punctuation">(</span><span class="token string">"rjson"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="åˆ›å»º-JSON-æ–‡ä»¶"><a href="#åˆ›å»º-JSON-æ–‡ä»¶" class="headerlink" title="åˆ›å»º JSON æ–‡ä»¶"></a>åˆ›å»º JSON æ–‡ä»¶</h2><p>é€šè¿‡å°†ä»¥ä¸‹æ•°æ®å¤åˆ¶åˆ°æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¦‚è®°äº‹æœ¬ï¼‰ä¸­æ¥åˆ›å»ºæ–‡ä»¶ã€‚ä½¿ç”¨ <code>.json</code> æ‰©å±•åä¿å­˜ä½¿ç”¨è®°äº‹æœ¬ä¸­çš„ä¿å­˜ä¸ºæ‰€æœ‰æ–‡ä»¶â€‹ï¼ˆ<code>*.*</code>ï¼‰é€‰é¡¹ï¼Œå°†æ–‡ä»¶ä¿å­˜ä¸º <code>input.json</code>ã€‚</p><p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span><span class="token property">"ID"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">,</span> <span class="token string">"4"</span><span class="token punctuation">,</span> <span class="token string">"5"</span><span class="token punctuation">,</span> <span class="token string">"6"</span><span class="token punctuation">,</span> <span class="token string">"7"</span><span class="token punctuation">,</span> <span class="token string">"8"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"Name"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Rick"</span><span class="token punctuation">,</span> <span class="token string">"Dan"</span><span class="token punctuation">,</span> <span class="token string">"Michelle"</span><span class="token punctuation">,</span> <span class="token string">"Ryan"</span><span class="token punctuation">,</span> <span class="token string">"Gary"</span><span class="token punctuation">,</span> <span class="token string">"Nina"</span><span class="token punctuation">,</span> <span class="token string">"Simon"</span><span class="token punctuation">,</span> <span class="token string">"Guru"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"Salary"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"623.3"</span><span class="token punctuation">,</span> <span class="token string">"515.2"</span><span class="token punctuation">,</span> <span class="token string">"611"</span><span class="token punctuation">,</span> <span class="token string">"729"</span><span class="token punctuation">,</span> <span class="token string">"843.25"</span><span class="token punctuation">,</span> <span class="token string">"578"</span><span class="token punctuation">,</span> <span class="token string">"632.8"</span><span class="token punctuation">,</span> <span class="token string">"722.5"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"StartDate"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"2012-01-01"</span><span class="token punctuation">,</span> <span class="token string">"2013-09-23"</span><span class="token punctuation">,</span> <span class="token string">"2014-11-15"</span><span class="token punctuation">,</span> <span class="token string">"2014-05-11"</span><span class="token punctuation">,</span> <span class="token string">"2015-03-27"</span><span class="token punctuation">,</span> <span class="token string">"2013-05-21"</span><span class="token punctuation">,</span><span class="token string">"2013-07-30"</span><span class="token punctuation">,</span> <span class="token string">"2014-06-17"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">"Dept"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"IT"</span><span class="token punctuation">,</span> <span class="token string">"Operations"</span><span class="token punctuation">,</span> <span class="token string">"IT"</span><span class="token punctuation">,</span> <span class="token string">"HR"</span><span class="token punctuation">,</span> <span class="token string">"Finance"</span><span class="token punctuation">,</span> <span class="token string">"IT"</span><span class="token punctuation">,</span> <span class="token string">"Operations"</span><span class="token punctuation">,</span> <span class="token string">"Finance"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è¯»å–-JSON-æ–‡ä»¶"><a href="#è¯»å–-JSON-æ–‡ä»¶" class="headerlink" title="è¯»å– JSON æ–‡ä»¶"></a>è¯»å– JSON æ–‡ä»¶</h2><p><code>JSON</code> æ–‡ä»¶ç”± R ä½¿ç”¨æ¥è‡ª <code>fromJSON()</code> çš„å‡½æ•°è¯»å–ã€‚å®ƒä½œä¸ºåˆ—è¡¨å­˜å‚¨åœ¨ R ä¸­ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the package required to read JSON files.</span>library<span class="token punctuation">(</span><span class="token string">"rjson"</span><span class="token punctuation">)</span><span class="token comment"># Give the input file name to the function.</span>result <span class="token operator">&lt;-</span> fromJSON<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"input.json"</span><span class="token punctuation">)</span><span class="token comment"># Print the result.</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token operator">$</span>ID<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"1"</span> <span class="token string">"2"</span> <span class="token string">"3"</span> <span class="token string">"4"</span> <span class="token string">"5"</span> <span class="token string">"6"</span> <span class="token string">"7"</span> <span class="token string">"8"</span><span class="token operator">$</span>Name<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Rick"</span>     <span class="token string">"Dan"</span>      <span class="token string">"Michelle"</span> <span class="token string">"Ryan"</span>     <span class="token string">"Gary"</span>     <span class="token string">"Nina"</span>     <span class="token string">"Simon"</span>    <span class="token string">"Guru"</span>    <span class="token operator">$</span>Salary<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"623.3"</span>  <span class="token string">"515.2"</span>  <span class="token string">"611"</span>    <span class="token string">"729"</span>    <span class="token string">"843.25"</span> <span class="token string">"578"</span>    <span class="token string">"632.8"</span>  <span class="token string">"722.5"</span> <span class="token operator">$</span>StartDate<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"2012-01-01"</span> <span class="token string">"2013-09-23"</span> <span class="token string">"2014-11-15"</span> <span class="token string">"2014-05-11"</span> <span class="token string">"2015-03-27"</span> <span class="token string">"2013-05-21"</span> <span class="token string">"2013-07-30"</span> <span class="token string">"2014-06-17"</span><span class="token operator">$</span>Dept<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"IT"</span>         <span class="token string">"Operations"</span> <span class="token string">"IT"</span>         <span class="token string">"HR"</span>         <span class="token string">"Finance"</span>    <span class="token string">"IT"</span>         <span class="token string">"Operations"</span> <span class="token string">"Finance"</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å°†-JSON-è½¬æ¢ä¸ºæ•°æ®æ¡†"><a href="#å°†-JSON-è½¬æ¢ä¸ºæ•°æ®æ¡†" class="headerlink" title="å°† JSON è½¬æ¢ä¸ºæ•°æ®æ¡†"></a>å°† JSON è½¬æ¢ä¸ºæ•°æ®æ¡†</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>as.data.frame()</code> å‡½æ•°å°†ä¸Šé¢æå–çš„æ•°æ®è½¬æ¢ä¸º R è¯­è¨€æ•°æ®æ¡†ä»¥è¿›è¡Œè¿›ä¸€æ­¥åˆ†æã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the package required to read JSON files.</span>library<span class="token punctuation">(</span><span class="token string">"rjson"</span><span class="token punctuation">)</span><span class="token comment"># Give the input file name to the function.</span>result <span class="token operator">&lt;-</span> fromJSON<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"input.json"</span><span class="token punctuation">)</span><span class="token comment"># Convert JSON file to a data frame.</span>json_data_frame <span class="token operator">&lt;-</span> as.data.frame<span class="token punctuation">(</span>result<span class="token punctuation">)</span>print<span class="token punctuation">(</span>json_data_frame<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  ID     Name Salary  StartDate       Dept<span class="token number">1</span>  <span class="token number">1</span>     Rick  <span class="token number">623.3</span> <span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>         IT<span class="token number">2</span>  <span class="token number">2</span>      Dan  <span class="token number">515.2</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">23</span> Operations<span class="token number">3</span>  <span class="token number">3</span> Michelle    <span class="token number">611</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>         IT<span class="token number">4</span>  <span class="token number">4</span>     Ryan    <span class="token number">729</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>         HR<span class="token number">5</span>  <span class="token number">5</span>     Gary <span class="token number">843.25</span> <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span>    Finance<span class="token number">6</span>  <span class="token number">6</span>     Nina    <span class="token number">578</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">21</span>         IT<span class="token number">7</span>  <span class="token number">7</span>    Simon  <span class="token number">632.8</span> <span class="token number">2013</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">30</span> Operations<span class="token number">8</span>  <span class="token number">8</span>     Guru  <span class="token number">722.5</span> <span class="token number">2014</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span>    Finance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="Web-æ•°æ®"><a href="#Web-æ•°æ®" class="headerlink" title="Web æ•°æ®"></a>Web æ•°æ®</h1><p>è®¸å¤šç½‘ç«™æä¾›æ•°æ®ä¾›å…¶ç”¨æˆ·ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œä¸–ç•Œå«ç”Ÿç»„ç»‡ï¼ˆWHOï¼‰ä»¥ <code>CSV</code>ï¼Œ<code>txt</code> å’Œ <code>XML</code> æ–‡ä»¶çš„å½¢å¼æä¾›å¥åº·å’ŒåŒ»ç–—ä¿¡æ¯çš„æŠ¥å‘Šã€‚ä½¿ç”¨ R è¯­è¨€ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ä»è¿™äº›ç½‘ç«™ä»¥ç¼–ç¨‹æ–¹å¼æå–ç‰¹å®šæ•°æ®ã€‚R è¯­è¨€ä¸­ç”¨äºä»ç½‘ç«™ä¸­æå–æ•°æ®çš„ä¸€äº›åŒ…æ˜¯ <code>RCurl</code>ï¼Œ<code>XML</code> å’Œ <code>stringr</code>ï¼Œå®ƒä»¬ç”¨äºè¿æ¥åˆ° URLï¼Œè¯†åˆ«æ–‡ä»¶æ‰€éœ€çš„é“¾æ¥å¹¶å°†å®ƒä»¬ä¸‹è½½åˆ°æœ¬åœ°ç¯å¢ƒã€‚</p><p>å®‰è£… R è¯­è¨€çš„åŒ…å¤„ç†URLå’Œé“¾æ¥åˆ°æ–‡ä»¶éœ€è¦ä»¥ä¸‹çš„åŒ…ã€‚å¦‚æœå®ƒä»¬åœ¨R è¯­è¨€ç¯å¢ƒä¸­ä¸å¯ç”¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…å®ƒä»¬ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">install.packages<span class="token punctuation">(</span><span class="token string">"RCurl"</span><span class="token punctuation">)</span>install.packages<span class="token punctuation">(</span><span class="token string">"XML"</span><span class="token punctuation">)</span>install.packages<span class="token punctuation">(</span><span class="token string">"stringr"</span><span class="token punctuation">)</span>install.packages<span class="token punctuation">(</span><span class="token string">"plyr"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è¯»å–-Web-æ•°æ®"><a href="#è¯»å–-Web-æ•°æ®" class="headerlink" title="è¯»å– Web æ•°æ®"></a>è¯»å– Web æ•°æ®</h2><p>æˆ‘ä»¬å°†è®¿é—® <code>URL</code> å¤©æ°”æ•°æ®ï¼Œå¹¶ä½¿ç”¨ R ä¸‹è½½ 2015 å¹´çš„ <code>CSV</code> æ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬å°†ä½¿ç”¨å‡½æ•° <code>getHTMLLinks()</code> æ¥æ”¶é›†æ–‡ä»¶çš„ <code>URL</code>ã€‚ç„¶åæˆ‘ä»¬å°†ä½¿ç”¨å‡½æ•°<code>downlaod.file()</code> å°†æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°ç³»ç»Ÿã€‚ç”±äºæˆ‘ä»¬å°†å¯¹å¤šä¸ªæ–‡ä»¶ä¸€æ¬¡åˆä¸€æ¬¡åœ°åº”ç”¨ç›¸åŒçš„ä»£ç ï¼Œå› æ­¤æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªè¢«å¤šæ¬¡è°ƒç”¨çš„å‡½æ•°ã€‚æ–‡ä»¶åä½œä¸ºå‚æ•°ä»¥ R åˆ—è¡¨å¯¹è±¡çš„å½¢å¼ä¼ é€’åˆ°æ­¤å‡½æ•°ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Load the package required.</span>library<span class="token punctuation">(</span><span class="token string">"RCurl"</span><span class="token punctuation">)</span>library<span class="token punctuation">(</span><span class="token string">"XML"</span><span class="token punctuation">)</span>library<span class="token punctuation">(</span><span class="token string">"stringr"</span><span class="token punctuation">)</span>library<span class="token punctuation">(</span><span class="token string">"plyr"</span><span class="token punctuation">)</span><span class="token comment"># Read the URL.</span>url <span class="token operator">&lt;-</span> <span class="token string">"https://www.geos.ed.ac.uk/~weather/jcmb_ws/"</span><span class="token comment"># Gather the html links present in the webpage.</span>links <span class="token operator">&lt;-</span> getHTMLLinks<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token comment"># Identify only the links which point to the JCMB 2015 files. </span>filenames <span class="token operator">&lt;-</span> links<span class="token punctuation">[</span>str_detect<span class="token punctuation">(</span>links<span class="token punctuation">,</span> <span class="token string">"JCMB_2015"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment"># Store the file names as a list.</span>filenames_list <span class="token operator">&lt;-</span> as.list<span class="token punctuation">(</span>filenames<span class="token punctuation">)</span><span class="token comment"># Create a function to download the files by passing the URL and filename list.</span>downloadcsv <span class="token operator">&lt;-</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>mainurl<span class="token punctuation">,</span> filename<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   filedetails <span class="token operator">&lt;-</span> str_c<span class="token punctuation">(</span>mainurl<span class="token punctuation">,</span> filename<span class="token punctuation">)</span>   download.file<span class="token punctuation">(</span>filedetails<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment"># Now apply the l_ply function and save the files into the current R working directory.</span>l_ply<span class="token punctuation">(</span>filenames<span class="token punctuation">,</span> downloadcsv<span class="token punctuation">,</span> mainurl <span class="token operator">=</span> <span class="token string">"https://www.geos.ed.ac.uk/~weather/jcmb_ws/"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>éªŒè¯æ–‡ä»¶ä¸‹è½½</strong></p><p>è¿è¡Œä¸Šè¿°ä»£ç åï¼Œæ‚¨å¯ä»¥åœ¨å½“å‰ R è¯­è¨€å·¥ä½œç›®å½•ä¸­æ‰¾åˆ°ä»¥ä¸‹æ–‡ä»¶ã€‚<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">JCMB_2015.csvJCMB_2015_Apr.csvJCMB_2015_Aug.csvJCMB_2015_Dec.csvJCMB_2015_Feb.csvJCMB_2015_Jan.csvJCMB_2015_Jul.csvJCMB_2015_Jun.csvJCMB_2015_Mar.csvJCMB_2015_May.csvJCMB_2015_Nov.csvJCMB_2015_Oct.csvJCMB_2015_Sep.csv<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h1><p>æ•°æ®æ˜¯å…³ç³»æ•°æ®åº“ç³»ç»Ÿä»¥è§„èŒƒåŒ–æ ¼å¼å­˜å‚¨ã€‚å› æ­¤ï¼Œè¦è¿›è¡Œç»Ÿè®¡è®¡ç®—ï¼Œæˆ‘ä»¬å°†éœ€è¦éå¸¸å…ˆè¿›å’Œå¤æ‚çš„ <code>SQL</code> æŸ¥è¯¢ã€‚ä½† R è¯­è¨€å¯ä»¥è½»æ¾åœ°è¿æ¥åˆ°è®¸å¤šå…³ç³»æ•°æ®åº“ï¼Œå¦‚ <code>MySQL</code>ï¼Œ<code>Oracle</code>ï¼Œ<code>SQL Server</code> ç­‰ï¼Œå¹¶ä»å®ƒä»¬è·å–è®°å½•ä½œä¸ºæ•°æ®æ¡†ã€‚ä¸€æ—¦æ•°æ®åœ¨ R è¯­è¨€ç¯å¢ƒä¸­å¯ç”¨ï¼Œå®ƒå°±å˜æˆæ­£å¸¸çš„ R è¯­è¨€æ•°æ®é›†ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨æ‰€æœ‰å¼ºå¤§çš„åŒ…å’Œå‡½æ•°æ¥æ“ä½œæˆ–åˆ†æã€‚</p><p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ MySQL ä½œä¸ºè¿æ¥åˆ° R è¯­è¨€çš„å‚è€ƒæ•°æ®åº“ã€‚</p><p>R è¯­è¨€æœ‰ä¸€ä¸ªåä¸º <code>RMySQL</code> çš„å†…ç½®åŒ…ï¼Œå®ƒæä¾›ä¸ MySQL æ•°æ®åº“ä¹‹é—´çš„æœ¬åœ°è¿æ¥ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨ R è¯­è¨€ç¯å¢ƒä¸­å®‰è£…æ­¤è½¯ä»¶åŒ…ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">install.packages<span class="token punctuation">(</span><span class="token string">"RMySQL"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="è¿æ¥åˆ°-MySQL"><a href="#è¿æ¥åˆ°-MySQL" class="headerlink" title="è¿æ¥åˆ° MySQL"></a>è¿æ¥åˆ° MySQL</h2><p>ä¸€æ—¦å®‰è£…äº†åŒ…ï¼Œæˆ‘ä»¬åœ¨ R ä¸­åˆ›å»ºä¸€ä¸ªè¿æ¥å¯¹è±¡ä»¥è¿æ¥åˆ°æ•°æ®åº“ã€‚å®ƒä½¿ç”¨ç”¨æˆ·åï¼Œå¯†ç ï¼Œæ•°æ®åº“åç§°å’Œä¸»æœºåä½œä¸ºè¾“å…¥ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a connection Object to MySQL database.</span><span class="token comment"># We will connect to the sampel database named "testdb" that comes with MySQL installation.</span>library<span class="token punctuation">(</span><span class="token string">"RMySQL"</span><span class="token punctuation">)</span>conn <span class="token operator">=</span> dbConnect<span class="token punctuation">(</span>MySQL<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user <span class="token operator">=</span> <span class="token string">'root'</span><span class="token punctuation">,</span> password <span class="token operator">=</span> <span class="token string">'root'</span><span class="token punctuation">,</span> dbname <span class="token operator">=</span> <span class="token string">'testdb'</span><span class="token punctuation">,</span> host <span class="token operator">=</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">)</span><span class="token comment"># Set the encoding method to gbk</span>dbSendQuery<span class="token punctuation">(</span>conn<span class="token punctuation">,</span> <span class="token string">'SET NAMES gbk'</span><span class="token punctuation">)</span><span class="token comment"># List the tables available in this database.</span>dbListTables<span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"employee_tbl"</span>    <span class="token string">"tbl"</span>    <span class="token string">"tcount_tbl"</span>    <span class="token string">"transaction_test"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="æŸ¥è¯¢è¡¨æ•°æ®"><a href="#æŸ¥è¯¢è¡¨æ•°æ®" class="headerlink" title="æŸ¥è¯¢è¡¨æ•°æ®"></a>æŸ¥è¯¢è¡¨æ•°æ®</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡½æ•° <code>dbSendQuery()</code> æŸ¥è¯¢ MySQL ä¸­çš„æ•°æ®åº“è¡¨ã€‚æŸ¥è¯¢åœ¨ MySQL ä¸­æ‰§è¡Œï¼Œå¹¶ä½¿ç”¨ R è¯­è¨€ <code>fetch()</code> å‡½æ•°è¿”å›ç»“æœé›†ã€‚æœ€åï¼Œå®ƒè¢«å­˜å‚¨ä¸º R è¯­è¨€ä¸­çš„æ•°æ®æ¡†ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Query the "tbl" tables to get all the rows.</span>result <span class="token operator">=</span> dbSendQuery<span class="token punctuation">(</span>conn<span class="token punctuation">,</span> <span class="token string">"SELECT * FROM tbl"</span><span class="token punctuation">)</span><span class="token comment"># Store the result in a R data frame object. n = 6 is used to fetch first 6 rows.</span>data.frame <span class="token operator">=</span> fetch<span class="token punctuation">(</span>result<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>data.frame<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  id       title author submission_date<span class="token number">1</span>  <span class="token number">1</span>    å­¦ä¹  PHP    PHP      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span class="token number">2</span>  <span class="token number">2</span>  å­¦ä¹  MySQL  MySQL      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span class="token number">3</span>  <span class="token number">3</span>    å­¦ä¹  C<span class="token operator">+</span><span class="token operator">+</span>    C<span class="token operator">+</span><span class="token operator">+</span>      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span><span class="token number">4</span>  <span class="token number">4</span> å­¦ä¹  Python Python      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span><span class="token number">5</span>  <span class="token number">5</span>  MySQL æ•™ç¨‹  MySQL      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span class="token number">6</span>  <span class="token number">6</span>   JAVA æ•™ç¨‹   JAVA      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>å¸¦è¿‡æ»¤æ¡ä»¶çš„æŸ¥è¯¢</strong></p><p>æˆ‘ä»¬å¯ä»¥ä¼ é€’ä»»ä½•æœ‰æ•ˆçš„ <code>SELECT</code> æŸ¥è¯¢æ¥è·å–ç»“æœã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Query the "tbl" tables to get all the rows with author equal to 'MySQL'.</span>result <span class="token operator">=</span> dbSendQuery<span class="token punctuation">(</span>conn<span class="token punctuation">,</span> <span class="token string">"SELECT * FROM tbl WHERE author = 'MySQL'"</span><span class="token punctuation">)</span><span class="token comment"># Fetch all the records and store it as a data frame.</span>data.frame <span class="token operator">=</span> fetch<span class="token punctuation">(</span>result<span class="token punctuation">)</span>print<span class="token punctuation">(</span>data.frame<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  id      title author submission_date<span class="token number">1</span>  <span class="token number">2</span> å­¦ä¹  MySQL  MySQL      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span class="token number">2</span>  <span class="token number">5</span> MySQL æ•™ç¨‹  MySQL      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="æ›´æ–°è¡¨æ•°æ®"><a href="#æ›´æ–°è¡¨æ•°æ®" class="headerlink" title="æ›´æ–°è¡¨æ•°æ®"></a>æ›´æ–°è¡¨æ•°æ®</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†æ›´æ–°æŸ¥è¯¢ä¼ é€’ç»™ <code>dbSendQuery()</code> å‡½æ•°æ¥æ›´æ–° MySQL è¡¨ä¸­çš„è¡Œã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Query the "tbl" tables to get the rows with id equal to 1.</span>result <span class="token operator">=</span> dbSendQuery<span class="token punctuation">(</span>conn<span class="token punctuation">,</span> <span class="token string">"SELECT * FROM tbl WHERE id = 1"</span><span class="token punctuation">)</span><span class="token comment"># Fetch all the records and store it as a data frame.</span>data.frame <span class="token operator">=</span> fetch<span class="token punctuation">(</span>result<span class="token punctuation">)</span>print<span class="token punctuation">(</span>data.frame<span class="token punctuation">)</span><span class="token comment"># Update the record with id equal to 1.</span>dbSendQuery<span class="token punctuation">(</span>conn<span class="token punctuation">,</span> <span class="token string">"UPDATE tbl SET submission_date = '2000-01-12' WHERE id = 1"</span><span class="token punctuation">)</span><span class="token comment"># Query the "tbl" tables to get the rows with id equal to 1.</span>result <span class="token operator">=</span> dbSendQuery<span class="token punctuation">(</span>conn<span class="token punctuation">,</span> <span class="token string">"SELECT * FROM tbl WHERE id = 1"</span><span class="token punctuation">)</span><span class="token comment"># Fetch all the records and store it as a data frame.</span>data.frame <span class="token operator">=</span> fetch<span class="token punctuation">(</span>result<span class="token punctuation">)</span>print<span class="token punctuation">(</span>data.frame<span class="token punctuation">)</span><span class="token comment"># åœ¨æ‰§è¡Œä¸Šé¢çš„ä»£ç åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ MySQL ç¯å¢ƒä¸­æ›´æ–°çš„è¡¨ã€‚</span>  id    title author submission_date<span class="token number">1</span>  <span class="token number">1</span> å­¦ä¹  PHP    PHP      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>  id    title author submission_date<span class="token number">1</span>  <span class="token number">1</span> å­¦ä¹  PHP    PHP      <span class="token number">2000</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å‘è¡¨æ’å…¥æ•°æ®"><a href="#å‘è¡¨æ’å…¥æ•°æ®" class="headerlink" title="å‘è¡¨æ’å…¥æ•°æ®"></a>å‘è¡¨æ’å…¥æ•°æ®</h2><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Insert data to the "tbl" tables</span>dbSendQuery<span class="token punctuation">(</span>conn<span class="token punctuation">,</span>   <span class="token string">"INSERT INTO tbl (title, author, submission_date) VALUES('å­¦ä¹  R', 'R', '2021-01-22')"</span><span class="token punctuation">)</span><span class="token comment"># Query the "tbl" tables to get all the rows.</span>result <span class="token operator">=</span> dbSendQuery<span class="token punctuation">(</span>conn<span class="token punctuation">,</span> <span class="token string">"SELECT * FROM tbl"</span><span class="token punctuation">)</span><span class="token comment"># Fetch all the records and store it as a data frame.</span>data.frame <span class="token operator">=</span> fetch<span class="token punctuation">(</span>result<span class="token punctuation">)</span>print<span class="token punctuation">(</span>data.frame<span class="token punctuation">)</span><span class="token comment"># åœ¨æ‰§è¡Œä¸Šé¢çš„ä»£ç åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ’å…¥åˆ° MySQL ç¯å¢ƒä¸­çš„è¡¨ä¸­çš„è¡Œã€‚</span>  id       title author submission_date<span class="token number">1</span>  <span class="token number">1</span>    å­¦ä¹  PHP    PHP      <span class="token number">2000</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span class="token number">2</span>  <span class="token number">2</span>  å­¦ä¹  MySQL  MySQL      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span class="token number">3</span>  <span class="token number">3</span>    å­¦ä¹  C<span class="token operator">+</span><span class="token operator">+</span>    C<span class="token operator">+</span><span class="token operator">+</span>      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span><span class="token number">4</span>  <span class="token number">4</span> å­¦ä¹  Python Python      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span><span class="token number">5</span>  <span class="token number">5</span>  MySQL æ•™ç¨‹  MySQL      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span class="token number">6</span>  <span class="token number">6</span>   JAVA æ•™ç¨‹   JAVA      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span><span class="token number">7</span>  <span class="token number">7</span>      å­¦ä¹  R      R      <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">22</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h2><p>æˆ‘ä»¬å¯ä»¥åœ¨ MySQL ä¸­ä½¿ç”¨å‡½æ•° <code>dbWriteTable()</code> åˆ›å»ºè¡¨ã€‚å¦‚æœè¡¨å·²ç»å­˜åœ¨ï¼Œå®ƒå°†è¦†ç›–è¯¥è¡¨ï¼Œå¹¶å°†æ•°æ®æ¡†ç”¨ä½œè¾“å…¥ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the connection object to the database where we want to create the table.</span>conn <span class="token operator">=</span> dbConnect<span class="token punctuation">(</span>MySQL<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user <span class="token operator">=</span> <span class="token string">'root'</span><span class="token punctuation">,</span> password <span class="token operator">=</span> <span class="token string">'root'</span><span class="token punctuation">,</span> dbname <span class="token operator">=</span> <span class="token string">'testdb'</span><span class="token punctuation">,</span> host <span class="token operator">=</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span> port <span class="token operator">=</span> <span class="token string">'3306'</span><span class="token punctuation">)</span><span class="token comment"># Use the R data frame "mtcars" to create the table in MySQL.</span><span class="token comment"># All the rows of mtcars are taken inot MySQL.</span>dbWriteTable<span class="token punctuation">(</span>conn<span class="token punctuation">,</span> <span class="token string">"mtcars"</span><span class="token punctuation">,</span> mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> overwrite <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token comment"># List the tables available in this database.</span>dbListTables<span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token comment"># Query the "mtcars" tables to get the rows</span>result <span class="token operator">=</span> dbSendQuery<span class="token punctuation">(</span>conn<span class="token punctuation">,</span> <span class="token string">"SELECT * FROM mtcars"</span><span class="token punctuation">)</span><span class="token comment"># Fetch all the records and store it as a data frame.</span>data.frame <span class="token operator">=</span> fetch<span class="token punctuation">(</span>result<span class="token punctuation">)</span>print<span class="token punctuation">(</span>data.frame<span class="token punctuation">)</span><span class="token comment"># æ‰§è¡Œä¸Šé¢çš„ä»£ç åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ MySQL ç¯å¢ƒä¸­åˆ›å»ºçš„è¡¨ã€‚</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token boolean">TRUE</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"employee_tbl"</span>    <span class="token string">"tbl"</span>    <span class="token string">"tcount_tbl"</span>    <span class="token string">"transaction_test"</span>             row_names  mpg cyl  disp  hp drat    wt  qsec vs am gear carb<span class="token number">1</span>            Mazda RX4 <span class="token number">21.0</span>   <span class="token number">6</span> <span class="token number">160.0</span> <span class="token number">110</span> <span class="token number">3.90</span> <span class="token number">2.620</span> <span class="token number">16.46</span>  <span class="token number">0</span>  <span class="token number">1</span>    <span class="token number">4</span>    <span class="token number">4</span><span class="token number">2</span>        Mazda RX4 Wag <span class="token number">21.0</span>   <span class="token number">6</span> <span class="token number">160.0</span> <span class="token number">110</span> <span class="token number">3.90</span> <span class="token number">2.875</span> <span class="token number">17.02</span>  <span class="token number">0</span>  <span class="token number">1</span>    <span class="token number">4</span>    <span class="token number">4</span><span class="token number">3</span>           Datsun <span class="token number">710</span> <span class="token number">22.8</span>   <span class="token number">4</span> <span class="token number">108.0</span>  <span class="token number">93</span> <span class="token number">3.85</span> <span class="token number">2.320</span> <span class="token number">18.61</span>  <span class="token number">1</span>  <span class="token number">1</span>    <span class="token number">4</span>    <span class="token number">1</span><span class="token number">4</span>       Hornet <span class="token number">4</span> Drive <span class="token number">21.4</span>   <span class="token number">6</span> <span class="token number">258.0</span> <span class="token number">110</span> <span class="token number">3.08</span> <span class="token number">3.215</span> <span class="token number">19.44</span>  <span class="token number">1</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">1</span><span class="token number">5</span>    Hornet Sportabout <span class="token number">18.7</span>   <span class="token number">8</span> <span class="token number">360.0</span> <span class="token number">175</span> <span class="token number">3.15</span> <span class="token number">3.440</span> <span class="token number">17.02</span>  <span class="token number">0</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">2</span><span class="token number">6</span>              Valiant <span class="token number">18.1</span>   <span class="token number">6</span> <span class="token number">225.0</span> <span class="token number">105</span> <span class="token number">2.76</span> <span class="token number">3.460</span> <span class="token number">20.22</span>  <span class="token number">1</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">1</span><span class="token number">7</span>           Duster <span class="token number">360</span> <span class="token number">14.3</span>   <span class="token number">8</span> <span class="token number">360.0</span> <span class="token number">245</span> <span class="token number">3.21</span> <span class="token number">3.570</span> <span class="token number">15.84</span>  <span class="token number">0</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">4</span><span class="token number">8</span>            Merc <span class="token number">240</span>D <span class="token number">24.4</span>   <span class="token number">4</span> <span class="token number">146.7</span>  <span class="token number">62</span> <span class="token number">3.69</span> <span class="token number">3.190</span> <span class="token number">20.00</span>  <span class="token number">1</span>  <span class="token number">0</span>    <span class="token number">4</span>    <span class="token number">2</span><span class="token number">9</span>             Merc <span class="token number">230</span> <span class="token number">22.8</span>   <span class="token number">4</span> <span class="token number">140.8</span>  <span class="token number">95</span> <span class="token number">3.92</span> <span class="token number">3.150</span> <span class="token number">22.90</span>  <span class="token number">1</span>  <span class="token number">0</span>    <span class="token number">4</span>    <span class="token number">2</span><span class="token number">10</span>            Merc <span class="token number">280</span> <span class="token number">19.2</span>   <span class="token number">6</span> <span class="token number">167.6</span> <span class="token number">123</span> <span class="token number">3.92</span> <span class="token number">3.440</span> <span class="token number">18.30</span>  <span class="token number">1</span>  <span class="token number">0</span>    <span class="token number">4</span>    <span class="token number">4</span><span class="token number">11</span>           Merc <span class="token number">280</span>C <span class="token number">17.8</span>   <span class="token number">6</span> <span class="token number">167.6</span> <span class="token number">123</span> <span class="token number">3.92</span> <span class="token number">3.440</span> <span class="token number">18.90</span>  <span class="token number">1</span>  <span class="token number">0</span>    <span class="token number">4</span>    <span class="token number">4</span><span class="token number">12</span>          Merc <span class="token number">450</span>SE <span class="token number">16.4</span>   <span class="token number">8</span> <span class="token number">275.8</span> <span class="token number">180</span> <span class="token number">3.07</span> <span class="token number">4.070</span> <span class="token number">17.40</span>  <span class="token number">0</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">3</span><span class="token number">13</span>          Merc <span class="token number">450</span>SL <span class="token number">17.3</span>   <span class="token number">8</span> <span class="token number">275.8</span> <span class="token number">180</span> <span class="token number">3.07</span> <span class="token number">3.730</span> <span class="token number">17.60</span>  <span class="token number">0</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">3</span><span class="token number">14</span>         Merc <span class="token number">450</span>SLC <span class="token number">15.2</span>   <span class="token number">8</span> <span class="token number">275.8</span> <span class="token number">180</span> <span class="token number">3.07</span> <span class="token number">3.780</span> <span class="token number">18.00</span>  <span class="token number">0</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">3</span><span class="token number">15</span>  Cadillac Fleetwood <span class="token number">10.4</span>   <span class="token number">8</span> <span class="token number">472.0</span> <span class="token number">205</span> <span class="token number">2.93</span> <span class="token number">5.250</span> <span class="token number">17.98</span>  <span class="token number">0</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">4</span><span class="token number">16</span> Lincoln Continental <span class="token number">10.4</span>   <span class="token number">8</span> <span class="token number">460.0</span> <span class="token number">215</span> <span class="token number">3.00</span> <span class="token number">5.424</span> <span class="token number">17.82</span>  <span class="token number">0</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">4</span><span class="token number">17</span>   Chrysler Imperial <span class="token number">14.7</span>   <span class="token number">8</span> <span class="token number">440.0</span> <span class="token number">230</span> <span class="token number">3.23</span> <span class="token number">5.345</span> <span class="token number">17.42</span>  <span class="token number">0</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">4</span><span class="token number">18</span>            Fiat <span class="token number">128</span> <span class="token number">32.4</span>   <span class="token number">4</span>  <span class="token number">78.7</span>  <span class="token number">66</span> <span class="token number">4.08</span> <span class="token number">2.200</span> <span class="token number">19.47</span>  <span class="token number">1</span>  <span class="token number">1</span>    <span class="token number">4</span>    <span class="token number">1</span><span class="token number">19</span>         Honda Civic <span class="token number">30.4</span>   <span class="token number">4</span>  <span class="token number">75.7</span>  <span class="token number">52</span> <span class="token number">4.93</span> <span class="token number">1.615</span> <span class="token number">18.52</span>  <span class="token number">1</span>  <span class="token number">1</span>    <span class="token number">4</span>    <span class="token number">2</span><span class="token number">20</span>      Toyota Corolla <span class="token number">33.9</span>   <span class="token number">4</span>  <span class="token number">71.1</span>  <span class="token number">65</span> <span class="token number">4.22</span> <span class="token number">1.835</span> <span class="token number">19.90</span>  <span class="token number">1</span>  <span class="token number">1</span>    <span class="token number">4</span>    <span class="token number">1</span><span class="token number">21</span>       Toyota Corona <span class="token number">21.5</span>   <span class="token number">4</span> <span class="token number">120.1</span>  <span class="token number">97</span> <span class="token number">3.70</span> <span class="token number">2.465</span> <span class="token number">20.01</span>  <span class="token number">1</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">1</span><span class="token number">22</span>    Dodge Challenger <span class="token number">15.5</span>   <span class="token number">8</span> <span class="token number">318.0</span> <span class="token number">150</span> <span class="token number">2.76</span> <span class="token number">3.520</span> <span class="token number">16.87</span>  <span class="token number">0</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">2</span><span class="token number">23</span>         AMC Javelin <span class="token number">15.2</span>   <span class="token number">8</span> <span class="token number">304.0</span> <span class="token number">150</span> <span class="token number">3.15</span> <span class="token number">3.435</span> <span class="token number">17.30</span>  <span class="token number">0</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">2</span><span class="token number">24</span>          Camaro Z28 <span class="token number">13.3</span>   <span class="token number">8</span> <span class="token number">350.0</span> <span class="token number">245</span> <span class="token number">3.73</span> <span class="token number">3.840</span> <span class="token number">15.41</span>  <span class="token number">0</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">4</span><span class="token number">25</span>    Pontiac Firebird <span class="token number">19.2</span>   <span class="token number">8</span> <span class="token number">400.0</span> <span class="token number">175</span> <span class="token number">3.08</span> <span class="token number">3.845</span> <span class="token number">17.05</span>  <span class="token number">0</span>  <span class="token number">0</span>    <span class="token number">3</span>    <span class="token number">2</span><span class="token number">26</span>           Fiat X1<span class="token operator">-</span><span class="token number">9</span> <span class="token number">27.3</span>   <span class="token number">4</span>  <span class="token number">79.0</span>  <span class="token number">66</span> <span class="token number">4.08</span> <span class="token number">1.935</span> <span class="token number">18.90</span>  <span class="token number">1</span>  <span class="token number">1</span>    <span class="token number">4</span>    <span class="token number">1</span><span class="token number">27</span>       Porsche <span class="token number">914</span><span class="token operator">-</span><span class="token number">2</span> <span class="token number">26.0</span>   <span class="token number">4</span> <span class="token number">120.3</span>  <span class="token number">91</span> <span class="token number">4.43</span> <span class="token number">2.140</span> <span class="token number">16.70</span>  <span class="token number">0</span>  <span class="token number">1</span>    <span class="token number">5</span>    <span class="token number">2</span><span class="token number">28</span>        Lotus Europa <span class="token number">30.4</span>   <span class="token number">4</span>  <span class="token number">95.1</span> <span class="token number">113</span> <span class="token number">3.77</span> <span class="token number">1.513</span> <span class="token number">16.90</span>  <span class="token number">1</span>  <span class="token number">1</span>    <span class="token number">5</span>    <span class="token number">2</span><span class="token number">29</span>      Ford Pantera L <span class="token number">15.8</span>   <span class="token number">8</span> <span class="token number">351.0</span> <span class="token number">264</span> <span class="token number">4.22</span> <span class="token number">3.170</span> <span class="token number">14.50</span>  <span class="token number">0</span>  <span class="token number">1</span>    <span class="token number">5</span>    <span class="token number">4</span><span class="token number">30</span>        Ferrari Dino <span class="token number">19.7</span>   <span class="token number">6</span> <span class="token number">145.0</span> <span class="token number">175</span> <span class="token number">3.62</span> <span class="token number">2.770</span> <span class="token number">15.50</span>  <span class="token number">0</span>  <span class="token number">1</span>    <span class="token number">5</span>    <span class="token number">6</span><span class="token number">31</span>       Maserati Bora <span class="token number">15.0</span>   <span class="token number">8</span> <span class="token number">301.0</span> <span class="token number">335</span> <span class="token number">3.54</span> <span class="token number">3.570</span> <span class="token number">14.60</span>  <span class="token number">0</span>  <span class="token number">1</span>    <span class="token number">5</span>    <span class="token number">8</span><span class="token number">32</span>          Volvo <span class="token number">142</span>E <span class="token number">21.4</span>   <span class="token number">4</span> <span class="token number">121.0</span> <span class="token number">109</span> <span class="token number">4.11</span> <span class="token number">2.780</span> <span class="token number">18.60</span>  <span class="token number">1</span>  <span class="token number">1</span>    <span class="token number">4</span>    <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆ é™¤è¡¨"><a href="#åˆ é™¤è¡¨" class="headerlink" title="åˆ é™¤è¡¨"></a>åˆ é™¤è¡¨</h2><p>æˆ‘ä»¬å¯ä»¥åˆ é™¤ MySQL æ•°æ®åº“ä¸­çš„è¡¨ï¼Œå°† <code>DROP TABLE</code> è¯­å¥ä¼ é€’åˆ° <code>dbSendQuery()</code> ä¸­ï¼Œå°±åƒæˆ‘ä»¬ä½¿ç”¨å®ƒæŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®ä¸€æ ·ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># List the tables available in this database.</span>dbListTables<span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token comment"># Delete the "mtcars" table.</span>dbSendQuery<span class="token punctuation">(</span>conn<span class="token punctuation">,</span> <span class="token string">'DROP TABLE IF EXISTS mtcars'</span><span class="token punctuation">)</span><span class="token comment"># List the tables available in this database.</span>dbListTables<span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token comment"># æ‰§è¡Œä¸Šé¢çš„ä»£ç åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¡¨åœ¨MySQLç¯å¢ƒä¸­è¢«åˆ é™¤ã€‚</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"employee_tbl"</span>     <span class="token string">"mtcars"</span>           <span class="token string">"tbl"</span>              <span class="token string">"tcount_tbl"</span>       <span class="token string">"transaction_test"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"employee_tbl"</span>     <span class="token string">"tbl"</span>              <span class="token string">"tcount_tbl"</span>       <span class="token string">"transaction_test"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ§®R </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R è¯­è¨€å›¾è¡¨</title>
      <link href="post/b35ac98a.html"/>
      <url>post/b35ac98a.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>R æä¾›äº†éå¸¸ä¸°å¯Œçš„ç»˜å›¾åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤ï¼š<code>demo(graphics)</code>ï¼ˆäºŒç»´å›¾è¡¨ï¼‰ æˆ–è€… <code>demo(persp)</code>ï¼ˆä¸‰ç»´å›¾è¡¨ï¼‰æ¥ä½“éªŒ R ç»˜å›¾åŠŸèƒ½çš„å¼ºå¤§ã€‚</p><p>å›¾å½¢å·¥å…·æ˜¯ R ç¯å¢ƒçš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ã€‚R æä¾›äº†å¤šç§ç»˜å›¾ç›¸å…³çš„å‘½ä»¤ï¼Œåˆ†æˆä¸‰ç±»ï¼š</p><ul><li><strong>é«˜çº§ç»˜å›¾å‘½ä»¤</strong>ï¼šåœ¨å›¾å½¢è®¾å¤‡ä¸Šäº§ç”Ÿä¸€ä¸ªæ–°çš„å›¾åŒºï¼Œå®ƒå¯èƒ½åŒ…æ‹¬åæ ‡è½´ï¼Œæ ‡ç­¾ï¼Œæ ‡é¢˜ç­‰ç­‰ã€‚</li><li><strong>ä½çº§ç»˜å›¾å‘½ä»¤</strong>ï¼šåœ¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å›¾ä¸ŠåŠ ä¸Šæ›´å¤šçš„å›¾å½¢å…ƒç´ ï¼Œå¦‚é¢å¤–çš„ç‚¹ï¼Œçº¿å’Œæ ‡ç­¾ã€‚</li><li><strong>äº¤äº’å¼å›¾å½¢å‘½ä»¤</strong>ï¼šå…è®¸äº¤äº’å¼åœ°ç”¨é¼ æ ‡åœ¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å›¾ä¸Šæ·»åŠ å›¾å½¢ä¿¡æ¯æˆ–è€…æå–å›¾å½¢ä¿¡æ¯ã€‚</li></ul><p>ä¸‹é¢ä»‹ç» R çš„å¸¸ç”¨å›¾è¡¨ã€‚</p><h1 id="æ¡å½¢å›¾"><a href="#æ¡å½¢å›¾" class="headerlink" title="æ¡å½¢å›¾"></a>æ¡å½¢å›¾</h1><p>æ¡å½¢å›¾è¡¨ç¤ºçŸ©å½¢æ¡ä¸­çš„æ•°æ®ï¼Œæ¡çš„é•¿åº¦ä¸å˜é‡çš„å€¼æˆæ¯”ä¾‹ã€‚R è¯­è¨€ä½¿ç”¨å‡½æ•° <code>barplot()</code> åˆ›å»ºæ¡å½¢å›¾ã€‚R è¯­è¨€å¯ä»¥åœ¨æ¡å½¢å›¾ä¸­ç»˜åˆ¶å‚ç›´å’Œæ°´å¹³æ¡ã€‚åœ¨æ¡å½¢å›¾ä¸­ï¼Œæ¯ä¸ªæ¡å¯ä»¥ç»™äºˆä¸åŒçš„é¢œè‰²ã€‚</p><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>åœ¨ R è¯­è¨€ä¸­åˆ›å»ºæ¡å½¢å›¾çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">barplot<span class="token punctuation">(</span>H<span class="token punctuation">,</span> xlab<span class="token punctuation">,</span> ylab<span class="token punctuation">,</span> main<span class="token punctuation">,</span> names.arg<span class="token punctuation">,</span> col<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>H</code> æ˜¯åŒ…å«åœ¨æ¡å½¢å›¾ä¸­ä½¿ç”¨çš„æ•°å€¼çš„å‘é‡æˆ–çŸ©é˜µã€‚</li><li><code>xlab</code> æ˜¯ <code>x</code> è½´çš„æ ‡ç­¾ã€‚</li><li><code>ylab</code> æ˜¯ <code>y</code> è½´çš„æ ‡ç­¾ã€‚</li><li><code>main</code> æ˜¯æ¡å½¢å›¾çš„æ ‡é¢˜ã€‚</li><li><code>names.arg</code> æ˜¯åœ¨æ¯ä¸ªæ¡ä¸‹å‡ºç°çš„åç§°çš„å‘é‡ã€‚</li><li><code>col</code> ç”¨äºå‘å›¾ä¸­çš„æ¡å½¢æä¾›é¢œè‰²ã€‚</li></ul><h2 id="åˆ›å»ºæ¡å½¢å›¾"><a href="#åˆ›å»ºæ¡å½¢å›¾" class="headerlink" title="åˆ›å»ºæ¡å½¢å›¾"></a>åˆ›å»ºæ¡å½¢å›¾</h2><p>ä½¿ç”¨è¾“å…¥å‘é‡å’Œæ¯ä¸ªæ¡çš„åç§°åˆ›å»ºä¸€ä¸ªç®€å•çš„æ¡å½¢å›¾ã€‚</p><p>ä»¥ä¸‹è„šæœ¬å°†åˆ›å»ºå¹¶ä¿å­˜å½“å‰ R è¯­è¨€å·¥ä½œç›®å½•ä¸­çš„æ¡å½¢å›¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data for the chart.</span>H <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"barchart.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the bar chart.</span>barplot<span class="token punctuation">(</span>H<span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/barchart.png" alt></p><h2 id="æ¡å½¢å›¾æ ‡ç­¾ï¼Œæ ‡é¢˜å’Œé¢œè‰²"><a href="#æ¡å½¢å›¾æ ‡ç­¾ï¼Œæ ‡é¢˜å’Œé¢œè‰²" class="headerlink" title="æ¡å½¢å›¾æ ‡ç­¾ï¼Œæ ‡é¢˜å’Œé¢œè‰²"></a>æ¡å½¢å›¾æ ‡ç­¾ï¼Œæ ‡é¢˜å’Œé¢œè‰²</h2><p>å¯ä»¥é€šè¿‡æ·»åŠ æ›´å¤šå‚æ•°æ¥æ‰©å±•æ¡å½¢å›¾çš„åŠŸèƒ½ã€‚ä¸»è¦å‚æ•°ç”¨äºæ·»åŠ æ ‡é¢˜ã€‚<code>col</code> å‚æ•°ç”¨äºå‘æ¡å½¢æ·»åŠ é¢œè‰²ã€‚<code>name.args</code> æ˜¯å…·æœ‰ä¸è¾“å…¥å‘é‡ç›¸åŒæ•°é‡çš„å€¼çš„å‘é‡ï¼Œä»¥æè¿°æ¯ä¸ªæ¡çš„å«ä¹‰ã€‚</p><p>ä»¥ä¸‹è„šæœ¬å°†åœ¨å½“å‰ R è¯­è¨€å·¥ä½œç›®å½•ä¸­åˆ›å»ºå¹¶ä¿å­˜æ¡å½¢å›¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data for the chart.</span>H <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">)</span>M <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"Mar"</span><span class="token punctuation">,</span> <span class="token string">"Apr"</span><span class="token punctuation">,</span> <span class="token string">"May"</span><span class="token punctuation">,</span> <span class="token string">"Jun"</span><span class="token punctuation">,</span> <span class="token string">"Jul"</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"barchart_months_revenue.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the bar chart.</span>barplot<span class="token punctuation">(</span>H<span class="token punctuation">,</span> names.arg <span class="token operator">=</span> M<span class="token punctuation">,</span> xlab <span class="token operator">=</span> <span class="token string">"Month"</span><span class="token punctuation">,</span> ylab <span class="token operator">=</span> <span class="token string">"Revenue"</span><span class="token punctuation">,</span> col <span class="token operator">=</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"Revenue chart"</span><span class="token punctuation">,</span> border <span class="token operator">=</span> <span class="token string">"red"</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/barchart_months_revenue.png" alt></p><h2 id="ç»„åˆæ¡å½¢å›¾å’Œå †ç§¯æ¡å½¢å›¾"><a href="#ç»„åˆæ¡å½¢å›¾å’Œå †ç§¯æ¡å½¢å›¾" class="headerlink" title="ç»„åˆæ¡å½¢å›¾å’Œå †ç§¯æ¡å½¢å›¾"></a>ç»„åˆæ¡å½¢å›¾å’Œå †ç§¯æ¡å½¢å›¾</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çŸ©é˜µä½œä¸ºè¾“å…¥å€¼ï¼Œåœ¨æ¯ä¸ªæ¡ä¸­åˆ›å»ºæ¡å½¢å›¾å’Œå †å ç»„çš„æ¡å½¢å›¾ã€‚</p><p>è¶…è¿‡ä¸¤ä¸ªå˜é‡è¡¨ç¤ºä¸ºç”¨äºåˆ›å»ºç»„åˆæ¡å½¢å›¾å’Œå †å æ¡å½¢å›¾çš„çŸ©é˜µã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the input vectors.</span>colors <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"green"</span><span class="token punctuation">,</span> <span class="token string">"orange"</span><span class="token punctuation">,</span> <span class="token string">"brown"</span><span class="token punctuation">)</span>months <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"Mar"</span><span class="token punctuation">,</span> <span class="token string">"Apr"</span><span class="token punctuation">,</span> <span class="token string">"May"</span><span class="token punctuation">,</span> <span class="token string">"Jun"</span><span class="token punctuation">,</span> <span class="token string">"Jul"</span><span class="token punctuation">)</span>regions <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"East"</span><span class="token punctuation">,</span> <span class="token string">"West"</span><span class="token punctuation">,</span> <span class="token string">"North"</span><span class="token punctuation">)</span><span class="token comment"># Create the matrix of the values.</span>Values <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> ncol <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> byrow <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"barchart_stacked.png"</span><span class="token punctuation">)</span><span class="token comment"># Create the bar chart.</span>barplot<span class="token punctuation">(</span>Values<span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"total revenue"</span><span class="token punctuation">,</span> names.arg <span class="token operator">=</span> months<span class="token punctuation">,</span> xlab <span class="token operator">=</span> <span class="token string">"month"</span><span class="token punctuation">,</span> ylab <span class="token operator">=</span> <span class="token string">"revenue"</span><span class="token punctuation">,</span> col <span class="token operator">=</span> colors<span class="token punctuation">)</span><span class="token comment"># Add the legend to the chart.</span>legend<span class="token punctuation">(</span><span class="token string">"topleft"</span><span class="token punctuation">,</span> regions<span class="token punctuation">,</span> cex <span class="token operator">=</span> <span class="token number">1.3</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> colors<span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/barchart_stacked.png" alt></p><h1 id="ç®±çº¿å›¾"><a href="#ç®±çº¿å›¾" class="headerlink" title="ç®±çº¿å›¾"></a>ç®±çº¿å›¾</h1><p>ç®±çº¿å›¾æ˜¯æ•°æ®é›†ä¸­çš„æ•°æ®åˆ†å¸ƒè‰¯å¥½çš„åº¦é‡ã€‚å®ƒå°†æ•°æ®é›†åˆ†æˆä¸‰ä¸ªå››åˆ†ä½æ•°ã€‚æ­¤å›¾è¡¨è¡¨ç¤ºæ•°æ®é›†ä¸­çš„æœ€å°å€¼ï¼Œæœ€å¤§å€¼ï¼Œä¸­å€¼ï¼Œç¬¬ä¸€å››åˆ†ä½æ•°å’Œç¬¬ä¸‰å››åˆ†ä½æ•°ã€‚å®ƒè¿˜å¯ç”¨äºé€šè¿‡ç»˜åˆ¶æ¯ä¸ªæ•°æ®é›†çš„ç®±çº¿å›¾æ¥æ¯”è¾ƒæ•°æ®é›†ä¹‹é—´çš„æ•°æ®åˆ†å¸ƒã€‚</p><p>R è¯­è¨€ä¸­ä½¿ç”¨ <code>boxplot()</code> å‡½æ•°æ¥åˆ›å»ºç®±çº¿å›¾ã€‚</p><h2 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>åœ¨ R è¯­è¨€ä¸­åˆ›å»ºç®±çº¿å›¾çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">boxplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> data<span class="token punctuation">,</span> notch<span class="token punctuation">,</span> varwidth<span class="token punctuation">,</span> names<span class="token punctuation">,</span> main<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code> æ˜¯å‘é‡æˆ–å…¬å¼ã€‚</li><li><code>data</code> æ˜¯æ•°æ®æ¡†ã€‚</li><li><code>notch</code> æ˜¯é€»è¾‘å€¼ã€‚è®¾ç½®ä¸º <code>TRUE</code> ä»¥ç»˜åˆ¶å‡¹å£ã€‚</li><li><code>varwidth</code> æ˜¯ä¸€ä¸ªé€»è¾‘å€¼ã€‚è®¾ç½®ä¸º <code>TRUE</code> ä»¥ç»˜åˆ¶ä¸æ ·æœ¬å¤§å°æˆæ¯”ä¾‹çš„æ¡†çš„å®½åº¦ã€‚</li><li><code>names</code> æ˜¯å°†æ‰“å°åœ¨æ¯ä¸ªç®±çº¿å›¾ä¸‹çš„ç»„æ ‡ç­¾ã€‚</li><li><code>main</code> ç”¨äºç»™å›¾è¡¨æ ‡é¢˜ã€‚</li></ul><p>æˆ‘ä»¬ä½¿ç”¨ R è¯­è¨€ç¯å¢ƒä¸­å¯ç”¨çš„æ•°æ®é›† <code>mtcars</code> æ¥åˆ›å»ºåŸºæœ¬ç®±çº¿å›¾ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ <code>mtcars</code> ä¸­çš„åˆ— <code>mpg</code> å’Œ <code>cyl</code>ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">input <span class="token operator">&lt;-</span> mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">'mpg'</span><span class="token punctuation">,</span> <span class="token string">'cyl'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>head<span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>                   mpg  cylMazda RX4         <span class="token number">21.0</span>   <span class="token number">6</span>Mazda RX4 Wag     <span class="token number">21.0</span>   <span class="token number">6</span>Datsun <span class="token number">710</span>        <span class="token number">22.8</span>   <span class="token number">4</span>Hornet <span class="token number">4</span> Drive    <span class="token number">21.4</span>   <span class="token number">6</span>Hornet Sportabout <span class="token number">18.7</span>   <span class="token number">8</span>Valiant           <span class="token number">18.1</span>   <span class="token number">6</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆ›å»ºç®±çº¿å›¾"><a href="#åˆ›å»ºç®±çº¿å›¾" class="headerlink" title="åˆ›å»ºç®±çº¿å›¾"></a>åˆ›å»ºç®±çº¿å›¾</h2><p>ä»¥ä¸‹è„šæœ¬å°†ä¸º <code>mpg</code>ï¼ˆè‹±é‡Œ / åŠ ä»‘ï¼‰å’Œ <code>cyl</code>ï¼ˆæ°”ç¼¸æ•°ï¼‰ä¹‹é—´çš„å…³ç³»åˆ›å»ºç®±çº¿å›¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"boxplot.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the chart.</span>boxplot<span class="token punctuation">(</span>mpg <span class="token operator">~</span> cyl<span class="token punctuation">,</span> data <span class="token operator">=</span> mtcars<span class="token punctuation">,</span> xlab <span class="token operator">=</span> <span class="token string">"Number of Cylinders"</span><span class="token punctuation">,</span> ylab <span class="token operator">=</span> <span class="token string">"Miles Per Gallon"</span><span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"Mileage Data"</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/boxplot.png" alt></p><h2 id="å¸¦æ§½çš„ç®±çº¿å›¾"><a href="#å¸¦æ§½çš„ç®±çº¿å›¾" class="headerlink" title="å¸¦æ§½çš„ç®±çº¿å›¾"></a>å¸¦æ§½çš„ç®±çº¿å›¾</h2><p>æˆ‘ä»¬å¯ä»¥ç»˜åˆ¶å¸¦æ§½çš„ç®±çº¿å›¾ï¼Œä»¥äº†è§£ä¸åŒæ•°æ®ç»„çš„ä¸­å€¼å¦‚ä½•ç›¸äº’åŒ¹é…ã€‚ä»¥ä¸‹è„šæœ¬å°†ä¸ºæ¯ä¸ªæ•°æ®ç»„åˆ›å»ºä¸€ä¸ªå¸¦ç¼ºå£çš„ç®±çº¿å›¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"boxplot_with_notch.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the chart.</span>boxplot<span class="token punctuation">(</span>mpg <span class="token operator">~</span> cyl<span class="token punctuation">,</span> data <span class="token operator">=</span> mtcars<span class="token punctuation">,</span> xlab <span class="token operator">=</span> <span class="token string">"Number of Cylinders"</span><span class="token punctuation">,</span> ylab <span class="token operator">=</span> <span class="token string">"Miles Per Gallon"</span><span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"Mileage Data"</span><span class="token punctuation">,</span> notch <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> varwidth <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> col <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"green"</span><span class="token punctuation">,</span> <span class="token string">"yellow"</span><span class="token punctuation">,</span> <span class="token string">"purple"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> names <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"High"</span><span class="token punctuation">,</span> <span class="token string">"Medium"</span><span class="token punctuation">,</span> <span class="token string">"Low"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/boxplot_with_notch.png" alt></p><h1 id="ç›´æ–¹å›¾"><a href="#ç›´æ–¹å›¾" class="headerlink" title="ç›´æ–¹å›¾"></a>ç›´æ–¹å›¾</h1><p>ç›´æ–¹å›¾è¡¨ç¤ºè¢«å­˜å‚¨åˆ°èŒƒå›´ä¸­çš„å˜é‡çš„å€¼çš„é¢‘ç‡ã€‚ç›´æ–¹å›¾ç±»ä¼¼äºæ¡å½¢å›¾ï¼Œä½†ä¸åŒä¹‹å¤„åœ¨äºå°†å€¼åˆ†ç»„ä¸ºè¿ç»­èŒƒå›´ã€‚ç›´æ–¹å›¾ä¸­çš„æ¯ä¸ªæŸ±è¡¨ç¤ºè¯¥èŒƒå›´ä¸­å­˜åœ¨çš„å€¼çš„æ•°é‡çš„é«˜åº¦ã€‚</p><p>R è¯­è¨€ä½¿ç”¨ <code>hist()</code> å‡½æ•°åˆ›å»ºç›´æ–¹å›¾ã€‚æ­¤å‡½æ•°ä½¿ç”¨å‘é‡ä½œä¸ºè¾“å…¥ï¼Œå¹¶ä½¿ç”¨ä¸€äº›æ›´å¤šçš„å‚æ•°æ¥ç»˜åˆ¶ç›´æ–¹å›¾ã€‚</p><h2 id="è¯­æ³•-2"><a href="#è¯­æ³•-2" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>ä½¿ç”¨ R è¯­è¨€åˆ›å»ºç›´æ–¹å›¾çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">hist<span class="token punctuation">(</span>v<span class="token punctuation">,</span> main<span class="token punctuation">,</span> xlab<span class="token punctuation">,</span> xlim<span class="token punctuation">,</span> ylim<span class="token punctuation">,</span> breaks<span class="token punctuation">,</span> col<span class="token punctuation">,</span> border<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>v</code> æ˜¯åŒ…å«ç›´æ–¹å›¾ä¸­ä½¿ç”¨çš„æ•°å€¼çš„å‘é‡ã€‚</li><li><code>main</code> è¡¨ç¤ºå›¾è¡¨çš„æ ‡é¢˜ã€‚</li><li><code>col</code> ç”¨äºè®¾ç½®æ¡çš„é¢œè‰²ã€‚</li><li><code>border</code> ç”¨äºè®¾ç½®æ¯ä¸ªæ¡çš„è¾¹æ¡†é¢œè‰²ã€‚</li><li><code>xlab</code> ç”¨äºç»™å‡º <code>x</code> è½´çš„æè¿°ã€‚</li><li><code>xlim</code> ç”¨äºæŒ‡å®š <code>x</code> è½´ä¸Šçš„å€¼çš„èŒƒå›´ã€‚</li><li><code>ylim</code> ç”¨äºæŒ‡å®š <code>y</code> è½´ä¸Šçš„å€¼çš„èŒƒå›´ã€‚</li><li><code>break</code> ç”¨äºæåŠæ¯ä¸ªæ¡çš„å®½åº¦ã€‚</li></ul><h2 id="åˆ›å»ºç›´æ–¹å›¾"><a href="#åˆ›å»ºç›´æ–¹å›¾" class="headerlink" title="åˆ›å»ºç›´æ–¹å›¾"></a>åˆ›å»ºç›´æ–¹å›¾</h2><p>ä½¿ç”¨è¾“å…¥ <code>vector</code>ï¼Œ<code>label</code>ï¼Œ<code>col</code> å’Œè¾¹ç•Œå‚æ•°åˆ›å»ºä¸€ä¸ªç®€å•çš„ç›´æ–¹å›¾ã€‚</p><p>ä¸‹é¢ç»™å‡ºçš„è„šæœ¬å°†åˆ›å»ºå¹¶ä¿å­˜å½“å‰R è¯­è¨€å·¥ä½œç›®å½•ä¸­çš„ç›´æ–¹å›¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create data for the graph.</span>v <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"histogram.png"</span><span class="token punctuation">)</span><span class="token comment"># Create the histogram.</span>hist<span class="token punctuation">(</span>v<span class="token punctuation">,</span> xlab <span class="token operator">=</span> <span class="token string">"Weight"</span><span class="token punctuation">,</span> col <span class="token operator">=</span> <span class="token string">"yellow"</span><span class="token punctuation">,</span> border <span class="token operator">=</span> <span class="token string">"blue"</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/histogram.png" alt></p><h2 id="X-å’Œ-Y-å€¼çš„èŒƒå›´"><a href="#X-å’Œ-Y-å€¼çš„èŒƒå›´" class="headerlink" title="X å’Œ Y å€¼çš„èŒƒå›´"></a>X å’Œ Y å€¼çš„èŒƒå›´</h2><p>è¦æŒ‡å®š X è½´å’Œ Y è½´å…è®¸çš„å€¼çš„èŒƒå›´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>xlim</code> å’Œ <code>ylim</code> å‚æ•°ã€‚</p><p>æ¯ä¸ªæ¡çš„å®½åº¦å¯ä»¥é€šè¿‡ä½¿ç”¨é—´éš”æ¥ç¡®å®šã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create data for the graph.</span>v <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"histogram_lim_breaks.png"</span><span class="token punctuation">)</span><span class="token comment"># Create the histogram.</span>hist<span class="token punctuation">(</span>v<span class="token punctuation">,</span> xlab <span class="token operator">=</span> <span class="token string">"Weight"</span><span class="token punctuation">,</span> col <span class="token operator">=</span> <span class="token string">"green"</span><span class="token punctuation">,</span> border <span class="token operator">=</span> <span class="token string">"red"</span><span class="token punctuation">,</span> xlim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> breaks <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/histogram_lim_breaks.png" alt></p><h1 id="æŠ˜çº¿å›¾"><a href="#æŠ˜çº¿å›¾" class="headerlink" title="æŠ˜çº¿å›¾"></a>æŠ˜çº¿å›¾</h1><p>æŠ˜çº¿å›¾æ˜¯é€šè¿‡åœ¨å®ƒä»¬ä¹‹é—´ç»˜åˆ¶çº¿æ®µæ¥è¿æ¥ä¸€ç³»åˆ—ç‚¹çš„å›¾ã€‚è¿™äº›ç‚¹åœ¨å®ƒä»¬çš„åæ ‡ï¼ˆé€šå¸¸æ˜¯ X åæ ‡ï¼‰å€¼ä¹‹ä¸€ä¸­æ’åºã€‚æŠ˜çº¿å›¾é€šå¸¸ç”¨äºè¯†åˆ«æ•°æ®ä¸­çš„è¶‹åŠ¿ã€‚</p><p>R è¯­è¨€ä¸­çš„ <code>plot()</code> å‡½æ•°ç”¨äºåˆ›å»ºæŠ˜çº¿å›¾ã€‚</p><h2 id="è¯­æ³•-3"><a href="#è¯­æ³•-3" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>åœ¨ R è¯­è¨€ä¸­åˆ›å»ºæŠ˜çº¿å›¾çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">plot<span class="token punctuation">(</span>v<span class="token punctuation">,</span> type<span class="token punctuation">,</span> col<span class="token punctuation">,</span> xlab<span class="token punctuation">,</span> ylab<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>v</code> æ˜¯åŒ…å«æ•°å€¼çš„å‘é‡ã€‚</li><li><code>type</code> é‡‡ç”¨å€¼ <code>p</code> ä»…ç»˜åˆ¶ç‚¹ï¼Œ<code>l</code> ä»…ç»˜åˆ¶çº¿å’Œ <code>o</code> ç»˜åˆ¶ç‚¹å’Œçº¿ã€‚</li><li><code>xlab</code> æ˜¯xè½´çš„æ ‡ç­¾ã€‚</li><li><code>ylab</code> æ˜¯yè½´çš„æ ‡ç­¾ã€‚</li><li><code>main</code> æ˜¯å›¾è¡¨çš„æ ‡é¢˜ã€‚</li><li><code>col</code> ç”¨äºç»™ç‚¹å’Œçº¿çš„é¢œè‰²ã€‚</li></ul><h2 id="åˆ›å»ºæŠ˜çº¿å›¾"><a href="#åˆ›å»ºæŠ˜çº¿å›¾" class="headerlink" title="åˆ›å»ºæŠ˜çº¿å›¾"></a>åˆ›å»ºæŠ˜çº¿å›¾</h2><p>ä½¿ç”¨è¾“å…¥å‘é‡å’Œç±»å‹å‚æ•° <code>o</code> åˆ›å»ºç®€å•çš„æŠ˜çº¿å›¾ã€‚ä»¥ä¸‹è„šæœ¬å°†åœ¨å½“å‰ R å·¥ä½œç›®å½•ä¸­åˆ›å»ºå¹¶ä¿å­˜æŠ˜çº¿å›¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data for the chart.</span>v <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"line_chart.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the bar chart. </span>plot<span class="token punctuation">(</span>v<span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">"o"</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/line_chart.png" alt></p><h2 id="æŠ˜çº¿å›¾æ ‡é¢˜ï¼Œé¢œè‰²å’Œæ ‡ç­¾"><a href="#æŠ˜çº¿å›¾æ ‡é¢˜ï¼Œé¢œè‰²å’Œæ ‡ç­¾" class="headerlink" title="æŠ˜çº¿å›¾æ ‡é¢˜ï¼Œé¢œè‰²å’Œæ ‡ç­¾"></a>æŠ˜çº¿å›¾æ ‡é¢˜ï¼Œé¢œè‰²å’Œæ ‡ç­¾</h2><p>çº¿å›¾çš„ç‰¹å¾å¯ä»¥é€šè¿‡ä½¿ç”¨é™„åŠ å‚æ•°æ¥æ‰©å±•ã€‚æˆ‘ä»¬å‘ç‚¹å’Œçº¿æ·»åŠ é¢œè‰²ï¼Œä¸ºå›¾è¡¨æ·»åŠ æ ‡é¢˜ï¼Œå¹¶å‘è½´æ·»åŠ æ ‡ç­¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data for the chart.</span>v <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"line_chart_label_colored.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the bar chart.</span>plot<span class="token punctuation">(</span>v<span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">"o"</span><span class="token punctuation">,</span> col <span class="token operator">=</span> <span class="token string">"red"</span><span class="token punctuation">,</span> xlab <span class="token operator">=</span> <span class="token string">"Month"</span><span class="token punctuation">,</span> ylab <span class="token operator">=</span> <span class="token string">"Rain fall"</span><span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"Rain fall chart"</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/line_chart_label_colored.png" alt></p><h2 id="å¤šçº¿å‹æŠ˜çº¿å›¾"><a href="#å¤šçº¿å‹æŠ˜çº¿å›¾" class="headerlink" title="å¤šçº¿å‹æŠ˜çº¿å›¾"></a>å¤šçº¿å‹æŠ˜çº¿å›¾</h2><p>é€šè¿‡ä½¿ç”¨ <code>lines()</code> å‡½æ•°ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ªå›¾è¡¨ä¸Šç»˜åˆ¶å¤šæ¡çº¿ã€‚</p><p>åœ¨ç»˜åˆ¶ç¬¬ä¸€è¡Œä¹‹åï¼Œ<code>lines()</code> å‡½æ•°å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„å‘é‡ä½œä¸ºè¾“å…¥æ¥ç»˜åˆ¶å›¾è¡¨ä¸­çš„ç¬¬äºŒè¡Œã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data for the chart.</span>v <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">)</span>t <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"line_chart_2_lines.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the bar chart.</span>plot<span class="token punctuation">(</span>v<span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">"o"</span><span class="token punctuation">,</span> col <span class="token operator">=</span> <span class="token string">"red"</span><span class="token punctuation">,</span> xlab <span class="token operator">=</span> <span class="token string">"Month"</span><span class="token punctuation">,</span> ylab <span class="token operator">=</span> <span class="token string">"Rain fall"</span><span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"Rain fall chart"</span><span class="token punctuation">)</span>lines<span class="token punctuation">(</span>t<span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">"o"</span><span class="token punctuation">,</span> col <span class="token operator">=</span> <span class="token string">"blue"</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/line_chart_2_lines.png" alt></p><h1 id="æ•£ç‚¹å›¾"><a href="#æ•£ç‚¹å›¾" class="headerlink" title="æ•£ç‚¹å›¾"></a>æ•£ç‚¹å›¾</h1><p>æ•£ç‚¹å›¾æ˜¾ç¤ºåœ¨ç¬›å¡å°”å¹³é¢ä¸­ç»˜åˆ¶çš„è®¸å¤šç‚¹ã€‚æ¯ä¸ªç‚¹è¡¨ç¤ºä¸¤ä¸ªå˜é‡çš„å€¼ã€‚åœ¨æ°´å¹³è½´ä¸Šé€‰æ‹©ä¸€ä¸ªå˜é‡ï¼Œåœ¨å‚ç›´è½´ä¸Šé€‰æ‹©å¦ä¸€ä¸ªå˜é‡ã€‚</p><p>R è¯­è¨€ä½¿ç”¨ <code>plot()</code> å‡½æ•°åˆ›å»ºç®€å•æ•£ç‚¹å›¾ã€‚</p><h2 id="è¯­æ³•-4"><a href="#è¯­æ³•-4" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>åœ¨ R è¯­è¨€ä¸­åˆ›å»ºæ•£ç‚¹å›¾çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> main<span class="token punctuation">,</span> xlab<span class="token punctuation">,</span> ylab<span class="token punctuation">,</span> xlim<span class="token punctuation">,</span> ylim<span class="token punctuation">,</span> axes<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code> æ˜¯å…¶å€¼ä¸ºæ°´å¹³åæ ‡çš„æ•°æ®é›†ã€‚</li><li><code>y</code> æ˜¯å…¶å€¼æ˜¯å‚ç›´åæ ‡çš„æ•°æ®é›†ã€‚</li><li><code>main</code> è¦æ˜¯å›¾å½¢çš„å›¾å—ã€‚</li><li><code>xlab</code> æ˜¯æ°´å¹³è½´ä¸Šçš„æ ‡ç­¾ã€‚</li><li><code>ylab</code> æ˜¯å‚ç›´è½´ä¸Šçš„æ ‡ç­¾ã€‚</li><li><code>xlim</code> æ˜¯ç”¨äºç»˜å›¾çš„ <code>x</code> çš„å€¼çš„æé™ã€‚</li><li><code>ylim</code> æ˜¯ç”¨äºç»˜å›¾çš„ <code>y</code> çš„å€¼çš„æé™ã€‚</li><li><code>axes</code> æŒ‡ç¤ºæ˜¯å¦åº”åœ¨ç»˜å›¾ä¸Šç»˜åˆ¶ä¸¤ä¸ªè½´ã€‚</li></ul><h2 id="åˆ›å»ºæ•£ç‚¹å›¾"><a href="#åˆ›å»ºæ•£ç‚¹å›¾" class="headerlink" title="åˆ›å»ºæ•£ç‚¹å›¾"></a>åˆ›å»ºæ•£ç‚¹å›¾</h2><p>æˆ‘ä»¬ä½¿ç”¨ R è¯­è¨€ç¯å¢ƒä¸­å¯ç”¨çš„æ•°æ®é›† <code>mtcars</code> æ¥åˆ›å»ºåŸºæœ¬æ•£ç‚¹å›¾ã€‚è®©æˆ‘ä»¬ä½¿ç”¨ <code>mtcars</code> ä¸­çš„ <code>wt</code> å’Œ <code>mpg</code> åˆ—ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">input <span class="token operator">&lt;-</span> mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">'wt'</span><span class="token punctuation">,</span> <span class="token string">'mpg'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>head<span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>                    wt      mpgMazda RX4           <span class="token number">2.620</span>   <span class="token number">21.0</span>Mazda RX4 Wag       <span class="token number">2.875</span>   <span class="token number">21.0</span>Datsun <span class="token number">710</span>          <span class="token number">2.320</span>   <span class="token number">22.8</span>Hornet <span class="token number">4</span> Drive      <span class="token number">3.215</span>   <span class="token number">21.4</span>Hornet Sportabout   <span class="token number">3.440</span>   <span class="token number">18.7</span>Valiant             <span class="token number">3.460</span>   <span class="token number">18.1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä»¥ä¸‹è„šæœ¬å°†ä¸º <code>wt</code>ï¼ˆé‡é‡ï¼‰å’Œ <code>mpg</code>ï¼ˆè‹±é‡Œ/åŠ ä»‘ï¼‰ä¹‹é—´çš„å…³ç³»åˆ›å»ºä¸€ä¸ªæ•£ç‚¹å›¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Get the input values.</span>input <span class="token operator">&lt;-</span> mtcars<span class="token punctuation">[</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">'wt'</span><span class="token punctuation">,</span> <span class="token string">'mpg'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"scatterplot.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the chart for cars with weight between 2.5 to 5 and mileage between 15 and 30.</span>plot<span class="token punctuation">(</span>x <span class="token operator">=</span> input<span class="token operator">$</span>wt<span class="token punctuation">,</span> y <span class="token operator">=</span> input<span class="token operator">$</span>mpg<span class="token punctuation">,</span> xlab <span class="token operator">=</span> <span class="token string">"Weight"</span><span class="token punctuation">,</span> ylab <span class="token operator">=</span> <span class="token string">"Milage"</span><span class="token punctuation">,</span> xlim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ylim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"Weight vs Milage"</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/scatterplot.png" alt></p><h2 id="æ•£ç‚¹å›¾çŸ©é˜µ"><a href="#æ•£ç‚¹å›¾çŸ©é˜µ" class="headerlink" title="æ•£ç‚¹å›¾çŸ©é˜µ"></a>æ•£ç‚¹å›¾çŸ©é˜µ</h2><p>å½“æˆ‘ä»¬æœ‰ä¸¤ä¸ªä»¥ä¸Šçš„å˜é‡ï¼Œæˆ‘ä»¬æƒ³æ‰¾åˆ°ä¸€ä¸ªå˜é‡å’Œå…¶ä½™å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•£ç‚¹å›¾çŸ©é˜µã€‚æˆ‘ä»¬ä½¿ç”¨ <code>pairs()</code> å‡½æ•°åˆ›å»ºæ•£ç‚¹å›¾çš„çŸ©é˜µã€‚</p><h3 id="è¯­æ³•-5"><a href="#è¯­æ³•-5" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p>åœ¨ R ä¸­åˆ›å»ºæ•£ç‚¹å›¾çŸ©é˜µçš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">pairs<span class="token punctuation">(</span>formula<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>formula</code> è¡¨ç¤ºæˆå¯¹ä½¿ç”¨çš„ä¸€ç³»åˆ—å˜é‡ã€‚</li><li><code>data</code> è¡¨ç¤ºå°†ä»å…¶è·å–å˜é‡çš„æ•°æ®é›†ã€‚</li></ul><h3 id="åˆ›å»ºæ•£ç‚¹å›¾çŸ©é˜µ"><a href="#åˆ›å»ºæ•£ç‚¹å›¾çŸ©é˜µ" class="headerlink" title="åˆ›å»ºæ•£ç‚¹å›¾çŸ©é˜µ"></a>åˆ›å»ºæ•£ç‚¹å›¾çŸ©é˜µ</h3><p>æ¯ä¸ªå˜é‡ä¸æ¯ä¸ªå‰©ä½™å˜é‡é…å¯¹ã€‚ä¸ºæ¯å¯¹ç»˜åˆ¶æ•£ç‚¹å›¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"scatterplot_matrices.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the matrices between 4 variables giving 12 plots.</span><span class="token comment"># One variable with 3 others and total 4 variables.</span>pairs<span class="token punctuation">(</span><span class="token operator">~</span>wt <span class="token operator">+</span> mpg <span class="token operator">+</span> disp <span class="token operator">+</span> cyl<span class="token punctuation">,</span> data <span class="token operator">=</span> mtcars<span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"Scatterplot Matrix"</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æ‰§è¡Œä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹è¾“å‡ºã€‚</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/scatterplot_matrices.png" alt></p><h1 id="é¥¼çŠ¶å›¾"><a href="#é¥¼çŠ¶å›¾" class="headerlink" title="é¥¼çŠ¶å›¾"></a>é¥¼çŠ¶å›¾</h1><p>R ç¼–ç¨‹è¯­è¨€æœ‰è®¸å¤šåº“æ¥åˆ›å»ºå›¾è¡¨å’Œå›¾è¡¨ã€‚é¥¼å›¾æ˜¯å°†å€¼è¡¨ç¤ºä¸ºå…·æœ‰ä¸åŒé¢œè‰²çš„åœ†çš„åˆ‡ç‰‡ã€‚åˆ‡ç‰‡è¢«æ ‡è®°ï¼Œå¹¶ä¸”å¯¹åº”äºæ¯ä¸ªç‰‡çš„æ•°å­—ä¹Ÿåœ¨å›¾è¡¨ä¸­è¡¨ç¤ºã€‚</p><p>åœ¨ R è¯­è¨€ä¸­ï¼Œé¥¼å›¾æ˜¯ä½¿ç”¨ <code>pie()</code> å‡½æ•°åˆ›å»ºçš„ï¼Œå®ƒä½¿ç”¨æ­£æ•°ä½œä¸ºå‘é‡è¾“å…¥ã€‚é™„åŠ å‚æ•°ç”¨äºæ§åˆ¶æ ‡ç­¾ï¼Œé¢œè‰²ï¼Œæ ‡é¢˜ç­‰ã€‚</p><h2 id="è¯­æ³•-6"><a href="#è¯­æ³•-6" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>ä½¿ç”¨ R è¯­è¨€åˆ›å»ºé¥¼å›¾çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">pie<span class="token punctuation">(</span>x<span class="token punctuation">,</span> labels<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> main<span class="token punctuation">,</span> col<span class="token punctuation">,</span> clockwise<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code> æ˜¯åŒ…å«é¥¼å›¾ä¸­ä½¿ç”¨çš„æ•°å€¼çš„å‘é‡ã€‚</li><li><code>labels</code> ç”¨äºç»™å‡ºåˆ‡ç‰‡çš„æè¿°ã€‚</li><li><code>radius</code> è¡¨ç¤ºé¥¼å›¾åœ†çš„åŠå¾„ï¼ˆå€¼ <code>-1</code> å’Œ <code>+1</code> ä¹‹é—´ï¼‰ã€‚</li><li><code>main</code> è¡¨ç¤ºå›¾è¡¨çš„æ ‡é¢˜ã€‚</li><li><code>col</code> è¡¨ç¤ºè°ƒè‰²æ¿ã€‚</li><li><code>clockwise</code> æ˜¯æŒ‡ç¤ºç‰‡æ®µæ˜¯é¡ºæ—¶é’ˆè¿˜æ˜¯é€†æ—¶é’ˆç»˜åˆ¶çš„é€»è¾‘å€¼ã€‚</li></ul><h2 id="åˆ›å»ºé¥¼çŠ¶å›¾"><a href="#åˆ›å»ºé¥¼çŠ¶å›¾" class="headerlink" title="åˆ›å»ºé¥¼çŠ¶å›¾"></a>åˆ›å»ºé¥¼çŠ¶å›¾</h2><p>ä½¿ç”¨è¾“å…¥å‘é‡å’Œæ ‡ç­¾åˆ›å»ºä¸€ä¸ªéå¸¸ç®€å•çš„é¥¼å›¾ã€‚ä»¥ä¸‹è„šæœ¬å°†åˆ›å»ºå¹¶ä¿å­˜å½“å‰ R è¯­è¨€å·¥ä½œç›®å½•ä¸­çš„é¥¼å›¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create data for the graph.</span>x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">)</span>labels <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"London"</span><span class="token punctuation">,</span> <span class="token string">"New York"</span><span class="token punctuation">,</span> <span class="token string">"Singapore"</span><span class="token punctuation">,</span> <span class="token string">"Mumbai"</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"pie.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the chart.</span>pie<span class="token punctuation">(</span>x<span class="token punctuation">,</span> labels<span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/pie.png" alt></p><h2 id="é¥¼å›¾æ ‡é¢˜å’Œé¢œè‰²"><a href="#é¥¼å›¾æ ‡é¢˜å’Œé¢œè‰²" class="headerlink" title="é¥¼å›¾æ ‡é¢˜å’Œé¢œè‰²"></a>é¥¼å›¾æ ‡é¢˜å’Œé¢œè‰²</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘å‡½æ•°ä¸­æ·»åŠ æ›´å¤šå‚æ•°æ¥æ‰©å±•å›¾è¡¨çš„åŠŸèƒ½ã€‚æˆ‘ä»¬å°†ä½¿ç”¨å‚æ•° <code>main</code> å‘å›¾è¡¨æ·»åŠ æ ‡é¢˜ï¼Œå¦ä¸€ä¸ªå‚æ•°æ˜¯ <code>col</code>ï¼Œå®ƒå°†åœ¨ç»˜åˆ¶å›¾è¡¨æ—¶ä½¿ç”¨å½©è™¹è‰²æ¿ã€‚æ‰˜ç›˜çš„é•¿åº¦åº”ä¸å›¾è¡¨ä¸­çš„å€¼çš„æ•°é‡ç›¸åŒã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>length(x)</code>ã€‚</p><p>ä»¥ä¸‹è„šæœ¬å°†åˆ›å»ºå¹¶ä¿å­˜å½“å‰ R è¯­è¨€å·¥ä½œç›®å½•ä¸­çš„é¥¼å›¾ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create data for the graph.</span>x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">)</span>labels <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"London"</span><span class="token punctuation">,</span> <span class="token string">"New York"</span><span class="token punctuation">,</span> <span class="token string">"Singapore"</span><span class="token punctuation">,</span> <span class="token string">"Mumbai"</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"pie_title_colours.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the chart with title and rainbow color pallet.</span>pie<span class="token punctuation">(</span>x<span class="token punctuation">,</span> labels<span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"City pie chart"</span><span class="token punctuation">,</span> col <span class="token operator">=</span> rainbow<span class="token punctuation">(</span>length<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/pie_title_colours.png" alt></p><h2 id="åˆ‡ç‰‡ç™¾åˆ†æ¯”å’Œå›¾è¡¨å›¾ä¾‹"><a href="#åˆ‡ç‰‡ç™¾åˆ†æ¯”å’Œå›¾è¡¨å›¾ä¾‹" class="headerlink" title="åˆ‡ç‰‡ç™¾åˆ†æ¯”å’Œå›¾è¡¨å›¾ä¾‹"></a>åˆ‡ç‰‡ç™¾åˆ†æ¯”å’Œå›¾è¡¨å›¾ä¾‹</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºå…¶ä»–å›¾è¡¨å˜é‡æ¥æ·»åŠ åˆ‡ç‰‡ç™¾åˆ†æ¯”å’Œå›¾è¡¨å›¾ä¾‹ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create data for the graph.</span>x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">)</span>labels <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"London"</span><span class="token punctuation">,</span> <span class="token string">"New York"</span><span class="token punctuation">,</span> <span class="token string">"Singapore"</span><span class="token punctuation">,</span> <span class="token string">"Mumbai"</span><span class="token punctuation">)</span>piepercent<span class="token operator">&lt;-</span> round<span class="token punctuation">(</span><span class="token number">100</span><span class="token operator">*</span>x<span class="token operator">/</span>sum<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"pie_percentage_legends.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the chart.</span>pie<span class="token punctuation">(</span>x<span class="token punctuation">,</span> labels <span class="token operator">=</span> piepercent<span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"City pie chart"</span><span class="token punctuation">,</span> col <span class="token operator">=</span> rainbow<span class="token punctuation">(</span>length<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> legend<span class="token punctuation">(</span><span class="token string">"topright"</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">"London"</span><span class="token punctuation">,</span> <span class="token string">"New York"</span><span class="token punctuation">,</span> <span class="token string">"Singapore"</span><span class="token punctuation">,</span> <span class="token string">"Mumbai"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cex <span class="token operator">=</span> <span class="token number">0.8</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> rainbow<span class="token punctuation">(</span>length<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/pie_percentage_legends.png" alt></p><h2 id="3Dé¥¼å›¾"><a href="#3Dé¥¼å›¾" class="headerlink" title="3Dé¥¼å›¾"></a>3Dé¥¼å›¾</h2><p>å¯ä»¥ä½¿ç”¨å…¶ä»–è½¯ä»¶åŒ…ç»˜åˆ¶å…·æœ‰ 3 ä¸ªç»´åº¦çš„é¥¼å›¾ã€‚è½¯ä»¶åŒ… <code>plotrix</code> æœ‰ä¸€ä¸ªåä¸º <code>pie3D()</code> çš„å‡½æ•°ï¼Œç”¨äºæ­¤ã€‚</p><p>å¦‚æœæ²¡æœ‰å®‰è£… <code>plotrix</code> åŒ…å¯ä»¥ä½¿ç”¨ <code>install.packages(&quot;plotrix&quot;)</code> è¯­å¥å®‰è£…ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Get the library.</span>library<span class="token punctuation">(</span>plotrix<span class="token punctuation">)</span><span class="token comment"># Create data for the graph.</span>x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">)</span>lbl <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"London"</span><span class="token punctuation">,</span> <span class="token string">"New York"</span><span class="token punctuation">,</span> <span class="token string">"Singapore"</span><span class="token punctuation">,</span> <span class="token string">"Mumbai"</span><span class="token punctuation">)</span><span class="token comment"># Give the chart file a name.</span>png<span class="token punctuation">(</span>file <span class="token operator">=</span> <span class="token string">"3d_pie_chart.png"</span><span class="token punctuation">)</span><span class="token comment"># Plot the chart.</span>pie3D<span class="token punctuation">(</span>x<span class="token punctuation">,</span> labels <span class="token operator">=</span> lbl<span class="token punctuation">,</span> explode <span class="token operator">=</span> <span class="token number">0.1</span><span class="token punctuation">,</span> main <span class="token operator">=</span> <span class="token string">"Pie Chart of Countries"</span><span class="token punctuation">)</span><span class="token comment"># Save the file.</span>dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_chart/3d_pie_chart.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ§®R </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>R è¯­è¨€æ•™ç¨‹</title>
      <link href="post/de0e67e.html"/>
      <url>post/de0e67e.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><h2 id="R-çš„ç®€ä»‹"><a href="#R-çš„ç®€ä»‹" class="headerlink" title="R çš„ç®€ä»‹"></a>R çš„ç®€ä»‹</h2><ul><li>R è¯­è¨€æ˜¯ç”¨äºç»Ÿè®¡åˆ†æï¼Œå›¾å½¢è¡¨ç¤ºå’ŒæŠ¥å‘Šçš„ç¼–ç¨‹è¯­è¨€å’Œè½¯ä»¶ç¯å¢ƒã€‚R è¯­è¨€ç”± Ross Ihaka å’Œ Robert Gentleman åœ¨æ–°è¥¿å…°å¥¥å…‹å…°å¤§å­¦åˆ›å»ºï¼Œç›®å‰ç”± R è¯­è¨€å¼€å‘æ ¸å¿ƒå›¢é˜Ÿå¼€å‘ã€‚</li><li>R è¯­è¨€çš„æ ¸å¿ƒæ˜¯è§£é‡Šè®¡ç®—æœºè¯­è¨€ï¼Œå…¶å…è®¸åˆ†æ”¯å’Œå¾ªç¯ä»¥åŠä½¿ç”¨å‡½æ•°çš„æ¨¡å—åŒ–ç¼–ç¨‹ã€‚R è¯­è¨€å…è®¸ä¸ä»¥ Cï¼ŒC ++ï¼Œ.Netï¼ŒPython æˆ– FORTRAN è¯­è¨€ç¼–å†™çš„è¿‡ç¨‹é›†æˆä»¥æé«˜æ•ˆç‡ã€‚</li><li>R è¯­è¨€åœ¨ GNU é€šç”¨å…¬å…±è®¸å¯è¯ä¸‹å…è´¹æä¾›ï¼Œå¹¶ä¸ºå„ç§æ“ä½œç³»ç»Ÿï¼ˆå¦‚ Linuxï¼ŒWindows å’Œ Macï¼‰æä¾›é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶ç‰ˆæœ¬ã€‚</li><li>R æ˜¯ä¸€ä¸ªåœ¨ GNU é£æ ¼çš„å‰¯æœ¬å·¦ä¾§çš„è‡ªç”±è½¯ä»¶ï¼ŒGNU é¡¹ç›®çš„å®˜æ–¹éƒ¨åˆ†å«åš GNU S.</li></ul><h2 id="R-çš„æ¼”å˜"><a href="#R-çš„æ¼”å˜" class="headerlink" title="R çš„æ¼”å˜"></a>R çš„æ¼”å˜</h2><p>R è¯­è¨€æœ€åˆæ˜¯ç”±æ–°è¥¿å…°å¥¥å…‹å…°å¥¥å…‹å…°å¤§å­¦ç»Ÿè®¡ç³»çš„ Ross Ihaka å’Œ Robert Gentleman å†™çš„ã€‚R è¯­è¨€äº 1993 å¹´é¦–æ¬¡äº®ç›¸ã€‚</p><ul><li>ä¸€å¤§ç¾¤äººé€šè¿‡å‘é€ä»£ç å’Œé”™è¯¯æŠ¥å‘Šå¯¹ R åšå‡ºäº†è´¡çŒ®ã€‚</li><li>è‡ª 1997 å¹´å¹´ä¸­ä»¥æ¥ï¼Œå·²ç»æœ‰ä¸€ä¸ªæ ¸å¿ƒç»„ï¼ˆR æ ¸å¿ƒå›¢é˜Ÿï¼‰å¯ä»¥ä¿®æ”¹ R æºä»£ç å½’æ¡£ã€‚</li></ul><h2 id="R-çš„ç‰¹ç‚¹"><a href="#R-çš„ç‰¹ç‚¹" class="headerlink" title="R çš„ç‰¹ç‚¹"></a>R çš„ç‰¹ç‚¹</h2><p>å¦‚å‰æ‰€è¿°ï¼ŒR è¯­è¨€æ˜¯ç”¨äºç»Ÿè®¡åˆ†æï¼Œå›¾å½¢è¡¨ç¤ºå’ŒæŠ¥å‘Šçš„ç¼–ç¨‹è¯­è¨€å’Œè½¯ä»¶ç¯å¢ƒã€‚ä»¥ä¸‹æ˜¯ R è¯­è¨€çš„é‡è¦ç‰¹ç‚¹ï¼š</p><ul><li>R è¯­è¨€æ˜¯ä¸€ç§å¼€å‘è‰¯å¥½ï¼Œç®€å•æœ‰æ•ˆçš„ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬æ¡ä»¶ï¼Œå¾ªç¯ï¼Œç”¨æˆ·å®šä¹‰çš„é€’å½’å‡½æ•°ä»¥åŠè¾“å…¥å’Œè¾“å‡ºè®¾æ–½ã€‚</li><li>R è¯­è¨€å…·æœ‰æœ‰æ•ˆçš„æ•°æ®å¤„ç†å’Œå­˜å‚¨è®¾æ–½ï¼Œ</li><li>R è¯­è¨€æä¾›äº†ä¸€å¥—ç”¨äºæ•°ç»„ï¼Œåˆ—è¡¨ï¼Œå‘é‡å’ŒçŸ©é˜µè®¡ç®—çš„è¿ç®—ç¬¦ã€‚</li><li>R è¯­è¨€ä¸ºæ•°æ®åˆ†ææä¾›äº†å¤§å‹ï¼Œä¸€è‡´å’Œé›†æˆçš„å·¥å…·é›†åˆã€‚</li><li>R è¯­è¨€æä¾›ç›´æ¥åœ¨è®¡ç®—æœºä¸Šæˆ–åœ¨çº¸å¼ ä¸Šæ‰“å°çš„å›¾å½¢è®¾æ–½ç”¨äºæ•°æ®åˆ†æå’Œæ˜¾ç¤ºã€‚</li></ul><p>R è¯­è¨€æ˜¯ä¸–ç•Œä¸Šæœ€å¹¿æ³›ä½¿ç”¨çš„ç»Ÿè®¡ç¼–ç¨‹è¯­è¨€ã€‚å®ƒæ˜¯æ•°æ®ç§‘å­¦å®¶çš„ç¬¬ä¸€é€‰æ‹©ï¼Œå¹¶ç”±ä¸€ä¸ªå……æ»¡æ´»åŠ›å’Œæœ‰æ‰åçš„è´¡çŒ®è€…ç¤¾åŒºæ”¯æŒã€‚</p><h1 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h1><p>æ ¹æ®éœ€è¦ï¼Œæ‚¨å¯ä»¥åœ¨ R è¯­è¨€å‘½ä»¤æç¤ºç¬¦å¤„ç¼–ç¨‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ R è¯­è¨€è„šæœ¬æ–‡ä»¶ç¼–å†™ç¨‹åºã€‚</p><h2 id="å‘½ä»¤æç¤ºç¬¦"><a href="#å‘½ä»¤æç¤ºç¬¦" class="headerlink" title="å‘½ä»¤æç¤ºç¬¦"></a>å‘½ä»¤æç¤ºç¬¦</h2><p>å¦‚æœä½ å·²ç»é…ç½®å¥½ R è¯­è¨€ç¯å¢ƒï¼Œé‚£ä¹ˆä½ åªéœ€è¦æŒ‰ä¸€ä¸‹çš„å‘½ä»¤ä¾¿å¯è½»æ˜“å¼€å¯å‘½ä»¤æç¤ºç¬¦</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ R<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>è¿™å°†å¯åŠ¨ R è¯­è¨€è§£é‡Šå™¨ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªæç¤º <code>&gt;</code> åœ¨é‚£é‡Œä½ å¯ä»¥å¼€å§‹è¾“å…¥ä½ çš„ç¨‹åºï¼Œå…·ä½“å¦‚ä¸‹ã€‚</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&gt; myString &lt;- &quot;Hello, World!&quot;&gt; print(myString)[1] &quot;Hello, World!&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>åœ¨è¿™é‡Œï¼Œç¬¬ä¸€ä¸ªè¯­å¥å…ˆå®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ <code>myString</code>ï¼Œå¹¶å°† <code>Helloï¼ŒWorldï¼</code> èµ‹å€¼å…¶ä¸­ï¼Œç¬¬äºŒå¥åˆ™ä½¿ç”¨ <code>print()</code> è¯­å¥å°†å˜é‡ <code>myString</code> çš„å†…å®¹è¿›è¡Œæ‰“å°ã€‚</p><h2 id="è„šæœ¬æ–‡ä»¶"><a href="#è„šæœ¬æ–‡ä»¶" class="headerlink" title="è„šæœ¬æ–‡ä»¶"></a>è„šæœ¬æ–‡ä»¶</h2><p>é€šå¸¸ï¼Œæ‚¨å°†é€šè¿‡åœ¨è„šæœ¬æ–‡ä»¶ä¸­ç¼–å†™ç¨‹åºæ¥æ‰§è¡Œç¼–ç¨‹ï¼Œç„¶ååœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹ä½¿ç”¨ R è§£é‡Šå™¨ï¼ˆç§°ä¸º <code>Rscript</code>ï¼‰æ¥æ‰§è¡Œè¿™äº›è„šæœ¬ã€‚æ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹åœ¨ä¸€ä¸ªå‘½åä¸º <code>test.R</code> çš„æ–‡æœ¬æ–‡ä»¶ä¸­ç¼–å†™ä¸‹é¢çš„ä»£ç </p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># My first program in R ProgrammingmyString &lt;- &quot;Hello, World!&quot;print(myString)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>å°†ä¸Šè¿°ä»£ç ä¿å­˜åœ¨ <code>test.R</code> æ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨ Linux å‘½ä»¤æç¤ºç¬¦ä¸‹æ‰§è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚å³ä½¿æ‚¨ä½¿ç”¨çš„æ˜¯ Windows æˆ–å…¶ä»–ç³»ç»Ÿï¼Œè¯­æ³•ä¹Ÿå°†ä¿æŒä¸å˜ã€‚</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ Rscript test.R <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>å½“æˆ‘ä»¬è¿è¡Œä¸Šé¢çš„ç¨‹åºï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[1] &quot;Hello, World!&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><p>æ³¨é‡Šèƒ½å¸®åŠ©æ‚¨è§£é‡Š R è¯­è¨€ç¨‹åºä¸­çš„è„šæœ¬ï¼Œå®ƒä»¬åœ¨å®é™…æ‰§è¡Œç¨‹åºæ—¶ä¼šè¢«è§£é‡Šå™¨å¿½ç•¥ã€‚å•ä¸ªæ³¨é‡Šä½¿ç”¨ <code>#</code> åœ¨è¯­å¥çš„å¼€å¤´å†™å…¥ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># My first program in R Programming</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>R è¯­è¨€ä¸æ”¯æŒå¤šè¡Œæ³¨é‡Šï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå°æŠ€å·§ï¼Œå¦‚ä¸‹</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">FALSE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   "This is a demo <span class="token keyword">for</span> multi<span class="token operator">-</span>line comments and it should be put inside either a single      OR double quote"<span class="token punctuation">&#125;</span>myString <span class="token operator">&lt;-</span> <span class="token string">"Hello, World!"</span>print<span class="token punctuation">(</span>myString<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>è™½ç„¶ä¸Šé¢çš„æ³¨é‡Šå°†ç”± R è§£é‡Šå™¨æ‰§è¡Œï¼Œä½†å®ƒä»¬ä¸ä¼šå¹²æ‰°æ‚¨çš„å®é™…ç¨‹åºã€‚ä½†æ˜¯ä½ å¿…é¡»ä¸ºå†…å®¹åŠ ä¸Šå•å¼•å·æˆ–åŒå¼•å·ã€‚</p><h1 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h1><p>é€šå¸¸ï¼Œåœ¨ä½¿ç”¨ä»»ä½•ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç¨‹æ—¶ï¼Œæ‚¨éœ€è¦ä½¿ç”¨å„ç§å˜é‡æ¥å­˜å‚¨å„ç§ä¿¡æ¯ã€‚å˜é‡åªæ˜¯ä¿ç•™å€¼çš„å­˜å‚¨ä½ç½®ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œä½ å¿…é¡»åœ¨å†…å­˜ä¸­ä¿ç•™ä¸€äº›ç©ºé—´æ¥å­˜å‚¨å®ƒä»¬ã€‚</p><p>æ‚¨å¯èƒ½æƒ³å­˜å‚¨å„ç§æ•°æ®ç±»å‹çš„ä¿¡æ¯ï¼Œå¦‚å­—ç¬¦ï¼Œå®½å­—ç¬¦ï¼Œæ•´æ•°ï¼Œæµ®ç‚¹ï¼ŒåŒæµ®ç‚¹ï¼Œå¸ƒå°”ç­‰ã€‚åŸºäºå˜é‡çš„æ•°æ®ç±»å‹ï¼Œæ“ä½œç³»ç»Ÿåˆ†é…å†…å­˜å¹¶å†³å®šä»€ä¹ˆå¯ä»¥å­˜å‚¨åœ¨ä¿ç•™å†…å­˜ä¸­ã€‚</p><p>ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚ C ä¸­çš„ C å’Œ Javaï¼‰ç›¸åï¼Œå˜é‡ä¸ä¼šå£°æ˜ä¸ºæŸç§æ•°æ®ç±»å‹ã€‚å˜é‡åˆ†é…æœ‰ R å¯¹è±¡ï¼ŒR å¯¹è±¡çš„æ•°æ®ç±»å‹å˜ä¸ºå˜é‡çš„æ•°æ®ç±»å‹ã€‚å°½ç®¡æœ‰å¾ˆå¤šç±»å‹çš„ R å¯¹è±¡ï¼Œä½†ç»å¸¸ä½¿ç”¨çš„æ˜¯ï¼š</p><ul><li><a href="#Vectors-å‘é‡">Vectors å‘é‡</a></li><li><a href="#Lists-åˆ—è¡¨">Lists åˆ—è¡¨</a></li><li><a href="#Matrices-çŸ©é˜µ">Matrices çŸ©é˜µ</a></li><li><a href="#Arrays-æ•°ç»„">Arrays æ•°ç»„</a></li><li><a href="#Factors-å› å­">Factors å› å­</a></li><li><a href="#Data-Frames-æ•°æ®æ¡†">Data Frames æ•°æ®æ¡†</a></li></ul><p>è¿™äº›å¯¹è±¡ä¸­æœ€ç®€å•çš„æ˜¯å‘é‡å¯¹è±¡ï¼Œå¹¶ä¸”è¿™äº›åŸå­å‘é‡æœ‰å…­ç§æ•°æ®ç±»å‹ï¼Œä¹Ÿç§°ä¸ºå…­ç±»å‘é‡ã€‚å…¶ä»– R å¯¹è±¡å»ºç«‹åœ¨åŸå­å‘é‡ä¹‹ä¸Šã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">æ•°æ®ç±»å‹</th><th style="text-align:center">å–å€¼</th><th style="text-align:left">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">Logicalï¼ˆé€»è¾‘å‹ï¼‰</td><td style="text-align:center">TRUE, FALSE</td><td style="text-align:left"><code>v &lt;- TRUE</code> <br> <code>print(class(v))</code> <br> <code>[1] &quot;logical&quot;</code></td></tr><tr><td style="text-align:center">Numericï¼ˆæ•°å­—ï¼‰</td><td style="text-align:center">12.3ï¼Œ5ï¼Œ999</td><td style="text-align:left"><code>v &lt;- 23.5</code> <br> <code>print(class(v))</code> <br> <code>[1] &quot;numeric&quot;</code></td></tr><tr><td style="text-align:center">Integerï¼ˆæ•´å‹ï¼‰</td><td style="text-align:center">2Lï¼Œ34Lï¼Œ0L</td><td style="text-align:left"><code>v &lt;- 2L</code> <br> <code>print(class(v))</code> <br> <code>[1] &quot;integer&quot;</code></td></tr><tr><td style="text-align:center">Complexï¼ˆå¤åˆå‹ï¼‰</td><td style="text-align:center">3 + 2i</td><td style="text-align:left"><code>v &lt;- 2+5i</code> <br> <code>print(class(v))</code> <br> <code>[1] &quot;complex&quot;</code></td></tr><tr><td style="text-align:center">Characterï¼ˆå­—ç¬¦ï¼‰</td><td style="text-align:center">&#39;a&#39; , &quot;good&quot;, &quot;TRUE&quot;, &#39;23.4&#39;</td><td style="text-align:left"><code>v &lt;- &quot;TRUE&quot;</code> <br> <code>print(class(v))</code> <br> <code>[1] &quot;character&quot;</code></td></tr><tr><td style="text-align:center">Rawï¼ˆåŸå‹ï¼‰</td><td style="text-align:center">&quot;Hello&quot; è¢«å­˜å‚¨ä¸º 48 65 6c 6c 6f</td><td style="text-align:left"><code>v &lt;- charToRaw(&quot;Hello&quot;)</code> <br> <code>print(class(v))</code> <br> <code>[1] &quot;raw&quot;</code></td></tr></tbody></table></div><p>åœ¨ R ç¼–ç¨‹ä¸­ï¼Œéå¸¸åŸºæœ¬çš„æ•°æ®ç±»å‹æ˜¯ç§°ä¸ºå‘é‡çš„ R å¯¹è±¡ï¼Œå…¶ä¿å­˜å¦‚ä¸Šæ‰€ç¤ºçš„ä¸åŒç±»çš„å…ƒç´ ã€‚è¯·æ³¨æ„ï¼Œåœ¨ R ä¸­ï¼Œç±»çš„æ•°é‡ä¸ä»…é™äºä¸Šè¿°å…­ç§ç±»å‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¸å¤šåŸå­å‘é‡å¹¶åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œå…¶ç±»å°†æˆä¸ºæ•°ç»„ã€‚</p><h2 id="Vectors-å‘é‡"><a href="#Vectors-å‘é‡" class="headerlink" title="Vectors å‘é‡"></a>Vectors å‘é‡</h2><p>å½“ä½ æƒ³ç”¨å¤šä¸ªå…ƒç´ åˆ›å»ºå‘é‡æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨ <code>c()</code> å‡½æ•°ï¼Œè¿™æ„å‘³ç€å°†å…ƒç´ ç»„åˆæˆä¸€ä¸ªå‘é‡ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a vector.</span>apple <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"green"</span><span class="token punctuation">,</span> <span class="token string">"yellow"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>apple<span class="token punctuation">)</span><span class="token comment"># Get the class of the vector.</span>print<span class="token punctuation">(</span>class<span class="token punctuation">(</span>apple<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"red"</span>    <span class="token string">"green"</span>  <span class="token string">"yellow"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"character"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ›´å¤šæ–¹æ³•å®ä¾‹è¯·ç‚¹å‡»æŸ¥çœ‹ R è¯­è¨€<a href="#å‘é‡">å‘é‡</a>ç« èŠ‚ã€‚</p><h2 id="Lists-åˆ—è¡¨"><a href="#Lists-åˆ—è¡¨" class="headerlink" title="Lists åˆ—è¡¨"></a>Lists åˆ—è¡¨</h2><p>åˆ—è¡¨æ˜¯ä¸€ä¸ª R å¯¹è±¡ï¼Œå®ƒå¯ä»¥åœ¨å…¶ä¸­åŒ…å«è®¸å¤šä¸åŒç±»å‹çš„å…ƒç´ ï¼Œå¦‚å‘é‡ï¼Œå‡½æ•°ç”šè‡³å…¶ä¸­çš„å¦ä¸€ä¸ªåˆ—è¡¨ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a list.</span>list1 <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">21.3</span><span class="token punctuation">,</span> sin<span class="token punctuation">)</span><span class="token comment"># Print the list.</span>print<span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">2</span> <span class="token number">5</span> <span class="token number">3</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">21.3</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token keyword">function</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span>  .Primitive<span class="token punctuation">(</span><span class="token string">"sin"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ›´å¤šæ–¹æ³•å®ä¾‹è¯·ç‚¹å‡»æŸ¥çœ‹ R è¯­è¨€<a href="#åˆ—è¡¨">åˆ—è¡¨</a>ç« èŠ‚ã€‚</p><h2 id="Matrices-çŸ©é˜µ"><a href="#Matrices-çŸ©é˜µ" class="headerlink" title="Matrices çŸ©é˜µ"></a>Matrices çŸ©é˜µ</h2><p>çŸ©é˜µæ˜¯äºŒç»´çŸ©å½¢æ•°æ®é›†ã€‚å®ƒå¯ä»¥ä½¿ç”¨çŸ©é˜µå‡½æ•°çš„å‘é‡è¾“å…¥åˆ›å»ºã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a matrix.</span>M <span class="token operator">=</span> matrix<span class="token punctuation">(</span> c<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> ncol <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> byrow <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">"a"</span>  <span class="token string">"a"</span>  <span class="token string">"b"</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">"c"</span>  <span class="token string">"b"</span>  <span class="token string">"a"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ›´å¤šæ–¹æ³•å®ä¾‹è¯·ç‚¹å‡»æŸ¥çœ‹ R è¯­è¨€<a href="#çŸ©é˜µ">çŸ©é˜µ</a>ç« èŠ‚ã€‚</p><h2 id="Arrays-æ•°ç»„"><a href="#Arrays-æ•°ç»„" class="headerlink" title="Arrays æ•°ç»„"></a>Arrays æ•°ç»„</h2><p>è™½ç„¶çŸ©é˜µè¢«é™åˆ¶ä¸ºäºŒç»´ï¼Œä½†é˜µåˆ—å¯ä»¥å…·æœ‰ä»»ä½•æ•°é‡çš„ç»´åº¦ã€‚æ•°ç»„å‡½æ•°ä½¿ç”¨ä¸€ä¸ª <code>dim</code> å±æ€§åˆ›å»ºæ‰€éœ€çš„ç»´æ•°ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ ä¸º <code>3x3</code> ä¸ªçŸ©é˜µã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create an array.</span>a <span class="token operator">&lt;-</span> array<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">1</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">"green"</span>  <span class="token string">"yellow"</span> <span class="token string">"green"</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">"yellow"</span> <span class="token string">"green"</span>  <span class="token string">"yellow"</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">"green"</span>  <span class="token string">"yellow"</span> <span class="token string">"green"</span> <span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">2</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">"yellow"</span> <span class="token string">"green"</span>  <span class="token string">"yellow"</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">"green"</span>  <span class="token string">"yellow"</span> <span class="token string">"green"</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">"yellow"</span> <span class="token string">"green"</span>  <span class="token string">"yellow"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ›´å¤šæ–¹æ³•å®ä¾‹è¯·ç‚¹å‡»æŸ¥çœ‹ R è¯­è¨€<a href="#æ•°ç»„">æ•°ç»„</a>ç« èŠ‚ã€‚</p><h2 id="Factors-å› å­"><a href="#Factors-å› å­" class="headerlink" title="Factors å› å­"></a>Factors å› å­</h2><p>å› å­æ˜¯ä½¿ç”¨å‘é‡åˆ›å»ºçš„ R å¯¹è±¡ã€‚å®ƒå°†å‘é‡ä¸å‘é‡ä¸­å…ƒç´ çš„ä¸åŒå€¼ä¸€èµ·å­˜å‚¨ä¸ºæ ‡ç­¾ã€‚æ ‡ç­¾æ€»æ˜¯å­—ç¬¦ï¼Œä¸ç®¡å®ƒåœ¨è¾“å…¥å‘é‡ä¸­æ˜¯æ•°å­—è¿˜æ˜¯å­—ç¬¦æˆ–å¸ƒå°”ç­‰ã€‚å®ƒä»¬åœ¨ç»Ÿè®¡å»ºæ¨¡ä¸­éå¸¸æœ‰ç”¨ã€‚ä½¿ç”¨ <code>factor()</code> å‡½æ•°åˆ›å»ºå› å­ã€‚<code>nlevels</code> å‡½æ•°ç»™å‡ºçº§åˆ«è®¡æ•°ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a vector.</span>apple_colors <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">)</span><span class="token comment"># Create a factor object.</span>factor_apple <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>apple_colors<span class="token punctuation">)</span><span class="token comment"># Print the factor.</span>print<span class="token punctuation">(</span>factor_apple<span class="token punctuation">)</span>print<span class="token punctuation">(</span>nlevels<span class="token punctuation">(</span>factor_apple<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> green  green  yellow  red   red   red   green Levels<span class="token operator">:</span> green red yellow<span class="token comment"># applying the nlevels function we can know the number of distinct values</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ›´å¤šæ–¹æ³•å®ä¾‹è¯·ç‚¹å‡»æŸ¥çœ‹ R è¯­è¨€<a href="#å› å­">å› å­</a>ç« èŠ‚ã€‚</p><h2 id="Data-Frames-æ•°æ®æ¡†"><a href="#Data-Frames-æ•°æ®æ¡†" class="headerlink" title="Data Frames æ•°æ®æ¡†"></a>Data Frames æ•°æ®æ¡†</h2><p>æ•°æ®æ¡†æ˜¯è¡¨æ ¼æ•°æ®å¯¹è±¡ã€‚ä¸æ•°æ®æ¡†ä¸­çš„çŸ©é˜µä¸åŒï¼Œæ¯åˆ—å¯ä»¥åŒ…å«ä¸åŒçš„æ•°æ®æ¨¡å¼ã€‚ç¬¬ä¸€åˆ—å¯ä»¥æ˜¯æ•°å­—ï¼Œè€Œç¬¬äºŒåˆ—å¯ä»¥æ˜¯å­—ç¬¦ï¼Œç¬¬ä¸‰åˆ—å¯ä»¥æ˜¯é€»è¾‘çš„ã€‚å®ƒæ˜¯ç­‰é•¿åº¦çš„å‘é‡çš„åˆ—è¡¨ã€‚ä½¿ç”¨ <code>data.frame()</code> å‡½æ•°åˆ›å»ºæ•°æ®æ¡†ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data frame.</span>BMI <span class="token operator">&lt;-</span>  <span class="token operator">|</span> data.frame<span class="token punctuation">(</span>   gender <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Male"</span><span class="token punctuation">,</span> <span class="token string">"Male"</span><span class="token punctuation">,</span> <span class="token string">"Female"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   height <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">152</span><span class="token punctuation">,</span> <span class="token number">171.5</span><span class="token punctuation">,</span> <span class="token number">165</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   weight <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">93</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   Age <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>BMI<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  gender height weight Age<span class="token number">1</span>   Male  <span class="token number">152.0</span>     <span class="token number">81</span>  <span class="token number">42</span><span class="token number">2</span>   Male  <span class="token number">171.5</span>     <span class="token number">93</span>  <span class="token number">38</span><span class="token number">3</span> Female  <span class="token number">165.0</span>     <span class="token number">78</span>  <span class="token number">26</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ›´å¤šæ–¹æ³•å®ä¾‹è¯·ç‚¹å‡»æŸ¥çœ‹ R è¯­è¨€<a href="#æ•°æ®æ¡†">æ•°æ®æ¡†</a>ç« èŠ‚ã€‚</p><h1 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h1><p>å˜é‡ä¸ºæˆ‘ä»¬æä¾›äº†æˆ‘ä»¬çš„ç¨‹åºå¯ä»¥æ“ä½œçš„å‘½åå­˜å‚¨ã€‚R è¯­è¨€ä¸­çš„å˜é‡å¯ä»¥å­˜å‚¨åŸå­å‘é‡ï¼ŒåŸå­å‘é‡ç»„æˆ–è®¸å¤š <code>Robject</code> çš„ç»„åˆã€‚æœ‰æ•ˆçš„å˜é‡åç§°ç”±å­—æ¯ï¼Œæ•°å­—å’Œç‚¹æˆ–ä¸‹åˆ’çº¿å­—ç¬¦ç»„æˆã€‚å˜é‡åä»¥å­—æ¯æˆ–ä¸ä»¥æ•°å­—åè·Ÿçš„ç‚¹å¼€å¤´ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">å˜é‡å</th><th style="text-align:center">åˆæ³•æ€§</th><th style="text-align:center">åŸå› </th></tr></thead><tbody><tr><td style="text-align:center">var_name2.</td><td style="text-align:center">æœ‰æ•ˆ</td><td style="text-align:center">æœ‰å­—æ¯ï¼Œæ•°å­—ï¼Œç‚¹å’Œä¸‹åˆ’çº¿</td></tr><tr><td style="text-align:center">VAR_NAMEï¼…</td><td style="text-align:center">æ— æ•ˆ</td><td style="text-align:center">æœ‰å­—ç¬¦&#39;ï¼…&#39;ã€‚åªæœ‰ç‚¹(.)å’Œä¸‹åˆ’çº¿å…è®¸çš„ã€‚</td></tr><tr><td style="text-align:center">2var_name</td><td style="text-align:center">æ— æ•ˆ</td><td style="text-align:center">ä»¥æ•°å­—å¼€å¤´</td></tr><tr><td style="text-align:center">.var_name, var.name</td><td style="text-align:center">æœ‰æ•ˆ</td><td style="text-align:center">å¯ä»¥ç”¨ä¸€ä¸ªç‚¹(.)ï¼Œä½†å¯åŠ¨ç‚¹(.)ï¼Œä¸åº”è¯¥åè·Ÿä¸€ä¸ªæ•°å­—ã€‚</td></tr><tr><td style="text-align:center">.2var_name</td><td style="text-align:center">æ— æ•ˆ</td><td style="text-align:center">èµ·å§‹ç‚¹åé¢æ˜¯æ•°å­—ä½¿å…¶æ— æ•ˆã€‚</td></tr><tr><td style="text-align:center">_var_name</td><td style="text-align:center">æ— æ•ˆ</td><td style="text-align:center">å¼€å¤´_è¿™æ˜¯æ— æ•ˆçš„</td></tr></tbody></table></div><p>å¯ä»¥ä½¿ç”¨å‘å·¦ï¼Œå‘å³å’Œç­‰äºè¿ç®—ç¬¦æ¥ä¸ºå˜é‡åˆ†é…å€¼ã€‚å¯ä»¥ä½¿ç”¨ <code>print()</code> æˆ– <code>cat()</code> å‡½æ•°æ‰“å°å˜é‡çš„å€¼ã€‚<code>cat()</code> å‡½æ•°å°†å¤šä¸ªé¡¹ç›®ç»„åˆæˆè¿ç»­æ‰“å°è¾“å‡ºã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Assignment using equal operator.</span>var.<span class="token number">1</span> <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token comment"># Assignment using leftward operator.</span>var.<span class="token number">2</span> <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"learn"</span><span class="token punctuation">,</span> <span class="token string">"R"</span><span class="token punctuation">)</span><span class="token comment"># Assignment using rightward operator.</span>c<span class="token punctuation">(</span><span class="token boolean">TRUE</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-></span> var.<span class="token number">3</span>print<span class="token punctuation">(</span>var.<span class="token number">1</span><span class="token punctuation">)</span>cat <span class="token punctuation">(</span><span class="token string">"var.1 is "</span><span class="token punctuation">,</span> var.<span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>cat <span class="token punctuation">(</span><span class="token string">"var.2 is "</span><span class="token punctuation">,</span> var.<span class="token number">2</span> <span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>cat <span class="token punctuation">(</span><span class="token string">"var.3 is "</span><span class="token punctuation">,</span> var.<span class="token number">3</span> <span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>var.<span class="token number">1</span> is  <span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> var.<span class="token number">2</span> is  learn R var.<span class="token number">3</span> is  <span class="token number">1</span> <span class="token number">1</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å˜é‡çš„æ•°æ®ç±»å‹åœ¨ R è¯­è¨€ä¸­ï¼Œå˜é‡æœ¬èº«æ²¡æœ‰å£°æ˜ä»»ä½•æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯è·å–åˆ†é…ç»™å®ƒçš„ R å¯¹è±¡çš„æ•°æ®ç±»å‹ã€‚æ‰€ä»¥ R ç§°ä¸ºåŠ¨æ€ç±»å‹è¯­è¨€ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨ç¨‹åºä¸­ä½¿ç”¨åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œä¸€æ¬¡åˆä¸€æ¬¡åœ°æ›´æ”¹å˜é‡çš„æ•°æ®ç±»å‹ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">var_x <span class="token operator">&lt;-</span> <span class="token string">"Hello"</span>cat<span class="token punctuation">(</span><span class="token string">"The class of var_x is "</span><span class="token punctuation">,</span> class<span class="token punctuation">(</span>var_x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>var_x <span class="token operator">&lt;-</span> <span class="token number">34.5</span>cat<span class="token punctuation">(</span><span class="token string">"  Now the class of var_x is "</span><span class="token punctuation">,</span> class<span class="token punctuation">(</span>var_x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>var_x <span class="token operator">&lt;-</span> <span class="token number">27L</span>cat<span class="token punctuation">(</span><span class="token string">"   Next the class of var_x becomes "</span><span class="token punctuation">,</span> class<span class="token punctuation">(</span>var_x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>The class of var_x is  character    Now the class of var_x is  numeric       Next the class of var_x becomes  integer<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="æŸ¥æ‰¾å˜é‡"><a href="#æŸ¥æ‰¾å˜é‡" class="headerlink" title="æŸ¥æ‰¾å˜é‡"></a>æŸ¥æ‰¾å˜é‡</h2><p>è¦çŸ¥é“å·¥ä½œç©ºé—´ä¸­å½“å‰å¯ç”¨çš„æ‰€æœ‰å˜é‡ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>ls()</code> å‡½æ•°ã€‚<code>ls()</code> å‡½æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨æ¨¡å¼æ¥åŒ¹é…å˜é‡åã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">print<span class="token punctuation">(</span>ls<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"my var"</span>     <span class="token string">"my_new_var"</span> <span class="token string">"my_var"</span>     <span class="token string">"var.1"</span>      <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token string">"var.2"</span>      <span class="token string">"var.3"</span>      <span class="token string">"var.name"</span>   <span class="token string">"var_name2."</span><span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token string">"var_x"</span>      <span class="token string">"varname"</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„</strong> ï¼šå®ƒæ˜¯ä¸€ä¸ªç¤ºä¾‹è¾“å‡ºï¼Œå–å†³äºåœ¨æ‚¨çš„ç¯å¢ƒä¸­å£°æ˜çš„å˜é‡ã€‚</p><p><code>ls()</code> å‡½æ•°å¯ä»¥ä½¿ç”¨æ¨¡å¼æ¥åŒ¹é…å˜é‡åã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># List the variables starting with the pattern "var".</span>print<span class="token punctuation">(</span>ls<span class="token punctuation">(</span>pattern <span class="token operator">=</span> <span class="token string">"var"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"my var"</span>     <span class="token string">"my_new_var"</span> <span class="token string">"my_var"</span>     <span class="token string">"var.1"</span>      <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token string">"var.2"</span>      <span class="token string">"var.3"</span>      <span class="token string">"var.name"</span>   <span class="token string">"var_name2."</span><span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token string">"var_x"</span>      <span class="token string">"varname"</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä»¥ç‚¹ <code>.</code> å¼€å¤´çš„å˜é‡è¢«éšè—ï¼Œå®ƒä»¬å¯ä»¥ä½¿ç”¨ <code>ls()</code> å‡½æ•°çš„ <code>all.names = TRUE</code> å‚æ•°åˆ—å‡ºã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">print<span class="token punctuation">(</span>ls<span class="token punctuation">(</span>all.name <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">".cars"</span>        <span class="token string">".Random.seed"</span> <span class="token string">".var_name"</span>    <span class="token string">".varname"</span>     <span class="token string">".varname2"</span>   <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token string">"my var"</span>       <span class="token string">"my_new_var"</span>   <span class="token string">"my_var"</span>       <span class="token string">"var.1"</span>        <span class="token string">"var.2"</span>        <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token string">"var.3"</span>        <span class="token string">"var.name"</span>     <span class="token string">"var_name2."</span>   <span class="token string">"var_x"</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆ é™¤å˜é‡"><a href="#åˆ é™¤å˜é‡" class="headerlink" title="åˆ é™¤å˜é‡"></a>åˆ é™¤å˜é‡</h2><p>å¯ä»¥ä½¿ç”¨ <code>rm()</code> å‡½æ•°åˆ é™¤å˜é‡ã€‚ä¸‹é¢æˆ‘ä»¬åˆ é™¤å˜é‡ <code>var.3</code>ã€‚æ‰“å°æ—¶ï¼ŒæŠ›å‡ºå˜é‡é”™è¯¯çš„å€¼ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">rm<span class="token punctuation">(</span>var.<span class="token number">3</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>var.<span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"var.3"</span>Error <span class="token keyword">in</span> print<span class="token punctuation">(</span>var.<span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">:</span> object <span class="token string">'var.3'</span> not found<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ‰€æœ‰çš„å˜é‡å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>rm()</code> å’Œ <code>ls()</code> å‡½æ•°ä¸€èµ·åˆ é™¤ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">rm<span class="token punctuation">(</span>list <span class="token operator">=</span> ls<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>ls<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>character<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h1><p>è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªç¬¦å·ï¼Œé€šçŸ¥ç¼–è¯‘å™¨æ‰§è¡Œç‰¹å®šçš„æ•°å­¦æˆ–é€»è¾‘æ“ä½œã€‚R è¯­è¨€å…·æœ‰ä¸°å¯Œçš„å†…ç½®è¿ç®—ç¬¦ï¼Œå¹¶æä¾›ä»¥ä¸‹ç±»å‹çš„è¿ç®—ç¬¦ã€‚</p><h2 id="è¿ç®—ç¬¦çš„ç±»å‹"><a href="#è¿ç®—ç¬¦çš„ç±»å‹" class="headerlink" title="è¿ç®—ç¬¦çš„ç±»å‹"></a>è¿ç®—ç¬¦çš„ç±»å‹</h2><p>R è¯­è¨€ä¸­æ‹¥æœ‰å¦‚ä¸‹å‡ ç§è¿ç®—ç¬¦ç±»å‹ï¼š</p><ul><li><a href="#ç®—æœ¯è¿ç®—ç¬¦">ç®—æœ¯è¿ç®—ç¬¦</a></li><li><a href="#å…³ç³»è¿ç®—ç¬¦">å…³ç³»è¿ç®—ç¬¦</a></li><li><a href="#é€»è¾‘è¿ç®—ç¬¦">é€»è¾‘è¿ç®—ç¬¦</a></li><li><a href="#èµ‹å€¼è¿ç®—ç¬¦">èµ‹å€¼è¿ç®—ç¬¦</a></li><li><a href="#å…¶ä»–è¿ç®—ç¬¦">å…¶ä»–è¿ç®—ç¬¦</a></li></ul><h2 id="ç®—æœ¯è¿ç®—ç¬¦"><a href="#ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="ç®—æœ¯è¿ç®—ç¬¦"></a>ç®—æœ¯è¿ç®—ç¬¦</h2><p>ä¸‹è¡¨æ˜¾ç¤ºäº† R è¯­è¨€æ”¯æŒçš„ç®—æœ¯è¿ç®—ç¬¦ã€‚æ“ä½œç¬¦å¯¹å‘é‡çš„æ¯ä¸ªå…ƒç´ èµ·ä½œç”¨ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">è¿ç®—ç¬¦</th><th style="text-align:center">æè¿°</th><th style="text-align:left">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">+</td><td style="text-align:center">ä¸¤ä¸ªå‘é‡ç›¸åŠ </td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6)</code> <br> <code>t &lt;- c(8, 3, 4)</code> <br> <code>print(v+t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] 10.0  8.5  10.0</code></td></tr><tr><td style="text-align:center">-</td><td style="text-align:center">ä¸¤ä¸ªå‘é‡ç›¸å‡</td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6)</code> <br> <code>t &lt;- c(8, 3, 4)</code> <br> <code>print(v-t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] -6.0  2.5  2.0</code></td></tr><tr><td style="text-align:center">*</td><td style="text-align:center">ä¸¤ä¸ªå‘é‡ç›¸ä¹˜</td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6)</code> <br> <code>t &lt;- c(8, 3, 4)</code> <br> <code>print(v*t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] 16.0 16.5 24.0</code></td></tr><tr><td style="text-align:center">/</td><td style="text-align:center">å°†ç¬¬ä¸€ä¸ªå‘é‡ä¸ç¬¬äºŒä¸ªå‘é‡ç›¸é™¤</td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6)</code> <br> <code>t &lt;- c(8, 3, 4)</code> <br> <code>print(v/t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] 0.250000 1.833333 1.500000</code></td></tr><tr><td style="text-align:center">%%</td><td style="text-align:center">ä¸¤ä¸ªå‘é‡æ±‚ä½™</td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6)</code> <br> <code>t &lt;- c(8, 3, 4)</code> <br> <code>print(v%%t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] 2.0 2.5 2.0</code></td></tr><tr><td style="text-align:center">%/%</td><td style="text-align:center">ä¸¤ä¸ªå‘é‡ç›¸é™¤æ±‚å•†</td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6)</code> <br> <code>t &lt;- c(8, 3, 4)</code> <br> <code>print(v%/%t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] 0 1 1</code></td></tr><tr><td style="text-align:center">^</td><td style="text-align:center">å°†ç¬¬äºŒå‘é‡ä½œä¸ºç¬¬ä¸€å‘é‡çš„æŒ‡æ•°</td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6)</code> <br> <code>t &lt;- c(8, 3, 4)</code> <br> <code>print(v^t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1]  256.000  166.375 1296.000</code></td></tr></tbody></table></div><h2 id="å…³ç³»è¿ç®—ç¬¦"><a href="#å…³ç³»è¿ç®—ç¬¦" class="headerlink" title="å…³ç³»è¿ç®—ç¬¦"></a>å…³ç³»è¿ç®—ç¬¦</h2><p>ä¸‹è¡¨æ˜¾ç¤ºäº† R è¯­è¨€æ”¯æŒçš„å…³ç³»è¿ç®—ç¬¦ã€‚å°†ç¬¬ä¸€å‘é‡çš„æ¯ä¸ªå…ƒç´ ä¸ç¬¬äºŒå‘é‡çš„ç›¸åº”å…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚æ¯”è¾ƒçš„ç»“æœæ˜¯å¸ƒå°”å€¼ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">è¿ç®—ç¬¦</th><th style="text-align:center">æè¿°</th><th style="text-align:left">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">&gt;</td><td style="text-align:center">æ£€æŸ¥ç¬¬ä¸€å‘é‡çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦å¤§äºç¬¬äºŒå‘é‡çš„ç›¸åº”å…ƒç´ ã€‚</td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6, 9)</code> <br> <code>t &lt;- c(8, 2.5, 14, 9)</code> <br> <code>print(v&gt;t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] FALSE TRUE FALSE FALSE</code></td></tr><tr><td style="text-align:center">&lt;</td><td style="text-align:center">æ£€æŸ¥ç¬¬ä¸€ä¸ªå‘é‡çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦å°äºç¬¬äºŒä¸ªå‘é‡çš„ç›¸åº”å…ƒç´ ã€‚</td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6, 9)</code> <br> <code>t &lt;- c(8, 2.5, 14, 9)</code> <br> <code>print(v &lt; t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] TRUE FALSE TRUE FALSE</code></td></tr><tr><td style="text-align:center">==</td><td style="text-align:center">æ£€æŸ¥ç¬¬ä¸€ä¸ªå‘é‡çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦ç­‰äºç¬¬äºŒä¸ªå‘é‡çš„ç›¸åº”å…ƒç´ ã€‚</td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6, 9)</code> <br> <code>t &lt;- c(8, 2.5, 14, 9)</code> <br> <code>print(v == t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] FALSE FALSE FALSE TRUE</code></td></tr><tr><td style="text-align:center">&lt;=</td><td style="text-align:center">æ£€æŸ¥ç¬¬ä¸€å‘é‡çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦å°äºæˆ–ç­‰äºç¬¬äºŒå‘é‡çš„ç›¸åº”å…ƒç´ ã€‚</td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6, 9)</code> <br> <code>t &lt;- c(8, 2.5, 14, 9)</code> <br> <code>print(v&lt;=t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] TRUE FALSE TRUE TRUE</code></td></tr><tr><td style="text-align:center">&gt;=</td><td style="text-align:center">æ£€æŸ¥ç¬¬ä¸€å‘é‡çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦å¤§äºæˆ–ç­‰äºç¬¬äºŒå‘é‡çš„ç›¸åº”å…ƒç´ ã€‚</td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6, 9)</code> <br> <code>t &lt;- c(8, 2.5, 14, 9)</code> <br> <code>print(v&gt;=t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] FALSE  TRUE FALSE  TRUE</code></td></tr><tr><td style="text-align:center">!=</td><td style="text-align:center">æ£€æŸ¥ç¬¬ä¸€ä¸ªå‘é‡çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦ä¸ç­‰äºç¬¬äºŒä¸ªå‘é‡çš„ç›¸åº”å…ƒç´ ã€‚</td><td style="text-align:left"><code>v &lt;- c(2, 5.5, 6, 9</code> <br> <code>t &lt;- c(8, 2.5, 14, 9)</code> <br> <code>print(v!=t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] TRUE TRUE TRUE FALSE</code></td></tr></tbody></table></div><h2 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h2><p>ä¸‹è¡¨æ˜¾ç¤ºäº† R è¯­è¨€æ”¯æŒçš„é€»è¾‘è¿ç®—ç¬¦ã€‚å®ƒåªé€‚ç”¨äºé€»è¾‘ï¼Œæ•°å­—æˆ–å¤æ‚ç±»å‹çš„å‘é‡ã€‚æ‰€æœ‰å¤§äº 1 çš„æ•°å­—è¢«è®¤ä¸ºæ˜¯é€»è¾‘å€¼ <code>TRUE</code>ã€‚</p><p>å°†ç¬¬ä¸€å‘é‡çš„æ¯ä¸ªå…ƒç´ ä¸ç¬¬äºŒå‘é‡çš„ç›¸åº”å…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚æ¯”è¾ƒçš„ç»“æœæ˜¯å¸ƒå°”å€¼ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">è¿ç®—ç¬¦</th><th style="text-align:center">æè¿°</th><th style="text-align:left">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">&amp;</td><td style="text-align:center">å®ƒè¢«ç§°ä¸ºå…ƒç´ é€»è¾‘ AND è¿ç®—ç¬¦ã€‚<br> å®ƒå°†ç¬¬ä¸€å‘é‡çš„æ¯ä¸ªå…ƒç´ ä¸ç¬¬äºŒå‘é‡çš„ç›¸åº”å…ƒç´ ç»„åˆï¼Œ <br> å¹¶ä¸”å¦‚æœä¸¤ä¸ªå…ƒç´ éƒ½ä¸º TRUEï¼Œåˆ™ç»™å‡ºè¾“å‡º TRUEã€‚</td><td style="text-align:left"><code>v &lt;- c(3, 1, TRUE, 2+3i)</code> <br> <code>t &lt;- c(4, 1, FALSE, 2+3i)</code> <br> <code>print(v&amp;t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] TRUE TRUE FALSE TRUE</code></td></tr><tr><td style="text-align:center">&amp;vertï¼›</td><td style="text-align:center">å®ƒè¢«ç§°ä¸ºå…ƒç´ é€»è¾‘æˆ–è¿ç®—ç¬¦ã€‚<br> å®ƒå°†ç¬¬ä¸€å‘é‡çš„æ¯ä¸ªå…ƒç´ ä¸ç¬¬äºŒå‘é‡çš„ç›¸åº”å…ƒç´ ç»„åˆï¼Œ <br> å¹¶ä¸”å¦‚æœå…ƒç´ ä¸ºçœŸï¼Œåˆ™ç»™å‡ºè¾“å‡º TRUEã€‚</td><td style="text-align:left"><code>v &lt;- c(3, 0, TRUE, 2+2i)</code> <br> <code>t &lt;- c(4, 0, FALSE, 2+3i)</code> <br> <code>print(v</code>&vert;<code>t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] TRUE FALSE TRUE TRUE</code></td></tr><tr><td style="text-align:center">!</td><td style="text-align:center">å®ƒè¢«ç§°ä¸ºé€»è¾‘éè¿ç®—ç¬¦ã€‚å–å¾—å‘é‡çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ç»™å‡ºç›¸åçš„é€»è¾‘å€¼ã€‚</td><td style="text-align:left"><code>v &lt;- c(3, 0, TRUE, 2+2i)</code> <br> <code>print(!v)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] FALSE TRUE FALSE FALSE</code></td></tr></tbody></table></div><p>é€»è¾‘è¿ç®—ç¬¦ <code>&amp;&amp;</code> å’Œ <code>||</code> åªè€ƒè™‘å‘é‡çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç»™å‡ºå•ä¸ªå…ƒç´ çš„å‘é‡ä½œä¸ºè¾“å‡ºã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">è¿ç®—ç¬¦</th><th style="text-align:center">æè¿°</th><th style="text-align:left">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">&amp;&amp;</td><td style="text-align:center">ç§°ä¸ºé€»è¾‘ AND è¿ç®—ç¬¦ã€‚å–ä¸¤ä¸ªå‘é‡çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ <br> å¹¶ä¸”åªæœ‰ä¸¤ä¸ªéƒ½ä¸ºTRUEæ—¶æ‰ç»™å‡ºTRUEã€‚</td><td style="text-align:left"><code>v &lt;- c(3, 0, TRUE, 2+2i)</code> <br> <code>t &lt;- c(1, 3, TRUE, 2+3i)</code> <br> <code>print(v&amp;&amp;t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] TRUE</code></td></tr><tr><td style="text-align:center">&vert;&amp;vertï¼›</td><td style="text-align:center">ç§°ä¸ºé€»è¾‘ OR è¿ç®—ç¬¦ã€‚å–ä¸¤ä¸ªå‘é‡çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ <br> å¦‚æœå…¶ä¸­ä¸€ä¸ªä¸º TRUEï¼Œåˆ™ç»™å‡º TRUEã€‚</td><td style="text-align:left"><code>v &lt;- c(0, 0, TRUE, 2+2i)</code> <br> <code>t &lt;- c(0, 3, TRUE, 2+3i)</code> <br> <code>print(v</code>&vert;&vert;<code>t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] FALSE</code></td></tr></tbody></table></div><h2 id="èµ‹å€¼è¿ç®—ç¬¦"><a href="#èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="èµ‹å€¼è¿ç®—ç¬¦"></a>èµ‹å€¼è¿ç®—ç¬¦</h2><p>è¿™äº›è¿ç®—ç¬¦ç”¨äºå‘å‘é‡èµ‹å€¼ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">è¿ç®—ç¬¦</th><th style="text-align:center">æè¿°</th><th style="text-align:left">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">&lt;âˆ’ <br> = <br> &lt;&lt;âˆ’ <br></td><td style="text-align:center">ç§°ä¸ºå·¦åˆ†é…</td><td style="text-align:left"><code>v1 &lt;- c(3, 1, TRUE, 2+3i)</code> <br> <code>v2 &lt;&lt;- c(3, 1, TRUE, 2+3i)</code> <br> <code>v3 = c(3, 1, TRUE, 2+3i)</code> <br> <code>print(v1)</code> <br> <code>print(v2)</code> <br> <code>print(v3)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] 3+0i 1+0i 1+0i 2+3i</code> <br> <code>[1] 3+0i 1+0i 1+0i 2+3i</code> <br> <code>[1] 3+0i 1+0i 1+0i 2+3i</code></td></tr><tr><td style="text-align:center">-&gt; <br> -&gt;&gt;</td><td style="text-align:center">ç§°ä¸ºå³åˆ†é…</td><td style="text-align:left"><code>c(3, 1, TRUE, 2+3i) -&gt; v1</code> <br> <code>c(3, 1, TRUE, 2+3i) -&gt;&gt; v2</code> <br> <code>print(v1)</code> <br> <code>print(v2)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] 3+0i 1+0i 1+0i 2+3i</code> <br> <code>[1] 3+0i 1+0i 1+0i 2+3i</code></td></tr></tbody></table></div><h2 id="å…¶ä»–è¿ç®—ç¬¦"><a href="#å…¶ä»–è¿ç®—ç¬¦" class="headerlink" title="å…¶ä»–è¿ç®—ç¬¦"></a>å…¶ä»–è¿ç®—ç¬¦</h2><p>è¿™äº›è¿ç®—ç¬¦ç”¨äºç‰¹å®šç›®çš„ï¼Œè€Œä¸æ˜¯ä¸€èˆ¬çš„æ•°å­¦æˆ–é€»è¾‘è®¡ç®—ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">è¿ç®—ç¬¦</th><th style="text-align:center">æè¿°</th><th style="text-align:left">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">:</td><td style="text-align:center">å†’å·è¿ç®—ç¬¦ã€‚å®ƒä¸ºå‘é‡æŒ‰é¡ºåºåˆ›å»ºä¸€ç³»åˆ—æ•°å­—ã€‚</td><td style="text-align:left"><code>v &lt;- 2:8</code> <br> <code>print(v)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] 2 3 4 5 6 7 8</code></td></tr><tr><td style="text-align:center">%in%</td><td style="text-align:center">æ­¤è¿ç®—ç¬¦ç”¨äºæ ‡è¯†å…ƒç´ æ˜¯å¦å±äºå‘é‡ã€‚</td><td style="text-align:left"><code>v1 &lt;- 8</code> <br> <code>v2 &lt;- 12</code> <br> <code>t &lt;- 1:10</code> <br> <code>print(v1 %in% t)</code> <br> <code>print(v2 %in% t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> <code>[1] TRUE</code> <br> <code>[1] FALSE</code></td></tr><tr><td style="text-align:center">%*%</td><td style="text-align:center">æ­¤è¿ç®—ç¬¦ç”¨äºå°†çŸ©é˜µä¸å…¶è½¬ç½®ç›¸ä¹˜ã€‚</td><td style="text-align:left"><code>M = matrix(c(2, 6, 5, 1, 10, 4),</code> <br> <code>nrow = 2, ncol = 3, byrow = TRUE)</code> <br> <code>t = M %*% t(M)</code> <br> <code>print(t)</code> <br> å®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>[,1] [,2]</code> <br> <code>[1,]</code>&nbsp;&nbsp;&nbsp;&nbsp;<code>65</code>&nbsp;&nbsp;&nbsp;&nbsp;<code>82</code> <br> <code>[2,]</code>&nbsp;&nbsp;&nbsp;&nbsp;<code>82</code>&nbsp;&nbsp;&nbsp;&nbsp;<code>117</code></td></tr></tbody></table></div><h1 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h1><p>R è¯­è¨€çš„åŒ…æ˜¯ R å‡½æ•°ï¼Œç¼–è¯‘ä»£ç å’Œæ ·æœ¬æ•°æ®çš„é›†åˆã€‚å®ƒä»¬å­˜å‚¨åœ¨ R è¯­è¨€ç¯å¢ƒä¸­åä¸º <code>library</code> çš„ç›®å½•ä¸‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒR è¯­è¨€åœ¨å®‰è£…æœŸé—´å®‰è£…ä¸€ç»„è½¯ä»¶åŒ…ã€‚éšåæ·»åŠ æ›´å¤šåŒ…ï¼Œå½“å®ƒä»¬ç”¨äºæŸäº›ç‰¹å®šç›®çš„æ—¶ã€‚å½“æˆ‘ä»¬å¯åŠ¨ R è¯­è¨€æ§åˆ¶å°æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹åªæœ‰é»˜è®¤åŒ…å¯ç”¨ã€‚å·²ç»å®‰è£…çš„å…¶ä»–è½¯ä»¶åŒ…å¿…é¡»æ˜¾å¼åŠ è½½ä»¥ä¾›å°†è¦ä½¿ç”¨å®ƒä»¬çš„ R è¯­è¨€ç¨‹åºä½¿ç”¨ã€‚</p><p>æ‰€æœ‰å¯ç”¨çš„ R è¯­è¨€åŒ…éƒ½åˆ—åœ¨ <a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">R è¯­è¨€çš„åŒ…</a>ã€‚</p><p>ä¸‹é¢æ˜¯ç”¨äºæ£€æŸ¥ï¼ŒéªŒè¯å’Œä½¿ç”¨ R åŒ…çš„å‘½ä»¤åˆ—è¡¨ã€‚</p><h2 id="æ£€æŸ¥å¯ç”¨-R-è¯­è¨€çš„åŒ…"><a href="#æ£€æŸ¥å¯ç”¨-R-è¯­è¨€çš„åŒ…" class="headerlink" title="æ£€æŸ¥å¯ç”¨ R è¯­è¨€çš„åŒ…"></a>æ£€æŸ¥å¯ç”¨ R è¯­è¨€çš„åŒ…</h2><p>è·å–åŒ…å« R åŒ…çš„åº“ä½ç½®<pre class="line-numbers language-r" data-language="r"><code class="language-r">.libPaths<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœã€‚å®ƒå¯èƒ½ä¼šæ ¹æ®æ‚¨çš„ç”µè„‘çš„æœ¬åœ°è®¾ç½®è€Œæœ‰æ‰€ä¸åŒã€‚</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"C:/Program Files/R/R-3.2.2/library"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è·å–å·²å®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŒ…åˆ—è¡¨"><a href="#è·å–å·²å®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŒ…åˆ—è¡¨" class="headerlink" title="è·å–å·²å®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŒ…åˆ—è¡¨"></a>è·å–å·²å®‰è£…çš„æ‰€æœ‰è½¯ä»¶åŒ…åˆ—è¡¨</h2><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">library<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœã€‚å®ƒå¯èƒ½ä¼šæ ¹æ®æ‚¨çš„ç”µè„‘çš„æœ¬åœ°è®¾ç½®è€Œæœ‰æ‰€ä¸åŒã€‚</span>Packages <span class="token keyword">in</span> library â€˜C<span class="token operator">:</span><span class="token operator">/</span>Program Files<span class="token operator">/</span>R<span class="token operator">/</span>R<span class="token operator">-</span><span class="token number">3.2</span><span class="token number">.2</span><span class="token operator">/</span>libraryâ€™<span class="token operator">:</span>base                    The R Base Packageboot                    Bootstrap Functions <span class="token punctuation">(</span>Originally by Angelo Canty                        <span class="token keyword">for</span> S<span class="token punctuation">)</span>class                   Functions <span class="token keyword">for</span> Classificationcluster                 <span class="token string">"Finding Groups in Data"</span><span class="token operator">:</span> Cluster Analysis                        Extended Rousseeuw et al.codetools               Code Analysis Tools <span class="token keyword">for</span> Rcompiler                The R Compiler Package<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>è·å–å½“å‰åœ¨ R ç¯å¢ƒä¸­åŠ è½½çš„æ‰€æœ‰åŒ…</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">search<span class="token punctuation">(</span><span class="token punctuation">)</span>å½“æˆ‘ä»¬æ‰§è¡Œä¸Šè¿°ä»£ç æ—¶ï¼Œå®ƒäº§ç”Ÿäº†ä»¥ä¸‹ç»“æœã€‚å®ƒä¼šæ ¹æ®ä½ çš„ä¸ªäººç”µè„‘çš„æœ¬åœ°è®¾ç½®è€Œå¼‚ã€‚<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">".GlobalEnv"</span>        <span class="token string">"package:stats"</span>     <span class="token string">"package:graphics"</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token string">"package:grDevices"</span> <span class="token string">"package:utils"</span>     <span class="token string">"package:datasets"</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token string">"package:methods"</span>   <span class="token string">"Autoloads"</span>         <span class="token string">"package:base"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å®‰è£…ä¸€ä¸ªæ–°çš„è½¯ä»¶åŒ…"><a href="#å®‰è£…ä¸€ä¸ªæ–°çš„è½¯ä»¶åŒ…" class="headerlink" title="å®‰è£…ä¸€ä¸ªæ–°çš„è½¯ä»¶åŒ…"></a>å®‰è£…ä¸€ä¸ªæ–°çš„è½¯ä»¶åŒ…</h2><p>æœ‰ä¸¤ç§æ–¹æ³•æ¥æ·»åŠ æ–°çš„ R åŒ…ã€‚ä¸€ä¸ªæ˜¯ç›´æ¥ä» CRAN ç›®å½•å®‰è£…ï¼Œå¦ä¸€ä¸ªæ˜¯å°†è½¯ä»¶åŒ…ä¸‹è½½åˆ°æœ¬åœ°ç³»ç»Ÿå¹¶æ‰‹åŠ¨å®‰è£…å®ƒã€‚</p><h3 id="ç›´æ¥ä»-CRAN-å®‰è£…"><a href="#ç›´æ¥ä»-CRAN-å®‰è£…" class="headerlink" title="ç›´æ¥ä» CRAN å®‰è£…"></a>ç›´æ¥ä» CRAN å®‰è£…</h3><p>ä»¥ä¸‹å‘½ä»¤ç›´æ¥ä» CRAN ç½‘é¡µè·å–è½¯ä»¶åŒ…ï¼Œå¹¶å°†è½¯ä»¶åŒ…å®‰è£…åœ¨ R ç¯å¢ƒä¸­ã€‚å¯èƒ½ä¼šæç¤ºæ‚¨é€‰æ‹©æœ€è¿‘çš„é•œåƒã€‚æ ¹æ®æ‚¨çš„ä½ç½®é€‰æ‹©ä¸€ä¸ªã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">install.packages<span class="token punctuation">(</span><span class="token string">"Package Name"</span><span class="token punctuation">)</span><span class="token comment"># Install the package named "XML".</span>install.packages<span class="token punctuation">(</span><span class="token string">"XML"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="æ‰‹åŠ¨å®‰è£…åŒ…"><a href="#æ‰‹åŠ¨å®‰è£…åŒ…" class="headerlink" title="æ‰‹åŠ¨å®‰è£…åŒ…"></a>æ‰‹åŠ¨å®‰è£…åŒ…</h3><p>è½¬åˆ°é“¾æ¥ <a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">R Packages</a> ä¸‹è½½æ‰€éœ€çš„åŒ…ã€‚å°†åŒ…ä½œä¸º .zip æ–‡ä»¶ä¿å­˜åœ¨æœ¬åœ°ç³»ç»Ÿä¸­çš„é€‚å½“ä½ç½®ã€‚</p><p>ç°åœ¨æ‚¨å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤åœ¨ R ç¯å¢ƒä¸­å®‰è£…æ­¤è½¯ä»¶åŒ…ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">install.packages<span class="token punctuation">(</span>file_name_with_path<span class="token punctuation">,</span> repos <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">"source"</span><span class="token punctuation">)</span><span class="token comment"># Install the package named "XML"</span>install.packages<span class="token punctuation">(</span><span class="token string">"E:/XML_3.98-1.3.zip"</span><span class="token punctuation">,</span> repos <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">"source"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="è£…è½½åŒ…åˆ°åº“ä¸­"><a href="#è£…è½½åŒ…åˆ°åº“ä¸­" class="headerlink" title="è£…è½½åŒ…åˆ°åº“ä¸­"></a>è£…è½½åŒ…åˆ°åº“ä¸­</h3><p>åœ¨åŒ…å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨ä¹‹å‰ï¼Œå¿…é¡»å°†å…¶åŠ è½½åˆ°å½“å‰ R ç¯å¢ƒä¸­ã€‚æ‚¨è¿˜éœ€è¦åŠ è½½å…ˆå‰å·²å®‰è£…ä½†åœ¨å½“å‰ç¯å¢ƒä¸­ä¸å¯ç”¨çš„è½¯ä»¶åŒ…ã€‚</p><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åŠ è½½åŒ…ï¼š<pre class="line-numbers language-r" data-language="r"><code class="language-r">library<span class="token punctuation">(</span><span class="token string">"package Name"</span><span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token string">"path to library"</span><span class="token punctuation">)</span><span class="token comment"># Load the package named "XML"</span>install.packages<span class="token punctuation">(</span><span class="token string">"E:/XML_3.98-1.3.zip"</span><span class="token punctuation">,</span> repos <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token string">"source"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="å†³ç­–"><a href="#å†³ç­–" class="headerlink" title="å†³ç­–"></a>å†³ç­–</h1><p>å†³ç­–ç»“æ„è¦æ±‚ç¨‹åºå‘˜æŒ‡å®šè¦ç”±ç¨‹åºè¯„ä¼°æˆ–æµ‹è¯•çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ï¼Œä»¥åŠå¦‚æœæ¡ä»¶è¢«ç¡®å®šä¸ºçœŸåˆ™è¦æ‰§è¡Œçš„ä¸€ä¸ªæˆ–å¤šä¸ªè¯­å¥ï¼Œå¦‚æœæ¡ä»¶ä¸ºå‡åˆ™æ‰§è¡Œå…¶ä»–è¯­å¥ã€‚</p><p>R æä¾›ä»¥ä¸‹ç±»å‹çš„å†³ç­–è¯­å¥ã€‚</p><ul><li>if è¯­å¥</li><li>if ... else è¯­å¥</li><li>switch è¯­å¥</li></ul><h2 id="if-è¯­å¥"><a href="#if-è¯­å¥" class="headerlink" title="if è¯­å¥"></a>if è¯­å¥</h2><p>if è¯­å¥ç”±ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼åè·Ÿä¸€ä¸ªæˆ–å¤šä¸ªè¯­å¥ç»„æˆã€‚</p><p><strong>è¯­æ³•</strong></p><p>åœ¨ R ä¸­åˆ›å»º <code>if</code> è¯­å¥çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token keyword">if</span><span class="token punctuation">(</span>boolean_expression<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token comment"># statement(s) will execute if the boolean expression is true.</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>å¦‚æœå¸ƒå°”è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœä¸º <code>true</code>ï¼Œé‚£ä¹ˆ <code>if</code> è¯­å¥ä¸­çš„ä»£ç å—å°†è¢«æ‰§è¡Œã€‚å¦‚æœå¸ƒå°”è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœä¸º <code>false</code>ï¼Œé‚£ä¹ˆç¬¬ä¸€ç»„ä»£ç åœ¨ifè¯­å¥ç»“æŸä¹‹åï¼ˆåœ¨ç»“æŸå¤§æ‹¬å·ä¹‹åï¼‰å°†è¢«æ‰§è¡Œã€‚</p><p><strong>æµç¨‹å›¾</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_course/if.jpg" alt></p><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">x <span class="token operator">&lt;-</span> <span class="token number">30L</span><span class="token keyword">if</span><span class="token punctuation">(</span>is.integer<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   print<span class="token punctuation">(</span><span class="token string">"X is an Integer"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment"># å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"X is an Integer"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="if-else-è¯­å¥"><a href="#if-else-è¯­å¥" class="headerlink" title="if...else è¯­å¥"></a>if...else è¯­å¥</h2><p><code>if</code> è¯­å¥åé¢å¯ä»¥æ˜¯ä¸€ä¸ªå¯é€‰çš„ <code>else</code> è¯­å¥ï¼Œå½“å¸ƒå°”è¡¨è¾¾å¼ä¸º <code>false</code> æ—¶æ‰§è¡Œã€‚</p><p><strong>è¯­æ³•</strong></p><p>åœ¨ R ä¸­åˆ›å»º if ... else è¯­å¥çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token keyword">if</span><span class="token punctuation">(</span>boolean_expression<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token comment"># statement(s) will execute if the boolean expression is true.</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>   <span class="token comment"># statement(s) will execute if the boolean expression is false.</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å¦‚æœå¸ƒå°”è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœä¸ºçœŸï¼Œåˆ™å°†æ‰§è¡Œifä»£ç å—ï¼Œå¦åˆ™å°†æ‰§è¡Œä»£ç å—ã€‚</p><p><strong>æµç¨‹å›¾</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_course/if_else.jpg" alt></p><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"what"</span><span class="token punctuation">,</span> <span class="token string">"is"</span><span class="token punctuation">,</span> <span class="token string">"truth"</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"Truth"</span> <span class="token percent-operator operator">%in%</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   print<span class="token punctuation">(</span><span class="token string">"Truth is found"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>   print<span class="token punctuation">(</span><span class="token string">"Truth is not found"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment"># å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Truth is not found"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>è¿™é‡Œ <code>Truth</code> å’Œ <code>truth</code> æ˜¯ä¸¤ä¸ªä¸åŒçš„å­—ç¬¦ä¸²ã€‚</p><p><strong>if ... else if ... else è¯­å¥</strong></p><p><code>if</code> è¯­å¥åé¢å¯ä»¥è·Ÿä¸€ä¸ªå¯é€‰çš„ <code>else if ... else</code> è¯­å¥ï¼Œè¿™å¯¹äºä½¿ç”¨ <code>single if ... else if</code> è¯­å¥æµ‹è¯•å„ç§æ¡ä»¶éå¸¸æœ‰ç”¨ã€‚</p><p>å½“ä½¿ç”¨ <code>if</code>ï¼Œ<code>else if</code>ï¼Œ<code>else</code> è¯­å¥æœ‰å‡ ç‚¹è¦è®°ä½ï¼š</p><ul><li>å¦‚æœå¯ä»¥æœ‰é›¶ä¸ªæˆ–ä¸€ä¸ª <code>else</code>ï¼Œå®ƒå¿…é¡»åœ¨ä»»ä½•å…¶ä»– <code>if</code> ä¹‹åã€‚</li><li>ä¸€ä¸ª <code>if</code> å¯ä»¥æœ‰é›¶ä¸ªåˆ°è®¸å¤šä¸ª <code>else if</code> å’Œå®ƒä»¬å¿…é¡»åœ¨ <code>else</code> ä¹‹å‰ã€‚</li><li>ä¸€æ—¦ä¸€ä¸ª <code>else</code> å¦‚æœæˆåŠŸï¼Œæ²¡æœ‰ä»»ä½•å‰©ä½™çš„ <code>else if</code> æˆ– <code>else</code> å°†è¢«æµ‹è¯•ã€‚</li></ul><p><strong>è¯­æ³•</strong></p><p>åœ¨ R ä¸­åˆ›å»º <code>if ... else if ... else</code>è¯­å¥çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token keyword">if</span><span class="token punctuation">(</span>boolean_expression <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token operator">/</span><span class="token operator">/</span> Executes when the boolean expression <span class="token number">1</span> is true.<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> boolean_expression <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token operator">/</span><span class="token operator">/</span> Executes when the boolean expression <span class="token number">2</span> is true.<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> boolean_expression <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token operator">/</span><span class="token operator">/</span> Executes when the boolean expression <span class="token number">3</span> is true.<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>   <span class="token operator">/</span><span class="token operator">/</span> executes when none of the above condition is true.<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"what"</span><span class="token punctuation">,</span> <span class="token string">"is"</span><span class="token punctuation">,</span> <span class="token string">"truth"</span><span class="token punctuation">)</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">"Truth"</span> <span class="token percent-operator operator">%in%</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   print<span class="token punctuation">(</span><span class="token string">"Truth is found the first time"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"truth"</span> <span class="token percent-operator operator">%in%</span> x<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   print<span class="token punctuation">(</span><span class="token string">"truth is found the second time"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>   print<span class="token punctuation">(</span><span class="token string">"No truth found"</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment"># å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"truth is found the second time"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="switch-â€‹è¯­å¥"><a href="#switch-â€‹è¯­å¥" class="headerlink" title="switch â€‹è¯­å¥"></a>switch â€‹è¯­å¥</h2><p><code>switch</code> â€‹è¯­å¥å…è®¸æ ¹æ®å€¼åˆ—è¡¨æµ‹è¯•å˜é‡çš„ç›¸ç­‰æ€§ã€‚æ¯ä¸ªå€¼éƒ½ç§°ä¸ºå¤§å°å†™ï¼Œå¹¶ä¸”é’ˆå¯¹æ¯ç§æƒ…å†µæ£€æŸ¥æ‰“å¼€çš„å˜é‡ã€‚</p><p><strong>è¯­æ³•</strong></p><p>åœ¨ R ä¸­åˆ›å»º <code>â€‹switchâ€‹</code> è¯­å¥çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">switch<span class="token punctuation">(</span>expression<span class="token punctuation">,</span> case1<span class="token punctuation">,</span> case2<span class="token punctuation">,</span> case3<span class="token ellipsis">...</span>.<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹è§„åˆ™é€‚ç”¨äº <code>â€‹switch</code> â€‹è¯­å¥ï¼š</p><ul><li>å¦‚æœ <code>â€‹expressionâ€‹</code> çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå®ƒè¢«å¼ºåˆ¶ä¸ºæ•´æ•°ã€‚</li><li>åœ¨äº¤æ¢æœºä¸­å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„ <code>â€‹case</code> â€‹è¯­å¥ã€‚æ¯ä¸ªæ¡ˆä¾‹åé¢éƒ½è·Ÿè¦æ¯”è¾ƒçš„å€¼å’Œå†’å·ã€‚</li><li>å¦‚æœæ•´æ•°çš„å€¼åœ¨ â€‹<code>1</code> â€‹å’Œ â€‹<code>nargs() - 1</code>â€‹ï¼ˆå‚æ•°çš„æœ€å¤§æ•°ç›®ï¼‰ä¹‹é—´ï¼Œåˆ™å¯¹ â€‹case â€‹æ¡ä»¶çš„ç›¸åº”å…ƒç´ æ±‚å€¼å¹¶è¿”å›ç»“æœã€‚</li><li>å¦‚æœè¡¨è¾¾å¼æ±‚å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè¯¥å­—ç¬¦ä¸²ä¸å…ƒç´ çš„åç§°åŒ¹é…ã€‚</li><li>å¦‚æœæœ‰å¤šä¸ªåŒ¹é…ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ ã€‚</li><li>æ— é»˜è®¤å‚æ•°å¯ç”¨ã€‚</li><li>åœ¨æ²¡æœ‰åŒ¹é…çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæœªå‘½åçš„å…ƒç´ ...å®ƒçš„å€¼è¢«è¿”å›ã€‚ï¼ˆå¦‚æœæœ‰å¤šä¸ªè¿™æ ·çš„å‚æ•°ï¼Œåˆ™è¿”å›é”™è¯¯ã€‚ï¼‰</li></ul><p><strong>æµç¨‹å›¾</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_course/switch.jpg" alt></p><p><strong>å®ä¾‹ 1</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">x <span class="token operator">&lt;-</span> switch<span class="token punctuation">(</span>   <span class="token number">3</span><span class="token punctuation">,</span>   <span class="token string">"first"</span><span class="token punctuation">,</span>   <span class="token string">"second"</span><span class="token punctuation">,</span>   <span class="token string">"third"</span><span class="token punctuation">,</span>   <span class="token string">"fourth"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token comment"># å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"third"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>å®ä¾‹ 2</strong></p><p><code>â€‹runif()â€‹</code> å‡½æ•°ç”¨äºç”Ÿæˆä» â€‹<code>0</code> â€‹åˆ° â€‹<code>1</code> â€‹åŒºé—´èŒƒå›´å†…çš„æœä»æ­£æ€åˆ†å¸ƒçš„éšæœºæ•°ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">switch<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span> sd<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> runif<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#è¿”å›ï¼ˆ2*3, sd(1:5), runif(3)ï¼‰listä¸­çš„ç¬¬ä¸€ä¸ªæˆåˆ† </span>switch<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span> sd<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> runif<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#è¿”å›ç¬¬äºŒä¸ªæˆåˆ†</span>switch<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">,</span> sd<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> runif<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">#è¿”å›ç¬¬ä¸‰ä¸ªæˆåˆ†</span><span class="token comment"># å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">6</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1.581139</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">0.31508117</span> <span class="token number">0.04610938</span> <span class="token number">0.19489747</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h1><p>å¯èƒ½æœ‰ä¸€ç§æƒ…å†µï¼Œå½“ä½ éœ€è¦æ‰§è¡Œä¸€æ®µä»£ç å‡ æ¬¡ã€‚é€šå¸¸ï¼Œé¡ºåºæ‰§è¡Œè¯­å¥ã€‚é¦–å…ˆæ‰§è¡Œå‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªè¯­å¥ï¼Œç„¶åæ‰§è¡Œç¬¬äºŒä¸ªè¯­å¥ï¼Œä¾æ­¤ç±»æ¨ã€‚</p><p>ç¼–ç¨‹è¯­è¨€æä¾›å…è®¸æ›´å¤æ‚çš„æ‰§è¡Œè·¯å¾„çš„å„ç§æ§åˆ¶ç»“æ„ã€‚</p><p>å¾ªç¯è¯­å¥å…è®¸æˆ‘ä»¬å¤šæ¬¡æ‰§è¡Œä¸€ä¸ªè¯­å¥æˆ–ä¸€ç»„è¯­å¥ï¼Œä»¥ä¸‹æ˜¯å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­å¾ªç¯è¯­å¥çš„ä¸€èˆ¬å½¢å¼</p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_course/loop.jpg" alt></p><p><strong>å¾ªç¯æ§åˆ¶è¯­å¥</strong></p><p>å¾ªç¯æ§åˆ¶è¯­å¥ä»å…¶æ­£å¸¸åºåˆ—æ”¹å˜æ‰§è¡Œã€‚å½“æ‰§è¡Œç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œåœ¨è¯¥ä½œç”¨åŸŸä¸­åˆ›å»ºçš„æ‰€æœ‰è‡ªåŠ¨å¯¹è±¡éƒ½å°†è¢«é”€æ¯ã€‚</p><p>R è¯­è¨€æ”¯æŒä»¥ä¸‹æ§åˆ¶è¯­å¥ã€‚</p><ul><li>break</li><li>next</li></ul><h2 id="Repeat-è¯­å¥"><a href="#Repeat-è¯­å¥" class="headerlink" title="Repeat è¯­å¥"></a>Repeat è¯­å¥</h2><p><code>repeat</code> å¾ªç¯é‡å¤æ‰§è¡Œç›¸åŒçš„ä»£ç ï¼Œç›´åˆ°æ»¡è¶³åœæ­¢æ¡ä»¶ã€‚</p><p><strong>è¯­æ³•</strong></p><p>åœ¨Rä¸­åˆ›å»ºRepeatå¾ªç¯çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token keyword">repeat</span> <span class="token punctuation">&#123;</span>    commands    <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">break</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æµç¨‹å›¾</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_course/repeat.jpg" alt></p><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">v <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">,</span> <span class="token string">"loop"</span><span class="token punctuation">)</span>cnt <span class="token operator">&lt;-</span> <span class="token number">2</span><span class="token keyword">repeat</span> <span class="token punctuation">&#123;</span>   print<span class="token punctuation">(</span>v<span class="token punctuation">)</span>   cnt <span class="token operator">&lt;-</span> cnt<span class="token operator">+</span><span class="token number">1</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>cnt <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">break</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment"># å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span> <span class="token string">"loop"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span> <span class="token string">"loop"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span> <span class="token string">"loop"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span> <span class="token string">"loop"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="while-è¯­å¥"><a href="#while-è¯­å¥" class="headerlink" title="while è¯­å¥"></a>while è¯­å¥</h2><p><code>while</code> å¾ªç¯ä¸€æ¬¡åˆä¸€æ¬¡åœ°æ‰§è¡Œç›¸åŒçš„ä»£ç ï¼Œç›´åˆ°æ»¡è¶³åœæ­¢æ¡ä»¶ã€‚</p><p><strong>è¯­æ³•</strong></p><p>åœ¨ R ä¸­åˆ›å»º <code>while</code> å¾ªç¯çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token keyword">while</span> <span class="token punctuation">(</span>test_expression<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   statement<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><strong>æµç¨‹å›¾</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_course/while.jpg" alt></p><p><code>while</code> å¾ªç¯çš„å…³é”®ç‚¹æ˜¯å¾ªç¯å¯èƒ½æ°¸è¿œä¸ä¼šè¿è¡Œã€‚å½“æ¡ä»¶è¢«æµ‹è¯•å¹¶ä¸”ç»“æœä¸º <code>false</code> æ—¶ï¼Œå¾ªç¯ä½“å°†è¢«è·³è¿‡ï¼Œ<code>while</code> å¾ªç¯ä¹‹åçš„ç¬¬ä¸€æ¡è¯­å¥å°†è¢«æ‰§è¡Œã€‚</p><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">v <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">,</span><span class="token string">"while loop"</span><span class="token punctuation">)</span>cnt <span class="token operator">&lt;-</span> <span class="token number">2</span><span class="token keyword">while</span> <span class="token punctuation">(</span>cnt <span class="token operator">&lt;</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   print<span class="token punctuation">(</span>v<span class="token punctuation">)</span>   cnt <span class="token operator">=</span> cnt <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token comment"># å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span>  <span class="token string">"while loop"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span>  <span class="token string">"while loop"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span>  <span class="token string">"while loop"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span>  <span class="token string">"while loop"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span>  <span class="token string">"while loop"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="for-è¯­å¥"><a href="#for-è¯­å¥" class="headerlink" title="for è¯­å¥"></a>for è¯­å¥</h2><p><code>for</code> å¾ªç¯æ˜¯ä¸€ç§é‡å¤æ§åˆ¶ç»“æ„ï¼Œå…è®¸æ‚¨æœ‰æ•ˆåœ°ç¼–å†™éœ€è¦æ‰§è¡Œç‰¹å®šæ¬¡æ•°çš„å¾ªç¯ã€‚</p><p>R çš„ <code>for</code> å¾ªç¯æ˜¯ç‰¹åˆ«çµæ´»çš„ï¼Œå› ä¸ºå®ƒä»¬ä¸é™äºæ•´æ•°ï¼Œæˆ–è€…è¾“å…¥ä¸­çš„å¶æ•°ã€‚æˆ‘ä»¬å¯ä»¥ä¼ é€’å­—ç¬¦å‘é‡ï¼Œé€»è¾‘å‘é‡ï¼Œåˆ—è¡¨æˆ–è¡¨è¾¾å¼ã€‚</p><p><strong>è¯­æ³•</strong></p><p>åœ¨ R ä¸­åˆ›å»ºä¸€ä¸ª <code>for</code> å¾ªç¯è¯­å¥çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token keyword">for</span> <span class="token punctuation">(</span>å˜é‡ <span class="token keyword">in</span> æ¡ä»¶<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   å¾ªç¯ä½“<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><strong>æµç¨‹å›¾</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_course/for.jpg" alt></p><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">v <span class="token operator">&lt;-</span> LETTERS<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token keyword">in</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   print<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment"># å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœ </span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"A"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"B"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"C"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"D"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="break-è¯­å¥"><a href="#break-è¯­å¥" class="headerlink" title="break è¯­å¥"></a>break è¯­å¥</h2><p>R è¯­è¨€ä¸­çš„ <code>break</code> è¯­å¥æœ‰ä»¥ä¸‹ä¸¤ç§ç”¨æ³•ï¼š</p><p>å½“åœ¨å¾ªç¯ä¸­é‡åˆ° <code>break</code> è¯­å¥æ—¶ï¼Œå¾ªç¯ç«‹å³ç»ˆæ­¢ï¼Œå¹¶ä¸”ç¨‹åºæ§åˆ¶åœ¨å¾ªç¯ä¹‹åçš„ä¸‹ä¸€è¯­å¥å¤„æ¢å¤ã€‚å®ƒå¯ä»¥ç”¨äºç»ˆæ­¢ <code>switch</code> è¯­å¥ä¸­çš„æƒ…å†µã€‚è¯­æ³•åœ¨ R ä¸­åˆ›å»º <code>break</code> è¯­å¥çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token keyword">break</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>æµç¨‹å›¾</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_course/break.jpg" alt></p><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">v <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">,</span><span class="token string">"loop"</span><span class="token punctuation">)</span>cnt <span class="token operator">&lt;-</span> <span class="token number">2</span><span class="token keyword">repeat</span> <span class="token punctuation">&#123;</span>   print<span class="token punctuation">(</span>v<span class="token punctuation">)</span>   cnt <span class="token operator">&lt;-</span> cnt <span class="token operator">+</span> <span class="token number">1</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>cnt <span class="token operator">></span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">break</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment"># å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span> <span class="token string">"loop"</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span> <span class="token string">"loop"</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span> <span class="token string">"loop"</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello"</span> <span class="token string">"loop"</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="next-è¯­å¥"><a href="#next-è¯­å¥" class="headerlink" title="next è¯­å¥"></a>next è¯­å¥</h2><p>R è¯­è¨€å­˜åœ¨ <code>next</code> è¯­å¥ï¼Œå½“æˆ‘ä»¬æƒ³è·³è¿‡å¾ªç¯çš„å½“å‰è¿­ä»£è€Œä¸ç»ˆæ­¢å®ƒæ—¶ä¾¿å¯ä½¿ç”¨ <code>next</code>ã€‚é‡åˆ° <code>next</code> æ—¶ï¼ŒR è§£æå™¨è·³è¿‡æœ¬æ¬¡è¿­ä»£ï¼Œå¹¶å¼€å§‹å¾ªç¯çš„ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚</p><p><strong>è¯­æ³•</strong></p><p>åœ¨ R ä¸­åˆ›å»º <code>next</code> è¯­å¥çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token keyword">next</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>æµç¨‹å›¾</strong></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/r_course/next.jpg" alt></p><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">v <span class="token operator">&lt;-</span> LETTERS<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token keyword">for</span> <span class="token punctuation">(</span> i <span class="token keyword">in</span> v<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token string">"D"</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      <span class="token keyword">next</span>   <span class="token punctuation">&#125;</span>   print<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment">#å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"A"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"B"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"C"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"E"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"F"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="æ•°æ®é‡å¡‘"><a href="#æ•°æ®é‡å¡‘" class="headerlink" title="æ•°æ®é‡å¡‘"></a>æ•°æ®é‡å¡‘</h1><p>R è¯­è¨€ä¸­çš„æ•°æ®é‡å¡‘æ˜¯å…³äºæ”¹å˜æ•°æ®è¢«ç»„ç»‡æˆè¡Œå’Œåˆ—çš„æ–¹å¼ã€‚</p><p>å¤§å¤šæ•°æ—¶é—´ R è¯­è¨€ä¸­çš„æ•°æ®å¤„ç†æ˜¯é€šè¿‡å°†è¾“å…¥æ•°æ®ä½œä¸ºæ•°æ®æ¡†æ¥å®Œæˆçš„ã€‚å¾ˆå®¹æ˜“ä»æ•°æ®æ¡†çš„è¡Œå’Œåˆ—ä¸­æå–æ•°æ®ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦çš„æ•°æ®æ¡†æ ¼å¼ä¸æˆ‘ä»¬æ¥æ”¶æ•°æ®æ¡†çš„æ ¼å¼ä¸åŒã€‚R è¯­è¨€å…·æœ‰è®¸å¤šå‡½æ•°ï¼Œå¯ä»¥åœ¨æ•°æ®æ¡†ä¸­æ‹†åˆ†ï¼Œåˆå¹¶å’Œå°†è¡Œæ›´æ”¹ä¸ºåˆ—ï¼Œåä¹‹äº¦ç„¶ã€‚</p><h2 id="æ•°æ®æ¡†ä¸­åŠ å…¥åˆ—å’Œè¡Œ"><a href="#æ•°æ®æ¡†ä¸­åŠ å…¥åˆ—å’Œè¡Œ" class="headerlink" title="æ•°æ®æ¡†ä¸­åŠ å…¥åˆ—å’Œè¡Œ"></a>æ•°æ®æ¡†ä¸­åŠ å…¥åˆ—å’Œè¡Œ</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>cbind()</code> å‡½æ•°è¿æ¥å¤šä¸ªå‘é‡æ¥åˆ›å»ºæ•°æ®æ¡†ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>rbind()</code> å‡½æ•°åˆå¹¶ä¸¤ä¸ªæ•°æ®æ¡†ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create vector objects.</span>city <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"Tampa"</span><span class="token punctuation">,</span> <span class="token string">"Seattle"</span><span class="token punctuation">,</span> <span class="token string">"Hartford"</span><span class="token punctuation">,</span> <span class="token string">"Denver"</span><span class="token punctuation">)</span>state <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"FL"</span><span class="token punctuation">,</span> <span class="token string">"WA"</span><span class="token punctuation">,</span> <span class="token string">"CT"</span><span class="token punctuation">,</span> <span class="token string">"CO"</span><span class="token punctuation">)</span>zipcode <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">33602</span><span class="token punctuation">,</span> <span class="token number">98104</span><span class="token punctuation">,</span> <span class="token number">06161</span><span class="token punctuation">,</span> <span class="token number">80294</span><span class="token punctuation">)</span><span class="token comment"># Combine above three vectors into one data frame.</span>addresses <span class="token operator">&lt;-</span> cbind<span class="token punctuation">(</span>city<span class="token punctuation">,</span> state<span class="token punctuation">,</span> zipcode<span class="token punctuation">)</span><span class="token comment"># Print a header.</span>cat<span class="token punctuation">(</span><span class="token string">"# # # # The First data frame"</span><span class="token punctuation">)</span><span class="token comment"># Print the data frame.</span>print<span class="token punctuation">(</span>addresses<span class="token punctuation">)</span><span class="token comment"># Create another data frame with similar columns</span>new.address <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>   city <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Lowry"</span><span class="token punctuation">,</span> <span class="token string">"Charlotte"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   state <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"CO"</span><span class="token punctuation">,</span> <span class="token string">"FL"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   zipcode <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"80230"</span><span class="token punctuation">,</span> <span class="token string">"33949"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token comment"># Print a header.</span>cat<span class="token punctuation">(</span><span class="token string">"# # # The Second data frame"</span><span class="token punctuation">)</span><span class="token comment"># Print the data frame.</span>print<span class="token punctuation">(</span>new.address<span class="token punctuation">)</span><span class="token comment"># Combine rows form both the data frames.</span>all.addresses <span class="token operator">&lt;-</span> rbind<span class="token punctuation">(</span>addresses<span class="token punctuation">,</span> new.address<span class="token punctuation">)</span><span class="token comment"># Print a header.</span>cat<span class="token punctuation">(</span><span class="token string">"# # # The combined data frame"</span><span class="token punctuation">)</span><span class="token comment"># Print the result.</span>print<span class="token punctuation">(</span>all.addresses<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token comment"># # # # The First data frame</span>     city       state zipcode<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">"Tampa"</span>    <span class="token string">"FL"</span>  <span class="token string">"33602"</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">"Seattle"</span>  <span class="token string">"WA"</span>  <span class="token string">"98104"</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">"Hartford"</span> <span class="token string">"CT"</span>  <span class="token string">"6161"</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token string">"Denver"</span>   <span class="token string">"CO"</span>  <span class="token string">"80294"</span><span class="token comment"># # # The Second data frame</span>       city state zipcode<span class="token number">1</span>     Lowry    CO   <span class="token number">80230</span><span class="token number">2</span> Charlotte    FL   <span class="token number">33949</span><span class="token comment"># # # The combined data frame</span>       city state zipcode<span class="token number">1</span>     Tampa    FL   <span class="token number">33602</span><span class="token number">2</span>   Seattle    WA   <span class="token number">98104</span><span class="token number">3</span>  Hartford    CT    <span class="token number">6161</span><span class="token number">4</span>    Denver    CO   <span class="token number">80294</span><span class="token number">5</span>     Lowry    CO   <span class="token number">80230</span><span class="token number">6</span> Charlotte    FL   <span class="token number">33949</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆå¹¶æ•°æ®æ¡†"><a href="#åˆå¹¶æ•°æ®æ¡†" class="headerlink" title="åˆå¹¶æ•°æ®æ¡†"></a>åˆå¹¶æ•°æ®æ¡†</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>merge()</code> å‡½æ•°åˆå¹¶ä¸¤ä¸ªæ•°æ®æ¡†ã€‚æ•°æ®æ¡†å¿…é¡»å…·æœ‰ç›¸åŒçš„åˆ—åç§°ï¼Œåœ¨å…¶ä¸Šè¿›è¡Œåˆå¹¶ã€‚</p><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘ä½¿ç”¨ <code>library()</code> å‡½æ•°åŠ è½½ <code>MASS</code> ç¬¬ä¸‰æ–¹åŒ…ï¼Œä½¿ç”¨ <code>MASS</code> ä¸­æœ‰å…³ <code>Pima Indian Women</code> çš„ç³–å°¿ç—…çš„æ•°æ®é›†ã€‚æˆ‘ä»¬åŸºäºè¡€å‹ï¼ˆbpï¼‰å’Œä½“é‡æŒ‡æ•°ï¼ˆbmiï¼‰çš„å€¼åˆå¹¶ä¸¤ä¸ªæ•°æ®é›†ã€‚åœ¨é€‰æ‹©è¿™ä¸¤åˆ—ç”¨äºåˆå¹¶æ—¶ï¼Œå…¶ä¸­è¿™ä¸¤ä¸ªå˜é‡çš„å€¼åœ¨ä¸¤ä¸ªæ•°æ®é›†ä¸­åŒ¹é…çš„è®°å½•è¢«ç»„åˆåœ¨ä¸€èµ·ä»¥å½¢æˆå•ä¸ªæ•°æ®æ¡†ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">library<span class="token punctuation">(</span>MASS<span class="token punctuation">)</span>merged.Pima <span class="token operator">&lt;-</span> merge<span class="token punctuation">(</span>x <span class="token operator">=</span> Pima.te<span class="token punctuation">,</span> y <span class="token operator">=</span> Pima.tr<span class="token punctuation">,</span>   by.x <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"bp"</span><span class="token punctuation">,</span> <span class="token string">"bmi"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   by.y <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"bp"</span><span class="token punctuation">,</span> <span class="token string">"bmi"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>merged.Pima<span class="token punctuation">)</span>nrow<span class="token punctuation">(</span>merged.Pima<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>   bp  bmi npreg.x glu.x skin.x ped.x age.x type.x npreg.y glu.y skin.y ped.y age.y type.y<span class="token number">1</span>  <span class="token number">60</span> <span class="token number">33.8</span>       <span class="token number">1</span>   <span class="token number">117</span>     <span class="token number">23</span> <span class="token number">0.466</span>    <span class="token number">27</span>     No       <span class="token number">2</span>   <span class="token number">125</span>     <span class="token number">20</span> <span class="token number">0.088</span>    <span class="token number">31</span>     No<span class="token number">2</span>  <span class="token number">64</span> <span class="token number">29.7</span>       <span class="token number">2</span>    <span class="token number">75</span>     <span class="token number">24</span> <span class="token number">0.370</span>    <span class="token number">33</span>     No       <span class="token number">2</span>   <span class="token number">100</span>     <span class="token number">23</span> <span class="token number">0.368</span>    <span class="token number">21</span>     No<span class="token number">3</span>  <span class="token number">64</span> <span class="token number">31.2</span>       <span class="token number">5</span>   <span class="token number">189</span>     <span class="token number">33</span> <span class="token number">0.583</span>    <span class="token number">29</span>    Yes       <span class="token number">3</span>   <span class="token number">158</span>     <span class="token number">13</span> <span class="token number">0.295</span>    <span class="token number">24</span>     No<span class="token number">4</span>  <span class="token number">64</span> <span class="token number">33.2</span>       <span class="token number">4</span>   <span class="token number">117</span>     <span class="token number">27</span> <span class="token number">0.230</span>    <span class="token number">24</span>     No       <span class="token number">1</span>    <span class="token number">96</span>     <span class="token number">27</span> <span class="token number">0.289</span>    <span class="token number">21</span>     No<span class="token number">5</span>  <span class="token number">66</span> <span class="token number">38.1</span>       <span class="token number">3</span>   <span class="token number">115</span>     <span class="token number">39</span> <span class="token number">0.150</span>    <span class="token number">28</span>     No       <span class="token number">1</span>   <span class="token number">114</span>     <span class="token number">36</span> <span class="token number">0.289</span>    <span class="token number">21</span>     No<span class="token number">6</span>  <span class="token number">68</span> <span class="token number">38.5</span>       <span class="token number">2</span>   <span class="token number">100</span>     <span class="token number">25</span> <span class="token number">0.324</span>    <span class="token number">26</span>     No       <span class="token number">7</span>   <span class="token number">129</span>     <span class="token number">49</span> <span class="token number">0.439</span>    <span class="token number">43</span>    Yes<span class="token number">7</span>  <span class="token number">70</span> <span class="token number">27.4</span>       <span class="token number">1</span>   <span class="token number">116</span>     <span class="token number">28</span> <span class="token number">0.204</span>    <span class="token number">21</span>     No       <span class="token number">0</span>   <span class="token number">124</span>     <span class="token number">20</span> <span class="token number">0.254</span>    <span class="token number">36</span>    Yes<span class="token number">8</span>  <span class="token number">70</span> <span class="token number">33.1</span>       <span class="token number">4</span>    <span class="token number">91</span>     <span class="token number">32</span> <span class="token number">0.446</span>    <span class="token number">22</span>     No       <span class="token number">9</span>   <span class="token number">123</span>     <span class="token number">44</span> <span class="token number">0.374</span>    <span class="token number">40</span>     No<span class="token number">9</span>  <span class="token number">70</span> <span class="token number">35.4</span>       <span class="token number">9</span>   <span class="token number">124</span>     <span class="token number">33</span> <span class="token number">0.282</span>    <span class="token number">34</span>     No       <span class="token number">6</span>   <span class="token number">134</span>     <span class="token number">23</span> <span class="token number">0.542</span>    <span class="token number">29</span>    Yes<span class="token number">10</span> <span class="token number">72</span> <span class="token number">25.6</span>       <span class="token number">1</span>   <span class="token number">157</span>     <span class="token number">21</span> <span class="token number">0.123</span>    <span class="token number">24</span>     No       <span class="token number">4</span>    <span class="token number">99</span>     <span class="token number">17</span> <span class="token number">0.294</span>    <span class="token number">28</span>     No<span class="token number">11</span> <span class="token number">72</span> <span class="token number">37.7</span>       <span class="token number">5</span>    <span class="token number">95</span>     <span class="token number">33</span> <span class="token number">0.370</span>    <span class="token number">27</span>     No       <span class="token number">6</span>   <span class="token number">103</span>     <span class="token number">32</span> <span class="token number">0.324</span>    <span class="token number">55</span>     No<span class="token number">12</span> <span class="token number">74</span> <span class="token number">25.9</span>       <span class="token number">9</span>   <span class="token number">134</span>     <span class="token number">33</span> <span class="token number">0.460</span>    <span class="token number">81</span>     No       <span class="token number">8</span>   <span class="token number">126</span>     <span class="token number">38</span> <span class="token number">0.162</span>    <span class="token number">39</span>     No<span class="token number">13</span> <span class="token number">74</span> <span class="token number">25.9</span>       <span class="token number">1</span>    <span class="token number">95</span>     <span class="token number">21</span> <span class="token number">0.673</span>    <span class="token number">36</span>     No       <span class="token number">8</span>   <span class="token number">126</span>     <span class="token number">38</span> <span class="token number">0.162</span>    <span class="token number">39</span>     No<span class="token number">14</span> <span class="token number">78</span> <span class="token number">27.6</span>       <span class="token number">5</span>    <span class="token number">88</span>     <span class="token number">30</span> <span class="token number">0.258</span>    <span class="token number">37</span>     No       <span class="token number">6</span>   <span class="token number">125</span>     <span class="token number">31</span> <span class="token number">0.565</span>    <span class="token number">49</span>    Yes<span class="token number">15</span> <span class="token number">78</span> <span class="token number">27.6</span>      <span class="token number">10</span>   <span class="token number">122</span>     <span class="token number">31</span> <span class="token number">0.512</span>    <span class="token number">45</span>     No       <span class="token number">6</span>   <span class="token number">125</span>     <span class="token number">31</span> <span class="token number">0.565</span>    <span class="token number">49</span>    Yes<span class="token number">16</span> <span class="token number">78</span> <span class="token number">39.4</span>       <span class="token number">2</span>   <span class="token number">112</span>     <span class="token number">50</span> <span class="token number">0.175</span>    <span class="token number">24</span>     No       <span class="token number">4</span>   <span class="token number">112</span>     <span class="token number">40</span> <span class="token number">0.236</span>    <span class="token number">38</span>     No<span class="token number">17</span> <span class="token number">88</span> <span class="token number">34.5</span>       <span class="token number">1</span>   <span class="token number">117</span>     <span class="token number">24</span> <span class="token number">0.403</span>    <span class="token number">40</span>    Yes       <span class="token number">4</span>   <span class="token number">127</span>     <span class="token number">11</span> <span class="token number">0.598</span>    <span class="token number">28</span>     No<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">17</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æœ‰æ—¶ï¼Œç”µå­è¡¨æ ¼æ•°æ®çš„æ ¼å¼å¾ˆç´§å‡‘ï¼Œå¯ä»¥ç»™å‡ºæ¯ä¸ªä¸»é¢˜çš„åå˜é‡ï¼Œç„¶åæ˜¯è¯¥ä¸»é¢˜çš„æ‰€æœ‰è§‚æµ‹å€¼ã€‚R çš„å»ºå‡½æ•°éœ€è¦åœ¨å•ä¸ªåˆ—ä¸­è¿›è¡Œè§‚å¯Ÿã€‚è€ƒè™‘ä»¥ä¸‹æ¥è‡ªé‡å¤ <code>MRI</code> è„‘æµ‹é‡çš„æ•°æ®æ ·æœ¬ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">Status   Age    V1     V2     V3    V4     P <span class="token number">23646</span> <span class="token number">45190</span>  <span class="token number">50333</span>  <span class="token number">55166</span> <span class="token number">56271</span>    CC <span class="token number">26174</span> <span class="token number">35535</span>  <span class="token number">38227</span>  <span class="token number">37911</span> <span class="token number">41184</span>    CC <span class="token number">27723</span> <span class="token number">25691</span>  <span class="token number">25712</span>  <span class="token number">26144</span> <span class="token number">26398</span>    CC <span class="token number">27193</span> <span class="token number">30949</span>  <span class="token number">29693</span>  <span class="token number">29754</span> <span class="token number">30772</span>    CC <span class="token number">24370</span> <span class="token number">50542</span>  <span class="token number">51966</span>  <span class="token number">54341</span> <span class="token number">54273</span>    CC <span class="token number">28359</span> <span class="token number">58591</span>  <span class="token number">58803</span>  <span class="token number">59435</span> <span class="token number">61292</span>    CC <span class="token number">25136</span> <span class="token number">45801</span>  <span class="token number">45389</span>  <span class="token number">47197</span> <span class="token number">47126</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>åœ¨æ¯ä¸ªä¸»é¢˜ä¸Šæœ‰ä¸¤ä¸ªåå˜é‡å’Œå¤šè¾¾å››ä¸ªæµ‹é‡å€¼ã€‚æ•°æ®ä» Excel å¯¼å‡ºä¸º <code>mr.csv</code> æ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å †æ ˆæ¥å¸®åŠ©æ“çºµè¿™äº›æ•°æ®ä»¥ç»™å‡ºå•ä¸ªå“åº”ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">zz <span class="token operator">&lt;-</span> read.csv<span class="token punctuation">(</span><span class="token string">"mr.csv"</span><span class="token punctuation">,</span> strip.white <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>zzz <span class="token operator">&lt;-</span> cbind<span class="token punctuation">(</span>zz<span class="token punctuation">[</span>gl<span class="token punctuation">(</span>nrow<span class="token punctuation">(</span>zz<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token operator">*</span>nrow<span class="token punctuation">(</span>zz<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> stack<span class="token punctuation">(</span>zz<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>      Status   Age values indX1         P <span class="token number">23646</span>  <span class="token number">45190</span>  V1X2        CC <span class="token number">26174</span>  <span class="token number">35535</span>  V1X3        CC <span class="token number">27723</span>  <span class="token number">25691</span>  V1X4        CC <span class="token number">27193</span>  <span class="token number">30949</span>  V1X5        CC <span class="token number">24370</span>  <span class="token number">50542</span>  V1X6        CC <span class="token number">28359</span>  <span class="token number">58591</span>  V1X7        CC <span class="token number">25136</span>  <span class="token number">45801</span>  V1X11        P <span class="token number">23646</span>  <span class="token number">50333</span>  V2<span class="token ellipsis">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å‡½æ•° <code>unstack</code> çš„æ–¹å‘ç›¸åï¼Œå¯èƒ½å¯¹å¯¼å‡ºæ•°æ®å¾ˆæœ‰ç”¨ã€‚</p><p>å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å‡½æ•°é‡å¡‘</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">reshape<span class="token punctuation">(</span>zz<span class="token punctuation">,</span> idvar<span class="token operator">=</span><span class="token string">"id"</span><span class="token punctuation">,</span> timevar<span class="token operator">=</span><span class="token string">"var"</span><span class="token punctuation">,</span> varying<span class="token operator">=</span>list<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"V1"</span><span class="token punctuation">,</span> <span class="token string">"V2"</span><span class="token punctuation">,</span> <span class="token string">"V3"</span><span class="token punctuation">,</span> <span class="token string">"V4"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> direction<span class="token operator">=</span><span class="token string">"long"</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>    Status   Age var    V1 id<span class="token number">1.1</span>      P <span class="token number">23646</span>   <span class="token number">1</span> <span class="token number">45190</span>  <span class="token number">1</span><span class="token number">2.1</span>     CC <span class="token number">26174</span>   <span class="token number">1</span> <span class="token number">35535</span>  <span class="token number">2</span><span class="token number">3.1</span>     CC <span class="token number">27723</span>   <span class="token number">1</span> <span class="token number">25691</span>  <span class="token number">3</span><span class="token number">4.1</span>     CC <span class="token number">27193</span>   <span class="token number">1</span> <span class="token number">30949</span>  <span class="token number">4</span><span class="token number">5.1</span>     CC <span class="token number">24370</span>   <span class="token number">1</span> <span class="token number">50542</span>  <span class="token number">5</span><span class="token number">6.1</span>     CC <span class="token number">28359</span>   <span class="token number">1</span> <span class="token number">58591</span>  <span class="token number">6</span><span class="token number">7.1</span>     CC <span class="token number">25136</span>   <span class="token number">1</span> <span class="token number">45801</span>  <span class="token number">7</span><span class="token number">1.2</span>      P <span class="token number">23646</span>   <span class="token number">2</span> <span class="token number">50333</span>  <span class="token number">1</span><span class="token number">2.2</span>     CC <span class="token number">26174</span>   <span class="token number">2</span> <span class="token number">38227</span>  <span class="token number">2</span><span class="token ellipsis">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>é‡å¡‘å‡½æ•°çš„è¯­æ³•æ¯”å †æ ˆæ›´å¤æ‚ï¼Œä½†å¯ä»¥ç”¨äº <code>long</code> è¡¨å•ä¸­ä¸æ­¢ä¸€åˆ—çš„æ•°æ®ã€‚å¦‚æœ <code>direction=&quot;width&quot;</code>ï¼Œé‡å¡‘è¿˜å¯ä»¥æ‰§è¡Œç›¸åçš„è½¬æ¢ã€‚</p><h1 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h1><p>å‡½æ•°æ˜¯ä¸€ç»„ç»„åˆåœ¨ä¸€èµ·ä»¥æ‰§è¡Œç‰¹å®šä»»åŠ¡çš„è¯­å¥ã€‚R è¯­è¨€å…·æœ‰å¤§é‡å†…ç½®å‡½æ•°ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºè‡ªå·±çš„å‡½æ•°ã€‚</p><p>åœ¨ R è¯­è¨€ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤ R è¯­è¨€è§£é‡Šå™¨èƒ½å¤Ÿå°†æ§åˆ¶ä¼ é€’ç»™å‡½æ•°ï¼Œä»¥åŠå‡½æ•°å®ŒæˆåŠ¨ä½œæ‰€éœ€çš„å‚æ•°ã€‚</p><p>è¯¥å‡½æ•°ä¾æ¬¡æ‰§è¡Œå…¶ä»»åŠ¡å¹¶å°†æ§åˆ¶è¿”å›åˆ°è§£é‡Šå™¨ä»¥åŠå¯ä»¥å­˜å‚¨åœ¨å…¶ä»–å¯¹è±¡ä¸­çš„ä»»ä½•ç»“æœã€‚</p><h2 id="å‡½æ•°å®šä¹‰"><a href="#å‡½æ•°å®šä¹‰" class="headerlink" title="å‡½æ•°å®šä¹‰"></a>å‡½æ•°å®šä¹‰</h2><p>ä½¿ç”¨å…³é”®å­—å‡½æ•°åˆ›å»º R è¯­è¨€çš„å‡½æ•°ã€‚R è¯­è¨€çš„å‡½æ•°å®šä¹‰çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">function_name <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>arg_1<span class="token punctuation">,</span> arg_2<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   Function body<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><h2 id="å‡½æ•°ç»„ä»¶"><a href="#å‡½æ•°ç»„ä»¶" class="headerlink" title="å‡½æ•°ç»„ä»¶"></a>å‡½æ•°ç»„ä»¶</h2><p>å‡½æ•°çš„ä¸åŒéƒ¨åˆ†ï¼š</p><ul><li><strong>å‡½æ•°åç§°</strong>ï¼šè¿™æ˜¯å‡½æ•°çš„å®é™…åç§°ã€‚å®ƒä½œä¸ºå…·æœ‰æ­¤åç§°çš„å¯¹è±¡å­˜å‚¨åœ¨ R ç¯å¢ƒä¸­ã€‚</li><li><strong>å‚æ•°</strong>ï¼šå‚æ•°æ˜¯ä¸€ä¸ªå ä½ç¬¦ã€‚å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä½ ä¼ é€’ä¸€ä¸ªå€¼åˆ°å‚æ•°ã€‚å‚æ•°æ˜¯å¯é€‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå‡½æ•°å¯èƒ½ä¸åŒ…å«å‚æ•°ã€‚å‚æ•°ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å€¼ã€‚</li><li><strong>å‡½æ•°ä½“</strong>ï¼šå‡½æ•°ä½“åŒ…å«å®šä¹‰å‡½æ•°çš„è¯­å¥é›†åˆã€‚</li><li><strong>è¿”å›å€¼</strong>ï¼šå‡½æ•°çš„è¿”å›å€¼æ˜¯è¦è¯„ä¼°çš„å‡½æ•°ä½“ä¸­çš„æœ€åä¸€ä¸ªè¡¨è¾¾å¼ã€‚</li></ul><p>R è¯­è¨€æœ‰è®¸å¤šå†…ç½®å‡½æ•°ï¼Œå¯ä»¥åœ¨ç¨‹åºä¸­ç›´æ¥è°ƒç”¨è€Œæ— éœ€å…ˆå®šä¹‰å®ƒä»¬ã€‚æˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºå’Œä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„å‡½æ•°ï¼Œç§°ä¸ºç”¨æˆ·å®šä¹‰çš„å‡½æ•°ã€‚</p><h2 id="å†…ç½®å‡½æ•°"><a href="#å†…ç½®å‡½æ•°" class="headerlink" title="å†…ç½®å‡½æ•°"></a>å†…ç½®å‡½æ•°</h2><p>å†…ç½®å‡½æ•°çš„ç®€å•ç¤ºä¾‹æ˜¯ <code>seq()</code>ï¼Œ<code>mean()</code>ï¼Œ<code>max()</code>ï¼Œ<code>sum(x)</code> å’Œ <code>paste(...)</code> ç­‰ã€‚å®ƒä»¬ç”±ç”¨æˆ·ç¼–å†™çš„ç¨‹åºç›´æ¥è°ƒç”¨ã€‚æ‚¨å¯ä»¥å‚è€ƒæœ€å¹¿æ³›ä½¿ç”¨çš„ R å‡½æ•°ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a sequence of numbers from 32 to 44.</span>print<span class="token punctuation">(</span>seq<span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Find mean of numbers from 25 to 82.</span>print<span class="token punctuation">(</span>mean<span class="token punctuation">(</span><span class="token number">25</span><span class="token operator">:</span><span class="token number">82</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Find sum of numbers frm 41 to 68.</span>print<span class="token punctuation">(</span>sum<span class="token punctuation">(</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">68</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">32</span> <span class="token number">33</span> <span class="token number">34</span> <span class="token number">35</span> <span class="token number">36</span> <span class="token number">37</span> <span class="token number">38</span> <span class="token number">39</span> <span class="token number">40</span> <span class="token number">41</span> <span class="token number">42</span> <span class="token number">43</span> <span class="token number">44</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">53.5</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1526</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="ç”¨æˆ·å®šä¹‰çš„å‡½æ•°"><a href="#ç”¨æˆ·å®šä¹‰çš„å‡½æ•°" class="headerlink" title="ç”¨æˆ·å®šä¹‰çš„å‡½æ•°"></a>ç”¨æˆ·å®šä¹‰çš„å‡½æ•°</h2><p>æˆ‘ä»¬å¯ä»¥åœ¨ R è¯­è¨€ä¸­åˆ›å»ºç”¨æˆ·å®šä¹‰çš„å‡½æ•°ã€‚å®ƒä»¬ç‰¹å®šäºç”¨æˆ·æƒ³è¦çš„ï¼Œä¸€æ—¦åˆ›å»ºï¼Œå®ƒä»¬å°±å¯ä»¥åƒå†…ç½®å‡½æ•°ä¸€æ ·ä½¿ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ›å»ºå’Œä½¿ç”¨å‡½æ•°çš„ä¾‹å­ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a function to print squares of numbers in sequence.</span>new.<span class="token keyword">function</span> <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">:</span>a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      b <span class="token operator">&lt;-</span> i<span class="token operator">^</span><span class="token number">2</span>      print<span class="token punctuation">(</span>b<span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è°ƒç”¨å‡½æ•°"><a href="#è°ƒç”¨å‡½æ•°" class="headerlink" title="è°ƒç”¨å‡½æ•°"></a>è°ƒç”¨å‡½æ•°</h2><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a function to print squares of numbers in sequence.</span>new.<span class="token keyword">function</span> <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">:</span>a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      b <span class="token operator">&lt;-</span> i<span class="token operator">^</span><span class="token number">2</span>      print<span class="token punctuation">(</span>b<span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment"># Call the function new.function supplying 6 as an argument.</span>new.<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">4</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">9</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">16</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è°ƒç”¨æ²¡æœ‰å‚æ•°çš„å‡½æ•°"><a href="#è°ƒç”¨æ²¡æœ‰å‚æ•°çš„å‡½æ•°" class="headerlink" title="è°ƒç”¨æ²¡æœ‰å‚æ•°çš„å‡½æ•°"></a>è°ƒç”¨æ²¡æœ‰å‚æ•°çš„å‡½æ•°</h2><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a function without an argument.</span>new.<span class="token keyword">function</span> <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>      print<span class="token punctuation">(</span>i<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span>   <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token comment"># Call the function without supplying an argument.</span>new.<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">4</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">9</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">16</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">25</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="ä½¿ç”¨å‚æ•°å€¼è°ƒç”¨å‡½æ•°ï¼ˆæŒ‰ä½ç½®å’Œåç§°ï¼‰"><a href="#ä½¿ç”¨å‚æ•°å€¼è°ƒç”¨å‡½æ•°ï¼ˆæŒ‰ä½ç½®å’Œåç§°ï¼‰" class="headerlink" title="ä½¿ç”¨å‚æ•°å€¼è°ƒç”¨å‡½æ•°ï¼ˆæŒ‰ä½ç½®å’Œåç§°ï¼‰"></a>ä½¿ç”¨å‚æ•°å€¼è°ƒç”¨å‡½æ•°ï¼ˆæŒ‰ä½ç½®å’Œåç§°ï¼‰</h2><p>å‡½æ•°è°ƒç”¨çš„å‚æ•°å¯ä»¥æŒ‰ç…§å‡½æ•°ä¸­å®šä¹‰çš„é¡ºåºæä¾›ï¼Œä¹Ÿå¯ä»¥ä»¥ä¸åŒçš„é¡ºåºæä¾›ï¼Œä½†åˆ†é…ç»™å‚æ•°çš„åç§°ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a function with arguments.</span>new.<span class="token keyword">function</span> <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   result <span class="token operator">&lt;-</span> a <span class="token operator">*</span> b <span class="token operator">+</span> c   print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment"># Call the function by position of arguments.</span>new.<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token comment"># Call the function by names of the arguments.</span>new.<span class="token keyword">function</span><span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> c <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">26</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">58</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="ä½¿ç”¨é»˜è®¤å‚æ•°è°ƒç”¨å‡½æ•°"><a href="#ä½¿ç”¨é»˜è®¤å‚æ•°è°ƒç”¨å‡½æ•°" class="headerlink" title="ä½¿ç”¨é»˜è®¤å‚æ•°è°ƒç”¨å‡½æ•°"></a>ä½¿ç”¨é»˜è®¤å‚æ•°è°ƒç”¨å‡½æ•°</h2><p>æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°å®šä¹‰ä¸­å®šä¹‰å‚æ•°çš„å€¼ï¼Œå¹¶è°ƒç”¨å‡½æ•°è€Œä¸æä¾›ä»»ä½•å‚æ•°ä»¥è·å–é»˜è®¤ç»“æœã€‚ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æä¾›å‚æ•°çš„æ–°å€¼æ¥è·å¾—éé»˜è®¤ç»“æœæ¥è°ƒç”¨è¿™æ ·çš„å‡½æ•°ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a function with arguments.</span>new.<span class="token keyword">function</span> <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   result <span class="token operator">&lt;-</span> a <span class="token operator">*</span> b   print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment"># Call the function without giving any argument.</span>new.<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># Call the function with giving new values of the argument.</span>new.<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">18</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">45</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å‡½æ•°çš„å»¶è¿Ÿè®¡ç®—"><a href="#å‡½æ•°çš„å»¶è¿Ÿè®¡ç®—" class="headerlink" title="å‡½æ•°çš„å»¶è¿Ÿè®¡ç®—"></a>å‡½æ•°çš„å»¶è¿Ÿè®¡ç®—</h2><p>å¯¹å‡½æ•°çš„å‚æ•°è¿›è¡Œå»¶è¿Ÿè¯„ä¼°ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åªæœ‰åœ¨å‡½æ•°ä½“éœ€è¦æ—¶æ‰è¿›è¡Œè¯„ä¼°ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a function with arguments.</span>new.<span class="token keyword">function</span> <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   print<span class="token punctuation">(</span>a<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span>   print<span class="token punctuation">(</span>a<span class="token punctuation">)</span>   print<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">&#125;</span><span class="token comment"># Evaluate the function without supplying one of the arguments.</span>new.<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">36</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">6</span>Error <span class="token keyword">in</span> print<span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">:</span> argument <span class="token string">"b"</span> is missing<span class="token punctuation">,</span> with no default<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h1><p>åœ¨ R è¯­è¨€ä¸­çš„å•å¼•å·æˆ–åŒå¼•å·å¯¹ä¸­å†™å…¥çš„ä»»ä½•å€¼éƒ½è¢«è§†ä¸ºå­—ç¬¦ä¸²ã€‚R è¯­è¨€å­˜å‚¨çš„æ¯ä¸ªå­—ç¬¦ä¸²éƒ½åœ¨åŒå¼•å·å†…ï¼Œå³ä½¿æ˜¯ä½¿ç”¨å•å¼•å·åˆ›å»ºçš„ä¾æ—§å¦‚æ­¤ã€‚</p><h2 id="å­—ç¬¦ä¸²æ„é€ è§„åˆ™"><a href="#å­—ç¬¦ä¸²æ„é€ è§„åˆ™" class="headerlink" title="å­—ç¬¦ä¸²æ„é€ è§„åˆ™"></a>å­—ç¬¦ä¸²æ„é€ è§„åˆ™</h2><p>åœ¨å­—ç¬¦ä¸²çš„å¼€å¤´å’Œç»“å°¾çš„å¼•å·åº”è¯¥æ˜¯ä¸¤ä¸ªåŒå¼•å·æˆ–ä¸¤ä¸ªå•å¼•å·ã€‚å®ƒä»¬ä¸èƒ½è¢«æ··åˆã€‚</p><ul><li>åŒå¼•å·å¯ä»¥æ’å…¥ä»¥å•å¼•å·å¼€å¤´å’Œç»“å°¾çš„å­—ç¬¦ä¸²ä¸­ã€‚</li><li>å•å¼•å·å¯ä»¥æ’å…¥ä»¥åŒå¼•å·å¼€å¤´å’Œç»“å°¾çš„å­—ç¬¦ä¸²ä¸­ã€‚</li><li>åŒå¼•å·ä¸èƒ½æ’å…¥ä»¥åŒå¼•å·å¼€å¤´å’Œç»“å°¾çš„å­—ç¬¦ä¸²ä¸­ã€‚</li><li>å•å¼•å·ä¸èƒ½æ’å…¥ä»¥å•å¼•å·å¼€å¤´å’Œç»“å°¾çš„å­—ç¬¦ä¸²ä¸­ã€‚</li></ul><p><strong>æœ‰æ•ˆå­—ç¬¦ä¸²çš„ç¤ºä¾‹</strong></p><p>ä»¥ä¸‹ç¤ºä¾‹é˜æ˜äº†åœ¨ R è¯­è¨€ä¸­åˆ›å»ºå­—ç¬¦ä¸²çš„è§„åˆ™ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">a <span class="token operator">&lt;-</span> <span class="token string">'Start and end with single quote'</span>print<span class="token punctuation">(</span>a<span class="token punctuation">)</span>b <span class="token operator">&lt;-</span> <span class="token string">"Start and end with double quotes"</span>print<span class="token punctuation">(</span>b<span class="token punctuation">)</span>c <span class="token operator">&lt;-</span> <span class="token string">"single quote ' in between double quotes"</span>print<span class="token punctuation">(</span>c<span class="token punctuation">)</span>d <span class="token operator">&lt;-</span> <span class="token string">'Double quotes " in between single quote'</span>print<span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Start and end with single quote"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Start and end with double quotes"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"single quote ' in between double quote"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Double quote "</span> <span class="token keyword">in</span> between single quote"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ— æ•ˆå­—ç¬¦ä¸²çš„ç¤ºä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">e <span class="token operator">&lt;-</span> 'Mixed quotes"print<span class="token punctuation">(</span>e<span class="token punctuation">)</span>f <span class="token operator">&lt;-</span> <span class="token string">'Single quote '</span> inside single quote'print<span class="token punctuation">(</span>f<span class="token punctuation">)</span>g <span class="token operator">&lt;-</span> <span class="token string">"Double quotes "</span> inside double quotes"print<span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬è¿è¡Œè„šæœ¬å¤±è´¥ç»™ä¸‹é¢çš„ç»“æœï¼š</span><span class="token ellipsis">...</span><span class="token operator">:</span> unexpected INCOMPLETE_STRING<span class="token ellipsis">...</span>. unexpected symbol <span class="token number">1</span><span class="token operator">:</span> f <span class="token operator">&lt;-</span> <span class="token string">'Single quote '</span> insideunexpected symbol<span class="token number">1</span><span class="token operator">:</span> g <span class="token operator">&lt;-</span> <span class="token string">"Double quotes "</span> inside<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œ"></a>å­—ç¬¦ä¸²æ“ä½œ</h2><h3 id="è¿æ¥å­—ç¬¦ä¸²"><a href="#è¿æ¥å­—ç¬¦ä¸²" class="headerlink" title="è¿æ¥å­—ç¬¦ä¸²"></a>è¿æ¥å­—ç¬¦ä¸²</h3><p>R è¯­è¨€ä¸­çš„è®¸å¤šå­—ç¬¦ä¸²ä½¿ç”¨ <code>paste()</code> å‡½æ•°ç»„åˆã€‚å®ƒå¯ä»¥é‡‡å–ä»»ä½•æ•°é‡çš„å‚æ•°ç»„åˆåœ¨ä¸€èµ·ã€‚</p><p><strong>è¯­æ³•</strong></p><p>å‡½æ•°çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">paste<span class="token punctuation">(</span><span class="token ellipsis">...</span><span class="token punctuation">,</span> sep <span class="token operator">=</span> <span class="token string">" "</span><span class="token punctuation">,</span> collapse <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>...</code>è¡¨ç¤ºè¦ç»„åˆçš„ä»»æ„æ•°é‡çš„è‡ªå˜é‡ã€‚</li><li><code>sep</code> è¡¨ç¤ºå‚æ•°ä¹‹é—´çš„ä»»ä½•åˆ†éš”ç¬¦ã€‚å®ƒæ˜¯å¯é€‰çš„ã€‚</li><li><code>collapse</code> ç”¨äºæ¶ˆé™¤ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´çš„ç©ºæ ¼ã€‚ä½†ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸¤ä¸ªå­—å†…çš„ç©ºé—´ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">a <span class="token operator">&lt;-</span> <span class="token string">"Hello"</span>b <span class="token operator">&lt;-</span> <span class="token string">'How'</span>c <span class="token operator">&lt;-</span> <span class="token string">"are you? "</span>print<span class="token punctuation">(</span>paste<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>paste<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> sep <span class="token operator">=</span> <span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>paste<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> sep <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> collapse <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello How are you? "</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello-How-are you? "</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"HelloHoware you? "</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="æ ¼å¼åŒ–æ•°å­—å’Œå­—ç¬¦ä¸²"><a href="#æ ¼å¼åŒ–æ•°å­—å’Œå­—ç¬¦ä¸²" class="headerlink" title="æ ¼å¼åŒ–æ•°å­—å’Œå­—ç¬¦ä¸²"></a>æ ¼å¼åŒ–æ•°å­—å’Œå­—ç¬¦ä¸²</h3><p>å¯ä»¥ä½¿ç”¨ <code>format()</code> å‡½æ•°å°†æ•°å­—å’Œå­—ç¬¦ä¸²æ ¼å¼åŒ–ä¸ºç‰¹å®šæ ·å¼ã€‚</p><p><strong>è¯­æ³•</strong></p><p>å‡½æ•°çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">format<span class="token punctuation">(</span>x<span class="token punctuation">,</span> digits<span class="token punctuation">,</span> nsmall<span class="token punctuation">,</span> scientific<span class="token punctuation">,</span> width<span class="token punctuation">,</span> justify <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">,</span> <span class="token string">"right"</span><span class="token punctuation">,</span> <span class="token string">"centre"</span><span class="token punctuation">,</span> <span class="token string">"none"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code> æ˜¯å‘é‡è¾“å…¥ã€‚</li><li><code>digits</code> æ˜¯æ˜¾ç¤ºçš„æ€»ä½æ•°ã€‚</li><li><code>nsmall</code> æ˜¯å°æ•°ç‚¹å³è¾¹çš„æœ€å°ä½æ•°ã€‚</li><li><code>scientific</code> è®¾ç½®ä¸º <code>TRUE</code> ä»¥ç§‘å­¦è®°æ•°æ³•æ˜¾ç¤ºã€‚</li><li><code>width</code> æŒ‡ç¤ºé€šè¿‡åœ¨å¼€å§‹å¤„å¡«å……ç©ºç™½æ¥æ˜¾ç¤ºçš„æœ€å°å®½åº¦ã€‚</li><li><code>justify</code> æ˜¯å­—ç¬¦ä¸²å‘å·¦ï¼Œå³æˆ–ä¸­å¿ƒçš„æ˜¾ç¤ºã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Total number of digits displayed. Last digit rounded off.</span>result <span class="token operator">&lt;-</span> format<span class="token punctuation">(</span><span class="token number">23.123456789</span><span class="token punctuation">,</span> digits <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># Display numbers in scientific notation.</span>result <span class="token operator">&lt;-</span> format<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">13.14521</span><span class="token punctuation">)</span><span class="token punctuation">,</span> scientific <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># The minimum number of digits to the right of the decimal point.</span>result <span class="token operator">&lt;-</span> format<span class="token punctuation">(</span><span class="token number">23.47</span><span class="token punctuation">,</span> nsmall <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># Format treats everything as a string.</span>result <span class="token operator">&lt;-</span> format<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># Numbers are padded with blank in the beginning for width.</span>result <span class="token operator">&lt;-</span> format<span class="token punctuation">(</span><span class="token number">13.7</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># Left justify strings.</span>result <span class="token operator">&lt;-</span> format<span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span> justify <span class="token operator">=</span> <span class="token string">"l"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># Justfy string with center.</span>result <span class="token operator">&lt;-</span> format<span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">,</span> width <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">,</span> justify <span class="token operator">=</span> <span class="token string">"c"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"23.1234568"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"6.000000e+00"</span> <span class="token string">"1.314521e+01"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"23.47000"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"6"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"  13.7"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Hello   "</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">" Hello  "</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="è®¡ç®—å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ•°"><a href="#è®¡ç®—å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ•°" class="headerlink" title="è®¡ç®—å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ•°"></a>è®¡ç®—å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ•°</h3><p><code>nchar()</code> å‡½æ•°å¯ä»¥è®¡ç®—å­—ç¬¦ä¸²ä¸­åŒ…å«ç©ºæ ¼çš„å­—ç¬¦æ•°ã€‚</p><p><strong>è¯­æ³•</strong></p><p>å‡½æ•°çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">nchar<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code> æ˜¯å‘é‡è¾“å…¥ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">result <span class="token operator">&lt;-</span> nchar<span class="token punctuation">(</span><span class="token string">"Count the number of characters"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">30</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="æ›´æ”¹å¤§å°å†™"><a href="#æ›´æ”¹å¤§å°å†™" class="headerlink" title="æ›´æ”¹å¤§å°å†™"></a>æ›´æ”¹å¤§å°å†™</h3><p>ä½¿ç”¨ <code>toupper()</code> å’Œ <code>tolower()</code> å‡½æ•°å¯ä»¥æ”¹å˜å­—ç¬¦ä¸²çš„å­—ç¬¦çš„å¤§å°å†™ã€‚</p><p><strong>è¯­æ³•</strong></p><p>å‡½æ•°çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">toupper<span class="token punctuation">(</span>x<span class="token punctuation">)</span>tolower<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code> æ˜¯å‘é‡è¾“å…¥ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Changing to Upper case.</span>result <span class="token operator">&lt;-</span> toupper<span class="token punctuation">(</span><span class="token string">"Changing To Upper"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># Changing to lower case.</span>result <span class="token operator">&lt;-</span> tolower<span class="token punctuation">(</span><span class="token string">"Changing To Lower"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"CHANGING TO UPPER"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"changing to lower"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="æå–å­—ç¬¦ä¸²"><a href="#æå–å­—ç¬¦ä¸²" class="headerlink" title="æå–å­—ç¬¦ä¸²"></a>æå–å­—ç¬¦ä¸²</h3><p><code>substring()</code> å‡½æ•°å¯ä»¥ç”¨äºæå–å­—ç¬¦ä¸²çš„éƒ¨åˆ†ã€‚</p><p><strong>è¯­æ³•</strong></p><p>å‡½æ•°çš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">substring<span class="token punctuation">(</span>x<span class="token punctuation">,</span> first<span class="token punctuation">,</span> last<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code> æ˜¯å­—ç¬¦å‘é‡è¾“å…¥ã€‚</li><li><code>first</code> æ˜¯è¦æå–çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®ã€‚</li><li><code>last</code> æ˜¯è¦æå–çš„æœ€åä¸€ä¸ªå­—ç¬¦çš„ä½ç½®ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Extract characters from 5th to 7th position.</span>result <span class="token operator">&lt;-</span> substring<span class="token punctuation">(</span><span class="token string">"Extract"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"act"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="å‘é‡"><a href="#å‘é‡" class="headerlink" title="å‘é‡"></a>å‘é‡</h1><p>å‘é‡æ˜¯æœ€åŸºæœ¬çš„ R è¯­è¨€æ•°æ®å¯¹è±¡ï¼Œæœ‰å…­ç§ç±»å‹çš„åŸå­å‘é‡ã€‚å®ƒä»¬æ˜¯é€»è¾‘ï¼Œæ•´æ•°ï¼ŒåŒç²¾åº¦ï¼Œå¤æ‚ï¼Œå­—ç¬¦å’ŒåŸå§‹ã€‚</p><h2 id="åˆ›å»ºå‘é‡"><a href="#åˆ›å»ºå‘é‡" class="headerlink" title="åˆ›å»ºå‘é‡"></a>åˆ›å»ºå‘é‡</h2><h3 id="å•å…ƒç´ å‘é‡"><a href="#å•å…ƒç´ å‘é‡" class="headerlink" title="å•å…ƒç´ å‘é‡"></a>å•å…ƒç´ å‘é‡</h3><p>å³ä½¿åœ¨ R è¯­è¨€ä¸­åªå†™å…¥ä¸€ä¸ªå€¼ï¼Œå®ƒä¹Ÿå°†æˆä¸ºé•¿åº¦ä¸º <code>1</code> çš„å‘é‡ï¼Œå¹¶ä¸”å±äºä¸Šè¿°å‘é‡ç±»å‹ä¹‹ä¸€ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Atomic vector of type character.</span>print<span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># Atomic vector of type double.</span>print<span class="token punctuation">(</span><span class="token number">12.5</span><span class="token punctuation">)</span><span class="token comment"># Atomic vector of type integer.</span>print<span class="token punctuation">(</span><span class="token number">63L</span><span class="token punctuation">)</span><span class="token comment"># Atomic vector of type logical.</span>print<span class="token punctuation">(</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token comment"># Atomic vector of type complex.</span>print<span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">3i</span><span class="token punctuation">)</span><span class="token comment"># Atomic vector of type raw.</span>print<span class="token punctuation">(</span>charToRaw<span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"abc"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">12.5</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">63</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token boolean">TRUE</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">2</span><span class="token operator">+</span><span class="token number">3i</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">68</span> <span class="token number">65</span> <span class="token number">6</span>c <span class="token number">6</span>c <span class="token number">6</span>f<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="å¤šå…ƒç´ å‘é‡"><a href="#å¤šå…ƒç´ å‘é‡" class="headerlink" title="å¤šå…ƒç´ å‘é‡"></a>å¤šå…ƒç´ å‘é‡</h3><p>å¯¹æ•°å€¼æ•°æ®ä½¿ç”¨å†’å·è¿ç®—ç¬¦</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Creating a sequence from 5 to 13.</span>v <span class="token operator">&lt;-</span> <span class="token number">5</span><span class="token operator">:</span><span class="token number">13</span>print<span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token comment"># Creating a sequence from 6.6 to 12.6.</span>v <span class="token operator">&lt;-</span> <span class="token number">6.6</span><span class="token operator">:</span><span class="token number">12.6</span>print<span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token comment"># If the final element specified does not belong to the sequence then it is discarded.</span>v <span class="token operator">&lt;-</span> <span class="token number">3.8</span><span class="token operator">:</span><span class="token number">11.4</span>print<span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token number">5</span>  <span class="token number">6</span>  <span class="token number">7</span>  <span class="token number">8</span>  <span class="token number">9</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token number">6.6</span>  <span class="token number">7.6</span>  <span class="token number">8.6</span>  <span class="token number">9.6</span> <span class="token number">10.6</span> <span class="token number">11.6</span> <span class="token number">12.6</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token number">3.8</span>  <span class="token number">4.8</span>  <span class="token number">5.8</span>  <span class="token number">6.8</span>  <span class="token number">7.8</span>  <span class="token number">8.8</span>  <span class="token number">9.8</span> <span class="token number">10.8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>ä½¿ç”¨ <code>sequence (Seq.)</code> åºåˆ—è¿ç®—ç¬¦</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create vector with elements from 5 to 9 incrementing by 0.4.</span>print<span class="token punctuation">(</span>seq<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> by <span class="token operator">=</span> <span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">5.0</span> <span class="token number">5.4</span> <span class="token number">5.8</span> <span class="token number">6.2</span> <span class="token number">6.6</span> <span class="token number">7.0</span> <span class="token number">7.4</span> <span class="token number">7.8</span> <span class="token number">8.2</span> <span class="token number">8.6</span> <span class="token number">9.0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>ä½¿ç”¨ <code>C()</code> å‡½æ•°</strong></p><p>å¦‚æœå…¶ä¸­ä¸€ä¸ªå…ƒç´ æ˜¯å­—ç¬¦ï¼Œåˆ™éå­—ç¬¦å€¼è¢«å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ç±»å‹ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># The logical and numeric values are converted to characters.</span>s <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"apple"</span> <span class="token string">"red"</span>  <span class="token string">"5"</span>  <span class="token string">"TRUE"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è®¿é—®å‘é‡å…ƒç´ "><a href="#è®¿é—®å‘é‡å…ƒç´ " class="headerlink" title="è®¿é—®å‘é‡å…ƒç´ "></a>è®¿é—®å‘é‡å…ƒç´ </h2><p>ä½¿ç”¨ç´¢å¼•è®¿é—®å‘é‡çš„å…ƒç´ ã€‚<code>[]</code> æ‹¬å·ç”¨äºå»ºç«‹ç´¢å¼•ã€‚ç´¢å¼•ä»ä½ç½® <code>1</code> å¼€å§‹ã€‚åœ¨ç´¢å¼•ä¸­ç»™å‡ºè´Ÿå€¼ä¼šä¸¢å¼ƒï¼Œ<code>TRUE</code>ï¼Œ<code>FALSE</code> æˆ– <code>0</code> å’Œ <code>1</code> çš„å…ƒç´ ï¼Œä¹Ÿå¯ç”¨äºç´¢å¼•ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Accessing vector elements using position.</span>t <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"Sun"</span><span class="token punctuation">,</span> <span class="token string">"Mon"</span><span class="token punctuation">,</span> <span class="token string">"Tue"</span><span class="token punctuation">,</span> <span class="token string">"Wed"</span><span class="token punctuation">,</span> <span class="token string">"Thurs"</span><span class="token punctuation">,</span> <span class="token string">"Fri"</span><span class="token punctuation">,</span> <span class="token string">"Sat"</span><span class="token punctuation">)</span>u <span class="token operator">&lt;-</span> t<span class="token punctuation">[</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token comment"># Accessing vector elements using logical indexing.</span>v <span class="token operator">&lt;-</span> t<span class="token punctuation">[</span>c<span class="token punctuation">(</span><span class="token boolean">TRUE</span><span class="token punctuation">,</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token comment"># Accessing vector elements using negative indexing.</span>x <span class="token operator">&lt;-</span> t<span class="token punctuation">[</span>c<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token comment"># Accessing vector elements using 0/1 indexing.</span>y <span class="token operator">&lt;-</span> t<span class="token punctuation">[</span>c<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Mon"</span> <span class="token string">"Tue"</span> <span class="token string">"Fri"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Sun"</span> <span class="token string">"Fri"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Sun"</span> <span class="token string">"Tue"</span> <span class="token string">"Wed"</span> <span class="token string">"Fri"</span> <span class="token string">"Sat"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Sun"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å‘é‡æ“ä½œ"><a href="#å‘é‡æ“ä½œ" class="headerlink" title="å‘é‡æ“ä½œ"></a>å‘é‡æ“ä½œ</h2><h3 id="å‘é‡è¿ç®—"><a href="#å‘é‡è¿ç®—" class="headerlink" title="å‘é‡è¿ç®—"></a>å‘é‡è¿ç®—</h3><p>å¯ä»¥åŠ ï¼Œå‡ï¼Œä¹˜ï¼Œé™¤ä¸¤ä¸ªç›¸åŒé•¿åº¦çš„å‘é‡ï¼Œå°†ç»“æœä½œä¸ºå‘é‡è¾“å‡ºã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create two vectors.</span>v1 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span>v2 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token comment"># Vector addition.</span>add.result <span class="token operator">&lt;-</span> v1 <span class="token operator">+</span> v2print<span class="token punctuation">(</span>add.result<span class="token punctuation">)</span><span class="token comment"># Vector substraction.</span>sub.result <span class="token operator">&lt;-</span> v1 <span class="token operator">-</span> v2print<span class="token punctuation">(</span>sub.result<span class="token punctuation">)</span><span class="token comment"># Vector multiplication.</span>multi.result <span class="token operator">&lt;-</span> v1 <span class="token operator">*</span> v2print<span class="token punctuation">(</span>multi.result<span class="token punctuation">)</span><span class="token comment"># Vector division.</span>divi.result <span class="token operator">&lt;-</span> v1 <span class="token operator">/</span> v2print<span class="token punctuation">(</span>divi.result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token number">7</span> <span class="token number">19</span>  <span class="token number">4</span> <span class="token number">13</span>  <span class="token number">1</span> <span class="token number">13</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">-</span><span class="token number">3</span>  <span class="token number">4</span> <span class="token operator">-</span><span class="token number">3</span> <span class="token operator">-</span><span class="token number">1</span>  <span class="token number">9</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">12</span> <span class="token number">88</span>  <span class="token number">0</span> <span class="token number">40</span>  <span class="token number">0</span> <span class="token number">22</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">0.7500000</span> <span class="token number">0.7272727</span>       <span class="token number">Inf</span> <span class="token number">0.6250000</span> <span class="token number">0.0000000</span> <span class="token number">5.5000000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="å‘é‡å…ƒç´ å›æ”¶"><a href="#å‘é‡å…ƒç´ å›æ”¶" class="headerlink" title="å‘é‡å…ƒç´ å›æ”¶"></a>å‘é‡å…ƒç´ å›æ”¶</h3><p>å¦‚æœæˆ‘ä»¬å¯¹ä¸ç­‰é•¿çš„ä¸¤ä¸ªå‘é‡åº”ç”¨ç®—æœ¯è¿ç®—ï¼Œåˆ™è¾ƒçŸ­å‘é‡çš„å…ƒç´ è¢«å¾ªç¯ä»¥å®Œæˆæ“ä½œã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">v1 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span>v2 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token comment"># V2 becomes c(4, 11, 4, 11, 4, 11)</span>add.result <span class="token operator">&lt;-</span> v1 <span class="token operator">+</span> v2print<span class="token punctuation">(</span>add.result<span class="token punctuation">)</span>sub.result <span class="token operator">&lt;-</span> v1 <span class="token operator">-</span> v2print<span class="token punctuation">(</span>sub.result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token number">7</span> <span class="token number">19</span>  <span class="token number">8</span> <span class="token number">16</span>  <span class="token number">4</span> <span class="token number">22</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">-</span><span class="token number">3</span>  <span class="token number">0</span> <span class="token operator">-</span><span class="token number">6</span> <span class="token operator">-</span><span class="token number">4</span>  <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="å‘é‡å…ƒç´ æ’åº"><a href="#å‘é‡å…ƒç´ æ’åº" class="headerlink" title="å‘é‡å…ƒç´ æ’åº"></a>å‘é‡å…ƒç´ æ’åº</h3><p>å‘é‡ä¸­çš„å…ƒç´ å¯ä»¥ä½¿ç”¨ <code>sort()</code> å‡½æ•°æ’åºã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">v <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">304</span><span class="token punctuation">)</span><span class="token comment"># Sort the elements of the vector.</span>sort.result <span class="token operator">&lt;-</span> sort<span class="token punctuation">(</span>v<span class="token punctuation">)</span>print<span class="token punctuation">(</span>sort.result<span class="token punctuation">)</span><span class="token comment"># Sort the elements in the reverse order.</span>revsort.result <span class="token operator">&lt;-</span> sort<span class="token punctuation">(</span>v<span class="token punctuation">,</span> decreasing <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>revsort.result<span class="token punctuation">)</span><span class="token comment"># Sorting character vectors.</span>v <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"Red"</span><span class="token punctuation">,</span> <span class="token string">"Blue"</span><span class="token punctuation">,</span> <span class="token string">"yellow"</span><span class="token punctuation">,</span> <span class="token string">"violet"</span><span class="token punctuation">)</span>sort.result <span class="token operator">&lt;-</span> sort<span class="token punctuation">(</span>v<span class="token punctuation">)</span>print<span class="token punctuation">(</span>sort.result<span class="token punctuation">)</span><span class="token comment"># Sorting character vectors in reverse order.</span>revsort.result <span class="token operator">&lt;-</span> sort<span class="token punctuation">(</span>v<span class="token punctuation">,</span> decreasing <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>revsort.result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token operator">-</span><span class="token number">9</span>   <span class="token number">0</span>   <span class="token number">3</span>   <span class="token number">4</span>   <span class="token number">5</span>   <span class="token number">8</span>  <span class="token number">11</span> <span class="token number">304</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">304</span>  <span class="token number">11</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">4</span>   <span class="token number">3</span>   <span class="token number">0</span>  <span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Blue"</span>   <span class="token string">"Red"</span>    <span class="token string">"violet"</span> <span class="token string">"yellow"</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"yellow"</span> <span class="token string">"violet"</span> <span class="token string">"Red"</span>    <span class="token string">"Blue"</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h1><p>åˆ—è¡¨æ˜¯ R è¯­è¨€å¯¹è±¡ï¼Œå®ƒåŒ…å«ä¸åŒç±»å‹çš„å…ƒç´ ï¼Œå¦‚æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå‘é‡å’Œå…¶ä¸­çš„å¦ä¸€ä¸ªåˆ—è¡¨ã€‚åˆ—è¡¨è¿˜å¯ä»¥åŒ…å«çŸ©é˜µæˆ–å‡½æ•°ä½œä¸ºå…¶å…ƒç´ ã€‚åˆ—è¡¨æ˜¯ä½¿ç”¨ <code>list()</code> å‡½æ•°åˆ›å»ºçš„ã€‚</p><h2 id="åˆ›å»ºåˆ—è¡¨"><a href="#åˆ›å»ºåˆ—è¡¨" class="headerlink" title="åˆ›å»ºåˆ—è¡¨"></a>åˆ›å»ºåˆ—è¡¨</h2><p>ä»¥ä¸‹æ˜¯åˆ›å»ºåŒ…å«å­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå‘é‡å’Œé€»è¾‘å€¼çš„åˆ—è¡¨çš„ç¤ºä¾‹</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a list containing strings, numbers, vectors and a logical values.</span>list_data <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span><span class="token string">"Red"</span><span class="token punctuation">,</span> <span class="token string">"Green"</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> <span class="token number">51.23</span><span class="token punctuation">,</span> <span class="token number">119.1</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>list_data<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Red"</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Green"</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">21</span> <span class="token number">32</span> <span class="token number">11</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token boolean">TRUE</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">51.23</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">119.1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å‘½ååˆ—è¡¨å…ƒç´ "><a href="#å‘½ååˆ—è¡¨å…ƒç´ " class="headerlink" title="å‘½ååˆ—è¡¨å…ƒç´ "></a>å‘½ååˆ—è¡¨å…ƒç´ </h2><p>åˆ—è¡¨å…ƒç´ å¯ä»¥ç»™å‡ºåç§°ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨è¿™äº›åç§°è®¿é—®å®ƒä»¬ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a list containing a vector, a matrix and a list.</span>list_data <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"Jan"</span><span class="token punctuation">,</span> <span class="token string">"Feb"</span><span class="token punctuation">,</span> <span class="token string">"Mar"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> list<span class="token punctuation">(</span><span class="token string">"green"</span><span class="token punctuation">,</span> <span class="token number">12.3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Give names to the elements in the list.</span>names<span class="token punctuation">(</span>list_data<span class="token punctuation">)</span> <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"1st Quarter"</span><span class="token punctuation">,</span> <span class="token string">"A_Matrix"</span><span class="token punctuation">,</span> <span class="token string">"A Inner list"</span><span class="token punctuation">)</span><span class="token comment"># Show the list.</span>print<span class="token punctuation">(</span>list_data<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token operator">$</span>`<span class="token number">1</span>st_Quarter`<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Jan"</span> <span class="token string">"Feb"</span> <span class="token string">"Mar"</span><span class="token operator">$</span>A_Matrix     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">3</span>    <span class="token number">5</span>   <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">9</span>    <span class="token number">1</span>    <span class="token number">8</span><span class="token operator">$</span>A_Inner_list<span class="token operator">$</span>A_Inner_list<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"green"</span><span class="token operator">$</span>A_Inner_list<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">12.3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è®¿é—®åˆ—è¡¨å…ƒç´ "><a href="#è®¿é—®åˆ—è¡¨å…ƒç´ " class="headerlink" title="è®¿é—®åˆ—è¡¨å…ƒç´ "></a>è®¿é—®åˆ—è¡¨å…ƒç´ </h2><p>åˆ—è¡¨çš„å…ƒç´ å¯ä»¥é€šè¿‡åˆ—è¡¨ä¸­å…ƒç´ çš„ç´¢å¼•è®¿é—®ã€‚åœ¨å‘½ååˆ—è¡¨çš„æƒ…å†µä¸‹ï¼Œå®ƒä¹Ÿå¯ä»¥ä½¿ç”¨åç§°æ¥è®¿é—®ã€‚</p><p>æˆ‘ä»¬ç»§ç»­ä½¿ç”¨åœ¨ä¸Šé¢çš„ä¾‹å­ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a list containing a vector, a matrix and a list.</span>list_data <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"Jan"</span><span class="token punctuation">,</span> <span class="token string">"Feb"</span><span class="token punctuation">,</span> <span class="token string">"Mar"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> list<span class="token punctuation">(</span><span class="token string">"green"</span><span class="token punctuation">,</span> <span class="token number">12.3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Give names to the elements in the list.</span>names<span class="token punctuation">(</span>list_data<span class="token punctuation">)</span> <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"1st Quarter"</span><span class="token punctuation">,</span> <span class="token string">"A_Matrix"</span><span class="token punctuation">,</span> <span class="token string">"A Inner list"</span><span class="token punctuation">)</span><span class="token comment"># Access the first element of the list.</span>print<span class="token punctuation">(</span>list_data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># Access the thrid element. As it is also a list, all its elements will be printed.</span>print<span class="token punctuation">(</span>list_data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># Access the list element using the name of the element.</span>print<span class="token punctuation">(</span>list_data<span class="token operator">$</span>A_Matrix<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token operator">$</span>`<span class="token number">1</span>st_Quarter`<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Jan"</span> <span class="token string">"Feb"</span> <span class="token string">"Mar"</span><span class="token operator">$</span>A_Inner_list<span class="token operator">$</span>A_Inner_list<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"green"</span><span class="token operator">$</span>A_Inner_list<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">12.3</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">3</span>    <span class="token number">5</span>   <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">9</span>    <span class="token number">1</span>    <span class="token number">8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="æ“ä½œåˆ—è¡¨å…ƒç´ "><a href="#æ“ä½œåˆ—è¡¨å…ƒç´ " class="headerlink" title="æ“ä½œåˆ—è¡¨å…ƒç´ "></a>æ“ä½œåˆ—è¡¨å…ƒç´ </h2><p>æˆ‘ä»¬å¯ä»¥æ·»åŠ ï¼Œåˆ é™¤å’Œæ›´æ–°åˆ—è¡¨å…ƒç´ ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚æˆ‘ä»¬åªèƒ½åœ¨åˆ—è¡¨çš„æœ«å°¾æ·»åŠ å’Œåˆ é™¤å…ƒç´ ã€‚ä½†æˆ‘ä»¬å¯ä»¥æ›´æ–°ä»»ä½•å…ƒç´ ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a list containing a vector, a matrix and a list.</span>list_data <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"Jan"</span><span class="token punctuation">,</span> <span class="token string">"Feb"</span><span class="token punctuation">,</span> <span class="token string">"Mar"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> list<span class="token punctuation">(</span><span class="token string">"green"</span><span class="token punctuation">,</span> <span class="token number">12.3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Give names to the elements in the list.</span>names<span class="token punctuation">(</span>list_data<span class="token punctuation">)</span> <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"1st Quarter"</span><span class="token punctuation">,</span> <span class="token string">"A_Matrix"</span><span class="token punctuation">,</span> <span class="token string">"A Inner list"</span><span class="token punctuation">)</span><span class="token comment"># Add element at the end of the list.</span>list_data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> <span class="token string">"New element"</span>print<span class="token punctuation">(</span>list_data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># Remove the last element.</span>list_data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> <span class="token keyword">NULL</span><span class="token comment"># Print the 4th Element.</span>print<span class="token punctuation">(</span>list_data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># Update the 3rd Element.</span>list_data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> <span class="token string">"updated element"</span>print<span class="token punctuation">(</span>list_data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"New element"</span><span class="token operator">$</span><span class="token keyword">NULL</span><span class="token operator">$</span>`A Inner list`<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"updated element"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆå¹¶åˆ—è¡¨"><a href="#åˆå¹¶åˆ—è¡¨" class="headerlink" title="åˆå¹¶åˆ—è¡¨"></a>åˆå¹¶åˆ—è¡¨</h2><p>é€šè¿‡å°†æ‰€æœ‰åˆ—è¡¨æ”¾åœ¨ä¸€ä¸ª <code>list()</code> å‡½æ•°ä¸­ï¼Œæ‚¨å¯ä»¥å°†è®¸å¤šåˆ—è¡¨åˆå¹¶åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create two lists.</span>list1 <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>list2 <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span><span class="token string">"Sun"</span><span class="token punctuation">,</span> <span class="token string">"Mon"</span><span class="token punctuation">,</span> <span class="token string">"Tue"</span><span class="token punctuation">)</span><span class="token comment"># Merge the two lists.</span>merged.list <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span>list1<span class="token punctuation">,</span> list2<span class="token punctuation">)</span><span class="token comment"># Print the merged list.</span>print<span class="token punctuation">(</span>merged.list<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">2</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">3</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Sun"</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Mon"</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"Tue"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å°†åˆ—è¡¨è½¬æ¢ä¸ºå‘é‡"><a href="#å°†åˆ—è¡¨è½¬æ¢ä¸ºå‘é‡" class="headerlink" title="å°†åˆ—è¡¨è½¬æ¢ä¸ºå‘é‡"></a>å°†åˆ—è¡¨è½¬æ¢ä¸ºå‘é‡</h2><p>åˆ—è¡¨å¯ä»¥è½¬æ¢ä¸ºå‘é‡ï¼Œä½¿å¾—å‘é‡çš„å…ƒç´ å¯ä»¥ç”¨äºè¿›ä¸€æ­¥çš„æ“ä½œã€‚å¯ä»¥åœ¨å°†åˆ—è¡¨è½¬æ¢ä¸ºå‘é‡ä¹‹ååº”ç”¨å¯¹å‘é‡çš„æ‰€æœ‰ç®—æœ¯è¿ç®—ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>unlist()</code> å‡½æ•°å®Œæˆè¿™ä¸ªè½¬æ¢ã€‚å®ƒå°†åˆ—è¡¨ä½œä¸ºè¾“å…¥å¹¶ç”Ÿæˆå‘é‡ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create lists.</span>list1 <span class="token operator">&lt;-</span> list<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>list1<span class="token punctuation">)</span>list2 <span class="token operator">&lt;-</span>list<span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">14</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>list2<span class="token punctuation">)</span><span class="token comment"># Convert the lists to vectors.</span>v1 <span class="token operator">&lt;-</span> unlist<span class="token punctuation">(</span>list1<span class="token punctuation">)</span>v2 <span class="token operator">&lt;-</span> unlist<span class="token punctuation">(</span>list2<span class="token punctuation">)</span>print<span class="token punctuation">(</span>v1<span class="token punctuation">)</span>print<span class="token punctuation">(</span>v2<span class="token punctuation">)</span><span class="token comment"># Now add the vectors</span>result <span class="token operator">&lt;-</span> v1 <span class="token operator">+</span> v2print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span> <span class="token number">14</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">10</span> <span class="token number">11</span> <span class="token number">12</span> <span class="token number">13</span> <span class="token number">14</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">11</span> <span class="token number">13</span> <span class="token number">15</span> <span class="token number">17</span> <span class="token number">19</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="çŸ©é˜µ"><a href="#çŸ©é˜µ" class="headerlink" title="çŸ©é˜µ"></a>çŸ©é˜µ</h1><p>çŸ©é˜µæ˜¯å…¶ä¸­å…ƒç´ ä»¥äºŒç»´çŸ©å½¢å¸ƒå±€å¸ƒç½®çš„ R å¯¹è±¡ã€‚å®ƒä»¬åŒ…å«ç›¸åŒåŸå­ç±»å‹çš„å…ƒç´ ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåªåŒ…å«å­—ç¬¦æˆ–åªåŒ…å«é€»è¾‘å€¼çš„çŸ©é˜µï¼Œä½†å®ƒä»¬æ²¡æœ‰å¤ªå¤šç”¨å¤„ã€‚æˆ‘ä»¬ä½¿ç”¨åŒ…å«æ•°å­—å…ƒç´ çš„çŸ©é˜µç”¨äºæ•°å­¦è®¡ç®—ã€‚</p><h2 id="åˆ›å»ºçŸ©é˜µ"><a href="#åˆ›å»ºçŸ©é˜µ" class="headerlink" title="åˆ›å»ºçŸ©é˜µ"></a>åˆ›å»ºçŸ©é˜µ</h2><p>R è¯­è¨€ä¸­ä½¿ç”¨ <code>matrix()</code> å‡½æ•°åˆ›å»ºä¸€ä¸ªçŸ©é˜µã€‚</p><p><strong>è¯­æ³•</strong></p><p>åœ¨ R è¯­è¨€ä¸­åˆ›å»ºçŸ©é˜µçš„åŸºæœ¬è¯­æ³•æ˜¯ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">matrix<span class="token punctuation">(</span>data<span class="token punctuation">,</span> nrow<span class="token punctuation">,</span> ncol<span class="token punctuation">,</span> byrow<span class="token punctuation">,</span> dimnames<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>data</code> æ˜¯æˆä¸ºçŸ©é˜µçš„æ•°æ®å…ƒç´ çš„è¾“å…¥å‘é‡ã€‚</li><li><code>nrow</code> æ˜¯è¦åˆ›å»ºçš„è¡Œæ•°ã€‚</li><li><code>ncol</code> æ˜¯è¦åˆ›å»ºçš„åˆ—æ•°ã€‚</li><li><code>byrow</code> æ˜¯ä¸€ä¸ªé€»è¾‘çº¿ç´¢ã€‚å¦‚æœä¸º <code>TRUE</code>ï¼Œåˆ™è¾“å…¥å‘é‡å…ƒç´ æŒ‰è¡Œæ’åˆ—ã€‚</li><li><code>dimname</code> æ˜¯åˆ†é…ç»™è¡Œå’Œåˆ—çš„åç§°ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p>åˆ›å»ºä¸€ä¸ªä»¥æ•°å­—å‘é‡ä½œä¸ºè¾“å…¥çš„çŸ©é˜µ</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Elements are arranged sequentially by row.</span>M <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> byrow <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token comment"># Elements are arranged sequentially by column.</span>N <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> byrow <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token comment"># Define the column and row names.</span>rownames <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"row1"</span><span class="token punctuation">,</span> <span class="token string">"row2"</span><span class="token punctuation">,</span> <span class="token string">"row3"</span><span class="token punctuation">,</span> <span class="token string">"row4"</span><span class="token punctuation">)</span>colnames <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"col1"</span><span class="token punctuation">,</span> <span class="token string">"col2"</span><span class="token punctuation">,</span> <span class="token string">"col3"</span><span class="token punctuation">)</span>P <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> byrow <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> dimnames <span class="token operator">=</span> list<span class="token punctuation">(</span>rownames<span class="token punctuation">,</span> colnames<span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>P<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">3</span>    <span class="token number">4</span>    <span class="token number">5</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">6</span>    <span class="token number">7</span>    <span class="token number">8</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">9</span>   <span class="token number">10</span>   <span class="token number">11</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">]</span>   <span class="token number">12</span>   <span class="token number">13</span>   <span class="token number">14</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">3</span>    <span class="token number">7</span>   <span class="token number">11</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">4</span>    <span class="token number">8</span>   <span class="token number">12</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">5</span>    <span class="token number">9</span>   <span class="token number">13</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">6</span>   <span class="token number">10</span>   <span class="token number">14</span>     col1 col2 col3row1    <span class="token number">3</span>    <span class="token number">4</span>    <span class="token number">5</span>row2    <span class="token number">6</span>    <span class="token number">7</span>    <span class="token number">8</span>row3    <span class="token number">9</span>   <span class="token number">10</span>   <span class="token number">11</span>row4   <span class="token number">12</span>   <span class="token number">13</span>   <span class="token number">14</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è®¿é—®çŸ©é˜µçš„å…ƒç´ "><a href="#è®¿é—®çŸ©é˜µçš„å…ƒç´ " class="headerlink" title="è®¿é—®çŸ©é˜µçš„å…ƒç´ "></a>è®¿é—®çŸ©é˜µçš„å…ƒç´ </h2><p>å¯ä»¥é€šè¿‡ä½¿ç”¨å…ƒç´ çš„åˆ—å’Œè¡Œç´¢å¼•æ¥è®¿é—®çŸ©é˜µçš„å…ƒç´ ã€‚æˆ‘ä»¬è€ƒè™‘ä¸Šé¢çš„çŸ©é˜µ <code>P</code> æ‰¾åˆ°ä¸‹é¢çš„å…·ä½“å…ƒç´ ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Define the column and row names.</span>rownames <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"row1"</span><span class="token punctuation">,</span> <span class="token string">"row2"</span><span class="token punctuation">,</span> <span class="token string">"row3"</span><span class="token punctuation">,</span> <span class="token string">"row4"</span><span class="token punctuation">)</span>colnames <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"col1"</span><span class="token punctuation">,</span> <span class="token string">"col2"</span><span class="token punctuation">,</span> <span class="token string">"col3"</span><span class="token punctuation">)</span><span class="token comment"># Create the matrix.</span>P <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> byrow <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> dimnames <span class="token operator">=</span> list<span class="token punctuation">(</span>rownames<span class="token punctuation">,</span> colnames<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Access the element at 3rd column and 1st row.</span>print<span class="token punctuation">(</span>P<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># Access the element at 2nd column and 4th row.</span>print<span class="token punctuation">(</span>P<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># Access only the  2nd row.</span>print<span class="token punctuation">(</span>P<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># Access only the 3rd column.</span>print<span class="token punctuation">(</span>P<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">5</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">13</span>col1 col2 col3    <span class="token number">6</span>    <span class="token number">7</span>    <span class="token number">8</span> row1 row2 row3 row4    <span class="token number">5</span>    <span class="token number">8</span>   <span class="token number">11</span>   <span class="token number">14</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="çŸ©é˜µè®¡ç®—"><a href="#çŸ©é˜µè®¡ç®—" class="headerlink" title="çŸ©é˜µè®¡ç®—"></a>çŸ©é˜µè®¡ç®—</h2><p>ä½¿ç”¨ R è¿ç®—ç¬¦å¯¹çŸ©é˜µæ‰§è¡Œå„ç§æ•°å­¦è¿ç®—ã€‚æ“ä½œçš„ç»“æœä¹Ÿæ˜¯ä¸€ä¸ªçŸ©é˜µã€‚</p><p>å¯¹äºæ“ä½œä¸­æ¶‰åŠçš„çŸ©é˜µï¼Œç»´åº¦ï¼ˆè¡Œæ•°å’Œåˆ—æ•°ï¼‰åº”è¯¥ç›¸åŒã€‚</p><h3 id="åŠ æ³•å’Œå‡æ³•"><a href="#åŠ æ³•å’Œå‡æ³•" class="headerlink" title="åŠ æ³•å’Œå‡æ³•"></a>åŠ æ³•å’Œå‡æ³•</h3><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create two 2x3 matrices.</span>matrix1 <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>matrix1<span class="token punctuation">)</span>matrix2 <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>matrix2<span class="token punctuation">)</span><span class="token comment"># Add the matrices.</span>result <span class="token operator">&lt;-</span> matrix1 <span class="token operator">+</span> matrix2cat<span class="token punctuation">(</span><span class="token string">"Result of addition"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># Subtract the matrices</span>result <span class="token operator">&lt;-</span> matrix1 <span class="token operator">-</span> matrix2cat<span class="token punctuation">(</span><span class="token string">"Result of subtraction"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">3</span>   <span class="token operator">-</span><span class="token number">1</span>    <span class="token number">2</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">9</span>    <span class="token number">4</span>    <span class="token number">6</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">5</span>    <span class="token number">0</span>    <span class="token number">3</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">2</span>    <span class="token number">9</span>    <span class="token number">4</span>Result of addition     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">8</span>   <span class="token operator">-</span><span class="token number">1</span>    <span class="token number">5</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>   <span class="token number">11</span>   <span class="token number">13</span>   <span class="token number">10</span>Result of subtraction     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>   <span class="token operator">-</span><span class="token number">2</span>   <span class="token operator">-</span><span class="token number">1</span>   <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">7</span>   <span class="token operator">-</span><span class="token number">5</span>    <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="ä¹˜æ³•å’Œé™¤æ³•"><a href="#ä¹˜æ³•å’Œé™¤æ³•" class="headerlink" title="ä¹˜æ³•å’Œé™¤æ³•"></a>ä¹˜æ³•å’Œé™¤æ³•</h3><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create two 2x3 matrices.</span>matrix1 <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>matrix1<span class="token punctuation">)</span>matrix2 <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>matrix2<span class="token punctuation">)</span><span class="token comment"># Multiply the matrices.</span>result <span class="token operator">&lt;-</span> matrix1 <span class="token operator">*</span> matrix2cat<span class="token punctuation">(</span><span class="token string">"Result of multiplication"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># Divide the matrices</span>result <span class="token operator">&lt;-</span> matrix1 <span class="token operator">/</span> matrix2cat<span class="token punctuation">(</span><span class="token string">"Result of division"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">3</span>   <span class="token operator">-</span><span class="token number">1</span>    <span class="token number">2</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">9</span>    <span class="token number">4</span>    <span class="token number">6</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">5</span>    <span class="token number">0</span>    <span class="token number">3</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">2</span>    <span class="token number">9</span>    <span class="token number">4</span>Result of multiplication      <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>   <span class="token number">15</span>    <span class="token number">0</span>    <span class="token number">6</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>   <span class="token number">18</span>   <span class="token number">36</span>   <span class="token number">24</span>Result of division      <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>      <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>      <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>  <span class="token number">0.6</span>      <span class="token operator">-</span><span class="token number">Inf</span> <span class="token number">0.6666667</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>  <span class="token number">4.5</span> <span class="token number">0.4444444</span> <span class="token number">1.5000000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h1><p>æ•°ç»„æ˜¯å¯ä»¥åœ¨ä¸¤ä¸ªä»¥ä¸Šç»´åº¦ä¸­å­˜å‚¨æ•°æ®çš„ R æ•°æ®å¯¹è±¡ã€‚</p><p>ä¾‹å¦‚ï¼šå¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»´åº¦ <code>(2ï¼Œ3ï¼Œ4)</code> çš„æ•°ç»„ï¼Œåˆ™å®ƒåˆ›å»º <code>4</code> ä¸ªçŸ©å½¢çŸ©é˜µï¼Œæ¯ä¸ªçŸ©é˜µå…·æœ‰ <code>2</code> è¡Œå’Œ <code>3</code> åˆ—ã€‚æ•°ç»„åªèƒ½å­˜å‚¨æ•°æ®ç±»å‹ã€‚</p><h2 id="åˆ›å»ºæ•°ç»„"><a href="#åˆ›å»ºæ•°ç»„" class="headerlink" title="åˆ›å»ºæ•°ç»„"></a>åˆ›å»ºæ•°ç»„</h2><p>ä½¿ç”¨ <code>array()</code> å‡½æ•°åˆ›å»ºæ•°ç»„ã€‚å®ƒä½¿ç”¨å‘é‡ä½œä¸ºè¾“å…¥ï¼Œå¹¶ä½¿ç”¨ <code>dim</code> å‚æ•°ä¸­çš„å€¼åˆ›å»ºæ•°ç»„ã€‚</p><p><strong>å®ä¾‹</strong></p><p>ä»¥ä¸‹ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªç”±ä¸¤ä¸ª <code>3x3</code> çŸ©é˜µç»„æˆçš„æ•°ç»„ï¼Œæ¯ä¸ªçŸ©é˜µå…·æœ‰ <code>3</code> è¡Œå’Œ <code>3</code> åˆ—ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create two vectors of different lengths.</span>vector1 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>vector2 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token comment"># Take these vectors as input to the array.</span>result <span class="token operator">&lt;-</span> array<span class="token punctuation">(</span>c<span class="token punctuation">(</span>vector1<span class="token punctuation">,</span> vector2<span class="token punctuation">)</span><span class="token punctuation">,</span> dim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">1</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">5</span>   <span class="token number">10</span>   <span class="token number">13</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">9</span>   <span class="token number">11</span>   <span class="token number">14</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">3</span>   <span class="token number">12</span>   <span class="token number">15</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">2</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">5</span>   <span class="token number">10</span>   <span class="token number">13</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">9</span>   <span class="token number">11</span>   <span class="token number">14</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">3</span>   <span class="token number">12</span>   <span class="token number">15</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å‘½ååˆ—å’Œè¡Œ"><a href="#å‘½ååˆ—å’Œè¡Œ" class="headerlink" title="å‘½ååˆ—å’Œè¡Œ"></a>å‘½ååˆ—å’Œè¡Œ</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>dimnames</code> å‚æ•°ç»™æ•°ç»„ä¸­çš„è¡Œï¼Œåˆ—å’ŒçŸ©é˜µå‘½åã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create two vectors of different lengths.</span>vector1 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>vector2 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>column.names <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"COL1"</span><span class="token punctuation">,</span> <span class="token string">"COL2"</span><span class="token punctuation">,</span> <span class="token string">"COL3"</span><span class="token punctuation">)</span>row.names <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"ROW1"</span><span class="token punctuation">,</span> <span class="token string">"ROW2"</span><span class="token punctuation">,</span> <span class="token string">"ROW3"</span><span class="token punctuation">)</span>matrix.names <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"Matrix1"</span><span class="token punctuation">,</span> <span class="token string">"Matrix2"</span><span class="token punctuation">)</span><span class="token comment"># Take these vectors as input to the array.</span>result <span class="token operator">&lt;-</span> array<span class="token punctuation">(</span>c<span class="token punctuation">(</span>vector1<span class="token punctuation">,</span> vector2<span class="token punctuation">)</span><span class="token punctuation">,</span> dim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dimnames <span class="token operator">=</span> list<span class="token punctuation">(</span>row.names<span class="token punctuation">,</span> column.names<span class="token punctuation">,</span> matrix.names<span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> Matrix1     COL1 COL2 COL3ROW1    <span class="token number">5</span>   <span class="token number">10</span>   <span class="token number">13</span>ROW2    <span class="token number">9</span>   <span class="token number">11</span>   <span class="token number">14</span>ROW3    <span class="token number">3</span>   <span class="token number">12</span>   <span class="token number">15</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> Matrix2     COL1 COL2 COL3ROW1    <span class="token number">5</span>   <span class="token number">10</span>   <span class="token number">13</span>ROW2    <span class="token number">9</span>   <span class="token number">11</span>   <span class="token number">14</span>ROW3    <span class="token number">3</span>   <span class="token number">12</span>   <span class="token number">15</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è®¿é—®æ•°ç»„å…ƒç´ "><a href="#è®¿é—®æ•°ç»„å…ƒç´ " class="headerlink" title="è®¿é—®æ•°ç»„å…ƒç´ "></a>è®¿é—®æ•°ç»„å…ƒç´ </h2><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create two vectors of different lengths.</span>vector1 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>vector2 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span>column.names <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"COL1"</span><span class="token punctuation">,</span> <span class="token string">"COL2"</span><span class="token punctuation">,</span> <span class="token string">"COL3"</span><span class="token punctuation">)</span>row.names <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"ROW1"</span><span class="token punctuation">,</span> <span class="token string">"ROW2"</span><span class="token punctuation">,</span> <span class="token string">"ROW3"</span><span class="token punctuation">)</span>matrix.names <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"Matrix1"</span><span class="token punctuation">,</span> <span class="token string">"Matrix2"</span><span class="token punctuation">)</span><span class="token comment"># Take these vectors as input to the array.</span>result <span class="token operator">&lt;-</span> array<span class="token punctuation">(</span>c<span class="token punctuation">(</span>vector1<span class="token punctuation">,</span> vector2<span class="token punctuation">)</span><span class="token punctuation">,</span> dim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dimnames <span class="token operator">=</span> list<span class="token punctuation">(</span>row.names<span class="token punctuation">,</span> column.names<span class="token punctuation">,</span> matrix.names<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Print the third row of the second matrix of the array.</span>print<span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># Print the element in the 1st row and 3rd column of the 1st matrix.</span>print<span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># Print the 2nd Matrix.</span>print<span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>COL1 COL2 COL3    <span class="token number">3</span>   <span class="token number">12</span>   <span class="token number">15</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">13</span>     COL1 COL2 COL3ROW1    <span class="token number">5</span>   <span class="token number">10</span>   <span class="token number">13</span>ROW2    <span class="token number">9</span>   <span class="token number">11</span>   <span class="token number">14</span>ROW3    <span class="token number">3</span>   <span class="token number">12</span>   <span class="token number">15</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="æ“ä½œæ•°ç»„å…ƒç´ "><a href="#æ“ä½œæ•°ç»„å…ƒç´ " class="headerlink" title="æ“ä½œæ•°ç»„å…ƒç´ "></a>æ“ä½œæ•°ç»„å…ƒç´ </h2><p>ç”±äºæ•°ç»„ç”±å¤šç»´æ„æˆçŸ©é˜µï¼Œæ‰€ä»¥å¯¹æ•°ç»„å…ƒç´ çš„æ“ä½œé€šè¿‡è®¿é—®çŸ©é˜µçš„å…ƒç´ æ¥æ‰§è¡Œã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create two vectors of different lengths.</span>vector1 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>vector2 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token comment"># Take these vectors as input to the array.</span>array1 <span class="token operator">&lt;-</span> array<span class="token punctuation">(</span>c<span class="token punctuation">(</span>vector1<span class="token punctuation">,</span> vector2<span class="token punctuation">)</span><span class="token punctuation">,</span> dim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Create two vectors of different lengths.</span>vector3 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>vector4 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>array2 <span class="token operator">&lt;-</span> array<span class="token punctuation">(</span>c<span class="token punctuation">(</span>vector1<span class="token punctuation">,</span> vector2<span class="token punctuation">)</span><span class="token punctuation">,</span> dim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># create matrices from these arrays.</span>matrix1 <span class="token operator">&lt;-</span> array1<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>matrix2 <span class="token operator">&lt;-</span> array2<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token comment"># Add the matrices.</span>result <span class="token operator">&lt;-</span> matrix1 <span class="token operator">+</span> matrix2print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>   <span class="token number">10</span>   <span class="token number">20</span>   <span class="token number">26</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>   <span class="token number">18</span>   <span class="token number">22</span>   <span class="token number">28</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">6</span>   <span class="token number">24</span>   <span class="token number">30</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è·¨æ•°ç»„å…ƒç´ çš„è®¡ç®—"><a href="#è·¨æ•°ç»„å…ƒç´ çš„è®¡ç®—" class="headerlink" title="è·¨æ•°ç»„å…ƒç´ çš„è®¡ç®—"></a>è·¨æ•°ç»„å…ƒç´ çš„è®¡ç®—</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>apply()</code> å‡½æ•°åœ¨æ•°ç»„ä¸­çš„å…ƒç´ ä¸Šè¿›è¡Œè®¡ç®—ã€‚</p><p><strong>è¯­æ³•</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">apply<span class="token punctuation">(</span>x<span class="token punctuation">,</span> margin<span class="token punctuation">,</span> fun<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>x</code> æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</li><li><code>margin</code> æ˜¯æ‰€ä½¿ç”¨çš„æ•°æ®é›†çš„åç§°ã€‚</li><li><code>fun</code> æ˜¯è¦åº”ç”¨äºæ•°ç»„å…ƒç´ çš„å‡½æ•°ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p>æˆ‘ä»¬ä¸‹é¢ä½¿ç”¨ <code>apply()</code> å‡½æ•°è®¡ç®—æ‰€æœ‰çŸ©é˜µä¸­æ•°ç»„è¡Œä¸­å…ƒç´ çš„æ€»å’Œã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create two vectors of different lengths.</span>vector1 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>vector2 <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token comment"># Take these vectors as input to the array.</span>new.array <span class="token operator">&lt;-</span> array<span class="token punctuation">(</span>c<span class="token punctuation">(</span>vector1<span class="token punctuation">,</span> vector2<span class="token punctuation">)</span><span class="token punctuation">,</span> dim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>new.array<span class="token punctuation">)</span><span class="token comment"># Use apply to calculate the sum of the rows across all the matrices.</span>result <span class="token operator">&lt;-</span> apply<span class="token punctuation">(</span>new.array<span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">1</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">5</span>   <span class="token number">10</span>   <span class="token number">13</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">9</span>   <span class="token number">11</span>   <span class="token number">14</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">3</span>   <span class="token number">12</span>   <span class="token number">15</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">2</span>     <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">5</span>   <span class="token number">10</span>   <span class="token number">13</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">9</span>   <span class="token number">11</span>   <span class="token number">14</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">]</span>    <span class="token number">3</span>   <span class="token number">12</span>   <span class="token number">15</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">56</span> <span class="token number">68</span> <span class="token number">60</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="å› å­"><a href="#å› å­" class="headerlink" title="å› å­"></a>å› å­</h1><p>å› å­æ˜¯ç”¨äºå¯¹æ•°æ®è¿›è¡Œåˆ†ç±»å¹¶å°†å…¶å­˜å‚¨ä¸ºçº§åˆ«çš„æ•°æ®å¯¹è±¡ã€‚å®ƒä»¬å¯ä»¥å­˜å‚¨å­—ç¬¦ä¸²å’Œæ•´æ•°ã€‚å®ƒä»¬åœ¨å…·æœ‰æœ‰é™æ•°é‡çš„å”¯ä¸€å€¼çš„åˆ—ä¸­å¾ˆæœ‰ç”¨ã€‚åƒ <code>ç”·æ€§</code>ï¼Œ<code>å¥³æ€§</code> å’Œ <code>True</code>ï¼Œ<code>False</code> ç­‰ã€‚å®ƒä»¬åœ¨ç»Ÿè®¡å»ºæ¨¡çš„æ•°æ®åˆ†æä¸­å¾ˆæœ‰ç”¨ã€‚</p><h2 id="åˆ›å»ºå› å­"><a href="#åˆ›å»ºå› å­" class="headerlink" title="åˆ›å»ºå› å­"></a>åˆ›å»ºå› å­</h2><p>ä½¿ç”¨ <code>factor()</code> å‡½æ•°é€šè¿‡å°†å‘é‡ä½œä¸ºè¾“å…¥åˆ›å»ºå› å­ã€‚</p><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create a vector as input.</span>data <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"East"</span><span class="token punctuation">,</span> <span class="token string">"West"</span><span class="token punctuation">,</span> <span class="token string">"East"</span><span class="token punctuation">,</span> <span class="token string">"North"</span><span class="token punctuation">,</span> <span class="token string">"North"</span><span class="token punctuation">,</span> <span class="token string">"East"</span><span class="token punctuation">,</span> <span class="token string">"West"</span><span class="token punctuation">,</span> <span class="token string">"West"</span><span class="token punctuation">,</span> <span class="token string">"West"</span><span class="token punctuation">,</span> <span class="token string">"East"</span><span class="token punctuation">,</span> <span class="token string">"North"</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>data<span class="token punctuation">)</span>print<span class="token punctuation">(</span>is.factor<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Apply the factor function.</span>factor_data <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>data<span class="token punctuation">)</span>print<span class="token punctuation">(</span>factor_data<span class="token punctuation">)</span>print<span class="token punctuation">(</span>is.factor<span class="token punctuation">(</span>factor_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"East"</span>  <span class="token string">"West"</span>  <span class="token string">"East"</span>  <span class="token string">"North"</span> <span class="token string">"North"</span> <span class="token string">"East"</span>  <span class="token string">"West"</span>  <span class="token string">"West"</span>  <span class="token string">"West"</span>  <span class="token string">"East"</span> <span class="token string">"North"</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token boolean">FALSE</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> East  West  East  North North East  West  West  West  East  NorthLevels<span class="token operator">:</span> East North West<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token boolean">TRUE</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="æ•°æ®æ¡†çš„å› å­"><a href="#æ•°æ®æ¡†çš„å› å­" class="headerlink" title="æ•°æ®æ¡†çš„å› å­"></a>æ•°æ®æ¡†çš„å› å­</h2><p>åœ¨åˆ›å»ºå…·æœ‰æ–‡æœ¬æ•°æ®åˆ—çš„ä»»ä½•æ•°æ®æ¡†æ—¶ï¼ŒR è¯­è¨€å°†æ–‡æœ¬åˆ—è§†ä¸ºåˆ†ç±»æ•°æ®å¹¶åœ¨å…¶ä¸Šåˆ›å»ºå› å­ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the vectors for data frame.</span>height <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">132</span><span class="token punctuation">,</span> <span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">162</span><span class="token punctuation">,</span> <span class="token number">139</span><span class="token punctuation">,</span> <span class="token number">166</span><span class="token punctuation">,</span> <span class="token number">147</span><span class="token punctuation">,</span> <span class="token number">122</span><span class="token punctuation">)</span>weight <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>gender <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"male"</span><span class="token punctuation">,</span> <span class="token string">"male"</span><span class="token punctuation">,</span> <span class="token string">"female"</span><span class="token punctuation">,</span> <span class="token string">"female"</span><span class="token punctuation">,</span> <span class="token string">"male"</span><span class="token punctuation">,</span> <span class="token string">"female"</span><span class="token punctuation">,</span> <span class="token string">"male"</span><span class="token punctuation">)</span><span class="token comment"># Create the data frame.</span>input_data <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>height<span class="token punctuation">,</span> weight<span class="token punctuation">,</span> gender<span class="token punctuation">)</span>print<span class="token punctuation">(</span>input_data<span class="token punctuation">)</span><span class="token comment"># Test if the gender column is a factor.</span>print<span class="token punctuation">(</span>is.factor<span class="token punctuation">(</span>input_data<span class="token operator">$</span>gender<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># Print the gender column so see the levels.</span>print<span class="token punctuation">(</span>input_data<span class="token operator">$</span>gender<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  height weight gender<span class="token number">1</span>    <span class="token number">132</span>     <span class="token number">48</span>   male<span class="token number">2</span>    <span class="token number">151</span>     <span class="token number">49</span>   male<span class="token number">3</span>    <span class="token number">162</span>     <span class="token number">66</span> female<span class="token number">4</span>    <span class="token number">139</span>     <span class="token number">53</span> female<span class="token number">5</span>    <span class="token number">166</span>     <span class="token number">67</span>   male<span class="token number">6</span>    <span class="token number">147</span>     <span class="token number">52</span> female<span class="token number">7</span>    <span class="token number">122</span>     <span class="token number">40</span>   male<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token boolean">TRUE</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> male   male   female female male   female male  Levels<span class="token operator">:</span> female male<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="æ›´æ”¹çº§åˆ«é¡ºåº"><a href="#æ›´æ”¹çº§åˆ«é¡ºåº" class="headerlink" title="æ›´æ”¹çº§åˆ«é¡ºåº"></a>æ›´æ”¹çº§åˆ«é¡ºåº</h2><p>å¯ä»¥é€šè¿‡ä½¿ç”¨æ–°çš„ç­‰çº§æ¬¡åºå†æ¬¡åº”ç”¨å› å­å‡½æ•°æ¥æ”¹å˜å› å­ä¸­çš„ç­‰çº§çš„é¡ºåºã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">data <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"East"</span><span class="token punctuation">,</span> <span class="token string">"West"</span><span class="token punctuation">,</span> <span class="token string">"East"</span><span class="token punctuation">,</span> <span class="token string">"North"</span><span class="token punctuation">,</span> <span class="token string">"North"</span><span class="token punctuation">,</span> <span class="token string">"East"</span><span class="token punctuation">,</span> <span class="token string">"West"</span><span class="token punctuation">,</span> <span class="token string">"West"</span><span class="token punctuation">,</span> <span class="token string">"West"</span><span class="token punctuation">,</span> <span class="token string">"East"</span><span class="token punctuation">,</span> <span class="token string">"North"</span><span class="token punctuation">)</span><span class="token comment"># Create the factors</span>factor_data <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>data<span class="token punctuation">)</span>print<span class="token punctuation">(</span>factor_data<span class="token punctuation">)</span><span class="token comment"># Apply the factor function with required order of the level.</span>new_order_data <span class="token operator">&lt;-</span> factor<span class="token punctuation">(</span>factor_data<span class="token punctuation">,</span> levels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"East"</span><span class="token punctuation">,</span> <span class="token string">"West"</span><span class="token punctuation">,</span> <span class="token string">"North"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>new_order_data<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> East  West  East  North North East  West  West  West  East  NorthLevels<span class="token operator">:</span> East North West <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> East  West  East  North North East  West  West  West  East  NorthLevels<span class="token operator">:</span> East West North<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="ç”Ÿæˆå› å­çº§åˆ«"><a href="#ç”Ÿæˆå› å­çº§åˆ«" class="headerlink" title="ç”Ÿæˆå› å­çº§åˆ«"></a>ç”Ÿæˆå› å­çº§åˆ«</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>gl()</code> å‡½æ•°ç”Ÿæˆå› å­çº§åˆ«ã€‚å®ƒéœ€è¦ä¸¤ä¸ªæ•´æ•°ä½œä¸ºè¾“å…¥ï¼ŒæŒ‡ç¤ºæ¯ä¸ªçº§åˆ«æœ‰å¤šå°‘çº§åˆ«å’Œå¤šå°‘æ¬¡ã€‚</p><p><strong>è¯­æ³•</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">gl<span class="token punctuation">(</span>n<span class="token punctuation">,</span> k<span class="token punctuation">,</span> labels<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹æ˜¯æ‰€ä½¿ç”¨çš„å‚æ•°çš„è¯´æ˜ï¼š</p><ul><li><code>n</code> æ˜¯ç»™å‡ºçº§æ•°çš„æ•´æ•°ã€‚</li><li><code>k</code> æ˜¯ç»™å‡ºå¤åˆ¶æ•°ç›®çš„æ•´æ•°ã€‚</li><li><code>labels</code> æ˜¯æ‰€å¾—å› å­æ°´å¹³çš„æ ‡ç­¾å‘é‡ã€‚</li></ul><p><strong>å®ä¾‹</strong></p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">v <span class="token operator">&lt;-</span> gl<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> labels <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Tampa"</span><span class="token punctuation">,</span> <span class="token string">"Seattle"</span><span class="token punctuation">,</span> <span class="token string">"Boston"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>print<span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Tampa   Tampa   Tampa   Tampa   Seattle Seattle Seattle Seattle Boston  Boston  Boston  Boston Levels<span class="token operator">:</span> Tampa Seattle Boston<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="æ•°æ®æ¡†"><a href="#æ•°æ®æ¡†" class="headerlink" title="æ•°æ®æ¡†"></a>æ•°æ®æ¡†</h1><p>æ•°æ®æ¡†æ˜¯è¡¨æˆ–äºŒç»´é˜µåˆ—çŠ¶ç»“æ„ï¼Œå…¶ä¸­æ¯ä¸€åˆ—åŒ…å«ä¸€ä¸ªå˜é‡çš„å€¼ï¼Œå¹¶ä¸”æ¯ä¸€è¡ŒåŒ…å«æ¥è‡ªæ¯ä¸€åˆ—çš„ä¸€ç»„å€¼ã€‚</p><p>ä»¥ä¸‹æ˜¯æ•°æ®æ¡†çš„ç‰¹æ€§ã€‚</p><ul><li>åˆ—åç§°åº”ä¸ºéç©ºã€‚</li><li>è¡Œåç§°åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚</li><li>å­˜å‚¨åœ¨æ•°æ®æ¡†ä¸­çš„æ•°æ®å¯ä»¥æ˜¯æ•°å­—ï¼Œå› å­æˆ–å­—ç¬¦ç±»å‹ã€‚</li><li>æ¯ä¸ªåˆ—åº”åŒ…å«ç›¸åŒæ•°é‡çš„æ•°æ®é¡¹ã€‚</li></ul><h2 id="åˆ›å»ºæ•°æ®æ¡†"><a href="#åˆ›å»ºæ•°æ®æ¡†" class="headerlink" title="åˆ›å»ºæ•°æ®æ¡†"></a>åˆ›å»ºæ•°æ®æ¡†</h2><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data frame.</span>emp.data <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>   emp_id <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    emp_name <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Rick"</span><span class="token punctuation">,</span> <span class="token string">"Dan"</span><span class="token punctuation">,</span> <span class="token string">"Michelle"</span><span class="token punctuation">,</span> <span class="token string">"Ryan"</span><span class="token punctuation">,</span> <span class="token string">"Gary"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    salary <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">623.3</span><span class="token punctuation">,</span> <span class="token number">515.2</span><span class="token punctuation">,</span> <span class="token number">611.0</span><span class="token punctuation">,</span> <span class="token number">729.0</span><span class="token punctuation">,</span> <span class="token number">843.25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    start_date <span class="token operator">=</span> as.Date<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"2012-01-01"</span><span class="token punctuation">,</span> <span class="token string">"2013-09-23"</span><span class="token punctuation">,</span> <span class="token string">"2014-11-15"</span><span class="token punctuation">,</span> <span class="token string">"2014-05-11"</span><span class="token punctuation">,</span> <span class="token string">"2015-03-27"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token comment"># Print the data frame.</span>print<span class="token punctuation">(</span>emp.data<span class="token punctuation">)</span> <span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span> emp_id    emp_name     salary     start_date<span class="token number">1</span>     <span class="token number">1</span>     Rick        <span class="token number">623.30</span>     <span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span><span class="token number">2</span>     <span class="token number">2</span>     Dan         <span class="token number">515.20</span>     <span class="token number">2013</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">23</span><span class="token number">3</span>     <span class="token number">3</span>     Michelle    <span class="token number">611.00</span>     <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span><span class="token number">4</span>     <span class="token number">4</span>     Ryan        <span class="token number">729.00</span>     <span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span><span class="token number">5</span>     <span class="token number">5</span>     Gary        <span class="token number">843.25</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è·å–æ•°æ®æ¡†çš„ç»“æ„"><a href="#è·å–æ•°æ®æ¡†çš„ç»“æ„" class="headerlink" title="è·å–æ•°æ®æ¡†çš„ç»“æ„"></a>è·å–æ•°æ®æ¡†çš„ç»“æ„</h2><p>é€šè¿‡ä½¿ç”¨ <code>str()</code> å‡½æ•°å¯ä»¥çœ‹åˆ°æ•°æ®æ¡†çš„ç»“æ„ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data frame.</span>emp.data <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>   emp_id <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    emp_name <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Rick"</span><span class="token punctuation">,</span> <span class="token string">"Dan"</span><span class="token punctuation">,</span> <span class="token string">"Michelle"</span><span class="token punctuation">,</span> <span class="token string">"Ryan"</span><span class="token punctuation">,</span> <span class="token string">"Gary"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    salary <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">623.3</span><span class="token punctuation">,</span> <span class="token number">515.2</span><span class="token punctuation">,</span> <span class="token number">611.0</span><span class="token punctuation">,</span> <span class="token number">729.0</span><span class="token punctuation">,</span> <span class="token number">843.25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    start_date <span class="token operator">=</span> as.Date<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"2012-01-01"</span><span class="token punctuation">,</span> <span class="token string">"2013-09-23"</span><span class="token punctuation">,</span> <span class="token string">"2014-11-15"</span><span class="token punctuation">,</span> <span class="token string">"2014-05-11"</span><span class="token punctuation">,</span> <span class="token string">"2015-03-27"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token comment"># Get the structure of the data frame.</span>str<span class="token punctuation">(</span>emp.data<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span><span class="token string">'data.frame'</span><span class="token operator">:</span><span class="token number">5</span> obs. of  <span class="token number">4</span> variables<span class="token operator">:</span> <span class="token operator">$</span> emp_id    <span class="token operator">:</span> int  <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token operator">$</span> emp_name  <span class="token operator">:</span> chr  <span class="token string">"Rick"</span> <span class="token string">"Dan"</span> <span class="token string">"Michelle"</span> <span class="token string">"Ryan"</span> <span class="token ellipsis">...</span> <span class="token operator">$</span> salary    <span class="token operator">:</span> num  <span class="token number">623</span> <span class="token number">515</span> <span class="token number">611</span> <span class="token number">729</span> <span class="token number">843</span> <span class="token operator">$</span> start_date<span class="token operator">:</span> Date<span class="token punctuation">,</span> format<span class="token operator">:</span> <span class="token string">"2012-01-01"</span> <span class="token string">"2013-09-23"</span> <span class="token string">"2014-11-15"</span> <span class="token string">"2014-05-11"</span> <span class="token ellipsis">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="æ•°æ®æ¡†ä¸­çš„æ•°æ®æ‘˜è¦"><a href="#æ•°æ®æ¡†ä¸­çš„æ•°æ®æ‘˜è¦" class="headerlink" title="æ•°æ®æ¡†ä¸­çš„æ•°æ®æ‘˜è¦"></a>æ•°æ®æ¡†ä¸­çš„æ•°æ®æ‘˜è¦</h2><p>å¯ä»¥é€šè¿‡åº”ç”¨ <code>summary()</code> å‡½æ•°è·å–æ•°æ®çš„ç»Ÿè®¡æ‘˜è¦å’Œæ€§è´¨ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data frame.</span>emp.data <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>   emp_id <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    emp_name <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Rick"</span><span class="token punctuation">,</span> <span class="token string">"Dan"</span><span class="token punctuation">,</span> <span class="token string">"Michelle"</span><span class="token punctuation">,</span> <span class="token string">"Ryan"</span><span class="token punctuation">,</span> <span class="token string">"Gary"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    salary <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">623.3</span><span class="token punctuation">,</span> <span class="token number">515.2</span><span class="token punctuation">,</span> <span class="token number">611.0</span><span class="token punctuation">,</span> <span class="token number">729.0</span><span class="token punctuation">,</span> <span class="token number">843.25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    start_date <span class="token operator">=</span> as.Date<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"2012-01-01"</span><span class="token punctuation">,</span> <span class="token string">"2013-09-23"</span><span class="token punctuation">,</span> <span class="token string">"2014-11-15"</span><span class="token punctuation">,</span> <span class="token string">"2014-05-11"</span><span class="token punctuation">,</span> <span class="token string">"2015-03-27"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token comment"># Print the summary.</span>print<span class="token punctuation">(</span>summary<span class="token punctuation">(</span>emp.data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>     emp_id    emp_name             salary        start_date         Min.   <span class="token operator">:</span><span class="token number">1</span>   Length<span class="token operator">:</span><span class="token number">5</span>           Min.   <span class="token operator">:</span><span class="token number">515.2</span>   Min.   <span class="token operator">:</span><span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>   <span class="token number">1</span>st Qu.<span class="token operator">:</span><span class="token number">2</span>   Class <span class="token operator">:</span>character   <span class="token number">1</span>st Qu.<span class="token operator">:</span><span class="token number">611.0</span>   <span class="token number">1</span>st Qu.<span class="token operator">:</span><span class="token number">2013</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">23</span>   Median <span class="token operator">:</span><span class="token number">3</span>   Mode  <span class="token operator">:</span>character   Median <span class="token operator">:</span><span class="token number">623.3</span>   Median <span class="token operator">:</span><span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>   Mean   <span class="token operator">:</span><span class="token number">3</span>                      Mean   <span class="token operator">:</span><span class="token number">664.4</span>   Mean   <span class="token operator">:</span><span class="token number">2014</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">14</span>   <span class="token number">3</span>rd Qu.<span class="token operator">:</span><span class="token number">4</span>                      <span class="token number">3</span>rd Qu.<span class="token operator">:</span><span class="token number">729.0</span>   <span class="token number">3</span>rd Qu.<span class="token operator">:</span><span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>   Max.   <span class="token operator">:</span><span class="token number">5</span>                      Max.   <span class="token operator">:</span><span class="token number">843.2</span>   Max.   <span class="token operator">:</span><span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="ä»æ•°æ®æ¡†æå–æ•°æ®"><a href="#ä»æ•°æ®æ¡†æå–æ•°æ®" class="headerlink" title="ä»æ•°æ®æ¡†æå–æ•°æ®"></a>ä»æ•°æ®æ¡†æå–æ•°æ®</h2><p>ä½¿ç”¨åˆ—åç§°ä»æ•°æ®æ¡†ä¸­æå–ç‰¹å®šåˆ—ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data frame.</span>emp.data <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>   emp_id <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    emp_name <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Rick"</span><span class="token punctuation">,</span> <span class="token string">"Dan"</span><span class="token punctuation">,</span> <span class="token string">"Michelle"</span><span class="token punctuation">,</span> <span class="token string">"Ryan"</span><span class="token punctuation">,</span> <span class="token string">"Gary"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    salary <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">623.3</span><span class="token punctuation">,</span> <span class="token number">515.2</span><span class="token punctuation">,</span> <span class="token number">611.0</span><span class="token punctuation">,</span> <span class="token number">729.0</span><span class="token punctuation">,</span> <span class="token number">843.25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    start_date <span class="token operator">=</span> as.Date<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"2012-01-01"</span><span class="token punctuation">,</span> <span class="token string">"2013-09-23"</span><span class="token punctuation">,</span> <span class="token string">"2014-11-15"</span><span class="token punctuation">,</span> <span class="token string">"2014-05-11"</span><span class="token punctuation">,</span> <span class="token string">"2015-03-27"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token comment"># Extract Specific columns.</span>result <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>emp.data<span class="token operator">$</span>emp_name<span class="token punctuation">,</span> emp.data<span class="token operator">$</span>salary<span class="token punctuation">)</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  emp.data.emp_name emp.data.salary<span class="token number">1</span>              Rick          <span class="token number">623.30</span><span class="token number">2</span>               Dan          <span class="token number">515.20</span><span class="token number">3</span>          Michelle          <span class="token number">611.00</span><span class="token number">4</span>              Ryan          <span class="token number">729.00</span><span class="token number">5</span>              Gary          <span class="token number">843.25</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å…ˆæå–å‰ä¸¤è¡Œï¼Œç„¶åæå–æ‰€æœ‰åˆ—</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data frame.</span>emp.data <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>   emp_id <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    emp_name <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Rick"</span><span class="token punctuation">,</span> <span class="token string">"Dan"</span><span class="token punctuation">,</span> <span class="token string">"Michelle"</span><span class="token punctuation">,</span> <span class="token string">"Ryan"</span><span class="token punctuation">,</span> <span class="token string">"Gary"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    salary <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">623.3</span><span class="token punctuation">,</span> <span class="token number">515.2</span><span class="token punctuation">,</span> <span class="token number">611.0</span><span class="token punctuation">,</span> <span class="token number">729.0</span><span class="token punctuation">,</span> <span class="token number">843.25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    start_date <span class="token operator">=</span> as.Date<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"2012-01-01"</span><span class="token punctuation">,</span> <span class="token string">"2013-09-23"</span><span class="token punctuation">,</span> <span class="token string">"2014-11-15"</span><span class="token punctuation">,</span> <span class="token string">"2014-05-11"</span><span class="token punctuation">,</span> <span class="token string">"2015-03-27"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token comment"># Extract first two rows.</span>result <span class="token operator">&lt;-</span> emp.data<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">]</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  emp_id    emp_name   salary    start_date<span class="token number">1</span>      <span class="token number">1</span>     Rick      <span class="token number">623.3</span>     <span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span><span class="token number">2</span>      <span class="token number">2</span>     Dan       <span class="token number">515.2</span>     <span class="token number">2013</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">23</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æå–ç¬¬ 2 åˆ—å’Œç¬¬ 4 åˆ—ï¼Œç¬¬ 3 è¡Œå’Œç¬¬ 5 è¡Œ</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data frame.</span>emp.data <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>   emp_id <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    emp_name <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Rick"</span><span class="token punctuation">,</span> <span class="token string">"Dan"</span><span class="token punctuation">,</span> <span class="token string">"Michelle"</span><span class="token punctuation">,</span> <span class="token string">"Ryan"</span><span class="token punctuation">,</span> <span class="token string">"Gary"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    salary <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">623.3</span><span class="token punctuation">,</span> <span class="token number">515.2</span><span class="token punctuation">,</span> <span class="token number">611.0</span><span class="token punctuation">,</span> <span class="token number">729.0</span><span class="token punctuation">,</span> <span class="token number">843.25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    start_date <span class="token operator">=</span> as.Date<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"2012-01-01"</span><span class="token punctuation">,</span> <span class="token string">"2013-09-23"</span><span class="token punctuation">,</span> <span class="token string">"2014-11-15"</span><span class="token punctuation">,</span> <span class="token string">"2014-05-11"</span><span class="token punctuation">,</span> <span class="token string">"2015-03-27"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token comment"># Extract 3rd and 5th row with 2nd and 4th column.</span>result <span class="token operator">&lt;-</span> emp.data<span class="token punctuation">[</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">]</span>print<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  emp_name start_date<span class="token number">3</span> Michelle <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span><span class="token number">5</span>     Gary <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="æ‰©å±•æ•°æ®æ¡†"><a href="#æ‰©å±•æ•°æ®æ¡†" class="headerlink" title="æ‰©å±•æ•°æ®æ¡†"></a>æ‰©å±•æ•°æ®æ¡†</h2><p>å¯ä»¥é€šè¿‡æ·»åŠ åˆ—å’Œè¡Œæ¥æ‰©å±•æ•°æ®æ¡†ã€‚</p><h3 id="æ·»åŠ åˆ—"><a href="#æ·»åŠ åˆ—" class="headerlink" title="æ·»åŠ åˆ—"></a>æ·»åŠ åˆ—</h3><p>åªéœ€ä½¿ç”¨æ–°çš„åˆ—åç§°æ·»åŠ åˆ—å‘é‡ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the data frame.</span>emp.data <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>   emp_id <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    emp_name <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Rick"</span><span class="token punctuation">,</span> <span class="token string">"Dan"</span><span class="token punctuation">,</span> <span class="token string">"Michelle"</span><span class="token punctuation">,</span> <span class="token string">"Ryan"</span><span class="token punctuation">,</span> <span class="token string">"Gary"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    salary <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">623.3</span><span class="token punctuation">,</span> <span class="token number">515.2</span><span class="token punctuation">,</span> <span class="token number">611.0</span><span class="token punctuation">,</span> <span class="token number">729.0</span><span class="token punctuation">,</span> <span class="token number">843.25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    start_date <span class="token operator">=</span> as.Date<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"2012-01-01"</span><span class="token punctuation">,</span> <span class="token string">"2013-09-23"</span><span class="token punctuation">,</span> <span class="token string">"2014-11-15"</span><span class="token punctuation">,</span> <span class="token string">"2014-05-11"</span><span class="token punctuation">,</span> <span class="token string">"2015-03-27"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token comment"># Add the "dept" coulmn.</span>emp.data<span class="token operator">$</span>dept <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"IT"</span><span class="token punctuation">,</span> <span class="token string">"Operations"</span><span class="token punctuation">,</span> <span class="token string">"IT"</span><span class="token punctuation">,</span> <span class="token string">"HR"</span><span class="token punctuation">,</span> <span class="token string">"Finance"</span><span class="token punctuation">)</span>v <span class="token operator">&lt;-</span> emp.dataprint<span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  emp_id   emp_name    salary    start_date       dept<span class="token number">1</span>     <span class="token number">1</span>    Rick        <span class="token number">623.30</span>    <span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>       IT<span class="token number">2</span>     <span class="token number">2</span>    Dan         <span class="token number">515.20</span>    <span class="token number">2013</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">23</span>       Operations<span class="token number">3</span>     <span class="token number">3</span>    Michelle    <span class="token number">611.00</span>    <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>       IT<span class="token number">4</span>     <span class="token number">4</span>    Ryan        <span class="token number">729.00</span>    <span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>       HR<span class="token number">5</span>     <span class="token number">5</span>    Gary        <span class="token number">843.25</span>    <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span>       Finance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="æ·»åŠ è¡Œ"><a href="#æ·»åŠ è¡Œ" class="headerlink" title="æ·»åŠ è¡Œ"></a>æ·»åŠ è¡Œ</h3><p>è¦å°†æ›´å¤šè¡Œæ°¸ä¹…æ·»åŠ åˆ°ç°æœ‰æ•°æ®æ¡†ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ä¸ç°æœ‰æ•°æ®æ¡†ç›¸åŒç»“æ„çš„æ–°è¡Œï¼Œå¹¶ä½¿ç”¨ <code>rbind()</code> å‡½æ•°ã€‚</p><p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŒ…å«æ–°è¡Œçš„æ•°æ®æ¡†ï¼Œå¹¶å°†å…¶ä¸ç°æœ‰æ•°æ®æ¡†åˆå¹¶ä»¥åˆ›å»ºæœ€ç»ˆæ•°æ®æ¡†ã€‚</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># Create the first data frame.</span>emp.data <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>   emp_id <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    emp_name <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Rick"</span><span class="token punctuation">,</span> <span class="token string">"Dan"</span><span class="token punctuation">,</span> <span class="token string">"Michelle"</span><span class="token punctuation">,</span> <span class="token string">"Ryan"</span><span class="token punctuation">,</span> <span class="token string">"Gary"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    salary <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">623.3</span><span class="token punctuation">,</span> <span class="token number">515.2</span><span class="token punctuation">,</span> <span class="token number">611.0</span><span class="token punctuation">,</span> <span class="token number">729.0</span><span class="token punctuation">,</span> <span class="token number">843.25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    start_date <span class="token operator">=</span> as.Date<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"2012-01-01"</span><span class="token punctuation">,</span> <span class="token string">"2013-09-23"</span><span class="token punctuation">,</span> <span class="token string">"2014-11-15"</span><span class="token punctuation">,</span> <span class="token string">"2014-05-11"</span><span class="token punctuation">,</span> <span class="token string">"2015-03-27"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    dept <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"IT"</span><span class="token punctuation">,</span> <span class="token string">"Operations"</span><span class="token punctuation">,</span> <span class="token string">"IT"</span><span class="token punctuation">,</span> <span class="token string">"HR"</span><span class="token punctuation">,</span> <span class="token string">"Finance"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token comment"># Create the second data frame</span>emp.newdata <span class="token operator">&lt;-</span> data.frame<span class="token punctuation">(</span>   emp_id <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">6</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    emp_name <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Rasmi"</span><span class="token punctuation">,</span> <span class="token string">"Pranab"</span><span class="token punctuation">,</span> <span class="token string">"Tusar"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   salary <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">578.0</span><span class="token punctuation">,</span> <span class="token number">722.5</span><span class="token punctuation">,</span> <span class="token number">632.8</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    start_date <span class="token operator">=</span> as.Date<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"2013-05-21"</span><span class="token punctuation">,</span> <span class="token string">"2013-07-30"</span><span class="token punctuation">,</span> <span class="token string">"2014-06-17"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   dept <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"IT"</span><span class="token punctuation">,</span> <span class="token string">"Operations"</span><span class="token punctuation">,</span> <span class="token string">"Fianance"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   stringsAsFactors <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token comment"># Bind the two data frames.</span>emp.finaldata <span class="token operator">&lt;-</span> rbind<span class="token punctuation">(</span>emp.data<span class="token punctuation">,</span> emp.newdata<span class="token punctuation">)</span>print<span class="token punctuation">(</span>emp.finaldata<span class="token punctuation">)</span><span class="token comment"># å½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œå®ƒäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š</span>  emp_id     emp_name    salary     start_date       dept<span class="token number">1</span>      <span class="token number">1</span>     Rick        <span class="token number">623.30</span>     <span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>       IT<span class="token number">2</span>      <span class="token number">2</span>     Dan         <span class="token number">515.20</span>     <span class="token number">2013</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">23</span>       Operations<span class="token number">3</span>      <span class="token number">3</span>     Michelle    <span class="token number">611.00</span>     <span class="token number">2014</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">15</span>       IT<span class="token number">4</span>      <span class="token number">4</span>     Ryan        <span class="token number">729.00</span>     <span class="token number">2014</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">11</span>       HR<span class="token number">5</span>      <span class="token number">5</span>     Gary        <span class="token number">843.25</span>     <span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">27</span>       Finance<span class="token number">6</span>      <span class="token number">6</span>     Rasmi       <span class="token number">578.00</span>     <span class="token number">2013</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">21</span>       IT<span class="token number">7</span>      <span class="token number">7</span>     Pranab      <span class="token number">722.50</span>     <span class="token number">2013</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">30</span>       Operations<span class="token number">8</span>      <span class="token number">8</span>     Tusar       <span class="token number">632.80</span>     <span class="token number">2014</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">17</span>       Fianance<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="è‡ªå¸¦æ•°æ®é›†"><a href="#è‡ªå¸¦æ•°æ®é›†" class="headerlink" title="è‡ªå¸¦æ•°æ®é›†"></a>è‡ªå¸¦æ•°æ®é›†</h1><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥è¯¢ R è¯­è¨€è‡ªå¸¦çš„æ•°æ®é›†ï¼š</p><p><pre class="line-numbers language-r" data-language="r"><code class="language-r">data<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="å‘é‡æ•°æ®é›†"><a href="#å‘é‡æ•°æ®é›†" class="headerlink" title="å‘é‡æ•°æ®é›†"></a>å‘é‡æ•°æ®é›†</h2><div class="table-container"><table><thead><tr><th style="text-align:center">æ•°æ®é›†</th><th style="text-align:center">å†…å®¹</th></tr></thead><tbody><tr><td style="text-align:center">euro</td><td style="text-align:center">æ¬§å…ƒæ±‡ç‡ï¼Œé•¿åº¦ä¸º 11ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰å‘½å</td></tr><tr><td style="text-align:center">landmasses</td><td style="text-align:center">48 ä¸ªé™†åœ°çš„é¢ç§¯ï¼Œæ¯ä¸ªéƒ½æœ‰å‘½å</td></tr><tr><td style="text-align:center">precip</td><td style="text-align:center">é•¿åº¦ä¸º 70 çš„å‘½åå‘é‡</td></tr><tr><td style="text-align:center">rivers</td><td style="text-align:center">åŒ—ç¾ 141 æ¡æ²³æµé•¿åº¦</td></tr><tr><td style="text-align:center">state.abb</td><td style="text-align:center">ç¾å›½ 50 ä¸ªå·çš„åŒå­—æ¯ç¼©å†™</td></tr><tr><td style="text-align:center">state.area</td><td style="text-align:center">ç¾å›½ 50 ä¸ªå·çš„é¢ç§¯</td></tr><tr><td style="text-align:center">state.name</td><td style="text-align:center">ç¾å›½ 50 ä¸ªå·çš„å…¨ç§°</td></tr></tbody></table></div><h2 id="å› å­æ•°æ®é›†"><a href="#å› å­æ•°æ®é›†" class="headerlink" title="å› å­æ•°æ®é›†"></a>å› å­æ•°æ®é›†</h2><div class="table-container"><table><thead><tr><th style="text-align:center">æ•°æ®é›†</th><th style="text-align:center">å†…å®¹</th></tr></thead><tbody><tr><td style="text-align:center">state.division</td><td style="text-align:center">ç¾å›½ 50 ä¸ªå·çš„åˆ†ç±»ï¼Œ9 ä¸ªç±»åˆ«</td></tr><tr><td style="text-align:center">state.region</td><td style="text-align:center">ç¾å›½ 50 ä¸ªå·çš„åœ°ç†åˆ†ç±»</td></tr></tbody></table></div><h2 id="çŸ©é˜µã€æ•°ç»„æ•°æ®é›†"><a href="#çŸ©é˜µã€æ•°ç»„æ•°æ®é›†" class="headerlink" title="çŸ©é˜µã€æ•°ç»„æ•°æ®é›†"></a>çŸ©é˜µã€æ•°ç»„æ•°æ®é›†</h2><div class="table-container"><table><thead><tr><th style="text-align:center">æ•°æ®é›†</th><th style="text-align:center">å†…å®¹</th></tr></thead><tbody><tr><td style="text-align:center">euro.cross</td><td style="text-align:center">11 ç§è´§å¸çš„æ±‡ç‡çŸ©é˜µ</td></tr><tr><td style="text-align:center">freeny</td><td style="text-align:center">æ¯ä¸ªå­£åº¦å½±å“æ”¶å…¥å››ä¸ªå› ç´ çš„è®°å½•</td></tr><tr><td style="text-align:center">state.x77</td><td style="text-align:center">ç¾å›½ 50 ä¸ªå·çš„å…«ä¸ªæŒ‡æ ‡</td></tr><tr><td style="text-align:center">USPersonalExpenditure</td><td style="text-align:center">5 ä¸ªå¹´ä»½åœ¨ 5 ä¸ªæ¶ˆè´¹æ–¹å‘çš„æ•°æ®</td></tr><tr><td style="text-align:center">VADeaths</td><td style="text-align:center">1940 å¹´å¼—å‰å°¼äºšå·æ­»äº¡ç‡ï¼ˆæ¯åƒäººï¼‰</td></tr><tr><td style="text-align:center">volcano</td><td style="text-align:center">æŸç«å±±åŒºçš„åœ°ç†ä¿¡æ¯ï¼ˆ10 ç±³ Ã— 10 ç±³çš„ç½‘æ ¼ï¼‰</td></tr><tr><td style="text-align:center">WorldPhones</td><td style="text-align:center">8 ä¸ªåŒºåŸŸåœ¨ 7 ä¸ªå¹´ä»½çš„ç”µè¯æ€»æ•°</td></tr><tr><td style="text-align:center">iris3</td><td style="text-align:center">3 ç§é¸¢å°¾èŠ±å½¢æ€æ•°æ®</td></tr><tr><td style="text-align:center">Titanic</td><td style="text-align:center">æ³°å¦å°¼å…‹ä¹˜å‘˜ç»Ÿè®¡</td></tr><tr><td style="text-align:center">UCBAdmissions</td><td style="text-align:center">ä¼¯å…‹åˆ©åˆ†æ ¡ 1973 å¹´é™¢ç³»ã€å½•å–å’Œæ€§åˆ«çš„é¢‘æ•°</td></tr><tr><td style="text-align:center">crimtab</td><td style="text-align:center">3000 ä¸ªç”·æ€§ç½ªçŠ¯å·¦æ‰‹ä¸­æŒ‡é•¿åº¦å’Œèº«é«˜å…³ç³»</td></tr><tr><td style="text-align:center">HairEyeColor</td><td style="text-align:center">592 äººå¤´å‘é¢œè‰²ã€çœ¼ç›é¢œè‰²å’Œæ€§åˆ«çš„é¢‘æ•°</td></tr><tr><td style="text-align:center">occupationalStatus</td><td style="text-align:center">è‹±å›½ç”·æ€§çˆ¶å­èŒä¸šè”ç³»</td></tr></tbody></table></div><h2 id="ç±»çŸ©é˜µæ•°æ®é›†"><a href="#ç±»çŸ©é˜µæ•°æ®é›†" class="headerlink" title="ç±»çŸ©é˜µæ•°æ®é›†"></a>ç±»çŸ©é˜µæ•°æ®é›†</h2><div class="table-container"><table><thead><tr><th style="text-align:center">æ•°æ®é›†</th><th style="text-align:center">å†…å®¹</th></tr></thead><tbody><tr><td style="text-align:center">eurodist</td><td style="text-align:center">æ¬§æ´² 12 ä¸ªåŸå¸‚çš„è·ç¦»çŸ©é˜µï¼Œåªæœ‰ä¸‹ä¸‰è§’éƒ¨åˆ†</td></tr><tr><td style="text-align:center">Harman23.cor</td><td style="text-align:center">305 ä¸ªå¥³å­© 8 ä¸ªå½¢æ€æŒ‡æ ‡çš„ç›¸å…³ç³»æ•°çŸ©é˜µ</td></tr><tr><td style="text-align:center">Harman74.cor</td><td style="text-align:center">145 ä¸ªå„¿ç«¥ 24 ä¸ªå¿ƒç†æŒ‡æ ‡çš„ç›¸å…³ç³»æ•°çŸ©é˜µ</td></tr></tbody></table></div><h2 id="æ•°æ®æ¡†æ•°æ®é›†"><a href="#æ•°æ®æ¡†æ•°æ®é›†" class="headerlink" title="æ•°æ®æ¡†æ•°æ®é›†"></a>æ•°æ®æ¡†æ•°æ®é›†</h2><div class="table-container"><table><thead><tr><th style="text-align:center">æ•°æ®é›†</th><th style="text-align:center">å†…å®¹</th></tr></thead><tbody><tr><td style="text-align:center">airquality</td><td style="text-align:center">çº½çº¦ 1973 å¹´ 5-9 æœˆæ¯æ—¥ç©ºæ°”è´¨é‡</td></tr><tr><td style="text-align:center">anscombe</td><td style="text-align:center">å››ç»„ x-y æ•°æ®ï¼Œè™½æœ‰ç›¸ä¼¼çš„ç»Ÿè®¡é‡ï¼Œä½†å®é™…æ•°æ®å·®åˆ«è¾ƒå¤§</td></tr><tr><td style="text-align:center">attenu</td><td style="text-align:center">å¤šä¸ªè§‚æµ‹ç«™å¯¹åŠ åˆ©ç¦å°¼äºš 23 æ¬¡åœ°éœ‡çš„è§‚æµ‹æ•°æ®</td></tr><tr><td style="text-align:center">attitude</td><td style="text-align:center">30 ä¸ªéƒ¨é—¨åœ¨ä¸ƒä¸ªæ–¹é¢çš„è°ƒæŸ¥ç»“æœï¼Œè°ƒæŸ¥ç»“æœæ˜¯åŒä¸€éƒ¨é—¨ 35 ä¸ªèŒå‘˜èµæˆçš„ç™¾åˆ†æ¯”</td></tr><tr><td style="text-align:center">beaver1</td><td style="text-align:center">ä¸€åªæµ·ç‹¸æ¯ 10 åˆ†é’Ÿçš„ä½“æ¸©æ•°æ®ï¼Œå…± 114 æ¡æ•°æ®</td></tr><tr><td style="text-align:center">beaver2</td><td style="text-align:center">å¦ä¸€åªæµ·ç‹¸æ¯ 10 åˆ†é’Ÿçš„ä½“æ¸©æ•°æ®ï¼Œå…± 100 æ¡æ•°æ®</td></tr><tr><td style="text-align:center">BOD</td><td style="text-align:center">éšæ°´è´¨çš„æé«˜ï¼Œç”ŸåŒ–ååº”å¯¹æ°§çš„éœ€æ±‚ï¼ˆmg/lï¼‰éšæ—¶é—´ï¼ˆå¤©ï¼‰çš„å˜åŒ–</td></tr><tr><td style="text-align:center">cars</td><td style="text-align:center">1920 å¹´ä»£æ±½è½¦é€Ÿåº¦å¯¹åˆ¹è½¦è·ç¦»çš„å½±å“</td></tr><tr><td style="text-align:center">chickwts</td><td style="text-align:center">ä¸åŒé¥®é£Ÿç§ç±»å¯¹å°é¸¡ç”Ÿé•¿é€Ÿåº¦çš„å½±å“</td></tr><tr><td style="text-align:center">esoph</td><td style="text-align:center">æ³•å›½çš„ä¸€ä¸ªé£Ÿç®¡ç™Œç—…ä¾‹å¯¹ç…§ç ”ç©¶</td></tr><tr><td style="text-align:center">faithful</td><td style="text-align:center">ä¸€ä¸ªé—´æ­‡æ³‰çš„çˆ†å‘æ—¶é—´å’ŒæŒç»­æ—¶é—´</td></tr><tr><td style="text-align:center">Formaldehyde</td><td style="text-align:center">ä¸¤ç§æ–¹æ³•æµ‹å®šç”²é†›æµ“åº¦æ—¶åˆ†å…‰å…‰åº¦è®¡çš„è¯»æ•°</td></tr><tr><td style="text-align:center">Freeny</td><td style="text-align:center">æ¯å­£åº¦æ”¶å…¥å’Œå…¶ä»–å››å› ç´ çš„è®°å½•</td></tr><tr><td style="text-align:center">dating from</td><td style="text-align:center">é…å¯¹çš„ç—…ä¾‹å¯¹ç…§æ•°æ®ï¼Œç”¨äºæ¡ä»¶ logistic å›å½’</td></tr><tr><td style="text-align:center">InsectSprays</td><td style="text-align:center">ä½¿ç”¨ä¸åŒæ€è™«å‰‚æ—¶æ˜†è™«æ•°ç›®</td></tr><tr><td style="text-align:center">iris</td><td style="text-align:center">3 ç§é¸¢å°¾èŠ±å½¢æ€æ•°æ®</td></tr><tr><td style="text-align:center">LifeCycleSavings</td><td style="text-align:center">50 ä¸ªå›½å®¶çš„å­˜æ¬¾ç‡</td></tr><tr><td style="text-align:center">longley</td><td style="text-align:center">å¼ºå…±çº¿æ€§çš„å®è§‚ç»æµæ•°æ®</td></tr><tr><td style="text-align:center">morley</td><td style="text-align:center">å…‰é€Ÿæµ‹é‡è¯•éªŒæ•°æ®</td></tr><tr><td style="text-align:center">mtcars</td><td style="text-align:center">32 è¾†æ±½è½¦åœ¨ 11 ä¸ªæŒ‡æ ‡ä¸Šçš„æ•°æ®</td></tr><tr><td style="text-align:center">OrchardSprays</td><td style="text-align:center">ä½¿ç”¨æ‹‰ä¸æ–¹è®¾è®¡ç ”ç©¶ä¸åŒå–·é›¾å‰‚å¯¹èœœèœ‚çš„å½±å“</td></tr><tr><td style="text-align:center">PlantGrowth</td><td style="text-align:center">ä¸‰ç§å¤„ç†æ–¹å¼å¯¹æ¤ç‰©äº§é‡çš„å½±å“</td></tr><tr><td style="text-align:center">pressure</td><td style="text-align:center">æ¸©åº¦å’Œæ°”å‹</td></tr><tr><td style="text-align:center">Puromycin</td><td style="text-align:center">ä¸¤ç§ç»†èƒä¸­è¾…å› å­æµ“åº¦å¯¹é…¶ä¿ƒååº”çš„å½±å“</td></tr><tr><td style="text-align:center">quakes</td><td style="text-align:center">1000 æ¬¡åœ°éœ‡è§‚æµ‹æ•°æ®ï¼ˆéœ‡çº§ 4ï¼‰</td></tr><tr><td style="text-align:center">randu</td><td style="text-align:center">ä½¿ç”¨ FORTRAN ä¸­çš„ RANDU ä¸‰ä¸ªä¸€ç»„ç”Ÿæˆéšæœºæ•°å­—ï¼Œå…± 400 ç»„ã€‚</td></tr><tr><td style="text-align:center">rock</td><td style="text-align:center">48 å—çŸ³å¤´çš„å½¢æ€æ•°æ®</td></tr><tr><td style="text-align:center">sleep</td><td style="text-align:center">ä¸¤è¯ç‰©çš„å‚¬çœ æ•ˆæœ</td></tr><tr><td style="text-align:center">stackloss</td><td style="text-align:center">åŒ–å·¥å‚å°†æ°¨è½¬ä¸ºç¡é…¸çš„æ•°æ®</td></tr><tr><td style="text-align:center">swiss</td><td style="text-align:center">ç‘å£«ç”Ÿè‚²ç‡å’Œç¤¾ä¼šç»æµæŒ‡æ ‡</td></tr><tr><td style="text-align:center">ToothGrowth</td><td style="text-align:center">VC å‰‚é‡å’Œæ‘„å…¥æ–¹å¼å¯¹è±šé¼ ç‰™é½¿çš„å½±å“</td></tr><tr><td style="text-align:center">trees</td><td style="text-align:center">æ ‘æœ¨å½¢æ€æŒ‡æ ‡</td></tr><tr><td style="text-align:center">USArrests</td><td style="text-align:center">ç¾å›½ 50 ä¸ªå·çš„å››ä¸ªçŠ¯ç½ªç‡æŒ‡æ ‡</td></tr><tr><td style="text-align:center">USJudgeRatings</td><td style="text-align:center">43 åå¾‹å¸ˆçš„ 12 ä¸ªè¯„ä»·æŒ‡æ ‡</td></tr><tr><td style="text-align:center">warpbreaks</td><td style="text-align:center">ç»‡å¸ƒæœºå¼‚å¸¸æ•°æ®</td></tr><tr><td style="text-align:center">women</td><td style="text-align:center">15 åå¥³æ€§çš„èº«é«˜å’Œä½“é‡</td></tr></tbody></table></div><h2 id="åˆ—è¡¨æ•°æ®é›†"><a href="#åˆ—è¡¨æ•°æ®é›†" class="headerlink" title="åˆ—è¡¨æ•°æ®é›†"></a>åˆ—è¡¨æ•°æ®é›†</h2><div class="table-container"><table><thead><tr><th style="text-align:center">æ•°æ®é›†</th><th style="text-align:center">å†…å®¹</th></tr></thead><tbody><tr><td style="text-align:center">state.center</td><td style="text-align:center">ç¾å›½ 50 ä¸ªå·ä¸­å¿ƒçš„ç»åº¦å’Œçº¬åº¦</td></tr></tbody></table></div><h2 id="ç±»æ•°æ®æ¡†æ•°æ®é›†"><a href="#ç±»æ•°æ®æ¡†æ•°æ®é›†" class="headerlink" title="ç±»æ•°æ®æ¡†æ•°æ®é›†"></a>ç±»æ•°æ®æ¡†æ•°æ®é›†</h2><div class="table-container"><table><thead><tr><th style="text-align:center">æ•°æ®é›†</th><th style="text-align:center">å†…å®¹</th></tr></thead><tbody><tr><td style="text-align:center">ChickWeight</td><td style="text-align:center">é¥®é£Ÿå¯¹é¸¡ç”Ÿé•¿çš„å½±å“</td></tr><tr><td style="text-align:center">CO2</td><td style="text-align:center">è€å¯’æ¤ç‰© CO2 æ‘„å–çš„å·®å¼‚</td></tr><tr><td style="text-align:center">DNase</td><td style="text-align:center">è‹¥å¹²æ¬¡è¯•éªŒä¸­ï¼ŒDNase æµ“åº¦å’Œå…‰å¯†åº¦çš„å…³ç³»</td></tr><tr><td style="text-align:center">Indometh</td><td style="text-align:center">æŸè¯ç‰©çš„è¯ç‰©åŠ¨åŠ›å­¦æ•°æ®</td></tr><tr><td style="text-align:center">Loblolly</td><td style="text-align:center">ç«ç‚¬æ¾çš„é«˜åº¦ã€å¹´é¾„å’Œç§æº</td></tr><tr><td style="text-align:center">Orange</td><td style="text-align:center">æ¡”å­æ ‘ç”Ÿé•¿æ•°æ®</td></tr><tr><td style="text-align:center">Theoph</td><td style="text-align:center">èŒ¶ç¢±è¯åŠ¨å­¦æ•°æ®</td></tr></tbody></table></div><h2 id="æ—¶é—´åºåˆ—æ•°æ®é›†"><a href="#æ—¶é—´åºåˆ—æ•°æ®é›†" class="headerlink" title="æ—¶é—´åºåˆ—æ•°æ®é›†"></a>æ—¶é—´åºåˆ—æ•°æ®é›†</h2><div class="table-container"><table><thead><tr><th style="text-align:center">æ•°æ®é›†</th><th style="text-align:center">å†…å®¹</th></tr></thead><tbody><tr><td style="text-align:center">airmiles</td><td style="text-align:center">ç¾å›½ 1937-1960 å¹´å®¢è¿é‡Œç¨‹è¥æ”¶ï¼ˆå®é™…å”®å‡ºæœºä½ä¹˜ä»¥é£è¡Œå“©æ•°ï¼‰</td></tr><tr><td style="text-align:center">AirPassengers</td><td style="text-align:center">Box &amp; Jenkins èˆªç©ºå…¬å¸ 1949-1960 å¹´æ¯æœˆå›½é™…èˆªçº¿ä¹˜å®¢æ•°</td></tr><tr><td style="text-align:center">austres</td><td style="text-align:center">æ¾³å¤§åˆ©äºš 1971-1994 æ¯å­£åº¦äººå£æ•°ï¼ˆä»¥åƒä¸ºå•ä½ï¼‰</td></tr><tr><td style="text-align:center">BJsales</td><td style="text-align:center">æœ‰å…³é”€å”®çš„ä¸€ä¸ªæ—¶é—´åºåˆ—</td></tr><tr><td style="text-align:center">BJsales.lead</td><td style="text-align:center">å‰ä¸€æŒ‡æ ‡çš„å…ˆè¡ŒæŒ‡æ ‡ï¼ˆleading indicatorï¼‰</td></tr><tr><td style="text-align:center">co2</td><td style="text-align:center">1959-1997 å¹´æ¯æœˆå¤§æ°” co2 æµ“åº¦ï¼ˆppmï¼‰</td></tr><tr><td style="text-align:center">discoveries</td><td style="text-align:center">1860-1959 å¹´æ¯å¹´å·¨å¤§å‘ç°æˆ–å‘æ˜çš„ä¸ªæ•°</td></tr><tr><td style="text-align:center">ldeaths</td><td style="text-align:center">1974-1979 å¹´è‹±å›½æ¯æœˆæ”¯æ°”ç®¡ç‚ã€è‚ºæ°”è‚¿å’Œå“®å–˜çš„æ­»äº¡ç‡</td></tr><tr><td style="text-align:center">fdeaths</td><td style="text-align:center">å‰è¿°æ­»äº¡ç‡çš„å¥³æ€§éƒ¨åˆ†</td></tr><tr><td style="text-align:center">mdeaths</td><td style="text-align:center">å‰è¿°æ­»äº¡ç‡çš„ç”·æ€§éƒ¨åˆ†</td></tr><tr><td style="text-align:center">freeny.y</td><td style="text-align:center">æ¯å­£åº¦æ”¶å…¥</td></tr><tr><td style="text-align:center">JohnsonJohnson</td><td style="text-align:center">1960-1980 å¹´æ¯å­£åº¦ Johnson &amp; Johnson è‚¡ç¥¨çš„çº¢åˆ©</td></tr><tr><td style="text-align:center">LakeHuron</td><td style="text-align:center">1875-1972 å¹´æŸä¸€æ¹–æ³Šæ°´ä½çš„è®°å½•</td></tr><tr><td style="text-align:center">lh</td><td style="text-align:center">é»„ä½“ç”Ÿæˆç´ æ°´å¹³ï¼Œ10 åˆ†é’Ÿæµ‹é‡ä¸€æ¬¡</td></tr><tr><td style="text-align:center">lynx</td><td style="text-align:center">1821-1934 å¹´åŠ æ‹¿å¤§çŒçŒæ•°æ®</td></tr><tr><td style="text-align:center">nhtemp</td><td style="text-align:center">1912-1971 å¹´æ¯å¹´å¹³å‡æ¸©åº¦</td></tr><tr><td style="text-align:center">Nile</td><td style="text-align:center">1871-1970 å°¼ç½—æ²³æµé‡</td></tr><tr><td style="text-align:center">nottem</td><td style="text-align:center">1920-1939 æ¯æœˆå¤§æ°”æ¸©åº¦</td></tr><tr><td style="text-align:center">presidents</td><td style="text-align:center">1945-1974 å¹´æ¯å­£åº¦ç¾å›½æ€»ç»Ÿæ”¯æŒç‡</td></tr><tr><td style="text-align:center">UKDriverDeaths</td><td style="text-align:center">1969-1984 å¹´æ¯æœˆè‹±å›½å¸æœºæ­»äº¡æˆ–ä¸¥é‡ä¼¤å®³çš„æ•°ç›®</td></tr><tr><td style="text-align:center">sunspot.month</td><td style="text-align:center">1749-1997 æ¯æœˆå¤ªé˜³é»‘å­æ•°</td></tr><tr><td style="text-align:center">sunspot.year</td><td style="text-align:center">1700-1988 æ¯å¹´å¤ªé˜³é»‘å­æ•°</td></tr><tr><td style="text-align:center">sunspots</td><td style="text-align:center">1749-1983 æ¯æœˆå¤ªé˜³é»‘å­æ•°</td></tr><tr><td style="text-align:center">treering</td><td style="text-align:center">å½’ä¸€åŒ–çš„æ ‘æœ¨å¹´è½®æ•°æ®</td></tr><tr><td style="text-align:center">UKgas</td><td style="text-align:center">1960-1986 æ¯æœˆè‹±å›½å¤©ç„¶æ°”æ¶ˆè€—</td></tr><tr><td style="text-align:center">USAccDeaths</td><td style="text-align:center">1973-1978 ç¾å›½æ¯æœˆæ„å¤–æ­»äº¡äººæ•°</td></tr><tr><td style="text-align:center">uspop</td><td style="text-align:center">1790â€“1970 ç¾å›½æ¯åå¹´ä¸€æ¬¡çš„äººå£æ€»æ•°ï¼ˆç™¾ä¸‡ä¸ºå•ä½ï¼‰</td></tr><tr><td style="text-align:center">WWWusage</td><td style="text-align:center">æ¯åˆ†é’Ÿç½‘ç»œè¿æ¥æ•°</td></tr><tr><td style="text-align:center">Seatbelts</td><td style="text-align:center">å¤šå˜é‡æ—¶é—´åºåˆ—ã€‚å’Œ UKDriverDeaths æ—¶é—´æ®µç›¸åŒï¼Œåæ˜ æ›´å¤šå› ç´ ã€‚</td></tr><tr><td style="text-align:center">EuStockMarkets</td><td style="text-align:center">å¤šå˜é‡æ—¶é—´åºåˆ—ã€‚æ¬§æ´²è‚¡å¸‚å››ä¸ªä¸»è¦æŒ‡æ ‡çš„æ¯ä¸ªå·¥ä½œæ—¥è®°å½•ï¼Œå…± 1860 æ¡è®°å½•ã€‚</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ§®R </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL ä¼˜åŒ–</title>
      <link href="post/d7961cf0.html"/>
      <url>post/d7961cf0.html</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼˜åŒ–ä¸‰å¤§æ–¹å‘"><a href="#ä¼˜åŒ–ä¸‰å¤§æ–¹å‘" class="headerlink" title="ä¼˜åŒ–ä¸‰å¤§æ–¹å‘"></a>ä¼˜åŒ–ä¸‰å¤§æ–¹å‘</h1><ul><li>ä¼˜åŒ– MySQL æ‰€åœ¨æœåŠ¡å™¨å†…æ ¸ï¼ˆæ­¤ä¼˜åŒ–ä¸€èˆ¬ç”±è¿ç»´äººå‘˜å®Œæˆï¼‰ã€‚</li><li>å¯¹ MySQL é…ç½®å‚æ•°è¿›è¡Œä¼˜åŒ–ï¼ˆmy.cnfï¼‰æ­¤ä¼˜åŒ–éœ€è¦è¿›è¡Œå‹åŠ›æµ‹è¯•æ¥è¿›è¡Œå‚æ•°è°ƒæ•´ã€‚</li><li>å¯¹ SQL è¯­å¥ä»¥åŠè¡¨ä¼˜åŒ–ã€‚</li></ul><h1 id="å‚æ•°ä¼˜åŒ–"><a href="#å‚æ•°ä¼˜åŒ–" class="headerlink" title="å‚æ•°ä¼˜åŒ–"></a>å‚æ•°ä¼˜åŒ–</h1><ol><li><p>MySQL é»˜è®¤çš„æœ€å¤§è¿æ¥æ•°ä¸º 100ï¼Œå¯ä»¥åœ¨ <code>mysql</code> å‘½ä»¤æç¤ºçª—å£ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SHOW</span> variables <span class="token operator">LIKE</span> <span class="token string">'max_connections'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>æŸ¥çœ‹å½“å‰è®¿é—® MySQL çš„çº¿ç¨‹</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SHOW</span> processlist<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>è®¾ç½®æœ€å¤§è¿æ¥æ•°</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SET</span> globle max_connections <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> æœ€å¤§å¯è®¾ç½® <code>16384</code>ï¼Œè¶…è¿‡æ²¡ç”¨</p></li><li><p>æŸ¥çœ‹å½“å‰è¢«ä½¿ç”¨çš„ connections</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SHOW</span> <span class="token keyword">GLOBAL</span> <span class="token keyword">STATUS</span> <span class="token operator">LIKE</span> <span class="token string">'max_user_connections'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li></ol><h1 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h1><ul><li><a href="#ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–æŸ¥è¯¢">ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–æŸ¥è¯¢</a></li><li><a href="#ä½¿ç”¨-EXPLAIN-å…³é”®å­—æ£€æµ‹æŸ¥è¯¢">ä½¿ç”¨ EXPLAIN å…³é”®å­—æ£€æµ‹æŸ¥è¯¢</a></li><li><a href="#åªè¦ä¸€è¡Œæ•°æ®æ—¶ä½¿ç”¨-LIMIT-1">åªè¦ä¸€è¡Œæ•°æ®æ—¶ä½¿ç”¨ LIMIT 1</a></li><li><a href="#ä¸ºæœç´¢å­—æ®µå»ºç«‹ç´¢å¼•">ä¸ºæœç´¢å­—æ®µå»ºç«‹ç´¢å¼•</a></li><li><a href="#åœ¨-JOIN-è¡¨çš„æ—¶å€™ä½¿ç”¨ç›¸å½“ç±»å‹çš„åˆ—å¹¶å°†å…¶ç´¢å¼•">åœ¨ JOIN è¡¨çš„æ—¶å€™ä½¿ç”¨ç›¸å½“ç±»å‹çš„åˆ—å¹¶å°†å…¶ç´¢å¼•</a></li><li><a href="#åˆ‡è®°ä¸è¦ä½¿ç”¨-ORDER-BY-RAND">åˆ‡è®°ä¸è¦ä½¿ç”¨ ORDER BY RAND()</a></li><li><a href="#é¿å…ä½¿ç”¨-SELECT">é¿å…ä½¿ç”¨ SELECT *</a></li><li><a href="#æ°¸è¿œä¸ºæ¯å¼ è¡¨è®¾ç½®ä¸€ä¸ª-ID-ä¸»é”®">æ°¸è¿œä¸ºæ¯å¼ è¡¨è®¾ç½®ä¸€ä¸ª ID ä¸»é”®</a></li><li><a href="#å¯ä»¥ä½¿ç”¨-ENUM-åˆ™ä¸ç”¨-VARCHAR">å¯ä»¥ä½¿ç”¨ ENUM åˆ™ä¸ç”¨ VARCHAR</a></li><li><a href="#å°½å¯èƒ½çš„ä¸è¦èµ‹å€¼ä¸º-NULL">å°½å¯èƒ½çš„ä¸è¦èµ‹å€¼ä¸º NULL</a></li><li><a href="#å›ºå®šé•¿åº¦çš„è¡¨ä¼šæ›´å¿«">å›ºå®šé•¿åº¦çš„è¡¨ä¼šæ›´å¿«</a></li><li><a href="#å‚ç›´åˆ†å‰²">å‚ç›´åˆ†å‰²</a></li><li><a href="#æ‹†åˆ†å¤§çš„-DELETE-æˆ–-INSERT-è¯­å¥">æ‹†åˆ†å¤§çš„ DELETE æˆ– INSERT è¯­å¥</a></li><li><a href="#è¶Šå°çš„åˆ—ä¼šè¶Šå¿«">è¶Šå°çš„åˆ—ä¼šè¶Šå¿«</a></li><li><a href="#é€‰æ‹©æ­£ç¡®çš„å­˜å‚¨å¼•æ“">é€‰æ‹©æ­£ç¡®çš„å­˜å‚¨å¼•æ“</a></li><li><a href="#å°å¿ƒæ°¸ä¹…é“¾æ¥">å°å¿ƒæ°¸ä¹…é“¾æ¥</a></li></ul><h2 id="ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–æŸ¥è¯¢"><a href="#ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–æŸ¥è¯¢" class="headerlink" title="ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–æŸ¥è¯¢"></a>ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ä¼˜åŒ–æŸ¥è¯¢</h2><p>å¤§å¤šæ•°çš„ MySQL æœåŠ¡å™¨éƒ½å¼€å¯äº†æŸ¥è¯¢ç¼“å­˜ã€‚è¿™æ˜¯æé«˜æ€§èƒ½æœ€æœ‰æ•ˆçš„æ–¹æ³•ä¹‹ä¸€ï¼Œè€Œä¸”è¿™æ˜¯è¢« MySQL å¼•æ“å¤„ç†çš„ã€‚å½“æœ‰å¾ˆå¤šç›¸åŒçš„æŸ¥è¯¢è¢«æ‰§è¡Œäº†å¤šæ¬¡çš„æ—¶å€™ï¼Œè¿™äº›æŸ¥è¯¢ç»“æœä¼šè¢«æ”¾å…¥ä¸€ä¸ªç¼“å­˜ä¸­ï¼Œè¿™æ ·åç»­çš„ç›¸åŒæŸ¥è¯¢å°±ä¸ç”¨æ“ä½œè€Œç›´æ¥è®¿é—®ç¼“å­˜ç»“æœäº†ã€‚</p><p>è¿™é‡Œæœ€ä¸»è¦çš„é—®é¢˜æ˜¯ï¼Œå¯¹äºæˆ‘ä»¬ç¨‹åºå‘˜æ¥è¯´ï¼Œè¿™ä¸ªäº‹æƒ…æ˜¯å¾ˆå®¹æ˜“è¢«å¿½ç•¥çš„ã€‚å› ä¸ºæˆ‘ä»¬æŸäº›æŸ¥è¯¢è¯­å¥ä¼šè®© MySQL ä¸ä½¿ç”¨ç¼“å­˜ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> username <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> signup_date <span class="token operator">>=</span> CURDATE<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">SELECT</span> username <span class="token keyword">FROM</span> <span class="token keyword">user</span> <span class="token keyword">WHERE</span> signup_date <span class="token operator">>=</span> <span class="token string">'2014-06-24'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>ä¸Šé¢ä¸¤æ¡ SQL è¯­å¥çš„å·®åˆ«å°±æ˜¯ <code>CURDATE()</code> ï¼ŒMySQL çš„æŸ¥è¯¢ç¼“å­˜å¯¹è¿™ä¸ªå‡½æ•°ä¸èµ·ä½œç”¨ã€‚æ‰€ä»¥ï¼Œåƒ <code>NOW()</code> å’Œ <code>RAND()</code> æˆ–æ˜¯å…¶å®ƒçš„è¯¸å¦‚æ­¤ç±»çš„ SQL å‡½æ•°éƒ½ä¸ä¼šå¼€å¯æŸ¥è¯¢ç¼“å­˜ï¼Œå› ä¸ºè¿™äº›å‡½æ•°çš„è¿”å›æ˜¯ä¼šä¸å®šçš„æ˜“å˜çš„ã€‚æ‰€ä»¥ï¼Œä½ æ‰€éœ€è¦çš„å°±æ˜¯ç”¨ä¸€ä¸ªå˜é‡æ¥ä»£æ›¿ MySQL çš„å‡½æ•°ï¼Œä»è€Œå¼€å¯ç¼“å­˜ã€‚</p><h2 id="ä½¿ç”¨-EXPLAIN-å…³é”®å­—æ£€æµ‹æŸ¥è¯¢"><a href="#ä½¿ç”¨-EXPLAIN-å…³é”®å­—æ£€æµ‹æŸ¥è¯¢" class="headerlink" title="ä½¿ç”¨ EXPLAIN å…³é”®å­—æ£€æµ‹æŸ¥è¯¢"></a>ä½¿ç”¨ EXPLAIN å…³é”®å­—æ£€æµ‹æŸ¥è¯¢</h2><p>ä½¿ç”¨ <code>EXPLAIN</code> å…³é”®å­—å¯ä»¥ä½¿æˆ‘ä»¬çŸ¥é“ MySQL æ˜¯å¦‚ä½•å¤„ç† SQL è¯­å¥çš„ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ†ææˆ‘ä»¬çš„æŸ¥è¯¢è¯­å¥æˆ–æ˜¯è¡¨ç»“æ„çš„æ€§èƒ½ç“¶é¢ˆï¼›<code>EXPLAIN</code> çš„æŸ¥è¯¢ç»“æœè¿˜ä¼šå‘Šè¯‰æˆ‘ä»¬ç´¢å¼•ä¸»é”®æ˜¯å¦‚ä½•è¢«åˆ©ç”¨çš„ï¼Œæ•°æ®è¡¨æ˜¯å¦‚ä½•è¢«è¢«æœç´¢æˆ–æ’åºçš„ç­‰ç­‰ã€‚è¯­æ³•æ ¼å¼æ˜¯ <code>EXPLAIN + SELECT</code> è¯­å¥ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">EXPLAIN</span> <span class="token keyword">SELECT</span> <span class="token operator">&lt;</span>å­—æ®µå<span class="token operator">></span> <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> <span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>è¡¨è¾¾å¼<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/mysql_optimization/explain_1.png" alt></p><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="/images/post/mysql_optimization/explain_2.png" alt></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå‰ä¸€ä¸ªç»“æœæ˜¾ç¤ºæœç´¢äº† <code>7883</code> è¡Œï¼Œè€Œåä¸€ä¸ªåªæ˜¯æœç´¢äº†ä¸¤ä¸ªè¡¨çš„ <code>9</code> å’Œ <code>16</code> è¡Œã€‚æŸ¥çœ‹ <code>rows</code> åˆ—å¯ä»¥è®©æˆ‘ä»¬æ‰¾åˆ°æ½œåœ¨çš„æ€§èƒ½é—®é¢˜ã€‚ </p><h2 id="åªè¦ä¸€è¡Œæ•°æ®æ—¶ä½¿ç”¨-LIMIT-1"><a href="#åªè¦ä¸€è¡Œæ•°æ®æ—¶ä½¿ç”¨-LIMIT-1" class="headerlink" title="åªè¦ä¸€è¡Œæ•°æ®æ—¶ä½¿ç”¨ LIMIT 1"></a>åªè¦ä¸€è¡Œæ•°æ®æ—¶ä½¿ç”¨ LIMIT 1</h2><p>åŠ ä¸Š <code>LIMIT 1</code> å¯ä»¥å¢åŠ æ€§èƒ½ã€‚MySQL æ•°æ®åº“å¼•æ“ä¼šåœ¨æŸ¥æ‰¾åˆ°ä¸€æ¡æ•°æ®ååœæ­¢æœç´¢ï¼Œè€Œä¸æ˜¯ç»§ç»­å¾€åæŸ¥è¯¢ä¸‹ä¸€æ¡ç¬¦åˆæ¡ä»¶çš„æ•°æ®è®°å½•ã€‚</p><h2 id="ä¸ºæœç´¢å­—æ®µå»ºç«‹ç´¢å¼•"><a href="#ä¸ºæœç´¢å­—æ®µå»ºç«‹ç´¢å¼•" class="headerlink" title="ä¸ºæœç´¢å­—æ®µå»ºç«‹ç´¢å¼•"></a>ä¸ºæœç´¢å­—æ®µå»ºç«‹ç´¢å¼•</h2><p>ç´¢å¼•ä¸ä¸€å®šå°±æ˜¯ç»™ä¸»é”®æˆ–è€…æ˜¯å”¯ä¸€çš„å­—æ®µï¼Œå¦‚æœåœ¨è¡¨ä¸­ï¼Œæœ‰æŸä¸ªå­—æ®µç»å¸¸ç”¨æ¥åšæœç´¢ï¼Œéœ€è¦å°†å…¶å»ºç«‹ç´¢å¼•ã€‚</p><p><strong>ç´¢å¼•çš„æœ‰å…³æ“ä½œå¦‚ä¸‹ï¼š</strong></p><h3 id="åˆ›å»ºç´¢å¼•"><a href="#åˆ›å»ºç´¢å¼•" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h3><p>åœ¨æ‰§è¡Œ <code>CREATE TABLE</code> è¯­å¥æ—¶å¯ä»¥åˆ›å»ºç´¢å¼•ï¼Œä¹Ÿå¯ä»¥å•ç‹¬ç”¨ <code>CREATE INDEX</code> æˆ– <code>ALTER TABLE</code> æ¥ä¸ºè¡¨å¢åŠ ç´¢å¼•ã€‚</p><ol><li><p>ALTER TABLE</p><p> ALTER TABLE ç”¨æ¥åˆ›å»ºæ™®é€šç´¢å¼•ã€å”¯ä¸€ç´¢å¼•ã€ä¸»é”®ç´¢å¼•å’Œå…¨æ–‡ç´¢å¼•</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> index_name <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span> <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> FULLTEXT <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p> å…¶ä¸­ <code>table_name</code> æ˜¯è¦å¢åŠ ç´¢å¼•åçš„è¡¨åï¼Œ<code>column_list</code> æŒ‡å‡ºå¯¹å“ªäº›åˆ—è¿›è¡Œç´¢å¼•ï¼Œå¤šåˆ—æ—¶å„åˆ—ä¹‹é—´ä½¿ç”¨åŠè§’é€—å·éš”å¼€ã€‚ç´¢å¼•å <code>index_name</code> æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸æŒ‡å®šç´¢å¼•åç§°ï¼ŒMySQL å°†æ ¹æ®ç¬¬ä¸€ä¸ªç´¢å¼•åˆ—è‡ªåŠ¨æŒ‡å®šç´¢å¼•åç§°ï¼Œå¦å¤–ï¼Œ<code>ALTER TABLE</code> å…è®¸åœ¨å•ä¸ªè¯­å¥ä¸­æ›´æ”¹å¤šä¸ªè¡¨ï¼Œå› æ­¤å¯ä»¥åœ¨åŒæ—¶åˆ›å»ºå¤šä¸ªç´¢å¼•ã€‚</p></li><li><p>CREATE INDEX</p><p> <code>CREATE INDEX</code> å¯å¯¹è¡¨å¢åŠ æ™®é€šç´¢å¼•æˆ–å”¯ä¸€ç´¢å¼•ä»¥åŠå…¨æ–‡ç´¢å¼•ï¼Œä½†æ˜¯ä¸å¯ä»¥å¯¹è¡¨å¢åŠ ä¸»é”®ç´¢å¼•</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> index_name <span class="token keyword">ON</span> table_name <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> index_name <span class="token keyword">ON</span> table_name <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> FULLTEXT index_name <span class="token keyword">ON</span> table_name <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p> <code>table_name</code>ã€<code>index_name</code> å’Œ <code>column_list</code> å…·æœ‰ä¸ <code>ALTER TABLE</code> è¯­å¥ä¸­ç›¸åŒçš„å«ä¹‰ï¼Œç´¢å¼•åå¿…é¡»æŒ‡å®šã€‚å¦å¤–ï¼Œä¸èƒ½ç”¨ <code>CREATE INDEX</code> è¯­å¥åˆ›å»º <code>PRIMARY KEY</code> ç´¢å¼•ã€‚</p></li></ol><h3 id="ç´¢å¼•ç±»å‹"><a href="#ç´¢å¼•ç±»å‹" class="headerlink" title="ç´¢å¼•ç±»å‹"></a>ç´¢å¼•ç±»å‹</h3><ul><li>æ™®é€šç´¢å¼•ï¼ˆINDEXï¼‰ï¼šé€‚ç”¨äº nameã€email ç­‰ä¸€èˆ¬å±æ€§</li><li>å”¯ä¸€ç´¢å¼•ï¼ˆUNIQUEï¼‰ï¼šä¸æ™®é€šç´¢å¼•ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯å”¯ä¸€ç´¢å¼•è¦æ±‚ç´¢å¼•å­—æ®µå€¼åœ¨è¡¨ä¸­æ˜¯å”¯ä¸€çš„ï¼Œè¿™ä¸€ç‚¹å’Œä¸»é”®ç´¢å¼•ç±»ä¼¼ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ï¼Œå”¯ä¸€ç´¢å¼•å…è®¸æœ‰ç©ºå€¼ã€‚å”¯ä¸€ç´¢å¼•ä¸€èˆ¬é€‚ç”¨äºèº«ä»½è¯å·ç ã€ç”¨æˆ·è´¦å·ç­‰ä¸å…è®¸æœ‰é‡å¤çš„å±æ€§å­—æ®µä¸Šã€‚</li><li>ä¸»é”®ç´¢å¼•ï¼ˆPRIMARY KEYï¼‰ï¼šå…¶å®å°±æ˜¯ä¸»é”®ï¼Œä¸€èˆ¬åœ¨å»ºè¡¨æ—¶å°±æŒ‡å®šäº†ï¼Œä¸éœ€è¦é¢å¤–æ·»åŠ ã€‚</li><li>å…¨æ–‡æ£€ç´¢ï¼ˆFULLTEXTï¼‰ï¼šåªé€‚ç”¨äº <code>VARCHAR</code> å’Œ <code>TEXT</code> ç±»å‹çš„å­—æ®µã€‚</li></ul><p><strong>æ³¨æ„</strong>ï¼šå…¨æ–‡ç´¢å¼•å’Œæ™®é€šç´¢å¼•æ˜¯æœ‰å¾ˆå¤§åŒºåˆ«çš„ï¼Œå¦‚æœå»ºç«‹çš„æ˜¯æ™®é€šç´¢å¼•ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ <code>LIKE</code> è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ï¼Œåªä¼šå¯¹æŸ¥è¯¢å†…å®¹å‰ä¸€éƒ¨åˆ†æœ‰æ•ˆï¼Œå³åªå¯¹å‰é¢ä¸ä½¿ç”¨é€šé…ç¬¦çš„æŸ¥è¯¢æœ‰æ•ˆï¼Œå¦‚æœå‰åéƒ½æœ‰é€šé…ç¬¦ï¼Œæ™®é€šç´¢å¼•å°†ä¸ä¼šèµ·ä½œç”¨ã€‚å¯¹äºå…¨æ–‡ç´¢å¼•è€Œè¨€åœ¨æŸ¥è¯¢æ—¶æœ‰è‡ªå·±ç‹¬ç‰¹çš„åŒ¹é…æ–¹å¼ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨å¯¹ä¸€ç¯‡æ–‡ç« çš„æ ‡é¢˜å’Œå†…å®¹è¿›è¡Œå…¨æ–‡ç´¢å¼•æ—¶ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> article <span class="token keyword">ADD</span> FULLTEXT <span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># åœ¨è¿›è¡Œæ£€ç´¢æ—¶å°±éœ€è¦ä½¿ç”¨å¦‚ä¸‹çš„è¯­æ³•è¿›è¡Œæ£€ç´¢ï¼š</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> article <span class="token keyword">WHERE</span> <span class="token keyword">MATCH</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'content'</span><span class="token punctuation">)</span> AGAINST <span class="token punctuation">(</span><span class="token string">'æŸ¥è¯¢å­—ç¬¦ä¸²'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><strong>åœ¨ä½¿ç”¨å…¨æ–‡æ£€ç´¢æ—¶çš„æ³¨æ„äº‹é¡¹ï¼š</strong></p><p>MySQL è‡ªå¸¦çš„å…¨æ–‡ç´¢å¼•åªèƒ½ç”¨äºæ•°æ®åº“å¼•æ“ä¸º <code>MyISAM</code> çš„æ•°æ®è¡¨ï¼Œå¦‚æœæ˜¯å…¶ä»–æ•°æ®å¼•æ“ï¼Œåˆ™å…¨æ–‡ç´¢å¼•ä¸ä¼šç”Ÿæ•ˆã€‚æ­¤å¤–ï¼ŒMySQL è‡ªå¸¦çš„å…¨æ–‡ç´¢å¼•åªèƒ½å¯¹è‹±æ–‡è¿›è¡Œå…¨æ–‡æ£€ç´¢ï¼Œç›®å‰æ— æ³•å¯¹ä¸­æ–‡è¿›è¡Œå…¨æ–‡æ£€ç´¢ã€‚å¦‚æœéœ€è¦å¯¹åŒ…å«ä¸­æ–‡åœ¨å†…çš„æ–‡æœ¬æ•°æ®è¿›è¡Œå…¨æ–‡æ£€ç´¢ï¼Œæˆ‘ä»¬éœ€è¦é‡‡ç”¨ Sphinx/Coreseek æŠ€æœ¯æ¥å¤„ç†ä¸­æ–‡ã€‚å¦å¤–ä½¿ç”¨ MySQL è‡ªå¸¦çš„å…¨æ–‡ç´¢å¼•æ—¶ï¼Œå¦‚æœæŸ¥è¯¢å­—ç¬¦ä¸²çš„é•¿åº¦è¿‡çŸ­å°†æ— æ³•å¾—åˆ°æœŸæœ›çš„æœç´¢ç»“æœã€‚MySQL å…¨æ–‡ç´¢å¼•æ‰€èƒ½æ‰¾åˆ°çš„è¯é»˜è®¤æœ€å°é•¿åº¦ä¸º 4 ä¸ªå­—ç¬¦ã€‚å¦å¤–ï¼Œå¦‚æœæŸ¥è¯¢çš„å­—ç¬¦ä¸²åŒ…å«åœæ­¢è¯ï¼Œé‚£ä¹ˆè¯¥åœæ­¢è¯å°†ä¼šè¢«å¿½ç•¥ã€‚</p><h3 id="ç»„åˆç´¢å¼•"><a href="#ç»„åˆç´¢å¼•" class="headerlink" title="ç»„åˆç´¢å¼•"></a>ç»„åˆç´¢å¼•</h3><p>ç»„åˆç´¢å¼•åˆç§°å¤šåˆ—ç´¢å¼•ï¼Œå°±æ˜¯å»ºç«‹ç´¢å¼•æ—¶æŒ‡å®šå¤šä¸ªå­—æ®µå±æ€§ã€‚æœ‰ç‚¹ç±»ä¼¼äºå­—å…¸ç›®å½•ï¼Œæ¯”å¦‚æŸ¥è¯¢ <code>guo</code> è¿™ä¸ªæ‹¼éŸ³çš„å­—æ—¶ï¼Œé¦–å…ˆæŸ¥æ‰¾ <code>g</code> å­—æ¯ï¼Œç„¶ååœ¨ <code>g</code> çš„æ£€ç´¢èŒƒå›´å†…æŸ¥è¯¢ç¬¬äºŒä¸ªå­—æ¯ä¸º <code>u</code> çš„åˆ—è¡¨ï¼Œæœ€ååœ¨ <code>u</code> çš„èŒƒå›´å†…æŸ¥æ‰¾æœ€åä¸€ä¸ªå­—æ¯ä¸º <code>o</code> çš„å­—ã€‚æ¯”å¦‚ç»„åˆç´¢å¼• <code>(a,b,c)</code>ï¼Œ<code>abc</code> éƒ½æ˜¯æ’å¥½åºçš„ï¼Œåœ¨ä»»æ„ä¸€æ®µ <code>a</code> çš„ä¸‹é¢ <code>b</code> éƒ½æ˜¯æ’å¥½åºçš„ï¼Œä»»ä½•ä¸€æ®µ <code>b</code> ä¸‹é¢ <code>c</code> éƒ½æ˜¯æ’å¥½åºçš„ã€‚</p><p>ç»„åˆç´¢å¼•çš„ç”Ÿæ•ˆåŸåˆ™æ˜¯ï¼šä»å‰å¾€åä¾æ¬¡ä½¿ç”¨ç”Ÿæ•ˆï¼Œå¦‚æœä¸­é—´æŸä¸ªç´¢å¼•æ²¡æœ‰ä½¿ç”¨ï¼Œé‚£ä¹ˆæ–­ç‚¹å‰é¢çš„ç´¢å¼•éƒ¨åˆ†èµ·ä½œç”¨ï¼Œæ–­ç‚¹åé¢çš„ç´¢å¼•æ²¡æœ‰èµ·ä½œç”¨ã€‚</p><p>é€ æˆæ–­ç‚¹çš„åŸå› ï¼š</p><ul><li>å‰è¾¹çš„ä»»æ„ä¸€ä¸ªç´¢å¼•æ²¡æœ‰å‚ä¸æŸ¥è¯¢ï¼Œåè¾¹çš„å…¨éƒ¨ä¸ç”Ÿæ•ˆã€‚</li><li>å‰è¾¹çš„ä»»æ„ä¸€ä¸ªç´¢å¼•å­—æ®µå‚ä¸çš„æ˜¯èŒƒå›´æŸ¥è¯¢ï¼Œåé¢çš„ä¸ä¼šç”Ÿæ•ˆã€‚</li><li>æ–­ç‚¹è·Ÿç´¢å¼•å­—å­—æ®µåœ¨SQLè¯­å¥ä¸­çš„ä½ç½®å‰åæ— å…³ï¼Œåªä¸æ˜¯å¦å­˜åœ¨æœ‰å…³ã€‚</li></ul><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> a<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">AND</span> b<span class="token operator">=</span><span class="token number">45</span> <span class="token operator">AND</span> c<span class="token operator">=</span><span class="token number">5</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># è¿™ç§ä¸‰ä¸ªç´¢å¼•é¡ºåºä½¿ç”¨ä¸­é—´æ²¡æœ‰æ–­ç‚¹ï¼Œå…¨éƒ¨å‘æŒ¥ä½œç”¨</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> a<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">AND</span> c<span class="token operator">=</span><span class="token number">5</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># è¿™ç§æƒ…å†µä¸‹ b å°±æ˜¯æ–­ç‚¹ï¼Œa å‘æŒ¥äº†æ•ˆæœï¼Œc æ²¡æœ‰æ•ˆæœ</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> b<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">AND</span> c<span class="token operator">=</span><span class="token number">4</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># è¿™ç§æƒ…å†µä¸‹ a å°±æ˜¯æ–­ç‚¹ï¼Œåœ¨ a åé¢çš„ç´¢å¼•éƒ½æ²¡æœ‰å‘æŒ¥ä½œç”¨ï¼Œè¿™ç§å†™æ³•è”åˆç´¢å¼•æ²¡æœ‰å‘æŒ¥ä»»ä½•æ•ˆæœ</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> b<span class="token operator">=</span><span class="token number">45</span> <span class="token operator">AND</span> a<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">AND</span> c<span class="token operator">=</span><span class="token number">5</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment"># è¿™ä¸ªè·Ÿç¬¬ä¸€ä¸ªä¸€æ ·ï¼Œå…¨éƒ¨å‘æŒ¥ä½œç”¨ï¼Œabc åªè¦ç”¨ä¸Šäº†å°±è¡Œï¼Œè·Ÿå†™çš„é¡ºåºæ— å…³</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><code>(a,b,c)</code> ä¸‰ä¸ªåˆ—ä¸ŠåŠ äº†è”åˆç´¢å¼•ï¼ˆæ˜¯è”åˆç´¢å¼•ï¼Œä¸æ˜¯åœ¨æ¯ä¸ªåˆ—ä¸Šå•ç‹¬åŠ ç´¢å¼•ï¼‰è€Œæ˜¯å»ºç«‹äº† <code>a</code>, <code>(a,b)</code>, <code>(a,b,c)</code>ä¸‰ä¸ªç´¢å¼•ï¼Œå¦å¤– <code>(a,b,c)</code> å¤šåˆ—ç´¢å¼•å’Œ <code>(a,c,b)</code> æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>å…·ä½“å®ä¾‹å¯ä»¥è¯´æ˜ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> a<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">AND</span> b<span class="token operator">=</span><span class="token number">5</span> <span class="token operator">AND</span> c<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span><span class="token comment"># abc ä¸‰ä¸ªç´¢å¼•éƒ½åœ¨ WHERE æ¡ä»¶é‡Œé¢ç”¨åˆ°äº†ï¼Œè€Œä¸”éƒ½å‘æŒ¥äº†ä½œç”¨</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> c<span class="token operator">=</span><span class="token number">4</span> <span class="token operator">AND</span> b<span class="token operator">=</span><span class="token number">6</span> <span class="token operator">AND</span> a<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token comment"># è¿™æ¡è¯­å¥ä¸ºäº†è¯´æ˜ ç»„åˆç´¢å¼•ä¸åœ¨ SQL ä¸­çš„ä½ç½®å…ˆåæ— å…³ï¼ŒWHERE é‡Œé¢çš„æ¡ä»¶é¡ºåºåœ¨æŸ¥è¯¢ä¹‹å‰ä¼šè¢« MySQL è‡ªåŠ¨ä¼˜åŒ–ï¼Œæ•ˆæœè·Ÿä¸Šä¸€å¥ä¸€æ ·</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> a<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">AND</span> c<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">;</span><span class="token comment"># a ç”¨åˆ°ç´¢å¼•ï¼Œb æ²¡æœ‰ç”¨ï¼Œæ‰€ä»¥ c æ˜¯æ²¡æœ‰ç”¨åˆ°ç´¢å¼•æ•ˆæœçš„</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> a<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">AND</span> b<span class="token operator">></span><span class="token number">7</span> <span class="token operator">AND</span> c<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token comment"># a ç”¨åˆ°äº†ï¼Œb ä¹Ÿç”¨åˆ°äº†ï¼Œc æ²¡æœ‰ç”¨åˆ°ï¼Œè¿™ä¸ªåœ°æ–¹ b æ˜¯èŒƒå›´å€¼ï¼Œä¹Ÿç®—æ–­ç‚¹ï¼Œåªä¸è¿‡è‡ªèº«ç”¨åˆ°äº†ç´¢å¼•</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> b<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">AND</span> c<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span><span class="token comment"># å› ä¸º a ç´¢å¼•æ²¡æœ‰ä½¿ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œ bc éƒ½æ²¡æœ‰ç”¨ä¸Šç´¢å¼•æ•ˆæœ</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> a<span class="token operator">></span><span class="token number">4</span> <span class="token operator">AND</span> b<span class="token operator">=</span><span class="token number">7</span> <span class="token operator">AND</span> c<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">;</span><span class="token comment"># a ç”¨åˆ°äº† b æ²¡æœ‰ä½¿ç”¨ï¼Œc æ²¡æœ‰ä½¿ç”¨</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> a<span class="token operator">=</span><span class="token number">3</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> b<span class="token punctuation">;</span><span class="token comment"># a ç”¨åˆ°äº†ç´¢å¼•ï¼Œb åœ¨ç»“æœæ’åºä¸­ä¹Ÿç”¨åˆ°äº†ç´¢å¼•çš„æ•ˆæœï¼Œå‰é¢è¯´äº†ï¼Œa ä¸‹é¢ä»»æ„ä¸€æ®µçš„ b æ˜¯æ’å¥½åºçš„</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> a<span class="token operator">=</span><span class="token number">3</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> c<span class="token punctuation">;</span><span class="token comment"># a ç”¨åˆ°äº†ç´¢å¼•ï¼Œä½†æ˜¯è¿™ä¸ªåœ°æ–¹ c æ²¡æœ‰å‘æŒ¥æ’åºæ•ˆæœï¼Œå› ä¸ºä¸­é—´æ–­ç‚¹äº†ï¼Œä½¿ç”¨ EXPLAIN å¯ä»¥çœ‹åˆ° filesort</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">WHERE</span> b<span class="token operator">=</span><span class="token number">3</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> a<span class="token punctuation">;</span><span class="token comment"># b æ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼Œæ’åºä¸­ a ä¹Ÿæ²¡æœ‰å‘æŒ¥ç´¢å¼•æ•ˆæœ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„</strong>ï¼šåœ¨æŸ¥è¯¢æ—¶ï¼ŒMySQL åªèƒ½ä½¿ç”¨ä¸€ä¸ªç´¢å¼•ï¼Œå¦‚æœå»ºç«‹çš„æ˜¯å¤šä¸ªå•åˆ—çš„æ™®é€šç´¢å¼•ï¼Œåœ¨æŸ¥è¯¢æ—¶ä¼šæ ¹æ®æŸ¥è¯¢çš„ç´¢å¼•å­—æ®µï¼Œä»ä¸­é€‰æ‹©ä¸€ä¸ªé™åˆ¶æœ€ä¸¥æ ¼çš„å•ä¾‹ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ã€‚åˆ«çš„ç´¢å¼•éƒ½ä¸ä¼šç”Ÿæ•ˆã€‚</p><h3 id="æŸ¥çœ‹ç´¢å¼•"><a href="#æŸ¥çœ‹ç´¢å¼•" class="headerlink" title="æŸ¥çœ‹ç´¢å¼•"></a>æŸ¥çœ‹ç´¢å¼•</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> tblname<span class="token punctuation">;</span><span class="token keyword">SHOW</span> <span class="token keyword">KEYS</span> <span class="token keyword">FROM</span> tblname<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h3 id="åˆ é™¤ç´¢å¼•"><a href="#åˆ é™¤ç´¢å¼•" class="headerlink" title="åˆ é™¤ç´¢å¼•"></a>åˆ é™¤ç´¢å¼•</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">DORP <span class="token keyword">INDEX</span> IndexName <span class="token keyword">ON</span> tab_nameï¼›<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>æ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨ç´¢å¼•çš„æƒ…å†µ</strong></p><p>å¯¹äºæ™®é€šç´¢å¼•è€Œè¨€åœ¨ä½¿ç”¨ <code>LIKE</code> è¿›è¡Œé€šé…ç¬¦æ¨¡ç³ŠæŸ¥è¯¢æ—¶ï¼Œå¦‚æœé¦–å°¾ä¹‹é—´éƒ½ä½¿ç”¨äº†é€šé…ç¬¦ï¼Œç´¢å¼•æ—¶æ— æ•ˆçš„ã€‚</p><p>å‡è®¾æŸ¥è¯¢å†…å®¹çš„å…³é”®è¯ä¸º <code>abc</code>ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tab_name <span class="token keyword">WHERE</span> index_column <span class="token operator">LIKE</span> <span class="token string">'abc%'</span><span class="token punctuation">;</span> <span class="token comment"># ç´¢å¼•æ˜¯æœ‰æ•ˆçš„</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tab_name <span class="token keyword">WHERE</span> index_column <span class="token operator">LIKE</span> <span class="token string">'%abc'</span><span class="token punctuation">;</span> <span class="token comment"># ç´¢å¼•æ˜¯æ— æ•ˆçš„</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tab_name <span class="token keyword">WHERE</span> index_column <span class="token operator">LIKE</span> <span class="token string">'%abc%'</span><span class="token punctuation">;</span> <span class="token comment"># ç´¢å¼•æ˜¯æ— æ•ˆçš„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>å½“æ£€ç´¢çš„å­—æ®µå†…å®¹æ¯”è¾ƒå¤§è€Œä¸”æ£€ç´¢å†…å®¹å‰åéƒ¨åˆ†éƒ½ä¸ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ”¹ä¸ºå…¨æ–‡ç´¢å¼•ï¼Œå¹¶ä½¿ç”¨ç‰¹å®šçš„æ£€ç´¢æ–¹å¼ã€‚</p><h2 id="åœ¨-JOIN-è¡¨çš„æ—¶å€™ä½¿ç”¨ç›¸å½“ç±»å‹çš„åˆ—å¹¶å°†å…¶ç´¢å¼•"><a href="#åœ¨-JOIN-è¡¨çš„æ—¶å€™ä½¿ç”¨ç›¸å½“ç±»å‹çš„åˆ—å¹¶å°†å…¶ç´¢å¼•" class="headerlink" title="åœ¨ JOIN è¡¨çš„æ—¶å€™ä½¿ç”¨ç›¸å½“ç±»å‹çš„åˆ—å¹¶å°†å…¶ç´¢å¼•"></a>åœ¨ JOIN è¡¨çš„æ—¶å€™ä½¿ç”¨ç›¸å½“ç±»å‹çš„åˆ—å¹¶å°†å…¶ç´¢å¼•</h2><p>å¦‚æœåœ¨ç¨‹åºä¸­æœ‰å¾ˆå¤š <code>JOIN</code> æŸ¥è¯¢ï¼Œåº”è¯¥ä¿è¯ä¸¤ä¸ªè¡¨ä¸­ <code>JOIN</code> çš„å­—æ®µæ—¶è¢«å»ºç«‹è¿‡ç´¢å¼•çš„ã€‚è¿™æ · MySQL å†…éƒ¨ä¼šå¯åŠ¨ä¼˜åŒ– <code>JOIN</code> çš„ SQL è¯­å¥çš„æœºåˆ¶ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šè¿™äº›è¢«ç”¨æ¥ <code>JOIN</code> çš„å­—æ®µï¼Œåº”è¯¥æ˜¯ç›¸åŒç±»å‹çš„ã€‚ä¾‹å¦‚ï¼šå¦‚æœè¦æŠŠ <code>DECIMAL</code> å­—æ®µå’Œä¸€ä¸ª <code>INT</code> å­—æ®µ <code>JOIN</code> åœ¨ä¸€èµ·ï¼ŒMySQL å°±æ— æ³•ä½¿ç”¨å®ƒä»¬çš„ç´¢å¼•ã€‚å¯¹äºé‚£äº› <code>STRING</code> ç±»å‹ï¼Œè¿˜éœ€è¦æœ‰ç›¸åŒçš„å­—ç¬¦é›†æ‰è¡Œï¼ˆä¸¤ä¸ªè¡¨çš„å­—ç¬¦é›†æœ‰å¯èƒ½ä¸ä¸€æ ·ï¼‰ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> company_name<span class="token keyword">FROM</span> users<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> companies<span class="token keyword">ON</span> <span class="token punctuation">(</span>users<span class="token punctuation">.</span>state <span class="token operator">=</span> companies<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token keyword">WHERE</span> users<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">"user_id"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä¸¤ä¸ª <code>state</code> å­—æ®µåº”è¯¥æ˜¯è¢«å»ºè¿‡ç´¢å¼•çš„ï¼Œè€Œä¸”åº”è¯¥æ˜¯ç›¸å½“çš„ç±»å‹ï¼Œç›¸åŒçš„å­—ç¬¦é›†ã€‚</p><h2 id="åˆ‡è®°ä¸è¦ä½¿ç”¨-ORDER-BY-RAND"><a href="#åˆ‡è®°ä¸è¦ä½¿ç”¨-ORDER-BY-RAND" class="headerlink" title="åˆ‡è®°ä¸è¦ä½¿ç”¨ ORDER BY RAND()"></a>åˆ‡è®°ä¸è¦ä½¿ç”¨ ORDER BY RAND()</h2><p>å¦‚æœä½ çœŸçš„æƒ³æŠŠè¿”å›çš„æ•°æ®è¡Œæ‰“ä¹±äº†ï¼Œä½ æœ‰ N ç§æ–¹æ³•å¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚è¿™æ ·ä½¿ç”¨åªè®©ä½ çš„æ•°æ®åº“çš„æ€§èƒ½å‘ˆæŒ‡æ•°çº§çš„ä¸‹é™ã€‚è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼šMySQL ä¼šä¸å¾—ä¸å»æ‰§è¡Œ <code>RAND()</code> å‡½æ•°ï¼ˆå¾ˆè€— CPU æ—¶é—´ï¼‰ï¼Œè€Œä¸”è¿™æ˜¯ä¸ºäº†æ¯ä¸€è¡Œè®°å½•å»è®°è¡Œï¼Œç„¶åå†å¯¹å…¶æ’åºã€‚å°±ç®—æ˜¯ä½ ç”¨äº† <code>Limit 1</code> ä¹Ÿæ— æµäºäº‹ï¼ˆå› ä¸ºè¦æ’åºï¼‰ã€‚</p><h2 id="é¿å…ä½¿ç”¨-SELECT"><a href="#é¿å…ä½¿ç”¨-SELECT" class="headerlink" title="é¿å…ä½¿ç”¨ SELECT *"></a>é¿å…ä½¿ç”¨ SELECT *</h2><p>ä»æ•°æ®åº“é‡Œè¯»å‡ºè¶Šå¤šçš„æ•°æ®ï¼Œé‚£ä¹ˆæŸ¥è¯¢å°±ä¼šå˜å¾—è¶Šæ…¢ã€‚å¹¶ä¸”ï¼Œå¦‚æœæˆ‘ä»¬çš„æ•°æ®åº“æœåŠ¡å™¨å’Œ web æœåŠ¡å™¨æ˜¯ä¸¤å°ç‹¬ç«‹çš„æœåŠ¡å™¨çš„è¯ï¼Œè¿™è¿˜ä¼šå¢åŠ ç½‘ç»œä¼ è¾“çš„è´Ÿè½½ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥å…»æˆä¸€ä¸ªéœ€è¦ä»€ä¹ˆå°±å–ä»€ä¹ˆçš„å¥½çš„ä¹ æƒ¯ã€‚</p><p><code>Hibernate</code> æ€§èƒ½æ–¹é¢å°±ä¼šå·®ï¼Œå®ƒä¸ç”¨ <code>*</code>ï¼Œä½†å®ƒå°†æ•´ä¸ªè¡¨çš„æ‰€æœ‰å­—æ®µå…¨æŸ¥å‡ºæ¥ã€‚</p><h2 id="æ°¸è¿œä¸ºæ¯å¼ è¡¨è®¾ç½®ä¸€ä¸ª-ID-ä¸»é”®"><a href="#æ°¸è¿œä¸ºæ¯å¼ è¡¨è®¾ç½®ä¸€ä¸ª-ID-ä¸»é”®" class="headerlink" title="æ°¸è¿œä¸ºæ¯å¼ è¡¨è®¾ç½®ä¸€ä¸ª ID ä¸»é”®"></a>æ°¸è¿œä¸ºæ¯å¼ è¡¨è®¾ç½®ä¸€ä¸ª ID ä¸»é”®</h2><p>æˆ‘ä»¬åº”è¯¥ä¸ºæ•°æ®åº“é‡Œçš„æ¯å¼ è¡¨éƒ½è®¾ç½®ä¸€ä¸ª <code>ID</code> åšä¸ºå…¶ä¸»é”®ï¼Œè€Œä¸”æœ€å¥½çš„æ˜¯ä¸€ä¸ª <code>INT</code> å‹çš„ï¼ˆæ¨èä½¿ç”¨ <code>UNSIGNED</code>ï¼‰ï¼Œå¹¶è®¾ç½®ä¸Šè‡ªåŠ¨å¢åŠ çš„ <code>AUTO_INCREMENT</code> æ ‡å¿—ã€‚å°±ç®—æ˜¯æˆ‘ä»¬ <code>users</code> è¡¨æœ‰ä¸€ä¸ªä¸»é”®å« <code>email</code> çš„å­—æ®µï¼Œæˆ‘ä»¬ä¹Ÿåˆ«è®©å®ƒæˆä¸ºä¸»é”®ã€‚ä½¿ç”¨ <code>VARCHAR</code> ç±»å‹æ¥å½“ä¸»é”®ä¼šä½¿ç”¨å¾—æ€§èƒ½ä¸‹é™ã€‚</p><p>å¦å¤–ï¼Œåœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨è¡¨çš„ <code>ID</code> æ¥æ„é€ æˆ‘ä»¬çš„æ•°æ®ç»“æ„ã€‚è€Œä¸”ï¼Œåœ¨ MySQL æ•°æ®å¼•æ“ä¸‹ï¼Œè¿˜æœ‰ä¸€äº›æ“ä½œéœ€è¦ä½¿ç”¨ä¸»é”®ï¼Œåœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä¸»é”®çš„æ€§èƒ½å’Œè®¾ç½®å˜å¾—éå¸¸é‡è¦ï¼Œæ¯”å¦‚ï¼Œé›†ç¾¤ï¼Œåˆ†åŒº ...ã€‚åœ¨è¿™é‡Œï¼Œåªæœ‰ä¸€ä¸ªæƒ…å†µæ˜¯ä¾‹å¤–ï¼Œé‚£å°±æ˜¯â€œå…³è”è¡¨â€çš„â€œå¤–é”®â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªè¡¨çš„ä¸»é”®ï¼Œé€šè¿‡è‹¥å¹²ä¸ªåˆ«çš„è¡¨çš„ä¸»é”®æ„æˆã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªæƒ…å†µå«åšâ€œå¤–é”®â€ã€‚æ¯”å¦‚ï¼šæœ‰ä¸€ä¸ªâ€œå­¦ç”Ÿè¡¨â€æœ‰å­¦ç”Ÿçš„ <code>ID</code>ï¼Œæœ‰ä¸€ä¸ªâ€œè¯¾ç¨‹è¡¨â€æœ‰è¯¾ç¨‹ <code>ID</code>ï¼Œé‚£ä¹ˆï¼Œâ€œæˆç»©è¡¨â€å°±æ˜¯â€œå…³è”è¡¨â€äº†ï¼Œå…¶å…³è”äº†å­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨ï¼Œåœ¨æˆç»©è¡¨ä¸­ï¼Œå­¦ç”Ÿ <code>ID</code> å’Œè¯¾ç¨‹ <code>ID</code> å«â€œå¤–é”®â€å…¶å…±åŒç»„æˆä¸»é”®ã€‚ </p><h2 id="å¯ä»¥ä½¿ç”¨-ENUM-åˆ™ä¸ç”¨-VARCHAR"><a href="#å¯ä»¥ä½¿ç”¨-ENUM-åˆ™ä¸ç”¨-VARCHAR" class="headerlink" title="å¯ä»¥ä½¿ç”¨ ENUM åˆ™ä¸ç”¨ VARCHAR"></a>å¯ä»¥ä½¿ç”¨ ENUM åˆ™ä¸ç”¨ VARCHAR</h2><p><code>ENUM</code> ç±»å‹æ˜¯éå¸¸å¿«å’Œç´§å‡‘çš„ã€‚åœ¨å®é™…ä¸Šï¼Œå…¶ä¿å­˜çš„æ˜¯ <code>TINYINT</code>ï¼Œä½†å…¶å¤–è¡¨ä¸Šæ˜¾ç¤ºä¸ºå­—ç¬¦ä¸²ã€‚è¿™æ ·ä¸€æ¥ï¼Œç”¨è¿™ä¸ªå­—æ®µæ¥åšä¸€äº›é€‰é¡¹åˆ—è¡¨å˜å¾—ç›¸å½“çš„å®Œç¾ã€‚å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå­—æ®µï¼Œæ¯”å¦‚â€œæ€§åˆ«â€ï¼Œâ€œå›½å®¶â€ï¼Œâ€œæ°‘æ—â€ï¼Œâ€œçŠ¶æ€â€æˆ–â€œéƒ¨é—¨â€ï¼Œæˆ‘ä»¬çŸ¥é“è¿™äº›å­—æ®µçš„å–å€¼æ˜¯æœ‰é™è€Œä¸”å›ºå®šçš„ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ <code>ENUM</code> è€Œä¸æ˜¯ <code>VARCHAR</code>ã€‚</p><h2 id="å°½å¯èƒ½çš„ä¸è¦èµ‹å€¼ä¸º-NULL"><a href="#å°½å¯èƒ½çš„ä¸è¦èµ‹å€¼ä¸º-NULL" class="headerlink" title="å°½å¯èƒ½çš„ä¸è¦èµ‹å€¼ä¸º NULL"></a>å°½å¯èƒ½çš„ä¸è¦èµ‹å€¼ä¸º NULL</h2><p>å¦‚æœä¸æ˜¯ç‰¹æ®Šæƒ…å†µï¼Œå°½å¯èƒ½çš„ä¸è¦ä½¿ç”¨ <code>NULL</code>ã€‚åœ¨ MySQL ä¸­å¯¹äº INT ç±»å‹è€Œè¨€ï¼Œ<code>EMPTY</code> æ˜¯ <code>0</code>ï¼Œè€Œ <code>NULL</code> æ˜¯ç©ºå€¼ã€‚è€Œåœ¨ Oracle ä¸­ <code>NULL</code> å’Œ <code>EMPTY</code> çš„å­—ç¬¦ä¸²æ˜¯ä¸€æ ·çš„ã€‚<code>NULL</code> ä¹Ÿéœ€è¦å ç”¨å­˜å‚¨ç©ºé—´ï¼Œå¹¶ä¸”ä¼šä½¿æˆ‘ä»¬çš„ç¨‹åºåˆ¤æ–­æ—¶æ›´åŠ å¤æ‚ã€‚ç°å®æƒ…å†µæ˜¯å¾ˆå¤æ‚çš„ï¼Œä¾ç„¶ä¼šæœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>NULL</code> å€¼ã€‚</p><p>ä¸‹é¢æ‘˜è‡ªMySQL çš„æ–‡æ¡£ï¼š</p><blockquote><p>NULL columns require additional space in the row to record whether their values are NULL. For MyISAM tables, each NULL column takes one bit extra, rounded up to the nearest byte.</p></blockquote><h2 id="å›ºå®šé•¿åº¦çš„è¡¨ä¼šæ›´å¿«"><a href="#å›ºå®šé•¿åº¦çš„è¡¨ä¼šæ›´å¿«" class="headerlink" title="å›ºå®šé•¿åº¦çš„è¡¨ä¼šæ›´å¿«"></a>å›ºå®šé•¿åº¦çš„è¡¨ä¼šæ›´å¿«</h2><p>å¦‚æœè¡¨ä¸­çš„æ‰€æœ‰å­—æ®µéƒ½æ˜¯â€œå›ºå®šé•¿åº¦â€çš„ï¼Œæ•´ä¸ªè¡¨ä¼šè¢«è®¤ä¸ºæ˜¯ <code>static</code> æˆ– <code>fixed-length</code>ã€‚ä¾‹å¦‚ï¼Œè¡¨ä¸­æ²¡æœ‰å¦‚ä¸‹ç±»å‹çš„å­—æ®µï¼š<code>VARCHAR</code>ï¼Œ<code>TEXT</code>ï¼Œ<code>BLOB</code>ã€‚åªè¦æˆ‘ä»¬åŒ…æ‹¬äº†å…¶ä¸­ä¸€ä¸ªè¿™äº›å­—æ®µï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨å°±ä¸æ˜¯â€œå›ºå®šé•¿åº¦é™æ€è¡¨â€äº†ï¼Œè¿™æ ·ï¼ŒMySQL å¼•æ“ä¼šç”¨å¦ä¸€ç§æ–¹æ³•æ¥å¤„ç†ã€‚</p><p>å›ºå®šé•¿åº¦çš„è¡¨ä¼šæé«˜æ€§èƒ½ï¼Œå› ä¸º MySQL æœå¯»å¾—ä¼šæ›´å¿«ä¸€äº›ï¼Œå› ä¸ºè¿™äº›å›ºå®šçš„é•¿åº¦æ˜¯å¾ˆå®¹æ˜“è®¡ç®—ä¸‹ä¸€ä¸ªæ•°æ®çš„åç§»é‡çš„ï¼Œæ‰€ä»¥è¯»å–çš„è‡ªç„¶ä¹Ÿä¼šå¾ˆå¿«ã€‚è€Œå¦‚æœå­—æ®µä¸æ˜¯å®šé•¿çš„ï¼Œé‚£ä¹ˆï¼Œæ¯ä¸€æ¬¡è¦æ‰¾ä¸‹ä¸€æ¡çš„è¯ï¼Œéœ€è¦ç¨‹åºæ‰¾åˆ°ä¸»é”®ã€‚å¹¶ä¸”ï¼Œå›ºå®šé•¿åº¦çš„è¡¨ä¹Ÿæ›´å®¹æ˜“è¢«ç¼“å­˜å’Œé‡å»ºã€‚ä¸è¿‡ï¼Œå”¯ä¸€çš„å‰¯ä½œç”¨æ˜¯ï¼Œå›ºå®šé•¿åº¦çš„å­—æ®µä¼šæµªè´¹ä¸€äº›ç©ºé—´ï¼Œå› ä¸ºå®šé•¿çš„å­—æ®µæ— è®ºæˆ‘ä»¬ç”¨ä¸ç”¨ï¼Œä»–éƒ½æ˜¯è¦åˆ†é…é‚£ä¹ˆå¤šçš„ç©ºé—´ã€‚å¦å¤–åœ¨å–å‡ºå€¼çš„æ—¶å€™è¦ä½¿ç”¨ <code>trim</code> å»é™¤ç©ºæ ¼ã€‚</p><h2 id="å‚ç›´åˆ†å‰²"><a href="#å‚ç›´åˆ†å‰²" class="headerlink" title="å‚ç›´åˆ†å‰²"></a>å‚ç›´åˆ†å‰²</h2><p>â€œå‚ç›´åˆ†å‰²â€æ˜¯ä¸€ç§æŠŠæ•°æ®åº“ä¸­çš„è¡¨æŒ‰åˆ—å˜æˆå‡ å¼ è¡¨çš„æ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥é™ä½è¡¨çš„å¤æ‚åº¦å’Œå­—æ®µçš„æ•°ç›®ï¼Œä»è€Œè¾¾åˆ°ä¼˜åŒ–çš„ç›®çš„ã€‚</p><h2 id="æ‹†åˆ†å¤§çš„-DELETE-æˆ–-INSERT-è¯­å¥"><a href="#æ‹†åˆ†å¤§çš„-DELETE-æˆ–-INSERT-è¯­å¥" class="headerlink" title="æ‹†åˆ†å¤§çš„ DELETE æˆ– INSERT è¯­å¥"></a>æ‹†åˆ†å¤§çš„ DELETE æˆ– INSERT è¯­å¥</h2><p>å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨ä¸€ä¸ªåœ¨çº¿çš„ç½‘ç«™ä¸Šå»æ‰§è¡Œä¸€ä¸ªå¤§çš„ <code>DELETE</code> æˆ– <code>INSERT</code> æŸ¥è¯¢ï¼Œæˆ‘ä»¬éœ€è¦éå¸¸å°å¿ƒï¼Œè¦é¿å…æˆ‘ä»¬çš„æ“ä½œè®©æˆ‘ä»¬çš„æ•´ä¸ªç½‘ç«™åœæ­¢å“åº”ã€‚å› ä¸ºè¿™ä¸¤ä¸ªæ“ä½œæ˜¯ä¼šé”è¡¨çš„ï¼Œè¡¨ä¸€é”ä½äº†ï¼Œåˆ«çš„æ“ä½œéƒ½è¿›ä¸æ¥äº†ã€‚</p><p>Apache ä¼šæœ‰å¾ˆå¤šçš„å­è¿›ç¨‹æˆ–çº¿ç¨‹ã€‚æ‰€ä»¥ï¼Œå…¶å·¥ä½œèµ·æ¥ç›¸å½“æœ‰æ•ˆç‡ï¼Œè€Œæˆ‘ä»¬çš„æœåŠ¡å™¨ä¹Ÿä¸å¸Œæœ›æœ‰å¤ªå¤šçš„å­è¿›ç¨‹ï¼Œçº¿ç¨‹å’Œæ•°æ®åº“é“¾æ¥ï¼Œè¿™æ˜¯æå¤§çš„å æœåŠ¡å™¨èµ„æºçš„äº‹æƒ…ï¼Œå°¤å…¶æ˜¯å†…å­˜ã€‚å¦‚æœæˆ‘ä»¬æŠŠæˆ‘ä»¬çš„è¡¨é”ä¸Šä¸€æ®µæ—¶é—´ï¼Œæ¯”å¦‚ 30 ç§’é’Ÿï¼Œé‚£ä¹ˆå¯¹äºä¸€ä¸ªæœ‰å¾ˆé«˜è®¿é—®é‡çš„ç«™ç‚¹æ¥è¯´ï¼Œè¿™ 30 ç§’æ‰€ç§¯ç´¯çš„è®¿é—®è¿›ç¨‹/çº¿ç¨‹ï¼Œæ•°æ®åº“é“¾æ¥ï¼Œæ‰“å¼€çš„æ–‡ä»¶æ•°ï¼Œå¯èƒ½ä¸ä»…ä»…ä¼šè®©æˆ‘ä»¬çš„ web æœåŠ¡ Crashï¼Œè¿˜å¯èƒ½ä¼šè®©æˆ‘ä»¬çš„æ•´å°æœåŠ¡å™¨é©¬ä¸ŠæŒ‚äº†ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨æ—¶ä½¿ç”¨ <code>LIMIT</code> æ§åˆ¶æ•°é‡æ“ä½œè®°å½•çš„æ•°é‡ã€‚</p><h2 id="è¶Šå°çš„åˆ—ä¼šè¶Šå¿«"><a href="#è¶Šå°çš„åˆ—ä¼šè¶Šå¿«" class="headerlink" title="è¶Šå°çš„åˆ—ä¼šè¶Šå¿«"></a>è¶Šå°çš„åˆ—ä¼šè¶Šå¿«</h2><p>å¯¹äºå¤§å¤šæ•°çš„æ•°æ®åº“å¼•æ“æ¥è¯´ï¼Œç¡¬ç›˜æ“ä½œå¯èƒ½æ˜¯æœ€é‡å¤§çš„ç“¶é¢ˆã€‚æ‰€ä»¥ï¼ŒæŠŠæˆ‘ä»¬çš„æ•°æ®å˜å¾—ç´§å‡‘ä¼šå¯¹è¿™ç§æƒ…å†µéå¸¸æœ‰å¸®åŠ©ï¼Œå› ä¸ºè¿™å‡å°‘äº†å¯¹ç¡¬ç›˜çš„è®¿é—®ã€‚å‚çœ‹ MySQL çš„æ–‡æ¡£ Storage Requirements æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®ç±»å‹ã€‚</p><p>å¦‚æœä¸€ä¸ªè¡¨åªä¼šæœ‰å‡ åˆ—ï¼ˆæ¯”å¦‚è¯´å­—å…¸è¡¨ï¼Œé…ç½®è¡¨ï¼‰ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å°±æ²¡æœ‰ç†ç”±ä½¿ç”¨ <code>INT</code> æ¥åšä¸»é”®ï¼Œä½¿ç”¨ <code>MEDIUMINT</code>, <code>SMALLINT</code> æˆ–æ˜¯æ›´å°çš„ <code>TINYINT</code> ä¼šæ›´ç»æµä¸€äº›ã€‚å¦‚æœæˆ‘ä»¬ä¸éœ€è¦è®°å½•æ—¶é—´ï¼Œä½¿ç”¨ <code>DATE</code> è¦æ¯” <code>DATETIME</code> å¥½å¾—å¤šã€‚</p><h2 id="é€‰æ‹©æ­£ç¡®çš„å­˜å‚¨å¼•æ“"><a href="#é€‰æ‹©æ­£ç¡®çš„å­˜å‚¨å¼•æ“" class="headerlink" title="é€‰æ‹©æ­£ç¡®çš„å­˜å‚¨å¼•æ“"></a>é€‰æ‹©æ­£ç¡®çš„å­˜å‚¨å¼•æ“</h2><p>åœ¨ MySQL ä¸­æœ‰ä¸¤ä¸ªå­˜å‚¨å¼•æ“ <code>MyISAM</code> å’Œ <code>InnoDB</code>,æ¯ä¸ªå¼•æ“éƒ½æœ‰åˆ©æœ‰å¼Šã€‚</p><p><code>MyISAM</code> é€‚åˆäºä¸€äº›éœ€è¦å¤§é‡æŸ¥è¯¢çš„åº”ç”¨ï¼Œä½†æ˜¯å¯¹äºå¤§é‡å†™æ“ä½œçš„æ”¯æŒä¸æ˜¯å¾ˆå¥½ã€‚ç”šè‡³ä¸€ä¸ª <code>UPDATE</code> è¯­å¥å°±ä¼šè¿›è¡Œé”è¡¨æ“ä½œï¼Œè¿™æ—¶è¯»å–è¿™å¼ è¡¨çš„æ‰€æœ‰è¿›ç¨‹éƒ½æ— æ³•è¿›è¡Œæ“ä½œç›´è‡³å†™æ“ä½œå®Œæˆã€‚å¦å¤– <code>MyISAM</code> å¯¹äº <code>SELECT COUNT(*)</code> è¿™ç±»çš„è®¡ç®—æ˜¯è¶…å¿«æ— æ¯”çš„ã€‚<code>InnoDB</code> çš„è¶‹åŠ¿ä¼šæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„å­˜å‚¨å¼•æ“ï¼Œå¯¹äºä¸€äº›å°çš„åº”ç”¨ï¼Œå®ƒä¼šæ¯” <code>MyISAM</code> è¿˜æ…¢ã€‚å®ƒæ”¯æŒâ€œè¡Œé”â€ï¼Œäºæ˜¯åœ¨å†™æ“ä½œæ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œä¼šæ›´ä¼˜ç§€ã€‚å¹¶ä¸”ï¼Œä»–è¿˜æ”¯æŒæ›´å¤šçš„é«˜çº§åº”ç”¨ï¼Œæ¯”å¦‚ï¼šäº‹åŠ¡ã€‚</p><p><code>MyISAM</code> æ˜¯ MySQL5.5 ç‰ˆæœ¬ä»¥å‰é»˜è®¤çš„å­˜å‚¨å¼•æ“ï¼ŒåŸºäºä¼ ç»Ÿçš„ <code>ISAM</code> ç±»å‹ï¼Œæ”¯æŒ <code>B-Tree</code>ï¼Œå…¨æ–‡æ£€ç´¢ï¼Œä½†æ˜¯ä¸æ˜¯äº‹åŠ¡å®‰å…¨çš„ï¼Œè€Œä¸”ä¸æ”¯æŒå¤–é”®ã€‚ä¸å…·æœ‰åŸå­æ€§ã€‚æ”¯æŒé”è¡¨ã€‚</p><p><code>InnoDB</code> æ˜¯äº‹åŠ¡å‹å¼•æ“ï¼Œæ”¯æŒ <code>ACID</code> äº‹åŠ¡ï¼ˆå®ç° 4 ç§äº‹åŠ¡éš”ç¦»æœºåˆ¶ï¼‰ã€å›æ»šã€å´©æºƒæ¢å¤èƒ½åŠ›ã€è¡Œé”ã€‚ä»¥åŠæä¾›ä¸ Oracle ä¸€è‡´çš„ä¸åŠ é”çš„è¯»å–æ–¹å¼ã€‚<code>InnoDB</code> å­˜å‚¨è¡¨å’Œç´¢å¼•åœ¨ä¸€ä¸ªè¡¨ç©ºé—´ä¸­ï¼Œè¡¨ç©ºé—´å¯ä»¥åŒ…å«å¤šä¸ªæ–‡ä»¶ã€‚</p><p><code>MyISAM</code> å’Œ <code>InnoDB</code> æ¯”è¾ƒï¼Œå¦‚ä¸‹è¡¨æ ¼æ‰€ç¤ºï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">MyISAM</th><th style="text-align:center">InnoDB</th></tr></thead><tbody><tr><td style="text-align:center">äº‹åŠ¡</td><td style="text-align:center">ä¸æ”¯æŒ</td><td style="text-align:center">æ”¯æŒ</td></tr><tr><td style="text-align:center">æ•°æ®è¡Œé”å®š</td><td style="text-align:center">ä¸æ”¯æŒï¼Œåªæœ‰è¡¨é”å®š</td><td style="text-align:center">æ”¯æŒ</td></tr><tr><td style="text-align:center">å¤–é”®çº¦æŸ</td><td style="text-align:center">ä¸æ”¯æŒ</td><td style="text-align:center">æ”¯æŒ</td></tr><tr><td style="text-align:center">è¡¨ç©ºé—´å¤§å°</td><td style="text-align:center">ç›¸å¯¹å°</td><td style="text-align:center">ç›¸å¯¹å¤§</td></tr><tr><td style="text-align:center">å…¨æ–‡ç´¢å¼•</td><td style="text-align:center">æ”¯æŒ</td><td style="text-align:center">ä¸æ”¯æŒ</td></tr><tr><td style="text-align:center">å…³æ³¨ç‚¹</td><td style="text-align:center">æ€§èƒ½ï¼ˆSELECTï¼‰</td><td style="text-align:center">äº‹åŠ¡</td></tr></tbody></table></div><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>å¯¹äº Linux ç‰ˆæœ¬çš„ MySQL é…ç½®æ–‡ä»¶åœ¨ <code>/etc/my.cnf</code> ä¸­</li><li>åœ¨ 5.5 ä¹‹åé»˜è®¤çš„å­˜å‚¨å¼•æ“æ˜¯ <code>INNODB</code></li><li>å¯ä»¥å•ç‹¬è¿›è¡Œä¿®æ”¹ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶è®¾ç½®<p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tab_name <span class="token keyword">ENGINE</span> <span class="token keyword">INNODB</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> tab_name<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li></ul><h2 id="å°å¿ƒæ°¸ä¹…é“¾æ¥"><a href="#å°å¿ƒæ°¸ä¹…é“¾æ¥" class="headerlink" title="å°å¿ƒæ°¸ä¹…é“¾æ¥"></a>å°å¿ƒæ°¸ä¹…é“¾æ¥</h2><p>â€œæ°¸ä¹…é“¾æ¥â€çš„ç›®çš„æ˜¯ç”¨æ¥å‡å°‘é‡æ–°åˆ›å»º MySQL é“¾æ¥çš„æ¬¡æ•°ã€‚å½“ä¸€ä¸ªé“¾æ¥è¢«åˆ›å»ºäº†ï¼Œå®ƒä¼šæ°¸è¿œå¤„åœ¨è¿æ¥çš„çŠ¶æ€ï¼Œå°±ç®—æ˜¯æ•°æ®åº“æ“ä½œå·²ç»ç»“æŸäº†ã€‚è€Œä¸”ï¼Œè‡ªä»æˆ‘ä»¬çš„ Apache å¼€å§‹é‡ç”¨å®ƒçš„å­è¿›ç¨‹åâ€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹ä¸€æ¬¡çš„ HTTP è¯·æ±‚ä¼šé‡ç”¨ Apache çš„å­è¿›ç¨‹ï¼Œå¹¶é‡ç”¨ç›¸åŒçš„ MySQL é“¾æ¥ã€‚ </p><p>è€Œä¸”ï¼ŒApache è¿è¡Œåœ¨æç«¯å¹¶è¡Œçš„ç¯å¢ƒä¸­ï¼Œä¼šåˆ›å»ºå¾ˆå¤šå¾ˆå¤šçš„äº†è¿›ç¨‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ç§â€œæ°¸ä¹…é“¾æ¥â€çš„æœºåˆ¶å·¥ä½œä¸å¥½çš„åŸå› ã€‚åœ¨æˆ‘ä»¬å†³å®šè¦ä½¿ç”¨â€œæ°¸ä¹…é“¾æ¥â€ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¥½å¥½åœ°è€ƒè™‘ä¸€ä¸‹æˆ‘ä»¬çš„æ•´ä¸ªç³»ç»Ÿçš„æ¶æ„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ¬MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL å¸¸ç”¨å‘½ä»¤è¡Œ</title>
      <link href="post/4bd4f98e.html"/>
      <url>post/4bd4f98e.html</url>
      
        <content type="html"><![CDATA[<h1 id="è¿æ¥-MySQL"><a href="#è¿æ¥-MySQL" class="headerlink" title="è¿æ¥ MySQL"></a>è¿æ¥ MySQL</h1><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysql -hä¸»æœºåœ°å€ -uç”¨æˆ·å -pç”¨æˆ·å¯†ç <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="è¿æ¥åˆ°æœ¬æœºä¸Šçš„MySQL"><a href="#è¿æ¥åˆ°æœ¬æœºä¸Šçš„MySQL" class="headerlink" title="è¿æ¥åˆ°æœ¬æœºä¸Šçš„MySQL"></a>è¿æ¥åˆ°æœ¬æœºä¸Šçš„MySQL</h2><p>é¦–å…ˆæ‰“å¼€ <code>DOS</code> çª—å£ï¼Œç„¶åè¿›å…¥ç›®å½• <code>mysql\bin</code> ï¼Œå†é”®å…¥å‘½ä»¤ <code>mysql -u root -p</code> å›è½¦åæç¤ºä½ è¾“å¯†ç ã€‚æ³¨æ„ç”¨æˆ·åå‰å¯ä»¥æœ‰ç©ºæ ¼ä¹Ÿå¯ä»¥æ²¡æœ‰ç©ºæ ¼ï¼Œä½†æ˜¯å¯†ç å‰å¿…é¡»æ²¡æœ‰ç©ºæ ¼ï¼Œå¦åˆ™è®©ä½ é‡æ–°è¾“å…¥å¯†ç ã€‚</p><p>å¦‚æœåˆšå®‰è£…å¥½ MySQLï¼Œè¶…çº§ç”¨æˆ· <code>root</code> æ˜¯æ²¡æœ‰å¯†ç çš„ã€‚ç›´æ¥å›è½¦å³å¯è¿›å…¥åˆ° MySQL ä¸­äº†ï¼ŒMySQL çš„æç¤ºç¬¦æ˜¯ï¼š <code>mysql&gt;</code></p><h2 id="è¿æ¥åˆ°è¿œç¨‹ä¸»æœºä¸Šçš„MySQL"><a href="#è¿æ¥åˆ°è¿œç¨‹ä¸»æœºä¸Šçš„MySQL" class="headerlink" title="è¿æ¥åˆ°è¿œç¨‹ä¸»æœºä¸Šçš„MySQL"></a>è¿æ¥åˆ°è¿œç¨‹ä¸»æœºä¸Šçš„MySQL</h2><p>å‡è®¾è¿œç¨‹ä¸»æœºçš„ IP ä¸ºï¼š<code>110.110.110.110</code>ï¼Œç”¨æˆ·åä¸º <code>root</code>ï¼Œå¯†ç ä¸º <code>abcd123</code>ã€‚åˆ™é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysql -h 110.110.110.110 -u root -p abcd123;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>æ³¨</strong>ï¼š<code>u</code> ä¸ <code>root</code> ä¹‹é—´å¯ä»¥ä¸ç”¨åŠ ç©ºæ ¼ï¼Œå…¶å®ƒä¹Ÿä¸€æ ·ã€‚</p><h2 id="é€€å‡ºMySQLå‘½ä»¤ã€‚"><a href="#é€€å‡ºMySQLå‘½ä»¤ã€‚" class="headerlink" title="é€€å‡ºMySQLå‘½ä»¤ã€‚"></a>é€€å‡ºMySQLå‘½ä»¤ã€‚</h2><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h1 id="ä¿®æ”¹å¯†ç "><a href="#ä¿®æ”¹å¯†ç " class="headerlink" title="ä¿®æ”¹å¯†ç "></a>ä¿®æ”¹å¯†ç </h1><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysqladmin -uç”¨æˆ·å -pæ—§å¯†ç  password æ–°å¯†ç <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><ol><li><p>ç»™ root åŠ ä¸ªå¯†ç  ab12ã€‚</p><p> é¦–å…ˆåœ¨ <code>DOS</code> ä¸‹è¿›å…¥ç›®å½• <code>mysql\bin</code>ã€‚ç„¶åé”®å…¥ä»¥ä¸‹å‘½ä»¤ <code>mysqladmin -u root -password ab12</code></p><p> <strong>æ³¨</strong>ï¼šå› ä¸ºå¼€å§‹æ—¶ <code>root</code> æ²¡æœ‰å¯†ç ï¼Œæ‰€ä»¥ <code>-pæ—§å¯†ç </code> ä¸€é¡¹å°±å¯ä»¥çœç•¥äº†ã€‚</p></li></ol><ol><li><p>å†å°† root çš„å¯†ç æ”¹ä¸º def345ã€‚</p><p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysqladmin -u root -p ab12 password def345<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>å¢åŠ æ–°ç”¨æˆ·</p><p> <strong>æ³¨æ„</strong>ï¼šå’Œä¸Šé¢ä¸åŒï¼Œä¸‹é¢çš„å› ä¸ºæ˜¯ MySQL ç¯å¢ƒä¸­çš„å‘½ä»¤ï¼Œæ‰€ä»¥åé¢éƒ½å¸¦ä¸€ä¸ªåˆ†å·ä½œä¸ºå‘½ä»¤ç»“æŸç¬¦ã€‚</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> æ•°æ®åº“<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> ç”¨æˆ·å@ç™»å½•ä¸»æœº identified <span class="token keyword">BY</span> <span class="token string">"å¯†ç "</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><ol><li>å¢åŠ ä¸€ä¸ªç”¨æˆ· <code>test1</code> å¯†ç ä¸º <code>abc</code>ï¼Œè®©ä»–å¯ä»¥åœ¨ä»»ä½•ä¸»æœºä¸Šç™»å½•ï¼Œå¹¶å¯¹æ‰€æœ‰æ•°æ®åº“æœ‰æŸ¥è¯¢ã€æ’å…¥ã€ä¿®æ”¹ã€åˆ é™¤çš„æƒé™ã€‚é¦–å…ˆç”¨ <code>root</code> ç”¨æˆ·è¿å…¥ MySQLï¼Œç„¶åé”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</li></ol><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span><span class="token punctuation">,</span> <span class="token keyword">UPDATE</span><span class="token punctuation">,</span> <span class="token keyword">DELETE</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> test1<span class="token variable">@"%"</span> Identified <span class="token keyword">BY</span> <span class="token string">"abc"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä½†å¢åŠ çš„ç”¨æˆ·æ˜¯ååˆ†å±é™©çš„ï¼Œä½ æƒ³å¦‚æŸä¸ªäººçŸ¥é“ <code>test1</code> çš„å¯†ç ï¼Œé‚£ä¹ˆä»–å°±å¯ä»¥åœ¨ internet ä¸Šçš„ä»»ä½•ä¸€å°ç”µè„‘ä¸Šç™»å½•ä½ çš„ MySQL æ•°æ®åº“å¹¶å¯¹ä½ çš„æ•°æ®å¯ä»¥ä¸ºæ‰€æ¬²ä¸ºäº†ï¼Œè§£å†³åŠæ³•è§ 2ã€‚</p><ol><li>å¢åŠ ä¸€ä¸ªç”¨æˆ· <code>test2</code> å¯†ç ä¸º <code>abc</code>ï¼Œè®©ä»–åªå¯ä»¥åœ¨ <code>localhost</code> ä¸Šç™»å½•ï¼Œå¹¶å¯ä»¥å¯¹æ•°æ®åº“ <code>mydb</code> è¿›è¡ŒæŸ¥è¯¢ã€æ’å…¥ã€ä¿®æ”¹ã€åˆ é™¤çš„æ“ä½œï¼ˆlocalhost æŒ‡æœ¬åœ°ä¸»æœºï¼Œå³ MySQL æ•°æ®åº“æ‰€åœ¨çš„é‚£å°ä¸»æœºï¼‰ã€‚</li></ol><p>è¿™æ ·ç”¨æˆ·å³ä½¿ç”¨çŸ¥é“ <code>test2</code> çš„å¯†ç ï¼Œä»–ä¹Ÿæ— æ³•ä» internet ä¸Šç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œåªèƒ½é€šè¿‡MySQL ä¸»æœºä¸Šçš„ web é¡µæ¥è®¿é—®äº†ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span><span class="token punctuation">,</span> <span class="token keyword">UPDATE</span><span class="token punctuation">,</span> <span class="token keyword">DELETE</span> <span class="token keyword">ON</span> mydb<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> test2<span class="token variable">@localhost</span> test2<span class="token variable">@localhost</span> identified <span class="token keyword">BY</span> <span class="token string">"abc"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>å¦‚æœä½ ä¸æƒ³ <code>test2</code> æœ‰å¯†ç ï¼Œå¯ä»¥å†æ‰“ä¸€ä¸ªå‘½ä»¤å°†å¯†ç æ¶ˆæ‰ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span><span class="token punctuation">,</span> <span class="token keyword">UPDATE</span><span class="token punctuation">,</span> <span class="token keyword">DELETE</span> <span class="token keyword">ON</span> mydb<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> test2<span class="token variable">@localhost</span> test2<span class="token variable">@localhost</span> identified <span class="token keyword">BY</span> <span class="token string">""</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h1 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h1></li></ol><h2 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h2><ol><li><p>å»ºç«‹ä¸€ä¸ªæ•°æ®åº“</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token operator">&lt;</span>æ•°æ®åº“å<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>åˆ›å»ºæ•°æ®åº“å¹¶åˆ†é…ç”¨æˆ·</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token operator">&lt;</span>æ•°æ®åº“å<span class="token operator">></span><span class="token punctuation">;</span><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span><span class="token punctuation">,</span> <span class="token keyword">UPDATE</span><span class="token punctuation">,</span> <span class="token keyword">DELETE</span><span class="token punctuation">,</span> <span class="token keyword">CREATE</span><span class="token punctuation">,</span> <span class="token keyword">DROP</span><span class="token punctuation">,</span> <span class="token keyword">ALTER</span> <span class="token keyword">ON</span> æ•°æ®åº“å<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> æ•°æ®åº“å@ç™»å½•ä¸»æœº IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'å¯†ç '</span><span class="token punctuation">;</span><span class="token keyword">SET</span> PASSWORD <span class="token keyword">FOR</span> <span class="token string">'æ•°æ®åº“å'</span><span class="token variable">@'ç™»å½•ä¸»æœº'</span> <span class="token operator">=</span> <span class="token string">'å¯†ç '</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p> ä¾æ¬¡æ‰§è¡Œ 3 ä¸ªå‘½ä»¤å®Œæˆæ•°æ®åº“åˆ›å»ºã€‚</p><p> <strong>æ³¨æ„</strong>ï¼šâ€œå¯†ç â€å’Œâ€œæ•°æ®åº“â€æ˜¯ç”¨æˆ·è‡ªå·±éœ€è¦è®¾ç½®çš„ã€‚</p></li></ol><h2 id="æ˜¾ç¤ºæ•°æ®åº“"><a href="#æ˜¾ç¤ºæ•°æ®åº“" class="headerlink" title="æ˜¾ç¤ºæ•°æ®åº“"></a>æ˜¾ç¤ºæ•°æ®åº“</h2><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SHOW</span> <span class="token keyword">DATABASES</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>æ³¨æ„</strong>ï¼šä¸ºäº†ä¸å†æ˜¾ç¤ºçš„æ—¶å€™ä¹±ç ï¼Œè¦ä¿®æ”¹æ•°æ®åº“é»˜è®¤ç¼–ç ã€‚ä»¥ä¸‹ä»¥ <code>GBK</code> ç¼–ç é¡µé¢ä¸ºä¾‹è¿›è¡Œè¯´æ˜ï¼š</p><ol><li><p>ä¿®æ”¹ MySQL çš„é…ç½®æ–‡ä»¶ã€‚</p><p> <code>my.ini</code> æ–‡ä»¶é‡Œé¢ä¿®æ”¹ <code>default-character-set=gbk</code>ã€‚</p></li><li><p>ä»£ç è¿è¡Œæ—¶ä¿®æ”¹ã€‚</p></li></ol><ul><li><p>Javaä»£ç ï¼š</p><p>  <pre class="line-numbers language-java" data-language="java"><code class="language-java">jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>test<span class="token operator">?</span>useUnicode<span class="token operator">=</span><span class="token boolean">true</span><span class="token operator">&amp;</span>characterEncoding<span class="token operator">=</span>gbk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>PHPä»£ç ï¼š</p><p>  <pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">header</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"Content-Type:text/html;charset=gb2312"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>Cè¯­è¨€ä»£ç ï¼š</p><p>  <pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">mysql_set_character_set</span><span class="token punctuation">(</span> MySQL <span class="token operator">*</span> mysql<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span> csname<span class="token punctuation">)</span>ï¼›<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>  è¯¥å‡½æ•°ç”¨äºä¸ºå½“å‰è¿æ¥è®¾ç½®é»˜è®¤çš„å­—ç¬¦é›†ã€‚å­—ç¬¦ä¸² <code>csname</code> æŒ‡å®šäº† 1 ä¸ªæœ‰æ•ˆçš„å­—ç¬¦é›†åç§°ã€‚è¿æ¥æ ¡å¯¹æˆä¸ºå­—ç¬¦é›†çš„é»˜è®¤æ ¡å¯¹ã€‚è¯¥å‡½æ•°çš„å·¥ä½œæ–¹å¼ä¸ <code>SET NAMES</code> è¯­å¥ç±»ä¼¼ï¼Œä½†å®ƒè¿˜èƒ½è®¾ç½® <code>charset</code> çš„å€¼ï¼Œä»è€Œå½±å“äº†ç”± <code>mysql_real_escape_string()</code> è®¾ç½®çš„å­—ç¬¦é›†ã€‚</p></li></ul><h2 id="åˆ é™¤æ•°æ®åº“"><a href="#åˆ é™¤æ•°æ®åº“" class="headerlink" title="åˆ é™¤æ•°æ®åº“"></a>åˆ é™¤æ•°æ®åº“</h2><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token operator">&lt;</span>æ•°æ®åº“å<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><ol><li><p>åˆ é™¤ä¸€ä¸ªå·²ç»ç¡®å®šå­˜åœ¨çš„æ•°æ®åº“</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> drop_database<span class="token punctuation">;</span>  Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p></li><li><p>åˆ é™¤ä¸€ä¸ªä¸ç¡®å®šå­˜åœ¨çš„æ•°æ®åº“</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> drop_database<span class="token punctuation">;</span>ERROR <span class="token number">1008</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Can<span class="token string">'t drop database '</span>drop_database<span class="token string">'; database doesn'</span>t exist<span class="token comment">//å‘ç”Ÿé”™è¯¯ï¼Œä¸èƒ½åˆ é™¤'drop_database'æ•°æ®åº“ï¼Œè¯¥æ•°æ®åº“ä¸å­˜åœ¨ã€‚</span>mysql<span class="token operator">></span> <span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> drop_database<span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected<span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span class="token comment">//äº§ç”Ÿä¸€ä¸ªè­¦å‘Šè¯´æ˜æ­¤æ•°æ®åº“ä¸å­˜åœ¨</span>mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> drop_database<span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> drop_database<span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span class="token comment">//IF EXISTS åˆ¤æ–­æ•°æ®åº“æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ä¹Ÿä¸äº§ç”Ÿé”™è¯¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h2></li></ol><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">USE</span> <span class="token operator">&lt;</span>æ•°æ®åº“å<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>å±å¹•æç¤ºï¼š<code>Database changed</code></p><p><code>USE</code> è¯­å¥å¯ä»¥é€šå‘Š MySQL æŠŠ <code>db_name</code> æ•°æ®åº“ä½œä¸ºé»˜è®¤ï¼ˆå½“å‰ï¼‰æ•°æ®åº“ä½¿ç”¨ï¼Œç”¨äºåç»­è¯­å¥ã€‚</p><p>è¯¥æ•°æ®åº“ä¿æŒä¸ºé»˜è®¤æ•°æ®åº“ï¼Œç›´åˆ°è¯­æ®µçš„ç»“å°¾ï¼Œæˆ–è€…ç›´åˆ°å‘å¸ƒä¸€ä¸ªä¸åŒçš„ USE è¯­å¥ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">USE</span> db1<span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> mytable<span class="token punctuation">;</span>   <span class="token comment"># SELECT COUNT(*) FROM db1.mytable</span>mysql<span class="token operator">></span> <span class="token keyword">USE</span> db2<span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> mytable<span class="token punctuation">;</span>   <span class="token comment"># SELECT COUNT(*) FROM db2.mytable</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä½¿ç”¨ <code>USE</code> è¯­å¥ä¸ºä¸€ä¸ªç‰¹å®šçš„å½“å‰çš„æ•°æ®åº“åšæ ‡è®°ï¼Œä¸ä¼šé˜»ç¢æ‚¨è®¿é—®å…¶å®ƒæ•°æ®åº“ä¸­çš„è¡¨ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­å¯ä»¥ä» <code>db1</code> æ•°æ®åº“è®¿é—®ä½œè€…è¡¨ï¼Œå¹¶ä» <code>db2</code> æ•°æ®åº“è®¿é—®ç¼–è¾‘è¡¨ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">USE</span> db1<span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> author_name<span class="token punctuation">,</span> editor_name <span class="token keyword">FROM</span> author<span class="token punctuation">,</span> db2<span class="token punctuation">.</span>editor <span class="token keyword">WHERE</span> author<span class="token punctuation">.</span>editor_id <span class="token operator">=</span> db2<span class="token punctuation">.</span>editor<span class="token punctuation">.</span>editor_id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h2 id="å½“å‰é€‰æ‹©çš„æ•°æ®åº“"><a href="#å½“å‰é€‰æ‹©çš„æ•°æ®åº“" class="headerlink" title="å½“å‰é€‰æ‹©çš„æ•°æ®åº“"></a>å½“å‰é€‰æ‹©çš„æ•°æ®åº“</h2><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------------+</span><span class="token operator">|</span> <span class="token keyword">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+</span><span class="token operator">|</span> db1        <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+</span><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>MySQL ä¸­ <code>SELECT</code> å‘½ä»¤ç±»ä¼¼äºå…¶ä»–ç¼–ç¨‹è¯­è¨€é‡Œçš„ <code>print</code> æˆ–è€… <code>write</code>ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥æ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ã€æ•°å­—ã€æ•°å­¦è¡¨è¾¾å¼çš„ç»“æœç­‰ç­‰ã€‚</p><ol><li><p>æ˜¾ç¤ºMySQLçš„ç‰ˆæœ¬</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> VERSION<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------------+</span><span class="token operator">|</span> VERSION<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+</span><span class="token operator">|</span> <span class="token number">5.6</span><span class="token number">.45</span><span class="token operator">-</span>log <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+</span><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>æ˜¾ç¤ºå½“å‰æ—¶é—´</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">+</span><span class="token comment">---------------------+</span><span class="token operator">|</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span>               <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------------------+</span><span class="token operator">+</span><span class="token comment">---------------------+</span><span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">13</span> <span class="token number">20</span>:<span class="token number">05</span>:<span class="token number">07</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------------------+</span><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>æ˜¾ç¤ºå¹´æœˆæ—¥</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> DAYOFMONTH<span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------------------------+</span><span class="token operator">|</span> DAYOFMONTH<span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------------------+</span><span class="token operator">|</span>                       <span class="token number">13</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------------------+</span><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------------------+</span><span class="token operator">|</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------------------+</span><span class="token operator">|</span>                   <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------------------+</span><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------------------+</span><span class="token operator">|</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------------+</span><span class="token operator">|</span>               <span class="token number">2021</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------------+</span><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>æ˜¾ç¤ºå­—ç¬¦ä¸²</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token string">"welcome to my blog!"</span><span class="token punctuation">;</span> <span class="token operator">+</span><span class="token comment">---------------------+</span><span class="token operator">|</span> welcome <span class="token keyword">to</span> my blog<span class="token operator">!</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------------------+</span><span class="token operator">|</span> welcome <span class="token keyword">to</span> my blog<span class="token operator">!</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------------------+</span><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>å½“è®¡ç®—å™¨ç”¨</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span> <span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">25</span><span class="token punctuation">;</span> <span class="token operator">+</span><span class="token comment">----------------------+</span><span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span> <span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">25</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----------------------+</span><span class="token operator">|</span>              <span class="token number">26.6000</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----------------------+</span><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>ä¸²æ¥å­—ç¬¦ä¸²</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span>f_name<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">,</span> l_name<span class="token punctuation">)</span> <span class="token keyword">AS</span> Name <span class="token keyword">FROM</span> employee_data <span class="token keyword">WHERE</span> title <span class="token operator">=</span> <span class="token string">'Marketing Executive'</span><span class="token punctuation">;</span> <span class="token operator">+</span><span class="token comment">---------------+</span><span class="token operator">|</span> Name          <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------------+</span><span class="token operator">|</span> Monica Sehgal <span class="token operator">|</span><span class="token operator">|</span> Hal Simlai    <span class="token operator">|</span><span class="token operator">|</span> Joseph Irvine <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------------+</span><span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p> <strong>æ³¨æ„</strong>ï¼šè¿™é‡Œç”¨åˆ° <code>CONCAT()</code> å‡½æ•°ï¼Œç”¨æ¥æŠŠå­—ç¬¦ä¸²è¿æ¥èµ·æ¥ã€‚å¦å¤–ï¼Œæˆ‘ä»¬è¿˜ç”¨åˆ° <code>AS</code> ç»™ç»“æœåˆ— <code>CONCAT(f_name, &quot; &quot;, l_name)</code> èµ·äº†ä¸ªå‡åã€‚</p></li></ol><h1 id="æ•°æ®è¡¨"><a href="#æ•°æ®è¡¨" class="headerlink" title="æ•°æ®è¡¨"></a>æ•°æ®è¡¨</h1><h2 id="åˆ›å»ºæ•°æ®è¡¨"><a href="#åˆ›å»ºæ•°æ®è¡¨" class="headerlink" title="åˆ›å»ºæ•°æ®è¡¨"></a>åˆ›å»ºæ•°æ®è¡¨</h2><p><pre class="line-numbers language-SQL" data-language="SQL"><code class="language-SQL">CREATE TABLE &lt;è¡¨å&gt; (&lt;å­—æ®µå1&gt; &lt;ç±»å‹1&gt; , ... , &lt;å­—æ®µån&gt; &lt;ç±»å‹n&gt;);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹ä¸ºæ•°æ®è¡¨çš„å­—æ®µï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:center">å­—æ®µå</th><th style="text-align:center">æ•°å­—ç±»å‹</th><th style="text-align:center">æ•°æ®å®½åº¦</th><th style="text-align:center">æ˜¯å¦ä¸ºç©º</th><th style="text-align:center">æ˜¯å¦ä¸»é”®</th><th style="text-align:center">è‡ªåŠ¨å¢åŠ </th><th style="text-align:center">é»˜è®¤å€¼</th></tr></thead><tbody><tr><td style="text-align:center">id</td><td style="text-align:center">int</td><td style="text-align:center">4</td><td style="text-align:center">å¦</td><td style="text-align:center">PRIMARY KEY</td><td style="text-align:center">AUTO_INCREMENT</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">name</td><td style="text-align:center">char</td><td style="text-align:center">20</td><td style="text-align:center">å¦</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">sex</td><td style="text-align:center">int</td><td style="text-align:center">4</td><td style="text-align:center">å¦</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">degree</td><td style="text-align:center">double</td><td style="text-align:center">16</td><td style="text-align:center">æ˜¯</td><td style="text-align:center"></td><td style="text-align:center"></td></tr></tbody></table></div><p>æ‰§è¡Œçš„ SQL è¯­å¥ä¸ºï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> MyClass<span class="token punctuation">(</span>     <span class="token operator">></span> id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>     <span class="token operator">></span> name <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>     <span class="token operator">></span> sex <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0'</span><span class="token punctuation">,</span>     <span class="token operator">></span> degree <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆ é™¤æ•°æ®è¡¨"><a href="#åˆ é™¤æ•°æ®è¡¨" class="headerlink" title="åˆ é™¤æ•°æ®è¡¨"></a>åˆ é™¤æ•°æ®è¡¨</h2><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä¾‹å¦‚ï¼šåˆ é™¤è¡¨åä¸º MyClass çš„è¡¨</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> MyClass<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>æ³¨æ„</strong>ï¼š</p><ul><li><code>DROP TABLE</code> ç”¨äºå–æ¶ˆä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ã€‚ä½†å¿…é¡»æœ‰è¡¨çš„ <code>DROP</code> æƒé™ã€‚æ‰€æœ‰çš„è¡¨æ•°æ®å’Œè¡¨å®šä¹‰ä¼šè¢«å–æ¶ˆï¼Œæ‰€ä»¥ä½¿ç”¨æœ¬è¯­å¥è¦å°å¿ƒã€‚</li><li>å¯¹äºä¸€ä¸ªå¸¦åˆ†åŒºçš„è¡¨ï¼Œ<code>DROP TABLE</code> ä¼šæ°¸ä¹…æ€§åœ°å–æ¶ˆè¡¨å®šä¹‰ï¼Œå–æ¶ˆå„åˆ†åŒºï¼Œå¹¶å–æ¶ˆå‚¨å­˜åœ¨è¿™äº›åˆ†åŒºä¸­çš„æ‰€æœ‰æ•°æ®ã€‚<code>DROP TABLE</code> è¿˜ä¼šå–æ¶ˆä¸è¢«å–æ¶ˆçš„è¡¨æœ‰å…³è”çš„åˆ†åŒºå®šä¹‰ï¼ˆ<code>.par</code>ï¼‰æ–‡ä»¶ã€‚</li><li>å¯¹äºä¸å­˜åœ¨çš„è¡¨ï¼Œä½¿ç”¨ <code>IF EXISTS</code> ç”¨äºé˜²æ­¢é”™è¯¯å‘ç”Ÿã€‚å½“ä½¿ç”¨ <code>IF EXISTS</code> æ—¶ï¼Œå¯¹äºæ¯ä¸ªä¸å­˜åœ¨çš„è¡¨ï¼Œä¼šç”Ÿæˆä¸€ä¸ª <code>NOTE</code>ã€‚</li><li><code>RESTRICT</code> å’Œ <code>CASCADE</code> å¯ä»¥ä½¿åˆ†åŒºæ›´å®¹æ˜“ã€‚ä½†ç›®å‰ï¼Œ<code>RESTRICT</code> å’Œ <code>CASCADE</code> ä¸èµ·ä½œç”¨ã€‚</li></ul><h2 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h2><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>å­—æ®µå<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>å­—æ®µån <span class="token operator">></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>å€¼<span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>  å€¼n <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä¾‹å¦‚ï¼šå¾€è¡¨ <code>MyClass</code> ä¸­æ’å…¥äºŒæ¡è®°å½•, è¿™äºŒæ¡è®°å½•è¡¨ç¤ºï¼šç¼–å·ä¸º <code>1</code> çš„åä¸º <code>Tom</code> çš„æˆç»©ä¸º <code>96.45</code>, ç¼–å·ä¸º <code>2</code> çš„åä¸º <code>Joan</code> çš„æˆç»©ä¸º <code>82.99</code>ï¼Œç¼–å·ä¸º <code>3</code> çš„åä¸º <code>Wang</code> çš„æˆç»©ä¸º <code>96.5</code>ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> MyClass<span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> degree<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">96.45</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Joan'</span><span class="token punctuation">,</span> <span class="token number">82.99</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Wang'</span><span class="token punctuation">,</span> <span class="token number">96.59</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®"><a href="#æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®" class="headerlink" title="æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®"></a>æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®</h2><ol><li><p>æŸ¥è¯¢æ‰€æœ‰è¡Œå‘½ä»¤ï¼š</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">&lt;</span>å­—æ®µ<span class="token number">1</span><span class="token punctuation">,</span> å­—æ®µ<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">></span> <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> <span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>è¡¨è¾¾å¼<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> <code>SELECT</code> ä¸€èˆ¬é…åˆ <code>WHERE</code> ä½¿ç”¨ï¼Œä»¥æŸ¥è¯¢æ›´ç²¾ç¡®æ›´å¤æ‚çš„æ•°æ®ã€‚</p><p> ä¾‹å¦‚ï¼šæŸ¥çœ‹è¡¨ <code>MyClass</code> ä¸­ <code>degree</code> å¤§äº <code>90</code> çš„æ•°æ®ã€‚</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> MyClass <span class="token keyword">WHERE</span> degree <span class="token operator">></span> <span class="token number">90</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+------+-----+--------+</span><span class="token operator">|</span> id <span class="token operator">|</span> name <span class="token operator">|</span> sex <span class="token operator">|</span> degree <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------+-----+--------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> Tom  <span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">96.45</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> Wang <span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">96.59</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------+-----+--------+</span><span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>æŸ¥è¯¢å‰å‡ è¡Œæ•°æ® </p><p> ä¾‹å¦‚ï¼šæŸ¥çœ‹è¡¨ <code>MyClass</code> ä¸­å‰ <code>2</code> è¡Œæ•°æ®</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> MyClass <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> id <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+------+-----+--------+</span><span class="token operator">|</span> id <span class="token operator">|</span> name <span class="token operator">|</span> sex <span class="token operator">|</span> degree <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------+-----+--------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> Tom  <span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">96.45</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> Joan <span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">82.99</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------+-----+--------+</span><span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆ é™¤è¡¨ä¸­æ•°æ®"><a href="#åˆ é™¤è¡¨ä¸­æ•°æ®" class="headerlink" title="åˆ é™¤è¡¨ä¸­æ•°æ®"></a>åˆ é™¤è¡¨ä¸­æ•°æ®</h2></li></ol><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> <span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>è¡¨è¾¾å¼<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä¾‹å¦‚ï¼šåˆ é™¤è¡¨ <code>MyClass</code> ä¸­ç¼–å·ä¸º <code>1</code> çš„è®°å½•</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> MyClass<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+------+-----+--------+</span><span class="token operator">|</span> id <span class="token operator">|</span> name <span class="token operator">|</span> sex <span class="token operator">|</span> degree <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------+-----+--------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> Tom  <span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">96.45</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> Joan <span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">82.99</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> Wang <span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">96.59</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------+-----+--------+</span><span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> MyClass <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> MyClass<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+------+-----+--------+</span><span class="token operator">|</span> id <span class="token operator">|</span> name <span class="token operator">|</span> sex <span class="token operator">|</span> degree <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------+-----+--------+</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> Joan <span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">82.99</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> Wang <span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">96.59</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------+-----+--------+</span><span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="ä¿®æ”¹è¡¨ä¸­æ•°æ®"><a href="#ä¿®æ”¹è¡¨ä¸­æ•°æ®" class="headerlink" title="ä¿®æ”¹è¡¨ä¸­æ•°æ®"></a>ä¿®æ”¹è¡¨ä¸­æ•°æ®</h2><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">UPDATE</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> <span class="token keyword">SET</span> <span class="token operator">&lt;</span>å­—æ®µ<span class="token operator">></span> <span class="token operator">=</span> <span class="token operator">&lt;</span>æ–°å€¼<span class="token operator">></span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>è¡¨è¾¾å¼<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä¾‹å¦‚ï¼šä¿®æ”¹è¡¨ <code>MyClass</code> ä¸­ <code>id</code> ä¸º <code>2</code> çš„ <code>name</code> ä¸º <code>Mary</code>ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">UPDATE</span> MyClass <span class="token keyword">SET</span> name <span class="token operator">=</span> <span class="token string">'Mary'</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><ol><li><p>å•è¡¨çš„ UPDATE è¯­å¥ï¼š</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">UPDATE</span> <span class="token punctuation">[</span>LOW_PRIORITY<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">IGNORE</span><span class="token punctuation">]</span> tbl_name <span class="token keyword">SET</span> col_name1<span class="token operator">=</span>expr1 <span class="token punctuation">[</span><span class="token punctuation">,</span> col_name2<span class="token operator">=</span>expr2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">WHERE</span> where_definition<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">LIMIT</span> row_count<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>å¤šè¡¨çš„ UPDATE è¯­å¥ï¼š</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">UPDATE</span> <span class="token punctuation">[</span>LOW_PRIORITY<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">IGNORE</span><span class="token punctuation">]</span> table_references <span class="token keyword">SET</span> col_name1<span class="token operator">=</span>expr1 <span class="token punctuation">[</span><span class="token punctuation">,</span> col_name2<span class="token operator">=</span>expr2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">WHERE</span> where_definition<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„</strong>ï¼š<code>UPDATE</code> è¯­æ³•å¯ä»¥ç”¨æ–°å€¼æ›´æ–°åŸæœ‰è¡¨è¡Œä¸­çš„å„åˆ—ã€‚SET å­å¥æŒ‡ç¤ºè¦ä¿®æ”¹å“ªäº›åˆ—å’Œè¦ç»™äºˆå“ªäº›å€¼ã€‚<code>WHERE</code> å­å¥æŒ‡å®šåº”æ›´æ–°å“ªäº›è¡Œã€‚å¦‚æœæ²¡æœ‰ <code>WHERE</code> å­å¥ï¼Œåˆ™æ›´æ–°æ‰€æœ‰çš„è¡Œã€‚å¦‚æœæŒ‡å®šäº† <code>ORDER BY</code> å­å¥ï¼Œåˆ™æŒ‰ç…§è¢«æŒ‡å®šçš„é¡ºåºå¯¹è¡Œè¿›è¡Œæ›´æ–°ã€‚<code>LIMIT</code> å­å¥ç”¨äºç»™å®šä¸€ä¸ªé™å€¼ï¼Œé™åˆ¶å¯ä»¥è¢«æ›´æ–°çš„è¡Œçš„æ•°ç›®ã€‚</p></li></ol><h2 id="ä¿®æ”¹æ•°æ®è¡¨"><a href="#ä¿®æ”¹æ•°æ®è¡¨" class="headerlink" title="ä¿®æ”¹æ•°æ®è¡¨"></a>ä¿®æ”¹æ•°æ®è¡¨</h2><ol><li><p>å¢åŠ å­—æ®µ</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> <span class="token keyword">ADD</span> <span class="token operator">&lt;</span>å­—æ®µ<span class="token operator">></span> <span class="token operator">&lt;</span>ç±»å‹<span class="token operator">></span> <span class="token operator">&lt;</span>å…¶ä»–<span class="token operator">></span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> MyClass <span class="token keyword">ADD</span> passtest <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">'0'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>å¢åŠ ç´¢å¼•</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> <span class="token operator">&lt;</span>ç´¢å¼•å<span class="token operator">></span><span class="token punctuation">(</span><span class="token operator">&lt;</span>å­—æ®µå<span class="token number">1</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>å­—æ®µå<span class="token number">2</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> employee <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> emp_name<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>å¢åŠ ä¸»å…³é”®å­—çš„ç´¢å¼•</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>å­—æ®µå<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> employee <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>å¢åŠ å”¯ä¸€ç´¢å¼•</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span> <span class="token operator">&lt;</span>ç´¢å¼•å<span class="token operator">></span><span class="token punctuation">(</span><span class="token operator">&lt;</span>å­—æ®µå<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> employee <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span> emp_name2<span class="token punctuation">(</span>cardnumber<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>å¢åŠ å…¨æ–‡ç´¢å¼•</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> <span class="token keyword">ADD</span> FULLTEXT <span class="token operator">&lt;</span>ç´¢å¼•å<span class="token operator">></span><span class="token punctuation">(</span><span class="token operator">&lt;</span>å­—æ®µå<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> employee <span class="token keyword">ADD</span> FULLTEXT emp_name3<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> <strong>æ³¨æ„</strong>ï¼šå…¨æ–‡ç´¢å¼•åªèƒ½ç”¨äºæ•°æ®åº“å¼•æ“ä¸º <code>MyISAM</code> çš„æ•°æ®è¡¨ï¼Œåªé€‚ç”¨äº <code>VARCHAR</code> å’Œ <code>TEXT</code> ç±»å‹çš„å­—æ®µï¼Œæ­¤å¤–ï¼ŒMySQL è‡ªå¸¦çš„å…¨æ–‡ç´¢å¼•åªèƒ½å¯¹è‹±æ–‡è¿›è¡Œå…¨æ–‡æ£€ç´¢ï¼Œç›®å‰æ— æ³•å¯¹ä¸­æ–‡è¿›è¡Œå…¨æ–‡æ£€ç´¢ã€‚</p></li><li><p>åˆ é™¤æŸä¸ªç´¢å¼•</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> <span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> <span class="token operator">&lt;</span>ç´¢å¼•å<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> employee <span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> emp_name<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>ä¿®æ”¹åŸå­—æ®µåç§°åŠç±»å‹</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> CHANGE <span class="token operator">&lt;</span>æ—§å­—æ®µå<span class="token operator">></span> <span class="token operator">&lt;</span>æ–°å­—æ®µå<span class="token operator">></span> <span class="token operator">&lt;</span>æ–°å­—æ®µç±»å‹<span class="token operator">></span> <span class="token operator">&lt;</span>å…¶ä»–<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> employee CHANGE name full_name <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>åˆ é™¤å­—æ®µ</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>è¡¨å<span class="token operator">></span> <span class="token keyword">DROP</span> <span class="token operator">&lt;</span>å­—æ®µå<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> employee <span class="token keyword">DROP</span> address<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>ä¿®æ”¹è¡¨å</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">RENAME</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>åŸè¡¨å<span class="token operator">></span> <span class="token keyword">TO</span> <span class="token operator">&lt;</span>æ–°è¡¨å<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">RENAME</span> <span class="token keyword">TABLE</span> MyClass <span class="token keyword">TO</span> YouClass<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> <strong>æ³¨æ„</strong>ï¼š</p><ul><li>å½“ä½ æ‰§è¡Œ <code>RENAME</code> æ—¶ï¼Œä½ ä¸èƒ½æœ‰ä»»ä½•é”å®šçš„è¡¨æˆ–æ´»åŠ¨çš„äº‹åŠ¡ã€‚ä½ åŒæ ·ä¹Ÿå¿…é¡»æœ‰å¯¹åŸåˆè¡¨çš„ <code>ALTER</code> å’Œ <code>DROP</code> æƒé™ï¼Œä»¥åŠå¯¹æ–°è¡¨çš„ <code>CREATE</code> å’Œ <code>INSERT</code> æƒé™ã€‚</li><li>å¦‚æœåœ¨å¤šè¡¨æ›´åä¸­ï¼ŒMySQL é­é‡åˆ°ä»»ä½•é”™è¯¯ï¼Œå®ƒå°†å¯¹æ‰€æœ‰è¢«æ›´åçš„è¡¨è¿›è¡Œå€’é€€æ›´åï¼Œå°†æ¯ä»¶äº‹åŠ¡é€€å›åˆ°æœ€åˆçŠ¶æ€ã€‚</li><li><code>RENAME TABLE</code> åœ¨ MySQL 3.23.23 ä¸­è¢«åŠ å…¥ã€‚</li></ul></li></ol><h1 id="å¤‡ä»½æ•°æ®åº“"><a href="#å¤‡ä»½æ•°æ®åº“" class="headerlink" title="å¤‡ä»½æ•°æ®åº“"></a>å¤‡ä»½æ•°æ®åº“</h1><p>å‘½ä»¤åœ¨ <code>DOS</code> çš„ <code>\mysql\bin</code> ç›®å½•ä¸‹æ‰§è¡Œï¼Œå¯¼å‡ºæ–‡ä»¶é»˜è®¤æ˜¯å­˜åœ¨ <code>mysql\bin</code> ç›®å½•ä¸‹ã€‚</p><h2 id="å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“"><a href="#å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“" class="headerlink" title="å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“"></a>å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“</h2><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysqldump -u ç”¨æˆ·å -p&#39;å¯†ç &#39; æ•°æ®åº“å &gt; å¯¼å‡ºçš„æ–‡ä»¶å.sqlmysqldump -u ç”¨æˆ·å -p æ•°æ®åº“å &gt; å¯¼å‡ºçš„æ–‡ä»¶å.sqlEnter password: ******mysqldump -u root -p database_name &gt; outfile.sqlEnter password: ******<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å¯¼å‡ºæ‰€æœ‰æ•°æ®åº“"><a href="#å¯¼å‡ºæ‰€æœ‰æ•°æ®åº“" class="headerlink" title="å¯¼å‡ºæ‰€æœ‰æ•°æ®åº“"></a>å¯¼å‡ºæ‰€æœ‰æ•°æ®åº“</h2><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysqldump  -uroot -p --all-databases &gt; outfile.sqlmysqldump  -uroot -p -A &gt; outfile.sql<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h2 id="å¯¼å‡ºä¸€ä¸ªæ•°æ®åº“ç»“æ„"><a href="#å¯¼å‡ºä¸€ä¸ªæ•°æ®åº“ç»“æ„" class="headerlink" title="å¯¼å‡ºä¸€ä¸ªæ•°æ®åº“ç»“æ„"></a>å¯¼å‡ºä¸€ä¸ªæ•°æ®åº“ç»“æ„</h2><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysqldump -u root -p -d â€“add-drop-table database_name &gt; outfile.sql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><code>-d</code> æ²¡æœ‰æ•°æ®, <code>â€“add-drop-table</code>åœ¨æ¯ä¸ª <code>CREATE</code> è¯­å¥ä¹‹å‰å¢åŠ ä¸€ä¸ª <code>DROP TABLE</code></p><h2 id="å¸¦è¯­è¨€å‚æ•°å¯¼å‡º"><a href="#å¸¦è¯­è¨€å‚æ•°å¯¼å‡º" class="headerlink" title="å¸¦è¯­è¨€å‚æ•°å¯¼å‡º"></a>å¸¦è¯­è¨€å‚æ•°å¯¼å‡º</h2><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysqldump -uroot -p â€“default-character-set&#x3D;latin1 â€“set-charset&#x3D;gbk â€“skip-opt database_name &gt; outfile.sql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="å¯¼å‡ºæ•°æ®è¡¨"><a href="#å¯¼å‡ºæ•°æ®è¡¨" class="headerlink" title="å¯¼å‡ºæ•°æ®è¡¨"></a>å¯¼å‡ºæ•°æ®è¡¨</h2><ol><li><p>å¯¼å‡ºæ•°æ®è¡¨å’Œè¡¨ç»“æ„</p><p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysqldump -u root -h ç™»å½•ä¸»æœº -p&#39;å¯†ç &#39; -Pç«¯å£å· æ•°æ®åº“å è¡¨å &gt; æ–‡ä»¶å.sql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p> å°†ç‰¹å®šæ•°æ®åº“ç‰¹å®šè¡¨ä¸­çš„æ•°æ®å’Œè¡¨æ ¼ç»“æ„å’Œæ•°æ®å…¨éƒ¨è¿”å›ã€‚</p><p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysqldump -u root -h localhost -p -P3306 database_name table &gt; table.sql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>å¯¼å‡ºè¡¨ç»“æ„å´ä¸å¯¼å‡ºè¡¨æ•°æ®</p><p> åªè¿”å›ç‰¹å®šæ•°æ®åº“ç‰¹å®šè¡¨æ ¼çš„è¡¨æ ¼ç»“æ„ï¼Œä¸è¿”å›æ•°æ®ï¼Œæ·»åŠ  <code>-d</code> å‘½ä»¤å‚æ•°ã€‚</p><p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysqldump -u root -h localhost -p -P3306 -d database_name table &gt; table.sql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>å¯¼å‡ºè¡¨ç»“æ„å’Œæ»¡è¶³ <code>WHERE</code> æ¡ä»¶çš„è¡¨æ•°æ®</p><p> åªè¿”å›ç‰¹å®šæ•°æ®åº“ä¸­ç‰¹å®šè¡¨çš„è¡¨æ ¼ç»“æ„å’Œæ»¡è¶³ç‰¹å®šæ¡ä»¶çš„æ•°æ®ã€‚</p><p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysqldump -u root -h localhost -p -P3306 database_name table -where&#x3D;&quot;time&gt;&#39;2017-01-01&#39;&quot; &gt; table.sql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p></li><li><p>å¯¼å‡ºæ•°æ®å´ä¸å¯¼å‡ºè¡¨ç»“æ„</p><p> åªè¿”å›ç‰¹å®šæ•°æ®åº“ä¸­ç‰¹å®šè¡¨æ ¼çš„æ•°æ®ï¼Œä¸è¿”å›è¡¨æ ¼ç»“æ„ï¼Œæ·»åŠ  <code>-t</code> å‘½ä»¤å‚æ•°ã€‚</p><p> <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mysqldump -u root -h localhost -p -t -P3306 database_name table &gt; table.sql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="å¯¼å…¥-SQL-æ–‡ä»¶"><a href="#å¯¼å…¥-SQL-æ–‡ä»¶" class="headerlink" title="å¯¼å…¥ SQL æ–‡ä»¶"></a>å¯¼å…¥ SQL æ–‡ä»¶</h2></li></ol><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">source <span class="token keyword">database</span><span class="token punctuation">.</span><span class="token keyword">sql</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ¬MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL æ•™ç¨‹</title>
      <link href="post/7f59cefa.html"/>
      <url>post/7f59cefa.html</url>
      
        <content type="html"><![CDATA[<h1 id="æœ¯è¯­"><a href="#æœ¯è¯­" class="headerlink" title="æœ¯è¯­"></a>æœ¯è¯­</h1><ul><li>æ•°æ®åº“: æ•°æ®åº“æ˜¯ä¸€äº›å…³è”è¡¨çš„é›†åˆã€‚</li><li>æ•°æ®è¡¨: è¡¨æ˜¯æ•°æ®çš„çŸ©é˜µã€‚åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­çš„è¡¨çœ‹èµ·æ¥åƒä¸€ä¸ªç®€å•çš„ç”µå­è¡¨æ ¼ã€‚</li><li>åˆ—: ä¸€åˆ—ï¼ˆæ•°æ®å…ƒç´ ï¼‰åŒ…å«äº†ç›¸åŒç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚é‚®æ”¿ç¼–ç çš„æ•°æ®ã€‚</li><li>è¡Œï¼šä¸€è¡Œï¼ˆå…ƒç»„ï¼Œæˆ–è®°å½•ï¼‰æ˜¯ä¸€ç»„ç›¸å…³çš„æ•°æ®ï¼Œä¾‹å¦‚ä¸€æ¡ç”¨æˆ·è®¢é˜…çš„æ•°æ®ã€‚</li><li>å†—ä½™ï¼šå­˜å‚¨ä¸¤å€æ•°æ®ï¼Œå†—ä½™é™ä½äº†æ€§èƒ½ï¼Œä½†æé«˜äº†æ•°æ®çš„å®‰å…¨æ€§ã€‚</li><li>ä¸»é”®ï¼šä¸»é”®æ˜¯å”¯ä¸€çš„ã€‚ä¸€ä¸ªæ•°æ®è¡¨ä¸­åªèƒ½åŒ…å«ä¸€ä¸ªä¸»é”®ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸»é”®æ¥æŸ¥è¯¢æ•°æ®ã€‚</li><li>å¤–é”®ï¼šå¤–é”®ç”¨äºå…³è”ä¸¤ä¸ªè¡¨ã€‚</li><li>å¤åˆé”®ï¼šå¤åˆé”®ï¼ˆç»„åˆé”®ï¼‰å°†å¤šä¸ªåˆ—ä½œä¸ºä¸€ä¸ªç´¢å¼•é”®ï¼Œä¸€èˆ¬ç”¨äºå¤åˆç´¢å¼•ã€‚</li><li>ç´¢å¼•ï¼šä½¿ç”¨ç´¢å¼•å¯å¿«é€Ÿè®¿é—®æ•°æ®åº“è¡¨ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚ç´¢å¼•æ˜¯å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼è¿›è¡Œæ’åºçš„ä¸€ç§ç»“æ„ã€‚ç±»ä¼¼äºä¹¦ç±çš„ç›®å½•ã€‚</li><li>å‚ç…§å®Œæ•´æ€§: å‚ç…§çš„å®Œæ•´æ€§è¦æ±‚å…³ç³»ä¸­ä¸å…è®¸å¼•ç”¨ä¸å­˜åœ¨çš„å®ä½“ã€‚ä¸å®ä½“å®Œæ•´æ€§æ˜¯å…³ç³»æ¨¡å‹å¿…é¡»æ»¡è¶³çš„å®Œæ•´æ€§çº¦æŸæ¡ä»¶ï¼Œç›®çš„æ˜¯ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</li></ul><h1 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h1><p>MySQL æ˜¯ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆRDBMSï¼‰ï¼Œç”±ç‘å…¸ MySQL AB å…¬å¸å¼€å‘ï¼Œç›®å‰å±äº Oracle å…¬å¸ã€‚MySQL æ˜¯ä¸€ç§å…³è”æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå…³è”æ•°æ®åº“å°†æ•°æ®ä¿å­˜åœ¨ä¸åŒçš„è¡¨ä¸­ï¼Œè€Œä¸æ˜¯å°†æ‰€æœ‰æ•°æ®æ”¾åœ¨ä¸€ä¸ªå¤§ä»“åº“å†…ï¼Œè¿™æ ·å°±å¢åŠ äº†é€Ÿåº¦å¹¶æé«˜äº†çµæ´»æ€§ã€‚</p><ul><li>MySQL æ˜¯å¼€æºçš„ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦æ”¯ä»˜é¢å¤–çš„è´¹ç”¨ã€‚</li><li>MySQL æ”¯æŒå¤§å‹çš„æ•°æ®åº“ã€‚å¯ä»¥å¤„ç†æ‹¥æœ‰ä¸Šåƒä¸‡æ¡è®°å½•çš„å¤§å‹æ•°æ®åº“ã€‚</li><li>MySQL ä½¿ç”¨æ ‡å‡†çš„ SQL æ•°æ®è¯­è¨€å½¢å¼ã€‚</li><li>MySQL å¯ä»¥è¿è¡Œäºå¤šä¸ªç³»ç»Ÿä¸Šï¼Œå¹¶ä¸”æ”¯æŒå¤šç§è¯­è¨€ã€‚è¿™äº›ç¼–ç¨‹è¯­è¨€åŒ…æ‹¬ Cã€C++ã€Pythonã€Javaã€Perlã€PHPã€Eiffelã€Ruby å’Œ Tcl ç­‰ã€‚</li><li>MySQL å¯¹PHPæœ‰å¾ˆå¥½çš„æ”¯æŒï¼ŒPHP æ˜¯ç›®å‰æœ€æµè¡Œçš„ Web å¼€å‘è¯­è¨€ã€‚</li><li>MySQL æ”¯æŒå¤§å‹æ•°æ®åº“ï¼Œæ”¯æŒ 5000 ä¸‡æ¡è®°å½•çš„æ•°æ®ä»“åº“ï¼Œ32 ä½ç³»ç»Ÿè¡¨æ–‡ä»¶æœ€å¤§å¯æ”¯æŒ 4GBï¼Œ64 ä½ç³»ç»Ÿæ”¯æŒæœ€å¤§çš„è¡¨æ–‡ä»¶ä¸º 8TBã€‚</li><li>MySQL æ˜¯å¯ä»¥å®šåˆ¶çš„ï¼Œé‡‡ç”¨äº† GPL åè®®ï¼Œä½ å¯ä»¥ä¿®æ”¹æºç æ¥å¼€å‘è‡ªå·±çš„ MySQL ç³»ç»Ÿã€‚</li></ul><h1 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h1><p>æ‚¨å¯ä»¥ä½¿ç”¨ MySQL äºŒè¿›åˆ¶æ–¹å¼è¿›å…¥åˆ° <code>mysql</code> å‘½ä»¤æç¤ºç¬¦ä¸‹æ¥è¿æ¥ MySQL æ•°æ®åº“ã€‚</p><p>ä»¥ä¸‹æ˜¯åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­è¿æ¥ MySQL æœåŠ¡å™¨çš„ç®€å•å®ä¾‹ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@host]# mysql -u root -pEnter password:******<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>åœ¨ç™»å½•æˆåŠŸåä¼šå‡ºç° <code>mysql&gt;</code> å‘½ä»¤æç¤ºçª—å£ï¼Œä½ å¯ä»¥åœ¨ä¸Šé¢æ‰§è¡Œä»»ä½• SQL è¯­å¥ã€‚</p><p>ä»¥ä¸Šå‘½ä»¤æ‰§è¡Œåï¼Œç™»å½•æˆåŠŸè¾“å‡ºç»“æœå¦‚ä¸‹:</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 2854760 to server version: 5.0.9Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the buffer.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>åœ¨ä»¥ä¸Šå®ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† <code>root</code> ç”¨æˆ·ç™»å½•åˆ° MySQL æœåŠ¡å™¨ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»– MySQL ç”¨æˆ·ç™»å½•ã€‚</p><p>å¦‚æœç”¨æˆ·æƒé™è¶³å¤Ÿï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥åœ¨ <code>mysql</code> çš„å‘½ä»¤æç¤ºçª—å£ä¸­è¿›è¡Œ SQL æ“ä½œã€‚</p><p>é€€å‡º <code>mysql&gt;</code> å‘½ä»¤æç¤ºçª—å£å¯ä»¥ä½¿ç”¨ <code>exit</code> å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">exit</span>Bye<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h1 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h1><p>æˆ‘ä»¬å¯ä»¥åœ¨ç™»é™† MySQL æœåŠ¡åï¼Œä½¿ç”¨ <code>CREATE DATABASE</code> å‘½ä»¤åˆ›å»ºæ•°æ®åº“ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> æ•°æ®åº“å<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="ä½¿ç”¨-CREATE-DATABASE-å‘½ä»¤"><a href="#ä½¿ç”¨-CREATE-DATABASE-å‘½ä»¤" class="headerlink" title="ä½¿ç”¨ CREATE DATABASE å‘½ä»¤"></a>ä½¿ç”¨ CREATE DATABASE å‘½ä»¤</h2><p>ä»¥ä¸‹å‘½ä»¤ç®€å•çš„æ¼”ç¤ºäº†åˆ›å»ºæ•°æ®åº“çš„è¿‡ç¨‹ï¼Œæ•°æ®åä¸º <code>TestDB</code>:</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@host]# mysql -u root -pEnter password:******  # ç™»å½•åè¿›å…¥ç»ˆç«¯<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> TestDB<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="ä½¿ç”¨-mysqladmin-åˆ›å»ºæ•°æ®åº“"><a href="#ä½¿ç”¨-mysqladmin-åˆ›å»ºæ•°æ®åº“" class="headerlink" title="ä½¿ç”¨ mysqladmin åˆ›å»ºæ•°æ®åº“"></a>ä½¿ç”¨ mysqladmin åˆ›å»ºæ•°æ®åº“</h2><p>ä½¿ç”¨æ™®é€šç”¨æˆ·ï¼Œä½ å¯èƒ½éœ€è¦ç‰¹å®šçš„æƒé™æ¥åˆ›å»ºæˆ–è€…åˆ é™¤ MySQL æ•°æ®åº“ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬è¿™è¾¹ä½¿ç”¨ <code>root</code> ç”¨æˆ·ç™»å½•ï¼Œ<code>root</code> ç”¨æˆ·æ‹¥æœ‰æœ€é«˜æƒé™ï¼Œå¯ä»¥ä½¿ç”¨ <code>mysql mysqladmin</code> å‘½ä»¤æ¥åˆ›å»ºæ•°æ®åº“ã€‚</p><p>ä»¥ä¸‹å‘½ä»¤ç®€å•çš„æ¼”ç¤ºäº†åˆ›å»ºæ•°æ®åº“çš„è¿‡ç¨‹ï¼Œæ•°æ®åä¸º TestDB:</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">[root@host]# mysqladmin -u root -p CREATE TestDBEnter password:******<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>ä»¥ä¸Šå‘½ä»¤æ‰§è¡ŒæˆåŠŸåä¼šåˆ›å»º MySQL æ•°æ®åº“ TestDBã€‚</p><h1 id="åˆ é™¤æ•°æ®åº“"><a href="#åˆ é™¤æ•°æ®åº“" class="headerlink" title="åˆ é™¤æ•°æ®åº“"></a>åˆ é™¤æ•°æ®åº“</h1><p>ä½¿ç”¨æ™®é€šç”¨æˆ·ç™»é™† MySQL æœåŠ¡å™¨ï¼Œä½ å¯èƒ½éœ€è¦ç‰¹å®šçš„æƒé™æ¥åˆ›å»ºæˆ–è€…åˆ é™¤ MySQL æ•°æ®åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™è¾¹ä½¿ç”¨ root ç”¨æˆ·ç™»å½•ï¼Œroot ç”¨æˆ·æ‹¥æœ‰æœ€é«˜æƒé™ã€‚</p><p>åœ¨åˆ é™¤æ•°æ®åº“è¿‡ç¨‹ä¸­ï¼ŒåŠ¡å¿…è¦ååˆ†è°¨æ…ï¼Œå› ä¸ºåœ¨æ‰§è¡Œåˆ é™¤å‘½ä»¤åï¼Œæ‰€æœ‰æ•°æ®å°†ä¼šæ¶ˆå¤±ã€‚</p><h2 id="ä½¿ç”¨-DROP-DATABASE-å‘½ä»¤"><a href="#ä½¿ç”¨-DROP-DATABASE-å‘½ä»¤" class="headerlink" title="ä½¿ç”¨ DROP DATABASE å‘½ä»¤"></a>ä½¿ç”¨ DROP DATABASE å‘½ä»¤</h2><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token operator">&lt;</span>æ•°æ®åº“å<span class="token operator">></span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä¾‹å¦‚åˆ é™¤åä¸º <code>TestDB</code> çš„æ•°æ®åº“ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> TestDB<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="ä½¿ç”¨-mysqladmin-åˆ é™¤æ•°æ®åº“"><a href="#ä½¿ç”¨-mysqladmin-åˆ é™¤æ•°æ®åº“" class="headerlink" title="ä½¿ç”¨ mysqladmin åˆ é™¤æ•°æ®åº“"></a>ä½¿ç”¨ mysqladmin åˆ é™¤æ•°æ®åº“</h2><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>mysqladmin</code> å‘½ä»¤åœ¨ç»ˆç«¯æ¥æ‰§è¡Œåˆ é™¤å‘½ä»¤ã€‚</p><p>ä»¥ä¸‹å®ä¾‹åˆ é™¤æ•°æ®åº“ TestDBï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token punctuation">[</span>root<span class="token variable">@host</span><span class="token punctuation">]</span><span class="token comment"># mysqladmin -u root -p DROP TestDB</span>Enter password:<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>æ‰§è¡Œä»¥ä¸Šåˆ é™¤æ•°æ®åº“å‘½ä»¤åï¼Œä¼šå‡ºç°ä¸€ä¸ªæç¤ºæ¡†ï¼Œæ¥ç¡®è®¤æ˜¯å¦çœŸçš„åˆ é™¤æ•°æ®åº“ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">Dropping the database is potentially a very bad thing to do.Any data stored in the database will be destroyed.Do you really want to drop the &#39;TestDB&#39; database [y&#x2F;N] yDatabase &quot;TestDB&quot; dropped<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="é€‰æ‹©æ•°æ®åº“"><a href="#é€‰æ‹©æ•°æ®åº“" class="headerlink" title="é€‰æ‹©æ•°æ®åº“"></a>é€‰æ‹©æ•°æ®åº“</h1><p>åœ¨ä½ è¿æ¥åˆ° MySQL æ•°æ®åº“åï¼Œå¯èƒ½æœ‰å¤šä¸ªå¯ä»¥æ“ä½œçš„æ•°æ®åº“ï¼Œæ‰€ä»¥ä½ éœ€è¦é€‰æ‹©ä½ è¦æ“ä½œçš„æ•°æ®åº“ã€‚</p><p>ä»å‘½ä»¤æç¤ºçª—å£ä¸­é€‰æ‹©MySQLæ•°æ®åº“</p><p>åœ¨ <code>mysql&gt;</code> æç¤ºçª—å£ä¸­å¯ä»¥å¾ˆç®€å•çš„é€‰æ‹©ç‰¹å®šçš„æ•°æ®åº“ã€‚ä½ å¯ä»¥ä½¿ç”¨SQLå‘½ä»¤æ¥é€‰æ‹©æŒ‡å®šçš„æ•°æ®åº“ã€‚</p><p>ä»¥ä¸‹å®ä¾‹é€‰å–äº†æ•°æ®åº“ <code>TestDB</code>:</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token punctuation">[</span>root<span class="token variable">@host</span><span class="token punctuation">]</span><span class="token comment"># mysql -u root -p</span>Enter password:<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>mysql<span class="token operator">></span> <span class="token keyword">use</span> TestDB<span class="token punctuation">;</span><span class="token keyword">Database</span> changedmysql<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åï¼Œä½ å°±å·²ç»æˆåŠŸé€‰æ‹©äº† TestDB æ•°æ®åº“ï¼Œåœ¨åç»­çš„æ“ä½œä¸­éƒ½ä¼šåœ¨ TestDB æ•°æ®åº“ä¸­æ‰§è¡Œã€‚</p><p>æ³¨æ„:æ‰€æœ‰çš„æ•°æ®åº“åï¼Œè¡¨åï¼Œè¡¨å­—æ®µéƒ½æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚æ‰€ä»¥ä½ åœ¨ä½¿ç”¨SQLå‘½ä»¤æ—¶éœ€è¦è¾“å…¥æ­£ç¡®çš„åç§°ã€‚</p><h1 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h1><p>MySQLä¸­å®šä¹‰æ•°æ®å­—æ®µçš„ç±»å‹å¯¹ä½ æ•°æ®åº“çš„ä¼˜åŒ–æ˜¯éå¸¸é‡è¦çš„ã€‚</p><p>MySQLæ”¯æŒå¤šç§ç±»å‹ï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼šæ•°å€¼ã€æ—¥æœŸ/æ—¶é—´å’Œå­—ç¬¦ä¸²(å­—ç¬¦)ç±»å‹ã€‚</p><h2 id="æ•°å€¼ç±»å‹"><a href="#æ•°å€¼ç±»å‹" class="headerlink" title="æ•°å€¼ç±»å‹"></a>æ•°å€¼ç±»å‹</h2><p>MySQLæ”¯æŒæ‰€æœ‰æ ‡å‡†SQLæ•°å€¼æ•°æ®ç±»å‹ã€‚</p><p>è¿™äº›ç±»å‹åŒ…æ‹¬ä¸¥æ ¼æ•°å€¼æ•°æ®ç±»å‹ï¼ˆ<code>INTEGER</code>ã€<code>SMALLINT</code>ã€<code>DECIMAL</code> å’Œ <code>NUMERIC</code>ï¼‰ï¼Œä»¥åŠè¿‘ä¼¼æ•°å€¼æ•°æ®ç±»å‹ï¼ˆ<code>FLOAT</code>ã€<code>REAL</code> å’Œ <code>DOUBLE PRECISION</code>ï¼‰ã€‚</p><p>å…³é”®å­— <code>INT</code> æ˜¯ <code>INTEGER</code> çš„åŒä¹‰è¯ï¼Œå…³é”®å­— <code>DEC</code> æ˜¯ <code>DECIMAL</code> çš„åŒä¹‰è¯ã€‚</p><p>BIT æ•°æ®ç±»å‹ä¿å­˜ä½å­—æ®µå€¼ï¼Œå¹¶ä¸”æ”¯æŒ MyISAMã€MEMORYã€InnoDB å’Œ BDB è¡¨ã€‚</p><p>ä½œä¸º SQL æ ‡å‡†çš„æ‰©å±•ï¼ŒMySQL ä¹Ÿæ”¯æŒæ•´æ•°ç±»å‹ <code>TINYINT</code>ã€<code>MEDIUMINT</code> å’Œ <code>BIGINT</code>ã€‚ä¸‹é¢çš„è¡¨æ˜¾ç¤ºäº†éœ€è¦çš„æ¯ä¸ªæ•´æ•°ç±»å‹çš„å­˜å‚¨å’ŒèŒƒå›´ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">ç±»å‹</th><th style="text-align:center">å¤§å°</th><th style="text-align:center">èŒƒå›´ï¼ˆæœ‰ç¬¦å·ï¼‰</th><th style="text-align:center">èŒƒå›´ï¼ˆæ— ç¬¦å·ï¼‰</th><th style="text-align:center">ç”¨é€”</th></tr></thead><tbody><tr><td style="text-align:center">TINYINT</td><td style="text-align:center">1 byte</td><td style="text-align:center">(-128ï¼Œ127)</td><td style="text-align:center">(0ï¼Œ255)</td><td style="text-align:center">å°æ•´æ•°å€¼</td></tr><tr><td style="text-align:center">SMALLINT</td><td style="text-align:center">2 bytes</td><td style="text-align:center">(-32 768ï¼Œ32 767)</td><td style="text-align:center">(0ï¼Œ65 535)</td><td style="text-align:center">å¤§æ•´æ•°å€¼</td></tr><tr><td style="text-align:center">MEDIUMINT</td><td style="text-align:center">3 bytes</td><td style="text-align:center">(-8 388 608ï¼Œ8 388 607)</td><td style="text-align:center">(0ï¼Œ16 777 215)</td><td style="text-align:center">å¤§æ•´æ•°å€¼</td></tr><tr><td style="text-align:center">INTæˆ–<br>INTEGER</td><td style="text-align:center">4 bytes</td><td style="text-align:center">(-2 147 483 648ï¼Œ2 147 483 647)</td><td style="text-align:center">(0ï¼Œ4 294 967 295)</td><td style="text-align:center">å¤§æ•´æ•°å€¼</td></tr><tr><td style="text-align:center">BIGINT</td><td style="text-align:center">8 bytes</td><td style="text-align:center">(-9 223 372 036 854 775 808ï¼Œ<br>9 223 372 036 854 775 807)</td><td style="text-align:center">(0ï¼Œ<br>18 446 744 073 709 551 615)</td><td style="text-align:center">æå¤§æ•´æ•°å€¼</td></tr><tr><td style="text-align:center">FLOAT</td><td style="text-align:center">4 bytes</td><td style="text-align:center">(-3.402 823 466 E+38ï¼Œ<br>-1.175 494 351 E-38)ï¼Œ<br>0ï¼Œ<br>(1.175 494 351 E-38ï¼Œ<br>3.402 823 466 351 E+38)</td><td style="text-align:center">0ï¼Œ<br>(1.175 494 351 E-38ï¼Œ<br>3.402 823 466 E+38)</td><td style="text-align:center">å•ç²¾åº¦æµ®ç‚¹æ•°å€¼</td></tr><tr><td style="text-align:center">DOUBLE</td><td style="text-align:center">8 bytes</td><td style="text-align:center">(-1.797 693 134 862 315 7 E+308ï¼Œ<br>-2.225 073 858 507 201 4 E-308)ï¼Œ<br>0ï¼Œ<br>(2.225 073 858 507 201 4 E-308ï¼Œ<br>1.797 693 134 862 315 7 E+308)</td><td style="text-align:center">0ï¼Œ<br>(2.225 073 858 507 201 4 E-308ï¼Œ<br>1.797 693 134 862 315 7 E+308)</td><td style="text-align:center">åŒç²¾åº¦æµ®ç‚¹æ•°å€¼</td></tr><tr><td style="text-align:center">DECIMAL</td><td style="text-align:center">DECIMAL(M, D)ï¼Œ<br>å¦‚æœ M&gt;Dï¼Œ<br>ä¸º M+2 ï¼Œå¦åˆ™ä¸º D+2</td><td style="text-align:center">ä¾èµ–äº M å’Œ D çš„å€¼</td><td style="text-align:center">ä¾èµ–äº M å’Œ D çš„å€¼</td><td style="text-align:center">å°æ•°å€¼</td></tr></tbody></table></div><h2 id="æ—¥æœŸå’Œæ—¶é—´ç±»å‹"><a href="#æ—¥æœŸå’Œæ—¶é—´ç±»å‹" class="headerlink" title="æ—¥æœŸå’Œæ—¶é—´ç±»å‹"></a>æ—¥æœŸå’Œæ—¶é—´ç±»å‹</h2><p>è¡¨ç¤ºæ—¶é—´å€¼çš„æ—¥æœŸå’Œæ—¶é—´ç±»å‹ä¸º <code>DATETIME</code>ã€<code>DATE</code>ã€<code>TIMESTAMP</code>ã€<code>TIME</code> å’Œ <code>YEAR</code>ã€‚</p><p>æ¯ä¸ªæ—¶é—´ç±»å‹æœ‰ä¸€ä¸ªæœ‰æ•ˆå€¼èŒƒå›´å’Œä¸€ä¸ªâ€œé›¶â€å€¼ï¼Œå½“æŒ‡å®šä¸åˆæ³•çš„ MySQL ä¸èƒ½è¡¨ç¤ºçš„å€¼æ—¶ä½¿ç”¨â€œé›¶â€å€¼ã€‚</p><p><code>TIMESTAMP</code> ç±»å‹æœ‰ä¸“æœ‰çš„è‡ªåŠ¨æ›´æ–°ç‰¹æ€§ï¼Œå°†åœ¨åé¢æè¿°ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">ç±»å‹</th><th style="text-align:center">å¤§å°</th><th style="text-align:center">èŒƒå›´</th><th style="text-align:center">æ ¼å¼</th><th style="text-align:center">ç”¨é€”</th></tr></thead><tbody><tr><td style="text-align:center">DATE</td><td style="text-align:center">3 bytes</td><td style="text-align:center">1000-01-01 /<br> 9999-12-31</td><td style="text-align:center">YYYY-MM-DD</td><td style="text-align:center">æ—¥æœŸå€¼</td></tr><tr><td style="text-align:center">TIME</td><td style="text-align:center">3 bytes</td><td style="text-align:center">&#39;-838:59:59&#39; /<br>&#39;838:59:59&#39;</td><td style="text-align:center">HH:MM:SS</td><td style="text-align:center">æ—¶é—´å€¼æˆ–æŒç»­æ—¶é—´</td></tr><tr><td style="text-align:center">YEAR</td><td style="text-align:center">1 bytes</td><td style="text-align:center">1901 / 2155</td><td style="text-align:center">YYYY</td><td style="text-align:center">å¹´ä»½å€¼</td></tr><tr><td style="text-align:center">DATETIME</td><td style="text-align:center">8 bytes</td><td style="text-align:center">1000-01-01 00:00:00 /<br>9999-12-31 23:59:59</td><td style="text-align:center">YYYY-MM-DD HH:MM:SS</td><td style="text-align:center">æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼</td></tr><tr><td style="text-align:center">TIMESTAMP</td><td style="text-align:center">4 bytes</td><td style="text-align:center">1970-01-01 00:00:00 /<br>ç»“æŸæ—¶é—´æ˜¯ç¬¬ 2147483647 ç§’ï¼Œ<br>åŒ—äº¬æ—¶é—´ 2038-1-19 11:14:07ï¼Œ<br>æ ¼æ—å°¼æ²»æ—¶é—´ 2038-1-19 03:14:07</td><td style="text-align:center">YYYYMMDD HHMMSS</td><td style="text-align:center">æ··åˆæ—¥æœŸå’Œæ—¶é—´å€¼ï¼Œæ—¶é—´æˆ³</td></tr></tbody></table></div><h2 id="å­—ç¬¦ä¸²ç±»å‹"><a href="#å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹"></a>å­—ç¬¦ä¸²ç±»å‹</h2><p>å­—ç¬¦ä¸²ç±»å‹æŒ‡ <code>CHAR</code>ã€<code>VARCHAR</code>ã€<code>BINARY</code>ã€<code>VARBINARY</code>ã€<code>BLOB</code>ã€<code>TEXT</code>ã€<code>ENUM</code> å’Œ <code>SET</code>ã€‚è¯¥èŠ‚æè¿°äº†è¿™äº›ç±»å‹å¦‚ä½•å·¥ä½œä»¥åŠå¦‚ä½•åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨è¿™äº›ç±»å‹ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">ç±»å‹</th><th style="text-align:center">å¤§å°</th><th style="text-align:center">ç”¨é€”</th></tr></thead><tbody><tr><td style="text-align:center">CHAR</td><td style="text-align:center">0-255 bytes</td><td style="text-align:center">å®šé•¿å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:center">VARCHAR</td><td style="text-align:center">0-65535 bytes</td><td style="text-align:center">å˜é•¿å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:center">TINYBLOB</td><td style="text-align:center">0-255 bytes</td><td style="text-align:center">ä¸è¶…è¿‡ 255 ä¸ªå­—ç¬¦çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:center">TINYTEXT</td><td style="text-align:center">0-255 bytes</td><td style="text-align:center">çŸ­æ–‡æœ¬å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:center">BLOB</td><td style="text-align:center">0-65 535 bytes</td><td style="text-align:center">äºŒè¿›åˆ¶å½¢å¼çš„é•¿æ–‡æœ¬æ•°æ®</td></tr><tr><td style="text-align:center">TEXT</td><td style="text-align:center">0-65 535 bytes</td><td style="text-align:center">é•¿æ–‡æœ¬æ•°æ®</td></tr><tr><td style="text-align:center">MEDIUMBLOB</td><td style="text-align:center">0-16 777 215 bytes</td><td style="text-align:center">äºŒè¿›åˆ¶å½¢å¼çš„ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®</td></tr><tr><td style="text-align:center">MEDIUMTEXT</td><td style="text-align:center">0-16 777 215 bytes</td><td style="text-align:center">ä¸­ç­‰é•¿åº¦æ–‡æœ¬æ•°æ®</td></tr><tr><td style="text-align:center">LONGBLOB</td><td style="text-align:center">0-4 294 967 295 bytes</td><td style="text-align:center">äºŒè¿›åˆ¶å½¢å¼çš„æå¤§æ–‡æœ¬æ•°æ®</td></tr><tr><td style="text-align:center">LONGTEXT</td><td style="text-align:center">0-4 294 967 295 bytes</td><td style="text-align:center">æå¤§æ–‡æœ¬æ•°æ®</td></tr></tbody></table></div><p><strong>æ³¨æ„ï¼š</strong></p><ul><li><p><code>char(n)</code> å’Œ <code>varchar(n)</code> ä¸­æ‹¬å·ä¸­ <code>n</code> ä»£è¡¨å­—ç¬¦çš„ä¸ªæ•°ï¼Œå¹¶ä¸ä»£è¡¨å­—èŠ‚ä¸ªæ•°ï¼Œæ¯”å¦‚ <code>CHAR(30)</code> å°±å¯ä»¥å­˜å‚¨ 30 ä¸ªå­—ç¬¦ã€‚</p></li><li><p><code>CHAR</code> å’Œ <code>VARCHAR</code> ç±»å‹ç±»ä¼¼ï¼Œä½†å®ƒä»¬ä¿å­˜å’Œæ£€ç´¢çš„æ–¹å¼ä¸åŒã€‚å®ƒä»¬çš„æœ€å¤§é•¿åº¦å’Œæ˜¯å¦å°¾éƒ¨ç©ºæ ¼è¢«ä¿ç•™ç­‰æ–¹é¢ä¹Ÿä¸åŒã€‚åœ¨å­˜å‚¨æˆ–æ£€ç´¢è¿‡ç¨‹ä¸­ä¸è¿›è¡Œå¤§å°å†™è½¬æ¢ã€‚</p></li><li><p><code>BINARY</code> å’Œ <code>VARBINARY</code> ç±»ä¼¼äº <code>CHAR</code> å’Œ <code>VARCHAR</code>ï¼Œä¸åŒçš„æ˜¯å®ƒä»¬åŒ…å«äºŒè¿›åˆ¶å­—ç¬¦ä¸²è€Œä¸è¦éäºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬åŒ…å«å­—èŠ‚å­—ç¬¦ä¸²è€Œä¸æ˜¯å­—ç¬¦å­—ç¬¦ä¸²ã€‚è¿™è¯´æ˜å®ƒä»¬æ²¡æœ‰å­—ç¬¦é›†ï¼Œå¹¶ä¸”æ’åºå’Œæ¯”è¾ƒåŸºäºåˆ—å€¼å­—èŠ‚çš„æ•°å€¼å€¼ã€‚</p></li><li><p><code>BLOB</code> æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼Œå¯ä»¥å®¹çº³å¯å˜æ•°é‡çš„æ•°æ®ã€‚æœ‰ 4 ç§ <code>BLOB</code> ç±»å‹ï¼š<code>TINYBLOB</code>ã€<code>BLOB</code>ã€<code>MEDIUMBLOB</code> å’Œ <code>LONGBLOB</code>ã€‚å®ƒä»¬åŒºåˆ«åœ¨äºå¯å®¹çº³å­˜å‚¨èŒƒå›´ä¸åŒã€‚</p></li><li><p>æœ‰ 4 ç§ <code>TEXT</code> ç±»å‹ï¼š<code>TINYTEXT</code>ã€<code>TEXT</code>ã€<code>MEDIUMTEXT</code> å’Œ <code>LONGTEXT</code>ã€‚å¯¹åº”çš„è¿™ 4 ç§ <code>BLOB</code> ç±»å‹ï¼Œå¯å­˜å‚¨çš„æœ€å¤§é•¿åº¦ä¸åŒï¼Œå¯æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ã€‚</p></li></ul><h1 id="åˆ›å»ºæ•°æ®è¡¨"><a href="#åˆ›å»ºæ•°æ®è¡¨" class="headerlink" title="åˆ›å»ºæ•°æ®è¡¨"></a>åˆ›å»ºæ•°æ®è¡¨</h1><p>åˆ›å»ºMySQLæ•°æ®è¡¨éœ€è¦ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li>è¡¨å</li><li>è¡¨å­—æ®µå</li><li>å®šä¹‰æ¯ä¸ªè¡¨å­—æ®µ</li></ul><h2 id="CREATE-TABLE-å‘½ä»¤"><a href="#CREATE-TABLE-å‘½ä»¤" class="headerlink" title="CREATE TABLE å‘½ä»¤"></a>CREATE TABLE å‘½ä»¤</h2><p>ä»¥ä¸‹ä¸ºåˆ›å»º MySQL æ•°æ®è¡¨çš„ SQL é€šç”¨è¯­æ³•ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name <span class="token punctuation">(</span>column_name column_type<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸‹ä¾‹å­ä¸­æˆ‘ä»¬å°†åœ¨ <code>TestDB</code> æ•°æ®åº“ä¸­åˆ›å»ºæ•°æ®è¡¨ <code>tbl</code>ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>tbl<span class="token punctuation">`</span><span class="token punctuation">(</span>   <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>   <span class="token punctuation">`</span>title<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>   <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>   <span class="token punctuation">`</span>submission_date<span class="token punctuation">`</span> <span class="token keyword">DATE</span><span class="token punctuation">,</span>   <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span> <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>å®ä¾‹è§£æï¼š</strong></p><ul><li>å¦‚æœä½ ä¸æƒ³å­—æ®µä¸º <code>NULL</code> å¯ä»¥è®¾ç½®å­—æ®µçš„å±æ€§ä¸º <code>NOT NULL</code>ï¼Œ åœ¨æ“ä½œæ•°æ®åº“æ—¶å¦‚æœè¾“å…¥è¯¥å­—æ®µçš„æ•°æ®ä¸º <code>NULL</code>ï¼Œå°±ä¼šæŠ¥é”™ã€‚</li><li><code>AUTO_INCREMENT</code> å®šä¹‰åˆ—ä¸ºè‡ªå¢çš„å±æ€§ï¼Œä¸€èˆ¬ç”¨äºä¸»é”®ï¼Œæ•°å€¼ä¼šè‡ªåŠ¨åŠ  1ã€‚</li><li><code>PRIMARY KEY</code> å…³é”®å­—ç”¨äºå®šä¹‰åˆ—ä¸ºä¸»é”®ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å¤šåˆ—æ¥å®šä¹‰ä¸»é”®ï¼Œåˆ—é—´ä»¥é€—å·åˆ†éš”ã€‚</li><li><code>ENGINE</code> è®¾ç½®å­˜å‚¨å¼•æ“ï¼Œ<code>CHARSET</code> è®¾ç½®ç¼–ç ã€‚</li></ul><h2 id="åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­åˆ›å»ºè¡¨"><a href="#åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­åˆ›å»ºè¡¨" class="headerlink" title="åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­åˆ›å»ºè¡¨"></a>åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­åˆ›å»ºè¡¨</h2><p>é€šè¿‡ <code>mysql&gt;</code> å‘½ä»¤çª—å£å¯ä»¥å¾ˆç®€å•çš„åˆ›å»ºMySQLæ•°æ®è¡¨ã€‚ä½ å¯ä»¥ä½¿ç”¨ SQL è¯­å¥ <code>CREATE TABLE</code> æ¥åˆ›å»ºæ•°æ®è¡¨ã€‚</p><p>ä»¥ä¸‹ä¸ºåˆ›å»ºæ•°æ®è¡¨ tbl å®ä¾‹:</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tbl<span class="token punctuation">(</span>    <span class="token operator">-</span><span class="token operator">></span> id <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> title <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> author <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> submission_date <span class="token keyword">DATE</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span> id <span class="token punctuation">)</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">)</span><span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.16</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„</strong>ï¼šMySQL å‘½ä»¤ç»ˆæ­¢ç¬¦ä¸ºåˆ†å· <code>;</code> ã€‚</p><h1 id="åˆ é™¤æ•°æ®è¡¨"><a href="#åˆ é™¤æ•°æ®è¡¨" class="headerlink" title="åˆ é™¤æ•°æ®è¡¨"></a>åˆ é™¤æ•°æ®è¡¨</h1><p>MySQLä¸­åˆ é™¤æ•°æ®è¡¨æ˜¯éå¸¸å®¹æ˜“æ“ä½œçš„ï¼Œ ä½†æ˜¯ä½ å†è¿›è¡Œåˆ é™¤è¡¨æ“ä½œæ—¶è¦éå¸¸å°å¿ƒï¼Œå› ä¸ºæ‰§è¡Œåˆ é™¤å‘½ä»¤åæ‰€æœ‰æ•°æ®éƒ½ä¼šæ¶ˆå¤±ã€‚</p><h2 id="DROP-TABLE-å‘½ä»¤"><a href="#DROP-TABLE-å‘½ä»¤" class="headerlink" title="DROP TABLE å‘½ä»¤"></a>DROP TABLE å‘½ä»¤</h2><p>ä»¥ä¸‹ä¸ºåˆ é™¤MySQLæ•°æ®è¡¨çš„é€šç”¨è¯­æ³•ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> table_name <span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­åˆ é™¤æ•°æ®è¡¨"><a href="#åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­åˆ é™¤æ•°æ®è¡¨" class="headerlink" title="åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­åˆ é™¤æ•°æ®è¡¨"></a>åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­åˆ é™¤æ•°æ®è¡¨</h2><p>åœ¨ <code>mysql&gt;</code> å‘½ä»¤æç¤ºçª—å£ä¸­åˆ é™¤æ•°æ®è¡¨ SQL è¯­å¥ä¸º DROP TABLEï¼š</p><p>ä»¥ä¸‹å®ä¾‹åˆ é™¤äº†æ•°æ®è¡¨ <code>tbl</code>:</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> tblQuery OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.8</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h1 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h1><p>MySQL è¡¨ä¸­ä½¿ç”¨ <code>INSERT INTO</code> è¯­å¥æ¥æ’å…¥æ•°æ®ã€‚</p><p>INSERT INTO å‘½ä»¤</p><p>ä»¥ä¸‹ä¸ºå‘ MySQL æ•°æ®è¡¨æ’å…¥æ•°æ®é€šç”¨çš„ <code>INSERT INTO</code> çš„ SQL è¯­æ³•ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name <span class="token punctuation">(</span> field1<span class="token punctuation">,</span> field2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>fieldN <span class="token punctuation">)</span>                       <span class="token keyword">VALUES</span>                       <span class="token punctuation">(</span> value1<span class="token punctuation">,</span> value2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>valueN <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>å¦‚æœæ•°æ®æ˜¯å­—ç¬¦å‹ï¼Œå¿…é¡»ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·ï¼Œå¦‚ï¼š<code>&quot;value&quot;</code>ã€‚</p><h2 id="é€šè¿‡å‘½ä»¤æç¤ºçª—å£æ’å…¥æ•°æ®"><a href="#é€šè¿‡å‘½ä»¤æç¤ºçª—å£æ’å…¥æ•°æ®" class="headerlink" title="é€šè¿‡å‘½ä»¤æç¤ºçª—å£æ’å…¥æ•°æ®"></a>é€šè¿‡å‘½ä»¤æç¤ºçª—å£æ’å…¥æ•°æ®</h2><p>ä»¥ä¸‹æˆ‘ä»¬å°†ä½¿ç”¨ <code>INSERT INTO</code> è¯­å¥å‘ MySQL æ•°æ®è¡¨ <code>tbl</code> æ’å…¥æ•°æ®</p><p>ä»¥ä¸‹å®ä¾‹ä¸­æˆ‘ä»¬å°†å‘ <code>tbl</code> è¡¨æ’å…¥ä¸‰æ¡æ•°æ®:</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tbl     <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span>title<span class="token punctuation">,</span> author<span class="token punctuation">,</span> submission_date<span class="token punctuation">)</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">VALUES</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token string">"å­¦ä¹  PHP"</span><span class="token punctuation">,</span> <span class="token string">"PHP"</span><span class="token punctuation">,</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> affected<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">warnings</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tbl    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span>title<span class="token punctuation">,</span> author<span class="token punctuation">,</span> submission_date<span class="token punctuation">)</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">VALUES</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token string">"å­¦ä¹  MySQL"</span><span class="token punctuation">,</span> <span class="token string">"MySQL"</span><span class="token punctuation">,</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> affected<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">warnings</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tbl    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span>title<span class="token punctuation">,</span> author<span class="token punctuation">,</span> submission_date<span class="token punctuation">)</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">VALUES</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token string">"å­¦ä¹  JAVA"</span><span class="token punctuation">,</span> <span class="token string">"JAVA"</span><span class="token punctuation">,</span> <span class="token string">'2021-01-01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tbl    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span>title<span class="token punctuation">,</span> author<span class="token punctuation">,</span> submission_date<span class="token punctuation">)</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">VALUES</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token string">"å­¦ä¹  Python"</span><span class="token punctuation">,</span> <span class="token string">"Python"</span><span class="token punctuation">,</span> <span class="token string">'2021-01-01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> affected<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">warnings</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨æ„</strong>ï¼šä½¿ç”¨ç®­å¤´æ ‡è®° <code>-&gt;</code> ä¸æ˜¯ SQL è¯­å¥çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä»…ä»…è¡¨ç¤ºä¸€ä¸ªæ–°è¡Œï¼Œå¦‚æœä¸€æ¡SQLè¯­å¥å¤ªé•¿ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å›è½¦é”®æ¥åˆ›å»ºä¸€ä¸ªæ–°è¡Œæ¥ç¼–å†™ SQL è¯­å¥ï¼ŒSQL è¯­å¥çš„å‘½ä»¤ç»“æŸç¬¦ä¸ºåˆ†å· <code>;</code>ã€‚</p><p>åœ¨ä»¥ä¸Šå®ä¾‹ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æä¾› <code>id</code> çš„æ•°æ®ï¼Œå› ä¸ºè¯¥å­—æ®µæˆ‘ä»¬åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å·²ç»è®¾ç½®å®ƒä¸º <code>AUTO_INCREMENT</code>(è‡ªåŠ¨å¢åŠ ) å±æ€§ã€‚ æ‰€ä»¥ï¼Œè¯¥å­—æ®µä¼šè‡ªåŠ¨é€’å¢è€Œä¸éœ€è¦æˆ‘ä»¬å»è®¾ç½®ã€‚å®ä¾‹ä¸­ <code>NOW()</code> æ˜¯ä¸€ä¸ª MySQL å‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›æ—¥æœŸå’Œæ—¶é—´ã€‚</p><h1 id="æŸ¥è¯¢æ•°æ®"><a href="#æŸ¥è¯¢æ•°æ®" class="headerlink" title="æŸ¥è¯¢æ•°æ®"></a>æŸ¥è¯¢æ•°æ®</h1><h2 id="SELECT-å‘½ä»¤"><a href="#SELECT-å‘½ä»¤" class="headerlink" title="SELECT å‘½ä»¤"></a>SELECT å‘½ä»¤</h2><p>MySQL æ•°æ®åº“ä½¿ç”¨ <code>SELECT</code> è¯­å¥æ¥æŸ¥è¯¢æ•°æ®ã€‚</p><p>ä»¥ä¸‹ä¸ºåœ¨ MySQL æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®é€šç”¨çš„ SELECT è¯­æ³•ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> column_name<span class="token punctuation">,</span> column_name<span class="token keyword">FROM</span> table_name<span class="token punctuation">[</span><span class="token keyword">WHERE</span> Clause<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">LIMIT</span> N<span class="token punctuation">]</span><span class="token punctuation">[</span> <span class="token keyword">OFFSET</span> M<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><ul><li>æŸ¥è¯¢è¯­å¥ä¸­ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¡¨ï¼Œè¡¨ä¹‹é—´ä½¿ç”¨é€—å· <code>,</code> åˆ†å‰²ï¼Œå¹¶ä½¿ç”¨ <code>WHERE</code> è¯­å¥æ¥è®¾å®šæŸ¥è¯¢æ¡ä»¶ã€‚</li><li><code>SELECT</code> å‘½ä»¤å¯ä»¥è¯»å–ä¸€æ¡æˆ–è€…å¤šæ¡è®°å½•ã€‚</li><li>ä½ å¯ä»¥ä½¿ç”¨æ˜Ÿå· <code>*</code> æ¥ä»£æ›¿å…¶ä»–å­—æ®µï¼Œ<code>SELECT</code> è¯­å¥ä¼šè¿”å›è¡¨çš„æ‰€æœ‰å­—æ®µæ•°æ®ã€‚</li><li>ä½ å¯ä»¥ä½¿ç”¨ <code>WHERE</code> è¯­å¥æ¥åŒ…å«ä»»ä½•æ¡ä»¶ã€‚</li><li>ä½ å¯ä»¥ä½¿ç”¨ <code>LIMIT</code> å±æ€§æ¥è®¾å®šè¿”å›çš„è®°å½•æ•°ã€‚</li><li>ä½ å¯ä»¥é€šè¿‡ <code>OFFSET</code> æŒ‡å®š <code>SELECT</code> è¯­å¥å¼€å§‹æŸ¥è¯¢çš„æ•°æ®åç§»é‡ã€‚é»˜è®¤æƒ…å†µä¸‹åç§»é‡ä¸º 0ã€‚</li></ul><h2 id="åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­è·å–æ•°æ®"><a href="#åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­è·å–æ•°æ®" class="headerlink" title="åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­è·å–æ•°æ®"></a>åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­è·å–æ•°æ®</h2><p>ä»¥ä¸‹å®ä¾‹æˆ‘ä»¬å°†é€šè¿‡ <code>SELECT</code> å‘½ä»¤æ¥è·å–æ•°æ®è¡¨ <code>tbl</code> çš„æ•°æ®ï¼š</p><p>è¯»å–æ•°æ®è¡¨ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>è¾“å‡ºç»“æœï¼š<pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token operator">|</span> id <span class="token operator">|</span> title       <span class="token operator">|</span> author <span class="token operator">|</span> submission_date <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> å­¦ä¹  PHP    <span class="token operator">|</span> PHP    <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> å­¦ä¹  MySQL  <span class="token operator">|</span> MySQL  <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> å­¦ä¹  JAVA   <span class="token operator">|</span> JAVA   <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> å­¦ä¹  Python <span class="token operator">|</span> Python <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>      <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="WHERE-å­å¥"><a href="#WHERE-å­å¥" class="headerlink" title="WHERE å­å¥"></a>WHERE å­å¥</h1><h2 id="WHERE-å­å¥è¯­æ³•"><a href="#WHERE-å­å¥è¯­æ³•" class="headerlink" title="WHERE å­å¥è¯­æ³•"></a>WHERE å­å¥è¯­æ³•</h2><p>æˆ‘ä»¬çŸ¥é“ä» MySQL è¡¨ä¸­ä½¿ç”¨ <code>SELECT</code> è¯­å¥æ¥è¯»å–æ•°æ®ã€‚</p><p>å¦‚éœ€æœ‰æ¡ä»¶åœ°ä»è¡¨ä¸­é€‰å–æ•°æ®ï¼Œå¯å°† <code>WHERE</code> å­å¥æ·»åŠ åˆ° <code>SELECT</code> è¯­å¥ä¸­ã€‚</p><p>è¯­æ³•</p><p>ä»¥ä¸‹æ˜¯ <code>SELECT</code> è¯­å¥ä½¿ç”¨ <code>WHERE</code> å­å¥ä»æ•°æ®è¡¨ä¸­è¯»å–æ•°æ®çš„é€šç”¨è¯­æ³•ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> field1<span class="token punctuation">,</span> field2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>fieldN <span class="token keyword">FROM</span> table_name1<span class="token punctuation">,</span> table_name2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition1 <span class="token punctuation">[</span><span class="token operator">AND</span> <span class="token punctuation">[</span><span class="token operator">OR</span><span class="token punctuation">]</span><span class="token punctuation">]</span> condition2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><ul><li>æŸ¥è¯¢è¯­å¥ä¸­ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¡¨ï¼Œè¡¨ä¹‹é—´ä½¿ç”¨é€—å·, åˆ†å‰²ï¼Œå¹¶ä½¿ç”¨ <code>WHERE</code> è¯­å¥æ¥è®¾å®šæŸ¥è¯¢æ¡ä»¶ã€‚</li><li>ä½ å¯ä»¥åœ¨ <code>WHERE</code> å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶ã€‚</li><li>ä½ å¯ä»¥ä½¿ç”¨ <code>AND</code> æˆ–è€… <code>OR</code> æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ã€‚</li><li><code>WHERE</code> å­å¥ä¹Ÿå¯ä»¥è¿ç”¨äº SQL çš„ <code>DELETE</code> æˆ–è€… <code>UPDATE</code> å‘½ä»¤ã€‚</li><li><code>WHERE</code> å­å¥ç±»ä¼¼äºç¨‹åºè¯­è¨€ä¸­çš„ <code>if</code> æ¡ä»¶ï¼Œæ ¹æ® MySQL è¡¨ä¸­çš„å­—æ®µå€¼æ¥è¯»å–æŒ‡å®šçš„æ•°æ®ã€‚</li></ul><p>ä»¥ä¸‹ä¸ºæ“ä½œç¬¦åˆ—è¡¨ï¼Œå¯ç”¨äº <code>WHERE</code> å­å¥ä¸­ã€‚</p><p>ä¸‹è¡¨ä¸­å®ä¾‹å‡å®š A ä¸º 10, B ä¸º 20</p><div class="table-container"><table><thead><tr><th style="text-align:center">æ“ä½œç¬¦</th><th style="text-align:center">æè¿°</th><th style="text-align:center">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">=</td><td style="text-align:center">ç­‰å·ï¼Œæ£€æµ‹ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œ<br>å¦‚æœç›¸ç­‰è¿”å›true</td><td style="text-align:center">(A = B) è¿”å›falseã€‚</td></tr><tr><td style="text-align:center">&lt;&gt;, !=</td><td style="text-align:center">ä¸ç­‰äºï¼Œæ£€æµ‹ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œ<br>å¦‚æœä¸ç›¸ç­‰è¿”å›true</td><td style="text-align:center">(A != B) è¿”å› trueã€‚</td></tr><tr><td style="text-align:center">&gt;</td><td style="text-align:center">å¤§äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å¤§äºå³è¾¹çš„å€¼, <br>å¦‚æœå·¦è¾¹çš„å€¼å¤§äºå³è¾¹çš„å€¼è¿”å›true</td><td style="text-align:center">(A &gt; B) è¿”å›falseã€‚</td></tr><tr><td style="text-align:center">&lt;</td><td style="text-align:center">å°äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å°äºå³è¾¹çš„å€¼, <br>å¦‚æœå·¦è¾¹çš„å€¼å°äºå³è¾¹çš„å€¼è¿”å›true</td><td style="text-align:center">(A &lt; B) è¿”å› trueã€‚</td></tr><tr><td style="text-align:center">&gt;=</td><td style="text-align:center">å¤§äºç­‰äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å¤§äºæˆ–ç­‰äºå³è¾¹çš„å€¼, <br>å¦‚æœå·¦è¾¹çš„å€¼å¤§äºæˆ–ç­‰äºå³è¾¹çš„å€¼è¿”å›true</td><td style="text-align:center">(A &gt;= B) è¿”å›falseã€‚</td></tr><tr><td style="text-align:center">&lt;=</td><td style="text-align:center">å°äºç­‰äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å°äºæˆ–ç­‰äºå³è¾¹çš„å€¼, <br>å¦‚æœå·¦è¾¹çš„å€¼å°äºæˆ–ç­‰äºå³è¾¹çš„å€¼è¿”å›true</td><td style="text-align:center">(A &lt;= B) è¿”å› trueã€‚</td></tr></tbody></table></div><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨ MySQL æ•°æ®è¡¨ä¸­è¯»å–æŒ‡å®šçš„æ•°æ®ï¼Œ<code>WHERE</code> å­å¥æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><p>ä½¿ç”¨ä¸»é”®æ¥ä½œä¸º <code>WHERE</code> å­å¥çš„æ¡ä»¶æŸ¥è¯¢æ˜¯éå¸¸å¿«é€Ÿçš„ã€‚</p><p>å¦‚æœç»™å®šçš„æ¡ä»¶åœ¨è¡¨ä¸­æ²¡æœ‰ä»»ä½•åŒ¹é…çš„è®°å½•ï¼Œé‚£ä¹ˆæŸ¥è¯¢ä¸ä¼šè¿”å›ä»»ä½•æ•°æ®ã€‚</p><h2 id="BINARY-å…³é”®å­—"><a href="#BINARY-å…³é”®å­—" class="headerlink" title="BINARY å…³é”®å­—"></a>BINARY å…³é”®å­—</h2><p>MySQL çš„ <code>WHERE</code> å­å¥çš„å­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ã€‚ ä½ å¯ä»¥ä½¿ç”¨ <code>BINARY</code> å…³é”®å­—æ¥è®¾å®š <code>WHERE</code> å­å¥çš„å­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl <span class="token keyword">WHERE</span> <span class="token keyword">BINARY</span> author<span class="token operator">=</span><span class="token string">'mysql'</span><span class="token punctuation">;</span>Empty <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl <span class="token keyword">WHERE</span> <span class="token keyword">BINARY</span> author<span class="token operator">=</span><span class="token string">'MySQL'</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+------------+--------+-----------------+</span><span class="token operator">|</span> id <span class="token operator">|</span> title      <span class="token operator">|</span> author <span class="token operator">|</span> submission_date <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------------+--------+-----------------+</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> å­¦ä¹  MySQL <span class="token operator">|</span> MySQL  <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------------+--------+-----------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å®ä¾‹ä¸­ä½¿ç”¨äº† <code>BINARY</code> å…³é”®å­—ï¼Œæ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œæ‰€ä»¥ <code>author=&#39;mysql&#39;</code> çš„æŸ¥è¯¢æ¡ä»¶æ˜¯æ²¡æœ‰æ•°æ®çš„ã€‚</p><h1 id="UPDATE-æ›´æ–°"><a href="#UPDATE-æ›´æ–°" class="headerlink" title="UPDATE æ›´æ–°"></a>UPDATE æ›´æ–°</h1><p>å¦‚æœæˆ‘ä»¬éœ€è¦ä¿®æ”¹æˆ–æ›´æ–° MySQL ä¸­çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>UPDATE</code> å‘½ä»¤æ¥æ“ä½œã€‚</p><p>ä»¥ä¸‹æ˜¯ <code>UPDATE</code> å‘½ä»¤ä¿®æ”¹ MySQL æ•°æ®è¡¨æ•°æ®çš„é€šç”¨ SQL è¯­æ³•ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">UPDATE</span> table_name <span class="token keyword">SET</span> field1<span class="token operator">=</span>new<span class="token operator">-</span>value1<span class="token punctuation">,</span> field2<span class="token operator">=</span>new<span class="token operator">-</span>value2<span class="token punctuation">[</span><span class="token keyword">WHERE</span> Clause<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><ul><li>ä½ å¯ä»¥åŒæ—¶æ›´æ–°ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µã€‚</li><li>ä½ å¯ä»¥åœ¨ <code>WHERE</code> å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶ã€‚</li><li>ä½ å¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬è¡¨ä¸­åŒæ—¶æ›´æ–°æ•°æ®ã€‚</li><li>å½“ä½ éœ€è¦æ›´æ–°æ•°æ®è¡¨ä¸­æŒ‡å®šè¡Œçš„æ•°æ®æ—¶ <code>WHERE</code> å­å¥æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li></ul><p>åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­æ›´æ–°æ•°æ®</p><p>ä»¥ä¸‹æˆ‘ä»¬å°†åœ¨ <code>UPDATE</code> å‘½ä»¤ä½¿ç”¨ <code>WHERE</code> å­å¥æ¥æ›´æ–° <code>tbl</code> è¡¨ä¸­æŒ‡å®šçš„æ•°æ®ï¼š</p><p>ä»¥ä¸‹å®ä¾‹å°†æ›´æ–°æ•°æ®è¡¨ä¸­ <code>id</code> ä¸º <code>3</code> çš„ <code>title</code> å­—æ®µå€¼ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">UPDATE</span> tbl <span class="token keyword">SET</span> title<span class="token operator">=</span><span class="token string">'å­¦ä¹  C++'</span> <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span> mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl <span class="token keyword">WHERE</span> id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+----------+--------+-----------------+</span><span class="token operator">|</span> id <span class="token operator">|</span> title    <span class="token operator">|</span> author <span class="token operator">|</span> submission_date <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+----------+--------+-----------------+</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> å­¦ä¹  C<span class="token operator">+</span><span class="token operator">+</span> <span class="token operator">|</span> JAVA   <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>      <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+----------+--------+-----------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä»ç»“æœä¸Šçœ‹ï¼Œ<code>id</code> ä¸º <code>3</code> çš„ <code>title</code> å·²è¢«ä¿®æ”¹ã€‚</p><h1 id="DELETE-è¯­å¥"><a href="#DELETE-è¯­å¥" class="headerlink" title="DELETE è¯­å¥"></a>DELETE è¯­å¥</h1><h2 id="DELETE-FROM-å‘½ä»¤"><a href="#DELETE-FROM-å‘½ä»¤" class="headerlink" title="DELETE FROM å‘½ä»¤"></a>DELETE FROM å‘½ä»¤</h2><p>ä½ å¯ä»¥ä½¿ç”¨ SQL çš„ <code>DELETE FROM</code> å‘½ä»¤æ¥åˆ é™¤ MySQL æ•°æ®è¡¨ä¸­çš„è®°å½•ã€‚</p><p>ä»¥ä¸‹æ˜¯ SQL DELETE è¯­å¥ä» MySQL æ•°æ®è¡¨ä¸­åˆ é™¤æ•°æ®çš„é€šç”¨è¯­æ³•ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name <span class="token punctuation">[</span><span class="token keyword">WHERE</span> Clause<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><ul><li>å¦‚æœæ²¡æœ‰æŒ‡å®š <code>WHERE</code> å­å¥ï¼ŒMySQL è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å°†è¢«åˆ é™¤ã€‚</li><li>ä½ å¯ä»¥åœ¨ <code>WHERE</code> å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶</li><li>æ‚¨å¯ä»¥åœ¨å•ä¸ªè¡¨ä¸­ä¸€æ¬¡æ€§åˆ é™¤è®°å½•ã€‚</li></ul><p>å½“ä½ æƒ³åˆ é™¤æ•°æ®è¡¨ä¸­æŒ‡å®šçš„è®°å½•æ—¶ <code>WHERE</code> å­å¥æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><h2 id="åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­åˆ é™¤æ•°æ®"><a href="#åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­åˆ é™¤æ•°æ®" class="headerlink" title="åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­åˆ é™¤æ•°æ®"></a>åœ¨å‘½ä»¤æç¤ºçª—å£ä¸­åˆ é™¤æ•°æ®</h2><p>è¿™é‡Œæˆ‘ä»¬å°†åœ¨ <code>DELETE</code> å‘½ä»¤ä¸­ä½¿ç”¨ <code>WHERE</code> å­å¥æ¥åˆ é™¤ MySQL æ•°æ®è¡¨ tbl æ‰€é€‰çš„æ•°æ®ã€‚</p><p>ä»¥ä¸‹å®ä¾‹å°†åˆ é™¤ tbl è¡¨ä¸­ id ä¸º3 çš„è®°å½•ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> tbl <span class="token keyword">WHERE</span> id<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.23</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h2 id="å¤šè¡¨è¿æ¥åˆ é™¤"><a href="#å¤šè¡¨è¿æ¥åˆ é™¤" class="headerlink" title="å¤šè¡¨è¿æ¥åˆ é™¤"></a>å¤šè¡¨è¿æ¥åˆ é™¤</h2><p>åœ¨ MySQL ä¸­å¯ä»¥åŒæ—¶åˆ é™¤ä¸¤ä¸ªè¡¨ä»¥ä¸Šçš„æ•°æ®ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DELETE</span> orders<span class="token punctuation">,</span> items <span class="token keyword">FROM</span> orders<span class="token punctuation">,</span> items <span class="token keyword">WHERE</span> orders<span class="token punctuation">.</span>userid <span class="token operator">=</span> items<span class="token punctuation">.</span>userid <span class="token operator">AND</span> orders<span class="token punctuation">.</span>orderid <span class="token operator">=</span> items<span class="token punctuation">.</span>orderid <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><h1 id="LIKE-å­å¥"><a href="#LIKE-å­å¥" class="headerlink" title="LIKE å­å¥"></a>LIKE å­å¥</h1><p>æˆ‘ä»¬çŸ¥é“åœ¨ MySQL ä¸­ä½¿ç”¨ <code>SELECT</code> å‘½ä»¤æ¥è¯»å–æ•°æ®ï¼Œ åŒæ—¶æˆ‘ä»¬å¯ä»¥åœ¨ <code>SELECT</code> è¯­å¥ä¸­ä½¿ç”¨ <code>WHERE</code> å­å¥æ¥è·å–æŒ‡å®šçš„è®°å½•ã€‚</p><p><code>WHERE</code> å­å¥ä¸­å¯ä»¥ä½¿ç”¨ç­‰å· <code>=</code> æ¥è®¾å®šè·å–æ•°æ®çš„æ¡ä»¶ï¼Œå¦‚ <code>author = &#39;MySQL&#39;</code>ã€‚</p><p>ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è·å– <code>author</code> å­—æ®µå«æœ‰ <code>P</code> å­—ç¬¦çš„æ‰€æœ‰è®°å½•ï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦åœ¨ <code>WHERE</code> å­å¥ä¸­ä½¿ç”¨ <code>LIKE</code> å­å¥ã€‚</p><p><code>LIKE</code> å­å¥ä¸­ä½¿ç”¨ç™¾åˆ†å· <code>%</code> å­—ç¬¦æ¥è¡¨ç¤ºä»»æ„å­—ç¬¦ï¼Œç±»ä¼¼äº <code>UNIX</code> æˆ–æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„æ˜Ÿå· <code>*</code>ã€‚</p><p>å¦‚æœæ²¡æœ‰ä½¿ç”¨ç™¾åˆ†å· <code>%</code>, <code>LIKE</code> å­å¥ä¸ç­‰å· = çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p><h2 id="LIKE-å­å¥è¯­æ³•"><a href="#LIKE-å­å¥è¯­æ³•" class="headerlink" title="LIKE å­å¥è¯­æ³•"></a>LIKE å­å¥è¯­æ³•</h2><p>ä»¥ä¸‹æ˜¯ SELECT è¯­å¥ä½¿ç”¨ <code>LIKE</code> å­å¥ä»æ•°æ®è¡¨ä¸­è¯»å–æ•°æ®çš„é€šç”¨è¯­æ³•ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> field1<span class="token punctuation">,</span> field2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>fieldN <span class="token keyword">FROM</span> table_name<span class="token keyword">WHERE</span> field1 <span class="token operator">LIKE</span> condition1 <span class="token punctuation">[</span><span class="token operator">AND</span> <span class="token punctuation">[</span><span class="token operator">OR</span><span class="token punctuation">]</span><span class="token punctuation">]</span> filed2 <span class="token operator">=</span> <span class="token string">'somevalue'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><ul><li>ä½ å¯ä»¥åœ¨ <code>WHERE</code> å­å¥ä¸­æŒ‡å®šä»»ä½•æ¡ä»¶ã€‚</li><li>ä½ å¯ä»¥åœ¨ <code>WHERE</code> å­å¥ä¸­ä½¿ç”¨ <code>LIKE</code> å­å¥ã€‚</li><li>ä½ å¯ä»¥ä½¿ç”¨ <code>LIKE</code> å­å¥ä»£æ›¿ç­‰å· <code>=</code>ã€‚</li><li><code>LIKE</code> é€šå¸¸ä¸ <code>%</code> ä¸€åŒä½¿ç”¨ï¼Œç±»ä¼¼äºä¸€ä¸ªå…ƒå­—ç¬¦çš„æœç´¢ã€‚</li><li>ä½ å¯ä»¥ä½¿ç”¨ <code>AND</code> æˆ–è€… <code>OR</code> æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ã€‚</li><li>ä½ å¯ä»¥åœ¨ <code>DELETE</code> æˆ– <code>UPDATE</code> å‘½ä»¤ä¸­ä½¿ç”¨ <code>WHERE...LIKE</code> å­å¥æ¥æŒ‡å®šæ¡ä»¶ã€‚</li></ul><h2 id="åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨-LIKE-å­å¥"><a href="#åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨-LIKE-å­å¥" class="headerlink" title="åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ LIKE å­å¥"></a>åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ LIKE å­å¥</h2><p>ä»¥ä¸‹æˆ‘ä»¬å°†åœ¨ <code>SELECT</code> å‘½ä»¤ä¸­ä½¿ç”¨ <code>WHERE...LIKE</code> å­å¥æ¥ä» MySQL æ•°æ®è¡¨ <code>tbl</code> ä¸­è¯»å–æ•°æ®ã€‚</p><p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬å°† <code>tbl</code> è¡¨ä¸­è·å– <code>author</code> å­—æ®µä¸­ä»¥ P ä¸ºå¼€å¤´çš„æ‰€æœ‰è®°å½•ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl  <span class="token keyword">WHERE</span> author <span class="token operator">LIKE</span> <span class="token string">'P%'</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token operator">|</span> id <span class="token operator">|</span> title       <span class="token operator">|</span> author <span class="token operator">|</span> submission_date <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> å­¦ä¹  PHP    <span class="token operator">|</span> PHP    <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> å­¦ä¹  Python <span class="token operator">|</span> Python <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>      <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="UNION-æ“ä½œç¬¦"><a href="#UNION-æ“ä½œç¬¦" class="headerlink" title="UNION æ“ä½œç¬¦"></a>UNION æ“ä½œç¬¦</h1><p>ä¸‹é¢ä¸ºå¤§å®¶ä»‹ç» MySQL <code>UNION</code> æ“ä½œç¬¦çš„è¯­æ³•å’Œå®ä¾‹ã€‚</p><p>MySQL <code>UNION</code> æ“ä½œç¬¦ç”¨äºè¿æ¥ä¸¤ä¸ªä»¥ä¸Šçš„ <code>SELECT</code> è¯­å¥çš„ç»“æœç»„åˆåˆ°ä¸€ä¸ªç»“æœé›†åˆä¸­ã€‚å¤šä¸ª <code>SELECT</code> è¯­å¥ä¼šåˆ é™¤é‡å¤çš„æ•°æ®ã€‚</p><h2 id="UNION-æ“ä½œç¬¦è¯­æ³•"><a href="#UNION-æ“ä½œç¬¦è¯­æ³•" class="headerlink" title="UNION æ“ä½œç¬¦è¯­æ³•"></a>UNION æ“ä½œç¬¦è¯­æ³•</h2><p>MySQL <code>UNION</code> æ“ä½œç¬¦è¯­æ³•æ ¼å¼ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n<span class="token keyword">FROM</span> <span class="token keyword">tables</span><span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span><span class="token keyword">UNION</span> <span class="token punctuation">[</span><span class="token keyword">ALL</span> <span class="token operator">|</span> <span class="token keyword">DISTINCT</span><span class="token punctuation">]</span><span class="token keyword">SELECT</span> expression1<span class="token punctuation">,</span> expression2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> expression_n<span class="token keyword">FROM</span> <span class="token keyword">tables</span><span class="token punctuation">[</span><span class="token keyword">WHERE</span> conditions<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å‚æ•°</p><ul><li><strong>expression1, expression2, ... expression_n</strong>: è¦æ£€ç´¢çš„åˆ—ã€‚</li><li><strong>tables</strong>: è¦æ£€ç´¢çš„æ•°æ®è¡¨ã€‚</li><li><strong>WHERE conditions</strong>: å¯é€‰ï¼Œæ£€ç´¢æ¡ä»¶ã€‚</li><li><strong>DISTINCT</strong>: å¯é€‰ï¼Œåˆ é™¤ç»“æœé›†ä¸­é‡å¤çš„æ•°æ®ã€‚é»˜è®¤æƒ…å†µä¸‹ <code>UNION</code> æ“ä½œç¬¦å·²ç»åˆ é™¤äº†é‡å¤æ•°æ®ï¼Œæ‰€ä»¥ <code>DISTINCT</code> ä¿®é¥°ç¬¦å¯¹ç»“æœæ²¡å•¥å½±å“ã€‚</li><li><strong>ALL</strong>: å¯é€‰ï¼Œè¿”å›æ‰€æœ‰ç»“æœé›†ï¼ŒåŒ…å«é‡å¤æ•°æ®ã€‚</li></ul><p>æ¼”ç¤ºæ•°æ®åº“</p><p>ä¸‹é¢æ˜¯é€‰è‡ª <code>Websites</code> è¡¨çš„æ•°æ®ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Websites<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+--------------+---------------------------+-------+---------+</span><span class="token operator">|</span> id <span class="token operator">|</span> name         <span class="token operator">|</span> url                       <span class="token operator">|</span> alexa <span class="token operator">|</span> country <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+--------------+---------------------------+-------+---------+</span><span class="token operator">|</span> <span class="token number">1</span>  <span class="token operator">|</span> Google       <span class="token operator">|</span> https:<span class="token comment">//www.google.cm/    | 1     | USA     |</span><span class="token operator">|</span> <span class="token number">2</span>  <span class="token operator">|</span> æ·˜å®          <span class="token operator">|</span> https:<span class="token comment">//www.taobao.com/   | 13    | CN      |</span><span class="token operator">|</span> <span class="token number">3</span>  <span class="token operator">|</span> å¾®åš          <span class="token operator">|</span> https:<span class="token comment">//weibo.com/         | 20    | CN      |</span><span class="token operator">|</span> <span class="token number">4</span>  <span class="token operator">|</span> Facebook     <span class="token operator">|</span> https:<span class="token comment">//www.facebook.com/ | 3     | USA     |</span><span class="token operator">|</span> <span class="token number">5</span>  <span class="token operator">|</span> stackoverflow <span class="token operator">|</span> https:<span class="token comment">//stackoverflow.com/ |   0 | IND     |</span><span class="token operator">+</span><span class="token comment">----+---------------+---------------------------+-------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä¸‹é¢æ˜¯ <code>apps</code> è¡¨çš„æ•°æ®ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> apps<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+------------+-------------------------+---------+</span><span class="token operator">|</span> id <span class="token operator">|</span> app_name   <span class="token operator">|</span> url                     <span class="token operator">|</span> country <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------------+-------------------------+---------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> QQ APP     <span class="token operator">|</span> https:<span class="token comment">//im.qq.com/       | CN      |</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> å¾®åš APP <span class="token operator">|</span> https:<span class="token comment">//weibo.com/       | CN      |</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> æ·˜å® APP <span class="token operator">|</span> https:<span class="token comment">//www.taobao.com/ | CN      |</span><span class="token operator">+</span><span class="token comment">----+------------+-------------------------+---------+</span><span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨-UNION-æ“ä½œç¬¦"><a href="#åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨-UNION-æ“ä½œç¬¦" class="headerlink" title="åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ UNION æ“ä½œç¬¦"></a>åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ UNION æ“ä½œç¬¦</h2><p>ä¸‹é¢çš„ SQL è¯­å¥ä» <code>Websites</code> å’Œ <code>apps</code> è¡¨ä¸­é€‰å–æ‰€æœ‰ä¸åŒçš„ <code>country</code>ï¼ˆåªæœ‰ä¸åŒçš„å€¼ï¼‰ï¼Œæ‰§è¡Œ SQL è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> country <span class="token keyword">FROM</span> Websites    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">UNION</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">SELECT</span> country <span class="token keyword">FROM</span> apps    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> country<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span> country <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span>  CN     <span class="token operator">|</span><span class="token operator">|</span>  IND    <span class="token operator">|</span><span class="token operator">|</span>  USA    <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>æ³¨é‡Š</strong>ï¼š<code>UNION</code> ä¸èƒ½ç”¨äºåˆ—å‡ºä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰çš„ <code>country</code>ã€‚å¦‚æœä¸€äº›ç½‘ç«™å’Œ APP æ¥è‡ªåŒä¸€ä¸ªå›½å®¶ï¼Œæ¯ä¸ªå›½å®¶åªä¼šåˆ—å‡ºä¸€æ¬¡ã€‚<code>UNION</code> åªä¼šé€‰å–ä¸åŒçš„å€¼ã€‚è¯·ä½¿ç”¨ <code>UNION ALL</code> æ¥é€‰å–é‡å¤çš„å€¼ã€‚</p><h2 id="åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨-UNION-ALL-æ“ä½œç¬¦"><a href="#åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨-UNION-ALL-æ“ä½œç¬¦" class="headerlink" title="åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ UNION ALL æ“ä½œç¬¦"></a>åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ UNION ALL æ“ä½œç¬¦</h2><p>ä¸‹é¢çš„ SQL è¯­å¥ä½¿ç”¨ <code>UNION ALL</code> ä» <code>Websites</code> å’Œ <code>apps</code> è¡¨ä¸­é€‰å–æ‰€æœ‰çš„ <code>country</code>ï¼ˆæœ‰é‡å¤çš„å€¼ï¼‰ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> country <span class="token keyword">FROM</span> Websites    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">UNION</span> <span class="token keyword">ALL</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">SELECT</span> country <span class="token keyword">FROM</span> apps    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> country<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span> country <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span>  CN     <span class="token operator">|</span><span class="token operator">|</span>  CN     <span class="token operator">|</span><span class="token operator">|</span>  CN     <span class="token operator">|</span><span class="token operator">|</span>  CN     <span class="token operator">|</span><span class="token operator">|</span>  IND    <span class="token operator">|</span><span class="token operator">|</span>  USA    <span class="token operator">|</span><span class="token operator">|</span>  USA    <span class="token operator">|</span><span class="token operator">|</span>  USA    <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token number">8</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong>å¸¦æœ‰ <code>WHERE</code> çš„ <code>UNION ALL</code></strong></p><p>ä¸‹é¢çš„ SQL è¯­å¥ä½¿ç”¨ <code>UNION ALL</code> ä» <code>Websites</code> å’Œ <code>apps</code> è¡¨ä¸­é€‰å–æ‰€æœ‰çš„ä¸­å›½(CN)çš„æ•°æ®ï¼ˆæœ‰é‡å¤çš„å€¼ï¼‰ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> country<span class="token punctuation">,</span> name <span class="token keyword">FROM</span> Websites    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">WHERE</span> country<span class="token operator">=</span><span class="token string">'CN'</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">UNION</span> <span class="token keyword">ALL</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">SELECT</span> country<span class="token punctuation">,</span> app_name <span class="token keyword">FROM</span> apps    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">WHERE</span> country<span class="token operator">=</span><span class="token string">'CN'</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> country<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------+------------+</span><span class="token operator">|</span> country <span class="token operator">|</span> name       <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+------------+</span><span class="token operator">|</span> CN      <span class="token operator">|</span> æ·˜å®       <span class="token operator">|</span><span class="token operator">|</span> CN      <span class="token operator">|</span> QQ APP     <span class="token operator">|</span><span class="token operator">|</span> CN      <span class="token operator">|</span> å¾®åš APP   <span class="token operator">|</span><span class="token operator">|</span> CN      <span class="token operator">|</span> å¾®åš       <span class="token operator">|</span><span class="token operator">|</span> CN      <span class="token operator">|</span> æ·˜å® APP   <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+------------+</span><span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.03</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="æ’åºè¯­å¥"><a href="#æ’åºè¯­å¥" class="headerlink" title="æ’åºè¯­å¥"></a>æ’åºè¯­å¥</h1><p>æˆ‘ä»¬çŸ¥é“ä» MySQL è¡¨ä¸­ä½¿ç”¨ <code>SELECT</code> è¯­å¥æ¥è¯»å–æ•°æ®ã€‚</p><p>å¦‚æœæˆ‘ä»¬éœ€è¦å¯¹è¯»å–çš„æ•°æ®è¿›è¡Œæ’åºï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ MySQL çš„ <code>ORDER BY</code> å­å¥æ¥è®¾å®šä½ æƒ³æŒ‰å“ªä¸ªå­—æ®µå“ªç§æ–¹å¼æ¥è¿›è¡Œæ’åºï¼Œå†è¿”å›æœç´¢ç»“æœã€‚</p><h2 id="ORDER-BY-å­å¥è¯­æ³•"><a href="#ORDER-BY-å­å¥è¯­æ³•" class="headerlink" title="ORDER BY å­å¥è¯­æ³•"></a>ORDER BY å­å¥è¯­æ³•</h2><p>ä»¥ä¸‹æ˜¯ <code>SELECT</code> è¯­å¥ä½¿ç”¨ <code>ORDER BY</code> å­å¥å°†æŸ¥è¯¢æ•°æ®æ’åºåå†è¿”å›æ•°æ®ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> field1<span class="token punctuation">,</span> field2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>fieldN <span class="token keyword">FROM</span> table_name1<span class="token punctuation">,</span> table_name2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> field1 <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token punctuation">[</span><span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">[</span>é»˜è®¤ <span class="token keyword">ASC</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>field2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token punctuation">[</span><span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">[</span>é»˜è®¤ <span class="token keyword">ASC</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><ul><li>ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•å­—æ®µæ¥ä½œä¸ºæ’åºçš„æ¡ä»¶ï¼Œä»è€Œè¿”å›æ’åºåçš„æŸ¥è¯¢ç»“æœã€‚</li><li>ä½ å¯ä»¥è®¾å®šå¤šä¸ªå­—æ®µæ¥æ’åºã€‚</li><li>ä½ å¯ä»¥ä½¿ç”¨ <code>ASC</code> æˆ– <code>DESC</code> å…³é”®å­—æ¥è®¾ç½®æŸ¥è¯¢ç»“æœæ˜¯æŒ‰å‡åºæˆ–é™åºæ’åˆ—ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯æŒ‰å‡åºæ’åˆ—ã€‚</li><li>ä½ å¯ä»¥æ·»åŠ  <code>WHERE...LIKE</code> å­å¥æ¥è®¾ç½®æ¡ä»¶ã€‚</li></ul><h2 id="åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨-ORDER-BY-å­å¥"><a href="#åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨-ORDER-BY-å­å¥" class="headerlink" title="åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ ORDER BY å­å¥"></a>åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ ORDER BY å­å¥</h2><p>ä»¥ä¸‹å°†åœ¨ <code>SELECT</code> è¯­å¥ä¸­ä½¿ç”¨ <code>ORDER BY</code> å­å¥æ¥è¯»å– MySQL æ•°æ®è¡¨ <code>tbl</code> ä¸­çš„æ•°æ®ï¼š</p><p>å°è¯•ä»¥ä¸‹å®ä¾‹ï¼Œç»“æœå°†æŒ‰å‡åºåŠé™åºæ’åˆ—ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> submission_date <span class="token keyword">ASC</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token operator">|</span> id <span class="token operator">|</span> title       <span class="token operator">|</span> author <span class="token operator">|</span> submission_date <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> å­¦ä¹  C<span class="token operator">+</span><span class="token operator">+</span>    <span class="token operator">|</span> JAVA   <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> å­¦ä¹  Python <span class="token operator">|</span> Python <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> å­¦ä¹  PHP    <span class="token operator">|</span> PHP    <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> å­¦ä¹  MySQL  <span class="token operator">|</span> MySQL  <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> submission_date <span class="token keyword">DESC</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token operator">|</span> id <span class="token operator">|</span> title       <span class="token operator">|</span> author <span class="token operator">|</span> submission_date <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> å­¦ä¹  PHP    <span class="token operator">|</span> PHP    <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> å­¦ä¹  MySQL  <span class="token operator">|</span> MySQL  <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> å­¦ä¹  C<span class="token operator">+</span><span class="token operator">+</span>    <span class="token operator">|</span> JAVA   <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> å­¦ä¹  Python <span class="token operator">|</span> Python <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>      <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="åˆ†ç»„è¯­å¥"><a href="#åˆ†ç»„è¯­å¥" class="headerlink" title="åˆ†ç»„è¯­å¥"></a>åˆ†ç»„è¯­å¥</h1><p>GROUP BY è¯­å¥æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¯¹ç»“æœé›†è¿›è¡Œåˆ†ç»„ã€‚</p><h2 id="GROUP-BY-å­å¥è¯­æ³•"><a href="#GROUP-BY-å­å¥è¯­æ³•" class="headerlink" title="GROUP BY å­å¥è¯­æ³•"></a>GROUP BY å­å¥è¯­æ³•</h2><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> column_name<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>column_name<span class="token punctuation">)</span><span class="token keyword">FROM</span> table_name<span class="token keyword">WHERE</span> column_name operator <span class="token keyword">value</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> column_name<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>æœ¬ç« èŠ‚å®ä¾‹ä½¿ç”¨åˆ°äº†ä»¥ä¸‹è¡¨ç»“æ„åŠæ•°æ®ï¼Œä½¿ç”¨å‰æˆ‘ä»¬å¯ä»¥å…ˆå°†ä»¥ä¸‹æ•°æ®å¯¼å…¥æ•°æ®åº“ä¸­ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>employee_tbl<span class="token punctuation">`</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>employee_tbl<span class="token punctuation">`</span> <span class="token punctuation">(</span>  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span><span class="token keyword">date</span><span class="token punctuation">`</span> <span class="token keyword">datetime</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>singin<span class="token punctuation">`</span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0'</span> <span class="token keyword">COMMENT</span> <span class="token string">'ç™»å½•æ¬¡æ•°'</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>employee_tbl<span class="token punctuation">`</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'å°æ˜'</span><span class="token punctuation">,</span> <span class="token string">'2016-04-22 15:25:33'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'å°ç‹'</span><span class="token punctuation">,</span> <span class="token string">'2016-04-20 15:25:47'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'å°ä¸½'</span><span class="token punctuation">,</span> <span class="token string">'2016-04-19 15:26:02'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'å°ç‹'</span><span class="token punctuation">,</span> <span class="token string">'2016-04-07 15:26:14'</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'å°æ˜'</span><span class="token punctuation">,</span> <span class="token string">'2016-04-11 15:26:40'</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'6'</span><span class="token punctuation">,</span> <span class="token string">'å°æ˜'</span><span class="token punctuation">,</span> <span class="token string">'2016-04-04 15:26:54'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å¯¼å…¥æˆåŠŸåï¼Œæ‰§è¡Œä»¥ä¸‹ SQL è¯­å¥ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> employee_tbl<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+------+---------------------+--------+</span><span class="token operator">|</span> id <span class="token operator">|</span> name <span class="token operator">|</span> <span class="token keyword">date</span>                <span class="token operator">|</span> singin <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------+---------------------+--------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> å°æ˜ <span class="token operator">|</span> <span class="token number">2016</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">22</span> <span class="token number">15</span>:<span class="token number">25</span>:<span class="token number">33</span> <span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> å°ç‹ <span class="token operator">|</span> <span class="token number">2016</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span>:<span class="token number">25</span>:<span class="token number">47</span> <span class="token operator">|</span>      <span class="token number">3</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> å°ä¸½ <span class="token operator">|</span> <span class="token number">2016</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">19</span> <span class="token number">15</span>:<span class="token number">26</span>:<span class="token number">02</span> <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> å°ç‹ <span class="token operator">|</span> <span class="token number">2016</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">07</span> <span class="token number">15</span>:<span class="token number">26</span>:<span class="token number">14</span> <span class="token operator">|</span>      <span class="token number">4</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> å°æ˜ <span class="token operator">|</span> <span class="token number">2016</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span> <span class="token number">15</span>:<span class="token number">26</span>:<span class="token number">40</span> <span class="token operator">|</span>      <span class="token number">4</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> å°æ˜ <span class="token operator">|</span> <span class="token number">2016</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">04</span> <span class="token number">15</span>:<span class="token number">26</span>:<span class="token number">54</span> <span class="token operator">|</span>      <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+------+---------------------+--------+</span><span class="token number">6</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ <code>GROUP BY</code> è¯­å¥ å°†æ•°æ®è¡¨æŒ‰åå­—è¿›è¡Œåˆ†ç»„ï¼Œå¹¶ç»Ÿè®¡æ¯ä¸ªäººæœ‰å¤šå°‘æ¡è®°å½•ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> employee_tbl <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> name<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+----------+</span><span class="token operator">|</span> name <span class="token operator">|</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+----------+</span><span class="token operator">|</span> å°ä¸½ <span class="token operator">|</span>        <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">|</span> å°æ˜ <span class="token operator">|</span>        <span class="token number">3</span> <span class="token operator">|</span><span class="token operator">|</span> å°ç‹ <span class="token operator">|</span>        <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+----------+</span><span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="ä½¿ç”¨-WITH-ROLLUP"><a href="#ä½¿ç”¨-WITH-ROLLUP" class="headerlink" title="ä½¿ç”¨ WITH ROLLUP"></a>ä½¿ç”¨ WITH ROLLUP</h2><p><code>WITH ROLLUP</code> å¯ä»¥å®ç°åœ¨åˆ†ç»„ç»Ÿè®¡æ•°æ®åŸºç¡€ä¸Šå†è¿›è¡Œç›¸åŒçš„ç»Ÿè®¡ï¼ˆSUM, AVG, COUNTâ€¦ï¼‰ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬å°†ä»¥ä¸Šçš„æ•°æ®è¡¨æŒ‰åå­—è¿›è¡Œåˆ†ç»„ï¼Œå†ç»Ÿè®¡æ¯ä¸ªäººç™»å½•çš„æ¬¡æ•°ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>singin<span class="token punctuation">)</span> <span class="token keyword">AS</span> singin_count <span class="token keyword">FROM</span> employee_tbl <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> name <span class="token keyword">WITH ROLLUP</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+--------------+</span><span class="token operator">|</span> name <span class="token operator">|</span> singin_count <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+--------------+</span><span class="token operator">|</span> å°ä¸½ <span class="token operator">|</span>            <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">|</span> å°æ˜ <span class="token operator">|</span>            <span class="token number">7</span> <span class="token operator">|</span><span class="token operator">|</span> å°ç‹ <span class="token operator">|</span>            <span class="token number">7</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>           <span class="token number">16</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+--------------+</span><span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å…¶ä¸­è®°å½• <code>NULL</code> è¡¨ç¤ºæ‰€æœ‰äººçš„ç™»å½•æ¬¡æ•°ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>COALESCE</code> æ¥è®¾ç½®ä¸€ä¸ªå¯ä»¥å–ä»£ <code>NUll</code> çš„åç§°</p><p> <strong> COALESCE è¯­æ³•ï¼š</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">COALESCE</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>å‚æ•°è¯´æ˜ï¼šå¦‚æœ <code>a == NULL</code>ï¼Œåˆ™é€‰æ‹© <code>b</code>ï¼›å¦‚æœ<code>b == NULL</code>ï¼Œåˆ™é€‰æ‹© <code>c</code>ï¼›å¦‚æœ <code>a != NULL</code>ï¼Œåˆ™é€‰æ‹©<code>a</code>ï¼›å¦‚æœ <code>a</code> <code>b</code> <code>c</code> éƒ½ä¸º <code>NULL</code> ï¼Œåˆ™è¿”å›ä¸º <code>NULL</code>ï¼ˆæ²¡æ„ä¹‰ï¼‰ã€‚</p><p>ä»¥ä¸‹å®ä¾‹ä¸­å¦‚æœåå­—ä¸ºç©ºæˆ‘ä»¬ä½¿ç”¨æ€»æ•°ä»£æ›¿ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">COALESCE</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">'æ€»æ•°'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>singin<span class="token punctuation">)</span> <span class="token keyword">AS</span> singin_count <span class="token keyword">FROM</span> employee_tbl <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> name <span class="token keyword">WITH ROLLUP</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------------------------+--------------+</span><span class="token operator">|</span> <span class="token keyword">COALESCE</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token string">'æ€»æ•°'</span><span class="token punctuation">)</span> <span class="token operator">|</span> singin_count <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------------------+--------------+</span><span class="token operator">|</span> å°ä¸½                   <span class="token operator">|</span>            <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">|</span> å°æ˜                   <span class="token operator">|</span>            <span class="token number">7</span> <span class="token operator">|</span><span class="token operator">|</span> å°ç‹                   <span class="token operator">|</span>            <span class="token number">7</span> <span class="token operator">|</span><span class="token operator">|</span> æ€»æ•°                   <span class="token operator">|</span>           <span class="token number">16</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------------------+--------------+</span><span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="JOIN"><a href="#JOIN" class="headerlink" title="JOIN"></a>JOIN</h1><p>åœ¨å‰å‡ ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šäº†å¦‚ä½•åœ¨ä¸€å¼ è¡¨ä¸­è¯»å–æ•°æ®ï¼Œè¿™æ˜¯ç›¸å¯¹ç®€å•çš„ï¼Œä½†æ˜¯åœ¨çœŸæ­£çš„åº”ç”¨ä¸­ç»å¸¸éœ€è¦ä»å¤šä¸ªæ•°æ®è¡¨ä¸­è¯»å–æ•°æ®ã€‚</p><p>æœ¬ç« èŠ‚å°†å‘å¤§å®¶ä»‹ç»å¦‚ä½•ä½¿ç”¨ MySQL çš„ <code>JOIN</code> åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚</p><p>ä½ å¯ä»¥åœ¨ <code>SELECT</code>ã€<code>UPDATE</code> å’Œ <code>DELETE</code> è¯­å¥ä¸­ä½¿ç”¨ MySQL çš„ <code>JOIN</code> æ¥è”åˆå¤šè¡¨æŸ¥è¯¢ã€‚</p><p>JOIN æŒ‰ç…§åŠŸèƒ½å¤§è‡´åˆ†ä¸ºå¦‚ä¸‹ä¸‰ç±»ï¼š</p><ul><li><strong>INNER JOINï¼ˆå†…è¿æ¥æˆ–ç­‰å€¼è¿æ¥ï¼‰</strong>ï¼šè·å–ä¸¤ä¸ªè¡¨ä¸­å­—æ®µåŒ¹é…å…³ç³»çš„è®°å½•ã€‚</li><li><strong>LEFT JOINï¼ˆå·¦è¿æ¥ï¼‰</strong>ï¼šè·å–å·¦è¡¨æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å³è¡¨æ²¡æœ‰å¯¹åº”åŒ¹é…çš„è®°å½•ã€‚</li><li><strong>RIGHT JOINï¼ˆå³è¿æ¥ï¼‰</strong>ï¼š ä¸ <code>LEFT JOIN</code> ç›¸åï¼Œç”¨äºè·å–å³è¡¨æ‰€æœ‰è®°å½•ï¼Œå³ä½¿å·¦è¡¨æ²¡æœ‰å¯¹åº”åŒ¹é…çš„è®°å½•ã€‚</li></ul><h2 id="INNER-JOIN"><a href="#INNER-JOIN" class="headerlink" title="INNER JOIN"></a>INNER JOIN</h2><p>æˆ‘ä»¬åœ¨ <code>testDB</code> æ•°æ®åº“ä¸­æœ‰ä¸¤å¼ è¡¨ <code>tcount_tbl</code> å’Œ <code>tbl</code>ã€‚ä¸¤å¼ æ•°æ®è¡¨æ•°æ®å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tcount_tbl<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------+-------+</span><span class="token operator">|</span> author <span class="token operator">|</span> count <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+-------+</span><span class="token operator">|</span> JAVA   <span class="token operator">|</span>    <span class="token number">10</span> <span class="token operator">|</span><span class="token operator">|</span> MySQL  <span class="token operator">|</span>    <span class="token number">20</span> <span class="token operator">|</span><span class="token operator">|</span> C<span class="token operator">+</span><span class="token operator">+</span>    <span class="token operator">|</span>    <span class="token number">30</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+-------+</span><span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span> mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token operator">|</span> id <span class="token operator">|</span> title       <span class="token operator">|</span> author <span class="token operator">|</span> submission_date <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> å­¦ä¹  PHP    <span class="token operator">|</span> PHP    <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> å­¦ä¹  MySQL  <span class="token operator">|</span> MySQL  <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> å­¦ä¹  C<span class="token operator">+</span><span class="token operator">+</span>    <span class="token operator">|</span> JAVA   <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> å­¦ä¹  Python <span class="token operator">|</span> Python <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> MySQL æ•™ç¨‹  <span class="token operator">|</span> MySQL  <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> JAVA æ•™ç¨‹   <span class="token operator">|</span> JAVA   <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">12</span>      <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+-------------+--------+-----------------+</span><span class="token number">6</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä½¿ç”¨ <code>MySQL</code> çš„<code>INNER JOIN</code> (ä¹Ÿå¯ä»¥çœç•¥ <code>INNER</code> ä½¿ç”¨ <code>JOIN</code>ï¼Œæ•ˆæœä¸€æ ·)æ¥è¿æ¥ä»¥ä¸Šä¸¤å¼ è¡¨æ¥è¯»å– <code>tbl</code> è¡¨ä¸­æ‰€æœ‰ <code>author</code> å­—æ®µåœ¨ <code>tcount_tbl</code> è¡¨å¯¹åº”çš„ <code>count</code> å­—æ®µå€¼ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span>  <span class="token keyword">SELECT</span> a<span class="token punctuation">.</span>id<span class="token punctuation">,</span> a<span class="token punctuation">.</span>author<span class="token punctuation">,</span> b<span class="token punctuation">.</span>count <span class="token keyword">FROM</span> tbl a <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> tcount_tbl b <span class="token keyword">ON</span> a<span class="token punctuation">.</span>author <span class="token operator">=</span> b<span class="token punctuation">.</span>author<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+--------+-------+</span><span class="token operator">|</span> id <span class="token operator">|</span> author <span class="token operator">|</span> count <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+--------+-------+</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> MySQL  <span class="token operator">|</span>    <span class="token number">20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> JAVA   <span class="token operator">|</span>    <span class="token number">10</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> MySQL  <span class="token operator">|</span>    <span class="token number">20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> JAVA   <span class="token operator">|</span>    <span class="token number">10</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+--------+-------+</span><span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä»¥ä¸Š SQL è¯­å¥ç­‰ä»·äºä»¥ä¸‹ <code>WHERE</code> å­å¥ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> a<span class="token punctuation">.</span>id<span class="token punctuation">,</span> a<span class="token punctuation">.</span>author<span class="token punctuation">,</span> b<span class="token punctuation">.</span>count <span class="token keyword">FROM</span> tbl a<span class="token punctuation">,</span> tcount_tbl b <span class="token keyword">WHERE</span> a<span class="token punctuation">.</span>author <span class="token operator">=</span> b<span class="token punctuation">.</span>author<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+--------+-------+</span><span class="token operator">|</span> id <span class="token operator">|</span> author <span class="token operator">|</span> count <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+--------+-------+</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> MySQL  <span class="token operator">|</span>    <span class="token number">20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> JAVA   <span class="token operator">|</span>    <span class="token number">10</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> MySQL  <span class="token operator">|</span>    <span class="token number">20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> JAVA   <span class="token operator">|</span>    <span class="token number">10</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+--------+-------+</span><span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="LEFT-JOIN"><a href="#LEFT-JOIN" class="headerlink" title="LEFT JOIN"></a>LEFT JOIN</h2><p>MySQL <code>LEFT JOIN</code> ä¸ <code>JOIN</code> æœ‰æ‰€ä¸åŒã€‚ <code>LEFT JOIN</code> ä¼šè¯»å–å·¦è¾¹æ•°æ®è¡¨çš„å…¨éƒ¨æ•°æ®ï¼Œå³ä¾¿å³è¾¹è¡¨æ— å¯¹åº”æ•°æ®ã€‚</p><p>å°è¯•ä»¥ä¸‹å®ä¾‹ï¼Œä»¥ <code>tbl</code> ä¸ºå·¦è¡¨ï¼Œ<code>tcount_tbl</code> ä¸ºå³è¡¨ï¼Œç†è§£ <code>LEFT JOIN</code> çš„åº”ç”¨ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> a<span class="token punctuation">.</span>id<span class="token punctuation">,</span> a<span class="token punctuation">.</span>author<span class="token punctuation">,</span> b<span class="token punctuation">.</span>count <span class="token keyword">FROM</span> tbl a <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> tcount_tbl b <span class="token keyword">ON</span> a<span class="token punctuation">.</span>author <span class="token operator">=</span> b<span class="token punctuation">.</span>author<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+--------+-------+</span><span class="token operator">|</span> id <span class="token operator">|</span> author <span class="token operator">|</span> count <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+--------+-------+</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> JAVA   <span class="token operator">|</span>    <span class="token number">10</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> JAVA   <span class="token operator">|</span>    <span class="token number">10</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> MySQL  <span class="token operator">|</span>    <span class="token number">20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> MySQL  <span class="token operator">|</span>    <span class="token number">20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> PHP    <span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> Python <span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+--------+-------+</span><span class="token number">6</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä»¥ä¸Šå®ä¾‹ä¸­ä½¿ç”¨äº† <code>LEFT JOIN</code>ï¼Œè¯¥è¯­å¥ä¼šè¯»å–å·¦è¾¹çš„æ•°æ®è¡¨ <code>tbl</code> çš„æ‰€æœ‰é€‰å–çš„å­—æ®µæ•°æ®ï¼Œå³ä¾¿åœ¨å³ä¾§è¡¨ <code>tcount_tbl</code> ä¸­ æ²¡æœ‰å¯¹åº”çš„ <code>author</code> å­—æ®µå€¼ã€‚</p><h2 id="RIGHT-JOIN"><a href="#RIGHT-JOIN" class="headerlink" title="RIGHT JOIN"></a>RIGHT JOIN</h2><p>MySQL <code>RIGHT JOIN</code> ä¼šè¯»å–å³è¾¹æ•°æ®è¡¨çš„å…¨éƒ¨æ•°æ®ï¼Œå³ä¾¿å·¦è¾¹è¾¹è¡¨æ— å¯¹åº”æ•°æ®ã€‚</p><p>å°è¯•ä»¥ä¸‹å®ä¾‹ï¼Œä»¥ <code>tbl</code> ä¸ºå·¦è¡¨ï¼Œ<code>tcount_tbl</code> ä¸ºå³è¡¨ï¼Œç†è§£ <code>RIGHT JOIN</code> çš„åº”ç”¨ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> a<span class="token punctuation">.</span>id<span class="token punctuation">,</span> a<span class="token punctuation">.</span>author<span class="token punctuation">,</span> b<span class="token punctuation">.</span>count <span class="token keyword">FROM</span> tbl a <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> tcount_tbl b <span class="token keyword">ON</span> a<span class="token punctuation">.</span>author <span class="token operator">=</span> b<span class="token punctuation">.</span>author<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+--------+-------+</span><span class="token operator">|</span> id   <span class="token operator">|</span> author <span class="token operator">|</span> count <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+--------+-------+</span><span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> MySQL  <span class="token operator">|</span>    <span class="token number">20</span> <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> JAVA   <span class="token operator">|</span>    <span class="token number">10</span> <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span> MySQL  <span class="token operator">|</span>    <span class="token number">20</span> <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">6</span> <span class="token operator">|</span> JAVA   <span class="token operator">|</span>    <span class="token number">10</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>   <span class="token operator">|</span>    <span class="token number">30</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+--------+-------+</span><span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä»¥ä¸Šå®ä¾‹ä¸­ä½¿ç”¨äº† <code>RIGHT JOIN</code>ï¼Œè¯¥è¯­å¥ä¼šè¯»å–å³è¾¹çš„æ•°æ®è¡¨ <code>tcount_tbl</code> çš„æ‰€æœ‰é€‰å–çš„å­—æ®µæ•°æ®ï¼Œå³ä¾¿åœ¨å·¦ä¾§è¡¨ <code>tbl</code> ä¸­æ²¡æœ‰å¯¹åº”çš„ <code>author</code> å­—æ®µå€¼ã€‚</p><h1 id="NULL-å€¼å¤„ç†"><a href="#NULL-å€¼å¤„ç†" class="headerlink" title="NULL å€¼å¤„ç†"></a>NULL å€¼å¤„ç†</h1><p>æˆ‘ä»¬å·²ç»çŸ¥é“ MySQL ä½¿ç”¨ <code>SELECT</code> å‘½ä»¤åŠ <code>WHERE</code> å­å¥æ¥è¯»å–æ•°æ®è¡¨ä¸­çš„æ•°æ®,ä½†æ˜¯å½“æä¾›çš„æŸ¥è¯¢æ¡ä»¶å­—æ®µä¸º NULL æ—¶ï¼Œè¯¥å‘½ä»¤å¯èƒ½å°±æ— æ³•æ­£å¸¸å·¥ä½œã€‚</p><h2 id="NULL-å€¼è¿ç®—ç¬¦"><a href="#NULL-å€¼è¿ç®—ç¬¦" class="headerlink" title="NULL å€¼è¿ç®—ç¬¦"></a>NULL å€¼è¿ç®—ç¬¦</h2><p>ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼ŒMySQL æä¾›äº†ä¸‰å¤§è¿ç®—ç¬¦:</p><ul><li><strong>IS NULL</strong>: å½“åˆ—çš„å€¼æ˜¯ <code>NULL</code>ï¼Œæ­¤è¿ç®—ç¬¦è¿”å› <code>true</code>ã€‚</li><li><strong>IS NOT NULL</strong>: å½“åˆ—çš„å€¼ä¸ä¸º <code>NULL</code>, è¿ç®—ç¬¦è¿”å› <code>true</code>ã€‚</li><li><strong>&lt;=&gt;</strong>: æ¯”è¾ƒæ“ä½œç¬¦ï¼ˆä¸åŒäº <code>=</code> è¿ç®—ç¬¦ï¼‰ï¼Œå½“æ¯”è¾ƒçš„çš„ä¸¤ä¸ªå€¼ç›¸ç­‰æˆ–è€…éƒ½ä¸º <code>NULL</code> æ—¶è¿”å› <code>true</code>ã€‚</li></ul><p>å…³äº <code>NULL</code> çš„æ¡ä»¶æ¯”è¾ƒè¿ç®—æ˜¯æ¯”è¾ƒç‰¹æ®Šçš„ã€‚ä½ ä¸èƒ½ä½¿ç”¨ <code>= NULL</code> æˆ– <code>!= NULL</code> åœ¨åˆ—ä¸­æŸ¥æ‰¾ <code>NULL</code> å€¼ ã€‚</p><p>åœ¨ MySQL ä¸­ï¼Œ<code>NULL</code> å€¼ä¸ä»»ä½•å…¶å®ƒå€¼çš„æ¯”è¾ƒï¼ˆå³ä½¿æ˜¯ <code>NULL</code>ï¼‰æ°¸è¿œè¿”å› <code>NULL</code>ï¼Œå³ <code>NULL = NULL</code> è¿”å› <code>NULL</code>ã€‚</p><p>MySQL ä¸­å¤„ç† <code>NULL</code> ä½¿ç”¨ <code>IS NULL</code> å’Œ <code>IS NOT NULL</code> è¿ç®—ç¬¦ã€‚</p><p><strong>æ³¨æ„ï¼š</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token punctuation">,</span> columnName1 <span class="token operator">+</span> IFNULL<span class="token punctuation">(</span>columnName2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> tableName<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><code>columnName1</code>ï¼Œ<code>columnName2</code> ä¸º <code>int</code> å‹ï¼Œå½“ <code>columnName2</code> ä¸­ï¼Œæœ‰å€¼ä¸º <code>NULL</code> æ—¶ï¼Œ<code>columnName1 + columnName2 = NULL</code>ï¼Œ<code>IFNULL(columnName2, 0)</code> æŠŠ <code>columnName2</code> ä¸­ <code>NULL</code> å€¼è½¬ä¸º <code>0</code>ã€‚</p><h2 id="åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨-NULL-å€¼"><a href="#åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨-NULL-å€¼" class="headerlink" title="åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ NULL å€¼"></a>åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨ NULL å€¼</h2><p>ä»¥ä¸‹å®ä¾‹ä¸­å‡è®¾æ•°æ®åº“ <code>TestDB</code> ä¸­çš„è¡¨ <code>tbl</code> å«æœ‰ä¸¤åˆ— <code>author</code> å’Œ <code>count</code>, <code>count</code> ä¸­è®¾ç½®æ’å…¥ <code>NULL</code> å€¼ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------------+--------------+</span><span class="token operator">|</span> author <span class="token operator">|</span> count <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------------+--------------+</span><span class="token operator">|</span> TestDB        <span class="token operator">|</span> <span class="token boolean">NULL</span>         <span class="token operator">|</span><span class="token operator">|</span> Google        <span class="token operator">|</span> <span class="token boolean">NULL</span>         <span class="token operator">|</span><span class="token operator">|</span> FK            <span class="token operator">|</span> <span class="token number">20</span>           <span class="token operator">|</span><span class="token operator">|</span> Baidu         <span class="token operator">|</span> <span class="token number">20</span>           <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------------+--------------+</span><span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä»¥ä¸‹å®ä¾‹ä¸­ä½ å¯ä»¥çœ‹åˆ° <code>=</code> å’Œ <code>!=</code> è¿ç®—ç¬¦æ˜¯ä¸èµ·ä½œç”¨çš„ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl <span class="token keyword">WHERE</span> count <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>Empty <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl <span class="token keyword">WHERE</span> count <span class="token operator">!=</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>Empty <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>æŸ¥æ‰¾æ•°æ®è¡¨ä¸­ <code>tbl</code> åˆ—æ˜¯å¦ä¸º <code>NULL</code>ï¼Œå¿…é¡»ä½¿ç”¨ <code>IS NULL</code> å’Œ <code>IS NOT NULL</code>ï¼Œå¦‚ä¸‹å®ä¾‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl <span class="token keyword">WHERE</span> count <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------+-------+</span><span class="token operator">|</span> author <span class="token operator">|</span> count <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+-------+</span><span class="token operator">|</span> TestDB <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span><span class="token operator">|</span> Google <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---- ---+-------+</span><span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl <span class="token keyword">WHERE</span> count <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------+-------+</span><span class="token operator">|</span> author <span class="token operator">|</span> count <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+-------+</span><span class="token operator">|</span> FK     <span class="token operator">|</span> <span class="token number">20</span>    <span class="token operator">|</span><span class="token operator">|</span> Baidu  <span class="token operator">|</span> <span class="token number">20</span>    <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+-------+</span><span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h1><p>åœ¨å‰é¢çš„ç« èŠ‚æˆ‘ä»¬å·²ç»äº†è§£åˆ° MySQL å¯ä»¥é€šè¿‡ <code>LIKE</code> å­å¥æ¥è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ã€‚</p><p>MySQL åŒæ ·ä¹Ÿæ”¯æŒå…¶ä»–æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ï¼Œ MySQL ä¸­ä½¿ç”¨ <code>REGEXP</code> æ“ä½œç¬¦æ¥è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚</p><p>ä¸‹è¡¨ä¸­çš„æ­£åˆ™æ¨¡å¼å¯åº”ç”¨äº <code>REGEXP</code> æ“ä½œç¬¦ä¸­ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">æ¨¡å¼</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">^</td><td style="text-align:center">åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ã€‚<br>å¦‚æœè®¾ç½®äº† RegExp å¯¹è±¡çš„ Multiline å±æ€§ï¼Œ<code>^</code> ä¹ŸåŒ¹é… <code>\n</code> æˆ– <code>\r</code> ä¹‹åçš„ä½ç½®ã€‚</td></tr><tr><td style="text-align:center">$</td><td style="text-align:center">åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ã€‚<br>å¦‚æœè®¾ç½®äº† RegExp å¯¹è±¡çš„ Multiline å±æ€§ï¼Œ<code>$</code> ä¹ŸåŒ¹é… <code>\n</code> æˆ– <code>\r</code> ä¹‹å‰çš„ä½ç½®ã€‚</td></tr><tr><td style="text-align:center">.</td><td style="text-align:center">åŒ¹é…é™¤ <code>\n</code> ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚<br>è¦åŒ¹é…åŒ…æ‹¬ <code>\n</code> åœ¨å†…çš„ä»»ä½•å­—ç¬¦ï¼Œè¯·ä½¿ç”¨åƒ <code>[.\n]</code> çš„æ¨¡å¼ã€‚</td></tr><tr><td style="text-align:center">[...]</td><td style="text-align:center">å­—ç¬¦é›†åˆã€‚åŒ¹é…æ‰€åŒ…å«çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚<br>ä¾‹å¦‚ï¼Œ<code>[abc]</code> å¯ä»¥åŒ¹é… <code>plain</code> ä¸­çš„ <code>a</code>ã€‚</td></tr><tr><td style="text-align:center"><html>[^...]</html></td><td style="text-align:center">è´Ÿå€¼å­—ç¬¦é›†åˆã€‚åŒ¹é…æœªåŒ…å«çš„ä»»æ„å­—ç¬¦ã€‚<br>ä¾‹å¦‚ï¼Œ<code>[\^abc]</code> å¯ä»¥åŒ¹é… <code>plain</code> ä¸­çš„<code>p</code>ã€‚</td></tr><tr><td style="text-align:center">p1&vert;p2&vert;p3</td><td style="text-align:center">åŒ¹é… p1 æˆ– p2 æˆ– p3ã€‚<br>ä¾‹å¦‚ï¼Œ<code>z</code>&vert;<code>food</code> èƒ½åŒ¹é… <code>z</code> æˆ– <code>food</code>ã€‚<code>(z</code>&vert;<code>f)ood</code> åˆ™åŒ¹é… <code>zood</code> æˆ– <code>food</code>ã€‚</td></tr><tr><td style="text-align:center">*</td><td style="text-align:center">åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚<br>ä¾‹å¦‚ï¼Œ<code>zo*</code> èƒ½åŒ¹é… <code>z</code> ä»¥åŠ <code>zoo</code>ã€‚<code>*</code> ç­‰ä»·äº{0,}ã€‚</td></tr><tr><td style="text-align:center">+</td><td style="text-align:center">åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚<br>ä¾‹å¦‚ï¼Œ<code>zo+</code> èƒ½åŒ¹é… <code>zo</code> ä»¥åŠ <code>zoo</code>ï¼Œä½†ä¸èƒ½åŒ¹é… <code>z</code>ã€‚<code>+</code> ç­‰ä»·äº <code>&#123;1,&#125;</code>ã€‚</td></tr><tr><td style="text-align:center">{n}</td><td style="text-align:center"><code>n</code> æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚åŒ¹é…ç¡®å®šçš„ <code>n</code> æ¬¡ã€‚<br>ä¾‹å¦‚ï¼Œ<code>o&#123;2&#125;</code> ä¸èƒ½åŒ¹é… <code>Bob</code> ä¸­çš„ <code>o</code>ï¼Œä½†æ˜¯èƒ½åŒ¹é… <code>food</code> ä¸­çš„ä¸¤ä¸ª <code>o</code>ã€‚</td></tr><tr><td style="text-align:center">{n, m}</td><td style="text-align:center"><code>m</code> å’Œ <code>n</code> å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä¸­ <code>n &lt;= m</code>ã€‚<br>æœ€å°‘åŒ¹é… <code>n</code> æ¬¡ä¸”æœ€å¤šåŒ¹é… <code>m</code> æ¬¡ã€‚</td></tr></tbody></table></div><p>äº†è§£ä»¥ä¸Šçš„æ­£åˆ™éœ€æ±‚åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥ç¼–å†™å¸¦æœ‰æ­£åˆ™è¡¨è¾¾å¼çš„ SQL è¯­å¥ã€‚ä»¥ä¸‹æˆ‘ä»¬å°†åˆ—å‡ºå‡ ä¸ªå°å®ä¾‹ï¼ˆè¡¨åï¼š<code>person_tbl</code>ï¼‰æ¥åŠ æ·±æˆ‘ä»¬çš„ç†è§£ï¼š</p><p>æŸ¥æ‰¾ <code>name</code> å­—æ®µä¸­ä»¥ <code>st</code> ä¸ºå¼€å¤´çš„æ‰€æœ‰æ•°æ®ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> person_tbl <span class="token keyword">WHERE</span> name <span class="token operator">REGEXP</span> <span class="token string">'^st'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>æŸ¥æ‰¾ <code>name</code> å­—æ®µä¸­ä»¥ <code>ok</code> ä¸ºç»“å°¾çš„æ‰€æœ‰æ•°æ®ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> person_tbl <span class="token keyword">WHERE</span> name <span class="token operator">REGEXP</span> <span class="token string">'ok$'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>æŸ¥æ‰¾ <code>name</code> å­—æ®µä¸­åŒ…å« <code>mar</code> å­—ç¬¦ä¸²çš„æ‰€æœ‰æ•°æ®ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> person_tbl <span class="token keyword">WHERE</span> name <span class="token operator">REGEXP</span> <span class="token string">'mar'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>æŸ¥æ‰¾ <code>name</code> å­—æ®µä¸­ä»¥å…ƒéŸ³å­—ç¬¦å¼€å¤´æˆ–ä»¥ <code>ok</code> å­—ç¬¦ä¸²ç»“å°¾çš„æ‰€æœ‰æ•°æ®ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> person_tbl <span class="token keyword">WHERE</span> name <span class="token operator">REGEXP</span> <span class="token string">'^[aeiou]|ok$'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h1 id="ALTER-å‘½ä»¤"><a href="#ALTER-å‘½ä»¤" class="headerlink" title="ALTER å‘½ä»¤"></a>ALTER å‘½ä»¤</h1><p>å½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹æ•°æ®è¡¨åæˆ–è€…ä¿®æ”¹æ•°æ®è¡¨å­—æ®µæ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ° <code>ALTER</code> å‘½ä»¤ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SHOW</span> <span class="token keyword">COLUMNS</span> <span class="token keyword">FROM</span> testalter_tbl<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+---------+------+-----+---------+-------+</span><span class="token operator">|</span> Field <span class="token operator">|</span> <span class="token keyword">Type</span>    <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+---------+------+-----+---------+-------+</span><span class="token operator">|</span> i     <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">|</span> c     <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+---------+------+-----+---------+-------+</span><span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆ é™¤ï¼Œæ·»åŠ æˆ–ä¿®æ”¹è¡¨å­—æ®µ"><a href="#åˆ é™¤ï¼Œæ·»åŠ æˆ–ä¿®æ”¹è¡¨å­—æ®µ" class="headerlink" title="åˆ é™¤ï¼Œæ·»åŠ æˆ–ä¿®æ”¹è¡¨å­—æ®µ"></a>åˆ é™¤ï¼Œæ·»åŠ æˆ–ä¿®æ”¹è¡¨å­—æ®µ</h2><p>å¦‚ä¸‹å‘½ä»¤ä½¿ç”¨äº† <code>ALTER</code> å‘½ä»¤åŠ <code>DROP</code> å­å¥æ¥åˆ é™¤ä»¥ä¸Šåˆ›å»ºè¡¨çš„ <code>i</code> å­—æ®µï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl  <span class="token keyword">DROP</span> i<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>å¦‚æœæ•°æ®è¡¨ä¸­åªå‰©ä½™ä¸€ä¸ªå­—æ®µåˆ™æ— æ³•ä½¿ç”¨ <code>DROP</code> æ¥åˆ é™¤å­—æ®µã€‚</p><p>MySQL ä¸­ä½¿ç”¨ <code>ADD</code> å­å¥æ¥å‘æ•°æ®è¡¨ä¸­æ·»åŠ åˆ—ï¼Œå¦‚ä¸‹å®ä¾‹åœ¨è¡¨ <code>testalter_tbl</code> ä¸­æ·»åŠ  <code>i</code> å­—æ®µï¼Œå¹¶å®šä¹‰æ•°æ®ç±»å‹:</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">ADD</span> i <span class="token keyword">INT</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>æ‰§è¡Œä»¥ä¸Šå‘½ä»¤åï¼Œ<code>i</code> å­—æ®µä¼šè‡ªåŠ¨æ·»åŠ åˆ°æ•°æ®è¡¨å­—æ®µçš„æœ«å°¾ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SHOW</span> <span class="token keyword">COLUMNS</span> <span class="token keyword">FROM</span> testalter_tbl<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+---------+------+-----+---------+-------+</span><span class="token operator">|</span> Field <span class="token operator">|</span> <span class="token keyword">Type</span>    <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+---------+------+-----+---------+-------+</span><span class="token operator">|</span> c     <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">|</span> i     <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+---------+------+-----+---------+-------+</span><span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å¦‚æœä½ éœ€è¦æŒ‡å®šæ–°å¢å­—æ®µçš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨ MySQL æä¾›çš„å…³é”®å­— <code>FIRST</code> (è®¾å®šä½ç¬¬ä¸€åˆ—)ï¼Œ <code>AFTER</code> å­—æ®µåï¼ˆè®¾å®šä½äºæŸä¸ªå­—æ®µä¹‹åï¼‰ã€‚</p><p>å°è¯•ä»¥ä¸‹ <code>ALTER TABLE</code> è¯­å¥, åœ¨æ‰§è¡ŒæˆåŠŸåï¼Œä½¿ç”¨ <code>SHOW COLUMNS</code> æŸ¥çœ‹è¡¨ç»“æ„çš„å˜åŒ–ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">DROP</span> i<span class="token punctuation">;</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">ADD</span> i <span class="token keyword">INT</span> <span class="token keyword">FIRST</span><span class="token punctuation">;</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">DROP</span> i<span class="token punctuation">;</span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">ADD</span> i <span class="token keyword">INT</span> <span class="token keyword">AFTER</span> c<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p><code>FIRST</code> å’Œ <code>AFTER</code> å…³é”®å­—å¯ç”¨äº <code>ADD</code> ä¸ <code>MODIFY</code> å­å¥ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³é‡ç½®æ•°æ®è¡¨å­—æ®µçš„ä½ç½®å°±éœ€è¦å…ˆä½¿ç”¨ <code>DROP</code> åˆ é™¤å­—æ®µç„¶åä½¿ç”¨ <code>ADD</code> æ¥æ·»åŠ å­—æ®µå¹¶è®¾ç½®ä½ç½®ã€‚</p><h2 id="ä¿®æ”¹å­—æ®µç±»å‹åŠåç§°"><a href="#ä¿®æ”¹å­—æ®µç±»å‹åŠåç§°" class="headerlink" title="ä¿®æ”¹å­—æ®µç±»å‹åŠåç§°"></a>ä¿®æ”¹å­—æ®µç±»å‹åŠåç§°</h2><p>å¦‚æœéœ€è¦ä¿®æ”¹å­—æ®µç±»å‹åŠåç§°, ä½ å¯ä»¥åœ¨ <code>ALTER</code> å‘½ä»¤ä¸­ä½¿ç”¨ <code>MODIFY</code> æˆ– <code>CHANGE</code> å­å¥ ã€‚</p><p>ä¾‹å¦‚ï¼ŒæŠŠå­—æ®µ <code>c</code> çš„ç±»å‹ä» <code>CHAR(1)</code> æ”¹ä¸º <code>CHAR(10)</code>ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">MODIFY</span> c <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä½¿ç”¨ <code>CHANGE</code> å­å¥, è¯­æ³•æœ‰å¾ˆå¤§çš„ä¸åŒã€‚ åœ¨ <code>CHANGE</code> å…³é”®å­—ä¹‹åï¼Œç´§è·Ÿç€çš„æ˜¯ä½ è¦ä¿®æ”¹çš„å­—æ®µåï¼Œç„¶åæŒ‡å®šæ–°å­—æ®µååŠç±»å‹ã€‚å°è¯•å¦‚ä¸‹å®ä¾‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl CHANGE i j <span class="token keyword">BIGINT</span><span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl CHANGE j j <span class="token keyword">INT</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h2 id="ALTER-TABLE-å¯¹-NULL-å€¼å’Œé»˜è®¤å€¼çš„å½±å“"><a href="#ALTER-TABLE-å¯¹-NULL-å€¼å’Œé»˜è®¤å€¼çš„å½±å“" class="headerlink" title="ALTER TABLE å¯¹ NULL å€¼å’Œé»˜è®¤å€¼çš„å½±å“"></a>ALTER TABLE å¯¹ NULL å€¼å’Œé»˜è®¤å€¼çš„å½±å“</h2><p>å½“ä½ ä¿®æ”¹å­—æ®µæ—¶ï¼Œä½ å¯ä»¥æŒ‡å®šæ˜¯å¦åŒ…å«å€¼æˆ–è€…æ˜¯å¦è®¾ç½®é»˜è®¤å€¼ã€‚</p><p>ä»¥ä¸‹å®ä¾‹ï¼ŒæŒ‡å®šå­—æ®µ <code>j</code> ä¸º <code>NOT NULL</code> ä¸”é»˜è®¤å€¼ä¸º <code>100</code> ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl     <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">MODIFY</span> j <span class="token keyword">BIGINT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">100</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>å¦‚æœä½ ä¸è®¾ç½®é»˜è®¤å€¼ï¼ŒMySQLä¼šè‡ªåŠ¨è®¾ç½®è¯¥å­—æ®µé»˜è®¤ä¸º <code>NULL</code>ã€‚</p><h2 id="ä¿®æ”¹å­—æ®µé»˜è®¤å€¼"><a href="#ä¿®æ”¹å­—æ®µé»˜è®¤å€¼" class="headerlink" title="ä¿®æ”¹å­—æ®µé»˜è®¤å€¼"></a>ä¿®æ”¹å­—æ®µé»˜è®¤å€¼</h2><p>ä½ å¯ä»¥ä½¿ç”¨ <code>ALTER</code> æ¥ä¿®æ”¹å­—æ®µçš„é»˜è®¤å€¼ï¼Œå°è¯•ä»¥ä¸‹å®ä¾‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">ALTER</span> i <span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> <span class="token number">1000</span><span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">SHOW</span> <span class="token keyword">COLUMNS</span> <span class="token keyword">FROM</span> testalter_tbl<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+---------+------+-----+---------+-------+</span><span class="token operator">|</span> Field <span class="token operator">|</span> <span class="token keyword">Type</span>    <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+---------+------+-----+---------+-------+</span><span class="token operator">|</span> c     <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">|</span> i     <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token number">1000</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+---------+------+-----+---------+-------+</span><span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>ALTER</code> å‘½ä»¤åŠ <code>DROP</code> å­å¥æ¥åˆ é™¤å­—æ®µçš„é»˜è®¤å€¼ï¼Œå¦‚ä¸‹å®ä¾‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">ALTER</span> i <span class="token keyword">DROP</span> <span class="token keyword">DEFAULT</span><span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">SHOW</span> <span class="token keyword">COLUMNS</span> <span class="token keyword">FROM</span> testalter_tbl<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+---------+------+-----+---------+-------+</span><span class="token operator">|</span> Field <span class="token operator">|</span> <span class="token keyword">Type</span>    <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+---------+------+-----+---------+-------+</span><span class="token operator">|</span> c     <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">|</span> i     <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+---------+------+-----+---------+-------+</span><span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>Changing a <span class="token keyword">Table</span> <span class="token keyword">Type</span>:<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä¿®æ”¹æ•°æ®è¡¨ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>ALTER</code> å‘½ä»¤åŠ <code>TYPE</code> å­å¥æ¥å®Œæˆã€‚å°è¯•ä»¥ä¸‹å®ä¾‹ï¼Œæˆ‘ä»¬å°†è¡¨ <code>testalter_tbl</code> çš„ç±»å‹ä¿®æ”¹ä¸º <code>MyISAM</code>ï¼š</p><p>æ³¨æ„ï¼šæŸ¥çœ‹æ•°æ®è¡¨ç±»å‹å¯ä»¥ä½¿ç”¨ <code>SHOW TABLE STATUS</code> è¯­å¥ï¼Œå¹¶ä½¿ç”¨ <code>\G</code> æ ¼å¼åŒ–è¾“å‡ºã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">ENGINE</span> <span class="token operator">=</span> MyISAM<span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">SHOW</span> <span class="token keyword">TABLE</span> <span class="token keyword">STATUS</span> <span class="token operator">LIKE</span> <span class="token string">'testalter_tbl'</span> \G<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">1.</span> <span class="token keyword">row</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>           Name: testalter_tbl           <span class="token keyword">Type</span>: MyISAM     Row_format: <span class="token keyword">Fixed</span>           <span class="token keyword">Rows</span>: <span class="token number">0</span> Avg_row_length: <span class="token number">0</span>    Data_length: <span class="token number">0</span>Max_data_length: <span class="token number">25769803775</span>   Index_length: <span class="token number">1024</span>      Data_free: <span class="token number">0</span> <span class="token keyword">Auto_increment</span>: <span class="token boolean">NULL</span>    Create_time: <span class="token number">2007</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">03</span> <span class="token number">08</span>:<span class="token number">04</span>:<span class="token number">36</span>    Update_time: <span class="token number">2007</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">03</span> <span class="token number">08</span>:<span class="token number">04</span>:<span class="token number">36</span>     Check_time: <span class="token boolean">NULL</span> Create_options:        <span class="token keyword">Comment</span>:<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="ä¿®æ”¹è¡¨å"><a href="#ä¿®æ”¹è¡¨å" class="headerlink" title="ä¿®æ”¹è¡¨å"></a>ä¿®æ”¹è¡¨å</h2><p>å¦‚æœéœ€è¦ä¿®æ”¹æ•°æ®è¡¨çš„åç§°ï¼Œå¯ä»¥åœ¨ <code>ALTER TABLE</code> è¯­å¥ä¸­ä½¿ç”¨ <code>RENAME</code> å­å¥æ¥å®ç°ã€‚</p><p>å°è¯•ä»¥ä¸‹å®ä¾‹å°†æ•°æ®è¡¨ <code>testalter_tbl</code> é‡å‘½åä¸º <code>alter_tbl</code>ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> alter_tbl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><code>ALTER</code> å‘½ä»¤è¿˜å¯ä»¥ç”¨æ¥åˆ›å»ºåŠåˆ é™¤ MySQL æ•°æ®è¡¨çš„ç´¢å¼•ï¼Œè¯¥åŠŸèƒ½æˆ‘ä»¬ä¼šåœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ä»‹ç»ã€‚</p><h1 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h1><p>MySQL äº‹åŠ¡ä¸»è¦ç”¨äºå¤„ç†æ“ä½œé‡å¤§ï¼Œå¤æ‚åº¦é«˜çš„æ•°æ®ã€‚æ¯”å¦‚è¯´ï¼Œåœ¨äººå‘˜ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä½ åˆ é™¤ä¸€ä¸ªäººå‘˜ï¼Œä½ æ—¢éœ€è¦åˆ é™¤äººå‘˜çš„åŸºæœ¬èµ„æ–™ï¼Œä¹Ÿè¦åˆ é™¤å’Œè¯¥äººå‘˜ç›¸å…³çš„ä¿¡æ¯ï¼Œå¦‚ä¿¡ç®±ï¼Œæ–‡ç« ç­‰ç­‰ï¼Œè¿™æ ·ï¼Œè¿™äº›æ•°æ®åº“æ“ä½œè¯­å¥å°±æ„æˆä¸€ä¸ªäº‹åŠ¡ã€‚</p><ul><li>åœ¨ MySQL ä¸­åªæœ‰ä½¿ç”¨äº† <code>InnoDB</code> æ•°æ®åº“å¼•æ“çš„æ•°æ®åº“æˆ–è¡¨æ‰æ”¯æŒäº‹åŠ¡ã€‚</li><li>äº‹åŠ¡å¤„ç†å¯ä»¥ç”¨æ¥ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ï¼Œä¿è¯æˆæ‰¹çš„ SQL è¯­å¥è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚</li><li>äº‹åŠ¡ç”¨æ¥ç®¡ç† <code>INSERT</code>ï¼Œ<code>UPDATE</code>, <code>DELETE</code> è¯­å¥ã€‚</li></ul><p>ä¸€èˆ¬æ¥è¯´ï¼Œäº‹åŠ¡æ˜¯å¿…é¡»æ»¡è¶³ 4 ä¸ªæ¡ä»¶ï¼ˆ<code>ACID</code>ï¼‰ï¼šåŸå­æ€§ï¼ˆAtomicityï¼Œæˆ–ç§°ä¸å¯åˆ†å‰²æ€§ï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼Œåˆç§°ç‹¬ç«‹æ€§ï¼‰ã€æŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚</p><ul><li>åŸå­æ€§ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œä¸ä¼šç»“æŸåœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æ¥æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€æ ·ã€‚</li><li>ä¸€è‡´æ€§ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ï¼Œè¿™åŒ…å«èµ„æ–™çš„ç²¾ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘æ€§åœ°å®Œæˆé¢„å®šçš„å·¥ä½œã€‚</li><li>éš”ç¦»æ€§ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚</li><li>æŒä¹…æ€§ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</li></ul><p>åœ¨ MySQL å‘½ä»¤è¡Œçš„é»˜è®¤è®¾ç½®ä¸‹ï¼Œäº‹åŠ¡éƒ½æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œå³æ‰§è¡Œ SQL è¯­å¥åå°±ä¼šé©¬ä¸Šæ‰§è¡Œ <code>COMMIT</code> æ“ä½œã€‚å› æ­¤è¦æ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡åŠ¡é¡»ä½¿ç”¨å‘½ä»¤ <code>BEGIN</code> æˆ– <code>START TRANSACTION</code>ï¼Œæˆ–è€…æ‰§è¡Œå‘½ä»¤ <code>SET AUTOCOMMIT=0</code>ï¼Œç”¨æ¥ç¦æ­¢ä½¿ç”¨å½“å‰ä¼šè¯çš„è‡ªåŠ¨æäº¤ã€‚</p><p>äº‹åŠ¡æ§åˆ¶è¯­å¥ï¼š</p><ul><li><code>BEGIN</code> æˆ– <code>START TRANSACTION</code> æ˜¾å¼åœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼›</li><li><code>COMMIT</code> ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>COMMIT WORK</code>ï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚<code>COMMIT</code> ä¼šæäº¤äº‹åŠ¡ï¼Œå¹¶ä½¿å·²å¯¹æ•°æ®åº“è¿›è¡Œçš„æ‰€æœ‰ä¿®æ”¹æˆä¸ºæ°¸ä¹…æ€§çš„ï¼›</li><li><code>ROLLBACK</code> ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>ROLLBACK WORK</code>ï¼Œä¸è¿‡äºŒè€…æ˜¯ç­‰ä»·çš„ã€‚å›æ»šä¼šç»“æŸç”¨æˆ·çš„äº‹åŠ¡ï¼Œå¹¶æ’¤é”€æ­£åœ¨è¿›è¡Œçš„æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ï¼›</li><li><code>SAVEPOINT identifier</code>ï¼Œ<code>SAVEPOINT</code> å…è®¸åœ¨äº‹åŠ¡ä¸­åˆ›å»ºä¸€ä¸ªä¿å­˜ç‚¹ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­å¯ä»¥æœ‰å¤šä¸ª <code>SAVEPOINT</code>ï¼›</li><li><code>RELEASE SAVEPOINT identifier</code> åˆ é™¤ä¸€ä¸ªäº‹åŠ¡çš„ä¿å­˜ç‚¹ï¼Œå½“æ²¡æœ‰æŒ‡å®šçš„ä¿å­˜ç‚¹æ—¶ï¼Œæ‰§è¡Œè¯¥è¯­å¥ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼›</li><li><code>ROLLBACK TO identifier</code> æŠŠäº‹åŠ¡å›æ»šåˆ°æ ‡è®°ç‚¹ï¼›</li><li><code>SET TRANSACTION</code> ç”¨æ¥è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚<code>InnoDB</code> å­˜å‚¨å¼•æ“æä¾›äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰<code>READ UNCOMMITTED</code>ã€<code>READ COMMITTED</code>ã€<code>REPEATABLE READ</code> å’Œ <code>SERIALIZABLE</code>ã€‚</li></ul><p>MYSQL äº‹åŠ¡å¤„ç†ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ol><li><p>ç”¨ <code>BEGIN</code>ï¼Œ<code>ROLLBACK</code>ï¼Œ<code>COMMIT</code> æ¥å®ç°</p><ul><li><code>BEGIN</code>ï¼šå¼€å§‹ä¸€ä¸ªäº‹åŠ¡</li><li><code>ROLLBACK</code>ï¼šäº‹åŠ¡å›æ»š</li><li><code>COMMIT</code>ï¼šäº‹åŠ¡ç¡®è®¤</li></ul></li><li><p>ç›´æ¥ç”¨ <code>SET</code> æ¥æ”¹å˜ MySQL çš„è‡ªåŠ¨æäº¤æ¨¡å¼:</p><ul><li><code>SET AUTOCOMMIT=0</code>ï¼šç¦æ­¢è‡ªåŠ¨æäº¤</li><li><code>SET AUTOCOMMIT=1</code>ï¼šå¼€å¯è‡ªåŠ¨æäº¤</li></ul></li></ol><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> transaction_test<span class="token punctuation">(</span> id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span><span class="token punctuation">;</span>  <span class="token comment"># åˆ›å»ºæ•°æ®è¡¨</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.04</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> transaction_test<span class="token punctuation">;</span>Empty <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">BEGIN</span><span class="token punctuation">;</span>  <span class="token comment"># å¼€å§‹äº‹åŠ¡</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> transaction_test <span class="token keyword">VALUE</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> transaction_test <span class="token keyword">VALUE</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">COMMIT</span><span class="token punctuation">;</span>  <span class="token comment"># æäº¤äº‹åŠ¡</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> transaction_test<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span> id   <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span> <span class="token number">5</span>    <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">6</span>    <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">BEGIN</span><span class="token punctuation">;</span>  <span class="token comment"># å¼€å§‹äº‹åŠ¡</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> transaction_test <span class="token keyword">VALUE</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">rollback</span><span class="token punctuation">;</span>  <span class="token comment"># å›æ»š</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> transaction_test<span class="token punctuation">;</span>  <span class="token comment"># å› ä¸ºå›æ»šæ‰€ä»¥æ•°æ®æ²¡æœ‰æ’å…¥</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span> id   <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span> <span class="token number">5</span>    <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">6</span>    <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h1><p>MySQL ç´¢å¼•çš„å»ºç«‹å¯¹äº MySQL çš„é«˜æ•ˆè¿è¡Œæ˜¯å¾ˆé‡è¦çš„ï¼Œç´¢å¼•å¯ä»¥å¤§å¤§æé«˜ MySQL çš„æ£€ç´¢é€Ÿåº¦ã€‚</p><p>æ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æœåˆç†çš„è®¾è®¡ä¸”ä½¿ç”¨ç´¢å¼•çš„ MySQL æ˜¯ä¸€è¾†å…°åšåŸºå°¼çš„è¯ï¼Œé‚£ä¹ˆæ²¡æœ‰è®¾è®¡å’Œä½¿ç”¨ç´¢å¼•çš„ MySQL å°±æ˜¯ä¸€ä¸ªäººåŠ›ä¸‰è½®è½¦ã€‚</p><p>æ‹¿æ±‰è¯­å­—å…¸çš„ç›®å½•é¡µï¼ˆç´¢å¼•ï¼‰æ‰“æ¯”æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰æ‹¼éŸ³ã€ç¬”ç”»ã€åæ—éƒ¨é¦–ç­‰æ’åºçš„ç›®å½•ï¼ˆç´¢å¼•ï¼‰å¿«é€ŸæŸ¥æ‰¾åˆ°éœ€è¦çš„å­—ã€‚</p><p>ç´¢å¼•åˆ†å•åˆ—ç´¢å¼•å’Œç»„åˆç´¢å¼•ã€‚å•åˆ—ç´¢å¼•ï¼Œå³ä¸€ä¸ªç´¢å¼•åªåŒ…å«å•ä¸ªåˆ—ï¼Œä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå•åˆ—ç´¢å¼•ï¼Œä½†è¿™ä¸æ˜¯ç»„åˆç´¢å¼•ã€‚ç»„åˆç´¢å¼•ï¼Œå³ä¸€ä¸ªç´¢å¼•åŒ…å«å¤šä¸ªåˆ—ã€‚</p><p>åˆ›å»ºç´¢å¼•æ—¶ï¼Œä½ éœ€è¦ç¡®ä¿è¯¥ç´¢å¼•æ˜¯åº”ç”¨åœ¨ SQL æŸ¥è¯¢è¯­å¥çš„æ¡ä»¶ï¼ˆä¸€èˆ¬ä½œä¸º <code>WHERE</code> å­å¥çš„æ¡ä»¶ï¼‰ã€‚</p><p>å®é™…ä¸Šï¼Œç´¢å¼•ä¹Ÿæ˜¯ä¸€å¼ è¡¨ï¼Œè¯¥è¡¨ä¿å­˜äº†ä¸»é”®ä¸ç´¢å¼•å­—æ®µï¼Œå¹¶æŒ‡å‘å®ä½“è¡¨çš„è®°å½•ã€‚</p><p>ä¸Šé¢éƒ½åœ¨è¯´ä½¿ç”¨ç´¢å¼•çš„å¥½å¤„ï¼Œä½†è¿‡å¤šçš„ä½¿ç”¨ç´¢å¼•å°†ä¼šé€ æˆæ»¥ç”¨ã€‚å› æ­¤ç´¢å¼•ä¹Ÿä¼šæœ‰å®ƒçš„ç¼ºç‚¹ï¼šè™½ç„¶ç´¢å¼•å¤§å¤§æé«˜äº†æŸ¥è¯¢é€Ÿåº¦ï¼ŒåŒæ—¶å´ä¼šé™ä½æ›´æ–°è¡¨çš„é€Ÿåº¦ï¼Œå¦‚å¯¹è¡¨è¿›è¡Œ <code>INSERT</code>ã€<code>UPDATE</code> å’Œ <code>DELETE</code>ã€‚å› ä¸ºæ›´æ–°è¡¨æ—¶ï¼ŒMySQL ä¸ä»…è¦ä¿å­˜æ•°æ®ï¼Œè¿˜è¦ä¿å­˜ä¸€ä¸‹ç´¢å¼•æ–‡ä»¶ã€‚</p><p>å»ºç«‹ç´¢å¼•ä¼šå ç”¨ç£ç›˜ç©ºé—´çš„ç´¢å¼•æ–‡ä»¶ã€‚</p><h2 id="æ™®é€šç´¢å¼•"><a href="#æ™®é€šç´¢å¼•" class="headerlink" title="æ™®é€šç´¢å¼•"></a>æ™®é€šç´¢å¼•</h2><h3 id="åˆ›å»ºç´¢å¼•"><a href="#åˆ›å»ºç´¢å¼•" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h3><p>è¿™æ˜¯æœ€åŸºæœ¬çš„ç´¢å¼•ï¼Œå®ƒæ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚å®ƒæœ‰ä»¥ä¸‹å‡ ç§åˆ›å»ºæ–¹å¼ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> indexName <span class="token keyword">ON</span> table_name <span class="token punctuation">(</span>column_name<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>å¦‚æœæ˜¯ <code>CHAR</code>ï¼Œ<code>VARCHAR</code> ç±»å‹ï¼Œ<code>length</code> å¯ä»¥å°äºå­—æ®µå®é™…é•¿åº¦ï¼›å¦‚æœæ˜¯ <code>BLOB</code> å’Œ <code>TEXT</code> ç±»å‹ï¼Œå¿…é¡»æŒ‡å®š <code>length</code>ã€‚</p><h3 id="ä¿®æ”¹è¡¨ç»“æ„-æ·»åŠ ç´¢å¼•"><a href="#ä¿®æ”¹è¡¨ç»“æ„-æ·»åŠ ç´¢å¼•" class="headerlink" title="ä¿®æ”¹è¡¨ç»“æ„(æ·»åŠ ç´¢å¼•)"></a>ä¿®æ”¹è¡¨ç»“æ„(æ·»åŠ ç´¢å¼•)</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">table</span> tableName <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> indexName<span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h3 id="åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š"><a href="#åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š" class="headerlink" title="åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š"></a>åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> mytable<span class="token punctuation">(</span>  ID <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token keyword">INDEX</span> <span class="token punctuation">[</span>indexName<span class="token punctuation">]</span> <span class="token punctuation">(</span>username<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h3 id="åˆ é™¤ç´¢å¼•çš„è¯­æ³•"><a href="#åˆ é™¤ç´¢å¼•çš„è¯­æ³•" class="headerlink" title="åˆ é™¤ç´¢å¼•çš„è¯­æ³•"></a>åˆ é™¤ç´¢å¼•çš„è¯­æ³•</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> <span class="token punctuation">[</span>indexName<span class="token punctuation">]</span> <span class="token keyword">ON</span> mytable<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="å”¯ä¸€ç´¢å¼•"><a href="#å”¯ä¸€ç´¢å¼•" class="headerlink" title="å”¯ä¸€ç´¢å¼•"></a>å”¯ä¸€ç´¢å¼•</h2><p>å®ƒä¸å‰é¢çš„æ™®é€šç´¢å¼•ç±»ä¼¼ï¼Œä¸åŒçš„å°±æ˜¯ï¼šç´¢å¼•åˆ—çš„å€¼å¿…é¡»å”¯ä¸€ï¼Œä½†å…è®¸æœ‰ç©ºå€¼ã€‚å¦‚æœæ˜¯ç»„åˆç´¢å¼•ï¼Œåˆ™åˆ—å€¼çš„ç»„åˆå¿…é¡»å”¯ä¸€ã€‚å®ƒæœ‰ä»¥ä¸‹å‡ ç§åˆ›å»ºæ–¹å¼ï¼š</p><h3 id="åˆ›å»ºç´¢å¼•-1"><a href="#åˆ›å»ºç´¢å¼•-1" class="headerlink" title="åˆ›å»ºç´¢å¼•"></a>åˆ›å»ºç´¢å¼•</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> indexName <span class="token keyword">ON</span> mytable<span class="token punctuation">(</span>username<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h3 id="ä¿®æ”¹è¡¨ç»“æ„"><a href="#ä¿®æ”¹è¡¨ç»“æ„" class="headerlink" title="ä¿®æ”¹è¡¨ç»“æ„"></a>ä¿®æ”¹è¡¨ç»“æ„</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">table</span> mytable <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span> <span class="token punctuation">[</span>indexName<span class="token punctuation">]</span> <span class="token punctuation">(</span>username<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h3 id="åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š-1"><a href="#åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š-1" class="headerlink" title="åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š"></a>åˆ›å»ºè¡¨çš„æ—¶å€™ç›´æ¥æŒ‡å®š</h3><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> mytable<span class="token punctuation">(</span>ID <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token keyword">UNIQUE</span> <span class="token punctuation">[</span>indexName<span class="token punctuation">]</span> <span class="token punctuation">(</span>username<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="ä½¿ç”¨ALTER-å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ç´¢å¼•"><a href="#ä½¿ç”¨ALTER-å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ç´¢å¼•" class="headerlink" title="ä½¿ç”¨ALTER å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ç´¢å¼•"></a>ä½¿ç”¨ALTER å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ç´¢å¼•</h2><p>æœ‰å››ç§æ–¹å¼æ¥æ·»åŠ æ•°æ®è¡¨çš„ç´¢å¼•ï¼š</p><ul><li><code>ALTER TABLE tbl_name ADD PRIMARY KEY (column_list)</code>ï¼šè¯¥è¯­å¥æ·»åŠ ä¸€ä¸ªä¸»é”®ï¼Œè¿™æ„å‘³ç€ç´¢å¼•å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä¸”ä¸èƒ½ä¸º <code>NULL</code>ã€‚</li><li><code>ALTER TABLE tbl_name ADD UNIQUE index_name (column_list)</code>ï¼šè¿™æ¡è¯­å¥åˆ›å»ºç´¢å¼•çš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼ˆé™¤äº† <code>NULL</code> å¤–ï¼Œ<code>NULL</code> å¯èƒ½ä¼šå‡ºç°å¤šæ¬¡ï¼‰ã€‚</li><li><code>ALTER TABLE tbl_name ADD INDEX index_name (column_list)</code>ï¼šæ·»åŠ æ™®é€šç´¢å¼•ï¼Œç´¢å¼•å€¼å¯å‡ºç°å¤šæ¬¡ã€‚</li><li><code>ALTER TABLE tbl_name ADD FULLTEXT index_name (column_list)</code>ï¼šè¯¥è¯­å¥æŒ‡å®šäº†ç´¢å¼•ä¸º <code>FULLTEXT</code>ï¼Œç”¨äºå…¨æ–‡ç´¢å¼•ã€‚</li></ul><p>ä»¥ä¸‹å®ä¾‹ä¸ºåœ¨è¡¨ä¸­æ·»åŠ ç´¢å¼•ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä½ è¿˜å¯ä»¥åœ¨ <code>ALTER</code> å‘½ä»¤ä¸­ä½¿ç”¨ <code>DROP</code> å­å¥æ¥åˆ é™¤ç´¢å¼•ã€‚å°è¯•ä»¥ä¸‹å®ä¾‹åˆ é™¤ç´¢å¼•:</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> c<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h2 id="ä½¿ç”¨-ALTER-å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ä¸»é”®"><a href="#ä½¿ç”¨-ALTER-å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ä¸»é”®" class="headerlink" title="ä½¿ç”¨ ALTER å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ä¸»é”®"></a>ä½¿ç”¨ ALTER å‘½ä»¤æ·»åŠ å’Œåˆ é™¤ä¸»é”®</h2><p>ä¸»é”®ä½œç”¨äºåˆ—ä¸Šï¼ˆå¯ä»¥ä¸€ä¸ªåˆ—æˆ–å¤šä¸ªåˆ—è”åˆä¸»é”®ï¼‰ï¼Œæ·»åŠ ä¸»é”®ç´¢å¼•æ—¶ï¼Œä½ éœ€è¦ç¡®ä¿è¯¥ä¸»é”®é»˜è®¤ä¸ä¸ºç©ºï¼ˆ<code>NOT NULL</code>ï¼‰ã€‚å®ä¾‹å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">MODIFY</span> i <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>ALTER</code> å‘½ä»¤åˆ é™¤ä¸»é”®ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> testalter_tbl <span class="token keyword">DROP</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>åˆ é™¤ä¸»é”®æ—¶åªéœ€æŒ‡å®š <code>PRIMARY KEY</code>ï¼Œä½†åœ¨åˆ é™¤ç´¢å¼•æ—¶ï¼Œä½ å¿…é¡»çŸ¥é“ç´¢å¼•åã€‚</p><h2 id="æ˜¾ç¤ºç´¢å¼•ä¿¡æ¯"><a href="#æ˜¾ç¤ºç´¢å¼•ä¿¡æ¯" class="headerlink" title="æ˜¾ç¤ºç´¢å¼•ä¿¡æ¯"></a>æ˜¾ç¤ºç´¢å¼•ä¿¡æ¯</h2><p>ä½ å¯ä»¥ä½¿ç”¨ <code>SHOW INDEX</code> å‘½ä»¤æ¥åˆ—å‡ºè¡¨ä¸­çš„ç›¸å…³çš„ç´¢å¼•ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡æ·»åŠ  <code>\G</code> æ¥æ ¼å¼åŒ–è¾“å‡ºä¿¡æ¯ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> table_name<span class="token punctuation">;</span> \G<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h1 id="ä¸´æ—¶è¡¨"><a href="#ä¸´æ—¶è¡¨" class="headerlink" title="ä¸´æ—¶è¡¨"></a>ä¸´æ—¶è¡¨</h1><p>MySQL ä¸´æ—¶è¡¨åœ¨æˆ‘ä»¬éœ€è¦ä¿å­˜ä¸€äº›ä¸´æ—¶æ•°æ®æ—¶æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä¸´æ—¶è¡¨åªåœ¨å½“å‰è¿æ¥å¯è§ï¼Œå½“å…³é—­è¿æ¥æ—¶ï¼ŒMySQL ä¼šè‡ªåŠ¨åˆ é™¤è¡¨å¹¶é‡Šæ”¾æ‰€æœ‰ç©ºé—´ã€‚</p><p>ä¸´æ—¶è¡¨åœ¨ MySQL 3.23 ç‰ˆæœ¬ä¸­æ·»åŠ ï¼Œå¦‚æœä½ çš„ MySQL ç‰ˆæœ¬ä½äº 3.23 ç‰ˆæœ¬å°±æ— æ³•ä½¿ç”¨ MySQL çš„ä¸´æ—¶è¡¨ã€‚ä¸è¿‡ç°åœ¨ä¸€èˆ¬å¾ˆå°‘æœ‰å†ä½¿ç”¨è¿™ä¹ˆä½ç‰ˆæœ¬çš„ MySQL æ•°æ®åº“æœåŠ¡äº†ã€‚</p><p>MySQL ä¸´æ—¶è¡¨åªåœ¨å½“å‰è¿æ¥å¯è§ï¼Œå¦‚æœä½ ä½¿ç”¨ PHP è„šæœ¬æ¥åˆ›å»º MySQL ä¸´æ—¶è¡¨ï¼Œé‚£æ¯å½“ PHP è„šæœ¬æ‰§è¡Œå®Œæˆåï¼Œè¯¥ä¸´æ—¶è¡¨ä¹Ÿä¼šè‡ªåŠ¨é”€æ¯ã€‚</p><p>å¦‚æœä½ ä½¿ç”¨äº†å…¶ä»– MySQL å®¢æˆ·ç«¯ç¨‹åºè¿æ¥ MySQL æ•°æ®åº“æœåŠ¡å™¨æ¥åˆ›å»ºä¸´æ—¶è¡¨ï¼Œé‚£ä¹ˆåªæœ‰åœ¨å…³é—­å®¢æˆ·ç«¯ç¨‹åºæ—¶æ‰ä¼šé”€æ¯ä¸´æ—¶è¡¨ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨é”€æ¯ã€‚</p><h2 id="åˆ›å»º-MySQL-ä¸´æ—¶è¡¨"><a href="#åˆ›å»º-MySQL-ä¸´æ—¶è¡¨" class="headerlink" title="åˆ›å»º MySQL ä¸´æ—¶è¡¨"></a>åˆ›å»º MySQL ä¸´æ—¶è¡¨</h2><p>ä»¥ä¸‹å±•ç¤ºäº†ä½¿ç”¨ <code>TEMPORARY</code> å…³é”®å­—åˆ›å»º MySQL ä¸´æ—¶è¡¨çš„ç®€å•å®ä¾‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">TEMPORARY</span> <span class="token keyword">TABLE</span> SalesSummary <span class="token punctuation">(</span>    <span class="token operator">-</span><span class="token operator">></span> product_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> total_sales <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.00</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> avg_unit_price <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.00</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> total_units_sold <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> SalesSummary    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span>product_name<span class="token punctuation">,</span> total_sales<span class="token punctuation">,</span> avg_unit_price<span class="token punctuation">,</span> total_units_sold<span class="token punctuation">)</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">VALUES</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token string">'cucumber'</span><span class="token punctuation">,</span> <span class="token number">100.25</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> SalesSummary<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------------+-------------+----------------+------------------+</span><span class="token operator">|</span> product_name <span class="token operator">|</span> total_sales <span class="token operator">|</span> avg_unit_price <span class="token operator">|</span> total_units_sold <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------+-------------+----------------+------------------+</span><span class="token operator">|</span> cucumber     <span class="token operator">|</span>      <span class="token number">100.25</span> <span class="token operator">|</span>          <span class="token number">90.00</span> <span class="token operator">|</span>                <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------+-------------+----------------+------------------+</span><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>ç”¨æŸ¥è¯¢ç›´æ¥åˆ›å»ºä¸´æ—¶è¡¨ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TEMPORARY</span> <span class="token keyword">TABLE</span> ä¸´æ—¶è¡¨å <span class="token keyword">AS</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> <span class="token operator">*</span>  <span class="token keyword">FROM</span> æ—§çš„è¡¨å<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“ä½ ä½¿ç”¨ <code>SHOW TABLES</code> å‘½ä»¤æ˜¾ç¤ºæ•°æ®è¡¨åˆ—è¡¨æ—¶ï¼Œä½ å°†æ— æ³•çœ‹åˆ° <code>SalesSummary</code> è¡¨ã€‚</p><p>å¦‚æœä½ é€€å‡ºå½“å‰ MySQL ä¼šè¯ï¼Œå†ä½¿ç”¨ <code>SELECT</code> å‘½ä»¤æ¥è¯»å–åŸå…ˆåˆ›å»ºçš„ä¸´æ—¶è¡¨æ•°æ®ï¼Œé‚£ä½ ä¼šå‘ç°æ•°æ®åº“ä¸­æ²¡æœ‰è¯¥è¡¨çš„å­˜åœ¨ï¼Œå› ä¸ºåœ¨ä½ é€€å‡ºæ—¶è¯¥ä¸´æ—¶è¡¨å·²ç»è¢«é”€æ¯äº†ã€‚</p><h2 id="åˆ é™¤-MySQL-ä¸´æ—¶è¡¨"><a href="#åˆ é™¤-MySQL-ä¸´æ—¶è¡¨" class="headerlink" title="åˆ é™¤ MySQL ä¸´æ—¶è¡¨"></a>åˆ é™¤ MySQL ä¸´æ—¶è¡¨</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ æ–­å¼€ä¸æ•°æ®åº“çš„è¿æ¥åï¼Œä¸´æ—¶è¡¨å°±ä¼šè‡ªåŠ¨è¢«é”€æ¯ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨å½“å‰ MySQL ä¼šè¯ä½¿ç”¨ <code>DROP TABLE</code> å‘½ä»¤æ¥æ‰‹åŠ¨åˆ é™¤ä¸´æ—¶è¡¨ã€‚</p><p>ä»¥ä¸‹æ˜¯æ‰‹åŠ¨åˆ é™¤ä¸´æ—¶è¡¨çš„å®ä¾‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">TEMPORARY</span> <span class="token keyword">TABLE</span> SalesSummary <span class="token punctuation">(</span>    <span class="token operator">-</span><span class="token operator">></span> product_name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> total_sales <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.00</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> avg_unit_price <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0.00</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> total_units_sold <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> SalesSummary    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span>product_name<span class="token punctuation">,</span> total_sales<span class="token punctuation">,</span> avg_unit_price<span class="token punctuation">,</span> total_units_sold<span class="token punctuation">)</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">VALUES</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token string">'cucumber'</span><span class="token punctuation">,</span> <span class="token number">100.25</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> SalesSummary<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------------+-------------+----------------+------------------+</span><span class="token operator">|</span> product_name <span class="token operator">|</span> total_sales <span class="token operator">|</span> avg_unit_price <span class="token operator">|</span> total_units_sold <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------+-------------+----------------+------------------+</span><span class="token operator">|</span> cucumber     <span class="token operator">|</span>      <span class="token number">100.25</span> <span class="token operator">|</span>          <span class="token number">90.00</span> <span class="token operator">|</span>                <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------+-------------+----------------+------------------+</span><span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> SalesSummary<span class="token punctuation">;</span>mysql<span class="token operator">></span>  <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> SalesSummary<span class="token punctuation">;</span>ERROR <span class="token number">1146</span>: <span class="token keyword">Table</span> <span class="token string">'TestDB.SalesSummary'</span> doesn't exist<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h1 id="å¤åˆ¶è¡¨"><a href="#å¤åˆ¶è¡¨" class="headerlink" title="å¤åˆ¶è¡¨"></a>å¤åˆ¶è¡¨</h1><p>å¦‚æœæˆ‘ä»¬éœ€è¦å®Œå…¨çš„å¤åˆ¶ MySQL çš„æ•°æ®è¡¨ï¼ŒåŒ…æ‹¬è¡¨çš„ç»“æ„ï¼Œç´¢å¼•ï¼Œé»˜è®¤å€¼ç­‰ã€‚å¦‚æœä»…ä»…ä½¿ç”¨<code>CREATE TABLE ... SELECT</code> å‘½ä»¤ï¼Œæ˜¯æ— æ³•å®ç°çš„ã€‚</p><p>å®Œæ•´çš„å¤åˆ¶ MySQL æ•°æ®è¡¨çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ä½¿ç”¨ <code>SHOW CREATE TABLE</code> å‘½ä»¤è·å–åˆ›å»ºæ•°æ®è¡¨ï¼ˆ<code>CREATE TABLE</code>ï¼‰è¯­å¥ï¼Œè¯¥è¯­å¥åŒ…å«äº†åŸæ•°æ®è¡¨çš„ç»“æ„ï¼Œç´¢å¼•ç­‰ã€‚</li><li>å¤åˆ¶ä»¥ä¸‹å‘½ä»¤æ˜¾ç¤ºçš„SQLè¯­å¥ï¼Œä¿®æ”¹æ•°æ®è¡¨åï¼Œå¹¶æ‰§è¡Œ SQL è¯­å¥ï¼Œé€šè¿‡ä»¥ä¸Šå‘½ä»¤å°†å®Œå…¨çš„å¤åˆ¶æ•°æ®è¡¨ç»“æ„ã€‚</li><li>å¦‚æœä½ æƒ³å¤åˆ¶è¡¨çš„å†…å®¹ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ <code>INSERT INTO ... SELECT</code> è¯­å¥æ¥å®ç°ã€‚</li></ol><p>å°è¯•ä»¥ä¸‹å®ä¾‹æ¥å¤åˆ¶è¡¨ <code>tbl</code>ã€‚</p><ol><li><p>è·å–æ•°æ®è¡¨çš„å®Œæ•´ç»“æ„ã€‚</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tbl \G<span class="token punctuation">;</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">1.</span> <span class="token keyword">row</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>      <span class="token keyword">Table</span>: tbl<span class="token keyword">Create</span> <span class="token keyword">Table</span>: <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>tbl<span class="token punctuation">`</span> <span class="token punctuation">(</span>  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>title<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>submission_date<span class="token punctuation">`</span> <span class="token keyword">date</span> <span class="token keyword">default</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>  <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span> <span class="token punctuation">`</span>AUTHOR_INDEX<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>author<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>ERROR:<span class="token keyword">No</span> query specified<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>ä¿®æ”¹SQLè¯­å¥çš„æ•°æ®è¡¨åï¼Œå¹¶æ‰§è¡ŒSQLè¯­å¥ã€‚</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>clone_tbl<span class="token punctuation">`</span> <span class="token punctuation">(</span>  <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>  <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">`</span>title<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">,</span>  <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">`</span>author<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">,</span>  <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">`</span>submission_date<span class="token punctuation">`</span> <span class="token keyword">date</span> <span class="token keyword">default</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>  <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span> <span class="token punctuation">`</span>AUTHOR_INDEX<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>author<span class="token punctuation">`</span><span class="token punctuation">)</span>  <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">1.80</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>æ‰§è¡Œå®Œç¬¬äºŒæ­¥éª¤åï¼Œä½ å°†åœ¨æ•°æ®åº“ä¸­åˆ›å»ºæ–°çš„å…‹éš†è¡¨ clone_tblã€‚ å¦‚æœä½ æƒ³æ‹·è´æ•°æ®è¡¨çš„æ•°æ®ä½ å¯ä»¥ä½¿ç”¨ INSERT INTO... SELECT è¯­å¥æ¥å®ç°ã€‚</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> clone_tbl <span class="token punctuation">(</span>id<span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span>                        title<span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span>                        author<span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span>                        submission_date<span class="token punctuation">)</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">SELECT</span> id<span class="token punctuation">,</span>title<span class="token punctuation">,</span> author<span class="token punctuation">,</span> submission_date    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">FROM</span> tbl<span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.07</span> sec<span class="token punctuation">)</span>Records: <span class="token number">3</span>  Duplicates: <span class="token number">0</span>  <span class="token keyword">Warnings</span>: <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ‰§è¡Œä»¥ä¸Šæ­¥éª¤åï¼Œä½ å°†å®Œæ•´çš„å¤åˆ¶è¡¨ï¼ŒåŒ…æ‹¬è¡¨ç»“æ„åŠè¡¨æ•°æ®ã€‚</p></li></ol><p><strong>å¦ä¸€ç§å®Œæ•´å¤åˆ¶è¡¨çš„æ–¹æ³•:</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> targetTable <span class="token operator">LIKE</span> sourceTable<span class="token punctuation">;</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> targetTable <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> sourceTable<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p><strong>å¯ä»¥æ‹·è´ä¸€ä¸ªè¡¨ä¸­å…¶ä¸­çš„ä¸€äº›å­—æ®µ:</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> newadmin <span class="token keyword">AS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> username<span class="token punctuation">,</span> password <span class="token keyword">FROM</span> admin<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>å¯ä»¥å°†æ–°å»ºçš„è¡¨çš„å­—æ®µæ”¹å:</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> newadmin <span class="token keyword">AS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> username <span class="token keyword">AS</span> uname<span class="token punctuation">,</span> password <span class="token keyword">AS</span> pass <span class="token keyword">FROM</span> admin<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>å¯ä»¥æ‹·è´ä¸€éƒ¨åˆ†æ•°æ®:</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> newadmin <span class="token keyword">AS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> admin <span class="token keyword">WHERE</span> <span class="token keyword">LEFT</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">'s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p><strong>å¯ä»¥åœ¨åˆ›å»ºè¡¨çš„åŒæ—¶å®šä¹‰è¡¨ä¸­çš„å­—æ®µä¿¡æ¯:</strong></p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> newadmin <span class="token punctuation">(</span>id <span class="token keyword">INTEGER</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> admin<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h1 id="å…ƒæ•°æ®"><a href="#å…ƒæ•°æ®" class="headerlink" title="å…ƒæ•°æ®"></a>å…ƒæ•°æ®</h1><ul><li>æŸ¥è¯¢ç»“æœä¿¡æ¯ï¼š<code>SELECT</code>ï¼Œ<code>UPDATE</code> æˆ– <code>DELETE</code> è¯­å¥å½±å“çš„è®°å½•æ•°ã€‚</li><li>æ•°æ®åº“å’Œæ•°æ®è¡¨çš„ä¿¡æ¯ï¼šåŒ…å«äº†æ•°æ®åº“åŠæ•°æ®è¡¨çš„ç»“æ„ä¿¡æ¯ã€‚</li><li>MySQL æœåŠ¡å™¨ä¿¡æ¯ï¼šåŒ…å«äº†æ•°æ®åº“æœåŠ¡å™¨çš„å½“å‰çŠ¶æ€ï¼Œç‰ˆæœ¬å·ç­‰ã€‚</li></ul><p>åœ¨ MySQL çš„å‘½ä»¤æç¤ºç¬¦ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„è·å–ä»¥ä¸ŠæœåŠ¡å™¨ä¿¡æ¯ã€‚</p><h2 id="è·å–æœåŠ¡å™¨å…ƒæ•°æ®"><a href="#è·å–æœåŠ¡å™¨å…ƒæ•°æ®" class="headerlink" title="è·å–æœåŠ¡å™¨å…ƒæ•°æ®"></a>è·å–æœåŠ¡å™¨å…ƒæ•°æ®</h2><p>ä»¥ä¸‹å‘½ä»¤è¯­å¥å¯ä»¥åœ¨ MySQL çš„å‘½ä»¤æç¤ºç¬¦ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨è„šæœ¬ä¸­ä½¿ç”¨ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">å‘½ä»¤</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">SELECT VERSION( )</td><td style="text-align:center">æœåŠ¡å™¨ç‰ˆæœ¬ä¿¡æ¯</td></tr><tr><td style="text-align:center">SELECT DATABASE( )</td><td style="text-align:center">å½“å‰æ•°æ®åº“åï¼ˆæˆ–è€…è¿”å›ç©ºï¼‰</td></tr><tr><td style="text-align:center">SELECT USER( )</td><td style="text-align:center">å½“å‰ç”¨æˆ·å</td></tr><tr><td style="text-align:center">SHOW STATUS</td><td style="text-align:center">æœåŠ¡å™¨çŠ¶æ€</td></tr><tr><td style="text-align:center">SHOW VARIABLES</td><td style="text-align:center">æœåŠ¡å™¨é…ç½®å˜é‡</td></tr></tbody></table></div><h1 id="åºåˆ—ä½¿ç”¨"><a href="#åºåˆ—ä½¿ç”¨" class="headerlink" title="åºåˆ—ä½¿ç”¨"></a>åºåˆ—ä½¿ç”¨</h1><p>MySQL åºåˆ—æ˜¯ä¸€ç»„æ•´æ•°ï¼š<code>1, 2, 3, ...</code>ï¼Œç”±äºä¸€å¼ æ•°æ®è¡¨åªèƒ½æœ‰ä¸€ä¸ªå­—æ®µè‡ªå¢ä¸»é”®ï¼Œå¦‚æœä½ æƒ³å®ç°å…¶ä»–å­—æ®µä¹Ÿå®ç°è‡ªåŠ¨å¢åŠ ï¼Œå°±å¯ä»¥ä½¿ç”¨ MySQL åºåˆ—æ¥å®ç°ã€‚</p><h2 id="ä½¿ç”¨-AUTO-INCREMENT"><a href="#ä½¿ç”¨-AUTO-INCREMENT" class="headerlink" title="ä½¿ç”¨ AUTO_INCREMENT"></a>ä½¿ç”¨ AUTO_INCREMENT</h2><p>MySQL ä¸­æœ€ç®€å•ä½¿ç”¨åºåˆ—çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ <code>AUTO_INCREMENT</code> æ¥å®šä¹‰åˆ—ã€‚</p><p>ä»¥ä¸‹å®ä¾‹ä¸­åˆ›å»ºäº†æ•°æ®è¡¨ <code>insect</code>ï¼Œ<code>insect</code> è¡¨ä¸­ <code>id</code> æ— éœ€æŒ‡å®šå€¼å¯å®ç°è‡ªåŠ¨å¢é•¿ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> insect    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span>    <span class="token operator">-</span><span class="token operator">></span> id <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token comment"># type of insect</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">date</span> <span class="token keyword">DATE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token comment"># date collected</span>    <span class="token operator">-</span><span class="token operator">></span> origin <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token comment"># where collected</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> insect <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token keyword">date</span><span class="token punctuation">,</span> origin<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'housefly'</span><span class="token punctuation">,</span> <span class="token string">'2001-09-10'</span><span class="token punctuation">,</span> <span class="token string">'kitchen'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'millipede'</span><span class="token punctuation">,</span> <span class="token string">'2001-09-10'</span><span class="token punctuation">,</span> <span class="token string">'driveway'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token string">'grasshopper'</span><span class="token punctuation">,</span> <span class="token string">'2001-09-10'</span><span class="token punctuation">,</span> <span class="token string">'front yard'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>Records: <span class="token number">3</span>  Duplicates: <span class="token number">0</span>  <span class="token keyword">Warnings</span>: <span class="token number">0</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> insect <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> id<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+-------------+------------+------------+</span><span class="token operator">|</span> id <span class="token operator">|</span> name        <span class="token operator">|</span> <span class="token keyword">date</span>       <span class="token operator">|</span> origin     <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+-------------+------------+------------+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> housefly    <span class="token operator">|</span> <span class="token number">2001</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">10</span> <span class="token operator">|</span> kitchen    <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> millipede   <span class="token operator">|</span> <span class="token number">2001</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">10</span> <span class="token operator">|</span> driveway   <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> grasshopper <span class="token operator">|</span> <span class="token number">2001</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">10</span> <span class="token operator">|</span> front yard <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+-------------+------------+------------+</span><span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è·å–AUTO-INCREMENTå€¼"><a href="#è·å–AUTO-INCREMENTå€¼" class="headerlink" title="è·å–AUTO_INCREMENTå€¼"></a>è·å–AUTO_INCREMENTå€¼</h2><p>åœ¨ MySQL çš„å®¢æˆ·ç«¯ä¸­ä½ å¯ä»¥ä½¿ç”¨ SQL ä¸­çš„ <code>LAST_INSERT_ID( )</code> å‡½æ•°æ¥è·å–æœ€åçš„æ’å…¥è¡¨ä¸­çš„è‡ªå¢åˆ—çš„å€¼ã€‚</p><h2 id="é‡ç½®åºåˆ—"><a href="#é‡ç½®åºåˆ—" class="headerlink" title="é‡ç½®åºåˆ—"></a>é‡ç½®åºåˆ—</h2><p>å¦‚æœä½ åˆ é™¤äº†æ•°æ®è¡¨ä¸­çš„å¤šæ¡è®°å½•ï¼Œå¹¶å¸Œæœ›å¯¹å‰©ä¸‹æ•°æ®çš„ <code>AUTO_INCREMENT</code> åˆ—è¿›è¡Œé‡æ–°æ’åˆ—ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡åˆ é™¤è‡ªå¢çš„åˆ—ï¼Œç„¶åé‡æ–°æ·»åŠ æ¥å®ç°ã€‚ä¸è¿‡è¯¥æ“ä½œè¦éå¸¸å°å¿ƒï¼Œå¦‚æœåœ¨åˆ é™¤çš„åŒæ—¶åˆæœ‰æ–°è®°å½•æ·»åŠ ï¼Œæœ‰å¯èƒ½ä¼šå‡ºç°æ•°æ®æ··ä¹±ã€‚æ“ä½œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> insect <span class="token keyword">DROP</span> id<span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> insect    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">ADD</span> id <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">FIRST</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="è®¾ç½®åºåˆ—çš„å¼€å§‹å€¼"><a href="#è®¾ç½®åºåˆ—çš„å¼€å§‹å€¼" class="headerlink" title="è®¾ç½®åºåˆ—çš„å¼€å§‹å€¼"></a>è®¾ç½®åºåˆ—çš„å¼€å§‹å€¼</h2><p>ä¸€èˆ¬æƒ…å†µä¸‹åºåˆ—çš„å¼€å§‹å€¼ä¸º 1ï¼Œä½†å¦‚æœä½ éœ€è¦æŒ‡å®šä¸€ä¸ªå¼€å§‹å€¼ 100ï¼Œé‚£æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹è¯­å¥æ¥å®ç°ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> insect    <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">(</span>    <span class="token operator">-</span><span class="token operator">></span> id <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">date</span> <span class="token keyword">DATE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token operator">-</span><span class="token operator">></span> origin <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token keyword">engine</span><span class="token operator">=</span><span class="token keyword">innodb</span> <span class="token keyword">auto_increment</span><span class="token operator">=</span><span class="token number">100</span> <span class="token keyword">charset</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æˆ–è€…ä½ ä¹Ÿå¯ä»¥åœ¨è¡¨åˆ›å»ºæˆåŠŸåï¼Œé€šè¿‡ä»¥ä¸‹è¯­å¥æ¥å®ç°ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> t <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h1 id="å¤„ç†é‡å¤æ•°æ®"><a href="#å¤„ç†é‡å¤æ•°æ®" class="headerlink" title="å¤„ç†é‡å¤æ•°æ®"></a>å¤„ç†é‡å¤æ•°æ®</h1><p>æœ‰äº› MySQL æ•°æ®è¡¨ä¸­å¯èƒ½å­˜åœ¨é‡å¤çš„è®°å½•ï¼Œæœ‰äº›æƒ…å†µæˆ‘ä»¬å…è®¸é‡å¤æ•°æ®çš„å­˜åœ¨ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿéœ€è¦åˆ é™¤è¿™äº›é‡å¤çš„æ•°æ®ã€‚</p><p>æœ¬ç« èŠ‚æˆ‘ä»¬å°†ä¸ºå¤§å®¶ä»‹ç»å¦‚ä½•é˜²æ­¢æ•°æ®è¡¨å‡ºç°é‡å¤æ•°æ®åŠå¦‚ä½•åˆ é™¤æ•°æ®è¡¨ä¸­çš„é‡å¤æ•°æ®ã€‚</p><h2 id="é˜²æ­¢è¡¨ä¸­å‡ºç°é‡å¤æ•°æ®"><a href="#é˜²æ­¢è¡¨ä¸­å‡ºç°é‡å¤æ•°æ®" class="headerlink" title="é˜²æ­¢è¡¨ä¸­å‡ºç°é‡å¤æ•°æ®"></a>é˜²æ­¢è¡¨ä¸­å‡ºç°é‡å¤æ•°æ®</h2><p>ä½ å¯ä»¥åœ¨ MySQL æ•°æ®è¡¨ä¸­è®¾ç½®æŒ‡å®šçš„å­—æ®µä¸º <code>PRIMARY KEY</code>ï¼ˆä¸»é”®ï¼‰ æˆ–è€… <code>UNIQUE</code>ï¼ˆå”¯ä¸€ï¼‰ ç´¢å¼•æ¥ä¿è¯æ•°æ®çš„å”¯ä¸€æ€§ã€‚</p><p>è®©æˆ‘ä»¬å°è¯•ä¸€ä¸ªå®ä¾‹ï¼šä¸‹è¡¨ä¸­æ— ç´¢å¼•åŠä¸»é”®ï¼Œæ‰€ä»¥è¯¥è¡¨å…è®¸å‡ºç°å¤šæ¡é‡å¤è®°å½•ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> person_tbl<span class="token punctuation">(</span>    first_name <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    last_name <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    sex <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å¦‚æœä½ æƒ³è®¾ç½®è¡¨ä¸­å­—æ®µ <code>first_name</code>ï¼Œ<code>last_name</code> æ•°æ®ä¸èƒ½é‡å¤ï¼Œä½ å¯ä»¥è®¾ç½®åŒä¸»é”®æ¨¡å¼æ¥è®¾ç½®æ•°æ®çš„å”¯ä¸€æ€§ï¼Œå¦‚æœä½ è®¾ç½®äº†åŒä¸»é”®ï¼Œé‚£ä¹ˆé‚£ä¸ªé”®çš„é»˜è®¤å€¼ä¸èƒ½ä¸º <code>NULL</code>ï¼Œå¯è®¾ç½®ä¸º <code>NOT NULL</code>ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> person_tbl<span class="token punctuation">(</span>   first_name <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>   last_name <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>   sex <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>last_name<span class="token punctuation">,</span> first_name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å¦‚æœæˆ‘ä»¬è®¾ç½®äº†å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆåœ¨æ’å…¥é‡å¤æ•°æ®æ—¶ï¼ŒSQL è¯­å¥å°†æ— æ³•æ‰§è¡ŒæˆåŠŸï¼Œå¹¶æŠ›å‡ºé”™è¯¯ã€‚</p><p><code>INSERT IGNORE INTO</code> ä¸ <code>INSERT INTO</code> çš„åŒºåˆ«å°±æ˜¯ <code>INSERT IGNORE INTO</code> ä¼šå¿½ç•¥æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨çš„æ•°æ®ï¼Œå¦‚æœæ•°æ®åº“æ²¡æœ‰æ•°æ®ï¼Œå°±æ’å…¥æ–°çš„æ•°æ®ï¼Œå¦‚æœæœ‰æ•°æ®çš„è¯å°±è·³è¿‡è¿™æ¡æ•°æ®ã€‚è¿™æ ·å°±å¯ä»¥ä¿ç•™æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨æ•°æ®ï¼Œè¾¾åˆ°åœ¨é—´éš™ä¸­æ’å…¥æ•°æ®çš„ç›®çš„ã€‚</p><p>ä»¥ä¸‹å®ä¾‹ä½¿ç”¨äº† <code>INSERT IGNORE INTO</code>ï¼Œæ‰§è¡Œåä¸ä¼šå‡ºé”™ï¼Œä¹Ÿä¸ä¼šå‘æ•°æ®è¡¨ä¸­æ’å…¥é‡å¤æ•°æ®ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">IGNORE</span> <span class="token keyword">INTO</span> person_tbl <span class="token punctuation">(</span>last_name<span class="token punctuation">,</span> first_name<span class="token punctuation">)</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span> <span class="token string">'Jay'</span><span class="token punctuation">,</span> <span class="token string">'Thomas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>mysql<span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">IGNORE</span> <span class="token keyword">INTO</span> person_tbl <span class="token punctuation">(</span>last_name<span class="token punctuation">,</span> first_name<span class="token punctuation">)</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span> <span class="token string">'Jay'</span><span class="token punctuation">,</span> <span class="token string">'Thomas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><code>INSERT IGNORE INTO</code> å½“æ’å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è®°å½•çš„å”¯ä¸€æ€§åï¼Œå¦‚æœæ’å…¥é‡å¤æ•°æ®ï¼Œå°†ä¸è¿”å›é”™è¯¯ï¼Œåªä»¥è­¦å‘Šå½¢å¼è¿”å›ã€‚è€Œ <code>REPLACE INTO</code> å¦‚æœå­˜åœ¨ <code>PRIMARY</code> æˆ– <code>UNIQUE</code> ç›¸åŒçš„è®°å½•ï¼Œåˆ™å…ˆåˆ é™¤æ‰ã€‚å†æ’å…¥æ–°è®°å½•ã€‚</p><p>å¦ä¸€ç§è®¾ç½®æ•°æ®çš„å”¯ä¸€æ€§æ–¹æ³•æ˜¯æ·»åŠ ä¸€ä¸ª <code>UNIQUE</code> ç´¢å¼•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> person_tbl<span class="token punctuation">(</span>   first_name <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>   last_name <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>   sex <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token keyword">UNIQUE</span> <span class="token punctuation">(</span>last_name<span class="token punctuation">,</span> first_name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="ç»Ÿè®¡é‡å¤æ•°æ®"><a href="#ç»Ÿè®¡é‡å¤æ•°æ®" class="headerlink" title="ç»Ÿè®¡é‡å¤æ•°æ®"></a>ç»Ÿè®¡é‡å¤æ•°æ®</h2><p>ä»¥ä¸‹æˆ‘ä»¬å°†ç»Ÿè®¡è¡¨ä¸­ <code>first_name</code> å’Œ <code>last_name</code> çš„é‡å¤è®°å½•æ•°ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> repetitions<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> first_name    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">FROM</span> person_tbl    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> last_name<span class="token punctuation">,</span> first_name    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">HAVING</span> repetitions <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>ä»¥ä¸ŠæŸ¥è¯¢è¯­å¥å°†è¿”å› <code>person_tbl</code> è¡¨ä¸­é‡å¤çš„è®°å½•æ•°ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢é‡å¤çš„å€¼ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li>ç¡®å®šå“ªä¸€åˆ—åŒ…å«çš„å€¼å¯èƒ½ä¼šé‡å¤ã€‚</li><li>åœ¨åˆ—é€‰æ‹©åˆ—è¡¨ä½¿ç”¨ <code>COUNT(*)</code> åˆ—å‡ºçš„é‚£äº›åˆ—ã€‚</li><li>åœ¨ <code>GROUP BY</code> å­å¥ä¸­åˆ—å‡ºçš„åˆ—ã€‚</li><li><code>HAVING</code> å­å¥è®¾ç½®é‡å¤æ•°å¤§äº1ã€‚</li></ul><h2 id="è¿‡æ»¤é‡å¤æ•°æ®"><a href="#è¿‡æ»¤é‡å¤æ•°æ®" class="headerlink" title="è¿‡æ»¤é‡å¤æ•°æ®"></a>è¿‡æ»¤é‡å¤æ•°æ®</h2><p>å¦‚æœä½ éœ€è¦è¯»å–ä¸é‡å¤çš„æ•°æ®å¯ä»¥åœ¨ <code>SELECT</code> è¯­å¥ä¸­ä½¿ç”¨ <code>DISTINCT</code> å…³é”®å­—æ¥è¿‡æ»¤é‡å¤æ•°æ®ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> last_name<span class="token punctuation">,</span> first_name    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">FROM</span> person_tbl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>GROUP BY</code> æ¥è¯»å–æ•°æ®è¡¨ä¸­ä¸é‡å¤çš„æ•°æ®ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span> first_name    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">FROM</span> person_tbl    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token punctuation">(</span>last_name<span class="token punctuation">,</span> first_name<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><h2 id="åˆ é™¤é‡å¤æ•°æ®"><a href="#åˆ é™¤é‡å¤æ•°æ®" class="headerlink" title="åˆ é™¤é‡å¤æ•°æ®"></a>åˆ é™¤é‡å¤æ•°æ®</h2><p>å¦‚æœä½ æƒ³åˆ é™¤æ•°æ®è¡¨ä¸­çš„é‡å¤æ•°æ®ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„ SQL è¯­å¥ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tmp    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> sex    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">FROM</span> person_tbl    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token punctuation">(</span>last_name<span class="token punctuation">,</span> first_name<span class="token punctuation">,</span> sex<span class="token punctuation">)</span><span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> person_tbl<span class="token punctuation">;</span>mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tmp <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> person_tbl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨æ•°æ®è¡¨ä¸­æ·»åŠ  <code>INDEX</code>ï¼ˆç´¢å¼•ï¼‰ å’Œ <code>PRIMARY KEY</code>ï¼ˆä¸»é”®ï¼‰è¿™ç§ç®€å•çš„æ–¹æ³•æ¥åˆ é™¤è¡¨ä¸­çš„é‡å¤è®°å½•ã€‚æ–¹æ³•å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">ALTER</span> <span class="token keyword">IGNORE</span> <span class="token keyword">TABLE</span> person_tbl    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>last_name<span class="token punctuation">,</span> first_name<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h1 id="åŠ-SQL-æ³¨å…¥"><a href="#åŠ-SQL-æ³¨å…¥" class="headerlink" title="åŠ SQL æ³¨å…¥"></a>åŠ SQL æ³¨å…¥</h1><p>å¦‚æœæ‚¨é€šè¿‡ç½‘é¡µè·å–ç”¨æˆ·è¾“å…¥çš„æ•°æ®å¹¶å°†å…¶æ’å…¥ä¸€ä¸ª MySQL æ•°æ®åº“ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½å‘ç”Ÿ SQL æ³¨å…¥å®‰å…¨çš„é—®é¢˜ã€‚</p><p>æœ¬ç« èŠ‚å°†ä¸ºå¤§å®¶ä»‹ç»å¦‚ä½•é˜²æ­¢ SQL æ³¨å…¥ï¼Œå¹¶é€šè¿‡è„šæœ¬æ¥è¿‡æ»¤ SQL ä¸­æ³¨å…¥çš„å­—ç¬¦ã€‚</p><p>æ‰€è°“ SQL æ³¨å…¥ï¼Œå°±æ˜¯é€šè¿‡æŠŠ SQL å‘½ä»¤æ’å…¥åˆ° Web è¡¨å•é€’äº¤æˆ–è¾“å…¥åŸŸåæˆ–é¡µé¢è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆè¾¾åˆ°æ¬ºéª—æœåŠ¡å™¨æ‰§è¡Œæ¶æ„çš„ SQL å‘½ä»¤ã€‚</p><p>æˆ‘ä»¬æ°¸è¿œä¸è¦ä¿¡ä»»ç”¨æˆ·çš„è¾“å…¥ï¼Œæˆ‘ä»¬å¿…é¡»è®¤å®šç”¨æˆ·è¾“å…¥çš„æ•°æ®éƒ½æ˜¯ä¸å®‰å…¨çš„ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡Œè¿‡æ»¤å¤„ç†ã€‚</p><p>ä»¥ä¸‹å®ä¾‹ä¸­ï¼Œè¾“å…¥çš„ç”¨æˆ·åå¿…é¡»ä¸ºå­—æ¯ã€æ•°å­—åŠä¸‹åˆ’çº¿çš„ç»„åˆï¼Œä¸”ç”¨æˆ·åé•¿åº¦ä¸º 8 åˆ° 20 ä¸ªå­—ç¬¦ä¹‹é—´ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">if (preg_match(&quot;&#x2F;^\w&#123;8, 20&#125;$&#x2F;&quot;, $_GET[&#39;username&#39;], $matches))&#123;   $result &#x3D; mysqli_query($conn, &quot;SELECT * FROM users                           WHERE username&#x3D;$matches[0]&quot;);&#125; else &#123;   echo &quot;username è¾“å…¥å¼‚å¸¸&quot;;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>è®©æˆ‘ä»¬çœ‹ä¸‹åœ¨æ²¡æœ‰è¿‡æ»¤ç‰¹æ®Šå­—ç¬¦æ—¶ï¼Œå‡ºç°çš„ SQL æƒ…å†µï¼š</p><p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token comment">// è®¾å®š $name ä¸­æ’å…¥äº†æˆ‘ä»¬ä¸éœ€è¦çš„SQLè¯­å¥</span><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token double-quoted-string string">"Qadir'; DELETE FROM users;"</span><span class="token punctuation">;</span><span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">"SELECT * FROM users WHERE name='<span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token variable">$name</span><span class="token punctuation">&#125;</span></span>'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>ä»¥ä¸Šçš„æ³¨å…¥è¯­å¥ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰å¯¹ <code>$name</code> çš„å˜é‡è¿›è¡Œè¿‡æ»¤ï¼Œ<code>$name</code> ä¸­æ’å…¥äº†æˆ‘ä»¬ä¸éœ€è¦çš„ SQL è¯­å¥ï¼Œå°†åˆ é™¤ <code>users</code> è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚</p><p>åœ¨ PHP ä¸­çš„ <code>mysqli_query()</code> æ˜¯ä¸å…è®¸æ‰§è¡Œå¤šä¸ª SQL è¯­å¥çš„ï¼Œä½†æ˜¯åœ¨ <code>SQLite</code> å’Œ <code>PostgreSQL</code> æ˜¯å¯ä»¥åŒæ—¶æ‰§è¡Œå¤šæ¡ SQL è¯­å¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹è¿™äº›ç”¨æˆ·çš„æ•°æ®éœ€è¦è¿›è¡Œä¸¥æ ¼çš„éªŒè¯ã€‚</p><p><strong>é˜²æ­¢SQLæ³¨å…¥ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ä¸ªè¦ç‚¹ï¼š</strong></p><ol><li>æ°¸è¿œä¸è¦ä¿¡ä»»ç”¨æˆ·çš„è¾“å…¥ã€‚å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œæ ¡éªŒï¼Œå¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼ï¼Œæˆ–é™åˆ¶é•¿åº¦ï¼›å¯¹å•å¼•å·å’Œ åŒ&quot;-&quot;è¿›è¡Œè½¬æ¢ç­‰ã€‚</li><li>æ°¸è¿œä¸è¦ä½¿ç”¨åŠ¨æ€æ‹¼è£…sqlï¼Œå¯ä»¥ä½¿ç”¨å‚æ•°åŒ–çš„sqlæˆ–è€…ç›´æ¥ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹è¿›è¡Œæ•°æ®æŸ¥è¯¢å­˜å–ã€‚</li><li>æ°¸è¿œä¸è¦ä½¿ç”¨ç®¡ç†å‘˜æƒé™çš„æ•°æ®åº“è¿æ¥ï¼Œä¸ºæ¯ä¸ªåº”ç”¨ä½¿ç”¨å•ç‹¬çš„æƒé™æœ‰é™çš„æ•°æ®åº“è¿æ¥ã€‚</li><li>ä¸è¦æŠŠæœºå¯†ä¿¡æ¯ç›´æ¥å­˜æ”¾ï¼ŒåŠ å¯†æˆ–è€…hashæ‰å¯†ç å’Œæ•æ„Ÿçš„ä¿¡æ¯ã€‚</li><li>åº”ç”¨çš„å¼‚å¸¸ä¿¡æ¯åº”è¯¥ç»™å‡ºå°½å¯èƒ½å°‘çš„æç¤ºï¼Œæœ€å¥½ä½¿ç”¨è‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯å¯¹åŸå§‹é”™è¯¯ä¿¡æ¯è¿›è¡ŒåŒ…è£…</li><li>SQL æ³¨å…¥çš„æ£€æµ‹æ–¹æ³•ä¸€èˆ¬é‡‡å–è¾…åŠ©è½¯ä»¶æˆ–ç½‘ç«™å¹³å°æ¥æ£€æµ‹ï¼Œè½¯ä»¶ä¸€èˆ¬é‡‡ç”¨ SQL æ³¨å…¥æ£€æµ‹å·¥å…·jskyï¼Œç½‘ç«™å¹³å°å°±æœ‰äº¿æ€ç½‘ç«™å®‰å…¨å¹³å°æ£€æµ‹å·¥å…·ã€‚MDCSOFT SCAN ç­‰ã€‚é‡‡ç”¨ MDCSOFT-IPS å¯ä»¥æœ‰æ•ˆçš„é˜²å¾¡ SQL æ³¨å…¥ï¼ŒXSS æ”»å‡»ç­‰ã€‚</li></ol><h2 id="é˜²æ­¢SQLæ³¨å…¥"><a href="#é˜²æ­¢SQLæ³¨å…¥" class="headerlink" title="é˜²æ­¢SQLæ³¨å…¥"></a>é˜²æ­¢SQLæ³¨å…¥</h2><p>åœ¨è„šæœ¬è¯­è¨€ï¼Œå¦‚ Perl å’Œ PHP ä½ å¯ä»¥å¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡Œè½¬ä¹‰ä»è€Œæ¥é˜²æ­¢ SQL æ³¨å…¥ã€‚</p><p>PHP çš„ MySQL æ‰©å±•æä¾›äº† <code>mysqli_real_escape_string()</code> å‡½æ•°æ¥è½¬ä¹‰ç‰¹æ®Šçš„è¾“å…¥å­—ç¬¦ã€‚</p><p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">get_magic_quotes_gpc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token function">stripslashes</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token function">mysqli_real_escape_string</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">,</span> <span class="token variable">$name</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">"SELECT * FROM users WHERE name='<span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token variable">$name</span><span class="token punctuation">&#125;</span></span>'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="LIKE-è¯­å¥ä¸­çš„æ³¨å…¥"><a href="#LIKE-è¯­å¥ä¸­çš„æ³¨å…¥" class="headerlink" title="LIKE è¯­å¥ä¸­çš„æ³¨å…¥"></a>LIKE è¯­å¥ä¸­çš„æ³¨å…¥</h2><p><code>LIKE</code> æŸ¥è¯¢æ—¶ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥çš„å€¼æœ‰ <code>_</code> å’Œ <code>%</code>ï¼Œåˆ™ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼šç”¨æˆ·æœ¬æ¥åªæ˜¯æƒ³æŸ¥è¯¢ <code>abcd_</code>ï¼ŒæŸ¥è¯¢ç»“æœä¸­å´æœ‰ <code>abcd_</code>ã€<code>abcde</code>ã€<code>abcdf</code> ç­‰ç­‰ï¼›ç”¨æˆ·è¦æŸ¥è¯¢ <code>30%</code>ï¼ˆæ³¨ï¼šç™¾åˆ†ä¹‹ä¸‰åï¼‰æ—¶ä¹Ÿä¼šå‡ºç°é—®é¢˜ã€‚</p><p>åœ¨PHPè„šæœ¬ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>addcslashes()</code> å‡½æ•°æ¥å¤„ç†ä»¥ä¸Šæƒ…å†µï¼Œå¦‚ä¸‹å®ä¾‹ï¼š</p><p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$sub</span> <span class="token operator">=</span> <span class="token function">addcslashes</span><span class="token punctuation">(</span><span class="token function">mysqli_real_escape_string</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">"%something_"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">"%_"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// $sub == \%something\_</span> <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$conn</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">"SELECT * FROM messages WHERE subject LIKE '<span class="token interpolation"><span class="token punctuation">&#123;</span><span class="token variable">$sub</span><span class="token punctuation">&#125;</span></span>%'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><code>addcslashes()</code> å‡½æ•°åœ¨æŒ‡å®šçš„å­—ç¬¦å‰æ·»åŠ åæ–œæ ã€‚</p><p>è¯­æ³•æ ¼å¼:</p><p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token function">addcslashes</span><span class="token punctuation">(</span>string<span class="token punctuation">,</span> characters<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><h1 id="å¯¼å‡ºæ•°æ®"><a href="#å¯¼å‡ºæ•°æ®" class="headerlink" title="å¯¼å‡ºæ•°æ®"></a>å¯¼å‡ºæ•°æ®</h1><p>MySQL ä¸­ä½ å¯ä»¥ä½¿ç”¨ <code>SELECT...INTO OUTFILE</code> è¯­å¥æ¥ç®€å•çš„å¯¼å‡ºæ•°æ®åˆ°æ–‡æœ¬æ–‡ä»¶ä¸Šã€‚</p><h2 id="ä½¿ç”¨-SELECT-INTO-OUTFILE-è¯­å¥å¯¼å‡ºæ•°æ®"><a href="#ä½¿ç”¨-SELECT-INTO-OUTFILE-è¯­å¥å¯¼å‡ºæ•°æ®" class="headerlink" title="ä½¿ç”¨ SELECT ... INTO OUTFILE è¯­å¥å¯¼å‡ºæ•°æ®"></a>ä½¿ç”¨ SELECT ... INTO OUTFILE è¯­å¥å¯¼å‡ºæ•°æ®</h2><p>ä»¥ä¸‹å®ä¾‹ä¸­æˆ‘ä»¬å°†æ•°æ®è¡¨ <code>tbl</code> æ•°æ®å¯¼å‡ºåˆ° <code>/tmp/TestDB.txt</code> æ–‡ä»¶ä¸­:</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> tbl     <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">INTO</span> <span class="token keyword">OUTFILE</span> <span class="token string">'/tmp/TestDB.txt'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>ä½ å¯ä»¥é€šè¿‡å‘½ä»¤é€‰é¡¹æ¥è®¾ç½®æ•°æ®è¾“å‡ºçš„æŒ‡å®šæ ¼å¼ï¼Œä»¥ä¸‹å®ä¾‹ä¸ºå¯¼å‡º <code>CSV</code> æ ¼å¼ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> passwd <span class="token keyword">INTO</span> <span class="token keyword">OUTFILE</span> <span class="token string">'/tmp/TestDB.txt'</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">','</span> <span class="token keyword">ENCLOSED</span> <span class="token keyword">BY</span> <span class="token string">'"'</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">LINES</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">'\r\n'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ï¼Œå„å€¼ç”¨é€—å·éš”å¼€ã€‚è¿™ç§æ ¼å¼å¯ä»¥è¢«è®¸å¤šç¨‹åºä½¿ç”¨ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> a<span class="token operator">+</span>b <span class="token keyword">INTO</span> <span class="token keyword">OUTFILE</span> <span class="token string">'/tmp/result.text'</span><span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">','</span> <span class="token keyword">OPTIONALLY</span> <span class="token keyword">ENCLOSED</span> <span class="token keyword">BY</span> <span class="token string">'"'</span><span class="token keyword">LINES</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">'\n'</span><span class="token keyword">FROM</span> <span class="token keyword">table</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p><strong><code>SELECT ... INTO OUTFILE</code> è¯­å¥æœ‰ä»¥ä¸‹å±æ€§:</strong></p><ul><li><code>LOAD DATA INFILE</code> æ˜¯ <code>SELECT ... INTO OUTFILE</code> çš„é€†æ“ä½œï¼Œ<code>SELECT</code> å¥æ³•ã€‚ä¸ºäº†å°†ä¸€ä¸ªæ•°æ®åº“çš„æ•°æ®å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨ <code>SELECT ... INTO OUTFILE</code>ï¼›ä¸ºäº†å°†æ–‡ä»¶è¯»å›æ•°æ®åº“ï¼Œä½¿ç”¨ <code>LOAD DATA INFILE</code>ã€‚</li><li><code>SELECT...INTO OUTFILE &#39;file_name&#39;</code> å½¢å¼çš„ <code>SELECT</code> å¯ä»¥æŠŠè¢«é€‰æ‹©çš„è¡Œå†™å…¥ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚è¯¥æ–‡ä»¶è¢«åˆ›å»ºåˆ°æœåŠ¡å™¨ä¸»æœºä¸Šï¼Œå› æ­¤æ‚¨å¿…é¡»æ‹¥æœ‰ <code>FILE</code> æƒé™ï¼Œæ‰èƒ½ä½¿ç”¨æ­¤è¯­æ³•ã€‚</li><li>è¾“å‡ºä¸èƒ½æ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„æ–‡ä»¶ã€‚é˜²æ­¢æ–‡ä»¶æ•°æ®è¢«ç¯¡æ”¹ã€‚</li><li>ä½ éœ€è¦æœ‰ä¸€ä¸ªç™»é™†æœåŠ¡å™¨çš„è´¦å·æ¥æ£€ç´¢æ–‡ä»¶ã€‚å¦åˆ™ <code>SELECT ... INTO OUTFILE</code> ä¸ä¼šèµ·ä»»ä½•ä½œç”¨ã€‚</li><li>åœ¨ <code>UNIX</code> ä¸­ï¼Œè¯¥æ–‡ä»¶è¢«åˆ›å»ºåæ˜¯å¯è¯»çš„ï¼Œæƒé™ç”± MySQL æœåŠ¡å™¨æ‰€æ‹¥æœ‰ã€‚è¿™æ„å‘³ç€ï¼Œè™½ç„¶ä½ å°±å¯ä»¥è¯»å–è¯¥æ–‡ä»¶ï¼Œä½†å¯èƒ½æ— æ³•å°†å…¶åˆ é™¤ã€‚</li></ul><h2 id="å¯¼å‡ºè¡¨ä½œä¸ºåŸå§‹æ•°æ®"><a href="#å¯¼å‡ºè¡¨ä½œä¸ºåŸå§‹æ•°æ®" class="headerlink" title="å¯¼å‡ºè¡¨ä½œä¸ºåŸå§‹æ•°æ®"></a>å¯¼å‡ºè¡¨ä½œä¸ºåŸå§‹æ•°æ®</h2><p><code>mysqldump</code> æ˜¯ MySQL ç”¨äºè½¬å­˜å‚¨æ•°æ®åº“çš„å®ç”¨ç¨‹åºã€‚å®ƒä¸»è¦äº§ç”Ÿä¸€ä¸ª SQL è„šæœ¬ï¼Œå…¶ä¸­åŒ…å«ä»å¤´é‡æ–°åˆ›å»ºæ•°æ®åº“æ‰€å¿…éœ€çš„å‘½ä»¤ <code>CREATE TABLE INSERT</code> ç­‰ã€‚</p><p>ä½¿ç”¨ <code>mysqldump</code> å¯¼å‡ºæ•°æ®éœ€è¦ä½¿ç”¨ <code>--tab</code> é€‰é¡¹æ¥æŒ‡å®šå¯¼å‡ºæ–‡ä»¶æŒ‡å®šçš„ç›®å½•ï¼Œè¯¥ç›®æ ‡å¿…é¡»æ˜¯å¯å†™çš„ã€‚</p><p>ä»¥ä¸‹å®ä¾‹å°†æ•°æ®è¡¨ <code>tbl</code> å¯¼å‡ºåˆ° <code>/tmp</code> ç›®å½•ä¸­ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ mysqldump -u root -p --no-create-info --tab&#x3D;&#x2F;tmp TestDB tblpassword ******<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h2 id="å¯¼å‡º-SQL-æ ¼å¼çš„æ•°æ®"><a href="#å¯¼å‡º-SQL-æ ¼å¼çš„æ•°æ®" class="headerlink" title="å¯¼å‡º SQL æ ¼å¼çš„æ•°æ®"></a>å¯¼å‡º SQL æ ¼å¼çš„æ•°æ®</h2><p>å¯¼å‡º SQL æ ¼å¼çš„æ•°æ®åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ mysqldump -u root -p TestDB tbl &gt; dump.txtpassword ******<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>ä»¥ä¸Šå‘½ä»¤åˆ›å»ºçš„æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- MySQL dump 8.23</span><span class="token comment">--</span><span class="token comment">-- Host: localhost    Database: TestDB</span><span class="token comment">---------------------------------------------------------</span><span class="token comment">-- Server version       3.23.58</span><span class="token comment">--</span><span class="token comment">-- Table structure for table `tbl`</span><span class="token comment">--</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tbl <span class="token punctuation">(</span>  id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>  title <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">,</span>  author <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">,</span>  submission_date <span class="token keyword">date</span> <span class="token keyword">default</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>  <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span> AUTHOR_INDEX <span class="token punctuation">(</span>author<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">TYPE</span><span class="token operator">=</span>MyISAM<span class="token punctuation">;</span><span class="token comment">--</span><span class="token comment">-- Dumping data for table `tbl`</span><span class="token comment">--</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tbl        <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'Learn PHP'</span><span class="token punctuation">,</span><span class="token string">'John Poul'</span><span class="token punctuation">,</span><span class="token string">'2007-05-24'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tbl        <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'Learn MySQL'</span><span class="token punctuation">,</span><span class="token string">'Abdul S'</span><span class="token punctuation">,</span><span class="token string">'2007-05-24'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tbl        <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'JAVA Tutorial'</span><span class="token punctuation">,</span><span class="token string">'Sanjay'</span><span class="token punctuation">,</span><span class="token string">'2007-05-06'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>å¦‚æœä½ éœ€è¦å¯¼å‡ºæ•´ä¸ªæ•°æ®åº“çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ mysqldump -u root -p TestDB &gt; database_dump.txtpassword ******<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>å¦‚æœéœ€è¦å¤‡ä»½æ‰€æœ‰æ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ mysqldump -u root -p --all-databases &gt; database_dump.txtpassword ******<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p><code>--all-databases</code> é€‰é¡¹åœ¨ MySQL 3.23.12 åŠä»¥åç‰ˆæœ¬åŠ å…¥ã€‚</p><p>è¯¥æ–¹æ³•å¯ç”¨äºå®ç°æ•°æ®åº“çš„å¤‡ä»½ç­–ç•¥ã€‚</p><h2 id="å°†æ•°æ®è¡¨åŠæ•°æ®åº“æ‹·è´è‡³å…¶ä»–ä¸»æœº"><a href="#å°†æ•°æ®è¡¨åŠæ•°æ®åº“æ‹·è´è‡³å…¶ä»–ä¸»æœº" class="headerlink" title="å°†æ•°æ®è¡¨åŠæ•°æ®åº“æ‹·è´è‡³å…¶ä»–ä¸»æœº"></a>å°†æ•°æ®è¡¨åŠæ•°æ®åº“æ‹·è´è‡³å…¶ä»–ä¸»æœº</h2><p>å¦‚æœä½ éœ€è¦å°†æ•°æ®æ‹·è´è‡³å…¶ä»–çš„ MySQL æœåŠ¡å™¨ä¸Š, ä½ å¯ä»¥åœ¨ <code>mysqldump</code> å‘½ä»¤ä¸­æŒ‡å®šæ•°æ®åº“ååŠæ•°æ®è¡¨ã€‚</p><p>åœ¨æºä¸»æœºä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†æ•°æ®å¤‡ä»½è‡³ <code>dump.txt</code> æ–‡ä»¶ä¸­:</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ mysqldump -u root -p database_name table_name &gt; dump.txtpassword *****<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>å¦‚æœå®Œæ•´å¤‡ä»½æ•°æ®åº“ï¼Œåˆ™æ— éœ€ä½¿ç”¨ç‰¹å®šçš„è¡¨åç§°ã€‚</p><p>å¦‚æœä½ éœ€è¦å°†å¤‡ä»½çš„æ•°æ®åº“å¯¼å…¥åˆ° MySQL æœåŠ¡å™¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä½ éœ€è¦ç¡®è®¤æ•°æ®åº“å·²ç»åˆ›å»ºï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ mysql -u root -p database_name &lt; dump.txtpassword *****<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å¯¼å‡ºçš„æ•°æ®ç›´æ¥å¯¼å…¥åˆ°è¿œç¨‹çš„æœåŠ¡å™¨ä¸Šï¼Œä½†è¯·ç¡®ä¿ä¸¤å°æœåŠ¡å™¨æ˜¯ç›¸é€šçš„ï¼Œæ˜¯å¯ä»¥ç›¸äº’è®¿é—®çš„ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ mysqldump -u root -p database_name \       | mysql -h other-host.com database_name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>ä»¥ä¸Šå‘½ä»¤ä¸­ä½¿ç”¨äº†ç®¡é“æ¥å°†å¯¼å‡ºçš„æ•°æ®å¯¼å…¥åˆ°æŒ‡å®šçš„è¿œç¨‹ä¸»æœºä¸Šã€‚</p><h1 id="å¯¼å…¥æ•°æ®"><a href="#å¯¼å…¥æ•°æ®" class="headerlink" title="å¯¼å…¥æ•°æ®"></a>å¯¼å…¥æ•°æ®</h1><h2 id="mysql-å‘½ä»¤å¯¼å…¥"><a href="#mysql-å‘½ä»¤å¯¼å…¥" class="headerlink" title="mysql å‘½ä»¤å¯¼å…¥"></a>mysql å‘½ä»¤å¯¼å…¥</h2><p>ä½¿ç”¨ <code>mysql</code> å‘½ä»¤å¯¼å…¥è¯­æ³•æ ¼å¼ä¸ºï¼š</p><p><code>mysql -uç”¨æˆ·å -på¯†ç  &lt; è¦å¯¼å…¥çš„æ•°æ®åº“æ•°æ®(TestDB.sql)</code></p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ mysql -uroot -p123456 &lt; TestDB.sql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä»¥ä¸Šå‘½ä»¤å°†å°†å¤‡ä»½çš„æ•´ä¸ªæ•°æ®åº“ <code>TestDB.sql</code> å¯¼å…¥ã€‚</p><h2 id="source-å‘½ä»¤å¯¼å…¥"><a href="#source-å‘½ä»¤å¯¼å…¥" class="headerlink" title="source å‘½ä»¤å¯¼å…¥"></a>source å‘½ä»¤å¯¼å…¥</h2><p><code>source</code> å‘½ä»¤å¯¼å…¥æ•°æ®åº“éœ€è¦å…ˆç™»å½•åˆ°æ•°åº“ç»ˆç«¯ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> abc<span class="token punctuation">;</span>      <span class="token comment"># åˆ›å»ºæ•°æ®åº“</span>mysql<span class="token operator">></span> <span class="token keyword">USE</span> abc<span class="token punctuation">;</span>                  <span class="token comment"># ä½¿ç”¨å·²åˆ›å»ºçš„æ•°æ®åº“ </span>mysql<span class="token operator">></span> <span class="token keyword">SET</span> names utf8<span class="token punctuation">;</span>           <span class="token comment"># è®¾ç½®ç¼–ç </span>mysql<span class="token operator">></span> source <span class="token operator">/</span>home<span class="token operator">/</span>abc<span class="token operator">/</span>abc<span class="token punctuation">.</span><span class="token keyword">sql</span>  <span class="token comment"># å¯¼å…¥å¤‡ä»½æ•°æ®åº“</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="ä½¿ç”¨-LOAD-DATA-å¯¼å…¥æ•°æ®"><a href="#ä½¿ç”¨-LOAD-DATA-å¯¼å…¥æ•°æ®" class="headerlink" title="ä½¿ç”¨ LOAD DATA å¯¼å…¥æ•°æ®"></a>ä½¿ç”¨ LOAD DATA å¯¼å…¥æ•°æ®</h2><p>MySQL ä¸­æä¾›äº†<code>LOAD DATA INFILE</code> è¯­å¥æ¥æ’å…¥æ•°æ®ã€‚ ä»¥ä¸‹å®ä¾‹ä¸­å°†ä»å½“å‰ç›®å½•ä¸­è¯»å–æ–‡ä»¶ <code>dump.txt</code>ï¼Œå°†è¯¥æ–‡ä»¶ä¸­çš„æ•°æ®æ’å…¥åˆ°å½“å‰æ•°æ®åº“çš„ <code>mytbl</code> è¡¨ä¸­ã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">LOAD</span> <span class="token keyword">DATA</span> <span class="token keyword">LOCAL</span> <span class="token keyword">INFILE</span> <span class="token string">'dump.txt'</span> <span class="token keyword">INTO</span> <span class="token keyword">TABLE</span> mytbl<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>å¦‚æœæŒ‡å®š <code>LOCAL</code> å…³é”®è¯ï¼Œåˆ™è¡¨æ˜ä»å®¢æˆ·ä¸»æœºä¸ŠæŒ‰è·¯å¾„è¯»å–æ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œåˆ™æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸ŠæŒ‰è·¯å¾„è¯»å–æ–‡ä»¶ã€‚</p><p>ä½ èƒ½æ˜ç¡®åœ°åœ¨ <code>LOAD DATA</code> è¯­å¥ä¸­æŒ‡å‡ºåˆ—å€¼çš„åˆ†éš”ç¬¦å’Œè¡Œå°¾æ ‡è®°ï¼Œä½†æ˜¯é»˜è®¤æ ‡è®°æ˜¯å®šä½ç¬¦å’Œæ¢è¡Œç¬¦ã€‚</p><p>ä¸¤ä¸ªå‘½ä»¤çš„ <code>FIELDS</code> å’Œ <code>LINES</code> å­å¥çš„è¯­æ³•æ˜¯ä¸€æ ·çš„ã€‚ä¸¤ä¸ªå­å¥éƒ½æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯å¦‚æœä¸¤ä¸ªåŒæ—¶è¢«æŒ‡å®šï¼Œ<code>FIELDS</code> å­å¥å¿…é¡»å‡ºç°åœ¨ <code>LINES</code> å­å¥ä¹‹å‰ã€‚</p><p>å¦‚æœç”¨æˆ·æŒ‡å®šä¸€ä¸ª <code>FIELDS</code> å­å¥ï¼Œå®ƒçš„å­å¥ï¼ˆ<code>TERMINATED BY</code>ã€<code>[OPTIONALLY] ENCLOSED BY</code> å’Œ <code>ESCAPED BY</code>ï¼‰ä¹Ÿæ˜¯å¯é€‰çš„ï¼Œä¸è¿‡ï¼Œç”¨æˆ·å¿…é¡»è‡³å°‘æŒ‡å®šå®ƒä»¬ä¸­çš„ä¸€ä¸ªã€‚</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">LOAD</span> <span class="token keyword">DATA</span> <span class="token keyword">LOCAL</span> <span class="token keyword">INFILE</span> <span class="token string">'dump.txt'</span> <span class="token keyword">INTO</span> <span class="token keyword">TABLE</span> mytbl    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">':'</span>    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">LINES</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">'\r\n'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><code>LOAD DATA</code> é»˜è®¤æƒ…å†µä¸‹æ˜¯æŒ‰ç…§æ•°æ®æ–‡ä»¶ä¸­åˆ—çš„é¡ºåºæ’å…¥æ•°æ®çš„ï¼Œå¦‚æœæ•°æ®æ–‡ä»¶ä¸­çš„åˆ—ä¸æ’å…¥è¡¨ä¸­çš„åˆ—ä¸ä¸€è‡´ï¼Œåˆ™éœ€è¦æŒ‡å®šåˆ—çš„é¡ºåºã€‚</p><p>å¦‚ï¼Œåœ¨æ•°æ®æ–‡ä»¶ä¸­çš„åˆ—é¡ºåºæ˜¯ <code>a, b, c</code>ï¼Œä½†åœ¨æ’å…¥è¡¨çš„åˆ—é¡ºåºä¸º <code>b, c, a</code>ï¼Œåˆ™æ•°æ®å¯¼å…¥è¯­æ³•å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">LOAD</span> <span class="token keyword">DATA</span> <span class="token keyword">LOCAL</span> <span class="token keyword">INFILE</span> <span class="token string">'dump.txt'</span>     <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">INTO</span> <span class="token keyword">TABLE</span> mytbl <span class="token punctuation">(</span>b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><h2 id="ä½¿ç”¨-mysqlimport-å¯¼å…¥æ•°æ®"><a href="#ä½¿ç”¨-mysqlimport-å¯¼å…¥æ•°æ®" class="headerlink" title="ä½¿ç”¨ mysqlimport å¯¼å…¥æ•°æ®"></a>ä½¿ç”¨ mysqlimport å¯¼å…¥æ•°æ®</h2><p><code>mysqlimport</code> å®¢æˆ·ç«¯æä¾›äº† <code>LOAD DATA INFILEQL</code> è¯­å¥çš„ä¸€ä¸ªå‘½ä»¤è¡Œæ¥å£ã€‚<code>mysqlimport</code> çš„å¤§å¤šæ•°é€‰é¡¹ç›´æ¥å¯¹åº” <code>LOAD DATA INFILE</code> å­å¥ã€‚</p><p>ä»æ–‡ä»¶ <code>dump.txt</code> ä¸­å°†æ•°æ®å¯¼å…¥åˆ° <code>mytbl</code> æ•°æ®è¡¨ä¸­, å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ mysqlimport -u root -p --local mytbl dump.txtpassword *****<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p><code>mysqlimport</code> å‘½ä»¤å¯ä»¥æŒ‡å®šé€‰é¡¹æ¥è®¾ç½®æŒ‡å®šæ ¼å¼,å‘½ä»¤è¯­å¥æ ¼å¼å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ mysqlimport -u root -p --local --fields-terminated-by&#x3D;&quot;:&quot; \   --lines-terminated-by&#x3D;&quot;\r\n&quot;  mytbl dump.txtpassword *****<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><code>mysqlimport</code> è¯­å¥ä¸­ä½¿ç”¨ <code>--columns</code> é€‰é¡¹æ¥è®¾ç½®åˆ—çš„é¡ºåºï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ mysqlimport -u root -p --local --columns&#x3D;b,c,a \    mytbl dump.txtpassword *****<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p><strong>mysqlimport çš„å¸¸ç”¨é€‰é¡¹ä»‹ç»</strong></p><div class="table-container"><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:center">åŠŸèƒ½</th></tr></thead><tbody><tr><td style="text-align:center">-d or --delete</td><td style="text-align:center">æ–°æ•°æ®å¯¼å…¥æ•°æ®è¡¨ä¸­ä¹‹å‰åˆ é™¤æ•°æ®æ•°æ®è¡¨ä¸­çš„æ‰€æœ‰ä¿¡æ¯</td></tr><tr><td style="text-align:center">-f or --force</td><td style="text-align:center">ä¸ç®¡æ˜¯å¦é‡åˆ°é”™è¯¯ï¼Œmysqlimport å°†å¼ºåˆ¶ç»§ç»­æ’å…¥æ•°æ®</td></tr><tr><td style="text-align:center">-i or --ignore</td><td style="text-align:center">mysqlimport è·³è¿‡æˆ–è€…å¿½ç•¥é‚£äº›æœ‰ç›¸åŒå”¯ä¸€å…³é”®å­—çš„è¡Œï¼Œ<br>å¯¼å…¥æ–‡ä»¶ä¸­çš„æ•°æ®å°†è¢«å¿½ç•¥ã€‚</td></tr><tr><td style="text-align:center">-l or -lock-tables</td><td style="text-align:center">æ•°æ®è¢«æ’å…¥ä¹‹å‰é”ä½è¡¨ï¼Œè¿™æ ·å°±é˜²æ­¢äº†åœ¨æ›´æ–°æ•°æ®åº“æ—¶ï¼Œ<br>ç”¨æˆ·çš„æŸ¥è¯¢å’Œæ›´æ–°å—åˆ°å½±å“ã€‚</td></tr><tr><td style="text-align:center">-r or -replace</td><td style="text-align:center">è¿™ä¸ªé€‰é¡¹ä¸ -i é€‰é¡¹çš„ä½œç”¨ç›¸åï¼›<br>æ­¤é€‰é¡¹å°†æ›¿ä»£è¡¨ä¸­æœ‰ç›¸åŒå”¯ä¸€å…³é”®å­—çš„è®°å½•ã€‚</td></tr><tr><td style="text-align:center">--fields -enclosed -by=char</td><td style="text-align:center">æŒ‡å®šæ–‡æœ¬æ–‡ä»¶ä¸­æ•°æ®çš„è®°å½•æ—¶ä»¥ä»€ä¹ˆæ‹¬èµ·çš„ï¼Œ<br>å¾ˆå¤šæƒ…å†µä¸‹æ•°æ®ä»¥åŒå¼•å·æ‹¬èµ·ã€‚<br>é»˜è®¤çš„æƒ…å†µä¸‹æ•°æ®æ˜¯æ²¡æœ‰è¢«å­—ç¬¦æ‹¬èµ·çš„ã€‚</td></tr><tr><td style="text-align:center">--fields -terminated -by=char</td><td style="text-align:center">æŒ‡å®šå„ä¸ªæ•°æ®çš„å€¼ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œåœ¨å¥å·åˆ†éš”çš„æ–‡ä»¶ä¸­ï¼Œåˆ†éš”ç¬¦æ˜¯å¥å·ã€‚<br>å¯ä»¥ç”¨æ­¤é€‰é¡¹æŒ‡å®šæ•°æ®ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚é»˜è®¤çš„åˆ†éš”ç¬¦æ˜¯è·³æ ¼ç¬¦ï¼ˆTabï¼‰</td></tr><tr><td style="text-align:center">--lines -terminated -by=str</td><td style="text-align:center">æ­¤é€‰é¡¹æŒ‡å®šæ–‡æœ¬æ–‡ä»¶ä¸­è¡Œä¸è¡Œä¹‹é—´æ•°æ®çš„åˆ†éš”å­—ç¬¦ä¸²æˆ–è€…å­—ç¬¦ã€‚<br>é»˜è®¤çš„æƒ…å†µä¸‹ mysqlimport ä»¥ newline ä¸ºè¡Œåˆ†éš”ç¬¦ã€‚<br>æ‚¨å¯ä»¥é€‰æ‹©ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ¥æ›¿ä»£ä¸€ä¸ªå•ä¸ªçš„å­—ç¬¦ï¼š ä¸€ä¸ªæ–°è¡Œæˆ–è€…ä¸€ä¸ªå›è½¦ã€‚</td></tr></tbody></table></div><p><code>mysqlimport</code> å‘½ä»¤å¸¸ç”¨çš„é€‰é¡¹è¿˜æœ‰ <code>-v</code> æ˜¾ç¤ºç‰ˆæœ¬ï¼ˆversionï¼‰ï¼Œ<code>-p</code> æç¤ºè¾“å…¥å¯†ç ï¼ˆpasswordï¼‰ç­‰ã€‚</p><h1 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h1><h2 id="å­—ç¬¦ä¸²å‡½æ•°"><a href="#å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²å‡½æ•°"></a>å­—ç¬¦ä¸²å‡½æ•°</h2><div class="table-container"><table><thead><tr><th style="text-align:center">å‡½æ•°</th><th style="text-align:center">æè¿°</th><th style="text-align:center">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">ASCII(s)</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸² s çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ ASCII ç ã€‚</td><td style="text-align:center">è¿”å› CustomerName å­—æ®µç¬¬ä¸€ä¸ªå­—æ¯çš„ ASCII ç ï¼š <br> <code>SELECT ASCII(CustomerName) AS NumCodeOfFirstChar FROM Customers;</code></td></tr><tr><td style="text-align:center">CHAR_LENGTH(s)</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸² s çš„å­—ç¬¦æ•°</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸² GOOGLE çš„å­—ç¬¦æ•°ï¼š <br> <code>SELECT CHAR_LENGTH(&quot;GOOGLE&quot;) AS LengthOfString;</code></td></tr><tr><td style="text-align:center">CHARACTER_LENGTH(s)</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸² s çš„å­—ç¬¦æ•°</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸² GOOGLE çš„å­—ç¬¦æ•°ï¼š <br> <code>SELECT CHARACTER_LENGTH(&quot;GOOGLE&quot;) AS LengthOfString;</code></td></tr><tr><td style="text-align:center">CONCAT(s1, s2 ... sn)</td><td style="text-align:center">å­—ç¬¦ä¸² s1, s2 ç­‰å¤šä¸ªå­—ç¬¦ä¸²åˆå¹¶ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²</td><td style="text-align:center">åˆå¹¶å¤šä¸ªå­—ç¬¦ä¸²ï¼š <br> <code>SELECT CONCAT(&quot;SQL &quot;, &quot;Baidu &quot;, &quot;Google &quot;, &quot;Facebook&quot;) AS ConcatenatedString;</code></td></tr><tr><td style="text-align:center">CONCAT_WS(x, s1, s2 ... sn)</td><td style="text-align:center">åŒ CONCAT(s1, s2, ...) å‡½æ•°ï¼Œä½†æ˜¯æ¯ä¸ªå­—ç¬¦ä¸²ä¹‹é—´è¦åŠ ä¸Š xï¼Œx å¯ä»¥æ˜¯åˆ†éš”ç¬¦</td><td style="text-align:center">åˆå¹¶å¤šä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶æ·»åŠ åˆ†éš”ç¬¦sï¼š <br> <code>SELECT CONCAT_WS(&quot;-&quot;, &quot;SQL&quot;, &quot;Tutorial&quot;, &quot;is&quot;, &quot;fun!&quot;)AS ConcatenatedString;</code></td></tr><tr><td style="text-align:center">FIELD(s, s1, s2 ...)</td><td style="text-align:center">è¿”å›ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸² s åœ¨å­—ç¬¦ä¸²åˆ—è¡¨(s1, s2 ...)ä¸­çš„ä½ç½®</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸² c åœ¨åˆ—è¡¨å€¼ä¸­çš„ä½ç½®ï¼š <br> <code>SELECT FIELD(&quot;c&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;);  -- 3</code></td></tr><tr><td style="text-align:center">FIND_IN_SET(s1, s2)</td><td style="text-align:center">è¿”å›åœ¨å­—ç¬¦ä¸²s2ä¸­ä¸s1åŒ¹é…çš„å­—ç¬¦ä¸²çš„ä½ç½®</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸² c åœ¨æŒ‡å®šå­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼š <br> <code>SELECT FIND_IN_SET(&quot;c&quot;, &quot;a,b,c,d,e&quot;);  -- 5</code></td></tr><tr><td style="text-align:center">FORMAT(x, n)</td><td style="text-align:center">å‡½æ•°å¯ä»¥å°†æ•°å­— x è¿›è¡Œæ ¼å¼åŒ– &quot;#,###.##&quot;, å°† x ä¿ç•™åˆ°å°æ•°ç‚¹å n ä½ï¼Œæœ€åä¸€ä½å››èˆäº”å…¥ã€‚</td><td style="text-align:center">æ ¼å¼åŒ–æ•°å­— &quot;#,###.##&quot; å½¢å¼ï¼š <br> <code>SELECT FORMAT(250500.5634, 2);  -- 250,500.56</code></td></tr><tr><td style="text-align:center">INSERT(s1, x, len, s2)</td><td style="text-align:center">å­—ç¬¦ä¸² s2 æ›¿æ¢ s1 çš„ x ä½ç½®å¼€å§‹é•¿åº¦ä¸º len çš„å­—ç¬¦ä¸²</td><td style="text-align:center">ä»å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹çš„ 6 ä¸ªå­—ç¬¦æ›¿æ¢ä¸º baiduï¼š <br> <code>SELECT INSERT(&quot;google.com&quot;, 1, 6, &quot;baidu&quot;);  -- baidu.com</code></td></tr><tr><td style="text-align:center">LOCATE(s1, s)</td><td style="text-align:center">ä»å­—ç¬¦ä¸² s ä¸­è·å– s1 çš„å¼€å§‹ä½ç½®</td><td style="text-align:center">è·å– b åœ¨å­—ç¬¦ä¸² abc ä¸­çš„ä½ç½®ï¼š <br> <code>SELECT LOCATE(&#39;st&#39;, &#39;myteststring&#39;);  -- 5</code> <br> è¿”å›å­—ç¬¦ä¸² abc ä¸­ b çš„ä½ç½®ï¼š <br> <code>SELECT LOCATE(&#39;b&#39;, &#39;abc&#39;);  -- 2</code></td></tr><tr><td style="text-align:center">LCASE(s)</td><td style="text-align:center">å°†å­—ç¬¦ä¸² s çš„æ‰€æœ‰å­—æ¯å˜æˆå°å†™å­—æ¯</td><td style="text-align:center">å­—ç¬¦ä¸² GOOGLE è½¬æ¢ä¸ºå°å†™ï¼š <br> <code>SELECT LCASE(&#39;GOOGLE&#39;);  -- google</code></td></tr><tr><td style="text-align:center">LEFT(s, n)</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸² s çš„å‰ n ä¸ªå­—ç¬¦</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸² GOOGLE ä¸­çš„å‰ä¸¤ä¸ªå­—ç¬¦ï¼š <br> <code>SELECT LEFT(&#39;GOOGLE&#39;, 2);  -- GO</code></td></tr><tr><td style="text-align:center">LOWER(s)</td><td style="text-align:center">å°†å­—ç¬¦ä¸² s çš„æ‰€æœ‰å­—æ¯å˜æˆå°å†™å­—æ¯ï¼š</td><td style="text-align:center">å­—ç¬¦ä¸² GOOGLE è½¬æ¢ä¸ºå°å†™ï¼š <br> <code>SELECT LOWER(&#39;GOOGLE&#39;);  -- google</code></td></tr><tr><td style="text-align:center">LPAD(s1, len, s2)</td><td style="text-align:center">åœ¨å­—ç¬¦ä¸² s1 çš„å¼€å§‹å¤„å¡«å……å­—ç¬¦ä¸² s2ï¼Œä½¿å­—ç¬¦ä¸²é•¿åº¦è¾¾åˆ° len</td><td style="text-align:center">å°†å­—ç¬¦ä¸² xx å¡«å……åˆ° abc å­—ç¬¦ä¸²çš„å¼€å§‹å¤„ï¼š <br> <code>SELECT LPAD(&#39;abc&#39;, 5,&#39;xx&#39;);  -- xxabc</code></td></tr><tr><td style="text-align:center">LTRIM(s)</td><td style="text-align:center">å»æ‰å­—ç¬¦ä¸² s å¼€å§‹å¤„çš„ç©ºæ ¼</td><td style="text-align:center">å»æ‰å­—ç¬¦ä¸² GOOGLE å¼€å§‹å¤„çš„ç©ºæ ¼ï¼š <br> <code>SELECT LTRIM(&quot;    GOOGLE&quot;) AS LeftTrimmedString;-- GOOGLE</code></td></tr><tr><td style="text-align:center">MID(s, n, len)</td><td style="text-align:center">ä»å­—ç¬¦ä¸² s çš„ n ä½ç½®æˆªå–é•¿åº¦ä¸º len çš„å­å­—ç¬¦ä¸²ï¼ŒåŒ SUBSTRING(s, n, len)</td><td style="text-align:center">ä»å­—ç¬¦ä¸² GOOGLE ä¸­çš„ç¬¬ 2 ä¸ªä½ç½®æˆªå– 3ä¸ª å­—ç¬¦ï¼š <br> <code>SELECT MID(&quot;GOOGLE&quot;, 2, 3) AS ExtractString;  -- OOG</code></td></tr><tr><td style="text-align:center">POSITION(s1 IN s)</td><td style="text-align:center">ä»å­—ç¬¦ä¸² s ä¸­è·å– s1 çš„å¼€å§‹ä½ç½®</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸² abc ä¸­ b çš„ä½ç½®ï¼š <br> <code>SELECT POSITION(&#39;b&#39; in &#39;abc&#39;);  -- 2</code></td></tr><tr><td style="text-align:center">REPEAT(s, n)</td><td style="text-align:center">å°†å­—ç¬¦ä¸² s é‡å¤ n æ¬¡</td><td style="text-align:center">å°†å­—ç¬¦ä¸² GOOGLE é‡å¤ä¸‰æ¬¡ï¼š <br> <code>SELECT REPEAT(&#39;GOOGLE&#39;, 3);  -- GOOGLEGOOGLEGOOGLE</code></td></tr><tr><td style="text-align:center">REPLACE(s, s1, s2)</td><td style="text-align:center">å°†å­—ç¬¦ä¸² s2 æ›¿ä»£å­—ç¬¦ä¸² s ä¸­çš„å­—ç¬¦ä¸² s1</td><td style="text-align:center">å°†å­—ç¬¦ä¸² abc ä¸­çš„å­—ç¬¦ a æ›¿æ¢ä¸ºå­—ç¬¦ xï¼š <br> <code>SELECT REPLACE(&#39;abc&#39;,&#39;a&#39;,&#39;x&#39;);  -- xbc</code></td></tr><tr><td style="text-align:center">REVERSE(s)</td><td style="text-align:center">å°†å­—ç¬¦ä¸²sçš„é¡ºåºåè¿‡æ¥</td><td style="text-align:center">å°†å­—ç¬¦ä¸² abc çš„é¡ºåºåè¿‡æ¥ï¼š <br> <code>SELECT REVERSE(&#39;abc&#39;);  -- cba</code></td></tr><tr><td style="text-align:center">RIGHT(s, n)</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸² s çš„å n ä¸ªå­—ç¬¦</td><td style="text-align:center">è¿”å›å­—ç¬¦ä¸² GOOGLE çš„åä¸¤ä¸ªå­—ç¬¦ï¼š <br> <code>SELECT RIGHT(&#39;GOOGLE&#39;, 2);  -- LE</code></td></tr><tr><td style="text-align:center">RPAD(s1, len, s2)</td><td style="text-align:center">åœ¨å­—ç¬¦ä¸² s1 çš„ç»“å°¾å¤„æ·»åŠ å­—ç¬¦ä¸² s2ï¼Œä½¿å­—ç¬¦ä¸²çš„é•¿åº¦è¾¾åˆ° len</td><td style="text-align:center">å°†å­—ç¬¦ä¸² xx å¡«å……åˆ° abc å­—ç¬¦ä¸²çš„ç»“å°¾å¤„ï¼š <br> <code>SELECT RPAD(&#39;abc&#39;, 5,&#39;xx&#39;);  -- abcxx</code></td></tr><tr><td style="text-align:center">RTRIM(s)</td><td style="text-align:center">å»æ‰å­—ç¬¦ä¸² s ç»“å°¾å¤„çš„ç©ºæ ¼</td><td style="text-align:center">å»æ‰å­—ç¬¦ä¸² GOOGLE çš„æœ«å°¾ç©ºæ ¼ï¼š <br> <code>SELECT RTRIM(&quot;GOOGLE     &quot;) AS RightTrimmedString;  -- GOOGLE</code></td></tr><tr><td style="text-align:center">SPACE(n)</td><td style="text-align:center">è¿”å› n ä¸ªç©ºæ ¼</td><td style="text-align:center">è¿”å› 10 ä¸ªç©ºæ ¼ï¼š <br> <code>SELECT SPACE(10);</code></td></tr><tr><td style="text-align:center">STRCMP(s1, s2)</td><td style="text-align:center">æ¯”è¾ƒå­—ç¬¦ä¸² s1 å’Œ s2ï¼Œå¦‚æœ s1 ä¸ s2 ç›¸ç­‰è¿”å› 0 ï¼Œå¦‚æœ s1&gt;s2 è¿”å› 1ï¼Œå¦‚æœ s1&lt;s2 è¿”å› -1</td><td style="text-align:center">æ¯”è¾ƒå­—ç¬¦ä¸²ï¼š <br> <code>SELECT STRCMP(&quot;GOOGLE&quot;, &quot;GOOGLE&quot;);  -- 0</code></td></tr><tr><td style="text-align:center">SUBSTR(s, start, length)</td><td style="text-align:center">ä»å­—ç¬¦ä¸² s çš„ start ä½ç½®æˆªå–é•¿åº¦ä¸º length çš„å­å­—ç¬¦ä¸²</td><td style="text-align:center">ä»å­—ç¬¦ä¸² GOOGLE ä¸­çš„ç¬¬ 2 ä¸ªä½ç½®æˆªå– 3 ä¸ª å­—ç¬¦ï¼š <br> <code>SELECT SUBSTR(&quot;GOOGLE&quot;, 2, 3) AS ExtractString;  -- OOG</code></td></tr><tr><td style="text-align:center">SUBSTRING(s, start, length)</td><td style="text-align:center">ä»å­—ç¬¦ä¸² s çš„ start ä½ç½®æˆªå–é•¿åº¦ä¸º length çš„å­å­—ç¬¦ä¸²</td><td style="text-align:center">ä»å­—ç¬¦ä¸² GOOGLE ä¸­çš„ç¬¬ 2 ä¸ªä½ç½®æˆªå– 3 ä¸ªå­—ç¬¦ï¼š <br> <code>SELECT SUBSTRING(&quot;GOOGLE&quot;, 2, 3) AS ExtractString;  -- OOG</code></td></tr><tr><td style="text-align:center">SUBSTRING_INDEX(s, delimiter, number)</td><td style="text-align:center">è¿”å›ä»å­—ç¬¦ä¸² s çš„ç¬¬ number ä¸ªå‡ºç°çš„åˆ†éš”ç¬¦ delimiter ä¹‹åçš„å­ä¸²ã€‚ <br> å¦‚æœ number æ˜¯æ­£æ•°ï¼Œè¿”å›ç¬¬ number ä¸ªå­—ç¬¦å·¦è¾¹çš„å­—ç¬¦ä¸²ã€‚ <br> å¦‚æœ number æ˜¯è´Ÿæ•°ï¼Œè¿”å›ç¬¬(number çš„ç»å¯¹å€¼(ä»å³è¾¹æ•°))ä¸ªå­—ç¬¦å³è¾¹çš„å­—ç¬¦ä¸²ã€‚</td><td style="text-align:center"><code>SELECT SUBSTRING_INDEX(&#39;a*b&#39;, &#39;*&#39;, 1);  -- a</code> <br> <code>SELECT SUBSTRING_INDEX(&#39;a*b&#39;, &#39;*&#39;, -1);  -- b</code> <br> <code>SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(&#39;a*b*c*d*e&#39;, &#39;*&#39;, 3), &#39;*&#39;, -1);  -- c</code></td></tr><tr><td style="text-align:center">TRIM(s)</td><td style="text-align:center">å»æ‰å­—ç¬¦ä¸² s å¼€å§‹å’Œç»“å°¾å¤„çš„ç©ºæ ¼</td><td style="text-align:center">å»æ‰å­—ç¬¦ä¸² GOOGLE çš„é¦–å°¾ç©ºæ ¼ï¼š <br> <code>SELECT TRIM(&#39;    GOOGLE    &#39;) AS TrimmedString;</code></td></tr><tr><td style="text-align:center">UCASE(s)</td><td style="text-align:center">å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™</td><td style="text-align:center">å°†å­—ç¬¦ä¸² google è½¬æ¢ä¸ºå¤§å†™ï¼š <br> <code>SELECT UCASE(&quot;google&quot;);  -- GOOGLE</code></td></tr><tr><td style="text-align:center">UPPER(s)</td><td style="text-align:center">å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™</td><td style="text-align:center">å°†å­—ç¬¦ä¸² google è½¬æ¢ä¸ºå¤§å†™ï¼š <br> <code>SELECT UPPER(&quot;google&quot;);  -- GOOGLE</code></td></tr></tbody></table></div><h2 id="æ•°å­—å‡½æ•°"><a href="#æ•°å­—å‡½æ•°" class="headerlink" title="æ•°å­—å‡½æ•°"></a>æ•°å­—å‡½æ•°</h2><div class="table-container"><table><thead><tr><th style="text-align:center">å‡½æ•°å</th><th style="text-align:center">æè¿°</th><th style="text-align:center">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">ABS(x)</td><td style="text-align:center">è¿”å› x çš„ç»å¯¹å€¼</td><td style="text-align:center"><code>SELECT ABS(-1);  -- è¿”å›1</code></td></tr><tr><td style="text-align:center">ACOS(x)</td><td style="text-align:center">æ±‚ x çš„åä½™å¼¦å€¼ï¼ˆå‚æ•°æ˜¯å¼§åº¦ï¼‰</td><td style="text-align:center"><code>SELECT ACOS(0.25);</code></td></tr><tr><td style="text-align:center">ASIN(x)</td><td style="text-align:center">æ±‚åæ­£å¼¦å€¼ï¼ˆå‚æ•°æ˜¯å¼§åº¦ï¼‰</td><td style="text-align:center"><code>SELECT ASIN(0.25);</code></td></tr><tr><td style="text-align:center">ATAN(x)</td><td style="text-align:center">æ±‚åæ­£åˆ‡å€¼ï¼ˆå‚æ•°æ˜¯å¼§åº¦ï¼‰</td><td style="text-align:center"><code>SELECT ATAN(2.5);</code></td></tr><tr><td style="text-align:center">ATAN2(n, m)</td><td style="text-align:center">æ±‚åæ­£åˆ‡å€¼ï¼ˆå‚æ•°æ˜¯å¼§åº¦ï¼‰</td><td style="text-align:center"><code>SELECT ATAN2(-0.8, 2);</code></td></tr><tr><td style="text-align:center">AVG(expression)</td><td style="text-align:center">è¿”å›ä¸€ä¸ªè¡¨è¾¾å¼çš„å¹³å‡å€¼ï¼Œexpression æ˜¯ä¸€ä¸ªå­—æ®µ</td><td style="text-align:center">è¿”å› Products è¡¨ä¸­ Price å­—æ®µçš„å¹³å‡å€¼ï¼š <br> <code>SELECT AVG(Price) AS AveragePrice FROM Products;</code></td></tr><tr><td style="text-align:center">CEIL(x)</td><td style="text-align:center">è¿”å›å¤§äºæˆ–ç­‰äº x çš„æœ€å°æ•´æ•°</td><td style="text-align:center"><code>SELECT CEIL(1.5);  -- è¿”å›2</code></td></tr><tr><td style="text-align:center">CEILING(x)</td><td style="text-align:center">è¿”å›å¤§äºæˆ–ç­‰äº x çš„æœ€å°æ•´æ•°</td><td style="text-align:center"><code>SELECT CEILING(1.5);  -- è¿”å›2</code></td></tr><tr><td style="text-align:center">COS(x)</td><td style="text-align:center">æ±‚ä½™å¼¦å€¼ï¼ˆå‚æ•°æ˜¯å¼§åº¦ï¼‰</td><td style="text-align:center"><code>SELECT COS(2);</code></td></tr><tr><td style="text-align:center">COT(x)</td><td style="text-align:center">æ±‚ä½™åˆ‡å€¼ï¼ˆå‚æ•°æ˜¯å¼§åº¦ï¼‰</td><td style="text-align:center"><code>SELECT COT(6);</code></td></tr><tr><td style="text-align:center">COUNT(expression)</td><td style="text-align:center">è¿”å›æŸ¥è¯¢çš„è®°å½•æ€»æ•°ï¼Œexpression å‚æ•°æ˜¯ä¸€ä¸ªå­—æ®µæˆ–è€… * å·</td><td style="text-align:center">è¿”å› Products è¡¨ä¸­ products å­—æ®µæ€»å…±æœ‰å¤šå°‘æ¡è®°å½•ï¼š <br> <code>SELECT COUNT(ProductID) AS NumberOfProducts FROM Products;</code></td></tr><tr><td style="text-align:center">DEGREES(x)</td><td style="text-align:center">å°†å¼§åº¦è½¬æ¢ä¸ºè§’åº¦</td><td style="text-align:center"><code>SELECT DEGREES(3.1415926535898);  -- 180</code></td></tr><tr><td style="text-align:center">n DIV m</td><td style="text-align:center">æ•´é™¤ï¼Œn ä¸ºè¢«é™¤æ•°ï¼Œm ä¸ºé™¤æ•°</td><td style="text-align:center">è®¡ç®— 10 é™¤äº 5ï¼š <br> <code>SELECT 10 DIV 5;  -- 2</code></td></tr><tr><td style="text-align:center">EXP(x)</td><td style="text-align:center">è¿”å› e çš„ x æ¬¡æ–¹</td><td style="text-align:center">è®¡ç®— e çš„ä¸‰æ¬¡æ–¹ï¼š <br> <code>SELECT EXP(3);  -- 20.085536923188</code></td></tr><tr><td style="text-align:center">FLOOR(x)</td><td style="text-align:center">è¿”å›å°äºæˆ–ç­‰äº x çš„æœ€å¤§æ•´æ•°</td><td style="text-align:center">å°äºæˆ–ç­‰äº 1.5 çš„æ•´æ•°ï¼š <br> <code>SELECT FLOOR(1.5);  -- è¿”å›1</code></td></tr><tr><td style="text-align:center">GREATEST(expr1, expr2, expr3, ...)</td><td style="text-align:center">è¿”å›åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼</td><td style="text-align:center">è¿”å›ä»¥ä¸‹æ•°å­—åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼ï¼š <br> <code>SELECT GREATEST(3, 12, 34, 8, 25);  -- 34</code> <br> è¿”å›ä»¥ä¸‹å­—ç¬¦ä¸²åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼ï¼š <br> <code>SELECT GREATEST(&quot;Google&quot;, &quot;Baidu&quot;, &quot;Apple&quot;);  -- Google</code></td></tr><tr><td style="text-align:center">LEAST(expr1, expr2, expr3, ...)</td><td style="text-align:center">è¿”å›åˆ—è¡¨ä¸­çš„æœ€å°å€¼</td><td style="text-align:center">è¿”å›ä»¥ä¸‹æ•°å­—åˆ—è¡¨ä¸­çš„æœ€å°å€¼ï¼š <br> <code>SELECT LEAST(3, 12, 34, 8, 25);  -- 3</code> <br> è¿”å›ä»¥ä¸‹å­—ç¬¦ä¸²åˆ—è¡¨ä¸­çš„æœ€å°å€¼ï¼š <br> <code>SELECT LEAST(&quot;Google&quot;, &quot;Baidu&quot;, &quot;Apple&quot;);  -- Apple</code></td></tr><tr><td style="text-align:center">LN(x)</td><td style="text-align:center">è¿”å›æ•°å­— x çš„è‡ªç„¶å¯¹æ•°ï¼Œä»¥ e ä¸ºåº•ã€‚</td><td style="text-align:center">è¿”å› 2 çš„è‡ªç„¶å¯¹æ•°ï¼š <br> <code>SELECT LN(2);  -- 0.6931471805599453</code></td></tr><tr><td style="text-align:center">LOG(x) æˆ– LOG(base, x)</td><td style="text-align:center">è¿”å›è‡ªç„¶å¯¹æ•°ï¼ˆä»¥ e ä¸ºåº•çš„å¯¹æ•°ï¼‰ï¼Œ <br> å¦‚æœå¸¦æœ‰ base å‚æ•°ï¼Œåˆ™ base ä¸ºæŒ‡å®šå¸¦åº•æ•°ã€‚</td><td style="text-align:center"><code>SELECT LOG(20.085536923188);  -- 3</code> <br> <code>SELECT LOG(2, 4);  -- 2</code></td></tr><tr><td style="text-align:center">LOG10(x)</td><td style="text-align:center">è¿”å›ä»¥ 10 ä¸ºåº•çš„å¯¹æ•°</td><td style="text-align:center"><code>SELECT LOG10(100);  -- 2</code></td></tr><tr><td style="text-align:center">LOG2(x)</td><td style="text-align:center">è¿”å›ä»¥ 2 ä¸ºåº•çš„å¯¹æ•°</td><td style="text-align:center">è¿”å›ä»¥ 2 ä¸ºåº• 6 çš„å¯¹æ•°ï¼š <br> <code>SELECT LOG2(6);  -- 2.584962500721156</code></td></tr><tr><td style="text-align:center">MAX(expression)</td><td style="text-align:center">è¿”å›å­—æ®µ expression ä¸­çš„æœ€å¤§å€¼</td><td style="text-align:center">è¿”å›æ•°æ®è¡¨ Products ä¸­å­—æ®µ Price çš„æœ€å¤§å€¼ï¼š <br> <code>SELECT MAX(Price) AS LargestPrice FROM Products;</code></td></tr><tr><td style="text-align:center">MIN(expression)</td><td style="text-align:center">è¿”å›å­—æ®µ expression ä¸­çš„æœ€å°å€¼</td><td style="text-align:center">è¿”å›æ•°æ®è¡¨ Products ä¸­å­—æ®µ Price çš„æœ€å°å€¼ï¼š <br> <code>SELECT MIN(Price) AS MinPrice FROM Products;</code></td></tr><tr><td style="text-align:center">MOD(x,y)</td><td style="text-align:center">è¿”å› x é™¤ä»¥ y ä»¥åçš„ä½™æ•°</td><td style="text-align:center">5 é™¤äº 2 çš„ä½™æ•°ï¼š <br> <code>SELECT MOD(5, 2);  -- 1</code></td></tr><tr><td style="text-align:center">PI()</td><td style="text-align:center">è¿”å›åœ†å‘¨ç‡(3.141593ï¼‰</td><td style="text-align:center"><code>SELECT PI();  --3.141593</code></td></tr><tr><td style="text-align:center">POW(x,y)</td><td style="text-align:center">è¿”å› x çš„ y æ¬¡æ–¹</td><td style="text-align:center">2 çš„ 3 æ¬¡æ–¹ï¼š <br> <code>SELECT POW(2, 3);  -- 8</code></td></tr><tr><td style="text-align:center">POWER(x,y)</td><td style="text-align:center">è¿”å› x çš„ y æ¬¡æ–¹</td><td style="text-align:center">2 çš„ 3 æ¬¡æ–¹ï¼š <br> <code>SELECT POWER(2, 3);  -- 8</code></td></tr><tr><td style="text-align:center">RADIANS(x)</td><td style="text-align:center">å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦</td><td style="text-align:center">180 åº¦è½¬æ¢ä¸ºå¼§åº¦ï¼š <br> <code>SELECT RADIANS(180);  -- 3.1415926535898</code></td></tr><tr><td style="text-align:center">RAND()</td><td style="text-align:center">è¿”å› 0 åˆ° 1 çš„éšæœºæ•°</td><td style="text-align:center"><code>SELECT RAND();  --0.93099315644334</code></td></tr><tr><td style="text-align:center">ROUND(x)</td><td style="text-align:center">è¿”å›ç¦» x æœ€è¿‘çš„æ•´æ•°,å››èˆäº”å…¥</td><td style="text-align:center"><code>SELECT ROUND(1.23456);  --1</code></td></tr><tr><td style="text-align:center">SIGN(x)</td><td style="text-align:center">è¿”å› x çš„ç¬¦å·ï¼Œx æ˜¯è´Ÿæ•°ã€0ã€ æ­£æ•°åˆ†åˆ«è¿”å› -1ã€0 å’Œ 1</td><td style="text-align:center"><code>SELECT SIGN(-10);  -- (-1)</code></td></tr><tr><td style="text-align:center">SIN(x)</td><td style="text-align:center">æ±‚æ­£å¼¦å€¼ï¼ˆå‚æ•°æ˜¯å¼§åº¦ï¼‰</td><td style="text-align:center"><code>SELECT SIN(RADIANS(30));  -- 0.5</code></td></tr><tr><td style="text-align:center">SQRT(x)</td><td style="text-align:center">è¿”å›xçš„å¹³æ–¹æ ¹</td><td style="text-align:center">25 çš„å¹³æ–¹æ ¹ï¼š <br> <code>SELECT SQRT(25);  -- 5</code></td></tr><tr><td style="text-align:center">SUM(expression)</td><td style="text-align:center">è¿”å›æŒ‡å®šå­—æ®µçš„æ€»å’Œ</td><td style="text-align:center">è®¡ç®— OrderDetails è¡¨ä¸­å­—æ®µ Quantity çš„æ€»å’Œï¼š <br> <code>SELECT SUM(Quantity) AS TotalItemsOrdered FROM OrderDetails;</code></td></tr><tr><td style="text-align:center">TAN(x)</td><td style="text-align:center">æ±‚æ­£åˆ‡å€¼ï¼ˆå‚æ•°æ˜¯å¼§åº¦ï¼‰</td><td style="text-align:center"><code>SELECT TAN(1.75);  -- (-5.52037992250933)</code></td></tr><tr><td style="text-align:center">TRUNCATE(x, y)</td><td style="text-align:center">è¿”å›æ•°å€¼ x ä¿ç•™åˆ°å°æ•°ç‚¹å y ä½çš„å€¼ï¼ˆä¸ ROUND æœ€å¤§çš„åŒºåˆ«æ˜¯ä¸ä¼šè¿›è¡Œå››èˆäº”å…¥ï¼‰</td><td style="text-align:center"><code>SELECT TRUNCATE(1.23456, 3);  -- 1.234</code></td></tr></tbody></table></div><h2 id="æ—¥æœŸå‡½æ•°"><a href="#æ—¥æœŸå‡½æ•°" class="headerlink" title="æ—¥æœŸå‡½æ•°"></a>æ—¥æœŸå‡½æ•°</h2><div class="table-container"><table><thead><tr><th style="text-align:center">å‡½æ•°å</th><th style="text-align:center">æè¿°</th><th style="text-align:center">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">ADDDATE(d, n)</td><td style="text-align:center">è®¡ç®—èµ·å§‹æ—¥æœŸ d åŠ ä¸Š n å¤©çš„æ—¥æœŸ</td><td style="text-align:center"><code>SELECT ADDDATE(&quot;2017-06-15&quot;, INTERVAL 10 DAY);  --2017-06-25</code></td></tr><tr><td style="text-align:center">ADDTIME(t, n)</td><td style="text-align:center">n æ˜¯ä¸€ä¸ªæ—¶é—´è¡¨è¾¾å¼ï¼Œæ—¶é—´ t åŠ ä¸Šæ—¶é—´è¡¨è¾¾å¼ n</td><td style="text-align:center">åŠ  5 ç§’ï¼š <br> <code>SELECT ADDTIME(&#39;2011-11-11 11:11:11&#39;, 5);  --2011-11-11 11:11:16</code> <br> æ·»åŠ  2 å°æ—¶, 10 åˆ†é’Ÿ, 5 ç§’ï¼š <br> <code>SELECT ADDTIME(&quot;2020-06-15 09:34:21&quot;, &quot;2:10:5&quot;);  -- 2020-06-15 11:44:26</code></td></tr><tr><td style="text-align:center">CURDATE()</td><td style="text-align:center">è¿”å›å½“å‰æ—¥æœŸ</td><td style="text-align:center"><code>SELECT CURDATE();  -- 2018-09-19</code></td></tr><tr><td style="text-align:center">CURRENT_DATE()</td><td style="text-align:center">è¿”å›å½“å‰æ—¥æœŸ</td><td style="text-align:center"><code>SELECT CURRENT_DATE();  -- 2018-09-19</code></td></tr><tr><td style="text-align:center">CURRENT_TIME</td><td style="text-align:center">è¿”å›å½“å‰æ—¶é—´</td><td style="text-align:center"><code>SELECT CURRENT_TIME();  -- 19:59:02</code></td></tr><tr><td style="text-align:center">CURRENT_TIMESTAMP()</td><td style="text-align:center">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td><td style="text-align:center"><code>SELECT CURRENT_TIMESTAMP();  -- 2018-09-19 20:57:43</code></td></tr><tr><td style="text-align:center">CURTIME()</td><td style="text-align:center">è¿”å›å½“å‰æ—¶é—´</td><td style="text-align:center"><code>SELECT CURTIME();  -- 19:59:02</code></td></tr><tr><td style="text-align:center">DATE()</td><td style="text-align:center">ä»æ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´è¡¨è¾¾å¼ä¸­æå–æ—¥æœŸå€¼</td><td style="text-align:center"><code>SELECT DATE(&quot;2017-06-15&quot;);  -- 2017-06-15</code></td></tr><tr><td style="text-align:center">DATEDIFF(d1, d2)</td><td style="text-align:center">è®¡ç®—æ—¥æœŸ d1 å’Œ d2 ä¹‹é—´ç›¸éš”çš„å¤©æ•°</td><td style="text-align:center"><code>SELECT DATEDIFF(&#39;2001-01-01&#39;, &#39;2001-02-02&#39;);  -- (-32)</code></td></tr><tr><td style="text-align:center">DATE_ADD(dï¼ŒINTERVAL expr type)</td><td style="text-align:center">è®¡ç®—èµ·å§‹æ—¥æœŸ d åŠ ä¸Šä¸€ä¸ªæ—¶é—´æ®µåçš„æ—¥æœŸ</td><td style="text-align:center"><code>SELECT ADDDATE(&#39;2011-11-11 11:11:11&#39;, 1);  -- 2011-11-12 11:11:11ï¼ˆé»˜è®¤æ˜¯å¤©ï¼‰</code> <br> <code>SELECT ADDDATE(&#39;2011-11-11 11:11:11&#39;, INTERVAL 5 MINUTE);  -- 2011-11-11 11:16:11 ï¼ˆTYPEçš„å–å€¼ä¸ä¸Šé¢é‚£ä¸ªåˆ—å‡ºæ¥çš„å‡½æ•°ç±»ä¼¼ï¼‰</code></td></tr><tr><td style="text-align:center">DATE_FORMAT(d, f)</td><td style="text-align:center">æŒ‰è¡¨è¾¾å¼ f çš„è¦æ±‚æ˜¾ç¤ºæ—¥æœŸ d</td><td style="text-align:center"><code>SELECT DATE_FORMAT(&#39;2011-11-11 11:11:11&#39;,&#39;%Y-%m-%d %r&#39;);  -- 2011-11-11 11:11:11 AM</code></td></tr><tr><td style="text-align:center">DATE_SUB(date, INTERVAL expr type)</td><td style="text-align:center">å‡½æ•°ä»æ—¥æœŸå‡å»æŒ‡å®šçš„æ—¶é—´é—´éš”ã€‚</td><td style="text-align:center">Orders è¡¨ä¸­ OrderDate å­—æ®µå‡å» 2 å¤©ï¼š <br> <code>SELECT OrderId, DATE_SUB(OrderDate,INTERVAL 2 DAY) AS OrderPayDate FROM Orders;</code></td></tr><tr><td style="text-align:center">DAY(d)</td><td style="text-align:center">è¿”å›æ—¥æœŸå€¼ d çš„æ—¥æœŸéƒ¨åˆ†</td><td style="text-align:center"><code>SELECT DAY(&quot;2017-06-15&quot;);  -- 15</code></td></tr><tr><td style="text-align:center">DAYNAME(d)</td><td style="text-align:center">è¿”å›æ—¥æœŸ d æ˜¯æ˜ŸæœŸå‡ ï¼Œå¦‚ Monday, Tuesday</td><td style="text-align:center"><code>SELECT DAYNAME(&#39;2011-11-11 11:11:11&#39;);  --Friday</code></td></tr><tr><td style="text-align:center">DAYOFMONTH(d)</td><td style="text-align:center">è®¡ç®—æ—¥æœŸ d æ˜¯æœ¬æœˆçš„ç¬¬å‡ å¤©</td><td style="text-align:center"><code>SELECT DAYOFMONTH(&#39;2011-11-11 11:11:11&#39;);  --11</code></td></tr><tr><td style="text-align:center">DAYOFWEEK(d)</td><td style="text-align:center">æ—¥æœŸ d ä»Šå¤©æ˜¯æ˜ŸæœŸå‡ ï¼Œ1 æ˜ŸæœŸæ—¥ï¼Œ2 æ˜ŸæœŸä¸€ï¼Œä»¥æ­¤ç±»æ¨</td><td style="text-align:center"><code>SELECT DAYOFWEEK(&#39;2011-11-11 11:11:11&#39;);  --6</code></td></tr><tr><td style="text-align:center">DAYOFYEAR(d)</td><td style="text-align:center">è®¡ç®—æ—¥æœŸ d æ˜¯æœ¬å¹´çš„ç¬¬å‡ å¤©</td><td style="text-align:center"><code>SELECT DAYOFYEAR(&#39;2011-11-11 11:11:11&#39;);  --315</code></td></tr><tr><td style="text-align:center">EXTRACT(type FROM d)</td><td style="text-align:center">ä»æ—¥æœŸ d ä¸­è·å–æŒ‡å®šçš„å€¼ï¼Œtype æŒ‡å®šè¿”å›çš„å€¼ã€‚ <br> typeå¯å–å€¼ä¸ºï¼š <br> MICROSECOND <br> SECOND <br> MINUTE <br> HOUR <br> DAY <br> WEEK <br> MONTH <br> QUARTER <br> YEAR <br> SECOND_MICROSECOND <br> MINUTE_MICROSECOND <br> MINUTE_SECOND <br> HOUR_MICROSECOND <br> HOUR_SECOND <br> HOUR_MINUTE <br> DAY_MICROSECOND <br> DAY_SECOND <br> DAY_MINUTE <br> DAY_HOUR <br> YEAR_MONTH</td><td style="text-align:center"><code>SELECT EXTRACT(MINUTE FROM &#39;2011-11-11 11:11:11&#39;);  -- 11</code></td></tr><tr><td style="text-align:center">FROM_DAYS(n)</td><td style="text-align:center">è®¡ç®—ä» 0000 å¹´ 1 æœˆ 1 æ—¥å¼€å§‹ n å¤©åçš„æ—¥æœŸ</td><td style="text-align:center"><code>SELECT FROM_DAYS(1111);  -- 0003-01-16</code></td></tr><tr><td style="text-align:center">HOUR(t)</td><td style="text-align:center">è¿”å› t ä¸­çš„å°æ—¶å€¼</td><td style="text-align:center"><code>SELECT HOUR(&#39;1:2:3&#39;);  -- 1</code></td></tr><tr><td style="text-align:center">LAST_DAY(d)</td><td style="text-align:center">è¿”å›ç»™ç»™å®šæ—¥æœŸçš„é‚£ä¸€æœˆä»½çš„æœ€åä¸€å¤©</td><td style="text-align:center"><code>SELECT LAST_DAY(&quot;2017-06-20&quot;);  -- 2017-06-30</code></td></tr><tr><td style="text-align:center">LOCALTIME()</td><td style="text-align:center">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td><td style="text-align:center"><code>SELECT LOCALTIME();  -- 2018-09-19 20:57:43</code></td></tr><tr><td style="text-align:center">LOCALTIMESTAMP()</td><td style="text-align:center">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td><td style="text-align:center"><code>SELECT LOCALTIMESTAMP();  -- 2018-09-19 20:57:43</code></td></tr><tr><td style="text-align:center">MAKEDATE(year, day-of-year)</td><td style="text-align:center">åŸºäºç»™å®šå‚æ•°å¹´ä»½ year å’Œæ‰€åœ¨å¹´ä¸­çš„å¤©æ•°åºå· day-of-year è¿”å›ä¸€ä¸ªæ—¥æœŸ</td><td style="text-align:center"><code>SELECT MAKEDATE(2017, 3);  -- 2017-01-03</code></td></tr><tr><td style="text-align:center">MAKETIME(hour, minute, second)</td><td style="text-align:center">ç»„åˆæ—¶é—´ï¼Œå‚æ•°åˆ†åˆ«ä¸ºå°æ—¶ã€åˆ†é’Ÿã€ç§’</td><td style="text-align:center"><code>SELECT MAKETIME(11, 35, 4);  -- 11:35:04</code></td></tr><tr><td style="text-align:center">MICROSECOND(date)</td><td style="text-align:center">è¿”å›æ—¥æœŸå‚æ•°æ‰€å¯¹åº”çš„å¾®ç§’æ•°</td><td style="text-align:center"><code>SELECT MICROSECOND(&quot;2017-06-20 09:34:00.000023&quot;);  -- 23</code></td></tr><tr><td style="text-align:center">MINUTE(t)</td><td style="text-align:center">è¿”å› t ä¸­çš„åˆ†é’Ÿå€¼</td><td style="text-align:center"><code>SELECT MINUTE(&#39;1:2:3&#39;);  -- 2</code></td></tr><tr><td style="text-align:center">MONTHNAME(d)</td><td style="text-align:center">è¿”å›æ—¥æœŸå½“ä¸­çš„æœˆä»½åç§°ï¼Œå¦‚ November</td><td style="text-align:center"><code>SELECT MONTHNAME(&#39;2011-11-11 11:11:11&#39;);  -- November</code></td></tr><tr><td style="text-align:center">MONTH(d)</td><td style="text-align:center">è¿”å›æ—¥æœŸdä¸­çš„æœˆä»½å€¼ï¼Œ1 åˆ° 12</td><td style="text-align:center"><code>SELECT MONTH(&#39;2011-11-11 11:11:11&#39;);  --11</code></td></tr><tr><td style="text-align:center">NOW()</td><td style="text-align:center">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td><td style="text-align:center"><code>SELECT NOW();  -- 2018-09-19 20:57:43</code></td></tr><tr><td style="text-align:center">PERIOD_ADD(period, number)</td><td style="text-align:center">ä¸º å¹´-æœˆ ç»„åˆæ—¥æœŸæ·»åŠ ä¸€ä¸ªæ—¶æ®µ</td><td style="text-align:center"><code>SELECT PERIOD_ADD(201703, 5);  -- 201708</code></td></tr><tr><td style="text-align:center">PERIOD_DIFF(period1, period2)</td><td style="text-align:center">è¿”å›ä¸¤ä¸ªæ—¶æ®µä¹‹é—´çš„æœˆä»½å·®å€¼</td><td style="text-align:center"><code>SELECT PERIOD_DIFF(201710, 201703);  -- 7</code></td></tr><tr><td style="text-align:center">QUARTER(d)</td><td style="text-align:center">è¿”å›æ—¥æœŸdæ˜¯ç¬¬å‡ å­£èŠ‚ï¼Œè¿”å› 1 åˆ° 4</td><td style="text-align:center"><code>SELECT QUARTER(&#39;2011-11-11 11:11:11&#39;);  -- 4</code></td></tr><tr><td style="text-align:center">SECOND(t)</td><td style="text-align:center">è¿”å› t ä¸­çš„ç§’é’Ÿå€¼</td><td style="text-align:center"><code>SELECT SECOND(&#39;1:2:3&#39;);  -- 3</code></td></tr><tr><td style="text-align:center">SEC_TO_TIME(s)</td><td style="text-align:center">å°†ä»¥ç§’ä¸ºå•ä½çš„æ—¶é—´ s è½¬æ¢ä¸ºæ—¶åˆ†ç§’çš„æ ¼å¼</td><td style="text-align:center"><code>SELECT SEC_TO_TIME(4320);  -- 01:12:00</code></td></tr><tr><td style="text-align:center">STR_TO_DATE(string, format_mask)</td><td style="text-align:center">å°†å­—ç¬¦ä¸²è½¬å˜ä¸ºæ—¥æœŸ</td><td style="text-align:center"><code>SELECT STR_TO_DATE(&quot;August 10 2017&quot;, &quot;%M %d %Y&quot;);  -- 2017-08-10</code></td></tr><tr><td style="text-align:center">SUBDATE(d, n)</td><td style="text-align:center">æ—¥æœŸ d å‡å» n å¤©åçš„æ—¥æœŸ</td><td style="text-align:center"><code>SELECT SUBDATE(&#39;2011-11-11 11:11:11&#39;, 1);  --2011-11-10 11:11:11 (é»˜è®¤æ˜¯å¤©)</code></td></tr><tr><td style="text-align:center">SUBTIME(t, n)</td><td style="text-align:center">æ—¶é—´ t å‡å» n ç§’çš„æ—¶é—´</td><td style="text-align:center"><code>SELECT SUBTIME(&#39;2011-11-11 11:11:11&#39;, 5);  --2011-11-11 11:11:06 (ç§’)</code></td></tr><tr><td style="text-align:center">SYSDATE()</td><td style="text-align:center">è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td><td style="text-align:center"><code>SELECT SYSDATE();  -- 2018-09-19 20:57:43</code></td></tr><tr><td style="text-align:center">TIME(expression)</td><td style="text-align:center">æå–ä¼ å…¥è¡¨è¾¾å¼çš„æ—¶é—´éƒ¨åˆ†</td><td style="text-align:center"><code>SELECT TIME(&quot;19:30:10&quot;);  -- 19:30:10</code></td></tr><tr><td style="text-align:center">TIME_FORMAT(t, f)</td><td style="text-align:center">æŒ‰è¡¨è¾¾å¼ f çš„è¦æ±‚æ˜¾ç¤ºæ—¶é—´ t</td><td style="text-align:center"><code>SELECT TIME_FORMAT(&#39;11:11:11&#39;, &#39;%r&#39;);  -- 11:11:11 AM</code></td></tr><tr><td style="text-align:center">TIME_TO_SEC(t)</td><td style="text-align:center">å°†æ—¶é—´ t è½¬æ¢ä¸ºç§’</td><td style="text-align:center"><code>SELECT TIME_TO_SEC(&#39;1:12:00&#39;);  -- 4320</code></td></tr><tr><td style="text-align:center">TIMEDIFF(time1, time2)</td><td style="text-align:center">è®¡ç®—æ—¶é—´å·®å€¼</td><td style="text-align:center"><code>SELECT TIMEDIFF(&quot;13:10:11&quot;, &quot;13:10:10&quot;);  -- 00:00:01</code></td></tr><tr><td style="text-align:center">TIMESTAMP(expression, interval)</td><td style="text-align:center">å•ä¸ªå‚æ•°æ—¶ï¼Œå‡½æ•°è¿”å›æ—¥æœŸæˆ–æ—¥æœŸæ—¶é—´è¡¨è¾¾å¼ï¼›æœ‰2ä¸ªå‚æ•°æ—¶ï¼Œå°†å‚æ•°åŠ å’Œ</td><td style="text-align:center"><code>SELECT TIMESTAMP(&quot;2017-07-23&quot;, &quot;13:10:11&quot;);  -- 2017-07-23 13:10:11</code></td></tr><tr><td style="text-align:center">TO_DAYS(d)</td><td style="text-align:center">è®¡ç®—æ—¥æœŸ d è·ç¦» 0000 å¹´ 1 æœˆ 1 æ—¥çš„å¤©æ•°</td><td style="text-align:center"><code>SELECT TO_DAYS(&#39;0001-01-01 01:01:01&#39;);  -- 366</code></td></tr><tr><td style="text-align:center">WEEK(d)</td><td style="text-align:center">è®¡ç®—æ—¥æœŸ d æ˜¯æœ¬å¹´çš„ç¬¬å‡ ä¸ªæ˜ŸæœŸï¼ŒèŒƒå›´æ˜¯ 0 åˆ° 53</td><td style="text-align:center"><code>SELECT WEEK(&#39;2011-11-11 11:11:11&#39;);  -- 45</code></td></tr><tr><td style="text-align:center">WEEKDAY(d)</td><td style="text-align:center">æ—¥æœŸ d æ˜¯æ˜ŸæœŸå‡ ï¼Œ0 è¡¨ç¤ºæ˜ŸæœŸä¸€ï¼Œ1 è¡¨ç¤ºæ˜ŸæœŸäºŒ</td><td style="text-align:center"><code>SELECT WEEKDAY(&quot;2017-06-15&quot;);  -- 3</code></td></tr><tr><td style="text-align:center">WEEKOFYEAR(d)</td><td style="text-align:center">è®¡ç®—æ—¥æœŸ d æ˜¯æœ¬å¹´çš„ç¬¬å‡ ä¸ªæ˜ŸæœŸï¼ŒèŒƒå›´æ˜¯ 0 åˆ° 53</td><td style="text-align:center"><code>SELECT WEEKOFYEAR(&#39;2011-11-11 11:11:11&#39;);  -- 45</code></td></tr><tr><td style="text-align:center">YEAR(d)</td><td style="text-align:center">è¿”å›å¹´ä»½</td><td style="text-align:center"><code>SELECT YEAR(&quot;2017-06-15&quot;);  -- 2017</code></td></tr><tr><td style="text-align:center">YEARWEEK(date, mode)</td><td style="text-align:center">è¿”å›å¹´ä»½åŠç¬¬å‡ å‘¨ï¼ˆ0 åˆ° 53ï¼‰ï¼Œmode ä¸­ 0 è¡¨ç¤ºå‘¨å¤©ï¼Œ1è¡¨ç¤ºå‘¨ä¸€ï¼Œä»¥æ­¤ç±»æ¨</td><td style="text-align:center"><code>SELECT YEARWEEK(&quot;2017-06-15&quot;);  -- 201724</code></td></tr></tbody></table></div><h2 id="é«˜çº§å‡½æ•°"><a href="#é«˜çº§å‡½æ•°" class="headerlink" title="é«˜çº§å‡½æ•°"></a>é«˜çº§å‡½æ•°</h2><div class="table-container"><table><thead><tr><th style="text-align:center">å‡½æ•°å</th><th style="text-align:center">æè¿°</th><th style="text-align:center">å®ä¾‹</th></tr></thead><tbody><tr><td style="text-align:center">BIN(x)</td><td style="text-align:center">è¿”å› x çš„äºŒè¿›åˆ¶ç¼–ç </td><td style="text-align:center">15 çš„ 2 è¿›åˆ¶ç¼–ç ï¼š <br> <code>SELECT BIN(15);  -- 1111</code></td></tr><tr><td style="text-align:center">BINARY(s)</td><td style="text-align:center">å°†å­—ç¬¦ä¸² s è½¬æ¢ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²</td><td style="text-align:center"><code>SELECT BINARY &quot;GOOGLE&quot;;  -- GOOGLE</code></td></tr><tr><td style="text-align:center">CASE expression <br> WHEN condition1 THEN result1 <br> WHEN condition2 THEN result2 <br> ... <br> WHEN conditionN THEN resultN <br> ELSE result</td><td style="text-align:center">END &vert; CASE è¡¨ç¤ºå‡½æ•°å¼€å§‹ï¼ŒEND è¡¨ç¤ºå‡½æ•°ç»“æŸã€‚ <br> å¦‚æœ condition1 æˆç«‹ï¼Œåˆ™è¿”å› result1,  <br> å¦‚æœ condition2 æˆç«‹ï¼Œåˆ™è¿”å› result2ï¼Œ <br> å½“å…¨éƒ¨ä¸æˆç«‹åˆ™è¿”å› resultï¼Œè€Œå½“æœ‰ä¸€ä¸ªæˆç«‹ä¹‹åï¼Œåé¢çš„å°±ä¸æ‰§è¡Œäº†ã€‚</td><td style="text-align:center"><code>SELECT CASE</code> <br> <code>WHEN 1 &gt; 0</code> <br> <code>THEN &#39;1 &gt; 0&#39;</code> <br> <code>WHEN 2 &gt; 0</code> <br> <code>THEN &#39;2 &gt; 0&#39;</code> <br> <code>ELSE &#39;3 &gt; 0&#39;</code> <br> <code>END</code> <br> <code>-- 1 &gt; 0</code></td></tr><tr><td style="text-align:center">CAST(x AS type)</td><td style="text-align:center">è½¬æ¢æ•°æ®ç±»å‹</td><td style="text-align:center">å­—ç¬¦ä¸²æ—¥æœŸè½¬æ¢ä¸ºæ—¥æœŸï¼š <br> <code>SELECT CAST(&quot;2017-08-29&quot; AS DATE);  -- 2017-08-29</code></td></tr><tr><td style="text-align:center">COALESCE(expr1, expr2, ...., expr_n)</td><td style="text-align:center">è¿”å›å‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªéç©ºè¡¨è¾¾å¼ï¼ˆä»å·¦å‘å³ï¼‰</td><td style="text-align:center"><code>SELECT COALESCE(NULL, NULL, NULL, &#39;baidu.com&#39;, NULL, &#39;google.com&#39;);  -- baidu.com</code></td></tr><tr><td style="text-align:center">CONNECTION_ID()</td><td style="text-align:center">è¿”å›å”¯ä¸€çš„è¿æ¥ ID</td><td style="text-align:center"><code>SELECT CONNECTION_ID();  -- 4292835</code></td></tr><tr><td style="text-align:center">CONV(x, f1, f2)</td><td style="text-align:center">è¿”å› f1 è¿›åˆ¶æ•°å˜æˆ f2 è¿›åˆ¶æ•°</td><td style="text-align:center"><code>SELECT CONV(15, 10, 2);  -- 1111</code></td></tr><tr><td style="text-align:center">CONVERT(s USING cs)</td><td style="text-align:center">å‡½æ•°å°†å­—ç¬¦ä¸² s çš„å­—ç¬¦é›†å˜æˆ cs</td><td style="text-align:center"><code>SELECT CHARSET(&#39;ABC&#39;)  --utf-8</code> <br> <code>SELECT CHARSET(CONVERT(&#39;ABC&#39; USING gbk))  --gbk</code></td></tr><tr><td style="text-align:center">CURRENT_USER()</td><td style="text-align:center">è¿”å›å½“å‰ç”¨æˆ·</td><td style="text-align:center"><code>SELECT CURRENT_USER();  -- root@localhost</code></td></tr><tr><td style="text-align:center">DATABASE()</td><td style="text-align:center">è¿”å›å½“å‰æ•°æ®åº“å</td><td style="text-align:center"><code>SELECT DATABASE();  -- testdb</code></td></tr><tr><td style="text-align:center">IF(expr, v1, v2)</td><td style="text-align:center">å¦‚æœè¡¨è¾¾å¼ expr æˆç«‹ï¼Œè¿”å›ç»“æœ v1ï¼›å¦åˆ™ï¼Œè¿”å›ç»“æœ v2ã€‚</td><td style="text-align:center"><code>SELECT IF(1 &gt; 0,&#39;æ­£ç¡®&#39;,&#39;é”™è¯¯&#39;)  --æ­£ç¡®</code></td></tr><tr><td style="text-align:center">IFNULL(v1, v2)</td><td style="text-align:center">å¦‚æœ v1 çš„å€¼ä¸ä¸º NULLï¼Œåˆ™è¿”å› v1ï¼Œå¦åˆ™è¿”å› v2ã€‚</td><td style="text-align:center"><code>SELECT IFNULL(NULL, &#39;Hello Word&#39;)  --Hello Word</code></td></tr><tr><td style="text-align:center">ISNULL(expression)</td><td style="text-align:center">åˆ¤æ–­è¡¨è¾¾å¼æ˜¯å¦ä¸º NULL</td><td style="text-align:center"><code>SELECT ISNULL(NULL);  --1</code></td></tr><tr><td style="text-align:center">LAST_INSERT_ID()</td><td style="text-align:center">è¿”å›æœ€è¿‘ç”Ÿæˆçš„ AUTO_INCREMENT å€¼</td><td style="text-align:center"><code>SELECT LAST_INSERT_ID();  --6</code></td></tr><tr><td style="text-align:center">NULLIF(expr1, expr2)</td><td style="text-align:center">æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœå­—ç¬¦ä¸² expr1 ä¸ expr2 ç›¸ç­‰ è¿”å› NULLï¼Œå¦åˆ™è¿”å› expr1</td><td style="text-align:center"><code>SELECT NULLIF(25, 25);  --</code></td></tr><tr><td style="text-align:center">SESSION_USER()</td><td style="text-align:center">è¿”å›å½“å‰ç”¨æˆ·</td><td style="text-align:center"><code>SELECT SESSION_USER();  -- root@localhost</code></td></tr><tr><td style="text-align:center">SYSTEM_USER()</td><td style="text-align:center">è¿”å›å½“å‰ç”¨æˆ·</td><td style="text-align:center"><code>SELECT SYSTEM_USER();  -- root@localhost</code></td></tr><tr><td style="text-align:center">USER()</td><td style="text-align:center">è¿”å›å½“å‰ç”¨æˆ·</td><td style="text-align:center"><code>SELECT USER();  -- root@localhost</code></td></tr><tr><td style="text-align:center">VERSION()</td><td style="text-align:center">è¿”å›æ•°æ®åº“çš„ç‰ˆæœ¬å·</td><td style="text-align:center"><code>SELECT VERSION()  -- 5.6.34</code></td></tr></tbody></table></div><h1 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h1><p>æœ¬ç« èŠ‚æˆ‘ä»¬ä¸»è¦ä»‹ç» MySQL çš„è¿ç®—ç¬¦åŠè¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ã€‚ MySQL ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§è¿ç®—ç¬¦ï¼š</p><ul><li>ç®—æœ¯è¿ç®—ç¬¦</li><li>æ¯”è¾ƒè¿ç®—ç¬¦</li><li>é€»è¾‘è¿ç®—ç¬¦</li><li>ä½è¿ç®—ç¬¦</li></ul><h2 id="ç®—æœ¯è¿ç®—ç¬¦"><a href="#ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="ç®—æœ¯è¿ç®—ç¬¦"></a>ç®—æœ¯è¿ç®—ç¬¦</h2><p>MySQL æ”¯æŒçš„ç®—æœ¯è¿ç®—ç¬¦åŒ…æ‹¬:</p><div class="table-container"><table><thead><tr><th style="text-align:center">è¿ç®—ç¬¦</th><th style="text-align:center">ä½œç”¨</th></tr></thead><tbody><tr><td style="text-align:center">+</td><td style="text-align:center">åŠ æ³•</td></tr><tr><td style="text-align:center">-</td><td style="text-align:center">å‡æ³•</td></tr><tr><td style="text-align:center">*</td><td style="text-align:center">ä¹˜æ³•</td></tr><tr><td style="text-align:center">/ æˆ– DIV</td><td style="text-align:center">é™¤æ³•</td></tr><tr><td style="text-align:center">% æˆ– MOD</td><td style="text-align:center">å–ä½™</td></tr></tbody></table></div><p>åœ¨é™¤æ³•è¿ç®—å’Œæ¨¡è¿ç®—ä¸­ï¼Œå¦‚æœé™¤æ•°ä¸º0ï¼Œå°†æ˜¯éæ³•é™¤æ•°ï¼Œè¿”å›ç»“æœä¸ºNULLã€‚</p><ol><li><p>åŠ </p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>å‡</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">2</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span>  <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>ä¹˜</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span> <span class="token number">2</span><span class="token operator">*</span><span class="token number">3</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span>   <span class="token number">6</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>é™¤</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------+</span><span class="token operator">|</span> <span class="token number">2</span><span class="token operator">/</span><span class="token number">3</span>    <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+</span><span class="token operator">|</span> <span class="token number">0.6667</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>å•†</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">10</span> <span class="token operator">DIV</span> <span class="token number">4</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----------+</span><span class="token operator">|</span> <span class="token number">10</span> <span class="token operator">DIV</span> <span class="token number">4</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----------+</span><span class="token operator">|</span>        <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>å–ä½™</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">10</span> MOD <span class="token number">4</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----------+</span><span class="token operator">|</span> <span class="token number">10</span> MOD <span class="token number">4</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----------+</span><span class="token operator">|</span>        <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li></ol><h2 id="æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="æ¯”è¾ƒè¿ç®—ç¬¦"></a>æ¯”è¾ƒè¿ç®—ç¬¦</h2><p><code>SELECT</code> è¯­å¥ä¸­çš„æ¡ä»¶è¯­å¥ç»å¸¸è¦ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦ã€‚é€šè¿‡è¿™äº›æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œå¯ä»¥åˆ¤æ–­è¡¨ä¸­çš„å“ªäº›è®°å½•æ˜¯ç¬¦åˆæ¡ä»¶çš„ã€‚æ¯”è¾ƒç»“æœä¸ºçœŸï¼Œåˆ™è¿”å› <code>1</code>ï¼Œä¸ºå‡åˆ™è¿”å› <code>0</code>ï¼Œæ¯”è¾ƒç»“æœä¸ç¡®å®šåˆ™è¿”å› <code>NULL</code>ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">ç¬¦å·</th><th style="text-align:center">æè¿°</th><th style="text-align:center">å¤‡æ³¨</th></tr></thead><tbody><tr><td style="text-align:center">=</td><td style="text-align:center">ç­‰äº</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">&lt;&gt;, !=</td><td style="text-align:center">ä¸ç­‰äº</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">&gt;</td><td style="text-align:center">å¤§äº</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">&lt;</td><td style="text-align:center">å°äº</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">&lt;=</td><td style="text-align:center">å°äºç­‰äº</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">&gt;=</td><td style="text-align:center">å¤§äºç­‰äº</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">BETWEEN</td><td style="text-align:center">åœ¨ä¸¤å€¼ä¹‹é—´</td><td style="text-align:center">&gt;=min &amp;&amp; &lt;=max</td></tr><tr><td style="text-align:center">NOT BETWEEN</td><td style="text-align:center">ä¸åœ¨ä¸¤å€¼ä¹‹é—´</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">IN</td><td style="text-align:center">åœ¨é›†åˆä¸­</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">NOT IN</td><td style="text-align:center">ä¸åœ¨é›†åˆä¸­</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">&lt;=&gt;</td><td style="text-align:center">ä¸¥æ ¼æ¯”è¾ƒä¸¤ä¸ª NULL å€¼æ˜¯å¦ç›¸ç­‰</td><td style="text-align:center">ä¸¤ä¸ªæ“ä½œç å‡ä¸º NULL æ—¶ï¼Œå…¶æ‰€å¾—å€¼ä¸º 1ï¼› <br> è€Œå½“ä¸€ä¸ªæ“ä½œç ä¸º NULL æ—¶ï¼Œå…¶æ‰€å¾—å€¼ä¸º 0</td></tr><tr><td style="text-align:center">LIKE</td><td style="text-align:center">æ¨¡ç³ŠåŒ¹é…</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">REGEXP æˆ– RLIKE</td><td style="text-align:center">æ­£åˆ™å¼åŒ¹é…</td><td style="text-align:center">&nbsp;</td></tr><tr><td style="text-align:center">IS NULL</td><td style="text-align:center">ä¸ºç©º</td><td style="text-align:center">&nbsp;</td></tr><tr><td style="text-align:center">IS NOT NULL</td><td style="text-align:center">ä¸ä¸ºç©º</td><td style="text-align:center">&nbsp;</td></tr></tbody></table></div><ol><li><p>ç­‰äº</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span> <span class="token number">2</span><span class="token operator">=</span><span class="token number">3</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token boolean">NULL</span> <span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------------+</span><span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">=</span> <span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------------+</span><span class="token operator">|</span>        <span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>ä¸ç­‰äº</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span><span class="token operator">&lt;></span><span class="token number">3</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span> <span class="token number">2</span><span class="token operator">&lt;></span><span class="token number">3</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>å®‰å…¨ç­‰äº</p><p> ä¸ <code>=</code> çš„åŒºåˆ«åœ¨äºå½“ä¸¤ä¸ªæ“ä½œç å‡ä¸º <code>NULL</code> æ—¶ï¼Œå…¶æ‰€å¾—å€¼ä¸º <code>1</code> è€Œä¸ä¸º <code>NULL</code>ï¼Œè€Œå½“ä¸€ä¸ªæ“ä½œç ä¸º <code>NULL</code> æ—¶ï¼Œå…¶æ‰€å¾—å€¼ä¸º <code>0</code> è€Œä¸ä¸º <code>NULL</code>ã€‚</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span><span class="token operator">&lt;=></span><span class="token number">3</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+</span><span class="token operator">|</span> <span class="token number">2</span><span class="token operator">&lt;=></span><span class="token number">3</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+</span><span class="token operator">|</span>     <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token boolean">NULL</span><span class="token operator">=</span><span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----------+</span><span class="token operator">|</span> <span class="token boolean">NULL</span><span class="token operator">=</span><span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------+</span><span class="token operator">|</span>      <span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token boolean">NULL</span><span class="token operator">&lt;=></span><span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------------+</span><span class="token operator">|</span> <span class="token boolean">NULL</span><span class="token operator">&lt;=></span><span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------------+</span><span class="token operator">|</span>           <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>å°äº</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span><span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span> <span class="token number">2</span><span class="token operator">&lt;</span><span class="token number">3</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>å°äºç­‰äº</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span><span class="token operator">&lt;=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span> <span class="token number">2</span><span class="token operator">&lt;=</span><span class="token number">3</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>å¤§äº</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span><span class="token operator">></span><span class="token number">3</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span> <span class="token number">2</span><span class="token operator">></span><span class="token number">3</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span>   <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>å¤§äºç­‰äº</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span><span class="token operator">>=</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span> <span class="token number">2</span><span class="token operator">>=</span><span class="token number">3</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span>    <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>BETWEEN</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">5</span> <span class="token operator">BETWEEN</span> <span class="token number">1</span> <span class="token operator">AND</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------------------+</span><span class="token operator">|</span> <span class="token number">5</span> <span class="token operator">BETWEEN</span> <span class="token number">1</span> <span class="token operator">AND</span> <span class="token number">10</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------------+</span><span class="token operator">|</span>                  <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>IN</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">5</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------------------+</span><span class="token operator">|</span> <span class="token number">5</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----------------------+</span><span class="token operator">|</span>                    <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----------------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>NOT IN</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">5</span> <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------------------------+</span><span class="token operator">|</span> <span class="token number">5</span> <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------------------+</span><span class="token operator">|</span>                        <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>IS NULL</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token boolean">NULL</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------------+</span><span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------+</span><span class="token operator">|</span>            <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token string">'a'</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------------+</span><span class="token operator">|</span> <span class="token string">'a'</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------------+</span><span class="token operator">|</span>           <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>IS NOT NULL</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token boolean">NULL</span> <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------------------+</span><span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------------+</span><span class="token operator">|</span>                <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token string">'a'</span> <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----------------+</span><span class="token operator">|</span> <span class="token string">'a'</span> <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------------+</span><span class="token operator">|</span>               <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>LIKE</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token string">'12345'</span> <span class="token operator">LIKE</span> <span class="token string">'12%'</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------------------+</span><span class="token operator">|</span> <span class="token string">'12345'</span> <span class="token operator">LIKE</span> <span class="token string">'12%'</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------------+</span><span class="token operator">|</span>                  <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token string">'12345'</span> <span class="token operator">LIKE</span> <span class="token string">'12_'</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------------------+</span><span class="token operator">|</span> <span class="token string">'12345'</span> <span class="token operator">LIKE</span> <span class="token string">'12_'</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------------+</span><span class="token operator">|</span>                  <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>REGEXP</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token string">'beijing'</span> <span class="token operator">REGEXP</span> <span class="token string">'jing'</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------------------------+</span><span class="token operator">|</span> <span class="token string">'beijing'</span> <span class="token operator">REGEXP</span> <span class="token string">'jing'</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------------------------+</span><span class="token operator">|</span>                       <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------------------------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token string">'beijing'</span> <span class="token operator">REGEXP</span> <span class="token string">'xi'</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----------------------+</span><span class="token operator">|</span> <span class="token string">'beijing'</span> <span class="token operator">REGEXP</span> <span class="token string">'xi'</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------------------+</span><span class="token operator">|</span>                     <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li></ol><h2 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h2><p>é€»è¾‘è¿ç®—ç¬¦ç”¨æ¥åˆ¤æ–­è¡¨è¾¾å¼çš„çœŸå‡ã€‚å¦‚æœè¡¨è¾¾å¼æ˜¯çœŸï¼Œç»“æœè¿”å› <code>1</code>ã€‚å¦‚æœè¡¨è¾¾å¼æ˜¯å‡ï¼Œç»“æœè¿”å› <code>0</code>ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">è¿ç®—ç¬¦å·</th><th style="text-align:center">ä½œç”¨</th></tr></thead><tbody><tr><td style="text-align:center">NOT æˆ– !</td><td style="text-align:center">é€»è¾‘é</td></tr><tr><td style="text-align:center">AND</td><td style="text-align:center">é€»è¾‘ä¸</td></tr><tr><td style="text-align:center">OR</td><td style="text-align:center">é€»è¾‘æˆ–</td></tr><tr><td style="text-align:center">XOR</td><td style="text-align:center">é€»è¾‘å¼‚æˆ–</td></tr></tbody></table></div><ol><li><p>ä¸</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span> <span class="token operator">AND</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">AND</span> <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">+</span><span class="token comment">---------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span> <span class="token operator">AND</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">AND</span> <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>æˆ–</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span> <span class="token operator">OR</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------+</span><span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">OR</span> <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+</span><span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">2</span> <span class="token operator">OR</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------+</span><span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">OR</span> <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+</span><span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">0</span> <span class="token operator">OR</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------+</span><span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">OR</span> <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+</span><span class="token operator">|</span>      <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------+</span><span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+</span><span class="token operator">|</span>      <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token boolean">NULL</span> <span class="token operator">OR</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----------+</span><span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">OR</span> <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------+</span><span class="token operator">|</span>         <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>é</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">NOT</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+</span><span class="token operator">|</span> <span class="token operator">NOT</span> <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+</span><span class="token operator">|</span>     <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">----+</span><span class="token operator">|</span> <span class="token operator">!</span><span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+</span><span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">----+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>å¼‚æˆ–</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token operator">XOR</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">XOR</span> <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">0</span> <span class="token operator">XOR</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">XOR</span> <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token operator">XOR</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">XOR</span> <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token boolean">NULL</span> <span class="token operator">XOR</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------------+</span><span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">XOR</span> <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+</span><span class="token operator">|</span>       <span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+</span>mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token operator">^</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+</span><span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">^</span> <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+</span><span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li></ol><h2 id="ä½è¿ç®—ç¬¦"><a href="#ä½è¿ç®—ç¬¦" class="headerlink" title="ä½è¿ç®—ç¬¦"></a>ä½è¿ç®—ç¬¦</h2><p>ä½è¿ç®—ç¬¦æ˜¯åœ¨äºŒè¿›åˆ¶æ•°ä¸Šè¿›è¡Œè®¡ç®—çš„è¿ç®—ç¬¦ã€‚ä½è¿ç®—ä¼šå…ˆå°†æ“ä½œæ•°å˜æˆäºŒè¿›åˆ¶æ•°ï¼Œè¿›è¡Œä½è¿ç®—ã€‚ç„¶åå†å°†è®¡ç®—ç»“æœä»äºŒè¿›åˆ¶æ•°å˜å›åè¿›åˆ¶æ•°ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">è¿ç®—ç¬¦å·</th><th style="text-align:center">ä½œç”¨</th></tr></thead><tbody><tr><td style="text-align:center">&amp;</td><td style="text-align:center">æŒ‰ä½ä¸</td></tr><tr><td style="text-align:center">&vert;</td><td style="text-align:center">æŒ‰ä½æˆ–</td></tr><tr><td style="text-align:center">^</td><td style="text-align:center">æŒ‰ä½å¼‚æˆ–</td></tr><tr><td style="text-align:center">!</td><td style="text-align:center">å–å</td></tr><tr><td style="text-align:center">&lt;&lt;</td><td style="text-align:center">å·¦ç§»</td></tr><tr><td style="text-align:center">&gt;&gt;</td><td style="text-align:center">å³ç§»</td></tr></tbody></table></div><ol><li><p>æŒ‰ä½ä¸</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">3</span><span class="token operator">&amp;</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span> <span class="token number">3</span><span class="token operator">&amp;</span><span class="token number">5</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>æŒ‰ä½æˆ–</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">3</span><span class="token operator">|</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span> <span class="token number">3</span><span class="token operator">|</span><span class="token number">5</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span>   <span class="token number">7</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>æŒ‰ä½å¼‚æˆ–</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">3</span><span class="token operator">^</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span> <span class="token number">3</span><span class="token operator">^</span><span class="token number">5</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span class="token operator">|</span>   <span class="token number">6</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>æŒ‰ä½å–å</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token operator">~</span><span class="token number">18446744073709551612</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-----------------------+</span><span class="token operator">|</span> <span class="token operator">~</span><span class="token number">18446744073709551612</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------------------+</span><span class="token operator">|</span>                     <span class="token number">3</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>æŒ‰ä½å³ç§»</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">3</span><span class="token operator">>></span><span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span> <span class="token number">3</span><span class="token operator">>></span><span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li><li><p>æŒ‰ä½å·¦ç§»</p><p> <pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">></span> <span class="token keyword">SELECT</span> <span class="token number">3</span><span class="token operator">&lt;&lt;</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span> <span class="token number">3</span><span class="token operator">&lt;&lt;</span><span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span>    <span class="token number">6</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p></li></ol><h2 id="è¿ç®—ç¬¦ä¼˜å…ˆçº§"><a href="#è¿ç®—ç¬¦ä¼˜å…ˆçº§" class="headerlink" title="è¿ç®—ç¬¦ä¼˜å…ˆçº§"></a>è¿ç®—ç¬¦ä¼˜å…ˆçº§</h2><p>æœ€ä½ä¼˜å…ˆçº§ä¸ºï¼š <code>:=</code>ã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:center">ä¼˜å…ˆçº§é¡ºåº</th><th style="text-align:center">è¿ç®—ç¬¦</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">:=</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">&vert;&vert;, OR, XOR</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">&amp;&amp;, AND</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">NOT</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">BETWEEN, CASE, WHEN, THEN, ELSE</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">=, &lt;=&gt;, &gt;=, &gt;, &lt;=, &lt;, &lt;&gt;, !=, IS, LIKE, REGEXP, IN</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">&vert;</td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">&amp;</td></tr><tr><td style="text-align:center">9</td><td style="text-align:center">&lt;&lt;, &gt;&gt;</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">-, +</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">*, /, DIV, %, MOD</td></tr><tr><td style="text-align:center">12</td><td style="text-align:center">^</td></tr><tr><td style="text-align:center">13</td><td style="text-align:center">- (ä¸€å…ƒå‡å·)ï¼Œ~ (ä¸€å…ƒæ¯”ç‰¹åè½¬)</td></tr><tr><td style="text-align:center">14</td><td style="text-align:center">!</td></tr></tbody></table></div><h1 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h1><h2 id="å…³é”®å­—æ±‡æ€»"><a href="#å…³é”®å­—æ±‡æ€»" class="headerlink" title="å…³é”®å­—æ±‡æ€»"></a>å…³é”®å­—æ±‡æ€»</h2><div class="table-container"><table><thead><tr><th style="text-align:center">å…³é”®å­—</th><th style="text-align:center">å…³é”®å­—</th><th style="text-align:center">å…³é”®å­—</th></tr></thead><tbody><tr><td style="text-align:center">ADD</td><td style="text-align:center">ALL</td><td style="text-align:center">ALTER</td></tr><tr><td style="text-align:center">ANALYZE</td><td style="text-align:center">AND</td><td style="text-align:center">AS</td></tr><tr><td style="text-align:center">ASC</td><td style="text-align:center">ASENSITIVE</td><td style="text-align:center">BEFORE</td></tr><tr><td style="text-align:center">BETWEEN</td><td style="text-align:center">BIGINT</td><td style="text-align:center">BINARY</td></tr><tr><td style="text-align:center">BLOB</td><td style="text-align:center">BOTH</td><td style="text-align:center">BY</td></tr><tr><td style="text-align:center">CALL</td><td style="text-align:center">CASCADE</td><td style="text-align:center">CASE</td></tr><tr><td style="text-align:center">CHANGE</td><td style="text-align:center">CHAR</td><td style="text-align:center">CHARACTER</td></tr><tr><td style="text-align:center">CHECK</td><td style="text-align:center">COLLATE</td><td style="text-align:center">COLUMN</td></tr><tr><td style="text-align:center">CONDITION</td><td style="text-align:center">CONNECTION</td><td style="text-align:center">CONSTRAINT</td></tr><tr><td style="text-align:center">CONTINUE</td><td style="text-align:center">CONVERT</td><td style="text-align:center">CREATE</td></tr><tr><td style="text-align:center">CROSS</td><td style="text-align:center">CURRENT_DATE</td><td style="text-align:center">CURRENT_TIME</td></tr><tr><td style="text-align:center">CURRENT_TIMESTAMP</td><td style="text-align:center">CURRENT_USER</td><td style="text-align:center">CURSOR</td></tr><tr><td style="text-align:center">DATABASE</td><td style="text-align:center">DATABASES</td><td style="text-align:center">DAY_HOUR</td></tr><tr><td style="text-align:center">DAY_MICROSECOND</td><td style="text-align:center">DAY_MINUTE</td><td style="text-align:center">DAY_SECOND</td></tr><tr><td style="text-align:center">DEC</td><td style="text-align:center">DECIMAL</td><td style="text-align:center">DECLARE</td></tr><tr><td style="text-align:center">DEFAULT</td><td style="text-align:center">DELAYED</td><td style="text-align:center">DELETE</td></tr><tr><td style="text-align:center">DESC</td><td style="text-align:center">DESCRIBE</td><td style="text-align:center">DETERMINISTIC</td></tr><tr><td style="text-align:center">DISTINCT</td><td style="text-align:center">DISTINCTROW</td><td style="text-align:center">DIV</td></tr><tr><td style="text-align:center">DOUBLE</td><td style="text-align:center">DROP</td><td style="text-align:center">DUAL</td></tr><tr><td style="text-align:center">EACH</td><td style="text-align:center">ELSE</td><td style="text-align:center">ELSEIF</td></tr><tr><td style="text-align:center">ENCLOSED</td><td style="text-align:center">ESCAPED</td><td style="text-align:center">EXISTS</td></tr><tr><td style="text-align:center">EXIT</td><td style="text-align:center">EXPLAIN</td><td style="text-align:center">FALSE</td></tr><tr><td style="text-align:center">FETCH</td><td style="text-align:center">FLOAT</td><td style="text-align:center">FLOAT4</td></tr><tr><td style="text-align:center">FLOAT8</td><td style="text-align:center">FOR</td><td style="text-align:center">FORCE</td></tr><tr><td style="text-align:center">FOREIGN</td><td style="text-align:center">FROM</td><td style="text-align:center">FULLTEXT</td></tr><tr><td style="text-align:center">GOTO</td><td style="text-align:center">GRANT</td><td style="text-align:center">GROUP</td></tr><tr><td style="text-align:center">HAVING</td><td style="text-align:center">HIGH_PRIORITY</td><td style="text-align:center">HOUR_MICROSECOND</td></tr><tr><td style="text-align:center">HOUR_MINUTE</td><td style="text-align:center">HOUR_SECOND</td><td style="text-align:center">IF</td></tr><tr><td style="text-align:center">IGNORE</td><td style="text-align:center">IN</td><td style="text-align:center">INDEX</td></tr><tr><td style="text-align:center">INFILE</td><td style="text-align:center">INNER</td><td style="text-align:center">INOUT</td></tr><tr><td style="text-align:center">INSENSITIVE</td><td style="text-align:center">INSERT</td><td style="text-align:center">INT</td></tr><tr><td style="text-align:center">INT1</td><td style="text-align:center">INT2</td><td style="text-align:center">INT3</td></tr><tr><td style="text-align:center">INT4</td><td style="text-align:center">INT8</td><td style="text-align:center">INTEGER</td></tr><tr><td style="text-align:center">INTERVAL</td><td style="text-align:center">INTO</td><td style="text-align:center">IS</td></tr><tr><td style="text-align:center">ITERATE</td><td style="text-align:center">JOIN</td><td style="text-align:center">KEY</td></tr><tr><td style="text-align:center">KEYS</td><td style="text-align:center">KILL</td><td style="text-align:center">LABEL</td></tr><tr><td style="text-align:center">LEADING</td><td style="text-align:center">LEAVE</td><td style="text-align:center">LEFT</td></tr><tr><td style="text-align:center">LIKE</td><td style="text-align:center">LIMIT</td><td style="text-align:center">LINEAR</td></tr><tr><td style="text-align:center">LINES</td><td style="text-align:center">LOAD</td><td style="text-align:center">LOCALTIME</td></tr><tr><td style="text-align:center">LOCALTIMESTAMP</td><td style="text-align:center">LOCK</td><td style="text-align:center">LONG</td></tr><tr><td style="text-align:center">LONGBLOB</td><td style="text-align:center">LONGTEXT</td><td style="text-align:center">LOOP</td></tr><tr><td style="text-align:center">LOW_PRIORITY</td><td style="text-align:center">MATCH</td><td style="text-align:center">MEDIUMBLOB</td></tr><tr><td style="text-align:center">MEDIUMINT</td><td style="text-align:center">MEDIUMTEXT</td><td style="text-align:center">MIDDLEINT</td></tr><tr><td style="text-align:center">MINUTE_MICROSECOND</td><td style="text-align:center">MINUTE_SECOND</td><td style="text-align:center">MOD</td></tr><tr><td style="text-align:center">MODIFIES</td><td style="text-align:center">NATURAL</td><td style="text-align:center">NOT</td></tr><tr><td style="text-align:center">NO_WRITE_TO_BINLOG</td><td style="text-align:center">NULL</td><td style="text-align:center">NUMERIC</td></tr><tr><td style="text-align:center">ON</td><td style="text-align:center">OPTIMIZE</td><td style="text-align:center">OPTION</td></tr><tr><td style="text-align:center">OPTIONALLY</td><td style="text-align:center">OR ORDER</td><td style="text-align:center">&nbsp;</td></tr><tr><td style="text-align:center">OUT</td><td style="text-align:center">OUTER</td><td style="text-align:center">OUTFILE</td></tr><tr><td style="text-align:center">PRECISION</td><td style="text-align:center">PRIMARY</td><td style="text-align:center">PROCEDURE</td></tr><tr><td style="text-align:center">PURGE</td><td style="text-align:center">RAID0</td><td style="text-align:center">RANGE</td></tr><tr><td style="text-align:center">READ</td><td style="text-align:center">READS</td><td style="text-align:center">REAL</td></tr><tr><td style="text-align:center">REFERENCES</td><td style="text-align:center">REGEXP</td><td style="text-align:center">RELEASE</td></tr><tr><td style="text-align:center">RENAME</td><td style="text-align:center">REPEAT</td><td style="text-align:center">REPLACE</td></tr><tr><td style="text-align:center">REQUIRE</td><td style="text-align:center">RESTRICT</td><td style="text-align:center">RETURN</td></tr><tr><td style="text-align:center">REVOKE</td><td style="text-align:center">RIGHT</td><td style="text-align:center">RLIKE</td></tr><tr><td style="text-align:center">SCHEMA</td><td style="text-align:center">SCHEMAS</td><td style="text-align:center">SECOND_MICROSECOND</td></tr><tr><td style="text-align:center">SELECT</td><td style="text-align:center">SENSITIVE</td><td style="text-align:center">SEPARATOR</td></tr><tr><td style="text-align:center">SET</td><td style="text-align:center">SHOW</td><td style="text-align:center">SMALLINT</td></tr><tr><td style="text-align:center">SPATIAL</td><td style="text-align:center">SPECIFIC</td><td style="text-align:center">SQL</td></tr><tr><td style="text-align:center">SQLEXCEPTION</td><td style="text-align:center">SQLSTATE</td><td style="text-align:center">SQLWARNING</td></tr><tr><td style="text-align:center">SQL_BIG_RESULT</td><td style="text-align:center">SQL_CALC_FOUND_ROWS</td><td style="text-align:center">SQL_SMALL_RESULT</td></tr><tr><td style="text-align:center">SSL</td><td style="text-align:center">STARTING</td><td style="text-align:center">STRAIGHT_JOIN</td></tr><tr><td style="text-align:center">TABLE</td><td style="text-align:center">TERMINATED</td><td style="text-align:center">THEN</td></tr><tr><td style="text-align:center">TINYBLOB</td><td style="text-align:center">TINYINT</td><td style="text-align:center">TINYTEXT</td></tr><tr><td style="text-align:center">TO</td><td style="text-align:center">TRAILING</td><td style="text-align:center">TRIGGER</td></tr><tr><td style="text-align:center">TRUE</td><td style="text-align:center">UNDO</td><td style="text-align:center">UNION</td></tr><tr><td style="text-align:center">UNIQUE</td><td style="text-align:center">UNLOCK</td><td style="text-align:center">UNSIGNED</td></tr><tr><td style="text-align:center">UPDATE</td><td style="text-align:center">USAGE</td><td style="text-align:center">USE</td></tr><tr><td style="text-align:center">USING</td><td style="text-align:center">UTC_DATE</td><td style="text-align:center">UTC_TIME</td></tr><tr><td style="text-align:center">UTC_TIMESTAMP</td><td style="text-align:center">VALUES</td><td style="text-align:center">VARBINARY</td></tr><tr><td style="text-align:center">VARCHAR</td><td style="text-align:center">VARCHARACTER</td><td style="text-align:center">VARYING</td></tr><tr><td style="text-align:center">WHEN</td><td style="text-align:center">WHERE</td><td style="text-align:center">WHILE</td></tr><tr><td style="text-align:center">WITH</td><td style="text-align:center">WRITE</td><td style="text-align:center">X509</td></tr><tr><td style="text-align:center">XOR</td><td style="text-align:center">YEAR_MONTH</td><td style="text-align:center">ZEROFILL</td></tr></tbody></table></div><h2 id="æ‰§è¡Œé¡ºåº"><a href="#æ‰§è¡Œé¡ºåº" class="headerlink" title="æ‰§è¡Œé¡ºåº"></a>æ‰§è¡Œé¡ºåº</h2><p>åœ¨ SQL è¯­å¥ä¸­æ¯ä¸ªå…³é”®å­—éƒ½ä¼šæŒ‰ç…§é¡ºåºå¾€ä¸‹æ‰§è¡Œï¼Œè€Œæ¯ä¸€æ­¥æ“ä½œï¼Œä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œæœ€åçš„è™šæ‹Ÿè¡¨å°±æ˜¯æœ€ç»ˆç»“æœã€‚</p><p>åŸºæœ¬ SQL è¯­å¥å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token keyword">SELECT</span> <span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token keyword">DISTINCT</span> <span class="token operator">&lt;</span>select_list<span class="token operator">></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">FROM</span> <span class="token operator">&lt;</span>left_table<span class="token operator">></span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>join_type<span class="token operator">></span> <span class="token keyword">JOIN</span> <span class="token operator">&lt;</span>right_table<span class="token operator">></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">ON</span> <span class="token operator">&lt;</span>join_condition<span class="token operator">></span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>where_condition<span class="token operator">></span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>group_by_list<span class="token operator">></span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token keyword">WITH</span>&#123;CUBE<span class="token operator">|</span>ROLLUP&#125;<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token keyword">HAVING</span> <span class="token operator">&lt;</span>having_condition<span class="token operator">></span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>order_by_list<span class="token operator">></span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token keyword">LIMIT</span> <span class="token operator">&lt;</span>limit_number<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ‰§è¡Œé¡ºåºï¼š</p><ol><li>FROMï¼š å¯¹ <code>FROM</code> å·¦è¾¹çš„è¡¨å’Œå³è¾¹çš„è¡¨è®¡ç®—ç¬›å¡å°”ç§¯ï¼Œäº§ç”Ÿè™šè¡¨ <code>VT1</code>ï¼›</li><li>ONï¼š å¯¹è™šæ‹Ÿè¡¨ <code>VT1</code> è¿›è¡Œ <code>ON</code> ç­›é€‰ï¼Œåªæœ‰é‚£äº›ç¬¦åˆæ¡ä»¶çš„è¡Œæ‰ä¼šè¢«è®°å½•åœ¨è™šæ‹Ÿè¡¨ <code>VT2</code> ä¸­ï¼›</li><li>JOINï¼šå¦‚æœæ˜¯ <code>OUT JOIN</code>ï¼Œé‚£ä¹ˆå°†ä¿ç•™è¡¨ä¸­ï¼ˆå¦‚å·¦è¡¨æˆ–è€…å³è¡¨ï¼‰æœªåŒ¹é…çš„è¡Œä½œä¸ºå¤–éƒ¨è¡Œæ·»åŠ åˆ°è™šæ‹Ÿè¡¨ <code>VT2</code> ä¸­ï¼Œä»è€Œäº§ç”Ÿè™šæ‹Ÿè¡¨ <code>VT3</code>ï¼›</li><li>WHEREï¼šå¯¹è™šæ‹Ÿè¡¨ <code>VT3</code> è¿›è¡Œ <code>WHERE</code> æ¡ä»¶è¿‡æ»¤ï¼Œåªæœ‰ç¬¦åˆçš„è®°å½•æ‰ä¼šè¢«æ”¾å…¥åˆ°è™šæ‹Ÿè¡¨ VT4ï¼›</li><li>GROUP BYï¼šæ ¹æ® <code>GROUP BY</code> å­å¥ä¸­çš„åˆ—ï¼Œå¯¹è™šæ‹Ÿè¡¨ <code>VT4</code> è¿›è¡Œåˆ†ç»„æ“ä½œï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ <code>VT5</code>ï¼›</li><li>CUBE | ROLLUPï¼šå¯¹è™šæ‹Ÿè¡¨ <code>VT5</code> è¿›è¡Œ <code>CUBE</code> æˆ–è€… <code>ROLLUP</code> æ“ä½œï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ <code>VT6</code>ï¼›</li><li>HAVINGï¼šå¯¹è™šæ‹Ÿè¡¨ <code>VT6</code> è¿›è¡Œ <code>HAVING</code> æ¡ä»¶è¿‡æ»¤ï¼Œåªæœ‰ç¬¦åˆçš„è®°å½•æ‰ä¼šè¢«æ’å…¥åˆ°è™šæ‹Ÿè¡¨ <code>VT7</code> ä¸­ï¼›</li><li>SELECTï¼šæ‰§è¡Œ <code>SELECT</code> æ“ä½œï¼Œé€‰æ‹©æŒ‡å®šçš„åˆ—ï¼Œæ’å…¥åˆ°è™šæ‹Ÿè¡¨ <code>VT8</code> ä¸­ï¼›</li><li>DISTINCTï¼šå¯¹è™šæ‹Ÿè¡¨ <code>VT8</code> ä¸­çš„è®°å½•è¿›è¡Œå»é‡ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ <code>VT9</code>ï¼›</li><li>ORDER BYï¼šå°†è™šæ‹Ÿè¡¨ <code>VT9</code> ä¸­çš„è®°å½•æŒ‰ç…§è¿›è¡Œæ’åºæ“ä½œï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ <code>VT10</code>ï¼›</li><li>LIMITï¼šå–å‡ºæŒ‡å®šè¡Œçš„è®°å½•ï¼Œäº§ç”Ÿè™šæ‹Ÿè¡¨ <code>VT11</code>ï¼Œå¹¶å°†ç»“æœè¿”å›ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ¬MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¤§æ•°æ®ç²¾é€‰æ¸…å•</title>
      <link href="post/fc3d946f.html"/>
      <url>post/fc3d946f.html</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ç²¾é€‰çš„å¤§æ•°æ®å·¥å…·ã€æ¡†æ¶ã€èµ„æºå’Œå…¶ä»–æ¸…å•ã€‚</p><blockquote><p>æœ¬æ–‡ç¿»è¯‘è‡ªï¼š<a href="https://github.com/onurakpolat/awesome-bigdata">Awesome Big Data</a><br>çµæ„Ÿæ¥è‡ªï¼š<a href="https://github.com/ziadoz/awesome-php">awesome-php</a> &amp; <a href="https://github.com/vinta/awesome-python">awesome-python</a> &amp; <a href="https://github.com/Sdogruyol/awesome-ruby">awesome-ruby</a> &amp; <a href="http://hadoopecosystemtable.github.io/">hadoopecosystemtable</a> &amp; <a href="http://usefulstuff.io/big-data/">big-data</a></p></blockquote><h1 id="å…³ç³»å‹æ•°æ®åº“"><a href="#å…³ç³»å‹æ•°æ®åº“" class="headerlink" title="å…³ç³»å‹æ•°æ®åº“"></a>å…³ç³»å‹æ•°æ®åº“</h1><ul><li><a href="https://www.mysql.com/">MySQL</a> - ä¸–ç•Œä¸Šæœ€æµè¡Œçš„å¼€æºæ•°æ®åº“ã€‚</li><li><a href="https://www.postgresql.org/">PostgreSQL</a> - ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„å¼€æºæ•°æ®åº“ã€‚</li><li><a href="http://www.oracle.com/us/corporate/features/database-12c/index.html">Oracle Database</a> - å¯¹è±¡å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚</li><li><a href="http://www.teradata.com/products-and-services/teradata-database/">Teradata</a> - é«˜æ€§èƒ½ MPP æ•°æ®ä»“åº“å¹³å°ã€‚</li></ul><h1 id="æ¡†æ¶"><a href="#æ¡†æ¶" class="headerlink" title="æ¡†æ¶"></a>æ¡†æ¶</h1><ul><li><a href="https://github.com/facebook/bistro">Bistro</a> - ç”¨äºæ‰¹å¤„ç†å’Œæµåˆ†æçš„é€šç”¨æ•°æ®å¤„ç†å¼•æ“ã€‚å®ƒåŸºäºä¸€ç§æ–°çš„æ•°æ®æ¨¡å‹ï¼Œè¯¥æ¨¡å‹é€šè¿‡å‡½æ•°æ¥è¡¨ç¤ºæ•°æ®ï¼Œå¹¶é€šè¿‡åˆ—æ“ä½œæ¥å¤„ç†æ•°æ®ï¼Œè€Œä¸ä»…ä»…ä½¿ç”¨ MapReduce æˆ– SQL ç­‰ä¼ ç»Ÿæ–¹æ³•æ¥è®¾ç½®æ“ä½œã€‚</li><li><a href="https://www.ibm.com/analytics/us/en/technology/stream-computing/">IBM Streams</a> - åˆ†å¸ƒå¼å¤„ç†å’Œå®æ—¶åˆ†æå¹³å°ã€‚å¯ä»¥å’Œå¤§æ•°æ®ç”Ÿæ€ç³»ç»Ÿä¸­çš„è®¸å¤šæµè¡ŒæŠ€æœ¯ï¼ˆKafkaã€HDFSã€Spark ç­‰ï¼‰é›†æˆã€‚</li><li><a href="http://hadoop.apache.org/">Apache Hadoop</a> - åˆ†å¸ƒå¼å¤„ç†æ¡†æ¶ã€‚é›†æˆäº† MapReduceï¼ˆå¹¶è¡Œå¤„ç†ï¼‰ã€YARNï¼ˆä½œä¸šè°ƒåº¦ï¼‰å’Œ HDFSï¼ˆåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼‰ã€‚</li><li><a href="https://github.com/caskdata/tigon">Tigon</a> - é«˜ååçš„å®æ—¶æµå¤„ç†æ¡†æ¶ã€‚</li><li><a href="http://pachyderm.io/">Pachyderm</a> - Pachyderm æ˜¯ä¸€ä¸ªåŸºäº Docker å’Œ Kubernetes çš„æ•°æ®å­˜å‚¨å¹³å°ï¼Œå¯ä»¥ç”¨åœ¨é‡å¤çš„æ•°æ®å¤„ç†å’Œåˆ†æåœºæ™¯ã€‚</li><li><a href="https://github.com/polyaxon/polyaxon">Polyaxon</a> - ä¸€ä¸ªå¯å¤åˆ¶ã€å¯æ‰©å±•çš„æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ å¹³å°ã€‚</li></ul><h1 id="åˆ†å¸ƒå¼ç¼–ç¨‹"><a href="#åˆ†å¸ƒå¼ç¼–ç¨‹" class="headerlink" title="åˆ†å¸ƒå¼ç¼–ç¨‹"></a>åˆ†å¸ƒå¼ç¼–ç¨‹</h1><ul><li><a href="https://github.com/addthis/hydra">AddThis Hydra</a> - åˆ†å¸ƒå¼æ•°æ®å¤„ç†å’Œå­˜å‚¨ç³»ç»Ÿï¼Œæœ€åˆç”± AddThis å¼€å‘ã€‚</li><li><a href="http://databricks.github.io/simr/">AMPLab SIMR</a> - åœ¨ Hadoop MapReduce v1 ä¸Šè¿è¡Œ Sparkã€‚</li><li><a href="https://apex.apache.org/">Apache APEX</a> - ç”¨äºå¤§æ•°æ®æµå’Œæ‰¹å¤„ç†çš„ç»Ÿä¸€ä¼ä¸šå¹³å°ã€‚</li><li><a href="https://beam.apache.org/">Apache Beam</a> - ç”¨äºå®šä¹‰å’Œæ‰§è¡Œæ•°æ®å¤„ç†å·¥ä½œæµçš„ç»Ÿä¸€æ¨¡å‹å’Œä¸€ç»„ç‰¹å®šäºè¯­è¨€çš„ sdkã€‚</li><li><a href="http://crunch.apache.org/">Apache Crunch</a> - ä¸€ä¸ªç®€å•çš„ Java APIï¼Œç”¨äºå¤„ç† Join å’Œæ•°æ®èšåˆä¹‹ç±»çš„ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡åœ¨æ™®é€š MapReduce ä¸Šå®ç°èµ·æ¥å¾ˆç¹çã€‚</li><li><a href="http://incubator.apache.org/projects/datafu.html">Apache DataFu</a> - ç”± LinkedIn ä¸º Hadoop å’Œ Pig å¼€å‘çš„ç”¨æˆ·å®šä¹‰å‡½æ•°çš„é›†åˆã€‚</li><li><a href="http://flink.apache.org/">Apache Flink</a> - åˆ†å¸ƒå¼å¤„ç†å¼•æ“æ¡†æ¶ï¼Œç”¨äºåœ¨æ— ç•Œå’Œæœ‰ç•Œæ•°æ®æµä¸Šè¿›è¡Œæœ‰çŠ¶æ€è®¡ç®—ã€‚</li><li><a href="http://gearpump.apache.org/">Apache Gearpump</a> - åŸºäº Akka çš„å®æ—¶å¤§æ•°æ®æµå¼•æ“ã€‚</li><li><a href="http://gora.apache.org/">Apache Gora</a> - å†…å­˜æ•°æ®æ¨¡å‹å’ŒæŒä¹…æ€§æ¡†æ¶ã€‚</li><li><a href="http://hama.apache.org/">Apache Hama</a> - BSPï¼ˆBulk Synchronous Parallelï¼‰è®¡ç®—æ¡†æ¶ã€‚</li><li><a href="https://wiki.apache.org/hadoop/MapReduce/">Apache MapReduce</a> - åœ¨é›†ç¾¤ä¸Šä½¿ç”¨å¹¶è¡Œåˆ†å¸ƒå¼ç®—æ³•å¤„ç†å¤§å‹æ•°æ®é›†çš„ç¼–ç¨‹æ¨¡å‹ã€‚</li><li><a href="https://pig.apache.org/">Apache Pig</a> - ç”¨äºè¡¨è¾¾ Hadoop æ•°æ®åˆ†æç¨‹åºçš„é«˜çº§è¯­è¨€ã€‚</li><li><a href="http://reef.apache.org/">Apache REEF</a> - ç”¨æ¥ç®€åŒ–å’Œç»Ÿä¸€ä½å±‚å¤§æ•°æ®ç³»ç»Ÿçš„ä¿ç•™æ€§è¯„ä¼°æ‰§è¡Œæ¡†æ¶ã€‚</li><li><a href="http://incubator.apache.org/projects/s4.html">Apache S4</a> - ä¸€ä¸ªå¸¸è§„ç”¨é€”çš„ã€åˆ†å¸ƒå¼çš„ã€å¯ä¼¸ç¼©çš„ã€å®¹é”™çš„ã€å¯æ’å…¥å¼çš„å¹³å°ï¼Œä¸»è¦ç”¨äºå¤„ç†è¿ç»­çš„æ•°æ®æµã€‚</li><li><a href="http://spark.apache.org/">Apache Spark</a> - å¿«é€Ÿã€é€šç”¨çš„å¤§è§„æ¨¡æ•°æ®å¤„ç†å¼•æ“ã€‚</li><li><a href="https://spark.apache.org/docs/latest/streaming-programming-guide.html">Apache Spark Streaming</a> - å®æ—¶æµå¤„ç†å¼•æ“ï¼Œå±äº Spark çš„ä¸€éƒ¨åˆ†ã€‚</li><li><a href="http://storm.apache.org">Apache Storm</a> - Twitter å¼€å‘çš„ï¼Œå¯åœ¨ YARN ä¸Šè¿›è¡Œæµå¤„ç†çš„æ¡†æ¶ã€‚</li><li><a href="http://samza.apache.org/">Apache Samza</a> - åŸºäº Kafka å’Œ YARN çš„æµå¤„ç†çš„æ¡†æ¶ã€‚</li><li><a href="http://tez.apache.org/">Apache Tez</a> - åŸºäº YARN çš„ï¼Œå¯æ‰§è¡Œå¤æ‚ DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰ä»»åŠ¡çš„åº”ç”¨ç¨‹åºæ¡†æ¶ã€‚</li><li><a href="https://incubator.apache.org/projects/twill.html">Apache Twill</a> - YARN ä¸Šçš„æŠ½è±¡ï¼Œå‡å°‘äº†å¼€å‘åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„å¤æ‚æ€§ã€‚</li><li><a href="http://bigflow.cloud/en/index.html">Baidu Bigflow</a> - ä¸€ä¸ªå…è®¸ç¼–å†™åˆ†å¸ƒå¼è®¡ç®—ç¨‹åºçš„æ¥å£ï¼Œå®ƒæä¾›äº†è®¸å¤šç®€å•ã€çµæ´»ã€å¼ºå¤§çš„ API æ¥è½»æ¾å¤„ç†ä»»ä½•è§„æ¨¡çš„æ•°æ®ã€‚</li><li><a href="http://cascalog.org/">Cascalog</a> - æ•°æ®å¤„ç†å’ŒæŸ¥è¯¢åº“ã€‚</li><li><a href="http://vldbarc.org/pvldb/vldb2010/pvldb_vol3/I08.pdf">Cheetah</a> - MapReduce ä¹‹ä¸Šçš„é«˜æ€§èƒ½ï¼Œç”¨æˆ·è‡ªå®šä¹‰æ•°æ®ä»“åº“ã€‚</li><li><a href="http://www.cascading.org/">Concurrent Cascading</a> - Hadoop ä¸Šçš„æ•°æ®ç®¡ç† / åˆ†ææ¡†æ¶ã€‚</li><li><a href="https://github.com/damballa/parkour">Damballa Parkour</a> - ä¸º Clojure å¼€å‘çš„ MapReduce åº“ã€‚</li><li><a href="https://github.com/datasalt/pangool">Datasalt Pangool</a> - å¯æ›¿ä»£ MapReduce èŒƒå¼ã€‚</li><li><a href="https://www.datatorrent.com/">DataTorrent StrAM</a> - å®æ—¶è®¡ç®—å¼•æ“ï¼Œæ—¨åœ¨ä»¥ä¸€ç§å°½å¯èƒ½ç•…é€šçš„æ–¹å¼æ”¯æŒåˆ†å¸ƒå¼ã€å¼‚æ­¥ã€å®æ—¶çš„å†…å­˜å¤§æ•°æ®è®¡ç®—ï¼ŒåŒæ—¶æœ€å°åŒ–å¼€é”€å’Œå¯¹æ€§èƒ½çš„å½±å“ã€‚</li><li><a href="https://www.facebook.com/notes/facebook-engineering/under-the-hood-scheduling-mapreduce-jobs-more-efficiently-with-corona/10151142560538920">Facebook Corona</a> - Hadoop çš„å¢å¼ºï¼Œå¯ä»¥æ¶ˆé™¤å•ç‚¹æ•…éšœã€‚</li><li><a href="http://peregrine_mapreduce.bitbucket.org/">Facebook Peregrine</a> - Map Reduce æ¡†æ¶ã€‚</li><li><a href="https://www.facebook.com/notes/facebook-engineering/under-the-hood-data-diving-with-scuba/10150599692628920">Facebook Scuba</a> - åˆ†å¸ƒå¼å†…å­˜æ•°æ®å­˜å‚¨ã€‚</li><li><a href="https://googledevelopers.blogspot.it/2014/06/cloud-platform-at-google-io-new-big.html">Google Dataflow</a> - åˆ›å»ºæ•°æ®ç®¡é“æ¥å¸®åŠ©æˆ‘ä»¬æ‘„å–ã€è½¬æ¢å’Œåˆ†ææ•°æ®ã€‚</li><li><a href="https://research.google.com/archive/mapreduce.html">Google MapReduce</a> - Map Reduce æ¡†æ¶ã€‚</li><li><a href="https://research.google.com/pubs/pub41378.html">Google MillWheel</a> - å®¹é”™æµå¤„ç†æ¡†æ¶ã€‚</li><li><a href="https://www.ibm.com/analytics/us/en/technology/stream-computing/">IBM Streams</a> - ç”¨äºåˆ†å¸ƒå¼å¤„ç†å’Œå®æ—¶åˆ†æçš„å¹³å°ã€‚ æä¾›å¼€ç®±å³ç”¨çš„é«˜çº§åˆ†æå·¥å…·åŒ…ï¼Œå¦‚åœ°ç†ç©ºé—´ã€æ—¶é—´åºåˆ—ç­‰ã€‚</li><li><a href="https://code.google.com/p/jaql/">JAQL</a> - å£°æ˜å¼ç¼–ç¨‹è¯­è¨€ï¼Œç”¨äºå¤„ç†ç»“æ„åŒ–ã€åŠç»“æ„åŒ–å’Œéç»“æ„åŒ–æ•°æ®ã€‚</li><li><a href="http://kitesdk.org/docs/current/">Kite</a> - ä¸€ç»„åº“ã€å·¥å…·ã€ç¤ºä¾‹å’Œæ–‡æ¡£ï¼Œé‡ç‚¹åœ¨äºç®€åŒ–åœ¨ Hadoop ç”Ÿæ€ç³»ç»Ÿä¹‹ä¸Šæ„å»ºç³»ç»Ÿçš„è¿‡ç¨‹ã€‚</li><li><a href="http://druid.io/">Metamarkets Druid</a> - ç”¨äºå®æ—¶åˆ†æå¤§å‹æ•°æ®é›†çš„æ¡†æ¶ã€‚</li><li><a href="https://github.com/Netflix/PigPen">Netflix PigPen</a> - æ˜¯ Clojure è¯­éŸ³çš„ Map-Reduceï¼Œå¯ä»¥ç¼–è¯‘åˆ° Apache Pig æˆ–è€… Cascading ä¸­ã€‚</li><li><a href="http://discoproject.org/">Nokia Disco</a> - è¯ºåŸºäºšå¼€å‘çš„ MapReduce æ¡†æ¶ã€‚</li><li><a href="http://www.onyxplatform.org/">Onyx</a> - äº‘çš„åˆ†å¸ƒå¼è®¡ç®—ã€‚</li><li><a href="https://medium.com/@Pinterest_Engineering/pinlater-an-asynchronous-job-execution-system-b8664cb8aa7d">Pinterest Pinlater</a> - å¼‚æ­¥ä½œä¸šæ‰§è¡Œç³»ç»Ÿã€‚</li><li><a href="http://crs4.github.io/pydoop/">Pydoop</a> - ç”¨ Python ç¼–å†™ï¼Œå¹¶é‡‡ç”¨ MapReduce å’Œ HDFS æŠ€æœ¯å¯¹ Hadoop è¿›è¡Œæ‰©å±•çš„ APIã€‚</li><li><a href="https://github.com/ray-project/ray">Ray</a> - ç”¨äºæ„å»ºå’Œè¿è¡Œåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„å¿«é€Ÿè€Œç®€å•çš„æ¡†æ¶ã€‚</li><li><a href="http://blueflood.io/">Rackerlabs Blueflood</a> - å¤šç§Ÿæˆ·åˆ†å¸ƒå¼åº¦é‡å¤„ç†ç³»ç»Ÿã€‚</li><li><a href="https://github.com/skale-me/skale-engine">Skale</a> - NodeJS ä¸Šçš„é«˜æ€§èƒ½åˆ†å¸ƒå¼æ•°æ®å¤„ç†æ¡†æ¶ã€‚</li><li><a href="http://stratosphere.eu/">Stratosphere</a> - é€šç”¨é›†ç¾¤è®¡ç®—æ¡†æ¶ã€‚</li><li><a href="https://streamdrill.com/">Streamdrill</a> - Streamdrill åœ¨è®¡ç®—ä¸åŒæ—¶é—´çª—å£ä¸Šçš„äº‹ä»¶æµæ´»åŠ¨éå¸¸æœ‰ç”¨ï¼Œå¹¶æ‰¾å‡ºæœ€æ´»è·ƒçš„æ—¶é—´çª—å£ã€‚</li><li><a href="https://github.com/IBMStreams/streamsx.topology">streamsx.topology</a> - ç”¨äºåœ¨ Javaï¼ŒPython æˆ– Scala ä¸­æ„å»º IBM Streams åº”ç”¨ç¨‹åºçš„åº“ã€‚</li><li><a href="https://github.com/UnderstandLingBV/Tuktu">Tuktu</a> - æ˜“äºä½¿ç”¨çš„æ‰¹å¤„ç†å’Œæµå¼è®¡ç®—å¹³å°ï¼Œå¯ä»¥ä½¿ç”¨ Scalaï¼ŒAkka å’Œ Play æ„å»ºã€‚</li><li><a href="https://github.com/twitter/heron">Twitter Heron</a> - ç”± Twitter å¼€å‘çš„ä¸€ä¸ªå®æ—¶ã€åˆ†å¸ƒå¼ã€å®¹é”™çš„æµå¤„ç†å¼•æ“ï¼Œä¸»è¦ç”¨äºä»£æ›¿ Stormã€‚</li><li><a href="https://github.com/twitter/scalding">Twitter Scalding</a> - ç”¨äº Map Reduce ä½œä¸šçš„ Scala åº“ï¼ŒåŸºäº Cascading æ„å»ºã€‚</li><li><a href="https://github.com/twitter/summingbird">Twitter Summingbird</a> - Summingbird æ˜¯ä¸€ä¸ªç±»åº“ï¼Œå®ƒå…è®¸æˆ‘ä»¬ç¼–å†™çœ‹èµ·æ¥åƒåŸç”Ÿ Scala æˆ– Java é›†åˆè½¬æ¢çš„ MapReduce ç¨‹åºï¼Œå¹¶åœ¨è®¸å¤šç€åçš„åˆ†å¸ƒå¼ MapReduce å¹³å°ä¸Šæ‰§è¡Œï¼ŒåŒ…æ‹¬ Storm å’Œ Scaldingï¼Œç”± Twitter å¼€å‘ã€‚</li><li><a href="https://blog.twitter.com/engineering/en_us/a/2014/tsar-a-timeseries-aggregator.html">Twitter TSAR</a> - Twitter å¼€å‘çš„æ—¶é—´åºåˆ—èšåˆå™¨ã€‚</li><li><a href="http://www.wallaroolabs.com/community">Wallaroo</a> - è¶…å¿«å¼¹æ€§æ•°æ®å¤„ç†å¼•æ“ï¼Œå¯ä»¥ä½¿æœ‰çŠ¶æ€ã€åˆ†æã€æµå¤„ç†å’Œäº‹ä»¶é©±åŠ¨çš„ AI åº”ç”¨ç¨‹åºèƒ½å¤Ÿå¿«é€ŸæŠ•å…¥ç”Ÿäº§ï¼Œè€Œæ— éœ€è€ƒè™‘è§„æ¨¡ã€‚å®ƒä¸ºå¼€å‘äººå‘˜æä¾›äº†å‡ ç§è¯­è¨€çš„ API æ¥å®ç°ä»–ä»¬çš„è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘ã€‚</li></ul><h1 id="åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ"><a href="#åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ"></a>åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ</h1><ul><li><a href="https://github.com/linkedin/ambry">Ambry</a> - åˆ†å¸ƒå¼å¯¹è±¡å­˜å‚¨ï¼Œæ”¯æŒå­˜å‚¨æ•°ä¸‡äº¿ä¸ªå°çš„ä¸å¯å˜å¯¹è±¡æˆ–è€…æ•°åäº¿ä¸ªå¤§å¯¹è±¡ã€‚</li><li><a href="http://hadoop.apache.org/">Apache HDFS</a> - æä¾›å¯¹åº”ç”¨ç¨‹åºæ•°æ®çš„é«˜ååé‡è®¿é—®çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><a href="http://kudu.apache.org/">Apache Kudu</a> - Hadoop çš„å­˜å‚¨å±‚å¯å®ç°å¯¹æ•°æ®çš„å¿«é€Ÿåˆ†æã€‚</li><li><a href="https://www.beegfs.io/content/">BeeGFS</a> - ä¹‹å‰ç§°ä¸º FhGFSï¼Œæ˜¯ä¸€ç§å¹¶è¡Œåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><a href="http://ceph.com/ceph-storage/file-system/">Ceph Filesystem</a> -ä¸€ä¸ªæ”¯æŒPOSIXæ¥å£çš„æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><a href="http://disco.readthedocs.org/en/latest/howto/ddfs.html">Disco DDFS</a> - åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><a href="https://www.facebook.com/note.php?note_id=76191543919">Facebook Haystack</a> - å¯¹è±¡å­˜å‚¨ç³»ç»Ÿã€‚</li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//archive/gfs-sosp2003.pdf">Google GFS</a> - åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><a href="http://static.googleusercontent.com/media/research.google.reverse-proxy.org/en/us/university/relations/facultysummit2010/storage_architecture_and_challenges.pdf">Google Colossus</a> - åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆGFS2ï¼‰ã€‚</li><li><a href="https://research.google.com/pubs/pub36971.html">Google Megastore</a> - å¯æ‰©å±•ã€é«˜å¯ç”¨çš„å­˜å‚¨ã€‚</li><li><a href="https://www.gridgain.com/">GridGain</a> - GGFSï¼ŒHadoop å…¼å®¹çš„å†…å­˜æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><a href="http://wiki.lustre.org/">Lustre file system</a> - é«˜æ€§èƒ½åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><a href="https://hadoop.apache.org/docs/current/hadoop-azure-datalake/index.html">Microsoft Azure Data Lake Store</a> - Azure ä¸Šå…¼å®¹ HDFS çš„å­˜å‚¨ã€‚</li><li><a href="https://www.quantcast.com/about-us/quantcast-file-system/">Quantcast File System QFS</a> - å¼€æºåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><a href="http://gluster.org/">Red Hat GlusterFS</a> - æ¨ªå‘æ‰©å±•ç½‘ç»œé™„åŠ çš„å­˜å‚¨æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><a href="https://github.com/chrislusf/seaweedfs">Seaweed-FS</a> - ç®€å•ä¸”é«˜åº¦å¯ä¼¸ç¼©çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</li><li><a href="http://www.alluxio.org/">Alluxio</a> - å¼€æºçš„åŸºäºå†…å­˜çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿã€‚</li><li><a href="https://www.tahoe-lafs.org/trac/tahoe-lafs">Tahoe-LAFS</a> - å»ä¸­å¿ƒåŒ–çš„äº‘å­˜å‚¨ç³»ç»Ÿã€‚</li><li><a href="https://github.com/baidu/bfs">Baidu File System</a> - åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</li></ul><h1 id="åˆ†å¸ƒå¼ç´¢å¼•"><a href="#åˆ†å¸ƒå¼ç´¢å¼•" class="headerlink" title="åˆ†å¸ƒå¼ç´¢å¼•"></a>åˆ†å¸ƒå¼ç´¢å¼•</h1><ul><li><a href="https://github.com/pilosa/pilosa">Pilosa</a> - å¼€æºçš„åˆ†å¸ƒå¼ä½å›¾ç´¢å¼•ï¼Œæå¤§åœ°åŠ é€Ÿäº†è·¨å¤šä¸ªå¤§è§„æ¨¡æ•°æ®é›†çš„æŸ¥è¯¢ã€‚</li></ul><h1 id="æ–‡æ¡£æ•°æ®æ¨¡å‹"><a href="#æ–‡æ¡£æ•°æ®æ¨¡å‹" class="headerlink" title="æ–‡æ¡£æ•°æ®æ¨¡å‹"></a>æ–‡æ¡£æ•°æ®æ¨¡å‹</h1><ul><li><a href="https://www.actian.com/data-management/ingres-sql-rdbms/">Actian Versant</a> - é¢å‘å¯¹è±¡çš„å•†ä¸šæ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚</li><li><a href="https://crate.io/">Crate Data</a> - æ˜¯ä¸€ä¸ªå¼€æºçš„å¤§è§„æ¨¡å¯æ‰©å±•æ•°æ®å­˜å‚¨ï¼Œå®ƒä¸éœ€è¦ä»»ä½•ç®¡ç†ã€‚</li><li><a href="http://www.infoq.com/news/2014/06/facebook-apollo">Facebook Apollo</a> - Facebook çš„ç±»ä¼¼äº Paxos çš„ NoSQL æ•°æ®åº“ã€‚</li><li><a href="http://comsysto.github.io/jumbodb/">jumboDB</a> - åŸºäº Hadoop çš„é¢å‘æ–‡æ¡£çš„æ•°æ®å­˜å‚¨ã€‚</li><li><a href="https://engineering.linkedin.com/data">LinkedIn Espresso</a> - å¯æ°´å¹³æ‰©å±•çš„é¢å‘æ–‡æ¡£ NoSQL æ•°æ®å­˜å‚¨ã€‚</li><li><a href="http://www.marklogic.com/">MarkLogic</a> - æ¨¡å¼æ— å…³çš„ä¼ä¸š NoSQL æ•°æ®åº“æŠ€æœ¯ã€‚</li><li><a href="https://azure.microsoft.com/en-us/services/cosmos-db/">Microsoft Azure DocumentDB</a> - NoSQL äº‘æ•°æ®åº“æœåŠ¡ï¼Œæ”¯æŒ MongoDB åè®®</li><li><a href="https://www.mongodb.com/">MongoDB</a> - é¢å‘æ–‡æ¡£çš„æ•°æ®åº“ç³»ç»Ÿã€‚</li><li><a href="https://ravendb.net/">RavenDB</a> - æ”¯æŒäº‹åŠ¡çš„å¼€æºæ–‡æ¡£æ•°æ®åº“ã€‚</li><li><a href="https://rethinkdb.com/">RethinkDB</a> - æ”¯æŒè¡¨ join å’Œ group by ç­‰æŸ¥è¯¢çš„æ–‡æ¡£æ•°æ®åº“ã€‚</li></ul><h1 id="Key-Map-æ•°æ®æ¨¡å‹"><a href="#Key-Map-æ•°æ®æ¨¡å‹" class="headerlink" title="Key Map æ•°æ®æ¨¡å‹"></a>Key Map æ•°æ®æ¨¡å‹</h1><p><strong>æ³¨æ„</strong>: ä¸šç•Œå­˜åœ¨ä¸€äº›æœ¯è¯­æ··æ·†ï¼Œå­˜åœ¨ä¸¤ç§ä¸åŒçš„ä¸œè¥¿è¢«ç§°ä¸ºâ€œåˆ—å¼æ•°æ®åº“â€ã€‚è¿™é‡Œåˆ—å‡ºçš„ä¸€äº›æ˜¯å›´ç»•â€œé”® - æ˜ å°„â€æ•°æ®æ¨¡å‹æ„å»ºçš„åˆ†å¸ƒå¼æŒä¹…æ€§æ•°æ®åº“ï¼šæ‰€æœ‰æ•°æ®éƒ½æœ‰ä¸€ä¸ª(å¯èƒ½æ˜¯ç»„åˆçš„)é”®ï¼Œé”®å€¼å¯¹çš„æ˜ å°„ä¸ä¹‹å…³è”ã€‚åœ¨æŸäº›ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªè¿™æ ·çš„å€¼æ˜ å°„å¯ä»¥ä¸ä¸€ä¸ªé”®å…³è”ï¼Œè¿™äº›æ˜ å°„ç§°ä¸ºâ€œåˆ—æ—â€ï¼ˆå€¼æ˜ å°„é”®ç§°ä¸ºâ€œåˆ—â€ï¼‰ã€‚</p><p>å¦ä¸€ç§ä¹Ÿç§°ä¸ºâ€œåˆ—å¼æ•°æ®åº“â€çš„æŠ€æœ¯ï¼Œç‰¹ç‚¹æ˜¯å®ƒåœ¨ç£ç›˜æˆ–å†…å­˜ä¸­å¦‚ä½•å­˜å‚¨æ•°æ®ã€‚è¿™äº›ç³»ç»Ÿå°†æ‰€æœ‰è¡Œçš„ç›¸åŒåˆ—å€¼æ•°æ®å­˜å‚¨åœ¨ä¸€èµ·ã€‚å› æ­¤ï¼Œéœ€è¦åšæ›´å¤šçš„å·¥ä½œæ¥è·å¾—ç»™å®šé”®çš„æ‰€æœ‰åˆ—ï¼Œä½†æ˜¯éœ€è¦æ›´å°‘çš„å·¥ä½œæ¥è·å¾—ç»™å®šåˆ—çš„æ‰€æœ‰å€¼ã€‚</p><p>å‰ä¸€ç§åœ¨è¿™é‡Œç§°ä¸ºâ€œé”®æ˜ å°„æ•°æ®æ¨¡å‹â€ã€‚è¿™äº›å’Œ <a href="#Key-value-æ•°æ®æ¨¡å‹">Key-value æ•°æ®æ¨¡å‹</a> å­˜å‚¨ä¹‹é—´çš„ç•Œé™ç›¸å½“æ¨¡ç³Šã€‚</p><p>åè€…æ›´å¤šåœ°æ˜¯å…³äºå­˜å‚¨æ ¼å¼è€Œä¸æ˜¯æ•°æ®æ¨¡å‹ï¼Œè¿™äº›æ•°æ®åº“æˆ‘ä»¬æŠŠå®ƒå½’åˆ° <a href="#åˆ—å¼æ•°æ®åº“">åˆ—å¼æ•°æ®åº“</a> é‡Œé¢å»äº†ã€‚</p><p>ä½ å¯ä»¥åˆ° Prof. Daniel Abadi çš„åšæ–‡ï¼š<a href="http://dbmsmusings.blogspot.com/2010/03/distinguishing-two-major-types-of_29.html">Distinguishing two major types of Column Stores</a>ã€‚</p><ul><li><a href="http://accumulo.apache.org/">Apache Accumulo</a> - æ„å»ºåœ¨ Hadoop ä¹‹ä¸Šçš„åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ç³»ç»Ÿã€‚</li><li><a href="http://cassandra.apache.org/">Apache Cassandra</a> - å— BigTable å¯å‘çš„ã€é¢å‘åˆ—çš„åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ã€‚</li><li><a href="http://hbase.apache.org/">Apache HBase</a> - å— BigTable å¯å‘çš„ã€é¢å‘åˆ—çš„åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ã€‚</li><li><a href="https://github.com/baidu/tera">Baidu Tera</a> - å— BigTable å¯å‘çš„ä¸€ç§å¤§å‹åˆ†å¸ƒå¼è¡¨æ ¼å­˜å‚¨ç³»ç»Ÿï¼Œå…·æœ‰é«˜æ€§èƒ½ã€å¯ä¼¸ç¼©ç­‰å­˜å‚¨ç‰¹ç‚¹ï¼Œæœ€åˆçš„è®¾è®¡æ˜¯ä¸ºäº†ç®¡ç†ä¸‡äº¿é‡çº§çš„è¶…é“¾å’Œç½‘é¡µä¿¡æ¯ã€‚</li><li><a href="https://code.facebook.com/posts/321111638043166/hydrabase-the-evolution-of-hbase-facebook/">Facebook HydraBase</a> - ç”± Facebook å¼€å‘çš„ HBase æ¼”åŒ–ç‰ˆæœ¬ã€‚</li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//archive/bigtable-osdi06.pdf">Google BigTable</a> - é¢å‘åˆ—çš„åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ã€‚</li><li><a href="https://cloud.google.com/datastore/docs/concepts/overview">Google Cloud Datastore</a> - ä¸€ä¸ªå®Œå…¨æ‰˜ç®¡çš„æ— æ¨¡å¼æ•°æ®åº“ï¼Œç”¨äºåœ¨ BigTable ä¸Šå­˜å‚¨éå…³ç³»æ•°æ®ã€‚</li><li><a href="http://www.hypertable.org/">Hypertable</a> - å— BigTable å¯å‘çš„ã€é¢å‘åˆ—çš„åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ã€‚</li><li><a href="https://github.com/infinidb/infinidb/">InfiniDB</a> - é€šè¿‡ MySQL æ¥å£è®¿é—®ï¼Œå¹¶ä½¿ç”¨å¤§è§„æ¨¡å¹¶è¡Œå¤„ç†æ¥å¹¶è¡ŒåŒ–æŸ¥è¯¢ã€‚</li><li><a href="https://github.com/caskdata/tephra">Tephra</a> - ä½¿ HBase æ”¯æŒäº‹åŠ¡</li><li><a href="https://blog.twitter.com/engineering/en_us/a/2014/manhattan-our-real-time-multi-tenant-distributed-database-for-twitter-scale.html">Twitter Manhattan</a> - Twitter å¼€å‘çš„å®æ—¶ã€å¤šç§Ÿæˆ·åˆ†å¸ƒå¼æ•°æ®åº“ã€‚</li><li><a href="http://www.scylladb.com/">ScyllaDB</a> - ä½¿ç”¨ C++ ç¼–å†™çš„é¢å‘åˆ—çš„åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ï¼Œå®Œå…¨å…¼å®¹ Apache Cassandraã€‚</li></ul><h1 id="Key-value-æ•°æ®æ¨¡å‹"><a href="#Key-value-æ•°æ®æ¨¡å‹" class="headerlink" title="Key-value æ•°æ®æ¨¡å‹"></a>Key-value æ•°æ®æ¨¡å‹</h1><ul><li><a href="http://www.aerospike.com/">Aerospike</a> - ä¸€ä¸ªåˆ†å¸ƒå¼ï¼Œé«˜å¯ç”¨çš„ K-V ç±»å‹çš„ NOSQL æ•°æ®åº“ã€‚æä¾›ç±»ä¼¼ä¼ ç»Ÿæ•°æ®åº“çš„ACIDæ“ä½œã€‚</li><li><a href="https://aws.amazon.com/dynamodb/">Amazon DynamoDB</a> - åˆ†å¸ƒå¼ key/value å­˜å‚¨ï¼ŒDynamo è®ºæ–‡çš„å®ç°ã€‚</li><li><a href="https://open.dgraph.io/post/badger/">Badger</a> - ä¸€ä¸ªå¿«é€Ÿã€ç®€å•ã€é«˜æ•ˆå’ŒæŒä¹…çš„é”®å€¼å­˜å‚¨ï¼Œæ˜¯ç”¨ Go ç¼–å†™ã€‚</li><li><a href="https://github.com/boltdb/bolt">Bolt</a> - å¯åœ¨ Go è¯­è¨€ä¸­ä½¿ç”¨çš„åµŒå…¥å¼é”®å€¼æ•°æ®åº“ã€‚</li><li><a href="https://github.com/Bobris/BTDB">BTDB</a> - .Net ä¸­çš„ Key Value æ•°æ®åº“ï¼ŒåŒ…å« Object DB Layerï¼ŒRPCï¼Œdynamic IL ç­‰ç­‰ã€‚</li><li><a href="https://github.com/tidwall/buntdb">BuntDB</a> - Go è¯­è¨€çš„ä¸€ä¸ªå¿«é€Ÿï¼Œå¯åµŒå…¥ï¼ŒåŸºäºå†…å­˜çš„ key/value æ•°æ®åº“ï¼Œæ”¯æŒè‡ªå®šä¹‰ç´¢å¼•å’Œåœ°ç†ç©ºé—´ã€‚</li><li><a href="https://github.com/cbd/edis">Edis</a> - åè®®å…¼å®¹ Redis çš„æ•°æ®åº“ï¼Œå¯æ›¿ä»£ Redisã€‚</li><li><a href="https://github.com/nathanmarz/elephantdb">ElephantDB</a> - ä¸“é—¨ç”¨äºä» Hadoop å¯¼å‡ºæ•°æ®çš„åˆ†å¸ƒå¼æ•°æ®åº“ã€‚</li><li><a href="https://geteventstore.com/">EventStore</a> - åˆ†å¸ƒå¼æ—¶é—´åºåˆ—æ•°æ®åº“ã€‚</li><li><a href="https://github.com/griddb/griddb_nosql">GridDB</a> - ä¸€æ¬¾é«˜åº¦å¯æ‰©å±•çš„ NoSQL æ•°æ®åº“ï¼Œéå¸¸é€‚ç”¨äºç‰©è”ç½‘å’Œå¤§æ•°æ®é¢†åŸŸï¼Œè¿˜å…·æœ‰é«˜å¯é æ€§å’Œé«˜æ€§èƒ½è¿™äº›ç‰¹æ€§ã€‚</li><li><a href="https://github.com/rescrv/HyperDex">HyperDex</a> - å¯æ‰©å±•çš„ä¸‹ä¸€ä»£é”®å€¼å’Œæ–‡æ¡£å­˜å‚¨ï¼Œå…·æœ‰å¤šç§åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä¸€è‡´æ€§ï¼Œå®¹é”™æ€§å’Œé«˜æ€§èƒ½ã€‚</li><li><a href="https://ignite.apache.org/index.html">Ignite</a> - åˆ†å¸ƒå¼å†…å­˜ç½‘æ ¼æ•°æ®åº“ï¼Œå…·æœ‰å¯æŒä¹…åŒ–ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œåˆ†å¸ƒå¼è®¡ç®—ç­‰ç‰¹ç‚¹ï¼Œæ­¤å¤–è¿˜æ”¯æŒä¸°å¯Œçš„é”®å€¼å­˜å‚¨ä»¥åŠSQLè¯­æ³•ã€‚</li><li><a href="https://github.com/linkedin-sna/sna-page/tree/master/krati">LinkedIn Krati</a> - ä¸€ä¸ªç®€å•çš„æŒä¹…åŒ–æ•°æ®å­˜å‚¨ï¼Œå…·æœ‰éå¸¸ä½çš„å»¶è¿Ÿå’Œé«˜ååé‡ã€‚</li><li><a href="http://www.project-voldemort.com/voldemort/">Linkedin Voldemort</a> - åˆ†å¸ƒå¼ key/value å­˜å‚¨ç³»ç»Ÿã€‚</li><li><a href="http://www.oracle.com/technetwork/database/database-technologies/nosqldb/overview/index.html">Oracle NoSQL Database</a> - Oracle å…¬å¸å¼€å‘çš„åˆ†å¸ƒå¼ key/value å­˜å‚¨ç³»ç»Ÿã€‚</li><li><a href="https://redis.io/">Redis</a> - ä¸€ä¸ªå¼€æºï¼ˆBSDè®¸å¯ï¼‰çš„ï¼Œå†…å­˜ä¸­çš„æ•°æ®ç»“æ„å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚</li><li><a href="https://github.com/basho/riak">Riak</a> - å»ä¸­å¿ƒåŒ–çš„æ•°æ®åº“å­˜å‚¨ã€‚</li><li><a href="https://github.com/twitter/storehaus">Storehaus</a> - Twitter å¼€å‘çš„ç”¨äºå¼‚æ­¥ key/value å­˜å‚¨çš„ç±»åº“ã€‚</li><li><a href="https://github.com/tidwall/summitdb">SummitDB</a> - åŸºäºå†…å­˜çš„ NoSQL é”®/å€¼æ•°æ®åº“ï¼Œå…·æœ‰ç£ç›˜æŒä¹…æ€§ï¼Œå¹¶æ”¯æŒ Raft ä¸€è‡´æ€§ç®—æ³•ã€‚</li><li><a href="https://github.com/tarantool/tarantool">Tarantool</a> - ä¸€ä¸ªé«˜æ•ˆçš„ NoSQL æ•°æ®åº“å’Œä¸€ä¸ª Lua åº”ç”¨æœåŠ¡å™¨ã€‚</li><li><a href="https://github.com/pingcap/tikv">TiKV</a> - ä¸€ä¸ªåŸºäº Rust çš„åˆ†å¸ƒå¼é”®å€¼æ•°æ®åº“ï¼Œå¹¶å—è°·æ­Œ Spanner å’Œ HBase çš„å¯å‘ã€‚</li><li><a href="https://github.com/tidwall/tile38">Tile38</a> - å…·æœ‰ç©ºé—´ç´¢å¼•å’Œå®æ—¶åœ°ç†å›´æ çš„åœ°ç†ä½ç½®æ•°æ®åº“ã€‚æ”¯æŒå„ç§å¯¹è±¡ç±»å‹ï¼ŒåŒ…æ‹¬çº¬åº¦/ç»åº¦ç‚¹ï¼Œè¾¹ç•Œæ¡†ï¼ŒXYZåˆ‡ç‰‡ï¼ŒGeohashes å’Œ GeoJSONã€‚</li><li><a href="https://github.com/Treode/store">TreodeDB</a> - key-value å­˜å‚¨ï¼Œæ”¯æŒæ•°æ®å‰¯æœ¬ã€åˆ†ç‰‡ä»¥åŠæä¾›åŸå­å¤šè¡Œå†™ã€‚</li></ul><h1 id="å›¾æ•°æ®æ¨¡å‹"><a href="#å›¾æ•°æ®æ¨¡å‹" class="headerlink" title="å›¾æ•°æ®æ¨¡å‹"></a>å›¾æ•°æ®æ¨¡å‹</h1><ul><li><a href="http://www.agensgraph.com/">AgensGraph</a> - åŸºäº PostgreSQL çš„æ–°ä¸€ä»£å¤šæ¨¡å‹å›¾æ•°æ®åº“ã€‚</li><li><a href="http://giraph.apache.org/">Apache Giraph</a> - ä¸€ä¸ªå¯ä¼¸ç¼©çš„åˆ†å¸ƒå¼è¿­ä»£å›¾å¤„ç†ç³»ç»Ÿï¼ŒåŸºäº Hadoop å¹³å°ï¼Œçµæ„Ÿæ¥è‡ª BSP (bulk synchronous parallel) å’Œ Google çš„ Pregelã€‚</li><li><a href="http://spark.apache.org/docs/0.7.3/bagel-programming-guide.html">Apache Spark Bagel</a> - Bagel æ˜¯è°·æ­Œ Pregel å›¾å¤„ç†æ¡†æ¶çš„ Spark å®ç°ï¼Œæ”¯æŒåŸºæœ¬çš„å›¾å½¢è®¡ç®—ã€ç»„åˆå™¨ï¼ˆcombinersï¼‰å’Œèšåˆå™¨ï¼ˆaggregatorsï¼‰ã€‚ç›®å‰å·²ç»è¢« GraphX æ›¿ä»£ï¼Œåœ¨ Spark 2.0.0 ç‰ˆæœ¬å·²ç»è¢«ç§»é™¤ã€‚</li><li><a href="https://www.arangodb.com/">ArangoDB</a> - å¤šæ¨¡å‹åˆ†å¸ƒå¼æ•°æ®åº“ã€‚</li><li><a href="https://github.com/dgraph-io/dgraph">DGraph</a> - ä¸€ä¸ªå¯ä¼¸ç¼©çš„ã€åˆ†å¸ƒå¼çš„ã€ä½å»¶è¿Ÿçš„ã€é«˜ååé‡çš„å›¾æ•°æ®åº“ï¼Œæ—¨åœ¨æä¾›è°·æ­Œç”Ÿäº§çº§åˆ«çš„è§„æ¨¡å’Œååé‡ï¼Œå…·æœ‰è¶³å¤Ÿä½çš„å»¶è¿Ÿï¼Œå¯ä»¥åœ¨ TB çº§çš„ç»“æ„åŒ–æ•°æ®ä¸Šä¸ºå®æ—¶ç”¨æˆ·æŸ¥è¯¢æä¾›æœåŠ¡ã€‚</li><li><a href="https://github.com/krotik/eliasdb">EliasDB</a> - ä¸€ä¸ªè½»é‡çº§çš„åŸºäºå›¾çš„æ•°æ®åº“ï¼Œä¸éœ€è¦ä»»ä½•ç¬¬ä¸‰æ–¹åº“ã€‚</li><li><a href="https://www.facebook.com/notes/facebook-engineering/tao-the-power-of-the-graph/10151525983993920">Facebook TAO</a> - TAO æ˜¯ Facebook å¹¿æ³›ä½¿ç”¨çš„åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ï¼Œç”¨äºå­˜å‚¨å’ŒæœåŠ¡ç¤¾äº¤å›¾ã€‚</li><li><a href="https://github.com/gchq/Gaffer">GCHQ Gaffer</a> - Gaffer æ˜¯ GCHQï¼ˆè‹±å›½æ”¿åºœé€šè®¯æ€»éƒ¨ï¼‰äº 2015 å¹´ 12 æœˆ 14 æ—¥åœ¨ GitHub ä¸Šå…¬å¸ƒçš„ç¬¬ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ŒGaffer æ˜¯ä¸ªå¤§è§„æ¨¡å›¾å½¢æ•°æ®åº“ï¼Œå¯ä»¥æ–¹ä¾¿å­˜å‚¨å¤§è§„æ¨¡å›¾çš„æ¡†æ¶ï¼ŒèŠ‚ç‚¹å’Œè¾¹ç•Œæœ‰æ•°æ®ç»Ÿè®¡ï¼Œæ¯”å¦‚è®¡æ•°ï¼Œç›´æ–¹å›¾å’Œè‰å›¾ã€‚è¿™äº›ç»Ÿè®¡æ•°æ®æ˜¯æ—¶é—´çª—å£çš„èŠ‚ç‚¹å’Œè¾¹ç•Œå±æ€§ï¼Œå¯ä»¥æ ¹æ®æ—¶é—´åŠ¨æ€æ›´æ–°ã€‚</li><li><a href="https://github.com/cayleygraph/cayley">Google Cayley</a> - å¼€æºçš„å›¾æ•°æ®åº“ã€‚</li><li><a href="http://kowshik.github.io/JPregel/pregel_paper.pdf">Google Pregel</a> - å›¾å¤„ç†æ¡†æ¶ã€‚</li><li><a href="https://turi.com/products/create/docs/">GraphLab PowerGraph</a> - åŒ…å« C++ å®ç°çš„ GraphLab API ä»¥åŠä¸€ç»„åŸºäºGraphLab API æ„å»ºçš„é«˜æ€§èƒ½æœºå™¨å­¦ä¹ å’Œæ•°æ®æŒ–æ˜å·¥å…·åŒ…ã€‚</li><li><a href="https://amplab.cs.berkeley.edu/publication/graphx-grades/">GraphX</a> - ä¸€ä¸ªåˆ†å¸ƒå¼å›¾å¤„ç†æ¡†æ¶ï¼Œå®ƒæ˜¯åŸºäº Spark å¹³å°æä¾›å¯¹å›¾è®¡ç®—å’Œå›¾æŒ–æ˜ç®€æ´æ˜“ç”¨çš„è€Œä¸°å¯Œçš„æ¥å£ï¼Œæå¤§çš„æ–¹ä¾¿äº†å¯¹åˆ†å¸ƒå¼å›¾å¤„ç†çš„éœ€æ±‚ã€‚</li><li><a href="https://github.com/tinkerpop/gremlin">Gremlin</a> - å›¾éå†è¯­è¨€ã€‚</li><li><a href="https://github.com/paulhoule/infovore">Infovore</a> - ä¸€ä¸ª Map/Reduce æ¡†æ¶ï¼Œç”¨æ¥å¤„ç†å¤§é‡çš„ RDF æ•°æ®é›†ï¼Œæ³¨å…¥ Freebase å’Œ DBpediaï¼ŒåŸºäº Hadoop æ„å»ºã€‚</li><li><a href="https://01.org/graphbuilder/">Intel GraphBuilder</a> - åŸºäº Hadoop æ„é€ çš„å¤§å‹å›¾å·¥å…·ã€‚</li><li><a href="http://janusgraph.org">JanusGraph</a> - å¼€æºåˆ†å¸ƒå¼å›¾å½¢æ•°æ®åº“ï¼Œåç«¯å­˜å‚¨å¯ä»¥é€‰æ‹©å¤šç§ç»„ä»¶åŒ…æ‹¬ Bigtableã€HBaseã€Cassandra ç­‰ï¼ŒåŒæ—¶ç´¢å¼•åç«¯ä¹Ÿå¯ä»¥é€‰æ‹©å¾ˆå¤šç§ï¼ŒåŒ…æ‹¬ Elasticsearchã€Solrã€Lucene ç­‰ã€‚</li><li><a href="https://www.blazegraph.com/mapgraph-technology/">MapGraph</a> - ä¸€ä¸ªé«˜çº§çš„ API ç”¨äºå¿«é€Ÿå¼€å‘åŸºäº GPU çš„é«˜æ€§èƒ½å›¾å½¢åˆ†æåº”ç”¨ã€‚</li><li><a href="https://github.com/Microsoft/GraphEngine">Microsoft Graph Engine</a> - ä¸€ä¸ªåŸºäºå†…å­˜çš„åˆ†å¸ƒå¼å¤§è§„æ¨¡å›¾æ•°æ®å¤„ç†å¼•æ“ï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æ›´æ–¹ä¾¿åœ°æ„å»ºå®æ—¶æŸ¥è¯¢åº”ç”¨å’Œé«˜ååé‡ç¦»çº¿åˆ†æå¹³å°ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œå®ƒåœ¨å­¦æœ¯ç•Œæ›´å¹¿ä¸ºäººä¹‹çš„åç§°æ˜¯ Trinityã€‚</li><li><a href="https://neo4j.com/">Neo4j</a> - ä¸€ä¸ªé«˜æ€§èƒ½çš„ NOSQLå›¾æ•°æ®åº“ï¼Œå®Œå…¨ç”± Java å®ç°ã€‚</li><li><a href="http://orientdb.com/">OrientDB</a> - æ–‡æ¡£å›¾å½¢æ•°æ®åº“ã€‚</li><li><a href="https://github.com/xslogic/phoebus">Phoebus</a> - å¤§å‹å›¾å¤„ç†æ¡†æ¶ã€‚</li><li><a href="http://thinkaurelius.github.io/titan/">Titan</a> - å»ºç«‹åœ¨ Cassandra ä¹‹ä¸Šçš„åˆ†å¸ƒå¼å›¾æ•°æ®åº“ã€‚</li><li><a href="https://github.com/twitter-archive/flockdb">Twitter FlockDB</a> - åˆ†å¸ƒå¼å›¾æ•°æ®åº“ã€‚</li><li><a href="https://nodexl.codeplex.com/">NodeXL</a> - MicrosoftÂ® ExcelÂ® 2007ï¼Œ2010ï¼Œ2013 å’Œ 2016 å…è´¹å¼€æºçš„æ¨¡æ¿ï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„æ¢ç´¢ç½‘ç»œå›¾ã€‚</li></ul><h1 id="åˆ—å¼æ•°æ®åº“"><a href="#åˆ—å¼æ•°æ®åº“" class="headerlink" title="åˆ—å¼æ•°æ®åº“"></a>åˆ—å¼æ•°æ®åº“</h1><p><strong>æ³¨æ„</strong>ï¼šè¯·è¯»ä¸€ä¸‹ <a href="#Key-value-æ•°æ®æ¨¡å‹">Key-value æ•°æ®æ¨¡å‹</a> ç« èŠ‚çš„è¯´æ˜ã€‚</p><ul><li><a href="http://the-paper-trail.org/blog/columnar-storage/">Columnar Storage</a> - è§£é‡Šä»€ä¹ˆæ˜¯åˆ—å¼å­˜å‚¨ï¼Œä»¥åŠæˆ‘ä»¬ä»€ä¹ˆæ—¶å€™éœ€è¦å®ƒã€‚</li><li><a href="http://www.actian.com/">Actian Vector</a> - é¢å‘åˆ—çš„åˆ†ææ•°æ®åº“ã€‚</li><li><a href="http://db.lcs.mit.edu/projects/cstore/">C-Store</a> - é¢å‘åˆ—çš„ DBMSã€‚</li><li><a href="https://clickhouse.yandex/">ClickHouse</a> - ä¸€ä¸ªå¼€æºçš„åˆ—å¼æ•°æ®åº“ï¼ˆDBMSï¼‰ï¼Œä¸»è¦ç”¨äºåœ¨çº¿åˆ†æå¤„ç†æŸ¥è¯¢ï¼ˆOLAPï¼‰ã€‚</li><li><a href="http://eventql.io/">EventQL</a> - ä¸ºå¤§è§„æ¨¡äº‹ä»¶æ”¶é›†å’Œåˆ†æè€Œæ„å»ºçš„åˆ†å¸ƒå¼ã€é¢å‘åˆ—çš„æ•°æ®åº“ã€‚</li><li><a href="https://www.monetdb.org/">MonetDB</a> - åˆ—å¼å­˜å‚¨æ•°æ®åº“ã€‚</li><li><a href="http://parquet.apache.org/">Parquet</a> - çµæ„Ÿæ¥è‡ªäº2010å¹´ Google å‘è¡¨çš„ Dremel è®ºæ–‡ï¼Œæ˜¯ä¸€ç§åˆ—å¼å­˜å‚¨æ ¼å¼ï¼Œä¸è¯­è¨€ã€å¹³å°æ— å…³ï¼Œå¹¶ä¸”ä¸éœ€è¦å’Œä»»ä½•ä¸€ç§æ•°æ®å¤„ç†æ¡†æ¶ç»‘å®šã€‚</li><li><a href="https://pivotal.io/pivotal-greenplum">Pivotal Greenplum</a> - ä¸ºç‰¹å®šç›®çš„è€Œæ„å»ºçš„ä¸“ç”¨åˆ†ææ•°æ®ä»“åº“ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªåˆ—å¼å­˜å‚¨å¼•æ“å’Œä¸€ä¸ªä¼ ç»Ÿçš„åŸºäºè¡Œçš„å¼•æ“ã€‚</li><li><a href="https://www.vertica.com/">Vertica</a> - è®¾è®¡ç”¨äºç®¡ç†å¤§é‡å¿«é€Ÿå¢é•¿çš„æ•°æ®ï¼Œæä¾›éå¸¸å¿«çš„æŸ¥è¯¢æ€§èƒ½ã€‚</li><li><a href="http://sqream.com/">SQream DB</a> - ä»¥è‰²åˆ—å¤§æ•°æ®å…¬å¸å¼€å‘çš„è·‘åœ¨ GPU ä¸Šçš„å¤§æ•°æ®æ•°æ®åº“ï¼Œè®¾è®¡ç”¨äºåˆ†æå’Œæ•°æ®ä»“åº“ï¼Œä½¿ç”¨ ANSI-92 SQLï¼Œé€‚ç”¨äº10TBåˆ°1PBçš„æ•°æ®é›†ã€‚</li><li><a href="https://cloud.google.com/bigquery/what-is-bigquery">Google BigQuery</a> - Google æ¨å‡ºçš„ä¸€é¡¹ Web æœåŠ¡ï¼Œè¯¥æœåŠ¡è®©å¼€å‘è€…å¯ä»¥ä½¿ç”¨ Google çš„æ¶æ„æ¥è¿è¡Œ SQL è¯­å¥å¯¹è¶…çº§å¤§çš„æ•°æ®åº“è¿›è¡Œæ“ä½œã€‚</li><li><a href="https://aws.amazon.com/redshift/">Amazon Redshift</a> - ä¸€ä¸ªæ”¯æŒ SQL æŸ¥è¯¢çš„ã€å¿«é€Ÿã€å¯æ‰©å±•çš„åˆ—å¼å­˜å‚¨æ•°æ®åº“ï¼Œå®ƒæ”¯æŒ PB çº§çš„æ•°é‡æŸ¥è¯¢ï¼Œæ˜¯é€‚ç”¨äºä¼ä¸šçº§çš„æ•°æ®ä»“åº“ã€‚</li><li><a href="https://github.com/shunfei/indexr">IndexR</a> - ä¸€ä¸ªå¼€æºçš„å¤§æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œäº 2017 å¹´ 1 æœˆåˆæ­£å¼å¼€æºï¼Œæ—¨åœ¨é€šè¿‡æ·»åŠ ç´¢å¼•ã€ä¼˜åŒ–ç¼–ç æ–¹å¼ã€æé«˜ IO æ•ˆç‡ç­‰å„ç§ä¼˜åŒ–æ–¹å¼æ¥æé«˜è®¡ç®—å±‚å’Œå­˜å‚¨å±‚çš„æ•°æ®äº¤æ¢æ•ˆç‡ï¼Œä»è€Œæå‡æ•´ä½“æ€§èƒ½ã€‚</li><li><a href="https://github.com/cswinter/LocustDB">LocustDB</a> - ä¸€ä¸ªå¤§è§„æ¨¡å¹¶è¡Œä¸”é«˜æ€§èƒ½çš„åˆ†ææ•°æ®åº“ (Analytics Database)ï¼Œå¯å¿«é€Ÿå¤„ç†ä½ çš„æ‰€æœ‰æ•°æ®ï¼Œç›®å‰å¤„äºå®éªŒæ€§é˜¶æ®µã€‚</li></ul><h1 id="NewSQL-æ•°æ®åº“"><a href="#NewSQL-æ•°æ®åº“" class="headerlink" title="NewSQL æ•°æ®åº“"></a>NewSQL æ•°æ®åº“</h1><ul><li><a href="http://www.actian.com/products/operational-databases/">Actian Ingres</a> - å•†ä¸šæ”¯æŒï¼Œå¼€æº SQL å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚</li><li><a href="https://github.com/biokoda/actordb">ActorDB</a> - åˆ†å¸ƒå¼çš„ SQL æ•°æ®åº“ï¼Œå¯å®ç°å¯ä¼¸ç¼©çš„ K/V å­˜å‚¨ç³»ç»Ÿã€‚ActorDB åŸºäº Actor è®¡ç®—æ¨¡å‹ï¼Œä¸ä¼ ç»Ÿçš„é›†ä¸­å¼æ•°æ®åº“ä¸åŒï¼ŒActorDB ç”±ä»»æ„æ•°é‡çš„è¢«æˆä¸º actor çš„ç‹¬ç«‹å’Œå¹¶å‘ SQL æ•°æ®åº“ç»„æˆã€‚</li><li><a href="http://aws.amazon.com/redshift/">Amazon RedShift</a> - åŸºäº PostgreSQL çš„æ•°æ®ä»“åº“æœåŠ¡ã€‚</li><li><a href="https://github.com/probcomp/BayesDB">BayesDB</a> - ä¸€ä¸ªè´å¶æ–¯æ•°æ®åº“ï¼Œå†…å»ºè´å¶æ–¯æŸ¥è¯¢è¯­è¨€ BQLï¼Œç”¨æˆ·æ— éœ€ç»Ÿè®¡æ–¹é¢çŸ¥è¯†å³å¯è§£å†³ä¸€äº›åŸºæœ¬çš„ç§‘å­¦æ•°æ®é—®é¢˜</li><li><a href="http://bedrockdb.com/">Bedrock</a> - æ„å»ºåœ¨ SQLite ä¹‹ä¸Šçš„ç®€å•ã€æ¨¡å—åŒ–ã€ç½‘ç»œåŒ–ã€åˆ†å¸ƒå¼äº‹åŠ¡å±‚ã€‚</li><li><a href="https://www.citusdata.com/">CitusDB</a> - é€šè¿‡åˆ†ç‰‡å’Œå‰¯æœ¬æ‰©å±• PostgreSQLã€‚</li><li><a href="https://github.com/cockroachdb/cockroach">Cockroach</a> - å¯ä¼¸ç¼©ã€åœ°ç†å¤åˆ¶ã€äº‹åŠ¡æ€§æ•°æ®å­˜å‚¨ã€‚</li><li><a href="https://github.com/bloomberg/comdb2">Comdb2</a> - ä¸€ä¸ªåŸºäºä¹è§‚å¹¶å‘æ§åˆ¶æŠ€æœ¯çš„é›†ç¾¤ RDBMSã€‚</li><li><a href="http://www.datomic.com/">Datomic</a> - åˆ†å¸ƒå¼æ•°æ®åº“æ—¨åœ¨æ”¯æŒå¯ä¼¸ç¼©ã€çµæ´»å’Œæ™ºèƒ½çš„åº”ç”¨ç¨‹åºã€‚</li><li><a href="https://foundationdb.com/">FoundationDB</a> - åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œå— F1 å¯å‘ã€‚</li><li><a href="https://research.google.com/pubs/pub41344.html">Google F1</a> - æ„å»ºåœ¨ Spanner ä¹‹ä¸Šçš„åˆ†å¸ƒå¼ SQL æ•°æ®åº“ã€‚</li><li><a href="https://research.google.com/archive/spanner.html">Google Spanner</a> - Googleçš„å…¨çƒçº§çš„åˆ†å¸ƒå¼æ•°æ®åº“ï¼Œå…·æœ‰å¯æ‰©å±•ï¼Œå¤šç‰ˆæœ¬ï¼Œå…¨çƒåˆ†å¸ƒå¼ã€åŒæ­¥å¤åˆ¶ç­‰ç‰¹æ€§ã€‚</li><li><a href="http://hstore.cs.brown.edu/">H-Store</a> - ä¸€ä¸ªå®éªŒæ€§çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚å®ƒä¸“ä¸ºé©»çº¿äº¤æ˜“å¤„ç†åº”ç”¨ç¨‹åºï¼ˆOLTPï¼‰è€Œè®¾è®¡ã€‚</li><li><a href="https://github.com/VCNC/haeinsa">Haeinsa</a> - Haeinsa æ˜¯ HBase å¯çº¿æ€§æ‰©å±•çš„å¤šè¡Œï¼Œå¤šè¡¨äº‹åŠ¡åº“ã€‚ä½¿ç”¨ä¸¤é˜¶æ®µé”å®šå’Œä¹è§‚å¹¶å‘æ§åˆ¶æ¥å®ç°äº‹åŠ¡ã€‚ äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æ˜¯å¯åºåˆ—åŒ–çš„ã€‚åŸºäº Percolator å®ç°ã€‚</li><li><a href="https://www.percona.com/doc/percona-server/5.5/performance/handlersocket.html">HandlerSocket</a> - MySQL/MariaDB çš„ NoSQL æ’ä»¶ã€‚</li><li><a href="http://www.infinisql.org/">InfiniSQL</a> - æ— é™æ‰©å±•çš„ RDBMS.</li><li><a href="https://github.com/rayokota/kareldb">KarelDB</a> - ç”± Apache Kafka æ”¯æŒçš„å…³ç³»æ•°æ®åº“ã€‚</li><li><a href="https://www.mapd.com/">Map-D</a> - GPU å†…å­˜æ•°æ®åº“ï¼Œå¤§æ•°æ®åˆ†æå¯è§†åŒ–å¹³å°ã€‚</li><li><a href="http://www.memsql.com/">MemSQL</a> - ä¸€æ¬¾å†…å­˜æ•°æ®åº“ï¼Œå®ƒé€šè¿‡å°†æ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œå°† SQL è¯­å¥é¢„ç¼–è¯‘ä¸º C++ è€Œè·å¾—æé€Ÿæ‰§è¡Œæ•ˆç‡ã€‚</li><li><a href="http://www.nuodb.com/">NuoDB</a> - ç¬¦åˆ SQL/ACID çš„åˆ†å¸ƒå¼æ•°æ®åº“ã€‚</li><li><a href="http://www.oracle.com/technetwork/database/database-technologies/timesten/overview/index.html">Oracle TimesTen in-Memory Database</a> - åŸºäºå†…å­˜çš„å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå…·æœ‰æŒä¹…æ€§å’Œå¯æ¢å¤æ€§ã€‚</li><li><a href="http://gemfirexd.docs.pivotal.io/latest/">Pivotal GemFire XD</a> - ä½å»¶è¿Ÿã€åŸºäºå†…å­˜ã€åˆ†å¸ƒå¼ SQL æ•°æ®å­˜å‚¨ã€‚ä¸ºå†…å­˜è¡¨æ•°æ®æä¾› SQL æ¥å£ï¼Œå¯åœ¨ HDFS ä¸­æŒä¹…å­˜å‚¨ã€‚</li><li><a href="https://hana.sap.com/abouthana.html">SAP HANA</a> - åŸºäºå†…å­˜ã€é¢å‘åˆ—ã€å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€‚</li><li><a href="http://senseidb.github.io/sensei/">SenseiDB</a> - åˆ†å¸ƒå¼ã€å®æ—¶ã€åŠç»“æ„åŒ–çš„æ•°æ®åº“ã€‚</li><li><a href="http://skydb.io/">Sky</a> - ç”¨äºçµæ´»ã€é«˜æ€§èƒ½çš„è¡Œä¸ºæ•°æ®åˆ†æçš„æ•°æ®åº“ã€‚</li><li><a href="http://www.symmetricds.org/">SymmetricDS</a> - ç”¨äºæ–‡ä»¶å’Œæ•°æ®åº“åŒæ­¥çš„å¼€æºè½¯ä»¶ã€‚</li><li><a href="https://github.com/pingcap/tidb">TiDB</a> - ä¸€æ¬¾å®šä½äºåœ¨çº¿äº‹åŠ¡å¤„ç†/åœ¨çº¿åˆ†æå¤„ç†çš„èåˆå‹æ•°æ®åº“äº§å“ï¼Œå®ç°äº†ä¸€é”®æ°´å¹³ä¼¸ç¼©ï¼Œå¼ºä¸€è‡´æ€§çš„å¤šå‰¯æœ¬æ•°æ®å®‰å…¨ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå®æ—¶ OLAP ç­‰é‡è¦ç‰¹æ€§ã€‚å— Google F1 å¯å‘ã€‚</li><li><a href="https://www.voltdb.com/">VoltDB</a> - å£°ç§°æ˜¯æœ€å¿«çš„å†…å­˜æ•°æ®åº“ã€‚</li><li><a href="https://github.com/YugaByte/yugabyte-db">yugabyteDB</a> - ä¸ PostgreSQL å…¼å®¹çš„å¼€æºï¼Œé«˜æ€§èƒ½ï¼Œåˆ†å¸ƒå¼SQLæ•°æ®åº“ã€‚</li></ul><h1 id="æ—¶é—´åºåˆ—æ•°æ®åº“"><a href="#æ—¶é—´åºåˆ—æ•°æ®åº“" class="headerlink" title="æ—¶é—´åºåˆ—æ•°æ®åº“"></a>æ—¶é—´åºåˆ—æ•°æ®åº“</h1><ul><li><a href="http://axibase.com/products/axibase-time-series-database/">Axibase Time Series Database</a> - åŸºäº HBase çš„æ—¶é—´åºåˆ—æ•°æ®åº“ï¼Œå†…ç½®å¯è§†åŒ–ã€è§„åˆ™å¼•æ“å’Œ SQL æ”¯æŒã€‚</li><li><a href="http://chronix.io/">Chronix</a> - ä¸€ç§æ—¶é—´åºåˆ—å­˜å‚¨å™¨ï¼Œç”¨äºå­˜å‚¨é«˜åº¦å‹ç¼©çš„æ—¶é—´åºåˆ—ï¼Œå¹¶æ”¯æŒå¿«é€Ÿè®¿é—®æ•°æ®ã€‚</li><li><a href="http://square.github.io/cube/">Cube</a> - ä½¿ç”¨ MongoDB æ¥å­˜å‚¨æ—¶é—´åºåˆ—æ•°æ®ã€‚</li><li><a href="https://spotify.github.io/heroic/#!/index">Heroic</a> - åŸºäº Cassandra å’Œ Elasticsearch çš„å¯æ‰©å±•æ—¶é—´åºåˆ—æ•°æ®åº“ã€‚</li><li><a href="https://www.influxdata.com/">InfluxDB</a> - åˆ†å¸ƒå¼æ—¶é—´åºåˆ—æ•°æ®åº“ã€‚</li><li><a href="https://www.circonus.com/irondb/">IronDB</a> - å¯æ‰©å±•ã€é€šç”¨æ—¶é—´åºåˆ—æ•°æ®åº“ã€‚</li><li><a href="https://github.com/kairosdb/kairosdb">Kairosdb</a> - å’Œ OpenTSDB ç±»ä¼¼ï¼Œä½†æ˜¯æ„å»ºåœ¨ Cassandra ä¹‹ä¸Šã€‚</li><li><a href="http://m3db.github.io/m3/m3db/">M3DB</a> - ä¸€ä¸ªåˆ†å¸ƒå¼æ—¶é—´åºåˆ—æ•°æ®åº“ï¼Œå¯ç”¨äºé•¿æœŸå­˜å‚¨å®æ—¶æŒ‡æ ‡ã€‚</li><li><a href="https://opennms.github.io/newts/">Newts</a> - åŸºäº Apache Cassandra çš„æ—¶é—´åºåˆ—æ•°æ®åº“ã€‚</li><li><a href="https://github.com/taosdata/TDengine/">TDengine</a> - ä½¿ç”¨ IoT çš„ç‹¬ç‰¹åŠŸèƒ½çš„ C è¯­è¨€ä¸­çš„æ—¶é—´åºåˆ—æ•°æ®åº“ï¼Œä»¥æé«˜è¯» / å†™ååé‡å¹¶å‡å°‘å­˜å‚¨æ•°æ®æ‰€éœ€çš„ç©ºé—´ã€‚</li><li><a href="http://opentsdb.net">OpenTSDB</a> - æ„å»ºåœ¨ HBase ä¹‹ä¸Šçš„åˆ†å¸ƒå¼æ—¶é—´åºåˆ—æ•°æ®åº“ã€‚</li><li><a href="https://prometheus.io/">Prometheus</a> - æ—¶é—´åºåˆ—æ•°æ®åº“å’ŒæœåŠ¡ç›‘æ§ç³»ç»Ÿã€‚</li><li><a href="https://github.com/facebookincubator/beringei">Beringei</a> - Facebook çš„å†…å­˜æ—¶é—´åºåˆ—æ•°æ®åº“ã€‚</li><li><a href="http://traildb.io/">TrailDB</a> - ç”¨äºå­˜å‚¨å’ŒæŸ¥è¯¢ä¸€ç³»åˆ—äº‹ä»¶çš„æœ‰æ•ˆå·¥å…·ã€‚</li><li><a href="https://github.com/druid-io/druid/">Druid</a> - MetaMarket å…¬å¸ç ”å‘ï¼Œä¸“ä¸ºæµ·é‡æ•°æ®é›†ä¸Šçš„åšé«˜æ€§èƒ½ OLAP (OnLine Analysis Processing)è€Œè®¾è®¡çš„æ•°æ®å­˜å‚¨å’Œåˆ†æç³»ç»Ÿ</li><li><a href="http://basho.com/products/riak-ts/">Riak-TS</a> - å”¯ä¸€ä¸“ä¸ºç‰©è”ç½‘å’Œæ—¶é—´åºåˆ—æ•°æ®ä¼˜åŒ–çš„ä¼ä¸šçº§ NoSQL æ—¶é—´åºåˆ—æ•°æ®åº“ã€‚</li><li><a href="https://github.com/akumuli/Akumuli">Akumuli</a> - ä¸€ä¸ªæ•°å€¼å‹æ—¶é—´åºåˆ—æ•°æ®åº“ï¼Œå¯ä»¥å­˜å‚¨ã€å¤„ç†æ—¶åºåˆ—æ•°æ®ã€‚</li><li><a href="https://github.com/Pardot/Rhombus">Rhombus</a> - ACassandra çš„æ—¶é—´åºåˆ—å¯¹è±¡å­˜å‚¨ã€‚</li><li><a href="https://github.com/dalmatinerdb/dalmatinerdb">Dalmatiner DB</a> - å¿«é€Ÿåˆ†å¸ƒå¼åº¦é‡æ•°æ®åº“</li><li><a href="https://github.com/rackerlabs/blueflood">Blueflood</a> - ä¸€ç§ç”¨äºæ‘„å–å’Œå¤„ç†æ—¶é—´åºåˆ—æ•°æ®çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚</li><li><a href="https://github.com/NationalSecurityAgency/timely">Timely</a> - ä¸€ä¸ªæ—¶é—´åºåˆ—æ•°æ®åº“åº”ç”¨ç¨‹åºï¼Œå®ƒæä¾›äº†åŸºäº Accumulo å’Œ Grafana çš„å¯¹æ—¶é—´åºåˆ—æ•°æ®çš„å®‰å…¨è®¿é—®ã€‚</li><li><a href="https://github.com/transceptor-technology/siridb-server">SiriDB</a> - å…·æœ‰é›†ç¾¤åŠŸèƒ½çš„é«˜æ‰©å±•æ€§ã€å¥å£®æ€§å’Œå¿«é€Ÿçš„å¼€æºæ—¶é—´åºåˆ—æ•°æ®åº“ã€‚</li><li><a href="https://github.com/improbable-eng/thanos">Thanos</a> - ä¸€ç»„ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ª Prometheus éƒ¨ç½²åˆ›å»ºå…·æœ‰æ— é™å­˜å‚¨å®¹é‡çš„é«˜å¯ç”¨åº¦é‡ç³»ç»Ÿã€‚</li><li><a href="https://github.com/VictoriaMetrics/VictoriaMetrics">VictoriaMetrics</a> - ä¸ Prometheus å…¼å®¹çš„å¿«é€Ÿï¼Œå¯æ‰©å±•çš„å¼€æº TSDBï¼ŒåŒ…æ‹¬å•èŠ‚ç‚¹å’Œç¾¤é›†ç‰ˆæœ¬ã€‚</li></ul><h1 id="ç±»-SQL-å¤„ç†ç³»ç»Ÿ"><a href="#ç±»-SQL-å¤„ç†ç³»ç»Ÿ" class="headerlink" title="ç±» SQL å¤„ç†ç³»ç»Ÿ"></a>ç±» SQL å¤„ç†ç³»ç»Ÿ</h1><ul><li><a href="http://www.actian.com/analytic-database/vectorh-sql-hadoop">Actian SQL for Hadoop</a> - é«˜æ€§èƒ½äº¤äº’å¼ SQLï¼Œå¯ä»¥åˆ©ç”¨å®ƒè®¿é—® Hadoop ä¸Šçš„æ•°æ®ã€‚</li><li><a href="http://drill.apache.org/">Apache Drill</a> - ä¸€ä¸ªä½å»¶è¿Ÿçš„åˆ†å¸ƒå¼æµ·é‡æ•°æ®äº¤äº’å¼æŸ¥è¯¢å¼•æ“ï¼Œä½¿ç”¨ ANSI SQL å…¼å®¹è¯­æ³•ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ MPP æŸ¥è¯¢å±‚ã€‚ç›®çš„åœ¨äºæ”¯æŒæ›´å¹¿æ³›çš„æ•°æ®æºï¼Œæ•°æ®æ ¼å¼ï¼Œä»¥åŠæŸ¥è¯¢è¯­è¨€ã€‚å— Googleçš„Dremel å¯å‘ã€‚</li><li><a href="https://cwiki.apache.org/confluence/display/Hive/HCatalog">Apache HCatalog</a> - Hadoop çš„è¡¨å­˜å‚¨ç®¡ç†å·¥å…·ã€‚</li><li><a href="http://hive.apache.org/">Apache Hive</a> - åŸºäº Hadoop çš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·ï¼Œå¯ä»¥å°†ç»“æ„åŒ–æ•°æ®æ–‡ä»¶æ˜ å°„ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼Œå¹¶æä¾›ç±» SQL æŸ¥è¯¢åŠŸèƒ½ã€‚</li><li><a href="http://calcite.apache.org/">Apache Calcite</a> - ä¸€æ¬¾å¼€æº SQL è§£æå·¥å…·ï¼Œå¯ä»¥å°†å„ç§ SQL è¯­å¥è§£ææˆæŠ½è±¡è¯­æ³•æœ¯AST(Abstract Syntax Tree)ï¼Œä¹‹åé€šè¿‡æ“ä½œ AST å°±å¯ä»¥æŠŠ SQL ä¸­æ‰€è¦è¡¨è¾¾çš„ç®—æ³•ä¸å…³ç³»ä½“ç°åœ¨å…·ä½“ä»£ç ä¹‹ä¸­ã€‚</li><li><a href="http://phoenix.apache.org/index.html">Apache Phoenix</a> - æ„å»ºåœ¨ HBase ä¹‹ä¸Šçš„å…³ç³»å‹æ•°æ®åº“å±‚ï¼Œå¯ä»¥å¯¹ HBase ä¸­çš„æ•°æ®è¿›è¡Œä½å»¶è¿Ÿè®¿é—®ã€‚</li><li><a href="http://www.teradata.com/products-and-services/Teradata-Aster/teradata-aster-database">Aster Database</a> - ç±» SQL åˆ†æå¤„ç†ã€‚</li><li><a href="https://www.cloudera.com/products/apache-hadoop/impala.html">Cloudera Impala</a> - å®æ—¶äº¤äº’ SQL å¤§æ•°æ®æŸ¥è¯¢å·¥å…·ï¼Œå— Dremel å¯å‘ã€‚</li><li><a href="http://www.cascading.org/projects/lingual/">Concurrent Lingual</a> - Cascading ä¸Šçš„ SQL æŸ¥è¯¢è¯­è¨€ã€‚</li><li><a href="http://www.datasalt.com/products/splout-sql/">Datasalt Splout SQL</a> - é’ˆå¯¹å¤§æ•°æ®é›†çš„å®Œæ•´ SQL æŸ¥è¯¢å¼•æ“ã€‚</li><li><a href="https://www.dremio.com/">Dremio</a> - ä¸€ä¸ªåŸºäºApache Arrowçš„å¼€æºï¼Œç±»ä¼¼SQLçš„æ•°æ®æœåŠ¡å¹³å°ã€‚</li><li><a href="https://prestodb.io/">Facebook PrestoDB</a> - åˆ†å¸ƒå¼ SQL æŸ¥è¯¢å¼•æ“ã€‚</li><li><a href="https://research.google.com/pubs/pub36632.html">Google BigQuery</a> - Google æ¨å‡ºçš„ä¸€é¡¹ Web æœåŠ¡ï¼Œè¯¥æœåŠ¡è®©å¼€å‘è€…å¯ä»¥ä½¿ç”¨ Google çš„æ¶æ„æ¥è¿è¡Œ SQL è¯­å¥å¯¹è¶…çº§å¤§çš„æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œæ˜¯ Dremel çš„å®ç°ã€‚</li><li><a href="https://www.pipelinedb.com/">PipelineDB</a> - ä¸€ä¸ªå¼€æºçš„å…³ç³»æ•°æ®åº“ï¼Œå®ƒå¯ä»¥åœ¨å®æ—¶æµæ•°æ®ä¸Šæ‰§è¡Œ SQL æŸ¥è¯¢ï¼Œå¹¶å°†ç»“æœå¢é‡åœ°å­˜å‚¨åœ¨è¡¨ä¸­ã€‚</li><li><a href="https://pivotal.io/pivotal-hdb">Pivotal HDB</a> - Hadoop ä¸Šçš„ç±» SQL æ•°æ®ä»“åº“ç³»ç»Ÿã€‚</li><li><a href="http://rainstor.com/products/rainstor-database/">RainstorDB</a> - ç”¨äºå­˜å‚¨ PB çº§ç»“æ„åŒ–å’ŒåŠç»“æ„åŒ–æ•°æ®é‡çš„æ•°æ®åº“ã€‚</li><li><a href="https://github.com/apache/spark/tree/master/sql">Spark Catalyst</a> - Apache Spark çš„æŸ¥è¯¢ä¼˜åŒ–æ¡†æ¶ã€‚</li><li><a href="https://databricks.com/blog/2014/03/26/spark-sql-manipulating-structured-data-using-spark-2.html">SparkSQL</a> - ä½¿ç”¨ Spark æ“ä½œç»“æ„åŒ–çš„æ•°æ®ã€‚</li><li><a href="https://www.splicemachine.com/">Splice Machine</a> - å…¼å…·äº† SQL å’Œ NoSQL çš„å„è‡ªä¼˜åŠ¿ï¼Œä¸”èƒ½å¯¹æ“ä½œå‹å’Œåˆ†æå‹åº”ç”¨è¿›è¡Œå®æ—¶å¤„ç†ï¼Œå…·æœ‰ ACID ç‰¹æ€§ã€‚</li><li><a href="https://hortonworks.com/innovation/stinger/">Stinger</a> - ç”± Hortonworks å¼€å‘çš„ä¸€ä¸ªå½»åº•æå‡ Hive æ•ˆç‡çš„å·¥å…·ã€‚</li><li><a href="http://tajo.apache.org/">Tajo</a> - Hadoop ä¹‹ä¸Šçš„åˆ†å¸ƒå¼æ•°æ®ä»“åº“ç³»ç»Ÿã€‚</li><li><a href="https://wiki.trafodion.org/wiki/index.php/Main_Page">Trafodion</a> - ç”±æƒ æ™®å¼€å‘å¹¶å¼€æºçš„åŸºäº Hadoop å¹³å°çš„äº‹åŠ¡æ•°æ®åº“å¼•æ“ã€‚æä¾›äº†ä¸€ä¸ªåŸºäº Hadoop å¹³å°çš„äº¤æ˜“å‹ SQL å¼•æ“ï¼Œæ˜¯ä¸€ä¸ªæ“…é•¿å¤„ç†äº¤æ˜“å‹è´Ÿè½½çš„ Hadoop å¤§æ•°æ®è§£å†³æ–¹æ¡ˆã€‚</li></ul><h1 id="æ•°æ®é‡‡é›†"><a href="#æ•°æ®é‡‡é›†" class="headerlink" title="æ•°æ®é‡‡é›†"></a>æ•°æ®é‡‡é›†</h1><ul><li><a href="https://aws.amazon.com/kinesis/">Amazon Kinesis</a> - ä¸€ç§åœ¨ AWS ä¸Šæµå¼å¤„ç†æ•°æ®çš„å¹³å°ï¼Œè®©æ‚¨å¯ä»¥è½»æ¾åœ°åŠ è½½å’Œåˆ†ææµæ•°æ®ï¼ŒåŒæ—¶è¿˜å¯è®©æ‚¨æ ¹æ®å…·ä½“éœ€æ±‚æ¥æ„å»ºè‡ªå®šä¹‰æµæ•°æ®åº”ç”¨ç¨‹åºã€‚</li><li><a href="https://aws.amazon.com/glue/">Amazon Web Services Glue</a> -  ä¸€é¡¹å®Œå…¨æ‰˜ç®¡çš„æå–ã€è½¬æ¢å’ŒåŠ è½½ï¼ˆETLï¼‰æœåŠ¡ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿè½»æ¾å‡†å¤‡å’ŒåŠ è½½æ•°æ®è¿›è¡Œåˆ†æã€‚</li><li><a href="http://chukwa.apache.org/">Apache Chukwa</a> - æ•°æ®é‡‡é›†ç³»ç»Ÿã€‚</li><li><a href="http://flume.apache.org/">Apache Flume</a> - ä¸€ä¸ªåˆ†å¸ƒå¼çš„ã€å¯é çš„ã€æ˜“ç”¨çš„ç³»ç»Ÿï¼Œå¯ä»¥æœ‰æ•ˆåœ°å°†æ¥è‡ªå¾ˆå¤šä¸åŒæºç³»ç»Ÿçš„å¤§é‡æ—¥å¿—æ•°æ®æ”¶é›†ã€æ±‡æ€»æˆ–è€…è½¬ç§»åˆ°ä¸€ä¸ªæ•°æ®ä¸­å¿ƒå­˜å‚¨ã€‚</li><li><a href="http://kafka.apache.org/">Apache Kafka</a> - åˆ†å¸ƒå¼å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿã€‚</li><li><a href="https://nifi.apache.org/">Apache NiFi</a> - ä¸€ä¸ªæ˜“ç”¨ã€å¼ºå¤§ã€å¯é çš„æ•°æ®å¤„ç†ä¸åˆ†å‘ç³»ç»Ÿ</li><li><a href="http://sqoop.apache.org/">Apache Sqoop</a> - ä¸€æ¬¾å¼€æºçš„å·¥å…·ï¼Œä¸»è¦ç”¨äºåœ¨ Hadoop/Hive ä¸ä¼ ç»Ÿçš„æ•°æ®åº“ï¼ˆMySQLã€Oracle...ï¼‰é—´è¿›è¡Œæ•°æ®çš„ä¼ é€’</li><li><a href="http://www.embulk.org">Embulk</a> - å¼€æºçš„æ‰¹é‡æ•°æ®åŠ è½½å™¨ï¼Œå¸®åŠ©åœ¨å„ç§æ•°æ®åº“ã€å­˜å‚¨ã€æ–‡ä»¶æ ¼å¼å’Œäº‘æœåŠ¡ä¹‹é—´ä¼ è¾“æ•°æ®ã€‚</li><li><a href="https://github.com/facebookarchive/scribe">Facebook Scribe</a> - æµæ—¥å¿—æ•°æ®èšåˆå™¨ã€‚</li><li><a href="http://www.fluentd.org">Fluentd</a> - ç”¨äºæ”¶é›†äº‹ä»¶å’Œæ—¥å¿—çš„å·¥å…·ã€‚</li><li><a href="https://research.google.com/pubs/pub41318.html">Google Photon</a> - åœ°ç†åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œç”¨äºå®æ—¶è¿æ¥å¤šä¸ªè¿ç»­æµåŠ¨çš„æ•°æ®æµï¼Œå…·æœ‰é«˜å¯ä¼¸ç¼©æ€§å’Œä½å»¶è¿Ÿã€‚</li><li><a href="https://github.com/mozilla-services/heka">Heka</a> - å¼€æºæµå¤„ç†ç³»ç»Ÿã€‚</li><li><a href="https://github.com/sonalgoyal/hiho">HIHO</a> - ç”¨äºå°†ä¸åŒæ•°æ®æºçš„æ•°æ®å’Œ Hadoop è¿›è¡Œè¿æ¥çš„æ¡†æ¶ã€‚</li><li><a href="https://github.com/papertrail/kestrel">Kestrel</a> - åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿã€‚</li><li><a href="https://engineering.linkedin.com/data">LinkedIn Databus</a> - LinkedIn å¼€æºçš„ä¸€ä¸ªä½å»¶è¿Ÿã€å¯é çš„ã€æ”¯æŒäº‹åŠ¡çš„ã€ä¿æŒä¸€è‡´æ€§çš„æ•°æ®å˜æ›´æŠ“å–ç³»ç»Ÿã€‚</li><li><a href="https://github.com/linkedin/kamikaze">LinkedIn Kamikaze</a> - ä¸€ç§å®ç”¨å·¥å…·åŒ…ï¼Œå¯¹ document lists æä¾›ä¸€ç³»åˆ—çš„å®ç°ã€‚</li><li><a href="https://github.com/linkedin/white-elephant">LinkedIn White Elephant</a> - ä¸€ä¸ª Hadoop æ—¥å¿—æ”¶é›†å™¨å’Œå±•ç¤ºå™¨ï¼Œå®ƒæä¾›äº†ç”¨æˆ·è§’åº¦çš„ Hadoop é›†ç¾¤å¯è§†åŒ–ã€‚</li><li><a href="https://www.elastic.co/products/logstash">Logstash</a> - ä¸€ä¸ªå¼€æºçš„æ—¥å¿—æ”¶é›†ç®¡ç†å·¥å…·ï¼Œå¯ä»¥é‡‡é›†æ¥è‡ªä¸åŒæ•°æ®æºçš„æ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œå¤„ç†åè¾“å‡ºåˆ°å¤šç§è¾“å‡ºæºã€‚</li><li><a href="https://github.com/Netflix/suro">Netflix Suro</a> - Netflix å¼€æºçš„ä¸€æ¬¾å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿåœ¨æ•°æ®è¢«å‘é€åˆ°ä¸åŒçš„æ•°æ®å¹³å°ï¼ˆå¦‚ Hadoopã€Elasticsearchï¼‰ä¹‹å‰ï¼Œæ”¶é›†ä¸åŒåº”ç”¨æœåŠ¡å™¨ä¸Šçš„äº‹ä»¶æ•°æ®ã€‚</li><li><a href="https://github.com/pinterest/secor">Pinterest Secor</a> - å®ç° Kafka æ—¥å¿—æŒä¹…æ€§çš„æœåŠ¡</li><li><a href="https://github.com/linkedin/gobblin">Linkedin Gobblin</a> - ä¸€å¥—åˆ†å¸ƒå¼æ•°æ®é›†æˆæ¡†æ¶ï¼Œæ—¨åœ¨ç®€åŒ–å¤§æ•°æ®é›†æˆå·¥ä½œå½“ä¸­çš„å„ç±»å¸¸è§ä»»åŠ¡ï¼Œå…·ä½“åŒ…æ‹¬æ•°æ®æµä¸æ‰¹é‡ç”Ÿæ€ç³»ç»Ÿçš„æå–ã€å¤åˆ¶ã€ç»„ç»‡ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</li><li><a href="https://github.com/skizzehq/skizze">Skizze</a> - ä¸€ç§æ¦‚ç‡æ•°æ®ç»“æ„æœåŠ¡å’Œå­˜å‚¨ã€‚</li><li><a href="https://github.com/streamsets/datacollector">StreamSets Data Collector</a> - ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ IDE æ¥è¿ç»­å¤§æ•°æ®æ‘„å–åŸºç¡€è®¾æ–½ã€‚</li><li><a href="https://github.com/apache/incubator-pulsar">Yahoo Pulsar</a> - ç”± Yahoo å¼€å‘å¹¶å¼€æºçš„ä¸€ä¸ªä¼ä¸šçº§çš„å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿã€‚</li><li><a href="https://www.alooma.com/integrations/mysql">Alooma</a> - å®æ—¶çš„æ•°æ®ç®¡é“æœåŠ¡ï¼Œæ”¯æŒå°† MySQL ç­‰æ•°æ®æºçš„æ•°æ®ç§»åŠ¨åˆ°æ•°æ®ä»“åº“ä¸­ã€‚</li></ul><h1 id="æœåŠ¡ç¼–ç¨‹"><a href="#æœåŠ¡ç¼–ç¨‹" class="headerlink" title="æœåŠ¡ç¼–ç¨‹"></a>æœåŠ¡ç¼–ç¨‹</h1><ul><li><a href="http://akka.io/">Akka Toolkit</a> - åŸºäº Actor æ¨¡å‹ï¼Œæä¾›äº†ä¸€ä¸ªç”¨äºæ„å»ºå¯æ‰©å±•çš„ï¼ˆScalableï¼‰ã€å¼¹æ€§çš„ï¼ˆResilientï¼‰ã€å¿«é€Ÿå“åº”çš„ï¼ˆResponsiveï¼‰åº”ç”¨ç¨‹åºçš„å¹³å°ã€‚</li><li><a href="http://avro.apache.org/">Apache Avro</a> - æ•°æ®åºåˆ—åŒ–ç³»ç»Ÿã€‚</li><li><a href="http://curator.apache.org/">Apache Curator</a> - ä¸º Apache ZooKeeper å¼€å‘çš„ç±»åº“ã€‚</li><li><a href="http://karaf.apache.org/">Apache Karaf</a> - Apache æ——ä¸‹çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªåŸºäº OSGi çš„è¿è¡Œç¯å¢ƒï¼ŒKaraf æä¾›äº†ä¸€ä¸ªè½»é‡çº§çš„ OSGi å®¹å™¨ï¼Œå¯ä»¥ç”¨äºéƒ¨ç½²å„ç§ç»„ä»¶ï¼Œåº”ç”¨ç¨‹åºã€‚</li><li><a href="http://thrift.apache.org//">Apache Thrift</a> - Facebook å¼€æºçš„è·¨è¯­è¨€çš„ RPC é€šä¿¡æ¡†æ¶ã€‚</li><li><a href="http://zookeeper.apache.org/">Apache Zookeeper</a> - ä¸€ä¸ªåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºåè°ƒæœåŠ¡ã€‚</li><li><a href="https://research.google.com/archive/chubby.html">Google Chubby</a> - ä¸€ä¸ªåˆ†å¸ƒå¼é”æœåŠ¡ï¼ŒChubby åº•å±‚ä¸€è‡´æ€§å®ç°å°±æ˜¯ä»¥ Paxos ä¸ºåŸºç¡€çš„</li><li><a href="https://github.com/Hydrospheredata/mist">Hydrosphere Mist</a> - ä¸€ä¸ªå°† Apache Spark åˆ†æä»»åŠ¡å’Œæœºå™¨å­¦ä¹ æ¨¡å‹è½¬æ¢ä¸ºå®æ—¶ã€æ‰¹å¤„ç†æˆ–ååº”æ€§ web æœåŠ¡çš„æœåŠ¡ã€‚</li><li><a href="https://engineering.linkedin.com/data">Linkedin Norbert</a> - é›†ç¾¤ç®¡ç†ç³»ç»Ÿã€‚</li><li><a href="https://github.com/mara/data-integration">Mara</a> - ä¸€ä¸ªè½»é‡çº§çš„è‡ªå®šä¹‰ETLæ¡†æ¶ã€‚</li><li><a href="https://www.open-mpi.org/">OpenMPI</a> - æ¶ˆæ¯ä¼ é€’æ¡†æ¶ã€‚</li><li><a href="https://www.serf.io/">Serf</a> - å»ä¸­å¿ƒåŒ–çš„æœåŠ¡å‘ç°å’Œç¼–æ’è§£å†³æ–¹æ¡ˆã€‚</li><li><a href="https://github.com/spotify/luigi">Spotify Luigi</a> - ç”¨äºæ„å»ºæ‰¹å¤„ç†ä½œä¸šçš„å¤æ‚ç®¡é“çš„ Python åŒ…ã€‚å®ƒå¤„ç†ä¾èµ–é¡¹è§£æã€å·¥ä½œæµç®¡ç†ã€å¯è§†åŒ–ã€å¤„ç†æ•…éšœã€å‘½ä»¤è¡Œé›†æˆç­‰ç­‰ã€‚</li><li><a href="https://github.com/spring-projects/spring-xd">Spring XD</a> - ç”¨äºæ•°æ®æ‘„å–ã€å®æ—¶åˆ†æã€æ‰¹å¤„ç†å’Œæ•°æ®å¯¼å‡ºçš„åˆ†å¸ƒå¼å’Œå¯æ‰©å±•ç³»ç»Ÿã€‚</li><li><a href="https://github.com/twitter/elephant-bird">Twitter Elephant Bird</a> - ç”¨äºå¤„ç† LZOP å‹ç¼©æ•°æ®çš„åº“ã€‚</li><li><a href="https://twitter.github.io/finagle/">Twitter Finagle</a> - JVMçš„å¼‚æ­¥ç½‘ç»œå †æ ˆã€‚</li></ul><h1 id="è°ƒåº¦"><a href="#è°ƒåº¦" class="headerlink" title="è°ƒåº¦"></a>è°ƒåº¦</h1><ul><li><a href="https://github.com/apache/incubator-airflow">Apache Airflow</a> - Airbnb å¼€æºçš„ä¸€ä¸ªç”¨ Python ç¼–å†™çš„å·¥ä½œæµç®¡ç†å¹³å°ã€‚</li><li><a href="http://aurora.apache.org/">Apache Aurora</a> - é•¿æœŸè¿è¡ŒæœåŠ¡å’Œè®¡åˆ’ä½œä¸šçš„ Mesos æ¡†æ¶ã€‚</li><li><a href="http://falcon.apache.org/">Apache Falcon</a> - æ•°æ®ç®¡ç†æ¡†æ¶ã€‚</li><li><a href="http://oozie.apache.org/">Apache Oozie</a> - å·¥ä½œæµä½œä¸šè°ƒåº¦å™¨ã€‚</li><li><a href="https://docs.microsoft.com/en-us/azure/data-factory/data-factory-introduction">Azure Data Factory</a> - å¯å¤§è§„æ¨¡ç®€åŒ– ETL çš„æ··åˆæ•°æ®é›†æˆæœåŠ¡</li><li><a href="http://mesos.github.io/chronos/">Chronos</a> - åˆ†å¸ƒå¼å’Œå®¹é”™è°ƒåº¦å™¨ã€‚</li><li><a href="https://azkaban.github.io/">Linkedin Azkaban</a> - æ‰¹å¤„ç†å·¥ä½œæµä½œä¸šè°ƒåº¦ç¨‹åºã€‚</li><li><a href="https://github.com/ottogroup/schedoscope">Schedoscope</a> - ç”¨äº Hadoop ä½œä¸šçš„æ•æ·è°ƒåº¦ Scala DSLã€‚</li><li><a href="https://github.com/radlab/sparrow">Sparrow</a> - è°ƒåº¦å¹³å°ã€‚</li></ul><h1 id="æœºå™¨å­¦ä¹ "><a href="#æœºå™¨å­¦ä¹ " class="headerlink" title="æœºå™¨å­¦ä¹ "></a>æœºå™¨å­¦ä¹ </h1><ul><li><a href="https://studio.azureml.net/">Azure ML Studio</a> - åŸºäºäº‘çš„ Rã€Python æœºå™¨å­¦ä¹ å¹³å°ã€‚</li><li><a href="https://github.com/harthur/brain">brain</a> - JavaScript ä¸­çš„ç¥ç»ç½‘ç»œã€‚</li><li><a href="https://github.com/OryxProject/oryx">Oryx</a> - å®æ—¶å¤§è§„æ¨¡æœºå™¨å­¦ä¹ ã€‚</li><li><a href="http://www.cascading.org/projects/pattern/">Concurrent Pattern</a> - Cascading ä¸Šçš„æœºå™¨å­¦ä¹ æ¡†æ¶ã€‚</li><li><a href="https://github.com/karpathy/convnetjs">convnetjs</a> - Javascript ä¸­çš„æ·±å…¥å­¦ä¹ ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è®­ç»ƒå·ç§¯ç¥ç»ç½‘ç»œï¼ˆæˆ–æ™®é€šç¥ç»ç½‘ç»œï¼‰ã€‚</li><li><a href="https://github.com/deeplearning4j/DataVec">DataVec</a> - ä¸€ä¸ªç”¨äº Java å’Œ Scala æ·±åº¦å­¦ä¹ çš„çŸ¢é‡åŒ–å’Œæ•°æ®é¢„å¤„ç†åº“ã€‚Deeplearning4jç”Ÿæ€ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚</li><li><a href="https://github.com/deeplearning4j">Deeplearning4j</a> - ç¾å›½ AI åˆ›ä¸šå…¬å¸ Skymind å¼€æºå¹¶ç»´æŠ¤çš„ä¸€ä¸ªåŸºäº Java/JVM çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œå¯ä½¿ç”¨ CPU æˆ– GPU è¿è¡Œã€‚</li><li><a href="https://github.com/danielsdeleo/Decider">Decider</a> - Rubyä¸­çµæ´»ä¸”å¯æ‰©å±•çš„æœºå™¨å­¦ä¹ ã€‚</li><li><a href="http://www.heatonresearch.com/encog/">ENCOG</a> - æ”¯æŒå¤šç§é«˜çº§ç®—æ³•çš„æœºå™¨å­¦ä¹ æ¡†æ¶ï¼Œä»¥åŠæ”¯æŒè§„èŒƒåŒ–å’Œå¤„ç†æ•°æ®çš„ç±»ã€‚</li><li><a href="http://www.etcml.com/">etcML</a> - åœ¨çº¿å…è´¹æ–‡æœ¬åˆ†æå·¥å…·æ˜¯ç”±ç¾å›½çš„æ–¯å¦ç¦å¤§å­¦è®¡ç®—æœºæ•™æˆå¼€å‘çš„åŸºäºæˆç†Ÿçš„æ–‡æœ¬åˆ†æå¼•æ“</li><li><a href="https://github.com/etsy/Conjecture">Etsy Conjecture</a> - Scalding ä¸­å¯æ‰©å±•çš„æœºå™¨å­¦ä¹ ã€‚</li><li><a href="https://github.com/gojek/feast">Feast</a> - ç”¨äºç®¡ç†ã€å‘ç°å’Œè®¿é—®æœºå™¨å­¦ä¹ ç‰¹æ€§çš„ç‰¹æ€§å­˜å‚¨åº“ã€‚Feast ä¸ºæ¨¡å‹è®­ç»ƒå’Œæ¨¡å‹æœåŠ¡æä¾›äº†ä¸€è‡´çš„ç‰¹å¾æ•°æ®è§†å›¾ã€‚</li><li><a href="https://dato.com/products/create/">GraphLab Create</a> - Python ä¸­çš„æœºå™¨å­¦ä¹ å¹³å°ï¼ŒåŒ…å«å¤§é‡ ML å·¥å…·åŒ…ã€æ•°æ®å·¥ç¨‹å’Œéƒ¨ç½²å·¥å…·ã€‚</li><li><a href="https://github.com/h2oai/h2o-3/">H2O</a> - ä½¿ç”¨ Hadoopã€R å’Œ Python è¿›è¡Œç»Ÿè®¡ã€æœºå™¨å­¦ä¹ å’Œæ•°å­¦è¿è¡Œæ—¶ã€‚</li><li><a href="https://github.com/benedekrozemberczki/karateclub">Karate Club</a> - ç”¨äºå›¾å½¢ç»“æ„åŒ–æ•°æ®çš„ Python æ— ç›‘ç£æœºå™¨å­¦ä¹ åº“ã€‚</li><li><a href="https://github.com/fchollet/keras">Keras</a> - ä¸€ä¸ªé«˜å±‚ç¥ç»ç½‘ç»œ APIï¼ŒKeras ç”±çº¯ Python ç¼–å†™è€Œæˆå¹¶åŸº Tensorflowã€Theano ä»¥åŠ CNTK åç«¯ã€‚å— Torch å¯å‘ã€‚</li><li><a href="https://github.com/johnsonc/lambdo">Lambdo</a> - æ˜¯ä¸€ä¸ªå·¥ä½œæµå¼•æ“ï¼Œé€šè¿‡å°†ä¸€ä¸ªåˆ†æç®¡é“ã€ç‰¹å¾å·¥ç¨‹å’Œæœºå™¨å­¦ä¹ ã€æ¨¡å‹è®­ç»ƒå’Œé¢„æµ‹ç»“åˆèµ·æ¥ï¼Œé€šè¿‡ç”¨æˆ·å®šä¹‰ï¼ˆPythonï¼‰å‡½æ•°å®ç°è¡¨å¡«å……å’Œåˆ—è¯„ä¼°ï¼Œå¤§å¤§ç®€åŒ–äº†æ•°æ®å¤„ç†å’Œåˆ†æã€‚</li><li><a href="http://mahout.apache.org/">Mahout</a> - æ˜¯ Apache Software Foundationï¼ˆASFï¼‰æ——ä¸‹çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæä¾›ä¸€äº›å¯æ‰©å±•çš„æœºå™¨å­¦ä¹ é¢†åŸŸç»å…¸ç®—æ³•çš„å®ç°ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘äººå‘˜æ›´åŠ æ–¹ä¾¿å¿«æ·åœ°åˆ›å»ºæ™ºèƒ½åº”ç”¨ç¨‹åºã€‚</li><li><a href="http://www.mlbase.org/">MLbase</a> - æ˜¯Sparkç”Ÿæ€åœˆçš„ä¸€éƒ¨åˆ†ï¼Œä¸“æ³¨äºæœºå™¨å­¦ä¹ ï¼ŒåŒ…å«ä¸‰ä¸ªç»„ä»¶ï¼šMLlibã€MLIã€ML Optimizerã€‚</li><li><a href="https://github.com/nikolaypavlov/MLPNeuralNet">MLPNeuralNet</a> - ä¸€ä¸ªé’ˆå¯¹ iOS å’Œ Mac OS ç³»ç»Ÿçš„å¿«é€Ÿå¤šå±‚æ„ŸçŸ¥ç¥ç»ç½‘ç»œåº“ï¼Œå¯é€šè¿‡å·²è®­ç»ƒçš„ç¥ç»ç½‘ç»œé¢„æµ‹æ–°å®ä¾‹ã€‚</li><li><a href="https://github.com/ml-tooling/ml-workspace">ML Workspace</a> - åŸºäº Web çš„å¤šåˆä¸€ IDEï¼Œä¸“é—¨ç”¨äºæœºå™¨å­¦ä¹ å’Œæ•°æ®ç§‘å­¦ã€‚</li><li><a href="http://moa.cms.waikato.ac.nz">MOA</a> - å®æ—¶è¿›è¡Œå¤§æ•°æ®æµæŒ–æ˜å’Œå¤§è§„æ¨¡æœºå™¨å­¦ä¹ ã€‚</li><li><a href="https://monkeylearn.com/">MonkeyLearn</a> - è®©æ–‡æœ¬æŒ–æ˜å˜å¾—å¾ˆå®¹æ˜“ï¼Œå¯ä»¥ä»æ–‡æœ¬ä¸­æå–å’Œåˆ†ç±»æ•°æ®ã€‚</li><li><a href="https://github.com/deeplearning4j/nd4j">ND4J</a> - JVM çš„çŸ©é˜µåº“ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ Java ä¸­çš„ Numpyã€‚</li><li><a href="https://github.com/numenta/nupic">nupic</a> - ä¸€ä¸ªå®ç°äº†HTMå­¦ä¹ ç®—æ³•çš„æœºå™¨æ™ºèƒ½å¹³å°ã€‚</li><li><a href="http://predictionio.incubator.apache.org/index.html">PredictionIO</a> - é¢å‘å¼€å‘äººå‘˜å’Œæ•°æ®ç§‘å­¦å®¶çš„å¼€æºæœºå™¨å­¦ä¹ æœåŠ¡ï¼Œæ„å»ºåœ¨ Hadoopï¼ŒMahout å’Œ Cascading ä¹‹ä¸Šã€‚</li><li><a href="https://github.com/deeplearning4j/rl4j">RL4J</a> - ä¸€ä¸ªä¸ Deeplearning4j é›†æˆçš„å¼ºåŒ–å­¦ä¹ æ¡†æ¶ã€‚</li><li><a href="http://samoa.incubator.apache.org/">SAMOA</a> - åˆ†å¸ƒå¼æµæ•°æ®æœºå™¨å­¦ä¹ æ¡†æ¶ã€‚</li><li><a href="https://github.com/scikit-learn/scikit-learn">scikit-learn</a> - ä¸“é—¨é¢å‘æœºå™¨å­¦ä¹ çš„ Python å¼€æºæ¡†æ¶ï¼Œå®ç°äº†å„ç§æˆç†Ÿçš„ç®—æ³•ã€‚</li><li><a href="http://spark.apache.org/docs/0.9.0/mllib-guide.html">Spark MLlib</a> - ä½¿ç”¨ Spark å®ç°ä¸€äº›å¸¸è§çš„æœºå™¨å­¦ä¹ ç®—æ³•å’Œå®ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬åˆ†ç±»ã€å›å½’ã€èšç±»ã€ååŒè¿‡æ»¤ã€é™ç»´ä»¥åŠåº•å±‚ä¼˜åŒ–ã€‚</li><li><a href="https://users.soe.ucsc.edu/~niejiazhong/slides/chandra.pdf">Sibyl</a> - è°·æ­Œå¤§å‹æœºå™¨å­¦ä¹ ç³»ç»Ÿã€‚</li><li><a href="https://github.com/tensorflow/tensorflow">TensorFlow</a> - ä¸€ä¸ªé‡‡ç”¨æ•°æ®æµå›¾ï¼ˆdata flow graphsï¼‰ï¼Œç”¨äºæ•°å€¼è®¡ç®—çš„å¼€æºè½¯ä»¶åº“ã€‚</li><li><a href="https://github.com/theano">Theano</a> - è’™ç‰¹åˆ©å°”å¤§å­¦æ”¯æŒçš„ä»¥ Python ä¸ºæ ¸å¿ƒçš„æœºå™¨å­¦ä¹ ç±»åº“ã€‚</li><li><a href="https://github.com/torch">Torch</a> - ä¸€ä¸ªåŸºäº BSD License çš„å¼€æºçš„æœºå™¨å­¦ä¹ çš„æ¡†æ¶ã€‚</li><li><a href="https://github.com/amplab/velox-modelserver">Velox</a> - æœåŠ¡äºæœºå™¨å­¦ä¹ é¢„æµ‹çš„ç³»ç»Ÿã€‚</li><li><a href="https://github.com/JohnLangford/vowpal_wabbit/wiki">Vowpal Wabbit</a> - ç”±å¾®è½¯å’Œé›…è™èµåŠ©çš„å­¦ä¹ ç³»ç»Ÿã€‚</li><li><a href="http://www.cs.waikato.ac.nz/ml/weka/">WEKA</a> - ä¸€å¥—æœºå™¨å­¦ä¹ è½¯ä»¶ã€‚</li><li><a href="https://github.com/BIDData/BIDMach">BidMach</a> - CPU å’Œ GPU åŠ é€Ÿåº“çš„æœºå™¨å­¦ä¹ åº“ã€‚</li></ul><h1 id="åŸºå‡†"><a href="#åŸºå‡†" class="headerlink" title="åŸºå‡†"></a>åŸºå‡†</h1><ul><li><a href="https://issues.apache.org/jira/browse/MAPREDUCE-3561">Apache Hadoop Benchmarking</a> - æµ‹è¯• Hadoop æ€§èƒ½çš„å¾®åŸºå‡†æµ‹è¯•ã€‚</li><li><a href="https://github.com/SWIMProjectUCB/SWIM/wiki">Berkeley SWIM Benchmark</a> - çœŸå®å¤§æ•°æ®å·¥ä½œè´Ÿè½½åŸºå‡†ã€‚</li><li><a href="https://github.com/intel-hadoop/HiBench">Intel HiBench</a> - Hadoop åŸºå‡†å¥—ä»¶ã€‚</li><li><a href="https://issues.apache.org/jira/browse/MAPREDUCE-5116">PUMA Benchmarking</a> - MapReduce åº”ç”¨ç¨‹åºçš„åŸºå‡†æµ‹è¯•å¥—ä»¶ã€‚</li><li><a href="http://yahoohadoop.tumblr.com/post/98294079296/gridmix3-emulating-production-workload-for">Yahoo Gridmix3</a> - æ¥è‡ª Yahoo å·¥ç¨‹å¸ˆå›¢é˜Ÿçš„ Hadoop é›†ç¾¤åŸºå‡†æµ‹è¯•ã€‚</li><li><a href="https://github.com/deeplearning4j/dl4j-benchmark">Deeplearning4j Benchmarks</a> - å¯¹æµè¡Œçš„æ¨¡å‹å’Œé…ç½®è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼Œå¹¶è¾“å‡ºæ€§èƒ½å’Œç‰ˆæœ¬ç»Ÿè®¡ä¿¡æ¯ã€‚</li></ul><h1 id="å®‰å…¨"><a href="#å®‰å…¨" class="headerlink" title="å®‰å…¨"></a>å®‰å…¨</h1><ul><li><a href="http://ranger.apache.org/">Apache Ranger</a> - ä¸€ä¸ªç”¨åœ¨ Hadoop å¹³å°ä¸Šå¹¶æä¾›æ“ä½œã€ç›‘æ§ã€ç®¡ç†ç»¼åˆæ•°æ®å®‰å…¨çš„æ¡†æ¶ã€‚</li><li><a href="http://eagle.apache.org/">Apache Eagle</a> - ç”± eBay å…¬å¸å¼€æºçš„ä¸€ä¸ªè¯†åˆ«å¤§æ•°æ®å¹³å°ä¸Šçš„å®‰å…¨å’Œæ€§èƒ½é—®é¢˜çš„å¼€æºè§£å†³æ–¹æ¡ˆã€‚</li><li><a href="http://knox.apache.org/">Apache Knox Gateway</a> - Hadoop é›†ç¾¤ä¸­ç”¨äºæ•°æ®å¤„ç†çš„ REST API ç½‘å…³ã€‚</li><li><a href="http://incubator.apache.org/projects/sentry.html">Apache Sentry</a> - ä¸º Hadoop é›†ç¾¤ä¸­çš„å…ƒæ•°æ®å’Œæ•°æ®å­˜å‚¨æä¾›é›†ä¸­ã€ç»†ç²’åº¦çš„è®¿é—®æ§åˆ¶ã€‚</li><li><a href="https://github.com/kotobukki/BDA/">BDA</a> - Hadoop å’Œ Spark çš„æ¼æ´æ£€æµ‹å™¨ã€‚</li></ul><h1 id="ç³»ç»Ÿéƒ¨ç½²"><a href="#ç³»ç»Ÿéƒ¨ç½²" class="headerlink" title="ç³»ç»Ÿéƒ¨ç½²"></a>ç³»ç»Ÿéƒ¨ç½²</h1><ul><li><a href="http://ambari.apache.org/">Apache Ambari</a> - ä¸€ä¸ªé›†ä¸­éƒ¨ç½²ã€ç®¡ç†ã€ç›‘æ§Hadoop åˆ†å¸ƒå¼é›†ç¾¤çš„å·¥å…·ã€‚</li><li><a href="http://bigtop.apache.org//">Apache Bigtop</a> - ä¸€ä¸ªé’ˆå¯¹åŸºç¡€è®¾æ–½å·¥ç¨‹å¸ˆå’Œæ•°æ®ç§‘å­¦å®¶çš„å¼€æºé¡¹ç›®ï¼Œæ—¨åœ¨å…¨é¢æ‰“åŒ…ã€æµ‹è¯•å’Œé…ç½®é¢†å…ˆçš„å¼€æºå¤§æ•°æ®ç»„ä»¶ / é¡¹ç›®ï¼ŒåŒ…æ‹¬ä½†ä¸é™äº Hadoopã€HBase å’Œ Spark ã€‚</li><li><a href="http://helix.apache.org/">Apache Helix</a> - é›†ç¾¤ç®¡ç†æ¡†æ¶ã€‚</li><li><a href="http://mesos.apache.org/">Apache Mesos</a> - ä¸€ä¸ªç±»ä¼¼äº YARN çš„é›†ç¾¤ç®¡ç†å™¨ï¼Œæä¾›äº†æœ‰æ•ˆçš„ã€è·¨åˆ†å¸ƒå¼åº”ç”¨æˆ–æ¡†æ¶çš„èµ„æºéš”ç¦»å’Œå…±äº«ï¼Œå¯ä»¥è¿è¡Œ Hadoopã€MPIã€Hypertableã€Sparkã€‚</li><li><a href="https://github.com/apache/incubator-slider">Apache Slider</a> - æ˜¯ä¸€ä¸ª YARN åº”ç”¨ç¨‹åºï¼Œç”¨äºåœ¨ YARN ä¸Šéƒ¨ç½²ç°æœ‰çš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºã€‚</li><li><a href="http://whirr.apache.org/">Apache Whirr</a> - è¿è¡Œäº‘æœåŠ¡çš„ä¸€ç»„ Java ç±»åº“ã€‚</li><li><a href="https://hortonworks.com/hadoop/yarn/">Apache YARN</a> - é›†ç¾¤ç®¡ç†ç³»ç»Ÿã€‚</li><li><a href="http://brooklyncentral.github.io/">Brooklyn</a> - ç®€åŒ–åº”ç”¨ç¨‹åºéƒ¨ç½²å’Œç®¡ç†çš„åº“ã€‚</li><li><a href="http://buildoop.github.io/">Buildoop</a> - ç±»ä¼¼äº Apache BigTopï¼ŒåŸºäº Groovy è¯­è¨€å¼€å‘ã€‚</li><li><a href="http://gethue.com/">Cloudera HUE</a> - ç”¨äºä¸ Hadoop äº¤äº’çš„ Web åº”ç”¨ç¨‹åºã€‚</li><li><a href="http://www.wired.com/2012/08/facebook-prism/">Facebook Prism</a> - å¤šæ•°æ®ä¸­å¿ƒå¤åˆ¶ç³»ç»Ÿã€‚</li><li><a href="https://www.wired.com/2013/03/google-borg-twitter-mesos/all/">Google Borg</a> - Google çš„å†…éƒ¨å¤§å‹é›†ç¾¤ç®¡ç†ç³»ç»Ÿã€‚</li><li><a href="https://www.youtube.com/watch?v=0ZFMlO98Jkc">Google Omega</a> - Google å†…éƒ¨ç¬¬ä¸‰ä»£çš„é›†ç¾¤ç®¡ç†æ¡†æ¶ã€‚</li><li><a href="https://hortonworks.com/blog/introducing-hoya-hbase-on-yarn/">Hortonworks HOYA</a> - å¯ä»¥åœ¨ YARN ä¸Šéƒ¨ç½² HBase é›†ç¾¤çš„åº”ç”¨ç¨‹åºã€‚</li><li><a href="https://kubernetes.io/">Kubernetes</a> - Google å›¢é˜Ÿå‘èµ·å¹¶ç»´æŠ¤çš„åŸºäº Docker çš„å¼€æºå®¹å™¨é›†ç¾¤ç®¡ç†ç³»ç»Ÿã€‚</li><li><a href="https://github.com/mesosphere/marathon">Marathon</a> - ä¸€ä¸ª Mesos æ¡†æ¶ï¼Œèƒ½å¤Ÿæ”¯æŒè¿è¡Œé•¿æœåŠ¡ã€‚</li></ul><h1 id="åº”ç”¨ç¨‹åº"><a href="#åº”ç”¨ç¨‹åº" class="headerlink" title="åº”ç”¨ç¨‹åº"></a>åº”ç”¨ç¨‹åº</h1><ul><li><a href="https://github.com/etsy/411">411</a> - ä¸€ä¸ª Web åº”ç”¨ç¨‹åºï¼Œç”¨äºé€šè¿‡è®¡åˆ’æœç´¢ Elasticsearch è€Œäº§ç”Ÿçš„è­¦æŠ¥ç®¡ç†ã€‚</li><li><a href="https://github.com/adobe-research/spindle">Adobe spindle</a> - ä½¿ç”¨ Scalaã€Spark å’Œ Parquet è¿›è¡Œ web åˆ†æçš„ä¸‹ä¸€ä»£ç³»ç»Ÿã€‚</li><li><a href="http://metron.apache.org/">Apache Metron</a> - ä¸€ä¸ªé›†æˆäº†å„ç§å¼€æºå¤§æ•°æ®æŠ€æœ¯çš„å¹³å°ï¼Œä»¥æä¾›ç”¨äºå®‰å…¨ç›‘è§†å’Œåˆ†æçš„é›†ä¸­å¼å·¥å…·ã€‚</li><li><a href="http://nutch.apache.org/">Apache Nutch</a> - å¼€æº web çˆ¬è™«ç¨‹åº</li><li><a href="http://oodt.apache.org/">Apache OODT</a> - NASA å¼€æºçš„ç”¨äºåšæ•°æ®ç®¡ç†çš„ç³»ç»Ÿã€‚</li><li><a href="https://tika.apache.org/">Apache Tika</a> - ä½¿ç”¨ Java ç¼–å†™çš„å†…å®¹æ£€æµ‹å’Œåˆ†ææ¡†æ¶ã€‚</li><li><a href="https://github.com/salesforce/Argus">Argus</a> - æ—¶åºç›‘æ§æŠ¥è­¦å¹³å°ã€‚</li><li><a href="https://github.com/uber/AthenaX">AthenaX</a> - ä¸€ä¸ªæµåˆ†æå¹³å°ï¼Œå…è®¸ç”¨æˆ·ä½¿ç”¨ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰è¿è¡Œç”Ÿäº§è´¨é‡çš„å¤§è§„æ¨¡æµåˆ†æã€‚</li><li><a href="https://github.com/Netflix/atlas">Atlas</a> - ç”¨äºç®¡ç†ç»´åº¦æ—¶é—´åºåˆ—æ•°æ®çš„ç³»ç»Ÿã€‚</li><li><a href="https://count.ly/">Countly</a> - åŸºäº Node.js å’Œ MongoDB çš„å¼€æºç§»åŠ¨å’Œ web åˆ†æå¹³å°ã€‚</li><li><a href="https://www.dominodatalab.com/">Domino</a> - è¿è¡Œã€æ‰©å±•ã€å…±äº«å’Œéƒ¨ç½²æ¨¡å‹ï¼Œä¸éœ€è¦ä»»ä½•åŸºç¡€è®¾æ–½ã€‚</li><li><a href="http://www.eclipse.org/birt/">Eclipse BIRT</a> - åŸºäº Elasticsearch çš„æŠ¥å‘Šç³»ç»Ÿã€‚</li><li><a href="https://github.com/Yelp/elastalert">ElastAert</a> - ä¸º ES æ‰“é€ çš„æŠ¥è­¦ç›‘æ§å·¥å…·ã€‚</li><li><a href="https://github.com/Codecademy/EventHub">Eventhub</a> - å¼€æºäº‹ä»¶åˆ†æå¹³å°ã€‚</li><li><a href="https://github.com/allegro/hermes">Hermes</a> - æ„å»ºåœ¨ Kafka ä¹‹ä¸Šçš„å¼‚æ­¥æ¶ˆæ¯ä»£ç†ã€‚</li><li><a href="http://hipi.cs.virginia.edu/">HIPI Library</a> - ä½¿ç”¨ Hadoop çš„ MapReduce æ¥æ‰§è¡Œå›¾åƒå¤„ç†ä»»åŠ¡çš„ APIã€‚</li><li><a href="https://www.splunk.com/en_us/download/hunk.html">Hunk</a> - Hadoop çš„åˆ†æå·¥å…·ã€‚</li><li><a href="http://opensource.indeedeng.io/imhotep/">Imhotep</a> - å¤§å‹åˆ†æå¹³å°ã€‚</li><li><a href="https://www.indicative.com/">Indicative</a> - Web å’Œç§»åŠ¨åˆ†æå·¥å…·ï¼Œå…·æœ‰æ•°æ®ä»“åº“ï¼ˆAWSï¼ŒBigQueryï¼‰é›†æˆã€‚</li><li><a href="https://jupyter.org/">Jupyter</a> - åŸºäºç½‘é¡µçš„ç”¨äºäº¤äº’è®¡ç®—çš„åº”ç”¨ç¨‹åºã€‚å…¶å¯è¢«åº”ç”¨äºå…¨è¿‡ç¨‹è®¡ç®—ï¼šå¼€å‘ã€æ–‡æ¡£ç¼–å†™ã€è¿è¡Œä»£ç å’Œå±•ç¤ºç»“æœã€‚</li><li><a href="http://madlib.incubator.apache.org/community/">MADlib</a> - RDBMS çš„æ•°æ®å¤„ç†åº“ï¼Œç”¨äºåˆ†ææ•°æ®ã€‚</li><li><a href="https://github.com/influxdata/kapacitor">Kapacitor</a> - ç”¨äºå¯¹æ—¶é—´åºåˆ—æ•°æ®è¿›è¡Œå¤„ç†ã€ç›‘è§†å’Œè­¦æŠ¥çš„å¼€æºæ¡†æ¶ã€‚</li><li><a href="http://kylin.apache.org/">Kylin</a> - ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åˆ†æå¼•æ“ï¼Œæä¾› Hadoop/Spark ä¹‹ä¸Šçš„ SQL æŸ¥è¯¢æ¥å£åŠå¤šç»´åˆ†æï¼ˆOLAPï¼‰èƒ½åŠ›ä»¥æ”¯æŒè¶…å¤§è§„æ¨¡æ•°æ®ï¼Œæœ€åˆç”± eBay Inc. å¼€å‘å¹¶è´¡çŒ®è‡³å¼€æºç¤¾åŒºï¼Œèƒ½åœ¨äºšç§’å†…æŸ¥è¯¢å·¨å¤§çš„ Hive è¡¨ã€‚</li><li><a href="https://github.com/pivotalsoftware/PivotalR">PivotalR</a> - æ”¯æŒåœ¨ Pivotal HD/HAWQ ä»¥åŠ PostgreSQL ä¸Šè¿è¡Œ Rã€‚</li><li><a href="https://github.com/rakam-io/rakam">Rakam</a> - å¼€æºå®æ—¶è‡ªå®šä¹‰åˆ†æå¹³å°ï¼Œç”± PostgreSQLï¼ŒKinesis å’Œ PrestoDB æä¾›æ”¯æŒã€‚</li><li><a href="https://www.qubole.com/">Qubole</a> - èƒ½å¤Ÿè‡ªåŠ¨æ‰©å±• Hadoop é›†ç¾¤ä»¥åŠå†…ç½®çš„é“¾æ¥å™¨ã€‚</li><li><a href="https://sense.io/">Sense</a> - æ•°æ®ç§‘å­¦å’Œå¤§æ•°æ®åˆ†æçš„äº‘å¹³å°ã€‚</li><li><a href="https://github.com/SnappyDataInc/snappydata">SnappyData</a> - ä¸€ä¸ªç»Ÿä¸€ OLTP + OLAP + æµå¼å†™å…¥ çš„å†…å­˜åˆ†å¸ƒå¼æ•°æ®åº“ã€‚</li><li><a href="https://github.com/snowplow/snowplow">Snowplow</a> - ç”± Hadoopï¼ŒKinesisï¼ŒRedshift å’Œ Postgres æ”¯æŒçš„ä¼ä¸šçº§ Web å’Œäº‹ä»¶åˆ†æã€‚</li><li><a href="http://amplab-extras.github.io/SparkR-pkg/">SparkR</a> - ç”¨äº Spark çš„ R å‰ç«¯ã€‚</li><li><a href="https://www.splunk.com/">Splunk</a> - ä¸€æ¬¾æˆç†Ÿçš„å•†ä¸šåŒ–æ—¥å¿—å¤„ç†åˆ†æäº§å“ã€‚</li><li><a href="https://www.sumologic.com/">Sumo Logic</a> - åŸºäºäº‘çš„æ—¥å¿—å¤„ç†åˆ†æäº§å“ã€‚</li><li><a href="http://www.talend.com/products/big-data/">Talend</a> - YARNã€Hadoopã€HBASEã€Hiveã€HCatalog å’Œ Pig çš„ç»Ÿä¸€å¼€æºç¯å¢ƒã€‚</li><li><a href="https://warp.one//">Warp</a> - å¤§æ•°æ®ç¤ºä¾‹æŸ¥è¯¢å·¥å…·ï¼ˆOS X åº”ç”¨ï¼‰ã€‚</li></ul><h1 id="æœç´¢å¼•æ“å’Œæ¡†æ¶"><a href="#æœç´¢å¼•æ“å’Œæ¡†æ¶" class="headerlink" title="æœç´¢å¼•æ“å’Œæ¡†æ¶"></a>æœç´¢å¼•æ“å’Œæ¡†æ¶</h1><ul><li><a href="http://lucene.apache.org/">Apache Lucene</a> - ä¸€å¥—ç”¨äºå…¨æ–‡æ£€ç´¢å’Œæœç´¢çš„å¼€æ”¾æºç ç¨‹åºåº“ã€‚</li><li><a href="http://lucene.apache.org/solr/">Apache Solr</a> - æ˜¯ Apache Lucene é¡¹ç›®çš„å¼€æºä¼ä¸šæœç´¢å¹³å°ã€‚å…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬å…¨æ–‡æ£€ç´¢ã€å‘½ä¸­æ ‡ç¤ºã€åˆ†é¢æœç´¢ã€åŠ¨æ€èšç±»ã€æ•°æ®åº“é›†æˆï¼Œä»¥åŠå¯Œæ–‡æœ¬ï¼ˆå¦‚Wordã€PDFï¼‰çš„å¤„ç†ã€‚</li><li><a href="https://github.com/strapdata/elassandra">Elassandra</a> - æ˜¯ ElasticSearch çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œç»è¿‡ä¿®æ”¹ï¼Œå¯ä»¥ä½œä¸º Apache Cassandra çš„æ’ä»¶è¿è¡Œï¼Œå…·æœ‰å¯æ‰©å±•å’Œçµæ´»çš„ç‚¹å¯¹ç‚¹æ¶æ„ã€‚</li><li><a href="https://www.elastic.co/">ElasticSearch</a> - ä¸€ä¸ªåŸºäº Lucene åº“çš„æœç´¢å¼•æ“ã€‚å®ƒæä¾›äº†ä¸€ä¸ªåˆ†å¸ƒå¼ã€æ”¯æŒå¤šç§Ÿæˆ·çš„å…¨æ–‡æœç´¢å¼•æ“ï¼Œå…·æœ‰ HTTP Web æ¥å£å’Œæ— æ¨¡å¼ JSON æ–‡æ¡£ã€‚</li><li><a href="https://www.enigma.com/">Enigma.io</a> â€“ å…è´¹å¢å€¼çš„ Web åº”ç”¨ç¨‹åºï¼Œç”¨äºå¯¹ Web ä¸ŠæŠ“å–çš„æµ·é‡æ•°æ®é›†è¿›è¡Œæµè§ˆï¼Œè¿‡æ»¤ï¼Œåˆ†æï¼Œæœç´¢å’Œå¯¼å‡ºã€‚</li><li><a href="https://www.facebook.com/publications/219621248185635/">Facebook Unicorn</a> - ç¤¾äº¤å›¾æœç´¢å¹³å°ã€‚</li><li><a href="https://googleblog.blogspot.it/2010/06/our-new-search-index-caffeine.html">Google Caffeine</a> - ä¸€ä¸ªé«˜æ€§èƒ½ã€å‡ºè‰²çš„ç¼“å­˜ç±»åº“</li><li><a href="https://research.google.com/pubs/pub36726.html">Google Percolator</a> - ç”± Google å…¬å¸å¼€å‘çš„ã€ä¸ºå¤§æ•°æ®é›†ç¾¤è¿›è¡Œå¢é‡å¤„ç†æ›´æ–°çš„ç³»ç»Ÿï¼Œä¸»è¦ç”¨äº google ç½‘é¡µæœç´¢ç´¢å¼•æœåŠ¡ã€‚</li><li><a href="https://blogs.apache.org/hbase/entry/coprocessor_introduction">HBase Coprocessor</a> - HBase çš„åå¤„ç†å™¨ï¼ŒPercolator çš„å®ç°ã€‚</li><li><a href="http://ngdata.github.io/hbase-indexer/">Lily HBase Indexer</a> - ä¸€æ¬¾å¿«é€Ÿã€ç®€å•çš„ HBase çš„å†…å®¹æ£€ç´¢æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ åœ¨ Solr ä¸­å»ºç«‹ HBase çš„æ•°æ®ç´¢å¼•ï¼Œä»è€Œé€šè¿‡ Solr è¿›è¡Œæ•°æ®æ£€ç´¢ã€‚</li><li><a href="http://senseidb.github.io/bobo/">LinkedIn Bobo</a> - å®Œå…¨ç”¨ Java ç¼–å†™çš„ Faceted Search å®ç°ï¼Œæ˜¯ Apache Lucene çš„æ‰©å±•ã€‚</li><li><a href="https://github.com/linkedin/cleo">LinkedIn Cleo</a> - ä¸€ä¸ªçµæ´»çš„è½¯ä»¶åº“ï¼Œç”¨äºå¤„ç†ä¸€äº›é¢„è¾“å…¥å’Œè‡ªåŠ¨å®Œæˆçš„æœç´¢åŠŸèƒ½ã€‚</li><li><a href="https://engineering.linkedin.com/search/did-you-mean-galene">LinkedIn Galene</a> - LinkedIn çš„æœç´¢æ¶æ„ã€‚</li><li><a href="https://github.com/senseidb/zoie">LinkedIn Zoie</a> - ä¸€ä¸ªç”¨ Java ç¼–å†™çš„å®æ—¶æœç´¢/ç´¢å¼•ç³»ç»Ÿã€‚</li><li><a href="http://mg4j.di.unimi.it/">MG4J</a> - MG4Jï¼ˆManaging Gigabytes for Javaï¼‰æ˜¯ä¸€ä¸ªç”¨ Java ç¼–å†™çš„å¤§å‹æ–‡æ¡£é›†åˆçš„å…¨æ–‡æœç´¢å¼•æ“ï¼Œå®ƒæ˜¯é«˜åº¦å¯å®šåˆ¶çš„ï¼Œé«˜æ€§èƒ½çš„ï¼Œå¹¶æä¾›äº†æœ€å…ˆè¿›çš„åŠŸèƒ½å’Œæ–°çš„ç ”ç©¶ç®—æ³•ã€‚</li><li><a href="http://sphinxsearch.com/">Sphinx Search Server</a> - å…¨æ–‡æœç´¢å¼•æ“ã€‚</li><li><a href="http://vespa.ai/">Vespa</a> - åœ¨å¤§å‹æ•°æ®é›†ä¸Šè¿›è¡Œä½å»¶è¿Ÿè®¡ç®—çš„å¼•æ“ã€‚å®ƒå­˜å‚¨å’Œç´¢å¼•æ•°æ®ï¼Œä»¥ä¾¿å¯ä»¥åœ¨æœåŠ¡æ—¶æ‰§è¡Œå¯¹æ•°æ®çš„æŸ¥è¯¢ï¼Œé€‰æ‹©å’Œå¤„ç†</li><li><a href="https://github.com/facebookresearch/faiss">Facebook Faiss</a> - ç”¨äºé«˜æ•ˆç›¸ä¼¼æ€§æœç´¢å’Œå¯†é›†å‘é‡èšç±»çš„åº“ã€‚ å®ƒåŒ…å«çš„ç®—æ³•å¯æœç´¢ä»»æ„å¤§å°çš„å‘é‡é›†ï¼Œæœ€å¤šå¯æœç´¢åˆ°ä¸é€‚åˆ RAM çš„å‘é‡ã€‚ å®ƒè¿˜åŒ…å«ç”¨äºè¯„ä¼°å’Œå‚æ•°è°ƒæ•´çš„æ”¯æŒä»£ç ã€‚Faiss ç”¨ C++ ç¼–å†™ï¼Œå¸¦æœ‰å®Œæ•´çš„ Python/numpy åŒ…è£…å™¨ã€‚</li><li><a href="https://github.com/spotify/annoy">Annoy</a> - å…·æœ‰ Python ç»‘å®šçš„ C++åº“ï¼Œç”¨äºæœç´¢ç©ºé—´ä¸­æ¥è¿‘ç»™å®šæŸ¥è¯¢ç‚¹çš„ç‚¹ã€‚ å®ƒè¿˜ä¼šåˆ›å»ºå¤§å‹çš„åŸºäºæ–‡ä»¶çš„åªè¯»æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„è¢«æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œä»¥ä¾¿è®¸å¤šè¿›ç¨‹å¯ä»¥å…±äº«ç›¸åŒçš„æ•°æ®ã€‚</li></ul><h1 id="MySQL-åˆ†æ”¯å’Œå‘å±•"><a href="#MySQL-åˆ†æ”¯å’Œå‘å±•" class="headerlink" title="MySQL åˆ†æ”¯å’Œå‘å±•"></a>MySQL åˆ†æ”¯å’Œå‘å±•</h1><ul><li><a href="https://aws.amazon.com/rds/">Amazon RDS</a> - AWS çš„ MySQL æ•°æ®åº“ã€‚</li><li><a href="http://www.drizzle.org/">Drizzle</a> - MySQL 6.0çš„å‘å±•ã€‚</li><li><a href="https://cloud.google.com/sql/docs/">Google Cloud SQL</a> - Google äº‘ä¸­çš„ MySQL æ•°æ®åº“ã€‚</li><li><a href="https://mariadb.org/">MariaDB</a> - MySQL çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œé‡‡ç”¨GPLæˆæƒè®¸å¯ã€‚ç›®çš„æ˜¯å®Œå…¨å…¼å®¹ MySQLï¼ŒåŒ…æ‹¬ API å’Œå‘½ä»¤è¡Œã€‚</li><li><a href="https://www.mysql.com/products/cluster/">MySQL Cluster</a> - ä½¿ç”¨ NDB é›†ç¾¤å­˜å‚¨å¼•æ“å®ç° MySQL é›†ç¾¤ã€‚</li><li><a href="https://www.percona.com/software/mysql-database/percona-server">Percona Server</a> - MySQL å¢å¼ºç‰ˆï¼Œå¯ä»¥æ›¿ä»£å®ƒã€‚</li><li><a href="https://github.com/renecannao/proxysql">ProxySQL</a> - MySQL çš„é«˜æ€§èƒ½ä»£ç†ã€‚</li><li><a href="https://www.percona.com/">TokuDB</a> - MySQL å’Œ MariaDB çš„å­˜å‚¨å¼•æ“ã€‚</li><li><a href="http://webscalesql.org/">WebScaleSQL</a> - Facebookã€ Googleã€Twitter å’Œ Linkedin å››å®¶å…¬å¸çš„MySQL å›¢é˜Ÿå‘èµ·çš„ MySQL å¼€æºç»„ç»‡ï¼Œæ—¨åœ¨æ”¹è¿› MySQL åœ¨è§„æ¨¡å’Œæ€§èƒ½ç­‰æ–¹é¢çš„é—®é¢˜ã€‚</li></ul><h1 id="PostgreSQL-åˆ†æ”¯å’Œå‘å±•"><a href="#PostgreSQL-åˆ†æ”¯å’Œå‘å±•" class="headerlink" title="PostgreSQL åˆ†æ”¯å’Œå‘å±•"></a>PostgreSQL åˆ†æ”¯å’Œå‘å±•</h1><ul><li><a href="http://db.cs.yale.edu/hadoopdb/hadoopdb.html">HadoopDB</a> - MapReduce å’Œ DBMS çš„æ··åˆä½“ã€‚</li><li><a href="http://www-01.ibm.com/software/data/netezza/">IBM Netezza</a> - é«˜æ€§èƒ½æ•°æ®ä»“åº“è®¾å¤‡ã€‚</li><li><a href="http://www.postgres-xl.org/">Postgres-XL</a> - å¯ä¼¸ç¼©çš„åŸºäº PostgreSQL çš„å¼€æºæ•°æ®åº“é›†ç¾¤ã€‚</li><li><a href="http://www-users.cs.umn.edu/~sarwat/RecDB/">RecDB</a> - å®Œå…¨åœ¨ PostgreSQL å†…éƒ¨æ„å»ºçš„å¼€æºæ¨èå¼•æ“ã€‚</li><li><a href="http://www.stormdb.com/community/stado">Stado</a> - ä»…é’ˆå¯¹æ•°æ®ä»“åº“å’Œæ•°æ®é›†å¸‚åº”ç”¨ç¨‹åºçš„å¼€æº MPP æ•°æ®åº“ç³»ç»Ÿã€‚</li><li><a href="https://www.scribd.com/doc/3159239/70-Everest-PGCon-RT">Yahoo Everest</a> - ç”± PostgreSQL æ´¾ç”Ÿçš„ PB çº§æ•°æ®åº“ / MPPã€‚</li><li><a href="http://www.timescale.com/">TimescaleDB</a> - é’ˆå¯¹å¿«é€Ÿæ‘„å–å’Œå¤æ‚æŸ¥è¯¢è€Œä¼˜åŒ–çš„å¼€æºæ—¶é—´åºåˆ—æ•°æ®åº“ã€‚</li><li><a href="https://www.pipelinedb.com/">PipelineDB</a> - å¼€æºçš„æµå¼æ•°æ®åº“ï¼ŒåŸºäº PostgreSQL æ•°æ®åº“æ”¹é€ çš„ï¼Œå…è®¸æˆ‘ä»¬é€šè¿‡ SQL çš„æ–¹å¼ï¼Œå¯¹æ•°æ®æµåšæ“ä½œï¼Œå¹¶æŠŠæ“ä½œç»“æœå‚¨å­˜èµ·æ¥ã€‚</li></ul><h1 id="Memcached-åˆ†æ”¯å’Œå‘å±•"><a href="#Memcached-åˆ†æ”¯å’Œå‘å±•" class="headerlink" title="Memcached åˆ†æ”¯å’Œå‘å±•"></a>Memcached åˆ†æ”¯å’Œå‘å±•</h1><ul><li><a href="https://www.facebook.com/notes/facebook-engineering/mcdipper-a-key-value-cache-for-flash-storage/10151347090423920">Facebook McDipper</a> - ç”¨äºé—ªå­˜çš„ key/value ç¼“å­˜ï¼Œè®¾è®¡ç›®çš„åœ¨äºæé«˜é—ªå­˜å­˜å‚¨çš„ä½¿ç”¨æ•ˆç‡ã€‚</li><li><a href="https://www.facebook.com/notes/facebook-engineering/scaling-memcache-at-facebook/10151411410803920">Facebook Memcached</a> - Memcache çš„åˆ†æ”¯ã€‚</li><li><a href="https://github.com/twitter/twemproxy">Twemproxy</a> - ä¸€ä¸ªå¿«é€Ÿã€è½»é‡çº§çš„ memcached å’Œ redis ä»£ç†ã€‚</li><li><a href="https://github.com/twitter/fatcache">Twitter Fatcache</a> - ç”¨äºé—ªå­˜çš„ key/value ç¼“å­˜ã€‚</li><li><a href="https://github.com/twitter/twemcache">Twitter Twemcache</a> - Memcache çš„åˆ†æ”¯ã€‚</li></ul><h1 id="åµŒå…¥å¼æ•°æ®åº“"><a href="#åµŒå…¥å¼æ•°æ®åº“" class="headerlink" title="åµŒå…¥å¼æ•°æ®åº“"></a>åµŒå…¥å¼æ•°æ®åº“</h1><ul><li><a href="http://www.actian.com/products/operational-databases/">Actian PSQL</a> - ç”± Pervasive Software å¼€å‘çš„ç¬¦åˆ ACID çš„ DBMSï¼Œé’ˆå¯¹åµŒå…¥åº”ç”¨ç¨‹åºè¿›è¡Œäº†ä¼˜åŒ–ã€‚</li><li><a href="https://www.oracle.com/database/berkeley-db/index.html">BerkeleyDB</a> - å¯ä¸º key/value æ•°æ®æä¾›é«˜æ€§èƒ½çš„åµŒå…¥å¼æ•°æ®åº“ã€‚</li><li><a href="https://github.com/krestenkrab/hanoidb">HanoiDB</a> - Erlang LSM BTree å­˜å‚¨ã€‚</li><li><a href="https://github.com/google/leveldb">LevelDB</a> - Google å¼€æºçš„æŒä¹…åŒ–KVå•æœºæ•°æ®åº“ï¼Œå…·æœ‰å¾ˆé«˜çš„éšæœºå†™ï¼Œé¡ºåºè¯»/å†™æ€§èƒ½ã€‚</li><li><a href="https://symas.com/mdb/">LMDB</a> - ç”± Symas å¼€å‘çš„åŸºäº Btree-based çš„é«˜æ€§èƒ½ mmap key-value æ•°æ®åº“ã€‚</li><li><a href="http://rocksdb.org/">RocksDB</a> - Facebook å…¬å¸åŸºäº LevelDB å¼€å‘çš„ä¸€æ¬¾å¼€æºåµŒå…¥å¼æ•°æ®åº“å¼•æ“ã€‚</li></ul><h1 id="å•†ä¸šæ™ºèƒ½"><a href="#å•†ä¸šæ™ºèƒ½" class="headerlink" title="å•†ä¸šæ™ºèƒ½"></a>å•†ä¸šæ™ºèƒ½</h1><ul><li><a href="https://www.bimeanalytics.com/?lang=en">BIME Analytics</a> - å•†ä¸šæ™ºèƒ½äº‘å¹³å°ã€‚</li><li><a href="https://github.com/ankane/blazer">Blazer</a> - ä½¿å•†ä¸šæ™ºèƒ½å˜å¾—ç®€å•ã€‚</li><li><a href="https://chartio.com">Chartio</a> - å•†ä¸šæ™ºèƒ½å¹³å°ï¼Œå¯ä»¥å¯è§†åŒ–å’Œæµè§ˆæˆ‘ä»¬çš„æ•°æ®ã€‚</li><li><a href="https://www.datapine.com/">datapine</a> - è‡ªåŠ©å¼å•†ä¸šæ™ºèƒ½å·¥å…·ã€‚</li><li><a href="https://www.gooddata.com/">GoodData</a> - å•†ä¸šæ™ºèƒ½å’Œå¤§æ•°æ®åˆ†æè½¯ä»¶ã€‚</li><li><a href="https://www.jaspersoft.com/">Jaspersoft</a> - å¼ºå¤§çš„å•†ä¸šæ™ºèƒ½å¥—ä»¶ã€‚</li><li><a href="https://www.jedox.com/en/">Jedox Palo</a> - å¯å®šåˆ¶çš„å•†ä¸šæ™ºèƒ½å¹³å°.</li><li><a href="https://jethro.io/">Jethrodata</a> - äº¤äº’å¼å¤§æ•°æ®åˆ†æã€‚</li><li><a href="https://intermix.io/">intermix.io</a> - Amazon Redshift çš„æ€§èƒ½ç›‘æ§</li><li><a href="https://github.com/metabase/metabase">Metabase</a> - ä¸€ä¸ªç®€å•ã€å¼€æºçš„æ–¹å¼ï¼Œé€šè¿‡ç»™å…¬å¸æˆå‘˜æé—®ï¼Œä»å¾—åˆ°çš„æ•°æ®ä¸­è¿›è¡Œåˆ†æã€å­¦ä¹ ã€‚</li><li><a href="http://www.microsoft.com/en-us/server-cloud/solutions/business-intelligence/default.aspx">Microsoft</a> - å•†ä¸šæ™ºèƒ½è½¯ä»¶åŠå¹³å°ã€‚</li><li><a href="https://www.microstrategy.com/">Microstrategy</a> - ç”¨äºå•†ä¸šæ™ºèƒ½ã€ç§»åŠ¨æ™ºèƒ½å’Œç½‘ç»œåº”ç”¨ç¨‹åºçš„è½¯ä»¶å¹³å°ã€‚</li><li><a href="https://numeracy.co/">Numeracy</a> - å¿«é€Ÿï¼Œå¹²å‡€çš„ SQL å®¢æˆ·ç«¯å’Œå•†ä¸šæ™ºèƒ½ã€‚</li><li><a href="http://www.pentaho.com/">Pentaho</a> - å•†ä¸šæ™ºèƒ½å¹³å°ã€‚</li><li><a href="http://www.qlik.com/us/">Qlik</a> - å•†ä¸šæ™ºèƒ½åŠåˆ†æå¹³å°ã€‚</li><li><a href="https://redash.io/">Redash</a> - å¼€æºå•†ä¸šæ™ºèƒ½å¹³å°ï¼Œæ”¯æŒå¤šä¸ªæ•°æ®æºå’Œè®¡åˆ’æŸ¥è¯¢ã€‚</li><li><a href="https://www.meteorite.bi/">Saiku Analytics</a> - å¼€æºåˆ†æå¹³å°ã€‚</li><li><a href="https://www.knowage-suite.com/">Knowage</a> - å¼€æºå•†ä¸šæ™ºèƒ½å¹³å°ã€‚ å‰ <a href="http://www.spagobi.org/">SpagoBi</a>ã€‚</li><li><a href="http://sparklinedata.com/">SparklineData SNAP</a> - åŸºäº Apache Spark çš„å•†ä¸šæ™ºèƒ½å¹³å°ã€‚</li><li><a href="https://www.tableau.com/">Tableau</a> - å•†ä¸šæ™ºèƒ½å¹³å°ã€‚</li><li><a href="https://www.zoomdata.com/">Zoomdata</a> - å¤§æ•°æ®åˆ†æå¹³å°ã€‚</li></ul><h1 id="æ•°æ®å¯è§†åŒ–"><a href="#æ•°æ®å¯è§†åŒ–" class="headerlink" title="æ•°æ®å¯è§†åŒ–"></a>æ•°æ®å¯è§†åŒ–</h1><ul><li><a href="https://github.com/airbnb/airpal">Airpal</a> - PrestoDB çš„ Web UIã€‚</li><li><a href="http://www.anychart.com">AnyChart</a> - ä¸€å¥—çµæ´»çš„ JavaScriptï¼ˆHTML5ï¼‰åº“ï¼Œå¯æ»¡è¶³æ‚¨çš„æ‰€æœ‰æ•°æ®å¯è§†åŒ–éœ€æ±‚ã€‚</li><li><a href="https://github.com/samizdatco/arbor">Arbor</a> - ä¸€ä¸ªä½¿ç”¨ web workers å’Œ jQuery åˆ›å»ºçš„å›¾å¯è§†åŒ–åº“ã€‚</li><li><a href="https://github.com/LucidWorks/banana">Banana</a> - å¯è§†åŒ–å­˜å‚¨åœ¨ Solr ä¸­çš„æ—¥å¿—å’Œå¸¦æ—¶é—´æˆ³çš„æ•°æ®ï¼Œæ˜¯ Kibana çš„ä¸€éƒ¨åˆ†ã€‚</li><li><a href="https://github.com/ufukomer/bloomery">Bloomery</a> - Impala çš„ Web UIã€‚</li><li><a href="http://bokeh.pydata.org/en/latest/">Bokeh</a> - ä¸€ä¸ª Python äº¤äº’å¼å¯è§†åŒ–åº“ï¼Œæ”¯æŒç°ä»£åŒ– Web æµè§ˆå™¨ï¼Œæä¾›éå¸¸å®Œç¾çš„å±•ç¤ºåŠŸèƒ½ã€‚</li><li><a href="http://c3js.org/">C3</a> - åŸºäº D3 çš„å¯é‡ç”¨å›¾è¡¨åº“ã€‚</li><li><a href="https://github.com/CartoDB/cartodb">CartoDB</a> - å¼€æºçš„äº‘ä¸Šåœ°ç†ç©ºé—´æ•°æ®åº“ï¼Œå…è®¸å­˜å‚¨å’Œå¯è§†åŒ– web ä¸Šçš„æ•°æ®ã€‚ä½¿ç”¨ CartoDB å¯ä»¥å¿«é€Ÿåˆ›å»ºåŸºäºåœ°å›¾çš„å¯è§†åŒ–æ•ˆæœã€‚</li><li><a href="http://chartd.co/">chartd</a> - å“åº”å¼ã€è§†ç½‘è†œå…¼å®¹å›¾è¡¨ï¼Œä»…éœ€è¦ä¸€ä¸ª img æ ‡ç­¾ã€‚</li><li><a href="http://www.chartjs.org/">Chart.js</a> - ä¸€å¥—å¼€æºã€ç®€å•ã€å¹²å‡€å¹¶ä¸”æœ‰å¸å¼•åŠ›çš„åŸºäº HTML5 æŠ€æœ¯çš„ JavaScript å›¾è¡¨å·¥å…·ã€‚</li><li><a href="https://github.com/gionkunz/chartist-js">Chartist.js</a> - éå¸¸ç®€å•è€Œä¸”å®ç”¨çš„ JavaScript å‰ç«¯å›¾è¡¨ç”Ÿæˆå™¨ã€‚</li><li><a href="http://square.github.io/crossfilter/">Crossfilter</a> -  ä¸€ä¸ª JavaScript åº“ï¼Œç”¨äºåœ¨ JavaScript ä¸­åˆ¶ä½œäº¤äº’å¼çš„ä»ªè¡¨æ¿ï¼Œå¯ä»¥ä¸ dc.js ã€d3.js ä¸€èµ·å·¥ä½œã€‚</li><li><a href="https://github.com/square/cubism">Cubism</a> - ç”¨äºæ—¶é—´åºåˆ—å¯è§†åŒ–çš„ JavaScript åº“ã€‚</li><li><a href="http://cytoscape.github.io/">Cytoscape</a> - ä¸€ä¸ªä¸“æ³¨äºç½‘ç»œå¯è§†åŒ–å’Œåˆ†æçš„å¼€æºè½¯ä»¶ã€‚</li><li><a href="http://dc-js.github.io/dc.js/">DC.js</a> - ä¸€ä¸ªç”¨äºç½‘é¡µä½œå›¾ã€ç”Ÿæˆäº’åŠ¨å›¾å½¢çš„ JavaScript å‡½æ•°åº“ã€‚</li><li><a href="https://d3js.org/">D3</a> - ç›®å‰æœ€æµè¡Œçš„æ•°æ®å¯è§†åŒ–åº“ä¹‹ä¸€ï¼Œå°å‹ï¼Œçµæ´»ï¼Œé«˜æ•ˆçš„æ•°æ®å¯è§†åŒ–åº“ï¼Œç”¨æ¥åˆ›å»ºå’Œæ“ä½œåŸºäºæ•°æ®çš„äº¤äº’å¼æ–‡æ¡£ã€‚</li><li><a href="https://github.com/CSNW/d3.compose">D3.compose</a> - ç”±å¯é‡å¤ä½¿ç”¨çš„å›¾è¡¨å’Œç»„ä»¶ç»„æˆå¤æ‚çš„ã€æ•°æ®é©±åŠ¨çš„å¯è§†åŒ–æ–‡ä»¶ã€‚</li><li><a href="http://d3plus.org">D3Plus</a> - d3.js çš„ä¸€ç»„ç›¸å½“å¼ºå¤§çš„å¯é‡ç”¨å›¾è¡¨å’Œæ ·å¼ã€‚</li><li><a href="https://devexpress.github.io/devextreme-reactive/react/chart/">DevExtreme React Chart</a> - åŸºäºé«˜æ€§èƒ½æ’ä»¶çš„ React å›¾è¡¨ï¼Œç”¨äº Bootstrap å’Œ Material Designã€‚</li><li><a href="https://github.com/ecomfe/echarts">Echarts</a> - ä¸€æ¬¾ç”±ç™¾åº¦å‰ç«¯æŠ€æœ¯éƒ¨å¼€å‘çš„ï¼ŒåŸºäºJavascript çš„æ•°æ®å¯è§†åŒ–å›¾è¡¨åº“ï¼Œæä¾›ç›´è§‚ï¼Œç”ŸåŠ¨ï¼Œå¯äº¤äº’ï¼Œå¯ä¸ªæ€§åŒ–å®šåˆ¶çš„æ•°æ®å¯è§†åŒ–å›¾è¡¨ã€‚</li><li><a href="https://github.com/HumbleSoftware/envisionjs">Envisionjs</a> - ä¸€ä¸ªåŸºäº HTML5 æŠ€æœ¯çš„æ•°æ®å¯è§†åŒ–åº“ã€‚</li><li><a href="https://metrictools.org/">FnordMetric</a> - ä¸€ä¸ªå¼€æºçš„ Web åº”ç”¨ï¼Œå¯ç”¨äºåˆ›å»ºå®æ—¶ä»ªè¡¨æ¿ï¼Œæ–¹ä¾¿å¯è§†åŒ–ä»»ä½•æ•°æ®ã€‚</li><li><a href="https://frappe.io/charts">Frappe Charts</a> - ä¸€ä¸ªå— Github å¯å‘çš„è½»é‡çº§ SVG å›¾è¡¨åº“ï¼Œå®ƒä¸ä¾èµ–ä»»ä½•ç±»åº“å’Œæ¡†æ¶ã€‚</li><li><a href="https://github.com/Freeboard/freeboard">Freeboard</a> - è®©ç”¨æˆ·åˆ›å»ºä»–ä»¬è‡ªå·±çš„ç”¨æ¥ç›‘æ§ç‰©è”ç½‘éƒ¨ç½²çš„ä»ªè¡¨ç›˜ï¼Œè¯¥ä»£ç åœ¨ GitHubä¸Šå…è´¹æä¾›ï¼Œä½ å¯ä»¥é€šè¿‡è¿™äº›ä»ªè¡¨æ¿å±•ç¤ºè·Ÿè¸ªç©ºæ°”è´¨é‡ã€ä½å®…ç”µå™¨ã€é…¿é…’æƒ…å†µå’Œå®æ—¶ç¯å¢ƒæ¡ä»¶å˜åŒ–ã€‚</li><li><a href="https://github.com/gephi/gephi">Gephi</a> - ä¸€æ¬¾å¼€æºå…è´¹è·¨å¹³å°åŸºäº JVM çš„ç½‘ç»œåˆ†æé¢†åŸŸçš„æ•°æ®å¯è§†åŒ–å¤„ç†è½¯ä»¶ã€‚</li><li><a href="https://developers.google.com/chart/">Google Charts</a> - ä¸€ç§äº¤äº’å¼ Web æœåŠ¡ï¼Œå¯æ ¹æ®ç”¨æˆ·æä¾›çš„æ•°æ®åˆ›å»ºå›¾å½¢å›¾è¡¨ã€‚</li><li><a href="https://grafana.com/">Grafana</a> - ä¸€ä¸ªè·¨å¹³å°çš„å¼€æºçš„åº¦é‡åˆ†æå’Œå¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥é€šè¿‡å°†é‡‡é›†çš„æ•°æ®æŸ¥è¯¢ç„¶åå¯è§†åŒ–çš„å±•ç¤ºï¼Œå¹¶åŠæ—¶é€šçŸ¥ã€‚</li><li><a href="http://graphiteapp.org/">Graphite</a> - ä¸€æ¬¾å¼€æºçš„ç›‘æ§ç»˜å›¾å·¥å…·ã€‚</li><li><a href="https://www.highcharts.com/">Highcharts</a> - å…¼å®¹ IE6+ã€å®Œç¾æ”¯æŒç§»åŠ¨ç«¯ã€å›¾è¡¨ç±»å‹ä¸°å¯Œã€æ–¹ä¾¿å¿«æ·çš„ HTML5 äº¤äº’æ€§å›¾è¡¨åº“ã€‚</li><li><a href="http://ipython.org/">IPython</a> - ä¸€ç§åŸºäº Python çš„äº¤äº’å¼è§£é‡Šå™¨ã€‚ç›¸è¾ƒäºåŸç”Ÿçš„ Python Shellï¼ŒIPython æä¾›äº†æ›´ä¸ºå¼ºå¤§çš„ç¼–è¾‘å’Œäº¤äº’åŠŸèƒ½ã€‚</li><li><a href="https://www.elastic.co/products/kibana">Kibana</a> - Elasticsearch çš„å¼€æºæ•°æ®å¯è§†åŒ–æ’ä»¶ã€‚</li><li><a href="http://lumify.io/">Lumify</a> - å¼€æºå¤§æ•°æ®åˆ†æå¯è§†åŒ–å¹³å°ã€‚</li><li><a href="https://github.com/matplotlib/matplotlib">Matplotlib</a> - Python ç¼–ç¨‹è¯­è¨€åŠå…¶æ•°å€¼æ•°å­¦æ‰©å±•åŒ… Numpy çš„å¯è§†åŒ–æ“ä½œç•Œé¢ã€‚</li><li><a href="https://metricsgraphicsjs.org/">Metricsgraphic.js</a> - ä¸€ä¸ªå»ºç«‹åœ¨ D3 åŸºç¡€ä¸Šï¼Œä¸ºå¯è§†åŒ–å’Œæ—¶é—´åºåˆ—åŒ–çš„æ•°æ®è€Œä¼˜åŒ–çš„åº“ã€‚</li><li><a href="http://nvd3.org/">NVD3</a> - d3.js çš„å›¾è¡¨ç»„ä»¶ã€‚</li><li><a href="https://github.com/benpickles/peity">Peity</a> - æ¸è¿›å¼ SVG æ¡å½¢å›¾ï¼ŒæŠ˜çº¿å›¾å’Œé¥¼å›¾ã€‚</li><li><a href="https://plot.ly/">Plot.ly</a> - Plotly ä¸ºä¸ªäººå’Œåä½œæä¾›åœ¨çº¿å›¾å½¢ï¼Œåˆ†æå’Œç»Ÿè®¡å·¥å…·ï¼Œä»¥åŠ Pythonï¼ŒRï¼ŒMATLABï¼ŒPerlï¼ŒJuliaï¼ŒArduino å’Œ REST çš„ç§‘å­¦å›¾å½¢åº“ã€‚</li><li><a href="https://github.com/plotly/plotly.js">Plotly.js</a> - ä¸€ä¸ªå¼€æºçš„äº¤äº’å¼ JavaScript å›¾å½¢åº“ï¼Œå»ºç«‹åœ¨ d3.js å’Œ webgl ä¹‹ä¸Šï¼Œå¹¶æ”¯æŒ 20 å¤šç§ç±»å‹çš„äº¤äº’å¼å›¾è¡¨ã€‚</li><li><a href="https://github.com/okfn/recline">Recline</a> - ç®€å•è€Œå¼ºå¤§çš„åº“ï¼Œå¯ä»¥ä½¿ç”¨çº¯ Javascript å’Œ HTML æ„å»ºæ•°æ®åº”ç”¨ç¨‹åºã€‚</li><li><a href="https://github.com/getredash/redash">Redash</a> - æŸ¥è¯¢å’Œå¯è§†åŒ–æ•°æ®çš„å¼€æºå¹³å°ã€‚</li><li><a href="http://recharts.org/">ReCharts</a> - ä¸€ä¸ªåŸºäºReactç»„ä»¶çš„å¯ç»„åˆå›¾è¡¨åº“ã€‚</li><li><a href="http://shiny.rstudio.com/">Shiny</a> - R çš„ Web åº”ç”¨ç¨‹åºæ¡†æ¶ã€‚</li><li><a href="https://github.com/jacomyal/sigma.js">Sigma.js</a> - ä¸“é—¨ç”¨äºå›¾å½¢ç»˜åˆ¶çš„ JavaScript åº“ã€‚</li><li><a href="https://github.com/apache/incubator-superset">Superset</a> - ç”± Airbnb å¼€å‘å¹¶å¼€æºä¸€ä¸ªæ•°æ®æ¢ç´¢å’Œå¯è§†åŒ–å¹³å°ï¼Œè®¾è®¡ç”¨æ¥æä¾›ç›´è§‚çš„ï¼Œå¯è§†åŒ–çš„ï¼Œäº¤äº’å¼çš„åˆ†æä½“éªŒã€‚</li><li><a href="https://github.com/vega/vega">Vega</a> - ä¸€ä¸ªå¯è§†åŒ–çš„è¯­æ³•ã€‚</li><li><a href="https://github.com/ZEPL/zeppelin">Zeppelin</a> - ä¸€ä¸ªåŸºäº Web çš„ notebookï¼Œæä¾›äº¤äº’æ•°æ®åˆ†æå’Œå¯è§†åŒ–ã€‚</li><li><a href="https://www.zingchart.com/">Zing Charts</a> - ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ JavaScript å›¾è¡¨ã€‚</li></ul><h1 id="ç‰©è”ç½‘ä¸ä¼ æ„Ÿå™¨"><a href="#ç‰©è”ç½‘ä¸ä¼ æ„Ÿå™¨" class="headerlink" title="ç‰©è”ç½‘ä¸ä¼ æ„Ÿå™¨"></a>ç‰©è”ç½‘ä¸ä¼ æ„Ÿå™¨</h1><ul><li><a href="http://edgent.apache.org/">Apache Edgent (Incubating)</a> - ä¸€ç§ç¼–ç¨‹æ¨¡å‹å’Œå…·æœ‰å¾®å†…æ ¸é£æ ¼çš„è¿è¡Œæ—¶ï¼Œå¯åµŒå…¥åˆ°ç½‘å…³å’Œå°å‹çš„ç‰©è”ç½‘è®¾å¤‡ä¸­ã€‚</li><li><a href="https://azure.microsoft.com/en-us/services/iot-hub/">Azure IoT Hub</a> - æ‰˜ç®¡æœåŠ¡ï¼Œæ”¯æŒ IoT è®¾å¤‡ä¸ Azure ä¹‹é—´çš„åŒå‘é€šä¿¡ã€‚</li><li><a href="https://www.tempoiq.com/">TempoIQ</a> - åŸºäºäº‘è®¡ç®—çš„ä¼ æ„Ÿå™¨åˆ†æã€‚</li><li><a href="http://2lemetry.com/">2lemetry</a> - ç‰©è”ç½‘å¹³å°ã€‚</li><li><a href="https://www.pubnub.com/">Pubnub</a> - æ•°æ®æµç½‘ç»œã€‚</li><li><a href="https://www.thingworx.com/">ThingWorx</a> - å¯ç”¨äºæŸ¥æ‰¾æ•°æ®æ¥æºï¼Œä½¿æ•°æ®ä¸æƒ…å¢ƒç›¸å…³ï¼Œåˆæˆæ•°æ®ï¼ŒåŒæ—¶åè°ƒæµç¨‹ï¼Œä»¥æä¾›å¼ºå¤§çš„ Webã€ç§»åŠ¨å’Œ AR ä½“éªŒçš„å¹³å°ã€‚</li><li><a href="https://ifttt.com/">IFTTT</a> - ä¸€ä¸ªæ–°ç”Ÿçš„ç½‘ç»œæœåŠ¡å¹³å°ï¼Œé€šè¿‡å…¶ä»–ä¸åŒå¹³å°çš„æ¡ä»¶æ¥å†³å®šæ˜¯å¦æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤ã€‚</li><li><a href="https://evrythng.com/">Evrything</a>- ä½¿äº§å“æ™ºèƒ½åŒ–ã€‚</li><li><a href="https://github.com/marty90/netlytics/">NetLytics</a> - ç”¨äºåœ¨Sparkä¸Šå¤„ç†ç½‘ç»œæ•°æ®çš„åˆ†æå¹³å°ã€‚</li></ul><h1 id="é˜…è¯»ææ–™"><a href="#é˜…è¯»ææ–™" class="headerlink" title="é˜…è¯»ææ–™"></a>é˜…è¯»ææ–™</h1><ul><li><a href="https://amplab.cs.berkeley.edu/benchmark/">Big Data Benchmark</a> - Redshiftï¼ŒHiveï¼ŒSharkï¼ŒImpala å’Œ Stiger/Tezçš„åŸºå‡†ã€‚</li><li><a href="https://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis">NoSQL Comparison</a> - Cassandraï¼ŒMongoDBï¼ŒCouchDBï¼ŒRedisï¼ŒRiakï¼ŒHBaseï¼ŒCouchbaseï¼ŒNeo4jï¼ŒHypertableï¼ŒElasticSearchï¼ŒAccumuloï¼ŒVoltDB å’Œ Scalaris çš„æ¯”è¾ƒã€‚</li><li><a href="https://www.datadoghq.com/blog/monitoring-kafka-performance-metrics?ref=awesome">Monitoring Kafka performance</a> - ç›‘è§† Apache Kafka çš„æŒ‡å—ï¼ŒåŒ…æ‹¬åº¦é‡æ”¶é›†çš„æœ¬åœ°æ–¹æ³•ã€‚</li><li><a href="https://www.datadoghq.com/blog/monitor-hadoop-metrics?ref=awesome">Monitoring Hadoop performance</a> - ç›‘è§† Hadoop çš„æŒ‡å—ï¼Œæ¦‚è¿°äº† Hadoop ä½“ç³»ç»“æ„ä»¥åŠåº¦é‡æ”¶é›†çš„æœ¬æœºæ–¹æ³•ã€‚</li><li><a href="https://www.datadoghq.com/blog/how-to-monitor-cassandra-performance-metrics/?ref=awesome">Monitoring Cassandra performance</a> - ç›‘æ§ Cassandra çš„æŒ‡å—ï¼ŒåŒ…æ‹¬åº¦é‡æ”¶é›†çš„æœ¬åœ°æ–¹æ³•ã€‚</li></ul><h1 id="è®ºæ–‡"><a href="#è®ºæ–‡" class="headerlink" title="è®ºæ–‡"></a>è®ºæ–‡</h1><h2 id="2015-2016"><a href="#2015-2016" class="headerlink" title="2015 - 2016"></a>2015 - 2016</h2><ul><li><a href="http://www.vldb.org/pvldb/vol8/p1804-ching.pdf">2015</a> - <strong>Facebook</strong> - One Trillion Edges: Graph Processing at Facebook-Scale.</li></ul><h2 id="2013-2014"><a href="#2013-2014" class="headerlink" title="2013 - 2014"></a>2013 - 2014</h2><ul><li><a href="http://infolab.stanford.edu/~ullman/mmds/book.pdf">2014</a> - <strong>Stanford</strong> - Mining of Massive Datasets.</li><li><a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2013/03/eurosys13-paper83.pdf">2013</a> - <strong>AMPLab</strong> - Presto: Distributed Machine Learning and Graph Processing with Sparse Matrices.</li><li><a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2013/01/dmx1.pdf">2013</a> - <strong>AMPLab</strong> - MLbase: A Distributed Machine-learning System.</li><li><a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2013/02/shark_sigmod2013.pdf">2013</a> - <strong>AMPLab</strong> - Shark: SQL and Rich Analytics at Scale.</li><li><a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2013/05/grades-graphx_with_fonts.pdf">2013</a> - <strong>AMPLab</strong> - GraphX: A Resilient Distributed Graph System on Spark.</li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/40671.pdf">2013</a> - <strong>Google</strong> - HyperLogLog in Practice: Algorithmic Engineering of a State of The Art Cardinality Estimation Algorithm.</li><li><a href="http://research.microsoft.com/pubs/200169/now-vldb.pdf">2013</a> - <strong>Microsoft</strong> - Scalable Progressive Analytics on Big Data in the Cloud.</li><li><a href="http://static.druid.io/docs/druid.pdf">2013</a> - <strong>Metamarkets</strong> - Druid: A Real-time Analytical Data Store.</li><li><a href="http://db.disi.unitn.eu/pages/VLDBProgram/pdf/industry/p764-rae.pdf">2013</a> - <strong>Google</strong> - Online, Asynchronous Schema Change in F1.</li><li><a href="http://static.googleusercontent.com/media/research.google.com/en/us/pubs/archive/41344.pdf">2013</a> - <strong>Google</strong> - F1: A Distributed SQL Database That Scales.</li><li><a href="http://db.disi.unitn.eu/pages/VLDBProgram/pdf/industry/p734-akidau.pdf">2013</a> - <strong>Google</strong> - MillWheel: Fault-Tolerant Stream Processing at Internet Scale.</li><li><a href="http://db.disi.unitn.eu/pages/VLDBProgram/pdf/industry/p767-wiener.pdf">2013</a> - <strong>Facebook</strong> - Scuba: Diving into Data at Facebook.</li><li><a href="http://db.disi.unitn.eu/pages/VLDBProgram/pdf/industry/p871-curtiss.pdf">2013</a> - <strong>Facebook</strong> - Unicorn: A System for Searching the Social Graph.</li><li><a href="https://www.usenix.org/system/files/conference/nsdi13/nsdi13-final170_update.pdf">2013</a> - <strong>Facebook</strong> - Scaling Memcache at Facebook.</li></ul><h2 id="2011-2012"><a href="#2011-2012" class="headerlink" title="2011 - 2012"></a>2011 - 2012</h2><ul><li><a href="http://vldb.org/pvldb/vol5/p1771_georgelee_vldb2012.pdf">2012</a> - <strong>Twitter</strong> - The Unified Logging Infrastructurefor Data Analytics at Twitter.</li><li><a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2013/04/blinkdb_vldb12_demo.pdf">2012</a> - <strong>AMPLab</strong> - Blink and Itâ€™s Done: Interactive Queries on Very Large Data.</li><li><a href="https://www.usenix.org/system/files/login/articles/zaharia.pdf">2012</a> - <strong>AMPLab</strong> - Fast and Interactive Analytics over Hadoop Data with Spark.</li><li><a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2012/03/mod482-xin1.pdf">2012</a> - <strong>AMPLab</strong> - Shark: Fast Data Analysis Using Coarse-grained Distributed Memory.</li><li><a href="https://www.usenix.org/legacy/event/nsdi11/tech/full_papers/Bolosky.pdf">2012</a> - <strong>Microsoft</strong> - Paxos Replicated State Machines as the Basis of a High-Performance Data Store.</li><li><a href="http://research.microsoft.com/pubs/178045/ppaoxs-paper29.pdf">2012</a> - <strong>Microsoft</strong> - Paxos Made Parallel.</li><li><a href="https://arxiv.org/pdf/1203.5485.pdf">2012</a> - <strong>AMPLab</strong> - BlinkDB: Queries with Bounded Errors and Bounded Response Times on Very Large Data.</li><li><a href="http://vldb.org/pvldb/vol5/p1436_alexanderhall_vldb2012.pdf">2012</a> - <strong>Google</strong> - Processing a trillion cells per mouse click.</li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//archive/spanner-osdi2012.pdf">2012</a> - <strong>Google</strong> - Spanner: Googleâ€™s Globally-Distributed Database.</li><li><a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2011/06/euro118-ananthanarayanan.pdf">2011</a> - <strong>AMPLab</strong> - Scarlett: Coping with Skewed Popularity Content in MapReduce Clusters.</li><li><a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2011/06/Mesos-A-Platform-for-Fine-Grained-Resource-Sharing-in-the-Data-Center.pdf">2011</a> - <strong>AMPLab</strong> - Mesos: A Platform for Fine-Grained Resource Sharing in the Data Center.</li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/36971.pdf">2011</a> - <strong>Google</strong> - Megastore: Providing Scalable, Highly Available Storage for Interactive Services.</li></ul><h2 id="2001-2010"><a href="#2001-2010" class="headerlink" title="2001 - 2010"></a>2001 - 2010</h2><ul><li><a href="https://www.usenix.org/legacy/event/osdi10/tech/full_papers/Beaver.pdf">2010</a> - <strong>Facebook</strong> - Finding a needle in Haystack: Facebookâ€™s photo storage.</li><li><a href="https://amplab.cs.berkeley.edu/wp-content/uploads/2011/06/Spark-Cluster-Computing-with-Working-Sets.pdf">2010</a> - <strong>AMPLab</strong> - Spark: Cluster Computing with Working Sets.</li><li><a href="http://kowshik.github.io/JPregel/pregel_paper.pdf">2010</a> - <strong>Google</strong> - Pregel: A System for Large-Scale Graph Processing.</li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/36726.pdf">2010</a> - <strong>Google</strong> - Large-scale Incremental Processing Using Distributed Transactions and Notiï¬cations base of Percolator and Caffeine.</li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/36632.pdf">2010</a> - <strong>Google</strong> - Dremel: Interactive Analysis of Web-Scale Datasets.</li><li><a href="http://leoneu.github.io/">2010</a> - <strong>Yahoo</strong> - S4: Distributed Stream Computing Platform.</li><li><a href="http://www.cs.umd.edu/~abadi/papers/hadoopdb.pdf">2009</a> - HadoopDB: An Architectural Hybrid of MapReduce and DBMS Technologies for Analytical Workloads.    </li><li><a href="https://cwiki.apache.org/confluence/download/attachments/120729877/chukwa_cca08.pdf?version=1&amp;modificationDate=1562667399000&amp;api=v2">2008</a> - <strong>AMPLab</strong> - Chukwa: A large-scale monitoring system.</li><li><a href="http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/decandia07dynamo.pdf">2007</a> - <strong>Amazon</strong> - Dynamo: Amazonâ€™s Highly Available Key-value Store.</li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//archive/chubby-osdi06.pdf">2006</a> - <strong>Google</strong> - The Chubby lock service for loosely-coupled distributed systems.</li><li><a href="http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//archive/bigtable-osdi06.pdf">2006</a> - <strong>Google</strong> - Bigtable: A Distributed Storage System for Structured Data.</li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//archive/mapreduce-osdi04.pdf">2004</a> - <strong>Google</strong> - MapReduce: Simplied Data Processing on Large Clusters.</li><li><a href="http://static.googleusercontent.com/media/research.google.com/en//archive/gfs-sosp2003.pdf">2003</a> - <strong>Google</strong> - The Google File System.</li></ul><h1 id="è§†é¢‘"><a href="#è§†é¢‘" class="headerlink" title="è§†é¢‘"></a>è§†é¢‘</h1><ul><li><a href="https://www.manning.com/livevideo/spark-in-motion">Spark in Motion</a> - Spark in Motion æ•™ä½ å¦‚ä½•ä½¿ç”¨ Spark è¿›è¡Œæ‰¹å¤„ç†å’Œæµæ•°æ®åˆ†æã€‚</li><li><a href="https://www.manning.com/livevideo/machine-learning-data-science-and-deep-learning-with-python">Machine Learning, Data Science and Deep Learning with Python </a> - LiveVideo æ•™ç¨‹æ¶µç›–äº†æœºå™¨å­¦ä¹ ï¼ŒTensorflowï¼Œäººå·¥æ™ºèƒ½å’Œç¥ç»ç½‘ç»œã€‚</li></ul><h1 id="ä¹¦ç±"><a href="#ä¹¦ç±" class="headerlink" title="ä¹¦ç±"></a>ä¹¦ç±</h1><h2 id="æ•°æ®æµ"><a href="#æ•°æ®æµ" class="headerlink" title="æ•°æ®æµ"></a>æ•°æ®æµ</h2><ul><li><a href="https://www.manning.com/books/data-science-at-scale-with-python-and-dask">Data Science at Scale with Python and Dask</a> - ä½¿ç”¨ Python å’Œ Dask è¿›è¡Œå¤§è§„æ¨¡æ•°æ®ç§‘å­¦æ•™å­¦ï¼Œå°†æ•™æ‚¨å¦‚ä½•æ„å»ºå¯å¤„ç†å¤§é‡æ•°æ®çš„åˆ†å¸ƒå¼æ•°æ®é¡¹ç›®ã€‚</li><li><a href="https://www.manning.com/books/streaming-data">Streaming Data</a> - ä»‹ç»äº†æµæ•°æ®å’Œå®æ—¶æ•°æ®ç³»ç»Ÿçš„æ¦‚å¿µå’Œè¦æ±‚ã€‚</li><li><a href="https://www.manning.com/books/storm-applied">Storm Applied</a> - å°† Apache Storm ç”¨äºä¸å¤„ç†å’Œåˆ†æå®æ—¶æ•°æ®æµç›¸å…³çš„å®é™…ä»»åŠ¡çš„å®ç”¨æŒ‡å—ã€‚</li><li><a href="http://www.cambridge.org/us/academic/subjects/engineering/communications-and-signal-processing/fundamentals-stream-processing-application-design-systems-and-analytics">Fundamentals of Stream Processing: Application Design, Systems, and Analytics</a> - è¯¥æŒ‡å—ç»“åˆäº†æµå¤„ç†ä¸­çš„åŸºæœ¬æ„å»ºå—å’Œæ–°å…´ç ”ç©¶ï¼Œéå¸¸é€‚åˆåº”ç”¨ç¨‹åºè®¾è®¡äººå‘˜ï¼Œç³»ç»Ÿæ„å»ºäººå‘˜ï¼Œåˆ†æå¼€å‘äººå‘˜ä»¥åŠè¯¥é¢†åŸŸçš„å­¦ç”Ÿå’Œç ”ç©¶äººå‘˜ã€‚</li><li><a href="http://www.springer.com/us/book/9780387710020">Stream Data Processing: A Quality of Service Perspective</a> - æå‡ºäº†é€‚ç”¨äºæµå’Œå¤æ‚äº‹ä»¶å¤„ç†çš„æ–°èŒƒä¾‹ã€‚</li><li><a href="https://www.manning.com/books/event-streams-in-action">Unified Log Processing</a> - ç»Ÿä¸€æ—¥å¿—å¤„ç†æ˜¯åœ¨ä¼ä¸šä¸­å®æ–½äº‹ä»¶æµï¼ˆKafka æˆ– Kinesisï¼‰çš„ç»Ÿä¸€æ—¥å¿—çš„å®ç”¨æŒ‡å—</li><li><a href="https://www.manning.com/books/kafka-streams-in-action">Kafka Streams in Action</a> - åœ¨ Kafka å¹³å°çš„æ•°æ®ä¸Šå®ç°æµå¤„ç†æ‰€éœ€çš„ä¸€åˆ‡çŸ¥è¯†ï¼Œå¯ä»¥é›†ä¸­ç²¾åŠ›ä»æ•°æ®ä¸­è·å–æ›´å¤šä¿¡æ¯ï¼Œè€Œæ— éœ€èŠ±è´¹æ—¶é—´æˆ–ç²¾åŠ›ã€‚</li><li><a href="https://www.manning.com/books/big-data">Big Data</a> - æ•™æ‚¨ä½¿ç”¨ä¸€ç§æ¶æ„æ¥æ„å»ºå¤§æ•°æ®ç³»ç»Ÿï¼Œè¯¥æ¶æ„åˆ©ç”¨äº†ç¾¤é›†ç¡¬ä»¶ä»¥åŠä¸“é—¨ç”¨äºæ•è·å’Œåˆ†æ Web è§„æ¨¡æ•°æ®çš„æ–°å·¥å…·ã€‚</li><li><a href="https://www.manning.com/books/spark-in-action">Spark in Action</a> &amp; <a href="https://www.manning.com/books/spark-in-action-second-edition">Spark in Action 2nd Ed.</a> - æ•™æ‚¨ä½¿ç”¨Sparkæœ‰æ•ˆå¤„ç†æ‰¹å¤„ç†å’Œæµå¼æ•°æ®æ‰€éœ€çš„ç†è®ºå’ŒæŠ€èƒ½ã€‚ å®Œå…¨æ›´æ–°ä¸ºSpark 2.0ã€‚</li><li><a href="https://www.manning.com/books/kafka-in-action">Kafka in Action</a> - å¿«é€Ÿä»‹ç»ä¸Kafkaåˆä½œçš„å„ä¸ªæ–¹é¢çš„ä¿¡æ¯ï¼Œæ‚¨éœ€è¦çœŸæ­£åˆ©ç”¨å®ƒçš„å¥½å¤„ã€‚</li><li><a href="https://www.manning.com/books/fusion-in-action">Fusion in Action</a> - æ•™æ‚¨å»ºç«‹åŠŸèƒ½é½å…¨çš„æ•°æ®åˆ†æç®¡é“ï¼ŒåŒ…æ‹¬æ–‡æ¡£å’Œæ•°æ®æœç´¢ä»¥åŠåˆ†å¸ƒå¼æ•°æ®é›†ç¾¤ã€‚</li><li><a href="https://www.manning.com/books/reactive-data-handling">Reactive Data Handling</a> - Reactive Data Handling æ˜¯ç”± Manuel Bernhardt é€‰æ‹©çš„äº”ä¸ªç²¾é€‰ç« èŠ‚çš„é›†åˆï¼Œå‘æ‚¨ä»‹ç»æ„å»ºèƒ½å¤Ÿå¤„ç†å¤§æ•°æ®è´Ÿè½½å®æ—¶å¤„ç†çš„ååº”å¼åº”ç”¨ç¨‹åºã€‚</li></ul><h2 id="åˆ†å¸ƒå¼ç³»ç»Ÿ"><a href="#åˆ†å¸ƒå¼ç³»ç»Ÿ" class="headerlink" title="åˆ†å¸ƒå¼ç³»ç»Ÿ"></a>åˆ†å¸ƒå¼ç³»ç»Ÿ</h2><ul><li><a href="http://book.mixu.net/distsys/">Distributed Systems for fun and profit</a> - åˆ†å¸ƒå¼ç³»ç»Ÿç†è®ºã€‚ åŒ…æ‹¬æœ‰å…³æ—¶é—´å’Œé¡ºåºï¼Œå¤åˆ¶å’Œä¸å¯èƒ½ç»“æœçš„éƒ¨åˆ†ã€‚</li></ul><h2 id="å›¾è®º"><a href="#å›¾è®º" class="headerlink" title="å›¾è®º"></a>å›¾è®º</h2><ul><li><a href="https://www.manning.com/books/graph-powered-machine-learning">Graph-Powered Machine Learning</a> - Alessandro Negro ç»“åˆå›¾è®ºå’Œæ¨¡å‹æ¥æ”¹å–„æœºå™¨å­¦ä¹ é¡¹ç›®ã€‚</li></ul><h2 id="æ•°æ®å¯è§†åŒ–-1"><a href="#æ•°æ®å¯è§†åŒ–-1" class="headerlink" title="æ•°æ®å¯è§†åŒ–"></a>æ•°æ®å¯è§†åŒ–</h2><ul><li><a href="https://www.youtube.com/watch?v=5Zg-C8AAIGg">The beauty of data visualization</a></li><li><a href="https://www.youtube.com/watch?v=R-oiKt7bUU8">Designing Data Visualizations with Noah Iliinsky</a></li><li><a href="https://www.youtube.com/watch?v=jbkSRLYSojo">Hans Rosling&#39;s 200 Countries, 200 Years, 4 Minutes</a></li><li><a href="https://www.youtube.com/watch?v=qTEchen97rQ">Ice Bucket Challenge Data Visualization</a></li></ul><h1 id="å…¶ä»–æ¸…å•"><a href="#å…¶ä»–æ¸…å•" class="headerlink" title="å…¶ä»–æ¸…å•"></a>å…¶ä»–æ¸…å•</h1><ul><li>Other awesome lists <a href="https://github.com/bayandin/awesome-awesomeness">awesome-awesomeness</a>.</li><li>Even more lists <a href="https://github.com/sindresorhus/awesome">awesome</a>.</li><li>Another list? <a href="https://github.com/jnv/lists">list</a>.</li><li>WTF! <a href="https://github.com/t3chnoboy/awesome-awesome-awesome">awesome-awesome-awesome</a>.</li><li>Analytics <a href="https://github.com/onurakpolat/awesome-analytics">awesome-analytics</a>.</li><li>Public Datasets <a href="https://github.com/awesomedata/awesome-public-datasets">awesome-public-datasets</a>.</li><li>Graph Classification <a href="https://github.com/benedekrozemberczki/awesome-graph-classification">awesome-graph-classification</a>.</li><li>Network Embedding <a href="https://github.com/chihming/awesome-network-embedding">awesome-network-embedding</a>.</li><li>Community Detection <a href="https://github.com/benedekrozemberczki/awesome-community-detection">awesome-community-detection</a>.</li><li>Decision Tree Papers <a href="https://github.com/benedekrozemberczki/awesome-decision-tree-papers">awesome-decision-tree-papers</a>.</li><li>Fraud Detection Papers <a href="https://github.com/benedekrozemberczki/awesome-fraud-detection-papers">awesome-fraud-detection-papers</a>.</li><li>Gradient Boosting Papers <a href="https://github.com/benedekrozemberczki/awesome-gradient-boosting-papers">awesome-gradient-boosting-papers</a>.</li><li>Monte Carlo Tree Search Papers <a href="https://github.com/benedekrozemberczki/awesome-monte-carlo-tree-search-papers">awesome-monte-carlo-tree-search-papers</a>.</li><li>Kafka <a href="https://github.com/monksy/awesome-kafka">awesome-kafka</a>.</li></ul>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ‘¨â€ğŸ’»å¤§æ•°æ® </tag>
            
            <tag> ğŸ“‘æ–‡æ¡£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Hexo ä¸­æ’å…¥ ECharts åŠ¨æ€å›¾è¡¨</title>
      <link href="post/6f565d8c.html"/>
      <url>post/6f565d8c.html</url>
      
        <content type="html"><![CDATA[<h1 id="ECharts-ç®€ä»‹"><a href="#ECharts-ç®€ä»‹" class="headerlink" title="ECharts ç®€ä»‹"></a>ECharts ç®€ä»‹</h1><p><a href="https://echarts.apache.org/">ECharts</a> æ˜¯ä¸€ä¸ªä½¿ç”¨ JavaScript å®ç°çš„å¼€æºå¯è§†åŒ–åº“ï¼Œå¯ä»¥æµç•…çš„è¿è¡Œåœ¨ PC å’Œç§»åŠ¨è®¾å¤‡ä¸Šï¼Œå…¼å®¹å½“å‰ç»å¤§éƒ¨åˆ†æµè§ˆå™¨ï¼ˆChromeï¼ŒFirefoxï¼ŒSafariï¼ŒIE8/9/10/11ç­‰ï¼‰ï¼Œåº•å±‚ä¾èµ–çŸ¢é‡å›¾å½¢åº“ ZRenderï¼Œæä¾›ç›´è§‚ï¼Œäº¤äº’ä¸°å¯Œï¼Œå¯é«˜åº¦ä¸ªæ€§åŒ–å®šåˆ¶çš„æ•°æ®å¯è§†åŒ–å›¾è¡¨ã€‚å®ƒæä¾›äº†å¸¸è§„çš„æŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€æ•£ç‚¹å›¾ã€é¥¼å›¾ã€Kçº¿å›¾ï¼Œç”¨äºç»Ÿè®¡çš„ç›’å½¢å›¾ï¼Œç”¨äºåœ°ç†æ•°æ®å¯è§†åŒ–çš„åœ°å›¾ã€çƒ­åŠ›å›¾ã€çº¿å›¾ï¼Œç”¨äºå…³ç³»æ•°æ®å¯è§†åŒ–çš„å…³ç³»å›¾ã€treemapã€æ—­æ—¥å›¾ï¼Œå¤šç»´æ•°æ®å¯è§†åŒ–çš„å¹³è¡Œåæ ‡ï¼Œè¿˜æœ‰ç”¨äº BI çš„æ¼æ–—å›¾ï¼Œä»ªè¡¨ç›˜ï¼Œå¹¶ä¸”æ”¯æŒå›¾ä¸å›¾ä¹‹é—´çš„æ··æ­ã€‚</p><h1 id="Hexo-ä¸­çš„-ECharts"><a href="#Hexo-ä¸­çš„-ECharts" class="headerlink" title="Hexo ä¸­çš„ ECharts"></a>Hexo ä¸­çš„ ECharts</h1><p>ECharts çš„ Hexo æ’ä»¶ç›®å‰æœ‰ä¸‰ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«ä¸ºï¼š</p><ul><li><a href="https://github.com/zhoulvjun/hexo-tag-echarts">hexo-tag-echarts</a><ul><li>éœ€è¦æ‰‹åŠ¨å¼•å…¥ ECharts.js</li></ul></li><li><a href="https://github.com/kchen0x/hexo-tag-echarts3">hexo-tag-echarts3</a><ul><li>è‡ªåŠ¨å¼•å…¥ <a href="https://cdn.bootcss.com/echarts/3.8.0/echarts.min.js">https://cdn.bootcss.com/echarts/3.8.0/echarts.min.js</a></li></ul></li><li><a href="https://github.com/gyx138/hexo-tag-echarts4">hexo-tag-echarts4</a><ul><li>è‡ªåŠ¨å¼•å…¥ <a href="https://cdn.bootcss.com/echarts/4.3.0/echarts.min.js">https://cdn.bootcss.com/echarts/4.3.0/echarts.min.js</a></li></ul></li></ul><p>æœ¬æ–‡ä½¿ç”¨çš„æ˜¯ Hexo çš„ ECharts æ’ä»¶ <a href="https://github.com/zhoulvjun/hexo-tag-echarts">hexo-tag-echarts</a>ï¼Œåªéœ€è¦åœ¨ Hexo æ–‡æ¡£ä¸­å¼•å…¥ä¸€æ¬¡ ECharts.js å°±å¯ä»¥æ¸²æŸ“æ•´ä¸ªé¡µé¢çš„å›¾è¡¨äº†ã€‚æ’ä»¶çš„å®‰è£…å’Œä½¿ç”¨éå¸¸çš„ç®€å•ï¼Œåªéœ€è¦è¿›å…¥åšå®¢ç›®å½•ï¼Œç„¶åæ‰“å¼€å‘½ä»¤è¡Œï¼Œç”¨ <code>npm</code> å®‰è£…ä¸€ä¸‹ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">npm install hexo-tag-echarts --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä¹‹ååœ¨æ–‡ç« å†…ä½¿ç”¨ <code>echarts</code> çš„ <code>tag</code> å°±å¯ä»¥äº†</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%' %&#125;\\TODO echarts option goes here&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>å…¶ä¸­ <code>echarts</code> æ˜¯æ ‡ç­¾åï¼Œ<code>endecharts</code> æ˜¯ç»“æŸæ ‡ç­¾ï¼Œä¸éœ€è¦æ›´æ”¹ï¼Œ<code>400</code> æ˜¯å›¾è¡¨å®¹å™¨çš„é«˜åº¦ï¼Œé»˜è®¤æ˜¯æŒ‰æ­£å¸¸æ¯”ä¾‹ç¼©æ”¾çš„ï¼Œ<code>&#39;90%&#39;</code> æ˜¯å›¾è¡¨å®¹å™¨çš„ç›¸å¯¹å®½åº¦ï¼Œé»˜è®¤æ˜¯ <code>100%</code>ã€‚åœ¨æ ‡ç­¾ä¹‹é—´çš„éƒ¨åˆ†ï¼Œéœ€è¦è‡ªå·±å¡«å……çš„å›¾è¡¨æ•°æ®å’Œå±æ€§ï¼Œæ›´å¤šè‡ªå®šä¹‰å±æ€§å¯ä»¥æŸ¥çœ‹ <a href="https://echarts.apache.org/zh/option.html#title">ECharts é…ç½®é¡¹æ–‡æ¡£</a>ã€‚</p><h1 id="å›¾è¡¨ç¤ºä¾‹"><a href="#å›¾è¡¨ç¤ºä¾‹" class="headerlink" title="å›¾è¡¨ç¤ºä¾‹"></a>å›¾è¡¨ç¤ºä¾‹</h1><p>ç°åœ¨ä½ å·²ç»åŸºæœ¬å­¦ä¼šäº†åœ¨ Hexo ä¸­æ’å…¥ ECharts å›¾è¡¨äº†ï¼Œä¸‹é¢å†å±•ç¤ºä¸€äº›åŸºæœ¬çš„å›¾è¡¨ï¼Œæ›´å¤šç‚«é…·çš„å›¾è¡¨å¯ä»¥è‡ªå·±å»å°è¯•ä¸€ä¸‹ã€‚</p><h2 id="æŠ˜çº¿å›¾"><a href="#æŠ˜çº¿å›¾" class="headerlink" title="æŠ˜çº¿å›¾"></a>æŠ˜çº¿å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%' %&#125;&#123;    tooltip: &#123;        trigger: 'axis'    &#125;,    xAxis: &#123;        type: 'category',        data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']    &#125;,    yAxis: &#123;        type: 'value'    &#125;,    series: [&#123;        data: [820, 932, 901, 934, 1290, 1330, 1320],        type: 'line'    &#125;]&#125;;&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="echarts1991" style="width: 90%;height: 400px;margin: 0 auto"></div><script type="text/javascript">        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        var myChart = echarts.init(document.getElementById('echarts1991'));        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = {    tooltip: {        trigger: 'axis'    },    xAxis: {        type: 'category',        data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']    },    yAxis: {        type: 'value'    },    series: [{        data: [820, 932, 901, 934, 1290, 1330, 1320],        type: 'line'    }]};        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚        myChart.setOption(option);</script></p><h2 id="æŸ±çŠ¶å›¾ã€æ¡å½¢å›¾"><a href="#æŸ±çŠ¶å›¾ã€æ¡å½¢å›¾" class="headerlink" title="æŸ±çŠ¶å›¾ã€æ¡å½¢å›¾"></a>æŸ±çŠ¶å›¾ã€æ¡å½¢å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%' %&#125;&#123;    tooltip: &#123;&#125;,    xAxis: &#123;        type: 'category',        data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']    &#125;,    yAxis: &#123;        type: 'value'    &#125;,    series: [&#123;        data: [120, 200, 150, 80, 70, 110, 130],        type: 'bar'    &#125;]&#125;;&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="echarts8088" style="width: 90%;height: 400px;margin: 0 auto"></div><script type="text/javascript">        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        var myChart = echarts.init(document.getElementById('echarts8088'));        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = {    tooltip: {},    xAxis: {        type: 'category',        data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']    },    yAxis: {        type: 'value'    },    series: [{        data: [120, 200, 150, 80, 70, 110, 130],        type: 'bar'    }]};        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚        myChart.setOption(option);</script></p><h2 id="ç¯å½¢å›¾ã€é¥¼çŠ¶å›¾"><a href="#ç¯å½¢å›¾ã€é¥¼çŠ¶å›¾" class="headerlink" title="ç¯å½¢å›¾ã€é¥¼çŠ¶å›¾"></a>ç¯å½¢å›¾ã€é¥¼çŠ¶å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%' %&#125;&#123;    tooltip: &#123;        trigger: 'item',        formatter: '&#123;a&#125; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>&#123;b&#125;: &#123;c&#125; (&#123;d&#125;%)'    &#125;,    legend: &#123;        orient: 'vertical',        left: 10,        data: ['ç›´æ¥è®¿é—®', 'é‚®ä»¶è¥é”€', 'è”ç›Ÿå¹¿å‘Š', 'è§†é¢‘å¹¿å‘Š', 'æœç´¢å¼•æ“']    &#125;,    series: [        &#123;            name: 'è®¿é—®æ¥æº',            type: 'pie',            radius: ['50%', '70%'],            avoidLabelOverlap: false,            label: &#123;                show: false,                position: 'center'            &#125;,            emphasis: &#123;                label: &#123;                    show: true,                    fontSize: '30',                    fontWeight: 'bold'                &#125;            &#125;,            labelLine: &#123;                show: false            &#125;,            data: [                &#123;value: 335, name: 'ç›´æ¥è®¿é—®'&#125;,                &#123;value: 310, name: 'é‚®ä»¶è¥é”€'&#125;,                &#123;value: 234, name: 'è”ç›Ÿå¹¿å‘Š'&#125;,                &#123;value: 135, name: 'è§†é¢‘å¹¿å‘Š'&#125;,                &#123;value: 1548, name: 'æœç´¢å¼•æ“'&#125;            ]        &#125;    ]&#125;;&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="echarts6407" style="width: 90%;height: 400px;margin: 0 auto"></div><script type="text/javascript">        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        var myChart = echarts.init(document.getElementById('echarts6407'));        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = {    tooltip: {        trigger: 'item',        formatter: '{a} <br/>{b}: {c} ({d}%)'    },    legend: {        orient: 'vertical',        left: 10,        data: ['ç›´æ¥è®¿é—®', 'é‚®ä»¶è¥é”€', 'è”ç›Ÿå¹¿å‘Š', 'è§†é¢‘å¹¿å‘Š', 'æœç´¢å¼•æ“']    },    series: [        {            name: 'è®¿é—®æ¥æº',            type: 'pie',            radius: ['50%', '70%'],            avoidLabelOverlap: false,            label: {                show: false,                position: 'center'            },            emphasis: {                label: {                    show: true,                    fontSize: '30',                    fontWeight: 'bold'                }            },            labelLine: {                show: false            },            data: [                {value: 335, name: 'ç›´æ¥è®¿é—®'},                {value: 310, name: 'é‚®ä»¶è¥é”€'},                {value: 234, name: 'è”ç›Ÿå¹¿å‘Š'},                {value: 135, name: 'è§†é¢‘å¹¿å‘Š'},                {value: 1548, name: 'æœç´¢å¼•æ“'}            ]        }    ]};        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚        myChart.setOption(option);</script></p><h2 id="æ•£ç‚¹å›¾"><a href="#æ•£ç‚¹å›¾" class="headerlink" title="æ•£ç‚¹å›¾"></a>æ•£ç‚¹å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%' %&#125;&#123;    tooltip: &#123;&#125;,    xAxis: &#123;&#125;,    yAxis: &#123;&#125;,    series: [&#123;        symbolSize: 20,        data: [            [10.0, 8.04],            [8.0, 6.95],            [13.0, 7.58],            [9.0, 8.81],            [11.0, 8.33],            [14.0, 9.96],            [6.0, 7.24],            [4.0, 4.26],            [12.0, 10.84],            [7.0, 4.82],            [5.0, 5.68]        ],        type: 'scatter'    &#125;]&#125;;&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š<div id="echarts623" style="width: 90%;height: 400px;margin: 0 auto"></div><script type="text/javascript">        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        var myChart = echarts.init(document.getElementById('echarts623'));        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = {    tooltip: {},    xAxis: {},    yAxis: {},    series: [{        symbolSize: 20,        data: [            [10.0, 8.04],            [8.0, 6.95],            [13.0, 7.58],            [9.0, 8.81],            [11.0, 8.33],            [14.0, 9.96],            [6.0, 7.24],            [4.0, 4.26],            [12.0, 10.84],            [7.0, 4.82],            [5.0, 5.68]        ],        type: 'scatter'    }]};        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚        myChart.setOption(option);</script></p><h2 id="é›·è¾¾å›¾"><a href="#é›·è¾¾å›¾" class="headerlink" title="é›·è¾¾å›¾"></a>é›·è¾¾å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%' %&#125;&#123;    tooltip: &#123;&#125;,    legend: &#123;        data: ['é¢„ç®—åˆ†é…ï¼ˆAllocated Budgetï¼‰', 'å®é™…å¼€é”€ï¼ˆActual Spendingï¼‰']    &#125;,    radar: &#123;        name: &#123;            textStyle: &#123;                color: '#fff',                backgroundColor: '#999',                borderRadius: 3,                padding: [3, 5]            &#125;        &#125;,        indicator: [            &#123; name: 'é”€å”®ï¼ˆsalesï¼‰', max: 6500&#125;,            &#123; name: 'ç®¡ç†ï¼ˆAdministrationï¼‰', max: 16000&#125;,            &#123; name: 'ä¿¡æ¯æŠ€æœ¯ï¼ˆInformation Techologyï¼‰', max: 30000&#125;,            &#123; name: 'å®¢æœï¼ˆCustomer Supportï¼‰', max: 38000&#125;,            &#123; name: 'ç ”å‘ï¼ˆDevelopmentï¼‰', max: 52000&#125;,            &#123; name: 'å¸‚åœºï¼ˆMarketingï¼‰', max: 25000&#125;        ]    &#125;,    series: [&#123;        name: 'é¢„ç®— vs å¼€é”€ï¼ˆBudget vs spendingï¼‰',        type: 'radar',        data: [            &#123;                value: [4300, 10000, 28000, 35000, 50000, 19000],                name: 'é¢„ç®—åˆ†é…ï¼ˆAllocated Budgetï¼‰'            &#125;,            &#123;                value: [5000, 14000, 28000, 31000, 42000, 21000],                name: 'å®é™…å¼€é”€ï¼ˆActual Spendingï¼‰'            &#125;        ]    &#125;]&#125;;&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="echarts3143" style="width: 90%;height: 400px;margin: 0 auto"></div><script type="text/javascript">        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        var myChart = echarts.init(document.getElementById('echarts3143'));        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = {    tooltip: {},    legend: {        data: ['é¢„ç®—åˆ†é…ï¼ˆAllocated Budgetï¼‰', 'å®é™…å¼€é”€ï¼ˆActual Spendingï¼‰']    },    radar: {        name: {            textStyle: {                color: '#fff',                backgroundColor: '#999',                borderRadius: 3,                padding: [3, 5]            }        },        indicator: [            { name: 'é”€å”®ï¼ˆsalesï¼‰', max: 6500},            { name: 'ç®¡ç†ï¼ˆAdministrationï¼‰', max: 16000},            { name: 'ä¿¡æ¯æŠ€æœ¯ï¼ˆInformation Techologyï¼‰', max: 30000},            { name: 'å®¢æœï¼ˆCustomer Supportï¼‰', max: 38000},            { name: 'ç ”å‘ï¼ˆDevelopmentï¼‰', max: 52000},            { name: 'å¸‚åœºï¼ˆMarketingï¼‰', max: 25000}        ]    },    series: [{        name: 'é¢„ç®— vs å¼€é”€ï¼ˆBudget vs spendingï¼‰',        type: 'radar',        data: [            {                value: [4300, 10000, 28000, 35000, 50000, 19000],                name: 'é¢„ç®—åˆ†é…ï¼ˆAllocated Budgetï¼‰'            },            {                value: [5000, 14000, 28000, 31000, 42000, 21000],                name: 'å®é™…å¼€é”€ï¼ˆActual Spendingï¼‰'            }        ]    }]};        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚        myChart.setOption(option);</script></p><h2 id="å…³ç³»å›¾"><a href="#å…³ç³»å›¾" class="headerlink" title="å…³ç³»å›¾"></a>å…³ç³»å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%' %&#125;&#123;    tooltip: &#123;&#125;,    series: [        &#123;            type: 'graph',            layout: 'none',            symbolSize: 50,            label: &#123;                show: true            &#125;,            edgeSymbol: ['circle', 'arrow'],            edgeSymbolSize: [4, 10],            edgeLabel: &#123;                fontSize: 20            &#125;,            data: [&#123;                name: 'èŠ‚ç‚¹1',                x: 300,                y: 300            &#125;, &#123;                name: 'èŠ‚ç‚¹2',                x: 800,                y: 300            &#125;, &#123;                name: 'èŠ‚ç‚¹3',                x: 550,                y: 100            &#125;, &#123;                name: 'èŠ‚ç‚¹4',                x: 550,                y: 500            &#125;],            links: [&#123;                source: 0,                target: 1,                symbolSize: [5, 20],                label: &#123;                    show: true                &#125;,                lineStyle: &#123;                    width: 5,                    curveness: 0.2                &#125;            &#125;, &#123;                source: 'èŠ‚ç‚¹2',                target: 'èŠ‚ç‚¹1',                label: &#123;                    show: true                &#125;,                lineStyle: &#123;                    curveness: 0.2                &#125;            &#125;, &#123;                source: 'èŠ‚ç‚¹1',                target: 'èŠ‚ç‚¹3'            &#125;, &#123;                source: 'èŠ‚ç‚¹2',                target: 'èŠ‚ç‚¹3'            &#125;, &#123;                source: 'èŠ‚ç‚¹2',                target: 'èŠ‚ç‚¹4'            &#125;, &#123;                source: 'èŠ‚ç‚¹1',                target: 'èŠ‚ç‚¹4'            &#125;],            lineStyle: &#123;                opacity: 0.9,                width: 2,                curveness: 0            &#125;        &#125;    ]&#125;;&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="echarts3846" style="width: 90%;height: 400px;margin: 0 auto"></div><script type="text/javascript">        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        var myChart = echarts.init(document.getElementById('echarts3846'));        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = {    tooltip: {},    series: [        {            type: 'graph',            layout: 'none',            symbolSize: 50,            label: {                show: true            },            edgeSymbol: ['circle', 'arrow'],            edgeSymbolSize: [4, 10],            edgeLabel: {                fontSize: 20            },            data: [{                name: 'èŠ‚ç‚¹1',                x: 300,                y: 300            }, {                name: 'èŠ‚ç‚¹2',                x: 800,                y: 300            }, {                name: 'èŠ‚ç‚¹3',                x: 550,                y: 100            }, {                name: 'èŠ‚ç‚¹4',                x: 550,                y: 500            }],            links: [{                source: 0,                target: 1,                symbolSize: [5, 20],                label: {                    show: true                },                lineStyle: {                    width: 5,                    curveness: 0.2                }            }, {                source: 'èŠ‚ç‚¹2',                target: 'èŠ‚ç‚¹1',                label: {                    show: true                },                lineStyle: {                    curveness: 0.2                }            }, {                source: 'èŠ‚ç‚¹1',                target: 'èŠ‚ç‚¹3'            }, {                source: 'èŠ‚ç‚¹2',                target: 'èŠ‚ç‚¹3'            }, {                source: 'èŠ‚ç‚¹2',                target: 'èŠ‚ç‚¹4'            }, {                source: 'èŠ‚ç‚¹1',                target: 'èŠ‚ç‚¹4'            }],            lineStyle: {                opacity: 0.9,                width: 2,                curveness: 0            }        }    ]};        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚        myChart.setOption(option);</script></p><h2 id="çŸ©å½¢æ ‘å›¾"><a href="#çŸ©å½¢æ ‘å›¾" class="headerlink" title="çŸ©å½¢æ ‘å›¾"></a>çŸ©å½¢æ ‘å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%' %&#125;&#123;    tooltip: &#123;&#125;,    series: [&#123;        type: 'treemap',        data: [&#123;            name: 'nodeA',            // First tree            value: 10,            children: [&#123;                name: 'nodeAa',       // First leaf of first tree                value: 4            &#125;, &#123;                name: 'nodeAb',       // Second leaf of first tree                value: 6            &#125;]        &#125;, &#123;            name: 'nodeB',            // Second tree            value: 20,            children: [&#123;                name: 'nodeBa',       // Son of first tree                value: 20,                children: [&#123;                    name: 'nodeBa1',  // Granson of first tree                    value: 20                &#125;]            &#125;]        &#125;]    &#125;]&#125;;&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="echarts8699" style="width: 90%;height: 400px;margin: 0 auto"></div><script type="text/javascript">        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        var myChart = echarts.init(document.getElementById('echarts8699'));        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = {    tooltip: {},    series: [{        type: 'treemap',        data: [{            name: 'nodeA',            // First tree            value: 10,            children: [{                name: 'nodeAa',       // First leaf of first tree                value: 4            }, {                name: 'nodeAb',       // Second leaf of first tree                value: 6            }]        }, {            name: 'nodeB',            // Second tree            value: 20,            children: [{                name: 'nodeBa',       // Son of first tree                value: 20,                children: [{                    name: 'nodeBa1',  // Granson of first tree                    value: 20                }]            }]        }]    }]};        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚        myChart.setOption(option);</script></p><h2 id="æ—­æ—¥å›¾"><a href="#æ—­æ—¥å›¾" class="headerlink" title="æ—­æ—¥å›¾"></a>æ—­æ—¥å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%' %&#125;&#123;    tooltip: &#123;&#125;,    series: &#123;        type: 'sunburst',        data: [&#123;            name: 'Grandpa',            children: [&#123;                name: 'Uncle Leo',                value: 15,                children: [&#123;                    name: 'Cousin Jack',                    value: 2                &#125;, &#123;                    name: 'Cousin Mary',                    value: 5,                    children: [&#123;                        name: 'Jackson',                        value: 2                    &#125;]                &#125;, &#123;                    name: 'Cousin Ben',                    value: 4                &#125;]            &#125;, &#123;                name: 'Father',                value: 10,                children: [&#123;                    name: 'Me',                    value: 5                &#125;, &#123;                    name: 'Brother Peter',                    value: 1                &#125;]            &#125;]        &#125;, &#123;            name: 'Nancy',            children: [&#123;                name: 'Uncle Nike',                children: [&#123;                    name: 'Cousin Betty',                    value: 1                &#125;, &#123;                    name: 'Cousin Jenny',                    value: 2                &#125;]            &#125;]        &#125;],        radius: [0, '90%'],        label: &#123;            rotate: 'radial'        &#125;    &#125;&#125;;&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="echarts1893" style="width: 90%;height: 700px;margin: 0 auto"></div><script type="text/javascript">        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        var myChart = echarts.init(document.getElementById('echarts1893'));        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = {    tooltip: {},    series: {        type: 'sunburst',        data: [{            name: 'Grandpa',            children: [{                name: 'Uncle Leo',                value: 15,                children: [{                    name: 'Cousin Jack',                    value: 2                }, {                    name: 'Cousin Mary',                    value: 5,                    children: [{                        name: 'Jackson',                        value: 2                    }]                }, {                    name: 'Cousin Ben',                    value: 4                }]            }, {                name: 'Father',                value: 10,                children: [{                    name: 'Me',                    value: 5                }, {                    name: 'Brother Peter',                    value: 1                }]            }]        }, {            name: 'Nancy',            children: [{                name: 'Uncle Nike',                children: [{                    name: 'Cousin Betty',                    value: 1                }, {                    name: 'Cousin Jenny',                    value: 2                }]            }]        }],        radius: [0, '90%'],        label: {            rotate: 'radial'        }    }};        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚        myChart.setOption(option);</script></p><h2 id="å¹³è¡Œåæ ‡ç³»"><a href="#å¹³è¡Œåæ ‡ç³»" class="headerlink" title="å¹³è¡Œåæ ‡ç³»"></a>å¹³è¡Œåæ ‡ç³»</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%' %&#125;&#123;    parallelAxis: [        &#123;dim: 0, name: 'Price'&#125;,        &#123;dim: 1, name: 'Net Weight'&#125;,        &#123;dim: 2, name: 'Amount'&#125;,        &#123;            dim: 3,            name: 'Score',            type: 'category',            data: ['Excellent', 'Good', 'OK', 'Bad']        &#125;    ],    series: &#123;        type: 'parallel',        lineStyle: &#123;            width: 4        &#125;,        data: [            [12.99, 100, 82, 'Good'],            [9.99, 80, 77, 'OK'],            [20, 120, 60, 'Excellent']        ]    &#125;&#125;;&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="echarts9965" style="width: 90%;height: 400px;margin: 0 auto"></div><script type="text/javascript">        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        var myChart = echarts.init(document.getElementById('echarts9965'));        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = {    parallelAxis: [        {dim: 0, name: 'Price'},        {dim: 1, name: 'Net Weight'},        {dim: 2, name: 'Amount'},        {            dim: 3,            name: 'Score',            type: 'category',            data: ['Excellent', 'Good', 'OK', 'Bad']        }    ],    series: {        type: 'parallel',        lineStyle: {            width: 4        },        data: [            [12.99, 100, 82, 'Good'],            [9.99, 80, 77, 'OK'],            [20, 120, 60, 'Excellent']        ]    }};        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚        myChart.setOption(option);</script></p><h2 id="æ¡‘åŸºå›¾"><a href="#æ¡‘åŸºå›¾" class="headerlink" title="æ¡‘åŸºå›¾"></a>æ¡‘åŸºå›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%'&#125;&#123;    tooltip: &#123;&#125;,    series: &#123;        type: 'sankey',        layout: 'none',        focusNodeAdjacency: 'allEdges',        data: [&#123;            name: 'a'        &#125;, &#123;            name: 'b'        &#125;, &#123;            name: 'a1'        &#125;, &#123;            name: 'a2'        &#125;, &#123;            name: 'b1'        &#125;, &#123;            name: 'c'        &#125;],        links: [&#123;            source: 'a',            target: 'a1',            value: 5        &#125;, &#123;            source: 'a',            target: 'a2',            value: 3        &#125;, &#123;            source: 'b',            target: 'b1',            value: 8        &#125;, &#123;            source: 'a',            target: 'b1',            value: 3        &#125;, &#123;            source: 'b1',            target: 'a1',            value: 1        &#125;, &#123;            source: 'b1',            target: 'c',            value: 2        &#125;]    &#125;&#125;;&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="echarts4261" style="width: 90%;height: 400px;margin: 0 auto"></div><script type="text/javascript">        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        var myChart = echarts.init(document.getElementById('echarts4261'));        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = {    tooltip: {},    series: {        type: 'sankey',        layout: 'none',        focusNodeAdjacency: 'allEdges',        data: [{            name: 'a'        }, {            name: 'b'        }, {            name: 'a1'        }, {            name: 'a2'        }, {            name: 'b1'        }, {            name: 'c'        }],        links: [{            source: 'a',            target: 'a1',            value: 5        }, {            source: 'a',            target: 'a2',            value: 3        }, {            source: 'b',            target: 'b1',            value: 8        }, {            source: 'a',            target: 'b1',            value: 3        }, {            source: 'b1',            target: 'a1',            value: 1        }, {            source: 'b1',            target: 'c',            value: 2        }]    }};        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚        myChart.setOption(option);</script></p><h2 id="æ¼æ–—å›¾"><a href="#æ¼æ–—å›¾" class="headerlink" title="æ¼æ–—å›¾"></a>æ¼æ–—å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%'&#125;&#123;    tooltip: &#123;        trigger: 'item',        formatter: "&#123;a&#125; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>&#123;b&#125; : &#123;c&#125;%"    &#125;,    legend: &#123;        data: ['å±•ç°','ç‚¹å‡»','è®¿é—®','å’¨è¯¢','è®¢å•']    &#125;,    series: [        &#123;            name:'æ¼æ–—å›¾',            type:'funnel',            left: '10%',            top: 60,            //x2: 80,            bottom: 60,            width: '80%',            // height: &#123;totalHeight&#125; - y - y2,            min: 0,            max: 100,            minSize: '0%',            maxSize: '100%',            sort: 'descending',            gap: 2,            label: &#123;                show: true,                position: 'inside'            &#125;,            labelLine: &#123;                length: 10,                lineStyle: &#123;                    width: 1,                    type: 'solid'                &#125;            &#125;,            itemStyle: &#123;                borderColor: '#fff',                borderWidth: 1            &#125;,            data: [                &#123;value: 60, name: 'è®¿é—®'&#125;,                &#123;value: 40, name: 'å’¨è¯¢'&#125;,                &#123;value: 20, name: 'è®¢å•'&#125;,                &#123;value: 80, name: 'ç‚¹å‡»'&#125;,                &#123;value: 100, name: 'å±•ç°'&#125;            ]        &#125;    ]&#125;;&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="echarts1" style="width: 90%;height: 400px;margin: 0 auto"></div><script type="text/javascript">        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        var myChart = echarts.init(document.getElementById('echarts1'));        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = {    tooltip: {        trigger: 'item',        formatter: "{a} <br/>{b} : {c}%"    },    legend: {        data: ['å±•ç°','ç‚¹å‡»','è®¿é—®','å’¨è¯¢','è®¢å•']    },    series: [        {            name:'æ¼æ–—å›¾',            type:'funnel',            left: '10%',            top: 60,            //x2: 80,            bottom: 60,            width: '80%',            // height: {totalHeight} - y - y2,            min: 0,            max: 100,            minSize: '0%',            maxSize: '100%',            sort: 'descending',            gap: 2,            label: {                show: true,                position: 'inside'            },            labelLine: {                length: 10,                lineStyle: {                    width: 1,                    type: 'solid'                }            },            itemStyle: {                borderColor: '#fff',                borderWidth: 1            },            data: [                {value: 60, name: 'è®¿é—®'},                {value: 40, name: 'å’¨è¯¢'},                {value: 20, name: 'è®¢å•'},                {value: 80, name: 'ç‚¹å‡»'},                {value: 100, name: 'å±•ç°'}            ]        }    ]};        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚        myChart.setOption(option);</script></p><h2 id="ä»ªè¡¨ç›˜"><a href="#ä»ªè¡¨ç›˜" class="headerlink" title="ä»ªè¡¨ç›˜"></a>ä»ªè¡¨ç›˜</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% echarts 400 '90%'&#125;&#123;    tooltip: &#123;        formatter: '&#123;a&#125; <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>&#123;b&#125; : &#123;c&#125;%'    &#125;,    series: [        &#123;            name: 'ä¸šåŠ¡æŒ‡æ ‡',            type: 'gauge',            detail: &#123;formatter: '&#123;value&#125;%'&#125;,            data: [&#123;value: 88.88, name: 'å®Œæˆç‡'&#125;]        &#125;    ]&#125;;&#123;% endecharts %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="echarts1220" style="width: 90%;height: 400px;margin: 0 auto"></div><script type="text/javascript">        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹        var myChart = echarts.init(document.getElementById('echarts1220'));        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®        var option = {    tooltip: {        formatter: '{a} <br/>{b} : {c}%'    },    series: [        {            name: 'ä¸šåŠ¡æŒ‡æ ‡',            type: 'gauge',            detail: {formatter: '{value}%'},            data: [{value: 88.88, name: 'å®Œæˆç‡'}]        }    ]};        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚        myChart.setOption(option);</script></p><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œå¯ä»¥æŸ¥çœ‹ ECharts çš„ <a href="https://echarts.apache.org/en/index.html">è‹±æ–‡æ–‡æ¡£</a> æˆ–è€… <a href="https://echarts.apache.org/zh/index.html">ä¸­æ–‡æ–‡æ¡£</a>ï¼Œæ›´å¤šçš„å®ä¾‹å’Œå±æ€§è®¾ç½®éƒ½å¯ä»¥æ‰¾åˆ°ï¼Œä¹Ÿå¯ä»¥åœ¨ ECharts å®˜ç½‘é…ç½®å¥½å›¾è¡¨å±æ€§åå†å¼•å…¥åˆ°è‡ªå·±çš„ Hexo æ–‡æ¡£ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ’¿Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Hexo ä¸­æ’å…¥ Chart åŠ¨æ€å›¾è¡¨</title>
      <link href="post/a6e75a2b.html"/>
      <url>post/a6e75a2b.html</url>
      
        <content type="html"><![CDATA[<p><div class="note info simple"><p>æ–‡ç« æ¥æºï¼š<br>  ä½œè€…: <a href="https://github.com/Shen-Yu">Shen-Yu</a><br>  é“¾æ¥: <a href="https://shen-yu.gitee.io/2020/chartjs/">https://shen-yu.gitee.io/2020/chartjs/</a><br>  æ¥æº: <a href="https://shen-yu.gitee.io/">å²›</a><br>  è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p></div></p><h1 id="Chartjs-ç®€ä»‹"><a href="#Chartjs-ç®€ä»‹" class="headerlink" title="Chartjs ç®€ä»‹"></a>Chartjs ç®€ä»‹</h1><p><a href="https://chartjs.bootcss.com/">Chartjs</a> æ˜¯ä¸€æ¬¾ç®€å•ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–å·¥å…·ï¼Œå¯¹æ¯”å…¶ä»–å›¾è¡¨åº“å¦‚ <a href="https://echarts.apache.org/">ECharts</a>ã€<a href="https://www.highcharts.com/">Highcharts</a>ã€<a href="https://c3js.org/">C3</a>ã€<a href="http://www.flotcharts.org/">Flot</a>ã€<a href="https://www.amcharts.com/javascript-charts/">amCharts</a> ç­‰ï¼Œå®ƒçš„ç”»é¢æ•ˆæœã€åŠ¨æ€æ•ˆæœéƒ½æ›´ç²¾è‡´ï¼Œå®ƒçš„ <a href="https://chartjs.bootcss.com/">æ–‡æ¡£é¦–é¡µ</a> å°±é€å‡ºä¸€è‚¡å°æ¸…æ–°ï¼ŒåŸºäº HTML5 Canvasï¼Œå®ƒæ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ä¸”å“åº”å¼ï¼ŒåŸºæœ¬æ»¡è¶³äº†ä¸€èˆ¬æ•°æ®å±•ç¤ºçš„éœ€è¦ï¼ŒåŒ…æ‹¬æŠ˜çº¿å›¾ï¼Œæ¡å½¢å›¾ï¼Œé¥¼å›¾ï¼Œæ•£ç‚¹å›¾ï¼Œé›·è¾¾å›¾ï¼Œæåœ°å›¾ï¼Œç”œç”œåœˆå›¾ç­‰ã€‚</p><h1 id="Hexo-ä¸­çš„-Chartjs"><a href="#Hexo-ä¸­çš„-Chartjs" class="headerlink" title="Hexo ä¸­çš„ Chartjs"></a>Hexo ä¸­çš„ Chartjs</h1><p>ä¸ºäº†æ–¹ä¾¿åœ¨ Hexo ä¸­ä½¿ç”¨è¿™ä¹ˆæ¼‚äº®çš„å›¾è¡¨åº“ï¼Œæˆ‘è‡ªå·±å†™äº†ä¸€ä¸ª Hexo çš„ <a href="https://github.com/Shen-Yu/hexo-tag-chart">Chartjs</a> æ’ä»¶ã€‚æ’ä»¶çš„å®‰è£…å’Œä½¿ç”¨éå¸¸çš„ç®€å•ï¼Œåªéœ€è¦è¿›å…¥åšå®¢ç›®å½•ï¼Œç„¶åæ‰“å¼€å‘½ä»¤è¡Œï¼Œç”¨ <code>npm</code> å®‰è£…ä¸€ä¸‹ï¼š</p><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">npm install hexo-tag-chart --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>ä¹‹ååœ¨æ–‡ç« å†…ä½¿ç”¨ <code>chart</code> çš„ <code>tag</code> å°±å¯ä»¥äº†</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% chart 90% 300 %&#125;\\TODO option goes here&#123;% endchart %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>å…¶ä¸­ <code>chart</code> æ˜¯æ ‡ç­¾åï¼Œ<code>endchart</code> æ˜¯ç»“æŸæ ‡ç­¾ï¼Œä¸éœ€è¦æ›´æ”¹ï¼Œ<code>90%</code> æ˜¯å›¾è¡¨å®¹å™¨çš„ç›¸å¯¹å®½åº¦ï¼Œé»˜è®¤æ˜¯ <code>100%</code>ï¼Œ<code>300</code> æ˜¯å›¾è¡¨å®¹å™¨çš„é«˜åº¦ï¼Œé»˜è®¤æ˜¯æŒ‰æ­£å¸¸æ¯”ä¾‹ç¼©æ”¾çš„ï¼Œä½ å¯ä»¥é€šè¿‡è®¾ç½® <code>options</code> é‡Œé¢çš„ <code>aspectRatio</code> å±æ€§æ¥è°ƒæ•´å®½é«˜æ¯”ä¾‹ï¼Œå¦å¤–è¿˜æœ‰è®¸å¤šå±æ€§å¯ä»¥è‡ªå®šä¹‰ï¼Œä½ å¯ä»¥æŸ¥çœ‹ <a href="https://chartjs.bootcss.com/docs/">å®˜æ–¹æ–‡æ¡£</a>ã€‚åœ¨æ ‡ç­¾ä¹‹é—´çš„éƒ¨åˆ†ï¼Œéœ€è¦è‡ªå·±å¡«å……çš„å›¾è¡¨æ•°æ®å’Œå±æ€§ã€‚</p><h1 id="å›¾è¡¨ç¤ºä¾‹"><a href="#å›¾è¡¨ç¤ºä¾‹" class="headerlink" title="å›¾è¡¨ç¤ºä¾‹"></a>å›¾è¡¨ç¤ºä¾‹</h1><p>ç°åœ¨ä½ å·²ç»åŸºæœ¬å­¦ä¼šäº†åœ¨ Hexo ä¸­æ’å…¥ Chart å›¾è¡¨äº†ï¼Œä¸‹é¢å†å±•ç¤ºä¸€äº›åŸºæœ¬çš„å›¾è¡¨ï¼Œæ›´å¤šç‚«é…·çš„å›¾è¡¨å¯ä»¥è‡ªå·±å»å°è¯•ä¸€ä¸‹ã€‚</p><h2 id="æŸ±çŠ¶å›¾ã€æ¡å½¢å›¾"><a href="#æŸ±çŠ¶å›¾ã€æ¡å½¢å›¾" class="headerlink" title="æŸ±çŠ¶å›¾ã€æ¡å½¢å›¾"></a>æŸ±çŠ¶å›¾ã€æ¡å½¢å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% chart 90% 300 %&#125;&#123;  type: 'bar',  data: &#123;    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],    datasets: [&#123;      label: 'First Dataset',      data: [65, 59, 80, 81, 56, 55, 40],      fill: false,      backgroundColor: ['rgba(255, 99, 132, 0.5)', 'rgba(255, 159, 64, 0.5)', 'rgba(255, 205, 86, 0.5)', 'rgba(75, 192, 192, 0.5)', 'rgba(54, 162, 235, 0.5)', 'rgba(153, 102, 255, 0.5)', 'rgba(201, 203, 207, 0.5)'],      borderColor: ['rgb(255, 99, 132)', 'rgb(255, 159, 64)', 'rgb(255, 205, 86)', 'rgb(75, 192, 192)', 'rgb(54, 162, 235)', 'rgb(153, 102, 255)', 'rgb(201, 203, 207)'],      borderWidth: 1    &#125;]  &#125;,  options: &#123;    scales: &#123;      yAxes: [&#123;        ticks: &#123;          beginAtZero: true        &#125;      &#125;]    &#125;  &#125;&#125;&#123;% endchart %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div style="width: 90%;margin: 0 auto">    <canvas id="chart2522" style="height: 300px"></canvas></div><script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script><script type="text/javascript">    var ctx = document.getElementById('chart2522').getContext('2d');    var options = {  type: 'bar',  data: {    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],    datasets: [{      label: 'First Dataset',      data: [65, 59, 80, 81, 56, 55, 40],      fill: false,      backgroundColor: ['rgba(255, 99, 132, 0.5)', 'rgba(255, 159, 64, 0.5)', 'rgba(255, 205, 86, 0.5)', 'rgba(75, 192, 192, 0.5)', 'rgba(54, 162, 235, 0.5)', 'rgba(153, 102, 255, 0.5)', 'rgba(201, 203, 207, 0.5)'],      borderColor: ['rgb(255, 99, 132)', 'rgb(255, 159, 64)', 'rgb(255, 205, 86)', 'rgb(75, 192, 192)', 'rgb(54, 162, 235)', 'rgb(153, 102, 255)', 'rgb(201, 203, 207)'],      borderWidth: 1    }]  },  options: {    scales: {      yAxes: [{        ticks: {          beginAtZero: true        }      }]    }  }};    new Chart(ctx, options);</script></p><h2 id="æŠ˜çº¿å›¾"><a href="#æŠ˜çº¿å›¾" class="headerlink" title="æŠ˜çº¿å›¾"></a>æŠ˜çº¿å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% chart 90% 300 %&#125;&#123;  type: 'line',  data: &#123;    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],    datasets: [&#123;      label: 'First dataset',      backgroundColor: 'rgb(255, 99, 132)',      borderColor: 'rgb(255, 99, 132)',      data: [0, 10, 5, 2, 20, 30, 45]      &#125;]  &#125;,  options: &#123;    responsive: true,    title: &#123;    display: true,    text: 'Chart.js Line Chart'    &#125;  &#125;&#125;&#123;% endchart %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div style="width: 90%;margin: 0 auto">    <canvas id="chart7712" style="height: 300px"></canvas></div><script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script><script type="text/javascript">    var ctx = document.getElementById('chart7712').getContext('2d');    var options = {  type: 'line',  data: {    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],    datasets: [{      label: 'First dataset',      backgroundColor: 'rgb(255, 99, 132)',      borderColor: 'rgb(255, 99, 132)',      data: [0, 10, 5, 2, 20, 30, 45]      }]  },  options: {    responsive: true,    title: {    display: true,    text: 'Chart.js Line Chart'    }  }};    new Chart(ctx, options);</script></p><h2 id="ç¯å½¢å›¾ã€é¥¼çŠ¶å›¾"><a href="#ç¯å½¢å›¾ã€é¥¼çŠ¶å›¾" class="headerlink" title="ç¯å½¢å›¾ã€é¥¼çŠ¶å›¾"></a>ç¯å½¢å›¾ã€é¥¼çŠ¶å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% chart 90% 300 %&#125;&#123;  type: 'pie',  data: &#123;    labels: ['Red', 'Blue', 'Yellow'],    datasets: [&#123;      label: 'First Dataset',      data: [300, 50, 100],      backgroundColor: ['rgb(255, 99, 132)', 'rgb(54, 162, 235)', 'rgb(255, 205, 86)']    &#125;]  &#125;&#125;&#123;% endchart %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div style="width: 90%;margin: 0 auto">    <canvas id="chart4951" style="height: 300px"></canvas></div><script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script><script type="text/javascript">    var ctx = document.getElementById('chart4951').getContext('2d');    var options = {  type: 'pie',  data: {    labels: ['Red', 'Blue', 'Yellow'],    datasets: [{      label: 'First Dataset',      data: [300, 50, 100],      backgroundColor: ['rgb(255, 99, 132)', 'rgb(54, 162, 235)', 'rgb(255, 205, 86)']    }]  }};    new Chart(ctx, options);</script></p><h2 id="é›·è¾¾å›¾"><a href="#é›·è¾¾å›¾" class="headerlink" title="é›·è¾¾å›¾"></a>é›·è¾¾å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% chart 90% 300 %&#125;&#123;  type: 'radar',  data: &#123;    labels: ['Eating', 'Drinking', 'Sleeping', 'Designing', 'Coding', 'Cycling', 'Running'],    datasets: [&#123;      label: 'First Dataset',      data: [65, 59, 90, 81, 56, 55, 40],      fill: true,      backgroundColor: 'rgba(255, 99, 132, 0.2)',      borderColor: 'rgb(255, 99, 132)',      pointBackgroundColor: 'rgb(255, 99, 132)',      pointBorderColor: '#fff',      pointHoverBackgroundColor: '#fff',      pointHoverBorderColor: 'rgb(255, 99, 132)'    &#125;, &#123;      label: 'Second Dataset',      data: [28, 48, 40, 19, 96, 27, 100],      fill: true,      backgroundColor: 'rgba(54, 162, 235, 0.2)',      borderColor: 'rgb(54, 162, 235)',      pointBackgroundColor: 'rgb(54, 162, 235)',      pointBorderColor: '#fff',      pointHoverBackgroundColor: '#fff',      pointHoverBorderColor: 'rgb(54, 162, 235)'    &#125;]  &#125;,  options: &#123;    elements: &#123;      line: &#123;        tension: 0,        borderWidth: 3      &#125;    &#125;  &#125;&#125;&#123;% endchart %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div style="width: 90%;margin: 0 auto">    <canvas id="chart3212" style="height: 300px"></canvas></div><script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script><script type="text/javascript">    var ctx = document.getElementById('chart3212').getContext('2d');    var options = {  type: 'radar',  data: {    labels: ['Eating', 'Drinking', 'Sleeping', 'Designing', 'Coding', 'Cycling', 'Running'],    datasets: [{      label: 'First Dataset',      data: [65, 59, 90, 81, 56, 55, 40],      fill: true,      backgroundColor: 'rgba(255, 99, 132, 0.2)',      borderColor: 'rgb(255, 99, 132)',      pointBackgroundColor: 'rgb(255, 99, 132)',      pointBorderColor: '#fff',      pointHoverBackgroundColor: '#fff',      pointHoverBorderColor: 'rgb(255, 99, 132)'    }, {      label: 'Second Dataset',      data: [28, 48, 40, 19, 96, 27, 100],      fill: true,      backgroundColor: 'rgba(54, 162, 235, 0.2)',      borderColor: 'rgb(54, 162, 235)',      pointBackgroundColor: 'rgb(54, 162, 235)',      pointBorderColor: '#fff',      pointHoverBackgroundColor: '#fff',      pointHoverBorderColor: 'rgb(54, 162, 235)'    }]  },  options: {    elements: {      line: {        tension: 0,        borderWidth: 3      }    }  }};    new Chart(ctx, options);</script></p><h2 id="æ°”æ³¡å›¾"><a href="#æ°”æ³¡å›¾" class="headerlink" title="æ°”æ³¡å›¾"></a>æ°”æ³¡å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% chart 90% 300 %&#125;&#123;  type: 'bubble',  data: &#123;    datasets: [&#123;      label: 'First Dataset',      data: [&#123;        x: 20,        y: 30,        r: 6      &#125;, &#123;        x: 25,        y: 20,        r: 8      &#125;, &#123;        x: 32,        y: 6,        r: 7      &#125;, &#123;        x: 35,        y: 26,        r: 9      &#125;, &#123;        x: 40,        y: 10,        r: 5      &#125;],      backgroundColor: 'rgb(255, 99, 132)'    &#125;]  &#125;&#125;&#123;% endchart %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div style="width: 90%;margin: 0 auto">    <canvas id="chart4760" style="height: 300px"></canvas></div><script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script><script type="text/javascript">    var ctx = document.getElementById('chart4760').getContext('2d');    var options = {  type: 'bubble',  data: {    datasets: [{      label: 'First Dataset',      data: [{        x: 20,        y: 30,        r: 6      }, {        x: 25,        y: 20,        r: 8      }, {        x: 32,        y: 6,        r: 7      }, {        x: 35,        y: 26,        r: 9      }, {        x: 40,        y: 10,        r: 5      }],      backgroundColor: 'rgb(255, 99, 132)'    }]  }};    new Chart(ctx, options);</script></p><h2 id="æ•£ç‚¹å›¾"><a href="#æ•£ç‚¹å›¾" class="headerlink" title="æ•£ç‚¹å›¾"></a>æ•£ç‚¹å›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% chart 90% 300 %&#125;&#123;  type: 'scatter',  data: &#123;    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],    datasets: [&#123;      label: 'First dataset',      borderColor: 'rgb(255, 99, 132)',      backgroundColor: 'rgb(255, 99, 132)',      data: [&#123;        x: 12,        y: 45,      &#125;, &#123;        x: 12,        y: 13,      &#125;, &#123;        x: 56,        y: 3,      &#125;, &#123;        x: 5,        y: 87,      &#125;, &#123;        x: 43,        y: 76,      &#125;, &#123;        x: 34,        y: 8,      &#125;, &#123;        x: 9,        y: 53,      &#125;]    &#125;, &#123;      label: 'Second dataset',      borderColor: 'rgb(54, 162, 235)',      backgroundColor: 'rgb(54, 162, 235)',      data: [&#123;        x: 56,        y: 12,      &#125;, &#123;        x: 7,        y: 12,      &#125;, &#123;        x: 87,        y: 24,      &#125;, &#123;        x: 34,        y: 45,      &#125;, &#123;        x: 65,        y: 27,      &#125;, &#123;        x: 8,        y: 37,      &#125;, &#123;        x: 24,        y: 89,      &#125;]    &#125;],    options: &#123;      title: &#123;        display: true,        text: 'Chart.js Scatter Chart'      &#125;,    &#125;  &#125;&#125;&#123;% endchart %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div style="width: 90%;margin: 0 auto">    <canvas id="chart7988" style="height: 300px"></canvas></div><script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script><script type="text/javascript">    var ctx = document.getElementById('chart7988').getContext('2d');    var options = {  type: 'scatter',  data: {    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],    datasets: [{      label: 'First dataset',      borderColor: 'rgb(255, 99, 132)',      backgroundColor: 'rgb(255, 99, 132)',      data: [{        x: 12,        y: 45,      }, {        x: 12,        y: 13,      }, {        x: 56,        y: 3,      }, {        x: 5,        y: 87,      }, {        x: 43,        y: 76,      }, {        x: 34,        y: 8,      }, {        x: 9,        y: 53,      }]    }, {      label: 'Second dataset',      borderColor: 'rgb(54, 162, 235)',      backgroundColor: 'rgb(54, 162, 235)',      data: [{        x: 56,        y: 12,      }, {        x: 7,        y: 12,      }, {        x: 87,        y: 24,      }, {        x: 34,        y: 45,      }, {        x: 65,        y: 27,      }, {        x: 8,        y: 37,      }, {        x: 24,        y: 89,      }]    }],    options: {      title: {        display: true,        text: 'Chart.js Scatter Chart'      },    }  }};    new Chart(ctx, options);</script></p><h2 id="æ··åˆå›¾"><a href="#æ··åˆå›¾" class="headerlink" title="æ··åˆå›¾"></a>æ··åˆå›¾</h2><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">&#123;% chart 90% 300 %&#125;&#123;  type: 'bar',  data: &#123;    labels: ['January', 'February', 'March', 'April'],    datasets: [&#123;      label: 'Bar Dataset',      data: [10, 20, 30, 40],      borderColor: 'rgb(255, 99, 132)',      backgroundColor: 'rgba(255, 99, 132)'    &#125;, &#123;      label: 'Line Dataset',      data: [20, 30, 40, 50],      type: 'line',      fill: false,      borderColor: 'rgb(54, 162, 235)'    &#125;]  &#125;,  options: &#123;    scales: &#123;      yAxes: [&#123;        ticks: &#123;          beginAtZero: true        &#125;      &#125;]    &#125;  &#125;&#125;&#123;% endchart %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div style="width: 90%;margin: 0 auto">    <canvas id="chart3950" style="height: 300px"></canvas></div><script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script><script type="text/javascript">    var ctx = document.getElementById('chart3950').getContext('2d');    var options = {  type: 'bar',  data: {    labels: ['January', 'February', 'March', 'April'],    datasets: [{      label: 'Bar Dataset',      data: [10, 20, 30, 40],      borderColor: 'rgb(255, 99, 132)',      backgroundColor: 'rgba(255, 99, 132)'    }, {      label: 'Line Dataset',      data: [20, 30, 40, 50],      type: 'line',      fill: false,      borderColor: 'rgb(54, 162, 235)'    }]  },  options: {    scales: {      yAxes: [{        ticks: {          beginAtZero: true        }      }]    }  }};    new Chart(ctx, options);</script></p><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šï¼Œ<a href="https://www.chartjs.org/">å®˜æ–¹æ–‡æ¡£</a> æ˜¯ä¸äºŒä¹‹é€‰ã€‚å¦‚æœä½ è‹±è¯­ä¸å¥½ï¼Œé‚£ä¹ˆå¯ä»¥çœ‹çœ‹ <a href="https://chartjs.bootcss.com/">ä¸­æ–‡æ–‡æ¡£</a>ï¼Œæ‰€æœ‰çš„ä¾‹å­å’Œå±æ€§éƒ½èƒ½åœ¨é‡Œé¢æ‰¾åˆ°ï¼Œç¥ä½ ç©å¾—å¼€å¿ƒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ’¿Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown åŸºæœ¬è¯­æ³•</title>
      <link href="post/c894e39a.html"/>
      <url>post/c894e39a.html</url>
      
        <content type="html"><![CDATA[<h1 id="Markdown-åº”ç”¨"><a href="#Markdown-åº”ç”¨" class="headerlink" title="Markdown åº”ç”¨"></a>Markdown åº”ç”¨</h1><ul><li>Markdown æ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œå®ƒå…è®¸äººä»¬ä½¿ç”¨æ˜“è¯»æ˜“å†™çš„çº¯æ–‡æœ¬æ ¼å¼ç¼–å†™æ–‡æ¡£ã€‚</li><li>Markdown è¯­è¨€åœ¨ 2004 ç”±çº¦ç¿°Â·æ ¼é²ä¼¯ï¼ˆè‹±è¯­ï¼šJohn Gruberï¼‰åˆ›å»ºã€‚</li><li>Markdown ç¼–å†™çš„æ–‡æ¡£å¯ä»¥å¯¼å‡º HTMLã€Wordã€å›¾åƒã€PDFã€Epub ç­‰å¤šç§æ ¼å¼çš„æ–‡æ¡£ã€‚</li><li>Markdown ç¼–å†™çš„æ–‡æ¡£åç¼€ä¸º .md æˆ– .markdownã€‚</li></ul><p>Markdown èƒ½è¢«ä½¿ç”¨æ¥æ’°å†™ç”µå­ä¹¦ï¼Œå¦‚ï¼šGitbookã€‚</p><p>å½“å‰è®¸å¤šç½‘ç«™éƒ½å¹¿æ³›ä½¿ç”¨ Markdown æ¥æ’°å†™å¸®åŠ©æ–‡æ¡£æˆ–æ˜¯ç”¨äºè®ºå›ä¸Šå‘è¡¨æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼šGitHubã€ç®€ä¹¦ã€redditã€Diasporaã€Stack Exchangeã€OpenStreetMap ã€SourceForge ç­‰ã€‚</p><h1 id="Markdown-æ ‡é¢˜"><a href="#Markdown-æ ‡é¢˜" class="headerlink" title="Markdown æ ‡é¢˜"></a>Markdown æ ‡é¢˜</h1><p>Markdown æ ‡é¢˜æœ‰ä¸¤ç§æ ¼å¼ã€‚</p><ol><li><p>ä½¿ç”¨ <code>=</code> å’Œ <code>-</code> æ ‡è®°ä¸€çº§å’ŒäºŒçº§æ ‡é¢˜</p><p>= å’Œ - æ ‡è®°è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token title important">ä¸€çº§æ ‡é¢˜<span class="token punctuation">=======</span></span><span class="token title important">äºŒçº§æ ‡é¢˜<span class="token punctuation">-------</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p><!-- æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š> ä¸€çº§æ ‡é¢˜> =======> äºŒçº§æ ‡é¢˜> ------- --></p></li><li><p>ä½¿ç”¨ <code>#</code> å·æ ‡è®°</p><p>ä½¿ç”¨ <code>#</code> å·å…‹è¡¨ç¤º 1-6 çº§æ ‡é¢˜ï¼Œä¸€çº§æ ‡é¢˜å¯¹åº”ä¸€ä¸ª <code>#</code> å·ï¼ŒäºŒçº§æ ‡é¢˜å¯¹åº”ä¸¤ä¸ª <code>#</code> å·ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p> <pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">#</span> ä¸€çº§æ ‡é¢˜</span><span class="token title important"><span class="token punctuation">##</span> äºŒçº§æ ‡é¢˜</span><span class="token title important"><span class="token punctuation">###</span> ä¸‰çº§æ ‡é¢˜</span><span class="token title important"><span class="token punctuation">####</span> å››çº§æ ‡é¢˜</span><span class="token title important"><span class="token punctuation">#####</span> äº”çº§æ ‡é¢˜</span><span class="token title important"><span class="token punctuation">######</span> å…­çº§æ ‡é¢˜</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p> <!-- æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š> # ä¸€çº§æ ‡é¢˜> ## äºŒçº§æ ‡é¢˜> ### ä¸‰çº§æ ‡é¢˜> #### å››çº§æ ‡é¢˜> ##### äº”çº§æ ‡é¢˜> ###### å…­çº§æ ‡é¢˜ --></p></li></ol><h1 id="Markdown-æ®µè½"><a href="#Markdown-æ®µè½" class="headerlink" title="Markdown æ®µè½"></a>Markdown æ®µè½</h1><h2 id="æ®µè½"><a href="#æ®µè½" class="headerlink" title="æ®µè½"></a>æ®µè½</h2><p>Markdown æ®µè½æ²¡æœ‰ç‰¹æ®Šçš„æ ¼å¼ï¼Œç›´æ¥ç¼–å†™æ–‡å­—å°±å¥½ï¼Œæ®µè½çš„æ¢è¡Œæ˜¯ä½¿ç”¨ä¸¤ä¸ªç©ºæ ¼ä»¥ä¸ŠåŠ ä¸Šå›è½¦ã€‚</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">Markdown<span class="token url">[<span class="token content">ç©ºæ ¼</span>][<span class="token variable">ç©ºæ ¼</span>]</span>[å›è½¦]Markdown<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>å½“ç„¶ä¹Ÿå¯ä»¥åœ¨æ®µè½åé¢ä½¿ç”¨ä¸€ä¸ªç©ºè¡Œè¡¨ç¤ºé‡æ–°å¼€å§‹ä¸€ä¸ªæ®µè½</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">Markdown[ç©ºè¡Œ]Markdown<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>è¿˜å¯ä»¥ä½¿ç”¨ <code>&lt;br/&gt;</code> å®ç°å¼ºåˆ¶æ¢è¡Œ</p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>Markdown<br>Markdown</p></blockquote><h2 id="å­—ä½“"><a href="#å­—ä½“" class="headerlink" title="å­—ä½“"></a>å­—ä½“</h2><p>Markdown å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§å­—ä½“ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token italic"><span class="token punctuation">*</span><span class="token content">æ–œä½“æ–‡æœ¬</span><span class="token punctuation">*</span></span><span class="token italic"><span class="token punctuation">_</span><span class="token content">æ–œä½“æ–‡æœ¬</span><span class="token punctuation">_</span></span><span class="token bold"><span class="token punctuation">**</span><span class="token content">ç²—ä½“æ–‡æœ¬</span><span class="token punctuation">**</span></span><span class="token bold"><span class="token punctuation">__</span><span class="token content">ç²—ä½“æ–‡æœ¬</span><span class="token punctuation">__</span></span><span class="token bold"><span class="token punctuation">**</span><span class="token content"><span class="token italic"><span class="token punctuation">*</span><span class="token content">æ–œç²—ä½“æ–‡æœ¬</span><span class="token punctuation">*</span></span></span><span class="token punctuation">**</span></span><span class="token bold"><span class="token punctuation">__</span><span class="token content"><span class="token italic"><span class="token punctuation">_</span><span class="token content">æ–œç²—ä½“æ–‡æœ¬</span><span class="token punctuation">_</span></span></span><span class="token punctuation">__</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p><em>æ–œä½“æ–‡æœ¬</em><br><em>æ–œä½“æ–‡æœ¬</em>  </p><p><strong>ç²—ä½“æ–‡æœ¬</strong><br><strong>ç²—ä½“æ–‡æœ¬</strong></p><p><strong><em>æ–œç²—ä½“æ–‡æœ¬</em></strong><br><strong><em>æ–œç²—ä½“æ–‡æœ¬</em></strong></p></blockquote><h2 id="åˆ†éš”çº¿"><a href="#åˆ†éš”çº¿" class="headerlink" title="åˆ†éš”çº¿"></a>åˆ†éš”çº¿</h2><p>å¯ä»¥åœ¨ä¸€è¡Œä¸­ä½¿ç”¨ä¸‰ä¸ªä»¥ä¸Šçš„æ˜Ÿå· <code>*</code>ã€å‡å· <code>-</code>ã€åº•çº¿ <code>_</code> æ¥å»ºç«‹ä¸€ä¸ªåˆ†éš”çº¿ï¼Œè¡Œå†…ä¸èƒ½æœ‰å…¶ä»–ä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥åœ¨æ˜Ÿå· <code>*</code>ã€å‡å· <code>-</code>ã€åº•çº¿ <code>_</code> ä¸­é—´æ’å…¥ç©ºæ ¼ã€‚ä¸‹é¢æ¯ç§å†™æ³•éƒ½å¯ä»¥å»ºç«‹åˆ†éš”çº¿ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token hr punctuation">---</span><span class="token hr punctuation">***</span>___<span class="token hr punctuation">- - -</span><span class="token hr punctuation">* * *</span><span class="token italic"><span class="token punctuation">_</span><span class="token content"> </span><span class="token punctuation">_</span></span> _<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><hr><hr><hr><hr><hr><hr></blockquote><h2 id="åˆ é™¤çº¿"><a href="#åˆ é™¤çº¿" class="headerlink" title="åˆ é™¤çº¿"></a>åˆ é™¤çº¿</h2><p>å¦‚æœæ®µè½ä¸Šçš„æ–‡å­—è¦æ·»åŠ åˆ é™¤çº¿ï¼Œåªéœ€è¦åœ¨æ–‡å­—çš„ä¸¤ç«¯åŠ ä¸Šä¸¤ä¸ªæ³¢æµªçº¿ <code>~~</code> å³å¯ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">æ­£å¸¸æ–‡æœ¬<span class="token strike"><span class="token punctuation">~~</span><span class="token content">åˆ é™¤æ–‡æœ¬</span><span class="token punctuation">~~</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>æ­£å¸¸æ–‡æœ¬<br><del>åˆ é™¤æ–‡æœ¬</del></p></blockquote><h2 id="ä¸‹åˆ’çº¿"><a href="#ä¸‹åˆ’çº¿" class="headerlink" title="ä¸‹åˆ’çº¿"></a>ä¸‹åˆ’çº¿</h2><p>ä¸‹åˆ’çº¿å¯ä»¥é€šè¿‡ HTML çš„ <code>&lt;u&gt;</code> æ ‡ç­¾æ¥å®ç°ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>u</span><span class="token punctuation">></span></span>ä¸‹åˆ’çº¿æ–‡æœ¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>u</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p><u>ä¸‹åˆ’çº¿æ–‡æœ¬</u></p></blockquote><h2 id="è„šæ³¨"><a href="#è„šæ³¨" class="headerlink" title="è„šæ³¨"></a>è„šæ³¨</h2><p>è„šæ³¨æ˜¯å¯¹æ–‡æœ¬çš„è¡¥å……è¯´æ˜ï¼ŒMarkdown è„šæ³¨çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">[^ è¦è„šæ³¨çš„æ–‡æœ¬]Markdown[^ Markdown]  [^ Markdown ]ï¼šä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>Markdown<sup><a href="#fn_ Markdown" id="reffn_ Markdown"> Markdown</a></sup>ã€‚</p><blockquote id="fn_ Markdown"><sup> Markdown</sup>. ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€<a href="#reffn_ Markdown" title="Jump back to footnote [ Markdown] in the text."> &#8617;</a></blockquote></blockquote><h1 id="Markdown-åˆ—è¡¨"><a href="#Markdown-åˆ—è¡¨" class="headerlink" title="Markdown åˆ—è¡¨"></a>Markdown åˆ—è¡¨</h1><p>Markdown æ”¯æŒæœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨ã€‚</p><p>æ— åºåˆ—è¡¨ä½¿ç”¨æ˜Ÿå· <code>*</code>ã€åŠ å· <code>+</code>ã€å‡å· <code>-</code> ä½œä¸ºåˆ—è¡¨æ ‡è®°ï¼Œè¿™äº›æ ‡è®°åé¢éƒ½è¦æ·»åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œç„¶åå†å¡«å†™å†…å®¹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token list punctuation">*</span> ç¬¬ä¸€é¡¹<span class="token list punctuation">*</span> ç¬¬äºŒé¡¹<span class="token list punctuation">*</span> ç¬¬ä¸‰é¡¹<span class="token list punctuation">+</span> ç¬¬ä¸€é¡¹<span class="token list punctuation">+</span> ç¬¬äºŒé¡¹<span class="token list punctuation">+</span> ç¬¬ä¸‰é¡¹<span class="token list punctuation">-</span> ç¬¬ä¸€é¡¹<span class="token list punctuation">-</span> ç¬¬äºŒé¡¹<span class="token list punctuation">-</span> ç¬¬ä¸‰é¡¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><ul><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li><li>ç¬¬ä¸‰é¡¹</li></ul><ul><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li><li>ç¬¬ä¸‰é¡¹</li></ul><ul><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li><li>ç¬¬ä¸‰é¡¹</li></ul></blockquote><p>æœ‰åºåˆ—è¡¨ä½¿ç”¨æ•°å­—å¹¶åŠ ä¸Š <code>.</code> å·æ¥è¡¨ç¤ºï¼Œå¦‚ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token list punctuation">1.</span> ç¬¬ä¸€é¡¹<span class="token list punctuation">2.</span> ç¬¬äºŒé¡¹<span class="token list punctuation">3.</span> ç¬¬ä¸‰é¡¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><ol><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li><li>ç¬¬ä¸‰é¡¹</li></ol></blockquote><p>åˆ—è¡¨åµŒå¥—åªéœ€è¦åœ¨å­åˆ—è¡¨ä¸­çš„é€‰é¡¹å‰é¢æ·»åŠ å››ä¸ªç©ºæ ¼å³å¯ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token list punctuation">1.</span> ç¬¬ä¸€é¡¹ï¼š  <span class="token list punctuation">-</span> ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´   <span class="token list punctuation">-</span> ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ <span class="token list punctuation">2.</span> ç¬¬äºŒé¡¹ï¼š  <span class="token list punctuation">1.</span> ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´   <span class="token list punctuation">2.</span> ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><ol><li>ç¬¬ä¸€é¡¹ï¼š<ul><li>ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ </li></ul></li><li>ç¬¬äºŒé¡¹ï¼š<ol><li>ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ </li></ol></li></ol></blockquote><h1 id="Markdown-åŒºå—"><a href="#Markdown-åŒºå—" class="headerlink" title="Markdown åŒºå—"></a>Markdown åŒºå—</h1><p>Markdown åŒºå—å¼•ç”¨æ˜¯åœ¨æ®µè½å¼€å¤´ä½¿ç”¨ <code>&gt;</code> ç¬¦å·ï¼Œç„¶ååé¢ç´§è·Ÿä¸€ä¸ªç©ºæ ¼ç¬¦å·ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token blockquote punctuation">></span> åŒºå—å¼•ç”¨<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>åŒºå—å¼•ç”¨</p></blockquote><p>å¦å¤–åŒºå—æ˜¯å¯ä»¥åµŒå¥—çš„ï¼Œä¸€ä¸ª <code>&gt;</code> ç¬¦å·æ˜¯æœ€å¤–å±‚ï¼Œä¸¤ä¸ª <code>&gt;</code> ç¬¦å·æ˜¯ç¬¬ä¸€å±‚åµŒå¥—ï¼Œä»¥æ­¤ç±»æ¨ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token blockquote punctuation">></span> æœ€å¤–å±‚<span class="token blockquote punctuation">> ></span> ç¬¬ä¸€å±‚åµŒå¥—<span class="token blockquote punctuation">> > ></span> ç¬¬äºŒå±‚åµŒå¥—<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>æœ€å¤–å±‚</p><blockquote><p>ç¬¬ä¸€å±‚åµŒå¥—</p><blockquote><p>ç¬¬äºŒå±‚åµŒå¥—</p></blockquote></blockquote></blockquote><p><br></p><p><strong>åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨</strong></p><p>åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨å®ä¾‹å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token blockquote punctuation">></span> åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨<span class="token blockquote punctuation">></span> <span class="token list punctuation">1.</span> ç¬¬ä¸€é¡¹<span class="token blockquote punctuation">></span> <span class="token list punctuation">2.</span> ç¬¬äºŒé¡¹<span class="token blockquote punctuation">></span> <span class="token list punctuation">+</span> ç¬¬ä¸€é¡¹<span class="token blockquote punctuation">></span> <span class="token list punctuation">+</span> ç¬¬äºŒé¡¹<span class="token blockquote punctuation">></span> <span class="token list punctuation">+</span> ç¬¬ä¸‰é¡¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨</p><ol><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li></ol><ul><li>ç¬¬ä¸€é¡¹</li><li>ç¬¬äºŒé¡¹</li><li>ç¬¬ä¸‰é¡¹</li></ul></blockquote><p><br></p><p><strong>åˆ—è¡¨ä¸­ä½¿ç”¨åŒºå—</strong></p><p>å¦‚æœè¦åœ¨åˆ—è¡¨é¡¹ç›®å†…æ”¾è¿›åŒºå—ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ <code>&gt;</code> å‰æ·»åŠ å››ä¸ªç©ºæ ¼çš„ç¼©è¿›ã€‚</p><p>åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨å®ä¾‹å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token list punctuation">*</span> ç¬¬ä¸€é¡¹    > åˆ—è¡¨ä¸­ä½¿ç”¨åŒºå—<span class="token list punctuation">*</span> ç¬¬äºŒé¡¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li>ç¬¬ä¸€é¡¹<blockquote><p>åˆ—è¡¨ä¸­ä½¿ç”¨åŒºå—</p></blockquote></li><li>ç¬¬äºŒé¡¹</li></ul><h1 id="Markdown-ä»£ç "><a href="#Markdown-ä»£ç " class="headerlink" title="Markdown ä»£ç "></a>Markdown ä»£ç </h1><p>å¦‚æœæ˜¯æ®µè½ä¸Šçš„ä¸€ä¸ªå‡½æ•°æˆ–ç‰‡æ®µçš„ä»£ç å¯ä»¥ç”¨åå¼•å· <code>` </code> æˆ–ç”¨ä¸‰ä¸ªåå¼•å· <code>``` </code> æŠŠå®ƒåŒ…èµ·æ¥ä¾‹å¦‚ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token code keyword">` print `</span> å‡½æ•°<span class="token code keyword">``` print ``</span>` å‡½æ•°<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p><code>print</code> å‡½æ•°<br><code>print</code> å‡½æ•°</p></blockquote><p><br></p><p><strong>ä»£ç åŒºå—</strong></p><p>ä»£ç åŒºå—ä½¿ç”¨ 4 ä¸ªç©ºæ ¼æˆ–è€…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼ˆTab é”®ï¼‰ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">[<span class="token content">ç©ºæ ¼</span>][<span class="token variable">ç©ºæ ¼</span>]</span><span class="token url">[<span class="token content">ç©ºæ ¼</span>][<span class="token variable">ç©ºæ ¼</span>]</span>print("Hello");[Tab]print("World");<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>   print(&quot;Hello&quot;);<br>   print(&quot;World&quot;);</p></blockquote><p>ä½ ä¹Ÿå¯ä»¥ç”¨ <code>``` </code> åŒ…è£¹ä¸€æ®µä»£ç ï¼Œå¹¶æŒ‡å®šä¸€ç§è¯­è¨€ï¼ˆä¹Ÿå¯ä»¥ä¸æŒ‡å®šï¼‰ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">[<span class="token content">```</span>][<span class="token variable">javascript</span>]</span>$(document).ready(function () &#123;    alert('Hello World');&#125;);[```]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Hello World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><h1 id="Markdown-é“¾æ¥"><a href="#Markdown-é“¾æ¥" class="headerlink" title="Markdown é“¾æ¥"></a>Markdown é“¾æ¥</h1></blockquote><p>é“¾æ¥è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">[<span class="token content">é“¾æ¥åç§°</span>](é“¾æ¥åœ°å€)</span>æˆ–è€…<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>é“¾æ¥åœ°å€</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p><a href="https://www.baidu.com/">Baidu</a><br>æˆ–è€…<br><a href="https://www.baidu.com/">https://www.baidu.com/</a></p></blockquote><p><br></p><p><strong>é«˜çº§é“¾æ¥</strong></p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å˜é‡æ¥è®¾ç½®ä¸€ä¸ªé“¾æ¥ï¼Œå˜é‡èµ‹å€¼åœ¨æ–‡æ¡£æœ«å°¾è¿›è¡Œï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">è¿™ä¸ªé“¾æ¥ç”¨ Google ä½œä¸ºç½‘å€å˜é‡ <span class="token url">[<span class="token content">Google</span>][<span class="token variable">Google</span>]</span>ç„¶ååœ¨æ–‡æ¡£çš„ç»“å°¾ä¸ºå˜é‡èµ‹å€¼ï¼ˆç½‘å€ï¼‰<span class="token url-reference url"><span class="token punctuation">[</span><span class="token variable">Google</span><span class="token punctuation">]</span><span class="token punctuation">:</span> http://www.google.com/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>è¿™ä¸ªé“¾æ¥ç”¨ Google ä½œä¸ºç½‘å€å˜é‡ [Google][Google]<br>ç„¶ååœ¨æ–‡æ¡£çš„ç»“å°¾ä¸ºå˜é‡èµ‹å€¼ï¼ˆç½‘å€ï¼‰</p><p>  [Google]: <a href="http://www.google.com/">http://www.google.com/</a></p></blockquote><h1 id="Markdown-å›¾ç‰‡"><a href="#Markdown-å›¾ç‰‡" class="headerlink" title="Markdown å›¾ç‰‡"></a>Markdown å›¾ç‰‡</h1><p>Markdown å›¾ç‰‡è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">![<span class="token content">alt å±æ€§æ–‡æœ¬</span>](å›¾ç‰‡åœ°å€)</span><span class="token url">![<span class="token content">alt å±æ€§æ–‡æœ¬</span>](å›¾ç‰‡åœ°å€ <span class="token string">"å¯é€‰æ ‡é¢˜"</span>)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><ul><li>å¼€å¤´ä¸€ä¸ªæ„Ÿå¹å· <code>!</code></li><li>æ¥ç€ä¸€ä¸ªæ–¹æ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„æ›¿ä»£æ–‡å­—</li><li>æ¥ç€ä¸€ä¸ªæ™®é€šæ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„ç½‘å€ï¼Œæœ€åè¿˜å¯ä»¥ç”¨å¼•å·åŒ…ä½å¹¶åŠ ä¸Šé€‰æ‹©æ€§çš„ <code>title</code> å±æ€§çš„æ–‡å­—ã€‚</li></ul><p>ä½¿ç”¨å®ä¾‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">![<span class="token content">å›¾æ ‡</span>](https://www.baidu.com/img/flexible/logo/pc/result.png)</span><span class="token url">![<span class="token content">å›¾æ ‡</span>](https://www.baidu.com/img/flexible/logo/pc/result.png <span class="token string">"Baidu"</span>)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://www.baidu.com/img/flexible/logo/pc/result.png" alt="å›¾æ ‡"><br><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://www.baidu.com/img/flexible/logo/pc/result.png" alt="å›¾æ ‡" title="Baidu"></p></blockquote><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åƒç½‘å€é‚£æ ·å¯¹å›¾ç‰‡ç½‘å€ä½¿ç”¨å˜é‡:</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">è¿™ä¸ªé“¾æ¥ç”¨ Baidu ä½œä¸ºç½‘å€å˜é‡ <span class="token url">[<span class="token content">Baidu</span>][<span class="token variable">Baidu</span>]</span>ã€‚ç„¶ååœ¨æ–‡æ¡£çš„ç»“å°¾ä¸ºå˜é‡èµ‹å€¼ï¼ˆç½‘å€ï¼‰<span class="token url-reference url"><span class="token punctuation">[</span><span class="token variable">Baidu</span><span class="token punctuation">]</span><span class="token punctuation">:</span> https://www.baidu.com/img/flexible/logo/pc/result.png</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>è¿™ä¸ªé“¾æ¥ç”¨ Baidu ä½œä¸ºç½‘å€å˜é‡ [Baidu][Baidu]ã€‚<br>ç„¶ååœ¨æ–‡æ¡£çš„ç»“å°¾ä¸ºå˜é‡èµ‹å€¼ï¼ˆç½‘å€ï¼‰</p><p>[Baidu]: <a href="https://www.baidu.com/img/flexible/logo/pc/result.png">https://www.baidu.com/img/flexible/logo/pc/result.png</a></p></blockquote><p>Markdown è¿˜æ²¡æœ‰åŠæ³•æŒ‡å®šå›¾ç‰‡çš„é«˜åº¦ä¸å®½åº¦ï¼Œå¦‚æœä½ éœ€è¦çš„è¯ï¼Œä½ å¯ä»¥ä½¿ç”¨æ™®é€šçš„ <code>&lt;img&gt;</code> æ ‡ç­¾ã€‚</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.baidu.com/img/flexible/logo/pc/result.png<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30%<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p><img src= "https://cdn.jsdelivr.net/gh/Eurkon/CDN/hexo/images/user/loading.gif" data-lazy-src="https://www.baidu.com/img/flexible/logo/pc/result.png" width="30%"></p></blockquote><h1 id="Markdown-è¡¨æ ¼"><a href="#Markdown-è¡¨æ ¼" class="headerlink" title="Markdown è¡¨æ ¼"></a>Markdown è¡¨æ ¼</h1><p>Markdown åˆ¶ä½œè¡¨æ ¼ä½¿ç”¨ <code>|</code> æ¥åˆ†éš”ä¸åŒçš„å•å…ƒæ ¼ï¼Œä½¿ç”¨ <code>-</code> æ¥åˆ†éš”è¡¨å¤´å’Œå…¶ä»–è¡Œã€‚</p><p>è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token table"><span class="token table-header-row"><span class="token punctuation">|</span><span class="token table-header important"> è¡¨å¤´ </span><span class="token punctuation">|</span><span class="token table-header important"> è¡¨å¤´ </span><span class="token punctuation">|</span></span><span class="token table-line"><span class="token punctuation">|</span> <span class="token punctuation">----</span> <span class="token punctuation">|</span> <span class="token punctuation">----</span> <span class="token punctuation">|</span></span><span class="token table-data-rows"><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><div class="table-container"><table><thead><tr><th>è¡¨å¤´</th><th>è¡¨å¤´</th></tr></thead><tbody><tr><td>å•å…ƒæ ¼</td><td>å•å…ƒæ ¼</td></tr><tr><td>å•å…ƒæ ¼</td><td>å•å…ƒæ ¼</td></tr></tbody></table></div></blockquote><p><br></p><p><strong>å¯¹é½æ–¹å¼</strong></p><p>æˆ‘ä»¬å¯ä»¥è®¾ç½®è¡¨æ ¼çš„å¯¹é½æ–¹å¼ï¼š</p><ul><li><code>-:</code> è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å³å¯¹é½ã€‚</li><li><code>:-</code> è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å·¦å¯¹é½ã€‚</li><li><code>:-:</code> è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…ä¸­å¯¹é½ã€‚</li></ul><p>å®ä¾‹å¦‚ä¸‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token table"><span class="token table-header-row"><span class="token punctuation">|</span><span class="token table-header important"> å·¦å¯¹é½ </span><span class="token punctuation">|</span><span class="token table-header important"> å±…ä¸­å¯¹é½ </span><span class="token punctuation">|</span><span class="token table-header important"> å³å¯¹é½ </span><span class="token punctuation">|</span></span><span class="token table-line"><span class="token punctuation">|</span> <span class="token punctuation">:-----</span><span class="token punctuation">|</span> <span class="token punctuation">:----:</span> <span class="token punctuation">|</span> <span class="token punctuation">----:</span> <span class="token punctuation">|</span></span><span class="token table-data-rows"><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><div class="table-container"><table><thead><tr><th style="text-align:left">å·¦å¯¹é½</th><th style="text-align:center">å±…ä¸­å¯¹é½</th><th style="text-align:right">å³å¯¹é½</th></tr></thead><tbody><tr><td style="text-align:left">å•å…ƒæ ¼</td><td style="text-align:center">å•å…ƒæ ¼</td><td style="text-align:right">å•å…ƒæ ¼</td></tr><tr><td style="text-align:left">å•å…ƒæ ¼</td><td style="text-align:center">å•å…ƒæ ¼</td><td style="text-align:right">å•å…ƒæ ¼</td></tr></tbody></table></div></blockquote><h1 id="Markdown-é«˜çº§æŠ€å·§"><a href="#Markdown-é«˜çº§æŠ€å·§" class="headerlink" title="Markdown é«˜çº§æŠ€å·§"></a>Markdown é«˜çº§æŠ€å·§</h1><h2 id="æ”¯æŒçš„-HTML-å…ƒç´ "><a href="#æ”¯æŒçš„-HTML-å…ƒç´ " class="headerlink" title="æ”¯æŒçš„ HTML å…ƒç´ "></a>æ”¯æŒçš„ HTML å…ƒç´ </h2><p>ä¸åœ¨ Markdown æ¶µç›–èŒƒå›´ä¹‹å†…çš„æ ‡ç­¾ï¼Œéƒ½å¯ä»¥ç›´æ¥åœ¨æ–‡æ¡£é‡Œé¢ç”¨ HTML æ’°å†™ã€‚</p><p>ç›®å‰æ”¯æŒçš„ HTML å…ƒç´ æœ‰ï¼š<code>&lt;kbd&gt;</code> <code>&lt;b&gt;</code> <code>&lt;i&gt;</code> <code>&lt;em&gt;</code> <code>&lt;sup&gt;</code> <code>&lt;sub&gt;</code> <code>&lt;br&gt;</code> ç­‰ ï¼Œå¦‚ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">æ™®é€šæ–‡æœ¬ï¼šä½¿ç”¨ Ctrl+Alt+Del é‡å¯ç”µè„‘HTMLæ–‡æœ¬ï¼šä½¿ç”¨ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>kbd</span><span class="token punctuation">></span></span>Ctrl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>kbd</span><span class="token punctuation">></span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>kbd</span><span class="token punctuation">></span></span>Alt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>kbd</span><span class="token punctuation">></span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>kbd</span><span class="token punctuation">></span></span>Del<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>kbd</span><span class="token punctuation">></span></span> é‡å¯ç”µè„‘<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>æ™®é€šæ–‡æœ¬ï¼šä½¿ç”¨ Ctrl+Alt+Del é‡å¯ç”µè„‘<br>HTMLæ–‡æœ¬ï¼šä½¿ç”¨ <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>Del</kbd> é‡å¯ç”µè„‘</p></blockquote><h2 id="è½¬ä¹‰"><a href="#è½¬ä¹‰" class="headerlink" title="è½¬ä¹‰"></a>è½¬ä¹‰</h2><p>Markdown ä½¿ç”¨äº†å¾ˆå¤šç‰¹æ®Šç¬¦å·æ¥è¡¨ç¤ºç‰¹å®šçš„æ„ä¹‰ï¼Œå¦‚æœéœ€è¦æ˜¾ç¤ºç‰¹å®šçš„ç¬¦å·åˆ™éœ€è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ï¼ŒMarkdown ä½¿ç”¨åæ–œæ è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token bold"><span class="token punctuation">**</span><span class="token content">æ–‡æœ¬åŠ ç²—</span><span class="token punctuation">**</span></span> \*\* æ­£å¸¸æ˜¾ç¤ºæ˜Ÿå· \*\*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p><strong>æ–‡æœ¬åŠ ç²—</strong><br>** æ­£å¸¸æ˜¾ç¤ºæ˜Ÿå· **</p></blockquote><p>Markdown æ”¯æŒä»¥ä¸‹è¿™äº›ç¬¦å·å‰é¢åŠ ä¸Šåæ–œæ æ¥å¸®åŠ©æ’å…¥æ™®é€šçš„ç¬¦å·ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">\   åæ–œçº¿`   åå¼•å·<span class="token list punctuation">*</span>   æ˜Ÿå·_   ä¸‹åˆ’çº¿&#123;&#125;  èŠ±æ‹¬å·[]  æ–¹æ‹¬å·()  å°æ‹¬å·<span class="token title important"><span class="token punctuation">#</span>   äº•å­—å·</span><span class="token list punctuation">+</span>   åŠ å·<span class="token list punctuation">-</span>   å‡å·.   è‹±æ–‡å¥ç‚¹!   æ„Ÿå¹å·<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><h2 id="å…¬å¼"><a href="#å…¬å¼" class="headerlink" title="å…¬å¼"></a>å…¬å¼</h2><p>å½“ä½ éœ€è¦åœ¨ç¼–è¾‘å™¨ä¸­æ’å…¥æ•°å­¦å…¬å¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªç¾å…ƒç¬¦å·<code>$$</code>åŒ…è£¹ <code>TeX</code> æˆ– <code>LaTeX</code> æ ¼å¼çš„æ•°å­¦å…¬å¼æ¥å®ç°ã€‚æäº¤åï¼Œé—®ç­”å’Œæ–‡ç« é¡µä¼šæ ¹æ®éœ€è¦åŠ è½½ <code>Mathjax</code> å¯¹æ•°å­¦å…¬å¼è¿›è¡Œæ¸²æŸ“ã€‚å¦‚ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">$$\mathbf&#123;V&#125;_1 \times \mathbf&#123;V&#125;_2 =  \begin&#123;vmatrix&#125; \mathbf&#123;i&#125; &amp; \mathbf&#123;j&#125; &amp; \mathbf&#123;k&#125; \\\frac&#123;\partial X&#125;&#123;\partial u&#125; &amp;  \frac&#123;\partial Y&#125;&#123;\partial u&#125; &amp; 0 \\\frac&#123;\partial X&#125;&#123;\partial v&#125; &amp;  \frac&#123;\partial Y&#125;&#123;\partial v&#125; &amp; 0 \\\end&#123;vmatrix&#125;$&#123;$tep1&#125;&#123;\style&#123;visibility:hidden&#125;&#123;(x+1)(x+1)&#125;&#125;$$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><script type="math/tex; mode=display">\mathbf{V}_1 \times \mathbf{V}_2 =  \begin{vmatrix} \mathbf{i} & \mathbf{j} & \mathbf{k} \\\frac{\partial X}{\partial u} &  \frac{\partial Y}{\partial u} & 0 \\\frac{\partial X}{\partial v} &  \frac{\partial Y}{\partial v} & 0 \\\end{vmatrix}${$tep1}{\style{visibility:hidden}{(x+1)(x+1)}}</script></blockquote><h2 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h2><ol><li><p>æ¨ªå‘æµç¨‹å›¾æºç æ ¼å¼ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">[<span class="token content">```</span>][<span class="token variable">mermaid</span>]</span>graph LRA[æ–¹å½¢] -->B(åœ†è§’)    B --> C&#123;æ¡ä»¶a&#125;    C -->|a=1| D[ç»“æœ1]    C -->|a=2| E[ç»“æœ2]    F[æ¨ªå‘æµç¨‹å›¾][```]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="mermaid">  graph LRA[æ–¹å½¢] -->B(åœ†è§’)   B --> C{æ¡ä»¶a}   C -->|a=1| D[ç»“æœ1]   C -->|a=2| E[ç»“æœ2]   F[æ¨ªå‘æµç¨‹å›¾]</pre></p></li><li><p>ç«–å‘æµç¨‹å›¾æºç æ ¼å¼ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">[<span class="token content">```</span>][<span class="token variable">mermaid</span>]</span>graph TDA[æ–¹å½¢] --> B(åœ†è§’)    B --> C&#123;æ¡ä»¶a&#125;    C --> |a=1| D[ç»“æœ1]    C --> |a=2| E[ç»“æœ2]    F[ç«–å‘æµç¨‹å›¾][```]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="mermaid">  graph TDA[æ–¹å½¢] --> B(åœ†è§’)   B --> C{æ¡ä»¶a}   C --> |a=1| D[ç»“æœ1]   C --> |a=2| E[ç»“æœ2]   F[ç«–å‘æµç¨‹å›¾]</pre></p></li><li><p>æ ‡å‡†æµç¨‹å›¾æºç æ ¼å¼ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">[<span class="token content">```</span>][<span class="token variable">flow</span>]</span>st=>start: å¼€å§‹æ¡†op=>operation: å¤„ç†æ¡†cond=>condition: åˆ¤æ–­æ¡†(æ˜¯æˆ–å¦?)sub1=>subroutine: å­æµç¨‹io=>inputoutput: è¾“å…¥è¾“å‡ºæ¡†e=>end: ç»“æŸæ¡†st->op->condcond(yes)->io->econd(no)->sub1(right)->op[```]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="flowchart-0" class="flow-chart"></div></p></li><li><p>æ ‡å‡†æµç¨‹å›¾æºç æ ¼å¼ï¼ˆæ¨ªå‘ï¼‰ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">[<span class="token content">```</span>][<span class="token variable">flow</span>]</span>st=>start: å¼€å§‹æ¡†op=>operation: å¤„ç†æ¡†cond=>condition: åˆ¤æ–­æ¡†(æ˜¯æˆ–å¦?)sub1=>subroutine: å­æµç¨‹io=>inputoutput: è¾“å…¥è¾“å‡ºæ¡†e=>end: ç»“æŸæ¡†st(right)->op(right)->condcond(yes)->io(bottom)->econd(no)->sub1(right)->op[```]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="flowchart-1" class="flow-chart"></div></p></li></ol><h2 id="æ—¶åºå›¾-é¡ºåºå›¾"><a href="#æ—¶åºå›¾-é¡ºåºå›¾" class="headerlink" title="æ—¶åºå›¾(é¡ºåºå›¾)"></a>æ—¶åºå›¾(é¡ºåºå›¾)</h2><ol><li><p>UMLæ—¶åºå›¾æºç æ ·ä¾‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">[<span class="token content">```</span>][<span class="token variable">sequence</span>]</span>å¯¹è±¡A->å¯¹è±¡B: å¯¹è±¡Bä½ å¥½å—?ï¼ˆè¯·æ±‚ï¼‰Note right of å¯¹è±¡B: å¯¹è±¡Bçš„æè¿°Note left of å¯¹è±¡A: å¯¹è±¡Açš„æè¿°(æç¤º)å¯¹è±¡B-->å¯¹è±¡A: æˆ‘å¾ˆå¥½(å“åº”)å¯¹è±¡A->å¯¹è±¡B: ä½ çœŸçš„å¥½å—ï¼Ÿ[```]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="sequence-0"></div></p></li><li><p>UMLæ—¶åºå›¾æºç å¤æ‚æ ·ä¾‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">[<span class="token content">```</span>][<span class="token variable">sequence</span>]</span>Title: æ ‡é¢˜ï¼šå¤æ‚ä½¿ç”¨å¯¹è±¡A->å¯¹è±¡B: å¯¹è±¡Bä½ å¥½å—?ï¼ˆè¯·æ±‚ï¼‰Note right of å¯¹è±¡B: å¯¹è±¡Bçš„æè¿°Note left of å¯¹è±¡A: å¯¹è±¡Açš„æè¿°(æç¤º)å¯¹è±¡B-->å¯¹è±¡A: æˆ‘å¾ˆå¥½(å“åº”)å¯¹è±¡B->å°ä¸‰: ä½ å¥½å—å°ä¸‰-->>å¯¹è±¡A: å¯¹è±¡Bæ‰¾æˆ‘äº†å¯¹è±¡A->å¯¹è±¡B: ä½ çœŸçš„å¥½å—ï¼ŸNote over å°ä¸‰, å¯¹è±¡B: æˆ‘ä»¬æ˜¯æœ‹å‹participant CNote right of C: æ²¡äººé™ªæˆ‘ç©[```]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><div id="sequence-1"></div></p></li><li><p>UMLæ ‡å‡†æ—¶åºå›¾æ ·ä¾‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">[<span class="token content">```</span>][<span class="token variable">mermaid</span>]</span>%% æ—¶åºå›¾ä¾‹å­ï¼Œ-> ç›´çº¿ï¼Œ-->è™šçº¿ï¼Œ->>å®çº¿ç®­å¤´  sequenceDiagram    participant å¼ ä¸‰    participant æå››    å¼ ä¸‰->ç‹äº”: ç‹äº”ä½ å¥½å—ï¼Ÿ    loop å¥åº·æ£€æŸ¥        ç‹äº”->ç‹äº”: ä¸ç–¾ç—…æˆ˜æ–—    end    Note right of ç‹äº”: åˆç† é£Ÿç‰© <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>çœ‹åŒ»ç”Ÿ...    æå››-->>å¼ ä¸‰: å¾ˆå¥½!    ç‹äº”->æå››: ä½ æ€ä¹ˆæ ·?    æå››-->ç‹äº”: å¾ˆå¥½![```]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><pre class="mermaid">  %% æ—¶åºå›¾ä¾‹å­ï¼Œ-> ç›´çº¿ï¼Œ-->è™šçº¿ï¼Œ->>å®çº¿ç®­å¤´ sequenceDiagram   participant å¼ ä¸‰   participant æå››   å¼ ä¸‰->ç‹äº”: ç‹äº”ä½ å¥½å—ï¼Ÿ   loop å¥åº·æ£€æŸ¥       ç‹äº”->ç‹äº”: ä¸ç–¾ç—…æˆ˜æ–—   end   Note right of ç‹äº”: åˆç† é£Ÿç‰© <br>çœ‹åŒ»ç”Ÿ...   æå››-->>å¼ ä¸‰: å¾ˆå¥½!   ç‹äº”->æå››: ä½ æ€ä¹ˆæ ·?   æå››-->ç‹äº”: å¾ˆå¥½!</pre></p></li></ol><h2 id="ç”˜ç‰¹å›¾"><a href="#ç”˜ç‰¹å›¾" class="headerlink" title="ç”˜ç‰¹å›¾"></a>ç”˜ç‰¹å›¾</h2><p>ç”˜ç‰¹å›¾æ ·ä¾‹ï¼š</p><p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url">[<span class="token content">```</span>][<span class="token variable">mermaid</span>]</span>%% è¯­æ³•ç¤ºä¾‹  gantt  dateFormat YYYY-MM-DD  title è½¯ä»¶å¼€å‘ç”˜ç‰¹å›¾  section è®¾è®¡    éœ€æ±‚: done, des1, 2014-01-06, 2014-01-08    åŸå‹: active, des2, 2014-01-09, 3d    UIè®¾è®¡: des3, after des2, 5d    æœªæ¥ä»»åŠ¡: des4, after des3, 5d  section å¼€å‘    ç†è§£éœ€æ±‚: crit, done, 2014-01-06, 24h    è®¾è®¡æ¡†æ¶: crit, done, after des2, 2d    å¼€å‘: crit, active, 3d    æœªæ¥ä»»åŠ¡: crit, 5d    ç©è€: 2d  section æµ‹è¯•    åŠŸèƒ½æµ‹è¯•: active, a1, after des3, 3d    å‹åŠ›æµ‹è¯•: after a1, 20h    æµ‹è¯•æŠ¥å‘Š: 48h[```]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p><p>æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><code>mermaid%% è¯­æ³•ç¤ºä¾‹  gantt  dateFormat YYYY-MM-DD  title è½¯ä»¶å¼€å‘ç”˜ç‰¹å›¾  section è®¾è®¡    éœ€æ±‚: done, des1, 2014-01-06, 2014-01-08    åŸå‹: active, des2, 2014-01-09, 3d    UIè®¾è®¡: des3, after des2, 5d    æœªæ¥ä»»åŠ¡: des4, after des3, 5d  section å¼€å‘    ç†è§£éœ€æ±‚: crit, done, 2014-01-06, 24h    è®¾è®¡æ¡†æ¶: crit, done, after des2, 2d    å¼€å‘: crit, active, 3d    æœªæ¥ä»»åŠ¡: crit, 5d    ç©è€: 2d  section æµ‹è¯•    åŠŸèƒ½æµ‹è¯•: active, a1, after des3, 3d    å‹åŠ›æµ‹è¯•: after a1, 20h    æµ‹è¯•æŠ¥å‘Š: 48h</code><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">  st=>start: å¼€å§‹æ¡†  op=>operation: å¤„ç†æ¡†  cond=>condition: åˆ¤æ–­æ¡†(æ˜¯æˆ–å¦?)  sub1=>subroutine: å­æµç¨‹  io=>inputoutput: è¾“å…¥è¾“å‡ºæ¡†  e=>end: ç»“æŸæ¡†  st->op->cond  cond(yes)->io->e  cond(no)->sub1(right)->op</textarea><textarea id="flowchart-0-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><textarea id="flowchart-1-code" style="display: none">  st=>start: å¼€å§‹æ¡†  op=>operation: å¤„ç†æ¡†  cond=>condition: åˆ¤æ–­æ¡†(æ˜¯æˆ–å¦?)  sub1=>subroutine: å­æµç¨‹  io=>inputoutput: è¾“å…¥è¾“å‡ºæ¡†  e=>end: ç»“æŸæ¡†  st(right)->op(right)->cond  cond(yes)->io(bottom)->e  cond(no)->sub1(right)->op</textarea><textarea id="flowchart-1-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-1-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-1-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-1", options);</script><script src="https://cdnjs.cloudflare.com/ajax/libs/webfont/1.6.27/webfontloader.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.1/snap.svg-min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js"></script><textarea id="sequence-0-code" style="display: none">  å¯¹è±¡A->å¯¹è±¡B: å¯¹è±¡Bä½ å¥½å—?ï¼ˆè¯·æ±‚ï¼‰  Note right of å¯¹è±¡B: å¯¹è±¡Bçš„æè¿°  Note left of å¯¹è±¡A: å¯¹è±¡Açš„æè¿°(æç¤º)  å¯¹è±¡B-->å¯¹è±¡A: æˆ‘å¾ˆå¥½(å“åº”)  å¯¹è±¡A->å¯¹è±¡B: ä½ çœŸçš„å¥½å—ï¼Ÿ</textarea><textarea id="sequence-0-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("sequence-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("sequence-0-options").value));  var diagram = Diagram.parse(code);  diagram.drawSVG("sequence-0", options);</script><textarea id="sequence-1-code" style="display: none">  Title: æ ‡é¢˜ï¼šå¤æ‚ä½¿ç”¨  å¯¹è±¡A->å¯¹è±¡B: å¯¹è±¡Bä½ å¥½å—?ï¼ˆè¯·æ±‚ï¼‰  Note right of å¯¹è±¡B: å¯¹è±¡Bçš„æè¿°  Note left of å¯¹è±¡A: å¯¹è±¡Açš„æè¿°(æç¤º)  å¯¹è±¡B-->å¯¹è±¡A: æˆ‘å¾ˆå¥½(å“åº”)  å¯¹è±¡B->å°ä¸‰: ä½ å¥½å—  å°ä¸‰-->>å¯¹è±¡A: å¯¹è±¡Bæ‰¾æˆ‘äº†  å¯¹è±¡A->å¯¹è±¡B: ä½ çœŸçš„å¥½å—ï¼Ÿ  Note over å°ä¸‰, å¯¹è±¡B: æˆ‘ä»¬æ˜¯æœ‹å‹  participant C  Note right of C: æ²¡äººé™ªæˆ‘ç©</textarea><textarea id="sequence-1-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("sequence-1-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("sequence-1-options").value));  var diagram = Diagram.parse(code);  diagram.drawSVG("sequence-1", options);</script></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ“ƒMarkdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Front-matter</title>
      <link href="post/31e4c77c.html"/>
      <url>post/31e4c77c.html</url>
      
        <content type="html"><![CDATA[<h1 id="Page-Front-matter"><a href="#Page-Front-matter" class="headerlink" title="Page Front-matter"></a>Page Front-matter</h1><div class="table-container"><table><thead><tr><th>å†™æ³•</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>title</td><td>ã€å¿…éœ€ã€‘é¡µé¢æ ‡é¢˜</td></tr><tr><td>date</td><td>ã€å¿…éœ€ã€‘é¡µé¢åˆ›å»ºæ—¥æœŸ</td></tr><tr><td>type</td><td>ã€å¿…éœ€ã€‘æ ‡ç­¾ã€åˆ†ç±»å’Œå‹æƒ…é“¾æ¥ä¸‰ä¸ªé¡µé¢éœ€è¦é…ç½®</td></tr><tr><td>updated</td><td>ã€å¿…éœ€ã€‘æ ‡ç­¾ã€åˆ†ç±»å’Œå‹æƒ…é“¾æ¥ä¸‰ä¸ªé¡µé¢éœ€è¦é…ç½®</td></tr><tr><td>description</td><td>ã€å¯é€‰ã€‘é¡µé¢æè¿°</td></tr><tr><td>keywords</td><td>ã€å¯é€‰ã€‘é¡µé¢å…³é”®å­—</td></tr><tr><td>comments</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤ºé¡µé¢è¯„è®ºæ¨¡å— (é»˜è®¤ true)</td></tr><tr><td>top_img</td><td>ã€å¯é€‰ã€‘é¡µé¢é¡¶éƒ¨å›¾ç‰‡</td></tr><tr><td>mathjax</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤º mathjax (å½“è®¾ç½®mathjax çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</td></tr><tr><td>katex</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤º katex (å½“è®¾ç½® katex çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</td></tr><tr><td>aside</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤ºä¾§è¾¹æ  (é»˜è®¤ true)</td></tr><tr><td>aplayer</td><td>ã€å¯é€‰ã€‘åœ¨éœ€è¦çš„é¡µé¢åŠ è½½ aplayer çš„ js å’Œ css</td></tr><tr><td>highlight_shrink</td><td>ã€å¯é€‰ã€‘é…ç½®ä»£ç æ¡†æ˜¯å¦å±•å¼€ (true/false) (é»˜è®¤ä¸ºè®¾ç½®ä¸­ highlight_shrink çš„é…ç½®)</td></tr></tbody></table></div><h1 id="Post-Front-matter"><a href="#Post-Front-matter" class="headerlink" title="Post Front-matter"></a>Post Front-matter</h1><div class="table-container"><table><thead><tr><th>å†™æ³•</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>title</td><td>ã€å¿…éœ€ã€‘æ–‡ç« æ ‡é¢˜</td></tr><tr><td>date</td><td>ã€å¿…éœ€ã€‘æ–‡ç« åˆ›å»ºæ—¥æœŸ</td></tr><tr><td>updated</td><td>ã€å¯é€‰ã€‘æ–‡ç« æ›´æ–°æ—¥æœŸ</td></tr><tr><td>tags</td><td>ã€å¯é€‰ã€‘æ–‡ç« æ ‡ç­¾</td></tr><tr><td>categories</td><td>ã€å¯é€‰ã€‘æ–‡ç« åˆ†ç±»</td></tr><tr><td>keywords</td><td>ã€å¯é€‰ã€‘æ–‡ç« å…³é”®å­—</td></tr><tr><td>description</td><td>ã€å¯é€‰ã€‘æ–‡ç« æè¿°</td></tr><tr><td>top_img</td><td>ã€å¯é€‰ã€‘æ–‡ç« é¡¶éƒ¨å›¾ç‰‡</td></tr><tr><td>cover</td><td>ã€å¯é€‰ã€‘æ–‡ç« ç¼©ç•¥å›¾ (å¦‚æœæ²¡æœ‰è®¾ç½® top_imgï¼Œæ–‡ç« é¡µé¡¶éƒ¨å°†æ˜¾ç¤ºç¼©ç•¥å›¾ï¼Œå¯è®¾ä¸º false/å›¾ç‰‡åœ°å€/ç•™ç©º)</td></tr><tr><td>comments</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« è¯„è®ºæ¨¡å— (é»˜è®¤ true)</td></tr><tr><td>toc</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç«  TOC (é»˜è®¤ä¸ºè®¾ç½®ä¸­ toc çš„ enable é…ç½®)</td></tr><tr><td>toc_number</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤º toc_number (é»˜è®¤ä¸ºè®¾ç½®ä¸­ toc çš„ number é…ç½®)</td></tr><tr><td>copyright</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« ç‰ˆæƒæ¨¡å— (é»˜è®¤ä¸ºè®¾ç½®ä¸­ post_copyright çš„ enable é…ç½®)</td></tr><tr><td>copyright_author</td><td>ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…</td></tr><tr><td>copyright_author_href</td><td>ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…é“¾æ¥</td></tr><tr><td>copyright_url</td><td>ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ç‰ˆæƒé“¾æ¥</td></tr><tr><td>copyright_info</td><td>ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„ç‰ˆæƒå£°æ˜æ–‡å­—</td></tr><tr><td>mathjax</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤º mathjax (å½“è®¾ç½® mathjax çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</td></tr><tr><td>katex</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤º katex (å½“è®¾ç½® katex çš„ per_page: false æ—¶ï¼Œæ‰éœ€è¦é…ç½®ï¼Œé»˜è®¤ false)</td></tr><tr><td>aplayer</td><td>ã€å¯é€‰ã€‘åœ¨éœ€è¦çš„é¡µé¢åŠ è½½ aplayer çš„ js å’Œ css</td></tr><tr><td>highlight_shrink</td><td>ã€å¯é€‰ã€‘é…ç½®ä»£ç æ¡†æ˜¯å¦å±•å¼€ (true/false) (é»˜è®¤ä¸ºè®¾ç½®ä¸­ highlight_shrink çš„é…ç½®)</td></tr><tr><td>aside</td><td>ã€å¯é€‰ã€‘æ˜¾ç¤ºä¾§è¾¹æ  (é»˜è®¤ true)</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ’¿Hexo </tag>
            
            <tag> ğŸ¦‹Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello Hexo</title>
      <link href="post/a1751c09.html"/>
      <url>post/a1751c09.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ hexo new &quot;My New Post&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></p><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> ğŸ“–æ•™ç¨‹ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ğŸ’¿Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
